/*! For license information please see main.bundle.js.LICENSE.txt */
(function(){var __webpack_modules__={"./AlertBox.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){var i=function(t){"%inherit%"!==t&&(e.UIComponent.prototype.constructor.call(this),this.setText(t))};return i.STYLE_SUCCESS="success",i.STYLE_INFO="info",i.STYLE_DANGER="danger",i.STYLE_WARNING="warning",i.STYLE_PRIMARY="primary",i.STYLE_DEFAULT="default",(i.prototype=new e.UIComponent("%inherit%")).constructor=i,i.prototype._createElem=function(){return t("<div>").addClass("alert alert-default")},i.prototype.setText=function(e){return this._elem.text(e),this},i.prototype.getText=function(){return this._elem.text()},i.prototype.setHtml=function(e){return this._elem.html(e),this},i.prototype.getHtml=function(){return this._elem.html()},i.prototype.setBoxStyle=function(e){return this._elem.removeClass("alert-success alert-danger alert-info alert-warning alert-primary alert-default"),e===i.STYLE_DANGER?this._elem.addClass("alert-danger"):e===i.STYLE_SUCCESS?this._elem.addClass("alert-success"):e===i.STYLE_INFO?this._elem.addClass("alert-info"):e===i.STYLE_WARNING?this._elem.addClass("alert-warning"):e===i.STYLE_PRIMARY?this._elem.addClass("alert-primary"):e===i.STYLE_DEFAULT&&this._elem.addClass("alert-default"),this},i}.apply(t,n))||(e.exports=o)},"./CheckBox.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./WB_ToolTipControl.class.js"),i("./lib/jquery-1.11.3.min.js")],o=function(e,t,i){var n=function(){this.__construct.apply(this,arguments)};return(n.prototype=new e.UIComponent("%inherit%")).constructor=n,i.extend(n,{_elemIndex:0}),i.extend(n.prototype,{_label:null,_labelComp:null,_input:null,_inline:null,__construct:function(t,o,s){this._inline=!(!s||t instanceof e.UIComponent),e.UIComponent.prototype.constructor.call(this);var r="ui_checkbox_id"+n._elemIndex;n._elemIndex++,this._elem.attr({for:r}),this._input=i("<input>").attr({type:"checkbox",id:r});var a=this;this._input.on("change",(function(){a.onValueChanged()})),t instanceof e.UIComponent?(this._elem.addClass("wb-compo-cbr"),this._elem.append(i("<label>").append(this._input)),this._labelComp=t,this._labelComp.addClass("wb-compo-cbr-label"),this._labelComp.getElem().appendTo(this._elem)):(this._labelElem=i("<span>"),this._inline?this._elem.append(this._input).append(this._labelElem):this._elem.append(i("<label>").append(this._input).append(this._labelElem)),this.setLabel(t)),this.setValue(o)},_createElem:function(){return this._inline?i("<label>").addClass("checkbox-inline wb-checkbox-ctrl"):i("<div>").addClass("checkbox wb-checkbox-ctrl")},onChange:function(e){var t=this;return this._input.on("change",(function(){return e(!!t._input[0].checked)})),this},setLabel:function(e){return this._label=e,this._labelElem&&this._labelElem.text(e),this},getLabel:function(){return this._label},setHelpText:function(e,i){return this._helpText!==e&&(null===e||""===e?this._helpTextElem&&(this._helpTextElem.remove(),this._helpTextElem=null):(this._helpTextElem||(this._helpTextElem=new t("?",e,i),this._helpTextElem.elem.insertAfter(this._labelElem)),wb_builder.rtl&&("left"===i?i="right":"right"===i&&(i="left")),this._helpTextElem.setTitle(e,!0),this._helpTextElem.setPlacement(i)),this._helpText=e),this},setValue:function(e){this._input.prop("checked",!!e)},getValue:function(){return this._input.is(":checked")},setEnabled:function(t){e.UIComponent.prototype.setEnabled.call(this,t),t?(this._input.removeClass("disabled"),this._input.removeAttr("disabled")):(this._input.addClass("disabled"),this._input.attr("disabled","disabled"))},on:function(t,i){return"change"===t?this._input.on(t,i):e.UIComponent.prototype.on.call(this,t,i),this},off:function(t,i){return"change"===t?this._input.off(t,i):e.UIComponent.prototype.off.call(this,t,i),this},trigger:function(t,i){return"change"===t?this._input.trigger(t,i):e.UIComponent.prototype.trigger.call(this,t,i),this},setComponentOptions:function(t){e.UIComponent.prototype.setComponentOptions.call(this,t)}}),n.supportsMultipleObjectBindings=function(){return!1},n}.apply(t,n),void 0===o||(e.exports=o)},"./EditMenuItemsDialog.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./WB_Dialog.class.js"),i("./UIComponent.ts"),i("./VerticalLayout.ts"),i("./HorizontalLayout.ts"),i("./FlowLayout.ts"),i("./TreeListControl.js"),i("./Label.ts"),i("./TextField.ts"),i("./MultilangTextField.js"),i("./RadioBox.js"),i("./CheckBox.js"),i("./DropdownBox.ts"),i("./UIButton.ts"),i("./IdIndexedList.js"),i("./BuilderEvent.ts"),i("./util/MenuList.ts"),i("./Service.ts")],o=function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,m,g,f,y){"use strict";var b={background:"#F5F5F5",border:"1px solid #E3E3E3",padding:"8px 2px"},v=window,_=function(){this.__construct.apply(this,arguments)};return(_.prototype=new t("%inherit%")).constructor=_,e.extend(_,{MODE_EDIT:"edit",MODE_NEW:"new"}),e.extend(_.prototype,{_base:null,_tree:null,_leftPane:null,_panel:null,_currMenu:null,_mode:null,_newDialog:null,applyFunc:null,_newApplyFunc:null,_applyButton:null,_fromApplyAction:!1,_waitingToReturn:!1,_visible:!1,_pages:null,_menuItems:null,_liteVersionMessage:null,_liteVersionPopup:null,__construct:function(e){this._mode=e||_.MODE_EDIT,t.prototype.__construct.call(this,this._mode===_.MODE_NEW?__("Add Menu Item"):__("Edit Menu Items"),!1),this.setNoScroll();var i=this;if(this._base=new o.HorizontalLayout,this._mode===_.MODE_EDIT){this._leftPane=new n.VerticalLayout,this._leftPane.css(b),this._tree=new r,this._tree.moveValidateFunc=function(e,t){return!(t&&t.getParent()&&t.getParent().getParent()&&!t.getParent().getParent().isRoot())},this._tree.selectFunc=function(e){var t,n,o,s,r;for(i._panel.selectItem(e,!i._visible),t=0,n=i._tree.items.getItemCount();t<n;t++)s=!(r=(o=i._tree.items.getItem(t)).getOriginal()).targetId||"page"!==r.type&&"internal"!==r.type?null:i._pages.getItemById(r.targetId),o.setHome(s&&s.isFront),o.setLink("internal"===r.type||"external"===r.type||"anchor"===r.type||"empty"===r.type),o.setPopup("popup"===r.subType),o.setNoMenu(r.noMenu)},this._tree.deleteFunc=function(e){if("page"===e.getOriginal().type){var t=__tr(e.getOriginal().name,"__DEFAULT__",null,!0,!0),n=v.wb_builder.site.getPage(e.getOriginal().targetId);if(t&&n&&n.saved&&!confirm(__("You are about to delete page %s entirely from your website.").replace("%s",'"'+t+'"')+" "+__("Do you really want to remove it?")))return!1;var o=function(t){for(var i=0,n=t.getItemCount();i<n;i++){var s=t.getItem(i);"internal"===s.getOriginal().type&&s.getOriginal().targetId==e.getOriginal().targetId&&(s.getOriginal().targetId=null,s.getOriginal().type="empty"),o(s)}};o(i._tree.items);for(var s=0,r=i._pages.getItemCount();s<r;s++){var a=i._pages.getItem(s);if(a&&a.id==e.getOriginal().targetId){i._pages.removeItem(a),i._panel.loadData(i._pages);break}}}},this._tree.onItemsCountChanged=function(e){i._tree.items.getItemCount()>0?i.buttons.find(".btn-success").removeAttr("disabled"):i.buttons.find(".btn-success").attr("disabled","disabled")},this._leftPane.addChild(this._tree),this._leftPane.applyLayoutCellCss(0,{height:306,overflowY:"auto"});var s=new p.UIButton(__("New Item"),p.UIButton.STYLE_LINK,"glyphicon glyphicon-plus");s.css({marginTop:"10px"}),s.on("click",(function(){i.getNewDialog().setMenu(i._currMenu,i._pages),i.getNewDialog().applyFunc=i._newApplyFunc,i._waitingToReturn=!0,i.getNewDialog().getPanel().setDisabled(!i.canAddPage()),i.getNewDialog().setVisible(!0),y.Service.HelpSystemPlayer.notify("item-plugin-"+i._currMenu.getClassType()+"-menu-edit-newItemButton-click",i._currMenu)})),this.fields.newItemButton=s,this._newApplyFunc=function(e){i._menuItems.newItem(e.getOriginal(),!0),e.getOriginal()._ignoreId=!0,i._waitingToReturn=!1,i._handleItemCreating(e),i._tree.items.addItem(e),i._tree.updateTree(),i._tree.selectItem(e)},this._leftPane.addChild(s);var a=new _.Note(__("Use Drag and Drop to sort and categorize items"));this._leftPane.addChild(a),wb_builder.rtl||this._base.addChild(this._leftPane),this._menuItems=new m}this._pages=new m,this._panel=new _.EditPanel(this.fields,this._mode),this._panel.setDialog(this),this.fields.fldName.onChange=function(){y.Service.HelpSystemPlayer.notify("item-plugin-"+i._currMenu.getClassType()+"-menu-"+(i._mode===_.MODE_EDIT?"edit":"new")+"-fldName-change",i._currMenu)},this._base.addChild(this._panel),this._mode===_.MODE_EDIT&&(wb_builder.rtl?(this._base.addChild(this._leftPane),this._base.setColWeight(0,7),this._base.setColWeight(1,5),this._panel.css({marginRight:"10px"})):(this._base.setColWeight(0,5),this._base.setColWeight(1,7),this._panel.css({marginLeft:"10px"}))),this._mode===_.MODE_NEW?(this.setSize(385,null),this._panel.css({marginLeft:"10px",marginRight:"10px"})):this._mode===_.MODE_EDIT&&this.setSize(685,null),this.setContent(this._base.getElem()),this.addButton(__("Cancel"),(function(){i.setVisible(!1)})),this.addButton(__("Apply"),(function(){i._applyAction()}),!0)},canAddPage:function(){var e=null;return this._tree&&(e=this._tree.items.getItemCount(!0,(function(e){return"page"===e.type}))),v.wb_builder.maxMenuItems<=0||e+v.WB_Menu.getTotalPages(null!==e?this._currMenu:null)<v.wb_builder.maxMenuItems},setLiteVersionMessage:function(e){this._liteVersionMessage=e},getPanel:function(){return this._panel},getApplyButton:function(){return this._applyButton||(this._applyButton=this.buttons.find(".btn-success")),this._applyButton},getNewDialog:function(){return this._mode===_.MODE_NEW?null:(this._newDialog||(this._newDialog=new _(_.MODE_NEW),this._newDialog.setLiteVersionMessage(this._liteVersionMessage)),this._newDialog)},setMenu:function(e,t){for(var i in this._currMenu=e,this._panel.setMenu(e),this._pages.removeAllItems(),t)this._pages.addBlockedId(t[i].id);this._pages.addItems(t,!1,!0)},setOnCancel:function(e){if(this._mode===_.MODE_NEW&&"function"==typeof e){var t=this.onClose,i=this;this.onClose=function(){"function"==typeof t&&t(),i._fromApplyAction||e()}}},_handleItemCopying:function(e){var t=e.getOriginal();if("copyFromTargetId"in t){var i=this._pages.getItemById(t.copyFromTargetId);i&&(i=this._createNewPageItem(e),t.targetId=i.id),t.copyFromTargetId=null,delete t.copyFromTargetId,this._panel.loadData(this._pages)}},_handlePopupCreating:function(e){var t=e.getOriginal(),i=this._createNewPageItem(e);t.targetId=i.id,"popup"===t.subType&&(i.popupMode=!!t.popupMode,i.popupWidth=parseInt(t.popupWidth)?parseInt(t.popupWidth):null,i.popupHeight=parseInt(t.popupHeight)?parseInt(t.popupHeight):null,t.popupMode=null,delete t.popupMode,t.popupWidth=null,delete t.popupWidth,t.popupHeight=null,delete t.popupHeight),this._panel.loadData(this._pages)},_handleItemCreating:function(e){"page"===e.getOriginal().type&&("popup"===e.getOriginal().subType?this._handlePopupCreating(e):this._handleItemCopying(e))},_createNewPageItem:function(e){var t=e?e.getOriginal():null,i=this._pages.newItem();return i.title=e?e.getTitle():"",i.alias="",i.keywords="",i.description="",i.isFront=!1,i.isSingle=!1,i.copyFrom=t?t.copyFromTargetId:null,i.copyClearHeader=t&&t.copyClearHeader,i.copyClearBody=t&&t.copyClearBody,i.copyClearFooter=t&&t.copyClearFooter,i.isNew=!0,i},_applyAction:function(){var e,t=this._panel._item;this._panel.selectItem(null,!this._visible),"function"==typeof this.applyFunc?this.applyFunc.call(this,t):(v.wb_builder.setPageModified(!0),this._currMenu&&(this._mode===_.MODE_EDIT?(this._currMenu.removeAllItems(),e=this._tree.items):this._mode===_.MODE_NEW&&(this._handleItemCreating(t),(e=new r.Item("root")).addItem(t)),v.wb_builder.site.updatePageList(this._pages),y.Service.menu.updateEmptyLinks(),e&&this._currMenu.addAllItems(e),this._currMenu.updateStyle(),g.GlobalEvents.triggerEvent("pages.changed",new g.PagesChangedBuilderEvent),v.wb_builder.site.setLanding(v.wb_builder.site.landing),v.wb_builder.site.reloadPagesMiId(!0))),this._fromApplyAction=!0,this.setVisible(!1),this._currMenu&&y.Service.HelpSystemPlayer.notify("item-plugin-"+this._currMenu.getClassType()+"-menu-"+(this._mode===_.MODE_EDIT?"edit":"new")+"-apply",this._currMenu)},_loadItems:function(e,t){var i,n,o,s,a;for(i in t)for(n in a=__tr(t[i].name,"__DEFAULT__",__("New Item"),!0,!0),e.addItem(o=new r.Item(a,null,t[i].serialize(),15)),s=!t[i].targetId||"page"!==t[i].type&&"internal"!==t[i].type?null:v.wb_builder.site.getPage(t[i].targetId),this._menuItems.addItem(t[i].serialize()),o.setHome(!!s&&s.isFront),o.setLink("internal"===t[i].type||"external"===t[i].type||"anchor"===t[i].type||"empty"===t[i].type),o.setPopup("popup"===t[i].subType),o.setNoMenu(t[i].noMenu),t[i].items){this._loadItems(o,t[i].items);break}},getTreeRootItem:function(e){return this._tree&&this._tree.items?this._tree.items.getItem(e):null},selectTreeRootItem:function(e){var t=this.getTreeRootItem(e);return!!t&&(this._tree.selectItem(t,!0),!0)},setVisible:function(e,i,n){if(!n)if(e){if(this._fromApplyAction=!1,this._waitingToReturn)this._waitingToReturn=!1;else if(this._mode===_.MODE_EDIT)this._tree.items.removeAllItems(),this._menuItems.removeAllItems(),this._currMenu&&this._loadItems(this._tree.items,this._currMenu.items),this._tree.updateTree(),this._panel.loadData(this._pages),this._tree.items.getItemCount()>0&&this._tree.selectItem(this._tree.items.getItem(0));else if(this._mode===_.MODE_NEW){var o=new r.Item(__("New Page"),null,{type:"page",name:__("New Page")});this._panel.loadData(this._pages),this._panel.selectItem(o,!0)}}else this.applyFunc=null,this._panel._item=null;t.prototype.setVisible.call(this,e,i,n),n||(this._visible=!!e)}}),(_.EditPanel=function(){this.__construct.apply(this,arguments)}).prototype=new n.VerticalLayout("%inherit%"),_.EditPanel.prototype.constructor=_,e.extend(_.EditPanel,{_elemIndex:0}),e.extend(_.EditPanel.prototype,{_item:null,_currMenu:null,_dialog:null,_mode:null,_copyOptions:null,_popupOptions:null,_choosePopupOptions:null,_fldCopyPageDropdown:null,_fldPageLinkDropdown:null,_fldAnchorDropdown:null,_fldPopupDropdown:null,_linkOptions:null,_fldName:null,_fldTypePage:null,_fldTypeLink:null,_fldTypePopup:null,_fldClearHeader:null,_fldClearBody:null,_fldClearFooter:null,_itemOptions:null,_fldNewWindow:null,_fldHideInMenu:null,_fldIsDefault:null,_fldOpenPopup:null,_fldPageLink:null,_fldExternalLink:null,_fldAnchor:null,_fldEmpty:null,_pages:null,_message:null,__construct:function(e,t){this._mode=t,isNaN(_._elemIndex)&&void 0!==_._elemIndex||(_._elemIndex=0),n.VerticalLayout.prototype.constructor.call(this);var i,r,p,m=this,g=_._elemIndex;_._elemIndex++,this.addChild(new a.Label(__("Item Name"))),this.addChild(this._fldName=new c),e.fldName=this._fldName,this._fldName.css({marginBottom:0}),(i=new o.HorizontalLayout).css({marginTop:15}),this._fldTypePage=new u(__("Page"),!0,"type"+g),this._fldTypePage.on("change",(function(){m._fldTypePage.getValue()&&(m._linkOptions.setVisible(!1),m._copyOptions.setVisible(!m._item.getOriginal().id),m._popupOptions.setVisible(!1),m.setDisabled(!m._dialog.canAddPage()))})),this._fldTypeLink=new u(__("Link"),!1,"type"+g),this._fldTypeLink.on("change",(function(){m._fldTypeLink.getValue()&&(m._linkOptions.setVisible(!0),m._copyOptions.setVisible(!1),m._popupOptions.setVisible(!1),m.setDisabled(!1))})),this._fldTypePopup=new u(__("Popup"),!1,"type"+g),this._fldTypePopup.on("change",(function(){m._fldTypePopup.getValue()&&(m._linkOptions.setVisible(!1),m._copyOptions.setVisible(!1),m._popupOptions.setVisible(!0),m.setDisabled(!m._dialog.canAddPage()))})),this._mode===_.MODE_NEW&&(i.addChild(this._fldTypePage),i.addChild(this._fldTypeLink),i.addChild(this._fldTypePopup)),this.addChild(i),this.getElem().css({height:this._mode===_.MODE_NEW?380:400}),this._copyOptions=new n.VerticalLayout,this._copyOptions.css({marginTop:15}),this._copyOptions.addChild(new a.Label(__("Copy layout from"))),(p=new n.VerticalLayout).css({marginBottom:"5px"}),p.addChild(this._fldCopyPageDropdown=new h.DropdownBox),this._copyOptions.addChild(p),this._copyOptions.setVisible(!1),this.addChild(this._copyOptions),this._copyOptions.addChild(this._fldClearHeader=new d(__("Clear header contents"))),this._copyOptions.addChild(this._fldClearBody=new d(__("Clear body contents"))),this._copyOptions.addChild(this._fldClearFooter=new d(__("Clear footer contents"))),this.css({position:"relative"}),this._linkOptions=new n.VerticalLayout,this._linkOptions.css({marginTop:15}),this._linkOptions.addChild(new a.Label(__("Choose link type"))),(r=new n.VerticalLayout).css(b).css({padding:"6px 8px",marginBottom:"20px"}),r.addChild(this._fldPageLink=new u(__("Internal link to"),!0,"linkType"+g)),this._fldPageLink.css({marginTop:0}),this._fldPageLink._input.css({marginTop:"33px"}),r.addChild(this._fldPageLinkDropdown=new h.DropdownBox),this._fldPageLinkDropdown.on("click",(function(){m._fldPageLink.setValue(!0)})),this._fldPageLinkDropdown.css(wb_builder.rtl?{paddingRight:"20px",marginTop:2}:{paddingLeft:"20px",marginTop:2}),r.addChild(this._fldExternalLink=new u(__("External link to"),!1,"linkType"+g)),this._fldExternalLink.css({marginTop:5}),this._fldExternalLink._input.css({marginTop:"33px"}),r.addChild(this._fldExternalLinkBox=new c),this._fldExternalLinkBox.on("focus",(function(){m._fldExternalLink.setValue(!0)})),this._fldExternalLinkBox.setOnChange((function(e,t,i){t&&!/^https?:\/\//.test(t)&&m._fldExternalLinkBox.setText("http://"+t,i)})),this._fldExternalLinkBox.setPlaceholder("http://external.com/link"),this._fldExternalLinkBox.css({display:"block",marginTop:2}),this._fldExternalLinkBox.getElem().parent().css(wb_builder.rtl?{marginRight:20}:{marginLeft:20}),r.addChild(this._fldAnchor=new u(__("Anchor to"),!1,"linkType"+g)),this._fldAnchor.css({marginTop:5}),this._fldAnchor._input.css({marginTop:"33px"}),r.addChild(this._fldAnchorDropdown=new h.DropdownBox),this._fldAnchorDropdown.on("click",(function(){m._fldAnchor.setValue(!0)})),r.addChild(this._fldEmpty=new u(__("Empty"),!1,"linkType"+g)),this._fldAnchorDropdown.css(wb_builder.rtl?{paddingRight:"20px",marginTop:2}:{paddingLeft:"20px",marginTop:2}),this._fldEmpty.css({marginTop:"16px"}),this._linkOptions.addChild(r),this._linkOptions.setVisible(!1),this.addChild(this._linkOptions),this._popupOptions=new n.VerticalLayout,this._popupOptions.css({marginTop:15});var f=new s.FlowLayout;f.setVerticalAlign("middle"),f.addChild(this._fldFixedWidth=new d(__("Fixed width"))),f.addChild(this._fldFixedWidthValue=new l.TextField),this._fldFixedWidth.on("change",(function(){m._fldFixedWidthValue.setEnabled(this.checked)})),this._fldFixedWidthValue.getElem().addClass("input-sm").css({width:60,marginLeft:10}),this._fldFixedWidthValue.setValue(400),this._fldFixedWidthValue.setEnabled(!1),this._popupOptions.addChild(f);var y=new s.FlowLayout;y.setVerticalAlign("middle"),y.getElem().css({marginTop:7}),y.addChild(this._fldFixedHeight=new d(__("Fixed height"))),y.addChild(this._fldFixedHeightValue=new l.TextField),this._fldFixedHeight.on("change",(function(){m._fldFixedHeightValue.setEnabled(this.checked)})),this._fldFixedHeightValue.getElem().addClass("input-sm").css({width:60,marginLeft:10}),this._fldFixedHeightValue.setValue(320),this._fldFixedHeightValue.setEnabled(!1),this._popupOptions.addChild(y),this._popupOptions.setVisible(!1),this.addChild(this._popupOptions),this._itemOptions=new n.VerticalLayout,this._itemOptions.addChild(this._fldNewWindow=new d(__("Open in New Window"))),this._itemOptions.addChild(this._fldHideInMenu=new d(__("Do not show this item in menu"))),this._itemOptions.addChild(this._fldIsDefault=new d(__("Default menu item"))),this._itemOptions.addChild(this._fldOpenPopup=new d(__("Show popup when page is opened"))),this._fldOpenPopup.on("change",(function(){m._choosePopupOptions.setVisible(!!m._fldOpenPopup.getValue())})),this.addChild(this._itemOptions),this._choosePopupOptions=new n.VerticalLayout,this._choosePopupOptions.css({marginTop:5}),this._choosePopupOptions.addChild(this._fldPopupDropdown=new h.DropdownBox),this._choosePopupOptions.setVisible(!1),this.addChild(this._choosePopupOptions),e.fldNewWindow=this._fldNewWindow,e.fldHideInMenu=this._fldHideInMenu,e.fldIsDefault=this._fldIsDefault,e.fldOpenPopup=this._fldOpenPopup,e.fldPopupDropdown=this._fldPopupDropdown},setDisabled:function(e){"new"===this._mode&&(e?(this._dialog.getApplyButton().attr("disabled","disabled"),this.setMessage(this._dialog._liteVersionMessage)):(this._dialog.getApplyButton().removeAttr("disabled"),this.setMessage(null)))},setDialog:function(e){this._dialog=e},setMenu:function(e){this._currMenu=e},setMessage:function(e){this._message||(this._message=new a.Label,this._message._elem.css({width:"100%",fontWeight:"normal"}),this._copyOptions.addChild(this._message)),this._message.setHtml(e||"")},loadData:function(e){var t,i,n,o,s;if(this._item&&(this._item,this.selectItem(null)),this._fldPageLinkDropdown.removeAllItem(),this._fldCopyPageDropdown.removeAllItem(),this._fldAnchorDropdown.removeAllItem(),this._fldPopupDropdown.removeAllItem(),e){var r={},a=[],l=[],c=f.buildMenuStruct(!1);for(t=0;t<c.length;t++){var u=c[t];for(i=0;i<u.items.length;i++){var d=u.items[i];d.uID&&"page"===d.type&&d.pageId&&(this._currMenu&&this._currMenu.menuUID===d.menuUID?a.push(d.pageId):l.push(d.pageId),r["#"+d.pageId]=__tr(d.fullName,"__DEFAULT__",null,!0,!0))}}var p,m=[],g=[];for(t=0,n=e.getItemCount();t<n;t++)o=e.getItem(t),a.indexOf(o.id)>-1?m.push(o):g.push(o);for(m.sort((function(e,t){return a.indexOf(e.id)>a.indexOf(t.id)?1:-1})),g.sort((function(e,t){return l.indexOf(e.id)>l.indexOf(t.id)?1:-1})),e.removeAllItems(),t=0,n=m.length;t<n;t++)e.addItem(m[t]);for(t=0,n=g.length;t<n;t++)e.addItem(g[t]);for(t=0,n=e.getItemCount();t<n;t++){(s="#"+(o=e.getItem(t)).id in r?r["#"+o.id]:null)||(s=__tr(o.title,"__DEFAULT__",null,!0,!0)),o.popupMode?this._fldPopupDropdown.addItem(new h.DropdownBox.Item(s,o.id,o)):(this._fldPageLinkDropdown.addItem(new h.DropdownBox.Item(s,o.id,o)),this._fldCopyPageDropdown.addItem(new h.DropdownBox.Item(s,o.id,o)));var y=v.wb_builder.site.getAnchors(o.id);for(i=0;i<y.length;i++){var b=o.id+"_"+y[i];this._fldAnchorDropdown.addItem(new h.DropdownBox.Item(s+": "+y[i],b,o))}}this._pages=e,(p=this._fldCopyPageDropdown.getItemById(v.wb_builder.pageId))&&this._fldCopyPageDropdown.selectItem(p),(p=this._fldPageLinkDropdown.getItemById(v.wb_builder.pageId))&&this._fldPageLinkDropdown.selectItem(p)}else this._pages=null},_cleanupItem:function(e){e.getOriginal().copyFromTargetId=null,delete e.getOriginal().copyFromTargetId,e.getOriginal().copyClearHeader=null,delete e.getOriginal().copyClearHeader,e.getOriginal().copyClearBody=null,delete e.getOriginal().copyClearBody,e.getOriginal().copyClearFooter=null,delete e.getOriginal().copyClearFooter,e.getOriginal().popupMode=null,delete e.getOriginal().popupMode,e.getOriginal().popupWidth=null,delete e.getOriginal().popupWidth,e.getOriginal().popupHeight=null,delete e.getOriginal().popupHeight},selectItem:function(e,t){var i,n,o,s,r,a=this;if(this._item){if(this._item.getOriginal().name=this._fldName.getText(),this._item.setTitle(__tr(this._fldName.getText(),"__DEFAULT__",__("New Item"),!0,!0),15),this._item.getOriginal().subType=null,this._item.getOriginal().url=this._fldExternalLinkBox.getText(),r=this._fldAnchorDropdown.getSelectedItem()){var l=(""+r.getId()).substr((""+r.getId()).indexOf("_")+1);this._item.getOriginal().anchor={name:l,pageId:r.getOriginal().id}}else this._item.getOriginal().anchor=null;if(this._item.getOriginal().target=this._fldNewWindow.getValue()?"_blank":"_self",this._item.getOriginal().noMenu=this._fldHideInMenu.getValue(),this._fldTypePage.getValue())if(this._item.getOriginal().type="page",this._pages&&this._item.getOriginal().id){if(s=this._item.getOriginal().targetId?this._pages.getItemById(this._item.getOriginal().targetId):null){if(this._item.setHome(this._fldIsDefault.getValue()),this._item.setLink(!1),this._item.setPopup(!1),s.isFront=!!this._fldIsDefault.getValue(),s.isFront)for(i=0,n=this._pages.getItemCount();i<n;i++)s!==(o=this._pages.getItem(i))&&(o.isFront=!1);s.openPopupPageId=this._fldOpenPopup.getValue()?this._fldPopupDropdown.getValue():null}this._cleanupItem(this._item)}else this._item.getOriginal().targetId=null,this._item.getOriginal().copyFromTargetId=(r=this._fldCopyPageDropdown.getSelectedItem())?r.getId():null,this._item.getOriginal().copyClearHeader=!!this._fldClearHeader.getValue(),this._item.getOriginal().copyClearBody=!!this._fldClearBody.getValue(),this._item.getOriginal().copyClearFooter=!!this._fldClearFooter.getValue(),this._item.setHome(!1),this._item.setLink(!1),this._item.setPopup(!1);else this._fldTypePopup.getValue()?(this._item.getOriginal().type="page",this._item.getOriginal().subType="popup",this._item.setHome(!1),this._item.setLink(!1),this._item.setPopup(!0),this._pages&&this._item.getOriginal().id?((s=this._item.getOriginal().targetId?this._pages.getItemById(this._item.getOriginal().targetId):null)&&(s.openPopupPageId=null),this._cleanupItem(this._item)):(this._item.getOriginal().popupMode=!0,this._item.getOriginal().popupWidth=this._fldFixedWidth.getValue()&&(r=this._fldFixedWidthValue.getValue())?r:null,this._item.getOriginal().popupHeight=this._fldFixedHeight.getValue()&&(r=this._fldFixedHeightValue.getValue())?r:null,this._item.getOriginal().noMenu=!0)):this._fldAnchor.getValue()?((r=this._fldAnchorDropdown.getSelectedItem())&&(this._item.getOriginal().targetId=r.getOriginal().id),this._item.getOriginal().type="anchor",this._cleanupItem(this._item)):this._fldTypeLink.getValue()&&((r=this._fldPageLinkDropdown.getSelectedItem())&&(this._item.getOriginal().targetId=r.getId()),this._fldExternalLink.getValue()?this._item.getOriginal().type="external":this._fldPageLink.getValue()?this._item.getOriginal().type="internal":this._item.getOriginal().type="empty",this._cleanupItem(this._item));this._item.setNoMenu(this._item.getOriginal().noMenu)}if(this._item=e,this._item){if(this._fldName.setText(this._item.getOriginal().name),setTimeout((function(){a._fldName.focus()}),t?400:40),"page"===this._item.getOriginal().type){if("popup"===this._item.getOriginal().subType)this._linkOptions.setVisible(!1),this._copyOptions.setVisible(!1),this._popupOptions.setVisible(!this._item.getOriginal().id),this._fldOpenPopup.setValue(!1),this._fldOpenPopup.setVisible(!1),this._fldTypePage.setValue(!1),this._fldTypeLink.setValue(!1),this._fldTypePopup.setValue(!0),this._pages&&this._item.getOriginal().id&&((s=this._item.getOriginal().targetId?this._pages.getItemById(this._item.getOriginal().targetId):null)&&(s.popupMode=!0),this._fldFixedWidth.setValue(s&&s.popupWidth),this._fldFixedWidthValue.setValue(s?s.popupWidth:null),this._fldFixedHeight.setValue(s&&s.popupHeight),this._fldFixedHeightValue.setValue(s?s.popupHeight:null));else{this._linkOptions.setVisible(!1),this._copyOptions.setVisible(!this._item.getOriginal().id),this._popupOptions.setVisible(!1),this._fldTypePage.setValue(!0),this._fldTypeLink.setValue(!1),this._fldTypePopup.setValue(!1),this._fldOpenPopup.setVisible(!0);var c=!1;this._pages&&this._item.getOriginal().id&&((s=this._item.getOriginal().targetId?this._pages.getItemById(this._item.getOriginal().targetId):null)&&s.openPopupPageId?(c=!0,this._fldPopupDropdown.selectItem(this._fldPopupDropdown.getItemById(s.openPopupPageId))):this._fldPopupDropdown.selectItem(this._fldPopupDropdown.getItem(0))),this._fldOpenPopup.setValue(c)}this._pages&&this._item.getOriginal().id?(s=this._item.getOriginal().targetId?this._pages.getItemById(this._item.getOriginal().targetId):null,this._fldIsDefault.setValue(s&&s.isFront),this._fldIsDefault.setVisible(!0)):(this._fldIsDefault.setValue(!1),this._fldIsDefault.setVisible(!1))}else this._linkOptions.setVisible(!0),this._copyOptions.setVisible(!1),this._popupOptions.setVisible(!1),this._fldTypePage.setValue(!1),this._fldTypeLink.setValue(!0),this._fldTypePopup.setValue(!1),this._fldIsDefault.setValue(!1),this._fldIsDefault.setVisible(!1),this._fldOpenPopup.setValue(!1),this._fldOpenPopup.setVisible(!1),"external"===this._item.getOriginal().type?(this._fldPageLink.setValue(!1),this._fldExternalLink.setValue(!0),this._fldAnchor.setValue(!1),this._fldEmpty.setValue(!1)):"anchor"===this._item.getOriginal().type?(this._fldPageLink.setValue(!1),this._fldExternalLink.setValue(!1),this._fldAnchor.setValue(!0),this._fldEmpty.setValue(!1)):"internal"===this._item.getOriginal().type?(this._fldPageLink.setValue(!0),this._fldExternalLink.setValue(!1),this._fldAnchor.setValue(!1),this._fldEmpty.setValue(!1)):(this._fldPageLink.setValue(!1),this._fldExternalLink.setValue(!1),this._fldAnchor.setValue(!1),this._fldEmpty.setValue(!0));if(this._item.getOriginal().targetId?this._fldPageLinkDropdown.selectItem(this._fldPageLinkDropdown.getItemById(this._item.getOriginal().targetId)):this._fldPageLinkDropdown.selectItem(this._fldPageLinkDropdown.getItem(0)),this._fldExternalLinkBox.setText(this._item.getOriginal().url?this._item.getOriginal().url:""),this._item.getOriginal().anchor&&"object"==typeof this._item.getOriginal().anchor){var u=this._item.getOriginal(),d=u.anchor.pageId+"_"+u.anchor.name;this._fldAnchorDropdown.selectItem(this._fldAnchorDropdown.getItemById(d))}else this._fldAnchorDropdown.selectItem(this._fldAnchorDropdown.getItem(0));this._choosePopupOptions.setVisible(this._fldOpenPopup.getValue()),this._item.getOriginal().id?this._itemOptions.setVisible(!0):this._itemOptions.setVisible(!1),this._fldNewWindow.setValue("_blank"===this._item.getOriginal().target),this._fldHideInMenu.setValue(this._item.getOriginal().noMenu)}}}),(_.Note=function(){this.__construct.apply(this,arguments)}).prototype=new i.UIComponent("%inherit%"),_.Note.prototype.constructor=_,e.extend(_.Note.prototype,{_icon:"glyphicon glyphicon-exclamation-sign",_text:null,_iconElem:null,_textElem:null,__construct:function(t,n){i.UIComponent.prototype.constructor.call(this),this._elem.addClass("wb-page-tree-notice");var o={marginTop:8,width:172};wb_builder.rtl?o.marginRight=10:o.marginLeft=10,this._elem.css(o);var s=e("<small>").appendTo(this._elem);this._iconElem=e("<i>").appendTo(s),this._textElem=e("<span>").addClass("txt").appendTo(s),this.setText(t),this.setIcon(n||this._icon)},setText:function(e){this._text=e,this._textElem.text(this._text)},setIcon:function(e){this._icon=e,this._iconElem.removeClass().addClass(this._icon)}}),(_.Popup=function(){this.__construct.apply(this,arguments)}).prototype=new i.UIComponent("%inherit%"),_.Popup.prototype.constructor=_,e.extend(_.Popup.prototype,{_html:null,_htmlElem:null,_appearTimeout:null,__construct:function(t){i.UIComponent.prototype.constructor.call(this),this._elem.css({position:"absolute",display:"none",bottom:"82px",zIndex:10}),this._htmlElem=e("<div>").css({padding:"0 10px"}).appendTo(this._elem),this.setHtml(t)},setHtml:function(e){this._html=e,this._htmlElem.html(e)},appear:function(){var e=this;this._elem.css({display:"block",opacity:1}),clearTimeout(this._appearTimeout),this._appearTimeout=setTimeout((function(){e._elem.animate({opacity:0},400,(function(){e._elem.css({display:"none"})}))}),2e3)}}),_}.apply(t,n),void 0===o||(e.exports=o)},"./IdIndexedList.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],o=function(e){var t=function(){this.__construct.apply(this,arguments)};return e.extend(t.prototype,{_items:null,_itemsIndex:null,_blockedIds:null,__construct:function(e,t,i){this._items=[],this._itemsIndex={},this._blockedIds={},"object"==typeof e&&this.addItems(e,t,i)},toArray:function(){for(var e=[],t=0;t<this._item.length;t++)e.push(this._item[t]);return e},toIdObject:function(){for(var e={},t=0;t<this._item.length;t++)e["#"+this._item[t].id]=this._item[t];return e},getItemCount:function(){return this._items.length},getItem:function(e){return e>=0&&e<this._items.length?this._items[e]:null},getItemById:function(e){var t="#"+e;return t in this._itemsIndex?this._itemsIndex[t]:null},addItems:function(i,n,o){if(i instanceof t)for(var s=0,r=i.getItemCount();s<r;s++)this.addItem(i.getItem(s));else if("length"in i)for(var a=0;a<i.length;a++)this.addItem(n?e.extend({},i[a]):o?i[a].serialize():i[a]);else for(var l in i)this.addItem(n?e.extend({},i[l]):o?i[l].serialize():i[l])},addItem:function(e){this._items.indexOf(e)<0&&(this._items.push(e),this._itemsIndex["#"+e.id]=e)},removeItem:function(e){var t=this._items.indexOf(e);t>=0&&(this._items.splice(t,1),this._itemsIndex["#"+e.id]=null,delete this._itemsIndex["#"+e.id])},removeAllItems:function(){this._items.splice(0,this._items.length),this._itemsIndex={}},newItem:function(t,i){var n=t?i?t:e.extend(!0,{},t):{};return n.id=this._findFreeId(),this.addItem(n),n},sortItems:function(e){"function"==typeof e&&this._items.sort(e)},addBlockedId:function(e){this._blockedIds["#"+e]=!0},_findFreeId:function(){for(var e=1;e<5e3;e++)if(!this._itemsIndex["#"+e]&&!this._blockedIds["#"+e])return e;return 1}}),t}.apply(t,n),void 0===o||(e.exports=o)},"./LayoutManager.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./Service.ts"),i("./BuilderEvent.ts")],void 0===(o=function(e,t,i){"use strict";var n=!1,o=null,s={top:null,bottom:null},r=null,a=null,l=null,c={elem:null,type:null,refBlock:null,reflector:null,enabled:!0,tPos:null,init:function(t){this.type=t;var i="";"top"!==t&&"bottom"!==t||(i="layout_border_h","top"===t&&(this.refBlock="wb_header"),"bottom"===t&&(this.refBlock="wb_footer")),this.elem=e("<div>").addClass("layout_border").addClass(i);var n=this;return this.elem.on("mousedown",(function(e){if(!n.enabled)return!1;var t=n.reflector&&n.reflector in s?s[n.reflector].elem.position():null;if(n.refBlock){var i=o.bodyInstance.getContentBlock(n.refBlock);n.logPos({height:i?i.elem.height():0},e,t)}return l=n,e.stopPropagation(),e.preventDefault(),!1})),this},logPos:function(e,t,i){this.tPos={size:e,offset:this.elem.offset(),position:this.elem.position(),position2:i};var n=Math.round("height"in e?e.height:"width"in e?e.width:0);isNaN(n)&&(n=0),wb_builder.bodyInstance.showInfoTip(n,t.pageX-90,t.pageY)},setEnabled:function(e){this.enabled=!!e,this.enabled?this.elem.css("cursor",""):this.elem.css("cursor","default")}};return{init:function(t){for(var n in o=t,s)s[n]=Object.create(c).init(n);r=function(e){if(l){var t,i=l.refBlock?o.bodyInstance.getContentBlock(l.refBlock):null,n=0;"top"!==l.type&&"bottom"!==l.type||(n=Math.round(e.pageY-l.tPos.offset.top)),t="bottom"===l.type?-n:n,"top"!==l.type&&"bottom"!==l.type||l.elem.css("top",l.tPos.position.top+n),l.reflector&&l.reflector in s&&s[l.reflector].elem.css("left",l.tPos.position2.left-n),i&&i.setSize(null,l.tPos.size.height+t);var r=Math.round(l.tPos.size.height+t);return wb_builder.bodyInstance.showInfoTip(r,e.pageX-90,e.pageY),o.setPageModified(!0),e.stopPropagation(),e.preventDefault(),!1}return!0},a=function(t){if(l){wb_builder.bodyInstance.hideInfoTip();var n=l.refBlock?o.bodyInstance.getContentBlock(l.refBlock):null;return n&&(i.GlobalEvents.triggerEvent("blocks.resize",new i.BlocksResizeBuilderEvent(n)),n.updateSize()),"bottom"===l.type&&e("html, body").scrollTop(e(document).height()),l.tPos=null,l=null,t.stopPropagation(),t.preventDefault(),!1}return!0}},setPageSwitchesEnabled:function(i){var n,r,a=t.Service.menu.getLandingMenu();if(a&&i){var l,c=[];for(l in a.items){var u=a.items[l];"page"!==u.type&&"internal"!==u.type||c.push(u)}for(l=0;l<c.length;l++){var d=c[l];if(parseInt(d.targetId,10)===o.pageId){n=l-1>=0?c[l-1]:null,r=l+1<c.length?c[l+1]:null;break}}}var h={bottom:r,top:n};for(var p in s){var m=s[p];m.pageSwitch&&(m.pageSwitch.detach(),m.pageSwitch.remove(),m.pageSwitch=null),("top"===m.type||"bottom"===m.type)&&h[m.type]&&h[m.type].targetId&&(m.pageSwitch=e('<div class="layout_border_page_switch"></div>'),"top"===m.type?m.pageSwitch.addClass("page_switch_top").tooltip({title:__("Go to upper landing page"),placement:"bottom"}):"bottom"===m.type&&m.pageSwitch.addClass("page_switch_bottom").tooltip({title:__("Go to lower landing page"),placement:"top"}),m.pageSwitch.on("mousedown",(function(e){e.stopPropagation()})),function(e){m.pageSwitch.on("click",(function(){o.goToPage(1*e.targetId)}))}(h[m.type]),m.elem.append(m.pageSwitch))}},setEnabled:function(e){s.top.setEnabled(e),s.bottom.setEnabled(e)},setVisible:function(t,i){n=!!t;var l,c=e(document.body);if(n){if(!o.bodyInstance)return;var u=o.bodyInstance.elem,d=o.bodyInstance.getContentBlock("wb_main");if(d){var h;h=i?{left:d.left,top:d.offsetTop}:{left:d.container.offset().left-d.elem.offset().left,top:d.elem.position().top};var p=e(window).width(),m=d.getWidthInPixels();for(l in 0===h.left&&p>m&&(h.left=Math.round((p-m)/2)),s.top.elem.css({top:h.top-1,minWidth:320}),s.bottom.elem.css({top:h.top+d.getHeightInPixels()-1,minWidth:320}),r&&a&&(c.off("mousemove",r).off("mouseup",a),c.on("mousemove",r).on("mouseup",a)),s)s[l].elem.appendTo(u)}}else for(l in r&&a&&c.off("mousemove",r).off("mouseup",a),s)s[l].elem.detach()}}}.apply(t,n))||(e.exports=o)},"./MobileToolbar.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./BuilderEvent.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i){"use strict";var n=function(t){"%inherit%"!==t&&(e.UIComponent.prototype.constructor.call(this),this.addClass("mobile-toolbar"),this._items=[],"object"==typeof t&&this.buildFromDefinition(t))};n.buildItem=function(e){var t,r=new o(e.name,e.icon);return"drawer"in e&&e.drawer?(t=n.buildDrawer(e.drawer),i(document.body).append(t.getElem()),function(e){r.on("click touchstart",(function(t){return t.stopPropagation(),t.preventDefault(),s.open(e),!1}))}(t)):"click"in e&&"function"==typeof e.click&&function(e,t){e.on("click",(function(i){return t.call(e,i),!1}))}(r,e.click),r},n.buildDrawer=function(e){var t,i,o=new s(e.type);if("id"in e&&e.id&&(o.id=e.id),"items"in e)for(t=0;t<e.items.length;t++)(i=n.buildDrawerItem(e.items[t],o))&&o.addItem(i);return o},n.buildDrawerItem=function(e,t){var o,a,l,c,u,d;return"object"!=typeof e||null===e?null:(d="type"in e?e.type:null)&&"-"===d?((o=new r("","","",!1))._separator=!0,o.on("click",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),o):d&&"group"!==d&&"widget"!==d?null:(a=e.iconImage?"ico-pl-"+e.id:e.icon,l=e.iconImage?e.icon:null,!(u="drawer"in e&&e.drawer?e.drawer:null)&&"items"in e&&(u={type:"grid",items:e.items,linkTo:e.linkTo}),(o=new r(e.name,a,l,!!u)).id="id"in e&&e.id?e.id:null,"checked"in e&&o.setChecked(!!e.checked),"visible"in e&&o.setVisible(!!e.visible),"click"in e&&"function"==typeof e.click&&(!("active"in e)||("function"==typeof e.active?e.active(o.id):e.active)?function(e,t){e.on("click",(function(i){return t.call(e,i),s.open(null,null,!0),!1}))}(o,e.click):(o.getElem(),o.setEnabled(!1))),u&&(c=n.buildDrawer(u),u.linkTo&&u.linkTo.linkDrawer(c),o.id&&(c.id=o.id+"-drawer"),i(document.body).append(c.getElem()),function(e,t){o.on("click",(function(i){return i.stopPropagation(),i.preventDefault(),s.open(e,t),!1}))}(c,t)),o)},(n.prototype=new e.UIComponent("%inherit%")).constructor=n,n.prototype._items=null,n.prototype.addItem=function(e,t){if(e instanceof o)return null==t||t<0||t>=this._items.length||isNaN(t)?(this._elem.append(e.getElem()),this._items.push(e)):(this._elem.children().eq(t).before(e.getElem()),this._items.splice(t,0,e)),e},n.prototype.buildFromDefinition=function(e){var t;if("items"in e)for(t=0;t<e.items.length;t++)this.addItem(n.buildItem(e.items[t]))};var o=function(e,t){"%inherit%"!==e&&(e&&(this._title=e),t&&(this._icon=t))};o.prototype._elem=null,o.prototype._iconElem=null,o.prototype._title="",o.prototype._icon="",o.prototype._enabled=!0,o.prototype.getElem=function(){return this._elem||(this._elem=i("<div>"),this._iconElem=i("<span>").appendTo(this._elem),this._title&&this._elem.attr({title:this._title}),this._icon&&this._iconElem.addClass(this._icon)),this._elem},o.prototype.on=function(e,t){var i=this,n=t;return t._wrapCallback=function(e){i._enabled&&n(e)},this._elem||this.getElem(),this._elem&&this._elem.on(e,t._wrapCallback),this},o.prototype.off=function(e,t){return this._elem&&this._elem.off(e,t._wrapCallback?t._wrapCallback:t),this},o.prototype.trigger=function(e,t){return this._elem&&this._elem.trigger(e,t),this};var s=function(t){"%inherit%"!==t&&(e.UIComponent.prototype.constructor.call(this),this.addClass("mobile-drawer"),t&&this.addClass("type-"+t),this._navElem=i("<div>").addClass("drawer-nav").append(i("<div>").addClass("back").append(i("<span>").addClass("chevron icon-wb-chevron-left")).append(i("<span>").addClass("title").text(__("Back"))).on("click touchstart",(function(e){return e.stopPropagation(),e.preventDefault(),s.open(null),!1}))).appendTo(this._elem),this._bodyElem=i("<div>").addClass("drawer-body").appendTo(this._elem),this._items=[],this.setVisible(!1),s.list.push(this))};s.stack=[],s.list=[],s._lastOpen=null,s.open=function(e,i,n){var o;n&&s.stack.splice(0,s.stack.length),!e&&s.stack.length>0&&(e=s.stack.pop()),s._lastOpen&&s._lastOpen!==e&&(o=t.VisibilityChangedBuilderEvent(!1),t.GlobalEvents.triggerEvent("drawer.hide",o));for(var r=0;r<s.list.length;r++)e!==s.list[r]&&function(e){e.removeClass("open"),s._lastOpen=null,setTimeout((function(){s._lastOpen!==e&&e.setVisible(!1)}),100)}(s.list[r]);if(e){i&&s.stack.push(i),e.setVisible(!0),e.addClass("open");var a=s._lastOpen!==e;s._lastOpen=e,a&&(o=t.VisibilityChangedBuilderEvent(!0),t.GlobalEvents.triggerEvent("drawer.show",o))}},s.get=function(e){for(var t=0;t<s.list.length;t++)if(s.list[t].id===e)return s.list[t];return null},s.prototype=new e.UIComponent("%inherit%"),s.prototype.constructor=s,s.prototype.id=null,s.prototype._navElem=null,s.prototype._bodyElem=null,s.prototype._items=null,s.prototype.getBodyElem=function(){return this._bodyElem},s.prototype.getItemCount=function(){return this._items.length},s.prototype.getItem=function(e){return e>=0&&e<this._items.length?this._items[e]:null},s.prototype.getItemById=function(e){for(var t=this._items.length-1;t>=0;t--)if(this._items[t].id===e)return this._items[t];return null},s.prototype.addItem=function(e){if(e instanceof r)return this._bodyElem.append(e.getElem()),this._items.push(e),e},s.prototype.removeAllItems=function(){this._bodyElem.empty(),this._items.splice(0,this._items.length)};var r=function(e,t,i,n){"%inherit%"!==e&&(e&&(this._title=e),t&&(this._icon=t),i&&(this._iconImage=i),this._isGroup=!!n)};return r.prototype._elem=null,r.prototype._iconElem=null,r.prototype._titleElem=null,r.prototype._chevronElem=null,r.prototype._title="",r.prototype._icon="",r.prototype._iconImage=null,r.prototype._isGroup="",r.prototype._enabled=!0,r.prototype._visible=!0,r.prototype._isChecked=!1,r.prototype.id=null,r.prototype.isEnabled=function(){return this._enabled},r.prototype.setEnabled=function(e){this._enabled=!!e,this._elem&&(this._enabled?this._elem.css({opacity:"",cursor:""}):this._elem.css({opacity:.5,cursor:"default"}))},r.prototype.isVisible=function(){return this._visible},r.prototype.setVisible=function(e){this._visible=!!e,this._elem&&this._elem.css("display",this._visible?"block":"none")},r.prototype.isChecked=function(){return this._isChecked},r.prototype.setChecked=function(e){this._isChecked=!!e,this._elem&&(this._isChecked?this._elem.addClass("checked"):this._elem.removeClass("checked"))},r.prototype.getElem=function(){if(!this._elem)if(this._separator)this._elem=i("<div>").addClass("separator");else{if(this._elem=i("<div>").addClass("item"),this._iconElem=i("<span>").addClass("icon").appendTo(this._elem),this._iconImage){var e=(""+this._iconImage).split(" #");e.length>1&&e[1]&&this._iconElem.addClass(e[1]),i("<img>").attr({src:e[0]}).appendTo(this._iconElem)}this._titleElem=i("<span>").addClass("title").appendTo(this._elem),this._isGroup&&(this._chevronElem=i("<span>").addClass("chevron icon-wb-chevron-right").appendTo(this._elem)),this._title&&this._titleElem.html(this._title),this._icon&&this._iconElem.addClass(this._icon),this._isChecked&&this._elem.addClass("checked"),this._elem.css("display",this._visible?"block":"none")}return this._elem},r.prototype.setTitle=function(e,t,n){this._title=e,"string"==typeof t&&(this._icon=t),"string"==typeof n&&(this._iconImage=""===n?null:n),this._titleElem.html(e),this._iconElem.attr("class","icon "+this._icon);var o=this._iconElem.find("img");if(this._iconImage){o.length||(o=i("<img>").appendTo(this._iconElem));var s=(""+this._iconImage).split(" #");s.length>1&&s[1]&&this._iconElem.addClass(s[1]),o.attr({src:s[0]})}else o.remove()},r.prototype.on=function(e,t){var i=this,n=t;return t._wrapCallback=function(e){i._enabled&&n(e)},this._elem||this.getElem(),this._elem&&this._elem.on(e,t._wrapCallback),this},r.prototype.off=function(e,t){return this._elem&&this._elem.off(e,t._wrapCallback?t._wrapCallback:t),this},r.prototype.trigger=function(e,t){return this._elem&&this._elem.trigger(e,t),this},{Toolbar:n,ToolbarItem:o,Drawer:s,DrawerItem:r}}.apply(t,n))||(e.exports=o)},"./ModeManager.js":function(e,t,i){var n,o;n=[i("./WidgetToolbar.js"),i("./Service.ts"),i("./BuilderEvent.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n){"use strict";var o={},s=null,r=null,a=null;o.MODE_TV="tv",o.MODE_DESKTOP="desktop",o.MODE_TABLET="tablet",o.MODE_PHONE="phone";var l={};return o.getModes=function(){return Object.keys(l)},o.getModeName=function(e,t,i){return e&&e in l?i?l[e].title:l[e].name:null},o.getModeWidth=function(e){return e&&e in l?l[e].width:null},o.getModeMediaQuery=function(e){return e===o.MODE_PHONE?"":"@media (min-width: "+o.getModeWidth(e)+"px)"},o.compareModes=function(e,t){return e===t?0:e===o.MODE_TV||t===o.MODE_PHONE?1:e===o.MODE_PHONE||t===o.MODE_TV?-1:e===o.MODE_DESKTOP?1:-1},o.ToolbarItem=n.extend(Object.create(e.ToolbarItem),{_markerElem:null,mobileItem:null,mode:null,init:function(t,i,o){return e.ToolbarItem.init.call(this,t,i,o),this.elem.css({position:"relative"}),this._markerElem=n("<span>").addClass("checked-marker").appendTo(this.elem).hide(),this},setMarked:function(e){e?this._markerElem.show():this._markerElem.hide(),this.mobileItem&&this.mobileItem.setChecked(e)}}),o.viewportWidth=null,o.initModes=function(e){l=e},o.getMinWidth=function(){return o.MODE_PHONE in l?l[o.MODE_PHONE].width:0},o.init=function(e){var t=this;n(window).on("resize orientationchange",(function(e){t.onWindowResize(!0,null,!e.originalEvent)})),this.onWindowResize(!1)},o.onWindowResize=function(e,t,r){!t&&this.viewportWidth&&r&&(t=this.viewportWidth),this.viewportWidth=t;var l=a?o.getModeWidth(a):0,c=t;c||(c=wb_builder.body?wb_builder.body.outerWidth():0)||n(window).width(),l>0&&c>l&&(c=l);var u=o.getModeFromWidth(c);if(s!==u){var d=s;s=u;var h=new i.ModesChangeBuilderEvent(d||s,s,!!e,!!r);i.GlobalEvents.triggerEvent("modes.change",h),i.GlobalEvents.triggerEvent("modes.change.after",h),i.GlobalEvents.triggerEvent("modes.changed",h)}},o.setMinMode=function(e){!(r=e)||!s||o.compareModes(s,r)>=0||o.onWindowResize(!0)},o.setMaxMode=function(e){!(a=e)||!s||o.compareModes(s,a)<=0||o.onWindowResize(!0)},o.getMaxMode=function(){return a},o.detectBestSuitableWidth=function(e){for(var t,i=o.getModeWidth(o.MODE_PHONE),s=n(window).width(),r=o.getModes(),a=0;a<r.length;a++)s>=(t=o.getModeWidth(r[a]))&&(i=Math.max(i,t));return i},o.getModeFromWidth=function(e){for(var t in l)if(l[t].width<=e)return t;return o.MODE_PHONE},o.getMode=function(){return s},t.Service.modeManager=o,window.ModeManager=o,o}.apply(t,n))||(e.exports=o)},"./MultilangTextField.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./WB_LangInputControl.class.js"),i("./lib/jquery-1.11.3.min.js")],o=function(e,t,i){var n=function(){1===arguments.length&&"%inherit%"===arguments[0]||this.__construct.apply(this,arguments)};return(n.prototype=new e.UIComponent("%inherit%")).constructor=n,i.extend(n.prototype,{_wbField:null,__construct:function(i,n,o,s){this._wbField=new t(null,i,n,o,s),this.setOnChange(null);var r=this;this._wbField.elem.on("keyup",(function(){r.onValueChanged()})),this._wbField.elem.on("cut paste",(function(){setTimeout((function(){r.onValueChanged()}),0)})),e.UIComponent.prototype.constructor.call(this)},_createElem:function(){return this._wbField.elem},setText:function(e,t){var i=!1;t&&(i=!0),this._wbField.setValue(e,t,i)},setValue:function(e){this._wbField.setValue(e)},getText:function(){return this._wbField.getValue()},getValue:function(){return this._wbField.getValue()},focus:function(){this._wbField.focus()},setEnabled:function(t){e.UIComponent.prototype.setEnabled.call(this,t),this._wbField.setDisabled(!t)},setModified:function(e){this._wbField.modified=!!e},setPlaceholder:function(e,t){this._wbField.setPlaceholder(e,t)},setTextarea:function(e){this._wbField.setTextarea(e)},setResizable:function(e){this._wbField.setResizable(e)},setHeight:function(e){this._wbField.isTextarea&&this._wbField.getInputs().each((function(){e==parseInt(e)&&(e+="px"),i(this).css("height",e)}))},addClass:function(t){return e.UIComponent.prototype.addClass.call(this,t),(""+t).match(/^span[0-9]+$/)&&this._wbField.getMainInput().addClass(t),this},removeClass:function(t){return e.UIComponent.prototype.removeClass.call(this,t),(""+t).match(/^span[0-9]+$/)&&this._wbField.getMainInput().removeClass(t),this},setOnChange:function(e){var t=e,i=this;this._wbField.onChange=function(){i.onValueChanged(),"function"==typeof t&&t.apply(this,arguments)}},setOnReload:function(e){this._wbField.onReload=e},getInputs:function(){return this._wbField.getInputs()},setComponentOptions:function(t){e.UIComponent.prototype.setComponentOptions.call(this,t),"placeholder"in t&&this.setPlaceholder(t.placeholder),"height"in t&&this.setHeight(t.height),"textarea"in t&&this.setTextarea(!!t.textarea),"resizable"in t&&this.setResizable(t.resizable)}}),n.supportsMultipleObjectBindings=function(){return!1},n}.apply(t,n),void 0===o||(e.exports=o)},"./RadioBox.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./lib/jquery-1.11.3.min.js")],o=function(e,t){var i=function(){this.__construct.apply(this,arguments)};return(i.prototype=new e.UIComponent("%inherit%")).constructor=i,t.extend(i,{_elemIndex:0}),t.extend(i.prototype,{_label:null,_group:null,_labelComp:null,_input:null,_inline:null,__construct:function(n,o,s,r,a){this._inline=!(!r||n instanceof e.UIComponent),e.UIComponent.prototype.constructor.call(this);var l="ui_radiobox_id"+i._elemIndex;i._elemIndex++,this._elem.attr({for:l}),this._input=t("<input>").attr({type:"radio",id:l}),n instanceof e.UIComponent?(this._elem.addClass("wb-compo-cbr"),this._elem.append(t("<label>").append(this._input)),this._labelComp=n,this._labelComp.addClass("wb-compo-cbr-label"),this._labelComp.getElem().appendTo(this._elem)):(this._labelElem=t("<span>"),this._inline?this._elem.append(this._input).append(this._labelElem):this._elem.append(t("<label>").append(this._input).append(this._labelElem)),this.setLabel(n)),this.setValue(o),s&&this.setGroup(s),a&&this._input.attr({value:a})},_createElem:function(){return this._inline?t("<label>").addClass("radio-inline wb-radiobox-ctrl"):t("<div>").addClass("radio wb-radiobox-ctrl")},onChange:function(e){var t=this;return this._input.on("change",(function(){return e(!!t._input[0].checked)})),this},setGroup:function(e){this._group=e,this._group?this._input.attr({name:this._group}):this._input.removeAttr("name")},getGroup:function(){return this._group},setLabel:function(e){return this._label=e,this._labelElem&&this._labelElem.text(e),this},setLabelHtml:function(e){return this._label=e,this._labelElem&&this._labelElem.html(e),this},getLabel:function(){return this._label},setValue:function(e){this._input.prop("checked",!!e)},getValue:function(){return this._input.is(":checked")},setEnabled:function(t){e.UIComponent.prototype.setEnabled.call(this,t),t?(this._input.removeClass("disabled"),this._input.removeAttr("disabled")):(this._input.addClass("disabled"),this._input.attr("disabled","disabled"))},on:function(t,i){return"change"===t?this._input.on(t,i):e.UIComponent.prototype.on.call(this,t,i),this},off:function(t,i){return"change"===t?this._input.off(t,i):e.UIComponent.prototype.off.call(this,t,i),this},trigger:function(t,i){return"change"===t?this._input.trigger(t,i):e.UIComponent.prototype.trigger.call(this,t,i),this}}),i}.apply(t,n),void 0===o||(e.exports=o)},"./TreeListControl.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./lib/jquery-1.11.3.min.js")],o=function(e,t){var n=i("./core/BuilderConfig.ts").wbConfig,o=!1,s=function(){o||(o=!0,t.jstree._themes=n.jsLibsPath+"/jstree/themes/"),this.__construct.apply(this,arguments)};return(s.prototype=new e.UIComponent("%inherit%")).constructor=s,t.extend(s.prototype,{_elem:null,_tree:null,_btnRemove:null,_eventMouseEnter:null,_eventMouseLeave:null,_treeLoaded:!1,_selectedItem:null,_selectWhenReady:null,items:null,moveValidateFunc:null,selectFunc:null,deleteFunc:null,onItemsCountChanged:null,__construct:function(){e.UIComponent.prototype.constructor.call(this);var i=this;this.items=new s.Item("root"),this.items._tree=this,this.items._isRoot=!0,this._tree=this._elem,this._tree.addClass("wb_menu_list"),this._tree.jstree({plugins:["core","themes","json_data","ui","crrm","dnd"],ui:{select_limit:1},core:{load_open:!0,rtl:wb_builder.rtl},crrm:{move:{check_move:function(e){return i._validateMove(e)}}},json_data:{data:function(e,t){t(i._loadData(e))}}}).bind("create.jstree",(function(e,t){i._createItem(t)})).bind("remove.jstree",(function(e,t){i._removeItem(t)})).bind("rename.jstree",(function(e,t){i._renameItem(t)})).bind("move_node.jstree",(function(e,t){i._moveItem(t)})).bind("select_node.jstree",(function(e,t){i._selectItem(t)})).bind("loaded.jstree",(function(e,t){i._treeReady(t)})),this._btnRemove=t("<button>").addClass("btn btn-xs btn-link jstree-x-btn").append(t("<i>").addClass("glyphicon glyphicon-remove")).on("click",(function(){var e=!0,n=s.Item.fromElem(t(this).parent());"function"==typeof i.deleteFunc&&(e=i.deleteFunc(n)),!1!==e&&i.removeItem(n)})),this._eventMouseEnter=function(e){e.stopPropagation(),t(this).parent().append(i._btnRemove),i._btnRemove.show()},this._eventMouseLeave=function(e){e.stopPropagation(),i._selectedItem?i._tree.find("li > a.jstree-clicked").eq(0).parent().append(i._btnRemove):i._btnRemove.hide()}},buildInit:function(e,t){},newItem:function(){var e=new s.Item(__("New Item"));this._tree.jstree("create",-1,"last",e,null,!0)},removeItem:function(e,t){var i=this;t?e._elem.fadeOut(400,(function(){i._tree.jstree("remove",e._elem)})):this._tree.jstree("remove",e._elem)},selectItem:function(e,i){if(this._treeLoaded){var n=this;this._tree.find("li").each((function(){var o=t(this),r=s.Item.fromElem(o);if(r&&r===e)return i?o.children("a").trigger("click"):(n._tree.jstree("select_node",o),o.children("a").trigger("mouseleave")),!1}))}else this._selectWhenReady=e},updateTree:function(){this._treeLoaded&&(this._btnRemove.detach(),this._tree.jstree("refresh",-1)),this._tree.find("li > a").off("mouseenter",this._eventMouseEnter).on("mouseenter",this._eventMouseEnter),this._tree.find("li").off("mouseleave",this._eventMouseLeave).on("mouseleave",this._eventMouseLeave).each((function(){var e=t(this),i=s.Item.fromElem(e);i._elem=e,i._updateNoMenu()}))},_validateMove:function(e){if("function"==typeof this.moveValidateFunc){var t=e.cop,i=e.cp,n=s.Item.fromElem(e.o),o=s.Item.fromElem(e.np);return o||(o=this.items),this.moveValidateFunc(n,o,t,i)}return!0},_treeReady:function(){this._treeLoaded=!1,this.updateTree(),this._treeLoaded=!0,this._selectWhenReady&&(this.selectItem(this._selectWhenReady),this._selectWhenReady=null)},_loadData:function(e){if(-1===e)return this.items._items.length<=0&&this.items.addItem(new s.Item("---")),this.items._items;var t=s.Item.fromElem(e);return t?t._items:[]},_selectItem:function(e){var t=s.Item.fromElem(e.rslt.obj);this._selectedItem=t||null,"function"==typeof this.selectFunc&&this.selectFunc.call(this,this._selectedItem)},_moveItem:function(e){var i=s.Item.fromElem(e.rslt.np);i||(i=this.items);var n=s.Item.fromElem(e.rslt.o.eq(0));if(n){var o=e.rslt.cp;i===n.getParent()&&o>e.rslt.cop&&o--,i.addItem(n,o)}this._tree.find("li").each((function(){s.Item.fromElem(t(this))||t(this).remove()}))},_createItem:function(e){var t=new s.Item(e.rslt.name),i=e.rslt.parent&&-1!==e.rslt.parent?s.Item.fromElem(e.rslt.parent):null;i||(i=this.items),i.addItem(t)},_removeItem:function(e){var t=s.Item.fromElem(e.rslt.obj.eq(0));t&&t.getParent()&&t.getParent().removeItem(t),t&&this._selectedItem===t&&(this._selectedItem=null)},_renameItem:function(e){var t=s.Item.fromElem(e.rslt.obj);t&&t.setTitle(e.rslt.new_name)}}),s.Item=function(){this.__construct.apply(this,arguments)},t.extend(s.Item,{fromElem:function(e){var t=e.data("__META_INST__");return t?t.rqw:null}}),t.extend(s.Item.prototype,{_isHome:!1,_isLink:!1,_isPopup:!1,_icon:null,_iconHome:"glyphicon glyphicon-home",_iconItem:"glyphicon glyphicon-folder-open",_iconLink:"glyphicon glyphicon-share-alt",_iconPopup:"glyphicon glyphicon-modal-window",_original:null,_parent:null,_items:null,_title:null,_isRoot:!1,_elem:null,_tree:null,data:null,metadata:null,state:null,__construct:function(e,t,i,n){this.data={title:null,icon:null,attr:{}},this.metadata={__META_INST__:{rqw:this}},this.setTitle(e,n),this.setIcon(t),this._original=i,this._items=[]},isRoot:function(){return this._isRoot},getItemCount:function(e,t){for(var i=0,n=0;n<this._items.length;n++)e&&(i+=this.getItemCount.call(this._items[n],e,t)),i+="function"==typeof t?t(this._items[n].getOriginal())?1:0:1;return i},getItem:function(e){return e>=0&&e<this._items.length?this._items[e]:null},getItems:function(){return this._items},addItem:function(e,t){(this._items.indexOf(e)<0||"number"==typeof t)&&(e._parent&&e._parent.removeItem(e,!0),"number"==typeof t?this._items.splice(t,0,e):this._items.push(e),e._parent=this,e._tree=this._tree,this.state="open",this._itemsCountChanged(e))},removeItem:function(e,t){var i=this._items.indexOf(e);i>=0&&(this._items.splice(i,1),this._itemsCountChanged(e),t||(e._parent=null,e._tree=null,e._elem=null),this._items.length<=0&&(this.state=null))},removeAllItems:function(){this._items.length>0&&this._itemsCountChanged(this._items[0]);for(var e=0;e<this._items.length;e++)this._items[e]._parent=null,this._items[e]._tree=null,this._items[e]._elem=null;this._items.splice(0,this._items.length),this.state=null},getParent:function(){return this._parent},getTitle:function(){return this._title},_jsTreeDataModel:function(){return this.data instanceof Array&&this.data.length>0?this.data[0]:this.data},_itemsCountChanged:function(e){e&&e._tree&&"function"==typeof e._tree.onItemsCountChanged&&e._tree.onItemsCountChanged(e)},setTitle:function(e,t){var i=this._title,n=this._jsTreeDataModel();this._title=e,n.title=this._title,t&&t>0&&n.title&&n.title.length>t&&(n.title=n.title.substring(0,t)+"..."),this._tree&&this._elem&&i!==this._title&&this._tree._tree.jstree("set_text",this._elem,n.title)},setIcon:function(e){var t=this._jsTreeDataModel(),i=t.icon;this._icon=e||null,t.icon=this._isLink?this._iconLink:this._isHome?this._iconHome:this._isPopup?this._iconPopup:this._icon?this._icon:this._iconItem,this._tree&&this._elem&&i!==t.icon&&(i&&this._elem.children("a").find("ins").removeClass(i),this._icon&&this._elem.children("a").find("ins").removeClass(this._icon),this._iconItem&&this._elem.children("a").find("ins").removeClass(this._iconItem),t.icon&&this._elem.children("a").find("ins").addClass(t.icon))},setHome:function(e){this._isHome=!!e,this._isHome&&(this._isLink=!1,this._isPopup=!1),this.setIcon(this._icon)},setLink:function(e){this._isLink=!!e,this._isLink&&(this._isHome=!1,this._isPopup=!1),this.setIcon(this._icon)},setPopup:function(e){this._isPopup=!!e,this._isPopup&&(this._isHome=!1,this._isLink=!1),this.setIcon(this._icon)},setNoMenu:function(e){this._noMenu=!!e,this._updateNoMenu()},_updateNoMenu:function(){this._elem&&(this._noMenu?this._elem.addClass("jstree-wb-nomenu"):this._elem.removeClass("jstree-wb-nomenu"))},isHome:function(){return this._isHome},isLink:function(){return this._isLink},getOriginal:function(){return this._original}}),s}.apply(t,n),void 0===o||(e.exports=o)},"./UIBuilder.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./Service.ts"),i("./UIComponent.ts"),i("./UIContainer.ts"),i("./VerticalLayout.ts"),i("./HorizontalLayout.ts"),i("./FlowLayout.ts"),i("./CustomContainer.ts"),i("./UIButton.ts"),i("./Label.ts"),i("./TextField.ts"),i("./MultilangTextField.js"),i("./RadioBox.js"),i("./CheckBox.js"),i("./WB_LinkEditControl.class.js"),i("./WB_URLControl.class.js"),i("./List.ts"),i("./BigList.ts"),i("./WB_StyleControl.class.js"),i("./SliderControl.ts"),i("./AlignSelector.ts"),i("./HAlignSelector.ts"),i("./WYSIWYGControl.ts"),i("./WB_ToolTipControl.class.js"),i("./WB_FontControl.class.js"),i("./WB_FontTransformControl.class.js"),i("./MenuListControl.ts"),i("./WB_TabbedPane.class.js"),i("./AlertBox.js"),i("./DropdownBox.ts"),i("./ProgressBar.ts"),i("./WB_ImagePicker.class.js")],void 0===(o=function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_,C,w,T,E,I,x,S,k,D,O,R){"use strict";var P=function(e,t){"%inherit%"!==e&&(n.UIContainer.prototype.constructor.call(this),this.fields=t&&"object"==typeof t?t:{},P.buildLayout(e,this,this.fields))};return P.prototype=new n.UIContainer("%inherit%"),P.prototype.constructor=P,P.prototype.fields=null,P.prototype._destroyed=!1,P.extendDefinition=function(e,t){var i,n,o,s;if("object"==typeof t&&t)for(n in t)if((s=n in e)&&"object"==typeof e[n]&&"length"in e[n]&&"number"==typeof e[n].length)for(i=0;i<t[n].length;i++)e[n].push(t[n][i]);else if(s&&"object"==typeof e[n])for(o in t[n])e[n][o]=t[n][o];else e[n]=t[n];return e},P.buildLayout=function(w,L,A){if("object"==typeof w&&L){var M,B,N,F,K,V,H="number"==typeof w.length?w:[w];for(M=0;M<H.length;M++)if(!(N=H[M].type?H[M].type:null)||!H[M].ignore){if(F=null,"VerticalLayout"===N&&(N=o.VerticalLayout),"HorizontalLayout"===N&&(N=s.HorizontalLayout),"FlowLayout"===N&&(N=r.FlowLayout),"Label"===N&&(N=c.Label),"List"===N&&(N=f.List),"BigList"===N&&(N=y.BigList),"Button"===N&&(N=l.UIButton),"TextField"===N&&(N=u.TextField),"DropdownBox"===N&&(N=D.DropdownBox),"CustomContainer"===N&&(N=a.CustomContainer),"SliderControl"===N&&(N=v.SliderControl),"AlignSelector"===N&&(N=_.AlignSelector),"HAlignSelector"===N&&(N=C.HAlignSelector),t.Service.controlsMapper&&(N=t.Service.controlsMapper.typeToClass(N)),"function"==typeof N&&N.prototype instanceof i.UIComponent)(F=new N).buildInit(H[M],A);else if("Form"===N)K=(F=new n.UIContainer("form")).getElem(),"action"in H[M]&&K.attr({action:H[M].action}),"method"in H[M]&&K.attr({method:H[M].method}),"enctype"in H[M]&&K.attr({enctype:H[M].enctype}),"submit"in H[M]&&"function"==typeof H[M].submit&&function(e,t){e.getElem().on("submit",(function(){if(!1===t.call(e,A))return!1}))}(F,H[M].submit);else if("Tooltip"===N)F=i.UIComponent.wrapControl(new T(H[M].label?H[M].label:"?",H[M].text,H[M].placement?H[M].placement:"right"));else if("Image"===N)F=i.UIComponent.wrapControl({elem:e(new Image),getValue:function(){return this.elem.get(0).src},setValue:function(e){this.elem.get(0).src=e}}),H[M].value&&F.setValue(H[M].value),H[M].src&&F.setValue(H[M].src);else if("MultilangTextField"===N)F=new d(null,!!H[M].textArea,H[M].resizable?H[M].resizable:void 0,H[M].onReload?H[M].onReload:null),H[M].value&&F.setText(H[M].value),H[M].onChange?F.setOnChange(H[M].onChange):H[M].text&&F.setText(H[M].text),H[M].placeholder&&F.setPlaceholder(H[M].placeholder),H[M].height&&F.setHeight(H[M].height);else if("RadioBox"===N){var j;j=H[M].label&&"object"==typeof H[M].label?new P(H[M].label,A):H[M].label,F=new h(j,null,H[M].group?H[M].group:null,!!H[M].inline,H[M].inputValue?H[M].inputValue:null),H[M].value&&F.setValue(H[M].value),H[M].title&&F.setTitle(H[M].title),H[M].html&&F.setLabelHtml(H[M].html),H[M].helpText&&F.getElem().append(new T("?",H[M].helpText,H[M].helpPlacement?H[M].helpPlacement:"right").elem),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e.on("change",(function(){t.call(e,A)}))}(F,H[M].change)}else if("CheckBox"===N){var U;U=H[M].label&&"object"==typeof H[M].label?new P(H[M].label,A):H[M].label,F=new p(U,null,!!H[M].inline),H[M].value&&F.setValue(H[M].value),H[M].helpText&&F.getElem().append(new T("?",H[M].helpText,H[M].helpPlacement?H[M].helpPlacement:"right").elem),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e.on("change",(function(){t.call(e,A)}))}(F,H[M].change)}else if("MenuItemSelector"===N){var z={};"change"in H[M]&&"function"==typeof H[M].change&&(z.onChange=H[M].change),F=i.UIComponent.wrapControl(new x.MenuListControl(!0,!!H[M].anchorMode,z)),H[M].value&&F.setValue(H[M].value),F.reloadMenuList=function(){this._control.reloadMenuList()},F.getExtendedValue=function(){return this._control.getExtendedValue()},F.setExtendedValue=function(e){this._control.setExtendedValue(e)}}else if("LinkEditSelector"===N)F=i.UIComponent.wrapControl(new m.LinkEditControl(null,H[M].emptyMsg?H[M].emptyMsg:null)),H[M].value&&F.setValue(H[M].value),F.clearValue=function(){this._control.clearValue()};else if("ImageSelector"===N)F=i.UIComponent.wrapControl(new R(H[M].mode?H[M].mode:null,H[M].thumbSize?H[M].thumbSize:60,!!H[M].multiselect,!("mediatabs"in H[M])||!!H[M].mediatabs,"fontAwesomeTab"in H[M]&&!!H[M].fontAwesomeTab,"usePictureManager"in H[M]&&!!H[M].usePictureManager)),H[M].value&&F.setValue(H[M].value),F.setValue=function(e,t){this._control.setValue(e,t)},F.getValues=function(e){return this._control.getValues(e)},F.setValues=function(e){this._control.setValues(e)},F.setMode=function(e){this._control.setMode(e)},F.getValueFileType=function(){return this._control.getValueFileType()},F.setValueFileType=function(e){return this._control.setValueFileType(e)},"select"in H[M]&&"function"==typeof H[M].select&&function(e,t){e._control.callback=function(){t.call(e,A)}}(F,H[M].select),H[M].customContent&&(F._control.customContent=H[M].customContent);else if("LinkSelector"===N)F=i.UIComponent.wrapControl(new g(!!H[M].multilang,!!H[M].noEmail,!!H[M].noPhone,!!H[M].noFiles,!!H[M].noLinkTitle,!!H[M].noTarget,!!H[M].noIndexing,!!H[M].noPopup)),H[M].value&&F.setValue(H[M].value),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e._control.onChange=function(){t.call(e,A)}}(F,H[M].change);else if("StyleSelector"===N)F=i.UIComponent.wrapControl(new b(!!H[M].emptyChoice)),H[M].value&&F.setValue(H[M].value),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e._control.onChange=function(){t.call(e,A)}}(F,H[M].change);else if("FontFamilySelector"===N)F=i.UIComponent.wrapControl(new E(!!H[M].noFixedWidth)),H[M].value&&F.setValue(H[M].value),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e._control.onChange=function(){t.call(e,A)}}(F,H[M].change);else if("FontTransformSelector"===N)F=i.UIComponent.wrapControl(new I),H[M].value&&F.setValue(H[M].value),"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e._control._elem.onChange=function(){t.call(e,A)}}(F,H[M].change);else if("AlertBox"===N)F=new k,H[M].text&&F.setText(H[M].text),H[M].html&&F.setHtml(H[M].html),H[M].style&&F.setBoxStyle(H[M].style);else if("TabbedPane"===N){if(F=new S,H[M].fixedHeight&&F.setFixedHeight(H[M].fixedHeight),H[M].noScroll&&F.setNoScroll(),"object"==typeof H[M].tabs&&H[M].tabs&&H[M].tabs.length>0){H[M].tabs.sort((function(e,t){return("priority"in e?e.priority:0)-("priority"in t?t.priority:0)}));var W=!1;for(B=0;B<H[M].tabs.length;B++)H[M].tabs[B].ignore||(V=H[M].tabs[B],K=F.addTab(V.name?V.name:__("General"),B),W=!0,V.type&&(K.type=V.type),V.children&&P.buildLayout(V.children,K.contentElem,A),V.init&&"function"==typeof V.init&&V.init.call(K.contentElem,V,A));W&&F.selectTab(0)}"change"in H[M]&&"function"==typeof H[M].change&&function(e,t){e.onChange=function(i,n,o){t.call(e,A,i,n,o)}}(F,H[M].change)}else"ProgressBar"===N?(F=new O.ProgressBar,H[M].progress&&F.setProgress("type"in H[M]?H[M].progress:"default",H[M].progress,"text"in H[M]?H[M].text:"")):console.error("TypeError: unknown UI Builder type '"+N+"'");if(F){if(H[M].fixedWidth){var G=Math.max(Math.min(H[M].fixedWidth,12),1);F.addClass("span"+G),12===G&&F.css({float:"none"})}if(H[M].styleClass&&F.addClass(H[M].styleClass),"visible"in H[M]&&F.setVisible(!!H[M].visible),"enabled"in H[M]&&F.setEnabled(!!H[M].enabled),H[M].on&&"object"==typeof H[M].on)for(var $ in H[M].on)"function"==typeof H[M].on[$]&&function(e,t,i){e.on(t,(function(t){i.call(e,t,A)}))}(F,$,H[M].on[$]);H[M].click&&"function"==typeof H[M].click&&function(e,t){e.on("click"+("Button"!==N?" touchstart":""),(function(i){t.call(e,i,A)}))}(F,H[M].click),H[M].css&&"object"==typeof H[M].css&&F.css(H[M].css),H[M].attr&&"object"==typeof H[M].attr&&F.getElem().attr(H[M].attr),H[M].init&&"function"==typeof H[M].init&&H[M].init.call(F,H[M],A),F instanceof n.UIContainer&&H[M].children&&P.buildLayout(H[M].children,F,A),H[M].id&&"string"==typeof H[M].id&&(A[H[M].id]=F),L instanceof n.UIContainer?L.addChild(F):L.append(F.getElem()),H[M].afterInit&&"function"==typeof H[M].afterInit&&H[M].afterInit.call(F,H[M],A)}}}},P.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,P.destroyFields(this.fields))},P.destroyFields=function(e){if(e&&"object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&"function"==typeof e[t].destroy&&e[t].destroy()},t.Service.UIBuilder=P,P}.apply(t,n))||(e.exports=o)},"./WB_Banner.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n){"use strict";var o=function(e){e&&this.__construct(e)};return __extends(o,t.Element),e.registerClass("Banner",o),o.prototype.noPhotoBg="ico-tb-banner",o.prototype.banner=null,o.prototype._params=null,Object.defineProperty(o.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bannerUrl",{get:function(){return this._params.url},set:function(e){this._params.url=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bannerImage",{get:function(){return this._params.image},set:function(e){this._params.image=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bannerScript",{get:function(){return this._params.script},set:function(e){this._params.script=e},enumerable:!0,configurable:!0}),o.prototype._scriptDeactivate=!0,Object.defineProperty(o.prototype,"scriptDeactivate",{get:function(){return this._scriptDeactivate},set:function(e){this._scriptDeactivate=e},enumerable:!0,configurable:!0}),o.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this.scriptDeactivate=!(void 0!==e.content.scriptDeactivate&&!e.content.scriptDeactivate);var i=this;this._params={url:e.content.url?e.content.url:"",image:e.content.image?e.content.image:"",forceflurl:!!e.content.forceflurl,script:e.content.script?e.content.script:""},this.elem.bind("resize",(function(){var e=i.getWidth(),t=i.getHeight();i.banner&&i.params.image&&(i.banner.css({width:e+"px",height:t+"px"}),i.banner.children("img").css({width:e+"px",height:t+"px"}))})),this.updateStyle(!0),this.controls.onDblClick((function(){i.comProperties()}))},o.prototype.getDataDefaults=function(){return n.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},o.prototype.getIcon=function(){return"fa fa-square"},o.prototype.getUsedMediaGalleryItems=function(){var e=t.Element.prototype.getUsedMediaGalleryItems.call(this);return this.params&&this.params.image&&""!==this.params.image&&"none"!==this.params.image&&e.push(this.params.image),e},o.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={url:this.params.url,image:this.params.image,forceflurl:this.params.forceflurl,script:this.params.script,deactivate:this.scriptDeactivate},e},o.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var o=this.params;"object"!=typeof o&&(o={}),this.displayEmptyMessage(!o.image&&!o.script),o.url=o.url?o.url:"",o.image=o.image?o.image:"",o.forceflurl=!!o.forceflurl,o.script=o.script?o.script:"",this.params=o;var s=this;if(this.banner&&(this.banner.remove(),this.banner.empty(),this.banner=null),o.image)if(o.image.split("?")[0].match(/^.*\.swf$/i)){this.banner=n("<object></object>"),this.banner.attr("data",this.makeLocalUrl(o.image)),this.banner.attr("type","application/x-shockwave-flash"),this.banner.css({width:"100%",height:"100%"});var r=n('<param name="movie" />');r.val(this.makeLocalUrl(o.image)),this.banner.append(r),this.banner.append('<param name="menu" value="false" />'),this.banner.append('<param name="wmode" value="transparent" />'),(r=n('<param name="flashvars" />')).val("clickTAG="+escape(encodeURI(o.url))),this.banner.append(r)}else{this.banner=n("<a></a>");var a=n('<img alt="" />');this.banner.append(a),this.banner.attr("href",o.url),a.attr("src",this.makeLocalUrl(o.image)),a.css({border:"none"}),a.get(0).width<=0&&a.bind("load",(function(){s.elem.trigger("resize")}))}else o.script&&(this.scriptDeactivate?this.banner=null:(this.banner=n('<div style="width: 100%; height: 100%;"></div>'),this.banner.html(o.script)));this.banner&&this.container.append(this.banner),this.elem.trigger("resize")},o.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:360},tabs:[{name:__("Static banner"),children:[{type:"VerticalLayout",fluid:!0,children:[{type:"Label",text:__("Image")},{type:"ImageSelector",id:"bannerImage"},{type:"Label",text:__("Banner URL"),helpText:__('For flash banner this url will be passed using "clickTAG".'),css:{marginTop:15}},{type:"TextField",id:"bannerUrl",fixedWidth:12}]}]},{name:__("Script banner"),children:[{type:"VerticalLayout",fluid:!0,children:[{type:"CheckBox",label:__("Deactivate content while in builder (recomended)"),id:"scriptDeactivate",helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")},{type:"Label",text:__("Script"),css:{marginTop:"20px"}},{type:"TextField",id:"bannerScript",textArea:!0,fixedWidth:12,css:{height:240,marginBottom:0}}]}]}],callbackFunc:function(t){e.bannerUrl=t.bannerUrl.getValue(),e.bannerImage=t.bannerImage.getValue(),e.bannerScript=t.bannerScript.getValue(),e.scriptDeactivate=t.scriptDeactivate.getValue()}});i.bannerUrl.setValue(this.bannerUrl),i.bannerImage.setValue(this.bannerImage),i.bannerScript.setValue(this.bannerScript),i.scriptDeactivate.setValue(this.scriptDeactivate)},o.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"bannerUrl",type:i.PropertyType.BannerCustomUrl,uiComponentOptions:{label:__("Banner URL"),helpText:__('For flash banner this url will be passed using "clickTAG".')}}),this.registerProperty({name:"bannerImage",type:i.PropertyType.BannerImage}),this.registerProperty({name:"bannerScript",type:i.PropertyType.ScriptSourceCode}),this.registerProperty({name:"scriptDeactivate",type:i.PropertyType.BannerDeactivateInBuilder})},o}.apply(t,n))||(e.exports=o)},"./WB_BookmarksShare.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n,o){"use strict";var s=function(e){e&&this.__construct(e)};return __extends(s,t.Element),e.registerClass("BookmarksShare",s),s.scriptLoaded=!1,s.prototype.noPhotoBg="ico-tb-share",s.prototype.widget=null,s.prototype._params=null,Object.defineProperty(s.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"addThisUserId",{get:function(){return this._params.user},set:function(e){this._params.user=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"shareButtonSize",{get:function(){return this._params.size},set:function(e){this._params.size=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableFacebook",{get:function(){return this._params.buttons.facebook},set:function(e){this._params.buttons.facebook=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableTwitter",{get:function(){return this._params.buttons.twitter},set:function(e){this._params.buttons.twitter=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableVKontakte",{get:function(){return this._params.buttons.vk},set:function(e){this._params.buttons.vk=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableOdnoklassniki",{get:function(){return this._params.buttons.odnoklassniki_ru},set:function(e){this._params.buttons.odnoklassniki_ru=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableEmail",{get:function(){return this._params.buttons.email},set:function(e){this._params.buttons.email=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableGoogle",{get:function(){return this._params.buttons.google},set:function(e){this._params.buttons.google=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enablePrint",{get:function(){return this._params.buttons.print},set:function(e){this._params.buttons.print=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableCompact",{get:function(){return this._params.buttons.compact},set:function(e){this._params.buttons.compact=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableFacebookLike",{get:function(){return this._params.buttons.facebook_like},set:function(e){this._params.buttons.facebook_like=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableTweetButton",{get:function(){return this._params.buttons.tweet},set:function(e){this._params.buttons.tweet=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableLinkedIn",{get:function(){return this._params.buttons.linkedin},set:function(e){this._params.buttons.linkedin=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableTelegram",{get:function(){return this._params.buttons.telegram},set:function(e){this._params.buttons.telegram=e},enumerable:!0,configurable:!0}),s.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this.container.css({overflow:"hidden"}),this.container.attr("id",this.id+"_addthis-widget");var i=this;s.scriptLoaded||(s.scriptLoaded=!0,o.getScript("//s7.addthis.com/js/250/addthis_widget.js#domready=1",(function(){i.updateStyle(!0)})));var n=e.content.buttons&&"object"==typeof e.content.buttons?e.content.buttons:{facebook:!0,twitter:!0,email:!0};this._params={user:e.content.user?e.content.user:"",size:e.content.size?e.content.size:"16x16",buttons:{facebook:!!n.facebook,twitter:!!n.twitter,vk:!!n.vk,odnoklassniki_ru:!!n.odnoklassniki_ru,email:!!n.email,google:!!n.google,print:!!n.print,compact:!!n.compact,counter_bubble:!!n.counter_bubble,facebook_like:!!n.facebook_like,tweet:!!n.tweet,linkedin:!!n.linkedin,share:!!n.share,telegram:!!n.telegram}},this.updateStyle(!0)},s.prototype.getDataDefaults=function(){return o.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},s.prototype.getIcon=function(){return"fa fa-share-alt"},s.prototype.supportsAutoWidth=function(){return!0},s.prototype.supportsAutoHeight=function(){return!0},s.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={user:this.params.user,size:this.params.size,buttons:{facebook:this.params.buttons.facebook,twitter:this.params.buttons.twitter,vk:this.params.buttons.vk,odnoklassniki_ru:this.params.buttons.odnoklassniki_ru,email:this.params.buttons.email,google:this.params.buttons.google,print:this.params.buttons.print,compact:this.params.buttons.compact,counter_bubble:this.params.buttons.counter_bubble,facebook_like:this.params.buttons.facebook_like,tweet:this.params.buttons.tweet,linkedin:this.params.buttons.linkedin,share:this.params.buttons.share,telegram:this.params.buttons.telegram}},e},s.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this.params;"object"!=typeof n&&(n={}),this.container.empty(),n.user=n.user?n.user:"",n.size=n.size?n.size:"16x16","object"!=typeof n.buttons&&(n.buttons={share:!0}),n.buttons.facebook=!!n.buttons.facebook&&n.buttons.facebook,n.buttons.twitter=!!n.buttons.twitter&&n.buttons.twitter,n.buttons.vk=!!n.buttons.vk&&n.buttons.vk,n.buttons.odnoklassniki_ru=!!n.buttons.odnoklassniki_ru&&n.buttons.odnoklassniki_ru,n.buttons.email=!!n.buttons.email&&n.buttons.email,n.buttons.google=!!n.buttons.google&&n.buttons.google,n.buttons.print=!!n.buttons.print&&n.buttons.print,n.buttons.compact=!!n.buttons.compact&&n.buttons.compact,n.buttons.counter_bubble=!!n.buttons.counter_bubble&&n.buttons.counter_bubble,n.buttons.facebook_like=!!n.buttons.facebook_like&&n.buttons.facebook_like,n.buttons.tweet=!!n.buttons.tweet&&n.buttons.tweet,n.buttons.linkedin=!!n.buttons.linkedin&&n.buttons.linkedin,n.buttons.share=!!n.buttons.share&&n.buttons.share,n.buttons.telegram=!!n.buttons.telegram&&n.buttons.telegram,this.container.children("a").css("display","none");var o=0;for(var s in n.buttons)if(n.buttons[s]){var r=this.id+"_"+s,a="addthis_button_"+s;"counter_bubble"===s&&(a="addthis_counter addthis_bubble_style"),"share"===s&&(a="addthis_button"),0===this.container.children("#"+r).length?this.container.append('<a id="'+r+'" style="float: left;'+(o>0?" margin-left: 4px;":"")+'" class="'+a+'"></a>'):(this.container.children("#"+r).css("display","block"),this.container.children("#"+r).parent().append(this.container.children("#"+r))),o++}this.displayEmptyMessage(!(o>0)),"32x32"===n.size?this.container.children("a").addClass("addthis_32x32_style"):this.container.children("a").removeClass("addthis_32x32_style"),this.container.children("div").remove(),window.addthis&&addthis.toolbox(this.container.get(0),{},{})},s.prototype.comProperties=function(){var e=this,n=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:356},tabs:[{children:[{type:"Label",text:__("Size")},{type:"DropdownBox",id:"shareSize",options:[{name:__("16x16"),id:"16x16"},{name:__("32x32"),id:"32x32"}],change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareSize-change",e)}},{type:"Label",text:__("Buttons"),css:{marginTop:"20px"}},{type:"HorizontalLayout",children:[{type:"CheckBox",label:__("Facebook"),id:"shareBtnFacebook",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnFacebook-change",e)}},{type:"CheckBox",label:__("Email"),id:"shareBtnEmail",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnEmail-change",e)}},{type:"CheckBox",label:__("Facebook Like"),id:"shareBtnFacebookLike",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnFacebookLike-change",e)}}]},{type:"HorizontalLayout",children:[{type:"CheckBox",label:__("Twitter"),id:"shareBtnTwitter",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnTwitter-change",e)}},{type:"CheckBox",label:__("Print"),id:"shareBtnPrint",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnPrint-change",e)}},{type:"CheckBox",label:__("Tweet button"),id:"shareBtnTweet",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnTweet-change",e)}}]},{type:"HorizontalLayout",children:[{type:"CheckBox",label:__("Google"),id:"shareBtnGoogle",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnGoogle-change",e)}},{type:"CheckBox",label:__("AddThis share"),id:"shareBtnCompact",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnCompact-change",e)}}]},{type:"HorizontalLayout",columnWeights:[4,4],children:[{type:"CheckBox",label:__("LinkedIn"),id:"shareBtnLinkedin",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnLinkedin-change",e)}},{type:"CheckBox",label:__("Telegram"),id:"shareBtnTelegram",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnTelegram-change",e)}}]},{type:"HorizontalLayout",columnWeights:[4,4],children:[{type:"CheckBox",label:__("VKontakte"),id:"shareBtnVKontakte",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnVKontakte-change",e)}}]},{type:"HorizontalLayout",columnWeights:[4,4],children:[{type:"CheckBox",label:__("Odnoklassniki"),id:"shareBtnOdnoklassniki",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareBtnOdnoklassniki-change",e)}}]},{type:"Label",text:__("Profile ID (optional)"),helpText:__("AddThis.com profile ID. You can register to get statistics."),css:{marginTop:"20px"}},{type:"TextField",id:"shareUser",change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-shareUser-change",e)}}]}],callbackFunc:function(t){e.addThisUserId=t.shareUser.getValue(),e.shareButtonSize=t.shareSize.getSelectedItem().getId(),e.enableFacebook=t.shareBtnFacebook.getValue(),e.enableTwitter=t.shareBtnTwitter.getValue(),e.enableVKontakte=t.shareBtnVKontakte.getValue(),e.enableOdnoklassniki=t.shareBtnOdnoklassniki.getValue(),e.enableEmail=t.shareBtnEmail.getValue(),e.enableGoogle=t.shareBtnGoogle.getValue(),e.enablePrint=t.shareBtnPrint.getValue(),e.enableCompact=t.shareBtnCompact.getValue(),e.enableFacebookLike=t.shareBtnFacebookLike.getValue(),e.enableTweetButton=t.shareBtnTweet.getValue(),e.enableLinkedIn=t.shareBtnLinkedin.getValue(),e.enableTelegram=t.shareBtnTelegram.getValue()}});n.shareUser.setValue(this.addThisUserId);var o=n.shareSize.getItemById(this.shareButtonSize);o||(o=n.shareSize.getItem(0)),n.shareSize.selectItem(o),n.shareBtnFacebook.setValue(this.enableFacebook),n.shareBtnTwitter.setValue(this.enableTwitter),n.shareBtnVKontakte.setValue(this.enableVKontakte),n.shareBtnOdnoklassniki.setValue(this.enableOdnoklassniki),n.shareBtnEmail.setValue(this.enableEmail),n.shareBtnGoogle.setValue(this.enableGoogle),n.shareBtnPrint.setValue(this.enablePrint),n.shareBtnCompact.setValue(this.enableCompact),n.shareBtnFacebookLike.setValue(this.enableFacebookLike),n.shareBtnTweet.setValue(this.enableTweetButton),n.shareBtnLinkedin.setValue(this.enableLinkedIn),n.shareBtnTelegram.setValue(this.enableTelegram)},s.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"addThisUserId",type:n.PropertyType.AddThisProfileId,dependencies:["params"]}),this.registerProperty({name:"shareButtonSize",type:n.PropertyType.SharingButtonSize,dependencies:["params"]}),this.registerProperty({name:"enableFacebook",type:n.PropertyType.SharingEnableFacebook,dependencies:["params"]}),this.registerProperty({name:"enableTwitter",type:n.PropertyType.SharingEnableTwitter,dependencies:["params"]}),this.registerProperty({name:"enableVKontakte",type:n.PropertyType.SharingEnableVKontakte,dependencies:["params"]}),this.registerProperty({name:"enableOdnoklassniki",type:n.PropertyType.SharingEnableOdnoklassniki,dependencies:["params"]}),this.registerProperty({name:"enableEmail",type:n.PropertyType.SharingEnableEmail,dependencies:["params"]}),this.registerProperty({name:"enableGoogle",type:n.PropertyType.SharingEnableGoogle,dependencies:["params"]}),this.registerProperty({name:"enablePrint",type:n.PropertyType.SharingEnablePrint,dependencies:["params"]}),this.registerProperty({name:"enableCompact",type:n.PropertyType.SharingEnableAddThisShare,dependencies:["params"]}),this.registerProperty({name:"enableFacebookLike",type:n.PropertyType.SharingEnableFacebookLike,dependencies:["params"]}),this.registerProperty({name:"enableTweetButton",type:n.PropertyType.SharingEnableTweetButton,dependencies:["params"]}),this.registerProperty({name:"enableLinkedIn",type:n.PropertyType.SharingEnableLinkedIn,dependencies:["params"]}),this.registerProperty({name:"enableTelegram",type:n.PropertyType.SharingEnableTelegram,dependencies:["params"]})},s}.apply(t,n))||(e.exports=o)},"./WB_Builder.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./PluginApi/BuilderApi.ts"),i("./PluginApi/UIManager.ts"),i("./element/ZIndexHandle.ts"),i("./UserInput.ts"),i("./SiteLoader.ts"),i("./WB_Site.class.js"),i("./Body.ts"),i("./WB_Preloader.class.js"),i("./WB_Dialog.class.js"),i("./WB_MsgDialog.class.js"),i("./Confirm.ts"),i("./UIButton.ts"),i("./util/MenuList.ts"),i("./WB_ComboBox.class.js"),i("./HelpSystem/HelpSystemPlayer.ts"),i("./HelpSystem/HelpOverlay.ts"),i("./ModeManager.js"),i("./LayoutManager.js"),i("./DragNDropZone.ts"),i("./PreviewToolbar.ts"),i("./AlertBox.js"),i("./RemoteLoginDialog.ts"),i("./NotificationRibbon.ts"),i("./TemplateChooser.ts"),i("./FontManager.ts"),i("./WB_LangInputControl.class.js"),i("./WebsiteImporter.ts"),i("./ui/MigrateDialog.ts"),i("./ui/MigrateBackDialog.ts"),i("./BuilderEvent.ts"),i("./SiteTree.ts"),i("./ui/PropertiesPanel.ts"),i("./ui/ViewportSizeControls.ts"),i("./ui/SidebarPanel.ts"),i("./ui/Popover.ts"),i("./FileField.ts"),i("./CommonTypes.ts"),i("./util/DataUtil.ts"),i("./util/TextUtil.ts"),i("./util/ClipboardUtil.ts"),i("./util/ComparisonUtil.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_,C,w,T,E,I,x,S,k,D,O,R,P,L,A,M,B,N,F,K,V,H,j){"use strict";var U=i("./core/BuilderConfig.ts").wbConfig,z=i("./Service.ts").Service,W=i("./util/FlowStepUtil.ts").forwardFlowStep,G=function(){this.__construct()};G.prototype.builderMajorVersion=0,G.prototype.dataInstanceKey="__WB_CLASS__",G.prototype.api=null,G.prototype.site=null,G.prototype.body=null,G.prototype.styleSheet=null,G.prototype.container=null,G.prototype.showLayout=!0,G.prototype.showMeasurementHelpers=!0,G.prototype.snapToGrid=!0,G.prototype.snapToObjects=!0,G.prototype.historyGroupLevel=0,G.prototype.historyGroupState=0,G.prototype.historyChangeId=0,G.prototype.historyCurentAction=null,G.prototype.historyStack=null,G.prototype.historyPointer=0,G.prototype.historyOnChange=null,G.prototype.historyPropertyChangeBuffer=null,G.prototype.historyPropertyChangeTimeout=null,G.prototype.historyGroupRecordingTimeout=null,G.prototype.bodyInstance=null,G.prototype.classList=null,G.prototype.elementList=null,G.prototype.pageModified=!1,G.prototype.elemntQueue=null,G.prototype.preloader=null,G.prototype.msgDlg=null,G.prototype.staticMsgDlg=null,G.prototype.previewWindow=null,G.prototype.loadPageUri="",G.prototype.publishUri="",G.prototype.saveUri="",G.prototype.previewUri="",G.prototype.resetUri="",G.prototype.buyProUrl="",G.prototype.reportUrl="",G.prototype.tplBaseUrl="",G.prototype.modBaseUrl="",G.prototype.userBaseUrl="",G.prototype.userGalleryUrl="",G.prototype.helpUrl=null,G.prototype.availableFontsUrl="",G.prototype.fontThumbsUrl="",G.prototype.favicon=null,G.prototype.pageId=null,G.prototype.template=null,G.prototype.meta=null,G.prototype.excludedElements=null,G.prototype.pageSelector=null,G.prototype.isTouchDevice=null,G.prototype.isSafari=null,G.prototype.touchHandler=null,G.prototype.backupDialog=null,G.prototype.allowDemoBackup=!1,G.prototype.pageBlocksData={},G.prototype.tinyMode=!1,G.prototype.testSignUpBtn=null,G.prototype.signUpBtn=null,G.prototype.isReseller=!1,G.prototype.forceFullTextEditorForTouchDevices=!1,G.prototype.commonErrorMessage=null,G.prototype.isZyro=!1,G.prototype.siteDomain=null,G.prototype.pluginToolbar=null,G.prototype.previewToolbar=null,G.prototype.enableForcedHttpsPort=!1,G.prototype.mapsConfig=null,G.prototype.formConfig=null,G.prototype.maxMenuItems=0,G.prototype.formsAllowed=null,G.prototype.templateChooser=null,G.prototype.saveDataProviders=[],G.prototype.layoutManager=null,G.prototype.panelUrl=null,G.prototype.logoutUrl=null,G.prototype.verifySession=null,G.prototype.paymentGateways=null,G.prototype.rtl=!1,G.prototype.maxUploadFileSize=0,G.prototype.maxUploadImageFileSize=0,G.prototype.maxUploadImageSize=0,G.prototype.helpScenario=null,G.prototype.demoConfig=null,G.prototype.serverId=0,G.prototype.pluginData=null,G.prototype.publishBlocked=!1,G.prototype.publishOnLoad=!1,G.prototype.testPublishEnabled=!1,G.prototype.helpPlayerVisible=!1,G.prototype.elementCompositionData=null,G.prototype.elementCompositionIcons=null,G.prototype.initUiPluginId=null,G.prototype.uiColorScheme="light",G.prototype.migrateBackUrl=null,G.prototype.migrateBackHide=!1,G.prototype.responsivePro=!1,G.prototype.sidebarPanel=null,G.prototype.propertiesPanel=null,G.prototype.viewportSizeControls=null,G.prototype.layoutPopupMode=null,G.prototype.layoutPopupWidth=null,G.prototype.layoutPopupHeight=null,G.prototype.pluginRepoPath=null,G.prototype.builderUserName=null,G.prototype.isAnyoneEditingNow=!1,G.prototype.showHtaccess=!1,G.prototype.colorPalettes=null,G.prototype.__construct=function(){var i=this;this.wbConfig=U,this.api=new t.BuilderApi(this,U),e.fn.wbSetClassInstance=function(t){e(this).each((function(){e(this).data(i.dataInstanceKey,t)}))},e.fn.wbUnsetClassInstance=function(){e(this).each((function(){e(this).removeData(i.dataInstanceKey)}))},this.isTouchDevice="ontouchstart"in document.documentElement&&(this.detectTouchDevice()||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)),this.isSafari=!1,-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(this.isSafari=!0),!this.isTouchDevice&&"matchMedia"in window&&window.matchMedia("(pointer: coarse)").matches&&(this.isTouchDevice=!0),this.showLayout=!1,this.snapToGrid=!1,this.showMeasurementHelpers=!1,this.snapToObjects=!1,e.fn.wbGetClassInstance=function(){return e(this).data(i.dataInstanceKey)},e.fn.wbGetClassName=function(){var t=e(this).data(i.dataInstanceKey);return t?t.constructor.name:null},e.ui.plugin.add("resizable","fixresize",{isCorner:!1,start:function(t,i){this.isCorner=e(t.target).is(".ui-resizable-se, .ui-resizable-sw, .ui-resizable-ne, .ui-resizable-nw")},resize:function(t,i){if(!this.isCorner){var n=e(this).data("resizable");n.size.height=n.originalSize.height*n.size.width/n.originalSize.width}},stop:function(e,t){}}),String.prototype.repeat=function(e){return new Array(e+1).join(this)},Object.keys||(Object.keys=function(e){if("object"!=typeof e)throw new TypeError("Object.keys called on non-object");var t=[];for(var i in e)t.push(i);return t}),Object.wbCompare=function(e,t){if(Object.keys(e).length==Object.keys(t).length){for(var i in e)if(e[i]!=t[i])return!1;return!0}return!1},this.classList={},this.elementList={},this.elemntQueue=[],this.excludedElements=[],this.historyStack=[],s.UserInput.init(document),s.UserInput.addHotKey("Ctrl+S",(function(e){return e.stopPropagation(),e.preventDefault(),u.stack.length||i.save(!0),!1})),s.UserInput.addHotKey("Ctrl+Z",(function(){i.historyUndo()}),!0),s.UserInput.addHotKey("Ctrl+Y",(function(){i.historyRedo()}),!0),s.UserInput.addHotKey("Ctrl+C",(function(e){H.handleCopyEvent(e)}),!0),this.pluginToolbar=[],this.paymentGateways=[]},G.prototype.init=function(){this.rtl="rtl"===e("html").eq(0).attr("dir"),e(document.body).addClass("wb-ui-color-scheme-"+this.uiColorScheme),"function"==typeof this._loadPlugins&&this._loadPlugins(),b.initModes(this.availableModes),E.init(U),y.init(this,U),n.init(this.api,this.initUiPluginId)},G.prototype.initContinue=function(){e.ajax({url:U.getUrl("background-update"),type:"GET",async:!0}),E.defaultMessages();var t,i=this;x.FontManager.init(),R.GlobalEvents.on("help.playershow help.playerhide",(function(e){i.helpPlayerVisible=e.visible,i.updateDropZones()})),e(document).bind("click",(function(t){i.clearSelections(),!e(t.target).is("#page_selector *")&&i.pageSelector&&i.pageSelector.close(),g.onDocumentClick(t),S.onDocumentClick(t),B.closeAll(),t.stopPropagation()})).on("show.bs.modal",(function(){if(!e(".modal:visible").length){var t=R.VisibilityChangedBuilderEvent(!0);R.GlobalEvents.triggerEvent("modal.show",t)}})).on("hidden.bs.modal",(function(){if(!e(".modal:visible").length){var t=R.VisibilityChangedBuilderEvent(!1);R.GlobalEvents.triggerEvent("modal.hide",t)}})),e(".dropdown-toggle").bind("click",(function(){i.pageSelector&&i.pageSelector.close()})),this.templateChooser=new I.TemplateChooser,e(window).resize((function(){i.bodyInstance&&i.highlightLayout(i.showLayout)})),this.previewToolbar=C.init(this),this.historyOnChange=function(){var e=new R.HistoryChangedBuilderEvent;R.GlobalEvents.triggerEvent("history.changed",e)},this.historyOnChange(),i.isTouchDevice&&e('*[data-toggle="dropdown"]').on("click",(function(e){e.stopPropagation()})),e(window).on("resize",(function(e){e.isTrigger||R.GlobalEvents.triggerEvent("block.main.updatesize",{})}));for(var n={class:"Site",content:{pages:[]}},o=0;o<this.elemntQueue.length;o++){var s=this.elemntQueue[o];"Site"===s.class?n=s:"LayoutElement"===s.class&&(s.isMovable=!1)}this.panelUrl&&e("<button>").addClass("btn btn-danger").attr({type:"button"}).text(__("Back to Cpanel")).append('&nbsp;<span class="glyphicon glyphicon-chevron-right"></span>').css({marginLeft:10,fontSize:"11px",lineHeight:"20px"}).on("click",(function(){var e=[];e.push({title:__("Save"),cssClass:"btn-default",func:function(){i.save(!0,(function(){setTimeout((function(){location.href=i.panelUrl}),500)}))}}),e.push({title:__("Save and publish"),cssClass:"btn-success",func:function(){i.publish((function(){setTimeout((function(){location.href=i.panelUrl}),500)}))}}),h.Confirm.showDialog(__("Confirm"),__("Page was modified.\nDo you want to save changes before exit?"),e,360)})).appendTo((t||(t=e("<div>").css({display:"inline-block",width:1,position:"absolute",right:-1}).appendTo(e("#head").find(".ctrl-right"))),t)),this.site=new a(n),k.WebsiteImporter.onBuilderInit(U.websiteImportStatus)||this.initPage(),e(".wb_badge_help").tooltip();var r=null;this.verifySession=function(t){T.isProcessing()||e.get(U.getUrl("session_keep_alive"),(function(e){var n=!0;e.error&&"another-builder"===e.error&&(clearInterval(r),i.moreThanOneBuilder(),n=!1),"function"==typeof t&&t.call(i,n,!0)}),"json").fail((function(){"function"==typeof t&&t.call(i,!1,!1)}))},r=setInterval((function(){i.verifySession()}),6e4),i.autoBackupsEnable&&!i.we&&setInterval((function(){var t=new Date;e.get(U.baseUrl+"auto_save_project/?ts="+t.getTime())}),1e3*i.autoBackupsSavingInterval);var l=null;this.layoutPopupMode&&parseInt(this.layoutPopupWidth)&&((l={})["w"+this.layoutPopupWidth]={id:"w"+this.layoutPopupWidth,name:"w"+this.layoutPopupWidth,title:"w"+this.layoutPopupWidth,width:parseInt(this.layoutPopupWidth)}),_.init(this,U),this.layoutManager=v,this.layoutManager.init(this),b.init(this,l),T.init(),f.HelpSystemPlayer.init(this,U),z.Store.Module.init(this,U),z.Store.ModuleForCompositions.init(this,U),z.Blog.API.init(U),z.BlogForCompositions.API.init(U),z.GalleryPictureManager.init(),z.ElementComposition.init(this.elementCompositionData,this.elementCompositionIcons),this.sidebarPanel=new M.SidebarPanel(this.body),this.viewportSizeControls=new A.ViewportSizeControls(this.body),O.initPanel(this.sidebarPanel),new P.SiteTree(this.api,this).init(this.sidebarPanel),this.propertiesPanel=new L.PropertiesPanel,this.propertiesPanel.init(this.sidebarPanel),H.init(document),R.GlobalEvents.on("modes.changed",(function(e){if(i.bodyInstance){var t=[];for(i.bodyInstance.traverseElements((function(i){return t.push(i),i.switchMode(e.previousMode,e.mode,!1,e.manual),F.TraverseControl.Continue})),i.bodyInstance.switchMode(e.previousMode,e.mode,!1),i.bodyInstance.updateStyle(!0),o=0;o<t.length;o++)t[o].updateStyle(!0),t[o].onResize(!0);i.showLayout&&i.highlightLayout(i.showLayout),z.contextMenu.hideAll()}}));var c=new R.BuilderInitBuilderEvent;R.GlobalEvents.triggerEvent("builder.init",c)},G.prototype.getSiteTreeNodeProperties=function(){return{icon:null,name:null}},G.prototype.getSiteTreeNodeChildren=function(){if(this.helpPlayerVisible){var e=z.HelpSystemPlayer.getCanvas();if(e)return e.getChildren()}return this.bodyInstance?this.bodyInstance.getSiteTreeNodeChildren():[]},G.prototype.getCurrentContextRootElements=function(){var e=this.getCurrentContextCanvas();return e?e.getChildren():null},G.prototype.getCurrentContextCanvasClientRect=function(){var e=this.getCurrentContextCanvas();return e?e.getCanvasClientRect():null},G.prototype.getCurrentContextCanvas=function(){if(this.helpPlayerVisible){var e=z.HelpSystemPlayer.getCanvas();if(e)return e}return this.bodyInstance},G.prototype.getViewportRect=function(){var e=this.viewportSizeControls.getViewportClientRect();if(!e)return null;var t=this.viewportSizeControls.getControlClientRect(),i=document.getElementsByTagName("HTML")[0],n=i.clientWidth,o=i.clientHeight;return{left:e.left,top:t.top+t.height,right:n-e.left-e.width,bottom:0,width:e.width,height:o-t.top-t.height,windowWidth:n,windowHeight:o}},G.prototype.getSiteTreeNodeMenu=function(){return null},G.prototype.isSelected=function(){return!1},G.prototype.setSelected=function(e){},G.prototype.initPage=function(){W(U,1),parseInt(this.pageId,10)>0||this.layoutPopupMode?this.loadPage(this.pageId,this.layoutPopupMode||this.isComposer,(function(){setTimeout((function(){T.handlePublish()}),1e3);var e=f.HelpSystemPlayer.init(this,U);if(e&&e.handlePageLoad(this.helpScenario),y.handlePageLoad(),W(U,2),this.responsivePro&&this.migrateUrl){var t=this;D.show().then((function(){t.goToPage(null,t.migrateUrl)}))}})):this.templateChooser.setVisible(!0)},G.prototype.detectTouchDevice=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var e=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"i-will-not-match-this",")"].join("");return!(!window.matchMedia||!window.matchMedia(e).matches)},G.prototype.setPageModified=function(t){if(!this.isAnyoneEditingNow){if(this.pageModified!=t&&!e.browser.msie){var i=this;function e(e){if(i.pageModified)return e.preventDefault(),e.returnValue="Are you sure you want to leave"}t?window.addEventListener("beforeunload",e,{capture:!0}):window.removeEventListener("beforeunload",e,{capture:!0})}this.pageModified=t}},G.prototype.moreThanOneBuilder=function(){var e=this;e.staticMsgDlg||(e.staticMsgDlg=new d(null,null,null,null,!0),e.staticMsgDlg.setTitle(__("Warning")),e.staticMsgDlg.setMessage(__('We have noticed that there is currently another builder opened in the same browser. Please use different browsers for editing several websites at the same time or edit one website after another.<br /><br />If you really need to save this website do the following:<ul><li>Leave this builder open and close other builders;</li><li>Open builder for the website you are currently on in the same browser;</li><li>Return to this builder;</il><li>Click on "Stay on this page" and click "Save".'),null,"block"),e.staticMsgDlg.removeAllButtons(),e.staticMsgDlg.addButton(__("Stay on this page"),(function(){e.staticMsgDlg.setVisible(!1)}),!1,"btn-danger"),e.staticMsgDlg.addButton(__("Close builder"),(function(){e.setPageModified(!1),window.open("about:blank","_self").close()}),!1,"btn-success")),e.staticMsgDlg.setVisible(!0)},G.prototype.clearSelections=function(){},G.prototype.registerElement=function(e){e&&(this.elementList[e.id]=e)},G.prototype.gridSnap=function(e,t,i){var n=this.bodyInstance?this.bodyInstance.grid.getSize():0;return(t?Math.floor(e/n):i?Math.ceil(e/n):Math.round(e/n))*n},G.prototype.autoSnapOnAxis=function(e,t,i){var n,o=[];if(this.bodyInstance&&this.bodyInstance.grid.getSize(),this.snapToGrid&&o.push(this.gridSnap(e,!1,!1)),o.length){var s,r=null,a=0;for(n=o.length-1;n>=0;n--)s=Math.abs(o[n]-e),(null===r||s<a)&&(r=o[n],a=s);return r}return e},G.prototype.autoSnapX=function(e){return this.autoSnapOnAxis(e,"x",null)},G.prototype.autoSnapY=function(e,t){return this.autoSnapOnAxis(e,"y",t)},G.prototype.highlightLayout=function(e,t){this.showLayout=e,this.layoutManager.setVisible(e,t)},G.prototype.setLayoutEnabled=function(e){this.layoutManager.setEnabled(e)},G.prototype.goFullScreen=function(e){for(var t=["webkit","moz","ms","o",""],i=document.documentElement,n=!1,o="",s=0,r="FullScreen",a="RequestFullScreen",l="CancelFullScreen";s<t.length;){var c=a;if(""===(o=t[s])&&(c=c.substr(0,1).toLowerCase()+c.substr(1)),void 0!==i[c=t[s]+c]){n=!0,a=i[c],"webkit"===o&&(r="IsFullScreen"),r=""===t[s]?r.substr(0,1).toLowerCase()+r.substr(1):o+r,r=document[r],l=""===t[s]?l.substr(0,1).toLowerCase()+l.substr(1):o+l,l=document[l];break}s++}return!!n&&(e||(r?l&&l.call(document):a&&a.call(i)),!0)},G.prototype.goToPage=function(e,t,i){var n=e,o=this,s=t,r=!0;if(z.textArea.hideEditors(),o.pageModified){var a=this.site.getPage(e),l=!s&&e&&a&&a.copyFrom,c=[];c.push({title:__("Cancel")}),l||c.push({title:__("Don't Save"),cssClass:"btn-danger",func:function(){s?location.href=s:(z.element.unselectAll(),o.loadPage(n,r,i))}}),c.push({title:__("Save"),cssClass:"btn-success",func:function(){o.save(!0,(function(){setTimeout((function(){s?location.href=s:(z.element.unselectAll(),o.loadPage(n,r,i))}),1e3)}),null,!0)}}),h.Confirm.showDialog(__("Confirm"),__("Page was modified.\nDo you want to save changes before exit?")+(l?"<br /><br /><span>"+__("You must save before going to newly created page.")+"</span>":""),c,560)}else if(s)location.href=s;else{if(this.preloader)for(;this.preloader.numStacks()>1;)this.preloader.popStack();z.element.unselectAll(),o.loadPage(n,r,i)}},G.prototype.unloadPage=function(){z.element.unselectAll(),this.bodyInstance&&(this.bodyInstance.__destruct(),R.GlobalEvents.triggerEvent("site.structure.changed",new R.SiteStructureChangedBuilderEvent)),this.historyClear(),WB_Menu.elemList={},WB_Menu.strangeElemList={},this.bodyInstance&&this.bodyInstance.cleanup(),this.bodyInstance=null,o.reset(),z.element.resetIdentifierIndex(),z.contextMenu.cleanup()},G.prototype.loadPage=function(t,i,n){this.preloader||(this.preloader=new c(__("Loading page"))),this.preloader.setTitle(__("Loading page")),this.preloader.reset(),this.preloader.setHintsCategory("builder"),this.preloader.setVisible(!0),this.preloader.setMessage("",__("Loading page")+"..."),this.preloader.setProgress(10),this.unloadPage(),this.preloader.setProgress(20);var o=this,s=i,a=n,l=t;setTimeout((function(){e.getJSON(U.getUrl(o.loadPageUri,{id:t}),(function(e){o.colorPalettes="colorPalettes"in e?e.colorPalettes:null;var t=new R.PageLoadBuilderEvent(l,e);R.GlobalEvents.triggerEvent("page.beforeload",t),t.defaultPrevented||r.loadInitSiteData(e,o,s,(function(){R.GlobalEvents.triggerEvent("page.load",t),t.defaultPrevented||"function"!=typeof a||a.call(this),R.GlobalEvents.triggerEvent("site.structure.changed",new R.SiteStructureChangedBuilderEvent)}))})).error((function(){o.preloader.setMessage("",__("Error loading page"),"error"),o.preloader.setVisible(!1),o.preloader.setHintsCategory(null),o.staticMsgDlg||(o.staticMsgDlg=new d(null,null,null,null,!0)),o.staticMsgDlg.setTitle(__("Error loading page. Try again later.")),o.staticMsgDlg.setMessage("",__("Error loading page. Try again later."),"error-big"),o.staticMsgDlg.removeAllButtons(),o.staticMsgDlg.addButton(__("Retry loading the page"),(function(){o.staticMsgDlg.setVisible(!1),o.loadPage(t,s,a)}),!0,"btn-primary"),o.staticMsgDlg.setVisible(!0)}))}),1e3)},G.prototype.getColorPalettes=function(){return this.colorPalettes||{}},G.prototype.prependColor=function(e,t,i){this.callPaletteApi(e,"prepend",t,i)},G.prototype.appendColor=function(e,t,i){this.callPaletteApi(e,"append",t,i)},G.prototype.removeColor=function(e,t,i){this.callPaletteApi(e,"remove",t,i)},G.prototype.callPaletteApi=function(t,i,n,o){var s=this,r=o;e.ajax({url:U.getUrl("update-palette"),type:"POST",dataType:"json",async:!0,data:JSON.stringify({palette:t,action:i,color:n}),success:function(e){s.colorPalettes=e.colorPalettes,"function"==typeof r&&r()}})},G.prototype.regSaveDataProvider=function(e,t){this.saveDataProviders.push({id:e,func:t})},G.prototype.assignCommonElementReferences=function(e){this.bodyInstance.traverseElements((function(t,i,n){return e.hasOwnProperty(t.id)&&(t.referenceTo=e[t.id]),0}))},G.prototype.save=function(t,i,n,o,s,r,a,l,u){var h,p=this,g=function(){z.textArea.hideEditors();var r=new R.SaveEvent;R.GlobalEvents.triggerEvent("builder.beforesave",r);var g=n||U.getUrl(p.saveUri),f=u||this.previewToolbar.isOpen||p.isAnyoneEditingNow||!p.pageModified,y={noSave:f?"1":"0"};if(!f){var b=[],v=p.site.serialize(!0);v.isCommon=!0,b.push(v);var _=p.bodyInstance.serialize();_.isCommon=!0,b.push(_);var C,w,T,E=p.bodyInstance.getChildren();for(C=0,w=E.length;C<w;C++)b.push(E[C].serialize());for(C=0,w=p.excludedElements.length;C<w;C++)(T=e.extend(!0,{},p.excludedElements[C])).excluded=!0,b.push(T);y.reset=s?1:null,y.id=p.pageId,y.data=e.JSON.encode(b),y.meta=e.JSON.encode(p.meta),y.page_blocks_data=e.JSON.encode(p.pageBlocksData),y.removedMenuList=e.JSON.encode(m.getRemovedMenuList())}for(C=0;C<p.saveDataProviders.length;C++)(h=p.saveDataProviders[C]).id&&"function"==typeof h.func&&(y[h.id]=e.JSON.encode(h.func.call(p)));if(t){if(p.preloader||(p.preloader=new c(a||__("Save"))),p.preloader.selectStack(0),o){for(;p.preloader.numStacks()>2;)p.preloader.popStack();p.preloader.resetAll(),p.preloader.numStacks()<2&&p.preloader.pushStack()}else for(;p.preloader.numStacks()>1;)p.preloader.popStack();p.preloader.setTitle(a||__("Save"));var I={url:g,method:"post",opts:y},x=!1,S=function(e,t,n){if(e)"object"==typeof n.assignReferences&&p.assignCommonElementReferences(n.assignReferences),p.setPageModified(!1);else if("index-php-wrong"!==t){var o;if("object"==typeof t&&"title"in t&&"description"in t?(o=t.description,t.title):o=t,"saving-error"===t)o=__("An error occured while saving. Please try again in few seconds.");else if("another-builder"===t)return void p.moreThanOneBuilder();p.msgDlg||(p.msgDlg=new d),p.msgDlg.setMessage(o,__("Error")+":","error"),p.msgDlg.setVisible(!0)}p.preloader.numStacks()>1&&p.preloader.selectStack(1),W(U,4),"function"==typeof i&&i(e,t)},k=p.preloader.content.find(".b2c-preloader-iframe");k.length&&k.hide();var D=!!l;p.preloader.reset(),p.preloader.monitor(I,S,!1,o,(function(e){return"object"==typeof e&&!x&&"recover"in e&&"full-publish"===e.recover&&(x=!0,setTimeout((function(){I.opts.full=!0,p.preloader.monitor(I,S,!1,o,null,D)}),10),!0)}),D),p.preloader.setVisible(!0)}else{var O=i;e.post(g,y,(function(){p.pageBlocksData={},p.setPageModified(!1),W(U,4),O&&"function"==typeof O&&O(!0)})).error((function(){O&&"function"==typeof O&&O(!1)}))}};r?g.apply(this,[t,i,n,o,s,r]):p.checkPageErrors(__("Warning"),g,[t,i,n,o,s,!0])},G.prototype.publish=function(t,i){var n=this,o=t;n.checkPageErrors(__("Warning"),(function(){var t={};i&&(t.ignoreIndexPhpCheck="1");var s=U.getUrl(n.publishUri+"/"+n.pageId,t),r=U.isB2C&&/\.site\.pro$/.test(n.siteDomain);if(n.save(!0,(function(e,t){if(e)W(U,5,!0),"function"==typeof o&&o();else{var s=t,r=__("Error");if("index-php-wrong"===t&&(r=__("Warning"),s=__("Builder detected an existing website on hosting."),!i))return s+=" "+__("Are you sure you want to overwrite it with a current website?"),void h.Confirm.showDialog(r,s,[{title:__("No, keep existing website"),cssClass:"btn-default"},{title:__("Save and publish"),cssClass:"btn-success",func:function(){n.publish(o,!0)}}],540);n.msgDlg||(n.msgDlg=new d),"object"==typeof t&&"title"in t&&"description"in t&&("msgTitle"in t&&(r=t.msgTitle),s=t.description,t=t.title),n.msgDlg.setTitle(__pr(t)),n.msgDlg.setMessage(__pr(s),r+":","error-big"),n.msgDlg.setVisible(!1,!0),n.msgDlg.setVisible(!0)}}),s,null,!0,!0,__("Publish"),r,i),n.preloader){n.preloader.clearNotifications(),n.maxMenuItems&&n.site&&n.site.pages&&Object.keys(n.site.pages).length>n.maxMenuItems&&n.preloader.setNotification(__("There are only %s pages allowed to publish in your plan").replace("%s",n.maxMenuItems),__("Note")+":");var a=n.getUnavailablePlugins();if(a.length>0){var l=__("These plugins will not be published")+":<br />"+a.join(", ");n.preloader.setNotification(l,__("Warning")+":","warning")}if(r){var c=n.preloader.content.find(".b2c-preloader-iframe");c.length||(c=e("<div>").addClass("b2c-preloader-iframe"),n.preloader.content.append(c),n.preloader.addButton(__("Close"),(function(){n.preloader.setVisible(!1)})),e(window).on("message",(function(e){e.originalEvent.data&&"resize"===e.originalEvent.data.action&&e.originalEvent.data.value&&c.children("iframe").css("height",e.originalEvent.data.value+5+40+"px")})),c.html('<iframe src="'+U.b2cDomainsUrl+'" style="width: 100%; height: 130px; border: none;">')),c.show()}}}))},G.prototype.getUnavailablePlugins=function(){for(var e,t=[],i=0;e=this.pluginToolbar[i];i++)e.inactive&&t.push(e.name);return t},G.prototype.getModeManager=function(){return z.modeManager},G.prototype.previewPage=function(e,t,i,n){var o=this,s=U.getUrl(o.previewUri+"/"+e),r=[];if(o.site.currSelLang&&o.site.languages.length>0&&r.push("lang="+o.site.currSelLang),"boolean"==typeof i&&i&&r.push("nomargins=1"),"boolean"==typeof n&&n&&r.push("noregen=1"),r.length&&(s+=(s.indexOf("?")>-1?"&":"?")+r.join("&")),!t){o.previewWindow=window.open("about:blank"),o.previewWindow.document.open();var a,l="<html><head><title>"+__("loading...")+'</title><base href="'+U.baseUrl+'" />'+(o.favicon?'<link rel="'+o.favicon.rel+'" href="'+o.favicon.href+'" type="'+o.favicon.type+'" />':"")+'<link rel="stylesheet" type="text/css" href="modules/builder/js/lib/bootstrap/css/bootstrap.min.css?v=3.3.6"/></head><body><div class="modal" style="top: 0; margin-top: '+(window.innerHeight-106)/2+'px"><div class="modal-header"><h3>'+((a=__("loading..."))[0].toUpperCase()+a.substr(1))+'</h3></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom: 5px"><div class="bar" style="width: 100%"></div></div></div></div></body></html>';o.previewWindow.document.write(l),o.previewWindow.document.close()}t&&(o.previewWindow=t.open()),o.previewWindow.document.getElementsByTagName("body"),o.previewWindow.location.target="_self",o.previewWindow.location.href=s,o.previewWindow.focus()},G.prototype.preview=function(t,i,n){var o=this,s=e.Deferred();return o.checkPageErrors(__("Warning"),(function(){i?(o.previewPage(o.pageId,t,n,!1),s.resolve()):o.save(!1,(function(e,i){e?(o.previewPage(o.pageId,t,n,!1),s.resolve()):(o.previewWindow&&o.previewWindow.close(),o.msgDlg||(o.msgDlg=new d),o.msgDlg.setTitle(i),o.msgDlg.setMessage(i,__("Error")+":","error-big"),o.msgDlg.setVisible(!0),s.reject())}),null,!1,!1,!0)})),s.promise()},G.prototype.checkPageErrors=function(e,t,i){"object"!=typeof i&&(i=[]);var n=this;0===n.bodyInstance.getContentElements().length?(n.staticMsgDlg||(n.staticMsgDlg=new d(null,null,null,null,!0)),n.staticMsgDlg.setTitle(e),n.staticMsgDlg.setMessage(__("Completing this action will make your website empty. Are you sure you want to continue?")+"<br/><br/>"+__("If the page you loaded, due to some errors, was empty from the beginning, then please don't save it and try reloading the page in a few minutes."),__("You are saving an empty page."),"block"),n.staticMsgDlg.removeAllButtons(),n.staticMsgDlg.addButton(__("Yes, this is intentional"),(function(){n.staticMsgDlg.setVisible(!1),t.apply(n,i)}),!1,"btn-danger"),n.staticMsgDlg.addButton(__("Reload the page"),(function(){n.staticMsgDlg.setVisible(!1),n.loadPage(n.pageId)}),!0,"btn-success"),n.staticMsgDlg.addButton(__("Cancel"),(function(){n.staticMsgDlg.setVisible(!1)}),!1,""),n.staticMsgDlg.setVisible(!0)):t.apply(n,i)},G.prototype.backupRestore=function(){var t,i=this,n=U.baseUrl+U.getLanguageByLocale(U.locale).code+"/restore_project/";if(!this.backupDialog){var o=z.uiManager.getApiInstance(),s=!U.testMode||wb_builder.allowDemoBackup;this.backupDialog=new u(__("Backup/Restore"),null,new z.UIBuilder({type:"TabbedPane",tabs:[{name:__("Backup"),ignore:s,children:[{type:"AlertBox",text:__("Unavailable in test mode"),css:{marginTop:15},style:w.STYLE_INFO}]},{name:__("Backup"),ignore:!s,children:[{type:"VerticalLayout",spacing:15,css:{marginTop:15,textAlign:"center"},children:[{type:"Label",css:{fontWeight:"normal","white-space":"normal"},text:__("Download Zyro Builder template to your computer to restore it later.")},{type:"Button",text:__("Download Backup"),buttonStyle:p.UIButton.STYLE_SUCCESS,click:function(){var e=this;this.setIcon("icon-loading"),this.setButtonStyle(p.UIButton.STYLE_DEFAULT),this.setEnabled(!1),i.save(!1,(function(){e.setIcon(null),e.setButtonStyle(p.UIButton.STYLE_SUCCESS),e.setEnabled(!0),location.href=U.baseUrl+"save_project/"}))}}]}]},{name:__("Restore"),children:[{type:"VerticalLayout",spacing:15,css:{marginTop:15},children:[{type:"Label",css:{fontWeight:"normal",textAlign:"center","white-space":"normal"},ignore:wb_builder.autoBackupsEnable,text:__("Choose Zyro Builder template file to restore from. Current template will be lost.")+(wb_builder.maxUploadBackupFileSize?" ("+__("max")+": "+wb_builder.maxUploadBackupFileSize+")":"")},{type:"Form",action:n,method:"post",enctype:"multipart/form-data",id:"form",css:{marginBottom:0},init:function(){this.getElem().prepend('<input type="hidden" name="backup_type" value="file" />')},submit:function(e){if((!e.typeFile||e.typeFile.getValue())&&!e.upl.getValue())return alert(__("No file chosen")),!1;if(e.backupList){var t=e.backupList.getElem().find("li.active").data("file");t&&this.getElem().append('<input type="hidden" name="backup" value="'+t+'" />')}},children:[{type:"VerticalLayout",children:[{type:"VerticalLayout",children:[{type:"RadioBox",id:"typeFile",group:"backup_type",inputValue:"file",ignore:!wb_builder.autoBackupsEnable,label:__("Restore from file")+(wb_builder.maxUploadBackupFileSize?" ("+__("max")+": "+wb_builder.maxUploadBackupFileSize+")":"")},{type:"FlowLayout",css:{marginTop:5,textAlign:wb_builder.autoBackupsEnable?"left":"center"},children:[{type:N.FileField,id:"upl",name:"pro_upl",accept:".sitebuilder",css:{marginRight:20,maxWidth:200},click:function(e,t){t.typeFile&&t.typeFile.setValue(!0)},change:function(){var e=this.files.length?this.files[0]:null;if(!e)return!0;/^.+\.sitebuilder$/i.test(e.name)?wb_builder.maxUploadBackupFileSizeInt&&e.size>wb_builder.maxUploadBackupFileSizeInt&&(alert(__("File size is larger than allowed")),t.upl.setValue(null)):(alert(__('File must have extension "%s"').replace("%s",".sitebuilder")),t.upl.setValue(null))}},{type:"Button",text:__("Restore"),ignore:wb_builder.autoBackupsEnable,buttonStyle:p.UIButton.STYLE_DANGER,buttonType:p.UIButton.TYPE_SUBMIT}]}]},{type:"VerticalLayout",ignore:!wb_builder.autoBackupsEnable,css:{marginTop:15},styleClass:"wb_backup_block left",children:[{type:"RadioBox",id:"typeAuto",group:"backup_type",inputValue:"auto",label:__("Choose auto backup version to restore")},{type:"CustomContainer",id:"backupList",css:{overflow:"auto",maxHeight:200,marginTop:5},init:function(t,i){this.refreshAutoBackups=function(){var t=this,n=U.baseUrl+U.getLanguageByLocale(U.locale).code+"/get_backups?ts="+(new Date).getTime();e.get(n,(function(n){var o,s,r,a,l,c,u,d,h,p,m="";if(n.error)m+='<p class="no-backups">'+n.error;else if(n.backups&&n.backups.length){for(m+='<ul class="nav nav-pills nav-stacked" style="font-size: 12px;">',o=0;o<n.backups.length;o++)s=n.backups[o],p=(h={year:(r=new Date(1e3*s.ts)).getFullYear(),mon:(a=r.getMonth()+1)<10?"0"+a:a,day:(l=r.getDate())<10?"0"+l:l,hour:(c=r.getHours())<10?"0"+c:c,minute:(u=r.getMinutes())<10?"0"+u:u,second:(d=r.getSeconds())<10?"0"+d:d}).year+"-"+h.mon+"-"+h.day+" "+h.hour+":"+h.minute,s.template&&(p+=" - "+s.template),m+="<li"+(0===o?' class="active"':"")+' data-file="'+s.file+'"><a href="javascript:void(0);">'+p+"</a></li>";m+="</ul>"}else m+='<p class="no-backups">'+__("There are no auto backups.")+"</p>";t.getElem().html(m);var g=t.getElem().find("li");g.on("click",(function(){g.removeClass("active"),e(this).addClass("active"),i.typeAuto.setValue(!0)}))}),"json")}}}]}]}]},{type:"VerticalLayout",ignore:!wb_builder.responsivePro||!wb_builder.migrateBackUrl||wb_builder.migrateBackHide,css:{marginTop:15,paddingTop:15,borderTop:"1px solid #dddddd",textAlign:"center"},children:[{type:"Button",text:__("Return to the old builder version"),click:function(){o.migrateBack()}}]}]}]}]})),this.backupDialog.dialog.addClass("wb-modal-settings-420"),t=this.backupDialog.fields,this.backupDialog.addButton(__("Close")),wb_builder.autoBackupsEnable&&this.backupDialog.addButton(__("Restore"),(function(){t.form.trigger("submit")}),!0)}t=this.backupDialog.fields,wb_builder.autoBackupsEnable&&(t.typeFile.setValue(!0),t.backupList.refreshAutoBackups()),this.backupDialog.show()},G.prototype.removeFromExcluded=function(e){var t,i;for(t=0,i=this.excludedElements.length;t<i;t++)this.excludedElements[t].id==e&&(this.excludedElements[t]=null,this.excludedElements.splice(t,1))},G.prototype.addElements=function(e,t){for(var i=0;i<e.length;i++)e[i].isCommon=!!t,this.elemntQueue[this.elemntQueue.length]=e[i]},G.prototype.detectDoctype=function(){var e=/\s+(X?HTML)\s+([\d\.]+)\s*([^\/]+)*\//gi;if(void 0!==document.namespaces){if(8!==document.all[0].nodeType)return null;e.exec(document.all[0].nodeValue)}else{if(null===document.doctype)return null;e.exec(document.doctype.publicId)}return(RegExp.$1+"").toLowerCase()},G.prototype.normalizeEvent=function(e){var t={left:0,top:0,returnValue:null};for(var i in e)"function"!=typeof e[i]&&"returnValue"!==i&&(t[i]=e[i]);var n=e;t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation()};var o=this.detectDoctype(),s=window.pageXOffset?window.pageXOffset:"xhtml"===o?document.body.parentNode.scrollLeft:document.body.scrollLeft,r=window.pageYOffset?window.pageYOffset:"xhtml"===o?document.body.parentNode.scrollTop:document.body.scrollTop;return t.pageX||(t.pageX=t.clientX+s),t.pageY||(t.pageY=t.clientY+r),!t.which&&t.button&&(t.which=t.button),!t.target&&t.srcElement&&(t.target=t.srcElement),t},G.prototype.addCSSRule=function(t,i,n,o){K.isSet(o)&&!isNaN(o)||(o=-1);var s=!0;if(n&&"object"==typeof n||(n=document,s=!1),!this.styleSheet){var r=e('<style type="text/css" id="wb_style_sheet"></style>');e("head").append(r),window.createPopup||r.append(document.createTextNode(""));for(var a=1;a<document.styleSheets.length;a++)if("wb_style_sheet"===((l=document.styleSheets[a]).id?l.id:l.ownerNode?l.ownerNode.id:null)){this.styleSheet=l;break}}var l=null;if(s||!this.styleSheet){if(!(l=n.styleSheets[n.styleSheets.length-1])||l.href&&-1===l.href.indexOf(location.origin))return-1}else l=this.styleSheet;var c=i;if("object"==typeof c){var u=e.extend({},c);for(var d in c=[],u)c.push(d+": "+u[d]+";");c=c.join(" ")}var h=l.cssRules?l.cssRules:l.rules;if(-1!==o&&(!h||h.length<o))try{l.deleteRule(o)}catch(e){}var p=-1;return l.insertRule?(h&&o>=h.length&&(o=-1),p=l.insertRule(t+" { "+c+" }",-1!==o?o:h.length)):(h&&o>=h.length&&(o=-1),p=l.addRule(t,c,-1!==o?o:-1)),p},G.prototype.historyAdd=function(e,t,i,n){this.historyFlushPropertyChanges(),this.historyCurentAction&&console.error("History changed while performing "+this.historyCurentAction+" action."),this.historyChangeId++,this.historyStack.length>this.historyPointer&&this.historyStack.splice(this.historyPointer,this.historyStack.length-this.historyPointer),this.historyStack.push({type:e,data:t,undo:i,redo:n,chainRedo:0!==this.historyGroupState,chainUndo:2===this.historyGroupState}),1===this.historyGroupState&&(this.historyGroupState=2),this.historyPointer=this.historyStack.length,"function"==typeof this.historyOnChange&&this.historyOnChange(),this.historyPointer>0&&!this.pageModified&&this.setPageModified(!0)},G.prototype.historyHasUndo=function(){return this.historyPointer>0},G.prototype.historyHasRedo=function(){return this.historyPointer<this.historyStack.length},G.prototype.historyBeginGroup=function(){if(this.historyGroupLevel<=0&&this.historyFlushPropertyChanges(),1==++this.historyGroupLevel){this.historyGroupState=1,this.historyGroupRecordingTimeout&&clearTimeout(this.historyGroupRecordingTimeout);var e=this;this.historyGroupRecordingTimeout=setTimeout((function(){for(console.error("History grouping was started more times than ended. Make sure that historyBeginGroup() and historyEndGroup() are called same number of times, otherwise history may get corrupted. Force-ending latest history group.");e.historyGroupLevel>0;)e.historyEndGroup()}),1e3)}},G.prototype.historyEndGroup=function(){this.historyGroupLevel>0&&this.historyFlushPropertyChanges(),0==--this.historyGroupLevel&&(2===this.historyGroupState&&(this.historyStack[this.historyStack.length-1].chainRedo=!1),this.historyGroupState=0,this.historyGroupRecordingTimeout&&(clearTimeout(this.historyGroupRecordingTimeout),this.historyGroupRecordingTimeout=null)),this.historyGroupLevel<0&&(console.error("History grouping was ended more times than started. Make sure that historyBeginGroup() and historyEndGroup() are called same number of times, otherwise history may get corrupted."),this.historyGroupLevel=0)},G.prototype.historyGetLatestRecord=function(e){for(var t=this.historyPointer-1;t>=0;t--)if(!e||this.historyStack[t].type==e)return this.historyStack[t];return null},G.prototype.historyUndo=function(){this.historyFlushPropertyChanges();var e=this.historyChangeId;for(this.historyCurentAction="undo";this.historyPointer>0;){this.historyPointer,this.historyStack.length;var t=this.historyStack[--this.historyPointer];if(t.undo){if(t.undo.call(t,t.data,this.historyCurentAction),!t.chainUndo)break;if(e!==this.historyChangeId){t.chainUndo=!1;break}}}if(this.historyCurentAction=null,"function"==typeof this.historyOnChange&&this.historyOnChange(),this.historyPointer<=0&&this.pageModified){var i=this;requestAnimationFrame((function(){i.setPageModified(!1)}))}},G.prototype.historyRedo=function(){this.historyFlushPropertyChanges();var e=this.historyChangeId;for(this.historyCurentAction="redo";this.historyPointer<this.historyStack.length;){var t=this.historyStack[this.historyPointer++];if(t.redo){if(t.redo.call(t,t.data,this.historyCurentAction),!t.chainRedo)break;if(e!==this.historyChangeId){t.chainRedo=!1;break}}}this.historyCurentAction=null,"function"==typeof this.historyOnChange&&this.historyOnChange(),this.historyPointer>0&&!this.pageModified&&this.setPageModified(!0)},G.prototype.historyClear=function(){this.historyFlushPropertyChanges(),this.historyStack=[],this.historyPointer=0,"function"==typeof this.historyOnChange&&this.historyOnChange()},G.prototype.historyFlushPropertyChanges=function(){if(this.historyPropertyChangeBuffer&&this.historyPropertyChangeBuffer.length){var e=this.historyPropertyChangeBuffer;this.historyPropertyChangeBuffer=null;var t=function(e){var t;for(var i in e)if(e.hasOwnProperty(i)&&"length"!==i){var n=e[i],o=window.getElementById(n.element);o?(t=n.property.serialize(o),n.property.deserialize(o,n.value,!1,!0),n.value=t):console.error("Unable to undo '"+this.type+"': can't find element "+n.element)}};this.historyAdd("changeProperties",e,t,t)}},G.prototype.historyBeforeElementPropertyChange=function(e,t,i){if(i||this.historyPropertyChangeBuffer&&this.historyPropertyChangeBuffer.length){this.historyPropertyChangeBuffer||(this.historyPropertyChangeBuffer={length:0});for(var n,o,s,r=this.historyPropertyChangeBuffer,a=e.getDependingProperties(t).concat([t]),l=a.length-1;l>=0;l--)n=(o=a[l]).name+":"+e.index,i&&o.type&&!o.type.isButton&&!r.hasOwnProperty(n)&&"function"!=typeof(s=o.serialize(e))&&(r[n]={element:e.id,property:o,value:s},r.length++)}},G.prototype.historyAfterElementPropertyChange=function(e,t,i){if(this.historyPropertyChangeBuffer&&this.historyPropertyChangeBuffer.length){var n=this.historyPropertyChangeBuffer;if(n.length)for(var o,s,r,a=e.getDependingProperties(t).concat([t]),l=a.length-1;l>=0;l--)o=(s=a[l]).name+":"+e.index,s.type&&!s.type.isButton&&n.hasOwnProperty(o)&&(r=n[o],j.ComparisonUtil.checkEqualsRecursive(r.value,s.serialize(e))&&(delete n[o],n.length--));if(this.historyPropertyChangeTimeout&&(clearTimeout(this.historyPropertyChangeTimeout),this.historyPropertyChangeTimeout=null),n.length){var c=this;this.historyPropertyChangeTimeout=setTimeout((function(){c.historyPropertyChangeTimeout=null,c.historyFlushPropertyChanges()}),1e3)}}},G.prototype.setCookie=function(e,t,i,n){var o=new Date;o.setDate(o.getDate()+i);var s=escape(t)+(null===i?"":"; expires="+o.toUTCString())+(n?"; path="+n:"");document.cookie=e+"="+s},G.prototype.getCookie=function(e){var t,i,n,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(i=o[t].substr(0,o[t].indexOf("=")),n=o[t].substr(o[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))===e)return unescape(n);return null},G.prototype.makeLocalUrl=function(e,t){return/https?:/i.test(e)?e:this.userBaseUrl+(t?V.urlEncode(this.makeRelUrl(e)):this.makeRelUrl(e))},G.prototype.makeRelUrl=function(e){return(e+"").replace(this.userBaseUrl,"")},G.prototype.pregQuote=function(e,t){return(e+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},G.prototype.setClipboard=function(t){let i=[];for(var n=0;n<t.length;n++)i.push(e.extend(!0,{},t[n]));H.storeElementDataToClipboard(i)},G.prototype.getClipboard=function(){return H.getElementDataFromClipboard()},G.prototype.getActiveViewElements=function(e){var t=null;if(this.helpPlayerVisible){var i=z.HelpSystemPlayer.getCanvas();i&&(t=i.getChildren())}if(null===t&&(t=this.bodyInstance?this.bodyInstance.getContentElements():[]),e)for(var n=0;n<t.length;n++)if("LayoutElement"===t[n].getClassType()){var o=t[n].getChildren();o.length&&t.push.apply(t,o)}return t},G.prototype.updateDropZones=function(){this.bodyInstance&&this.bodyInstance.enableDropZones(!this.helpPlayerVisible)};var $=!1,q=!1,Y=[];window.onYouTubeIframeAPIReady||(window.onYouTubeIframeAPIReady=function(){q=!0;for(var e=0;e<Y.length;e++)Y[e]()}),G.prototype.addYoutubeAPIListener=function(t){q?t():Y.push(t),$||($=!0,e.getScript("https://www.youtube.com/iframe_api"))};var Z=null;return G.prototype.invalidateSiteStructure=function(){Z||(Z=setTimeout((function(){Z=null,R.GlobalEvents.triggerEvent("site.structure.changed",new R.SiteStructureChangedBuilderEvent)}),0))},G}.apply(t,n))||(e.exports=o)},"./WB_Button.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s){"use strict";var r=i("./RoundCornersControl.ts").RoundCornersControl,a=i("./BorderControl.ts").BorderControl,l=i("./BackgroundControl.ts").BackgroundControl,c=i("./ColorPicker.ts").ColorPicker,u=i("./SizeSelector.ts").SizeSelector,d=i("./FontStyleSelector.ts").FontStyleSelector,h=function(e){e&&this.__construct(e)};return __extends(h,t.Element),e.registerClass("Button",h),h.prototype._text="",Object.defineProperty(h.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e},enumerable:!0,configurable:!0}),h.prototype.title="",h.prototype._link="",Object.defineProperty(h.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),h.prototype._txt=null,Object.defineProperty(h.prototype,"txt",{get:function(){return this._txt},set:function(e){this._txt=e},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtFontControl",{get:function(){return this._txt},set:function(e){this._txt.font=this._txt.css["font-family"]=e.font,this._txt.size=e.size,this._txt.css["font-size"]=e.size+"px",this._txt.lineHeight=e.lineHeight,this._txt.css["line-height"]=e.lineHeight+"px",this._txt.letterSpacing=e.letterSpacing,this._txt.css["letter-spacing"]=e.letterSpacing+"px",this._txt.align=this._txt.css["text-align"]=e.align},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtFont",{get:function(){return this._txt.font},set:function(e){this._txt.font=this._txt.css["font-family"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtSize",{get:function(){return this._txt.size},set:function(e){this._txt.size=e,this._txt.css["font-size"]=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtLineHeight",{get:function(){return this._txt.lineHeight},set:function(e){this._txt.lineHeight=e,this._txt.css["line-height"]=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtLetterSpacing",{get:function(){return this._txt.letterSpacing},set:function(e){this._txt.letterSpacing=e,this._txt.css["letter-spacing"]=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"txtAlign",{get:function(){return this._txt.align},set:function(e){this._txt.align=this._txt.css["text-align"]=e},enumerable:!0,configurable:!0}),h.prototype._border=null,h.prototype._bgNormal=null,h.prototype._bgHover=null,h.prototype._bgActive=null,h.prototype._txtNormal=null,Object.defineProperty(h.prototype,"txtNormal",{get:function(){return this._txtNormal},set:function(e){this._txtNormal=e},enumerable:!0,configurable:!0}),h.prototype._txtHover=null,Object.defineProperty(h.prototype,"txtHover",{get:function(){return this._txtHover},set:function(e){this._txtHover=e},enumerable:!0,configurable:!0}),h.prototype._txtActive=null,Object.defineProperty(h.prototype,"txtActive",{get:function(){return this._txtActive},set:function(e){this._txtActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"btnStyle",{get:function(){return{normal:{style:this._txtNormal.style,color:this._txtNormal.color,bg:this._bgNormal,border:this._border},hover:{style:this._txtHover.style,color:this._txtHover.color,bg:this._bgHover},active:{style:this._txtActive.style,color:this._txtActive.color,bg:this._bgActive}}},set:function(e){this._txtNormal.style=e.normal.style,this._txtNormal.css["font-style"]=e.normal.style.italic?"italic":"normal",this._txtNormal.css["font-weight"]=e.normal.style.bold?"bold":"normal",this._txtNormal.css["text-decoration"]=e.normal.style.underline?"underline":"none",this._txtNormal.color=e.normal.color,this._txtNormal.css.color=e.normal.color,this._bgNormal=e.normal.bg,this._border=e.normal.border,this._txtHover.style=e.hover.style,this._txtHover.css["font-style"]=e.hover.style.italic?"italic":"normal",this._txtHover.css["font-weight"]=e.hover.style.bold?"bold":"normal",this._txtHover.css["text-decoration"]=e.hover.style.underline?"underline":"none",this._txtHover.color=e.hover.color,this._txtHover.css.color=e.hover.color,this._bgHover=e.hover.bg,this._txtActive.style=e.active.style,this._txtActive.css["font-style"]=e.active.style.italic?"italic":"normal",this._txtActive.css["font-weight"]=e.active.style.bold?"bold":"normal",this._txtActive.css["text-decoration"]=e.active.style.underline?"underline":"none",this._txtActive.color=e.active.color,this._txtActive.css.color=e.active.color,this._bgActive=e.active.bg},enumerable:!0,configurable:!0}),h.prototype.__construct=function(e){e.width||(e.width=100,e.height=30),t.Element.call(this,e),this.button=s('<a class="wb_button"><span>'+__("Button")+"</span></a>"),this.button.css({width:"100%",height:"100%"}),this.buttonClass="wb_button-"+this.id,this.button.addClass(this.buttonClass),this.container.append(this.button),this._text=e.content.text||"string"==typeof e.content.text?e.content.text:__("Just Do It!"),this.title=e.content.title||"string"==typeof e.content.title?e.content.title:"",this._link=e.content.link?e.content.link:{},"object"!=typeof this._link&&(this._link={url:this._link}),this._txt=e.content.txt?e.content.txt:{size:14,decoration:"none",font:"Helvetica,Arial,sans-serif",style:{},align:"center",css:{"font-family":"Helvetica, Arial, sans-serif","font-size":"14px","text-align":"center"}},this._txt.hasOwnProperty("lineHeight")||(this._txt.lineHeight=Math.floor(1.42857143*this._txt.size),this._txt.css["line-height"]=this._txt.lineHeight+"px"),this._txt.hasOwnProperty("letterSpacing")||(this._txt.letterSpacing=0,this._txt.css["letter-spacing"]="0px"),this._border=e.content.border?e.content.border:{color:"#cccccc",style:"solid",weight:1,css:{border:"1px solid #cccccc"}},this._txtNormal=e.content.txtNormal?e.content.txtNormal:{color:"#333333",style:{},align:"center",css:{color:"#333333","text-decoration":"none"}},this._bgNormal=e.content.bgNormal?e.content.bgNormal:{color:"#f5f5f5",image:"none",position:"left top",repeat:"repeat",css:{background:"#f5f5f5 none repeat scroll left top"}},this._txtHover=e.content.txtHover?e.content.txtHover:{color:"#333333",style:{},align:"center",css:{color:"#333333","text-decoration":"none"}},this._bgHover=e.content.bgHover?e.content.bgHover:{color:"#E6E6E6",image:"none",position:"left top",repeat:"repeat",css:{background:"#E6E6E6 none repeat scroll left top"}},this._txtActive=e.content.txtActive?e.content.txtActive:{color:"#333333",style:{},align:"center",css:{color:"#333333","text-decoration":"none"}},this._bgActive=e.content.bgActive?e.content.bgActive:{color:"#E6E6E6",image:"none",position:"left top",repeat:"repeat",css:{background:"#E6E6E6 none repeat scroll left top"}};var i=this;this.updateStyle(!0),setTimeout((function(){i.updateStyle(!0)}),100)},h.prototype.getDataDefaults=function(){return s.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:1,minHeight:1})},h.prototype.getIcon=function(){return"fa fa-share-square-o"},h.prototype.supportsAutoWidth=function(){return!0},h.prototype.supportsAutoHeight=function(){return!0},h.prototype.supportsPadding=function(){return!0},h.prototype.getUsedMediaGalleryItems=function(){var e=t.Element.prototype.getUsedMediaGalleryItems.call(this);return this._bgNormal.image&&""!==this._bgNormal.image&&"none"!==this._bgNormal.image&&e.push(this._bgNormal.image),this._bgHover.image&&""!==this._bgHover.image&&"none"!==this._bgHover.image&&e.push(this._bgHover.image),this._bgActive.image&&""!==this._bgActive.image&&"none"!==this._bgActive.image&&e.push(this._bgActive.image),e},h.prototype.getUsedFonts=function(){var e=t.Element.prototype.getUsedFonts.call(this);return this.txt&&this.txt.font&&""!==this.txt.font&&e.push(this.txt.font),e},h.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this),i={text:this.text,link:this.link,txt:this.txt,border:this._border,txtNormal:this.txtNormal,bgNormal:this._bgNormal,txtHover:this.txtHover,bgHover:this._bgHover,txtActive:this.txtActive,bgActive:this._bgActive};return e.content=s.extend(!0,{},i),e},h.prototype.setButtonBackground=function(e){if(e&&"object"==typeof e&&e.css&&"object"==typeof e.css){var t=s.extend(!0,{},e.css);t.background=t.background.replace(e.color,"transparent");var i=this.button.children(".wb_button_background");i.length||(i=s('<div class="wb_button_background">').css({position:"absolute",width:"100%",height:"100%",top:0,left:0}),this.button.prepend(i)),i.css(t),this.button.css("background-color",e.color)}},h.prototype.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))},h.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i),i=i||this.system.site.currSelLang;var n="absolute"===this.layoutConstraints;this.container.css({display:n?"block":"flex",flexDirection:"column",height:n?"100%":""}),this.individualMargin&&this.button.css("padding",(this.individualMargin.paddingTop||0)+"px "+(this.individualMargin.paddingRight||0)+"px "+(this.individualMargin.paddingBottom||0)+"px "+(this.individualMargin.paddingLeft||0)+"px"),this.button.css(this.txt.css),this.button.css(this._border.css),this.button.children("span").css(this.txtNormal.css);var o=s.extend(!0,{},this._bgNormal),r=o.css;r.background&&o.image&&"none"!==o.image&&(r.background=r.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(o.image)+'")')),this.setButtonBackground(o),this.button.children("span").html(this.escapeHTML(__tr(this.text,i))),this.onResize(e)},h.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:380},tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Text")},{type:"MultilangTextField",id:"buttonText",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-buttonText-change",e)}},{type:"Label",text:__("URL"),css:{marginTop:15}},{type:"LinkSelector",id:"buttonUrl",multilang:!0,change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-buttonUrl-change",e)}}]},{type:"FlowLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Font")},{type:"FlowLayout",spacing:-1,children:[{type:"FontFamilySelector",id:"txtFont",css:{width:117},change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtFont-change",e)}},{type:"Button",icon:"glyphicon glyphicon-pencil",click:function(e,t){t.txtFont.getWrappedControl().openEditFontsDialog()}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Size")},{type:u,id:"txtSize",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtSize-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Line height")},{type:u,id:"txtLineHeight",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtLineHeight-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Letter spacing")},{type:u,id:"txtLetterSpacing",precision:2,step:.01,min:-100,change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtLetterSpacing-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Align")},{type:"HAlignSelector",id:"txtAlign",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtAlign-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:a,id:"border",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-border-change",e)}}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Rounded corners")},{type:r,id:"corners",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-borderRadius-change",e)}}]},{type:"TabbedPane",css:{marginTop:15},tabs:[{name:__("Default"),children:[{type:"FlowLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:d,id:"textNormalStyle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:c,id:"textNormalColor",noTransparent:!0}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Background")},{type:l,id:"bgNormal",useSize:!0,useAttachment:!0,useOpacity:!0,change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgNormal-change",e)}}]}]},{name:__("Hover"),children:[{type:"FlowLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:d,id:"textHoverStyle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:c,id:"textHoverColor",noTransparent:!0}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Background")},{type:l,id:"bgHover",useSize:!0,useAttachment:!0,useOpacity:!0,change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgHover-change",e)}}]}]},{name:__("Active"),children:[{type:"FlowLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:d,id:"textActiveStyle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:c,id:"textActiveColor",noTransparent:!0}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Background")},{type:l,id:"bgActive",useSize:!0,useAttachment:!0,useOpacity:!0,change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgActive-change",e)}}]}]}]}]}],callbackFunc:function(t){var i=function(e){if(!e)return e;if("object"==typeof e)for(var t in e)e[t]=i(e[t]);else if("string"==typeof e)return e.replace(/<(\/*(?:script|iframe|object|embed|audio|video|source|canvas)[^>]*\/*)>/g,"&lt;$1&gt;");return e};e.text=i(t.buttonText.getValue()),e.link=t.buttonUrl.getValue(),e.txt={font:t.txtFont.getValue(),size:t.txtSize.getValue(),lineHeight:t.txtLineHeight.getValue(),letterSpacing:t.txtLetterSpacing.getValue(),align:t.txtAlign.getValue(),css:{"font-family":t.txtFont.getValue(),"font-size":t.txtSize.getValue()+"px","line-height":t.txtLineHeight.getValue()+"px","letter-spacing":t.txtLetterSpacing.getValue()+"px","text-align":t.txtAlign.getValue()}},e._border=t.border.getValue();var n=t.textNormalStyle.getValue();e.txtNormal={style:n,color:t.textNormalColor.getValue(),css:{color:t.textNormalColor.getValue()}},e.txtNormal.css["font-style"]=n.italic?"italic":"normal",e.txtNormal.css["font-weight"]=n.bold?"bold":"normal",e.txtNormal.css["text-decoration"]=n.underline?"underline":"none",n=t.textHoverStyle.getValue(),e.txtHover={style:n,color:t.textHoverColor.getValue(),css:{color:t.textHoverColor.getValue()}},e.txtHover.css["font-style"]=n.italic?"italic":"normal",e.txtHover.css["font-weight"]=n.bold?"bold":"normal",e.txtHover.css["text-decoration"]=n.underline?"underline":"none",n=t.textActiveStyle.getValue(),e.txtActive={style:n,color:t.textActiveColor.getValue(),css:{color:t.textActiveColor.getValue()}},e.txtActive.css["font-style"]=n.italic?"italic":"normal",e.txtActive.css["font-weight"]=n.bold?"bold":"normal",e.txtActive.css["text-decoration"]=n.underline?"underline":"none",e._bgNormal=t.bgNormal.getValue(),e._bgHover=t.bgHover.getValue(),e._bgActive=t.bgActive.getValue(),e.updateStyle()}});i.buttonText.setValue(this.text?this.text:""),i.buttonUrl.setValue(this.link),i.txtFont.setValue(e.txt.font),i.txtSize.setValue(e.txt.size),i.txtLineHeight.setValue(e.txt.lineHeight),i.txtLetterSpacing.setValue(e.txt.letterSpacing),i.txtAlign.setValue(e.txt.align),i.border.setValue(e._border),i.textNormalStyle.setValue(e.txtNormal.style),i.textHoverStyle.setValue(e.txtHover.style),i.textActiveStyle.setValue(e.txtActive.style),i.textNormalColor.setValue(e.txtNormal.color),i.textHoverColor.setValue(e.txtHover.color),i.textActiveColor.setValue(e.txtActive.color),i.bgNormal.setValue(e._bgNormal),i.bgHover.setValue(e._bgHover),i.bgActive.setValue(e._bgActive)},h.prototype.onSwitchLanguage=function(e){t.Element.prototype.onSwitchLanguage.call(this,e),this.updateStyle(!0,e)},h.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"txt"}),this.registerProperty({name:"txtNormal"}),this.registerProperty({name:"txtHover"}),this.registerProperty({name:"txtActive"}),this.registerProperty({name:"text",type:o.PropertyType.BtnButtonText}),this.registerProperty({name:"txtFontControl",type:o.PropertyType.BtnFontControl,dependencies:["txt"]}),this.registerProperty({name:"txtFont",type:o.PropertyType.BtnTextFontFamily,dependencies:["txt"]}),this.registerProperty({name:"txtSize",type:o.PropertyType.BtnTextFontSize,dependencies:["txt"]}),this.registerProperty({name:"txtLineHeight",type:o.PropertyType.BtnTextLineHeight,dependencies:["txt"]}),this.registerProperty({name:"txtLetterSpacing",type:o.PropertyType.BtnTextLetterSpacing,dependencies:["txt"]}),this.registerProperty({name:"txtAlign",type:o.PropertyType.BtnTextAlignment,dependencies:["txt"]}),this.registerProperty({name:"btnStyle",type:o.PropertyType.BtnButtonStyle,dependencies:["txtNormal","txtHover","txtActive"]}),this.registerProperty({name:"link",type:o.PropertyType.BtnOnClickLink,uiComponentOptions:function(){return{helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):""}}})},window.WB_Button=h,h}.apply(t,n))||(e.exports=o)},"./WB_Chat.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./WB_ToolTipControl.class.js"),i("./TextField.ts"),i("./CheckBoxControl.ts"),i("./util/DataUtil.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s,r,a){"use strict";var l=i("./SizeSelector.ts").SizeSelector,c=function(e){e&&this.__construct(e)};return __extends(c,t.Element),e.registerClass("Chat",c),c.prototype.noPhotoBg="ico-tb-chat",c.prototype.videoId=null,c.prototype.videoUrl=null,c.prototype.params=null,c.prototype.opts_def=null,c.prototype.chId=null,c.prototype.player=null,c.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this.chId=(new Date).getTime(),this.videoId=e.content.videoId?e.content.videoId:"examplegroup",this.videoUrl=e.content.videoUrl?e.content.videoUrl:null;var i=e.content.params&&"object"==typeof e.content.params?e.content.params:{};this.params={roundCorners:!r.isSet(i.roundCorners)||!!i.roundCorners,showTitle:!r.isSet(i.showTitle)||!!i.showTitle,showOMsg:!r.isSet(i.showOMsg)||!!i.showOMsg,canCFBD:!r.isSet(i.canCFBD)||!!i.canCFBD,fontSize:i.fontSize?i.fontSize:11},this.updateStyle(!0)},c.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={videoId:this.videoId,videoUrl:this.videoUrl,chId:this.chId,params:{roundCorners:this.params.roundCorners,showTitle:this.params.showTitle,showOMsg:this.params.showOMsg,canCFBD:this.params.canCFBD,fontSize:this.params.fontSize}},e},c.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i),this.videoUrl=this.videoId?"http://"+this.videoId+".chatango.com/group":"",this.displayEmptyMessage(!this.videoId),this.player||(this.player=a("<object></object>"),this.player.attr("id","obj_"+this.chId),this.player.attr("data",""),this.player.attr("type","application/x-shockwave-flash"),this.player.css({width:"100%",height:"100%"}),this.player.append('<param name="movie" value="" />'),this.player.append('<param name="menu" value="false" />'),this.player.append('<param name="wmode" value="transparent" />'),this.player.append('<param name="AllowScriptAccess" value="always" />'),this.player.append('<param name="AllowNetworking" value="all" />'),this.player.append('<param name="AllowFullScreen" value="true" />'),this.player.append('<param name="flashvars" value="" />'),this.container.append(this.player)),this.player.css({display:this.videoId?"block":"none"}),this.player.children("param[name=flashvars]").val("cid="+this.chId+"&b=60&f=50&l=999999&q=999999&r=100&s="+(this.params.roundCorners?"1":"")+"&v="+(this.params.showTitle?"":"0")+"&w="+(this.params.showOMsg?"":"0")+"&ab="+(this.params.canCFBD?"":"0")+"&p="+(this.params.fontSize?this.params.fontSize:11)),this.player.attr("data",this.videoUrl),this.player.children("param[name=movie]").val(this.videoUrl),this.elem.trigger("resize")},c.prototype.comProperties=function(){t.Element.prototype.comProperties.call(this);var e=this,i=this.comDialog.fields;if(!i.chatVideoId){var r=null,c=null,u=null,d=0;this.comDialog.getGeneralTab().contentElem.append(c=a('<table><tr><td></td><td></td></tr><tr><td colspan="2"></td></tr><tr><td colspan="2"></td></tr><tr><td colspan="2"></td></tr><tr><td colspan="2"></td></tr></table>')),a("td",c).css({paddingRight:"20px"}),(c=a("td",c)).css({verticalAlign:"top"}),(r=c.eq(d++)).append(u=a("<label>"+__("Group URL or ID")+"</label>")),r.append((i.chatVideoId=new o.TextField).elem),i.chatVideoId.elem.addClass("span2"),u.append(new n("?",__("Register at http://chatango.com and start new group.")).elem),(r=c.eq(d++)).append("<label>"+__("Font size")+"</label>"),r.append((i.chatFontSize=new l).getElem()),(r=c.eq(d++)).append((i.chatRoundCorners=new s.CheckBoxControl(__("Round corners"))).elem),(r=c.eq(d++)).append((i.chatShowTitle=new s.CheckBoxControl(__("Show title"))).elem),(r=c.eq(d++)).append((i.chatShowOMsg=new s.CheckBoxControl(__("Show custom message under title"))).elem);var h=i.callbackFunc;i.callbackFunc=function(){"function"==typeof h&&h.call(this),e.videoId=i.chatVideoId.getValue(),e.videoId=e.videoId.replace(/^http[s]*:\/\//i,""),e.videoId=e.videoId.split(".")[0],e.videoId=e.videoId.replace(/[^a-zA-Z0-9\-\_]/i,""),e.params.roundCorners=i.chatRoundCorners.getValue(),e.params.showTitle=i.chatShowTitle.getValue(),e.params.showOMsg=i.chatShowOMsg.getValue(),e.params.fontSize=i.chatFontSize.getValue(),e.params.fontSize||(e.params.fontSize=11),e.updateStyle()}}i.chatVideoId.setValue(this.videoId),i.chatRoundCorners.setValue(this.params.roundCorners),i.chatShowTitle.setValue(this.params.showTitle),i.chatShowOMsg.setValue(this.params.showOMsg),i.chatFontSize.setValue(this.params.fontSize)},c}.apply(t,n))||(e.exports=o)},"./WB_ComboBox.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./Service.ts"),i("./util/TextUtil.ts")],void 0===(o=function(e,t,i){"use strict";var n=function(e,t,i,n){this.__construct(e,t,i,n)};return n.prototype.elem=null,n.prototype.input=null,n.prototype.button=null,n.prototype.menuWrapper=null,n.prototype.searchInput=null,n.prototype.searchInputBlock=null,n.prototype.menu=null,n.prototype.options=null,n.prototype.optionsData=null,n.prototype.onChange=null,n.prototype.onBeforeChange=null,n.minOptionsNumberForSearchShowing=8,n.elemList=[],n.closeAll=function(e){for(var t=0;t<n.elemList.length;t++)e&&e==n.elemList[t]||n.elemList[t].menuWrapper.parent().removeClass("open")},n.onDocumentClick=function(i){var o=e(i.target),s=null;o.is(".wb-combobox-controll *")&&(o=o.parents(".wb-combobox-controll"),e.each(n.elemList,(function(){o.get(0)!=this.elem.get(0)||(s=this)}))),n.closeAll(s),t.Service.contextMenu.hideAll()},n.prototype.__construct=function(t,i,o,s){var r,a=this;if(this.elem=e('<div class="input-group wb-combobox-controll"><input type="text" class="form-control" readonly="readonly" /><div class="input-group-btn"><button class="btn btn-default dropdown-toggle" type="button"><span class="caret"></span></button><div class="dropdown-menu-wrapper">'+(s?"":'<div><input type="text" class="form-control input-sm input-search" placeholder="'+__("Search")+'" /></div>')+'<ul class="dropdown-menu"></ul></div></div></div>'),this.input=this.elem.children("input"),this.menuWrapper=this.elem.find(".dropdown-menu-wrapper"),s||(this.searchInputBlock=this.menuWrapper.children("div").eq(0).hide(),this.searchInput=this.searchInputBlock.children("input").eq(0),this.searchInput.on("change keyup",(function(t){27===t.keyCode&&(this.value="");var i=this.value.toLowerCase();a.menu.children("li").each((function(){var t=e(this),n=t.text().toLowerCase().indexOf(i)>=0;t.css({display:n?"block":"none"})}))}))),this.menu=this.menuWrapper.children(".dropdown-menu"),this.button=this.elem.find("button"),a=this,this.input.bind("click",r=function(t){t.stopImmediatePropagation();var i=a.input.outerWidth(),n=a.menuWrapper.width(),s=a.menuWrapper.width(),r=a.elem.outerWidth(),l=a.elem.outerHeight();n<r&&a.menuWrapper.width(r);let c=-i;var u=e("#site");if(u.length){var d=a.elem.offset();"rtl"===u.attr("dir")?n>d.left+r&&(c-=n-r):d.left+n>u.outerWidth()&&(c-=n-r),d.top+l+s>u.outerHeight()&&a.menuWrapper.css({top:"initial",bottom:"100%"}),d.top-s<0&&a.menuWrapper.css({top:"100%",bottom:"initial"})}"rtl"===u.attr("dir")?a.menuWrapper.css({marginRight:c+"px"}):a.menuWrapper.css({marginLeft:c+"px"}),o&&a.fixDropdownPosition(o),a.button.parent().toggleClass("open"),a.searchInput&&a.button.parent().hasClass("open")&&(a.searchInput.val(""),a.searchInput.trigger("change"),a.searchInput.trigger("focus")),a.menu.children("li").each((function(t){if(e(this).hasClass("active")){var i=e(this).outerHeight(!0),n=a.menuWrapper.height();return a.menu.scrollTop(i*t-n/2+i/2),!1}})),a.input.offset().top-window.scrollY+(s=Math.round(a.input.outerHeight(!0)+a.menuWrapper.outerHeight(!0)))>e(window).height()?a.button.parent().addClass("dropup"):a.button.parent().removeClass("dropup")}),this.button.bind("click",r),this.options={},this.optionsData={},t)for(var l in t)this.options[l]=t[l],this.addOption(l,t[l],l===i);n.elemList.push(this)},n.prototype.fixDropdownPosition=function(t){if(!e.browser.msie){var i,n=this,o=this.elem.offset();o.top&&o.left?(i={top:this.elem.offset().top-window.scrollY+30+"px",marginLeft:0,zIndex:t,position:"fixed"},wb_builder.rtl?i.right=this.elem.offset().left+this.elem.outerWidth(!0)+"px":i.left=this.elem.offset().left+"px",this.menuWrapper.css(i)):setTimeout((function(){n.fixDropdownPosition(t)}),20)}},n.prototype.getValueData=function(){var e=this.menu.children("li.active"),t=e.size()>0?e.attr("data-value"):null;return t?this.optionsData[t].data:null},n.prototype.getValue=function(){var e=this.menu.children("li.active"),t=e.size()>0?e.attr("data-value"):null;if(null===t)for(var i in this.options){t=this.options[i];break}return t},n.prototype.setValue=function(e){var t,n=!1;for(t in this.options)if(e===t){n=!0;break}if(null!=e)if(n)this.menu.children("li[data-value='"+i.stripTags(e).replace(/(['"])/g,"\\$1")+"']").trigger("click",!0);else for(t in this.options)return this.menu.children("li[data-value='"+i.stripTags(e).replace(/(['"])/g,"\\$1")+"']").trigger("click",!0),t;return e},n.prototype.addOption=function(t,o,s,r,a,l){this.options[i.stripTags(t)]=o;var c=e("<li>"+(a?"":'<a href="javascript:void(0)"></a>')+"</li>");if(l&&c.addClass("disabled"),this.optionsData[i.stripTags(t)]={data:r,elem:c},c.attr("data-value",i.stripTags(t)),!a){c.children("a").html(o);var u=this;l||(c.bind("click",(function(t,i){var n=!0;if("function"==typeof u.onBeforeChange&&(n=u.onBeforeChange.call(this,t,r)),n){u.menu.children("li").removeClass("active"),e(this).addClass("active");var s=o.replace(/<[^>]*>/g,"").replace(/\&nbsp;/g," ");u.input.val(e.trim(s)),u.menuWrapper.parent().removeClass("open"),i||"function"!=typeof u.onChange||u.onChange.call(this,t),u.elem.trigger("change")}return t.stopPropagation(),!1})),(s||0===this.menu.children("li").length)&&c.trigger("click",!0))}return this.menu.append(c),this.searchInputBlock&&this.searchInputBlock.css("display",Object.keys(this.options).length>=n.minOptionsNumberForSearchShowing?"block":"none"),c},n.prototype.addSeparator=function(){var t=e('<li class="divider"></li>');return this.menu.append(t),t},n.prototype.getOptions=function(){return this.options},n.prototype.getOptionsData=function(){var e,t=[];for(e in this.options)t.push({name:this.options[e],data:e in this.optionsData?this.optionsData[e].data:null});return t},n.prototype.getOption=function(e){return this.menu.children("li[data-value='"+e.replace(/(['"])/g,"\\$1")+"']")},n.prototype.removeAllOptions=function(){this.menu.empty(),this.input.val(""),this.options={},this.optionsData={}},n.prototype.getSelectedLabel=function(){return this.input.val()},n.prototype.setOptionLabel=function(e,t){var i=this.menu.children("li[data-value='"+e.replace(/(['"])/g,"\\$1")+"']");i.children("a").html(t||"---"),i.hasClass("active")&&this.input.val(t||"---")},n.prototype.setWidth=function(e){this.elem.css({width:e})},n.prototype.getSelected=function(){return this.getValue()},n.prototype.setSelected=function(e){this.setValue(e)},n}.apply(t,n))||(e.exports=o)},"./WB_CustomHtml.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js"),i("./element/ControlsSelection.ts"),i("./ui/ScriptEditDialog.ts")],void 0===(o=function(e,t,i,n,o,s,r){"use strict";var a=function(e){e&&this.__construct(e)};return __extends(a,t.Element),e.registerClass("CustomHtml",a),a.prototype.noPhotoBg="ico-tb-html",a.prototype._customHtml=null,Object.defineProperty(a.prototype,"customHtml",{get:function(){return this._customHtml},set:function(e){this._customHtml=e},enumerable:!0,configurable:!0}),a.prototype._customHtmlDeactivate=!0,Object.defineProperty(a.prototype,"customHtmlDeactivate",{get:function(){return this._customHtmlDeactivate},set:function(e){this._customHtmlDeactivate=e},enumerable:!0,configurable:!0}),a.prototype.iframe=null,a.prototype.iframeDocument=null,a.prototype.__construct=function(e){t.Element.call(this,e),this.setErrorMessage(""),this.container.css({overflow:"hidden"}),this._customHtml=e.content.html?e.content.html:null,this._customHtmlDeactivate=!(void 0!==e.content.htmlDeactivate&&!e.content.htmlDeactivate),this.updateStyle(!0);var i=this;this.controls.onDblClick((function(){i.edit()}))},a.prototype.getDefaultResizeMode=function(){return s.ControlsResizeMode.ALL},a.prototype.getDataDefaults=function(){return o.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},a.prototype.getIcon=function(){return"fa fa-file-code-o"},a.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={html:this.customHtml?this.customHtml:"",htmlDeactivate:this.customHtmlDeactivate},e},a.prototype.updateTimer=null,a.prototype.updateStyle=function(e,i){if(t.Element.prototype.updateStyle.call(this,e,i),this.customHtmlDeactivate)this.displayEmptyMessage(!0),this.container.html(""),this.iframe=null;else{this.displayEmptyMessage(!this.customHtml);try{var n=this;clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){for(var e,t=1e3,i=n.customHtml?n.customHtml:"",s=/['"]gallery\/[^'"]+\-ts[0-9]+\.[^\.'"]+['"]/;t>0&&(e=i.match(s));)i=i.replace(e[0],e[0].substring(0,1)+wb_builder.userBaseUrl+e[0].substring(1)),t--;var r=n.id+"_iframe";if(n.iframe=o(r),!n.iframe.length){n.container.html(""),n.iframe=o('<iframe id="'+r+'" src="about:blank" style="position: relative; width: 100%; border: none; background: transparent;" sandbox="allow-modals allow-popups allow-orientation-lock allow-pointer-lock allow-presentation allow-same-origin allow-scripts">').appendTo(n.container),n.iframeDocument=n.iframe.get(0).contentWindow.document,n.iframeDocument.open();var a="";o("link[rel=stylesheet]").each((function(){this.href.indexOf(location.origin)>-1&&/(bootstrap\.min|font-awesome\.min|site)\.css/.test(this.href)&&(a+='<link rel="stylesheet" type="text/css" href="'+this.href+'" />')}));var l="<!DOCTYPE html><html><head>"+a+'</head><body style="position: relative; padding: 0; margin: 0; border: 0; overflow-y: auto;"><div id="content"></div></body></html>';n.iframeDocument.write(l),n.iframeDocument.close()}n.iframeDocument.getElementById("content").innerHTML=i,"auto"===n.getHeight()?setTimeout((function(){n.iframe.css("height",o(n.iframeDocument.body).outerHeight(!0)+"px")}),50):n.iframe.css("height","100%")}),50)}catch(e){}}},a.prototype.supportsAutoHeight=function(){return!0},a.prototype.comProperties=function(){var e=this,n=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"Label",text:__("HTML code")},{type:"Button",text:__("Click to add file(s)"),icon:"glyphicon glyphicon-picture",styleClass:"btn-md btn-success pull-right",click:function(e,t){if(!this.libDlg){this.libDlg=i.Service.mediaLibrary.open(__("Select media"),!1,"all",!1);var n=this.libDlg;n.addButton(__("Cancel")),n.addButton(__("Select"),(function(){var e=n.getSelectedFiles(!1);e.length>0&&(t.customHtml.focus(),t.customHtml.insertAtCursor(e[0])),n.hide()}),!0)}this.libDlg.clearFileSelection(),this.libDlg.show()}},{type:"TextField",id:"customHtml",textArea:!0,fixedWidth:12,css:{height:214,marginBottom:0},placeholder:__("HTML is a code which usually contains tags wrapped between < ... > symbols.")+"\n"+__("Example")+": <div> ... "+__("HTML code").toLowerCase()+" ... </div>"}]}],callbackFunc:function(t){e.customHtml=t.customHtml.getValue(),e.customHtmlDeactivate=t.customHtmlDeactivate.getValue()}});n.customHtml.setValue(this.customHtml?this.customHtml:""),n.customHtmlDeactivate.setValue(this.customHtmlDeactivate)},a.prototype.edit=function(){this.codeDialog||(this.codeDialog=new r.ScriptEditDialog),this.codeDialog.setUseMedia(!0),this.codeDialog.fields.code.setPlaceholder(__("HTML is a code which usually contains tags wrapped between < ... > symbols.")+"\n"+__("Example")+": <div> ... "+__("HTML code").toLowerCase()+" ... </div>"),this.codeDialog.edit(this.customHtml).then((e=>{e&&this.getProperty("customHtml").set(this,e,!0)}))},a.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"customHtmlDeactivate",type:n.PropertyType.CustomHTMLScriptDeactivateInBuilder}),this.registerProperty({name:"customHtml",type:n.PropertyType.CustomHtmlSourceCode,uiComponentOptions:{placeholder:__("HTML is a code which usually contains tags wrapped between < ... > symbols.")+"\n"+__("Example")+": <div> ... "+__("HTML code").toLowerCase()+" ... </div>"}})},a}.apply(t,n))||(e.exports=o)},"./WB_Dialog.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./UIComponent.ts"),i("./Service.ts"),i("./UserInput.ts"),i("./util/DataUtil.ts")],void 0===(o=function(e,t,i,n,o){"use strict";var s=function(e,t,i,n){"%inherit%"!==e&&this.__construct(e,t,i,n)};return s.prototype.id=null,s.prototype.title="",s.prototype.dialog=null,s.prototype.baseElem=null,s.prototype.content=null,s.prototype.headerElem=null,s.prototype.footerElem=null,s.prototype.xButton=null,s.prototype.fields=null,s.prototype.buttons=null,s.prototype.primaryButton=null,s.prototype.onOpen=null,s.prototype.onBeforeClose=null,s.prototype.onShown=null,s.prototype.onShow=null,s.prototype.onClose=null,s.prototype.onClosed=null,s.prototype.stopPropagation=!1,s.prototype.ignoreEvent=!1,s.prototype.isStatic=!1,s.prototype.isVisible=!1,s.prototype.autoResize=!1,s.prototype.autoResizeFunc=null,s.prototype.maximised=!1,s.prototype.loading=!1,s.prototype.loadingOverlay=null,s.prototype.closable=!0,s.lastIndex=-1,s.stack=[],s.hasHotkey=null,s.hideEditors=!0,s.prototype.__construct=function(t,i,o,r){s.hasHotkey||(s.hasHotkey=function(){if(s.stack.length>0){var e=s.stack[s.stack.length-1];!e.isStatic&&e.closable&&e.setVisible(!1)}},n.UserInput.addHotKey("esc",s.hasHotkey)),s.lastIndex++,this.id="wb_dialog_"+s.lastIndex,this.isStatic=!!i,this.dialog=e('<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+(i&&!r?"":'<button type="button" class="close" data-dismiss="modal">&times;</button>')+'<h4 class="modal-title">&nbsp;</h4></div><div class="modal-body"><p>&nbsp;</p></div><div class="modal-footer"></div></div></div></div>'),this.dialog.attr("id",this.id),this.baseElem=e(".modal-dialog",this.dialog).eq(0),this.headerElem=e(".modal-header",this.dialog).eq(0),this.footerElem=e(".modal-footer",this.dialog).eq(0),this.title=e(".modal-header",this.dialog).children(".modal-title"),this.xButton=e(".modal-header",this.dialog).children("button.close"),this.content=e(".modal-body",this.dialog),this.buttons=e(".modal-footer",this.dialog),e(document.body).append(this.dialog);var a={show:!1,keyboard:!0};i&&(a.keyboard=!1,a.backdrop="static"),this.dialog.modal(a);var l=this;this.dialog.on("hidden.bs.modal",(function(){"function"==typeof l.onClosed&&l.onClosed(),s.stack.length>0&&(s.stack[0]instanceof WB_Preloader||e("body").addClass("modal-open"))})),this.dialog.on("show.bs.modal",(function(){"function"==typeof l.onShow&&l.onShow()})),this.dialog.on("shown.bs.modal",(function(){"function"==typeof l.onShown&&l.onShown()})),this.dialog.on("hide.bs.modal",(function(){l.ignoreEvent||(l.setVisible(!1,!0),"function"==typeof l.onClose&&l.onClose())})),this.dialog.on("click",(function(e){if(!l.closable)return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1})),this.fields={},this.setTitle(t),o&&this.setContent(o)},s.prototype.setOnClose=function(e){this.onClose=e},s.prototype.propertyDialogField=function(e){var t;if("apply"===e)return this.primaryButton?{_elem:this.primaryButton,getElem:function(){return this._elem}}:null;if((t=e.match(/^tab\-(.+)$/i))&&"tabbedPane"in this){for(var i=0;i<this.tabbedPane.tabs.length;i++){var n=this.tabbedPane.tabs[i];if(n.type===t[1])return{_control:this.tabbedPane,_tab:n,select:function(){this._control.selectTab(null,this._tab)},getElem:function(){return this._tab.btnElem}}}return null}return e in this.fields?this.fields[e]:null},s.prototype.propertyDialogClose=function(){"function"==typeof this.onClose&&this.onClose.call(this.comDialog),this.hide()},s.prototype.propertyDialogApply=function(e){e?this.primaryButton&&this.primaryButton.trigger("click"):"function"==typeof this._applyFunc&&this._applyFunc.call(this)},s.prototype.setTitleVisible=function(e){e?this.headerElem.show():this.headerElem.hide()},s.prototype.setFooterVisible=function(e){e?this.footerElem.show():this.footerElem.hide()},s.prototype.setTitle=function(e){void 0!==e&&this.title.html(e)},s.prototype.setContent=function(e,i){if(e&&e instanceof t.UIComponent){if("fields"in e&&"object"==typeof e.fields)for(var n in i||(this.fields={}),e.fields)this.fields[n]=e.fields[n];this.content.empty().append(e.getElem())}else null!=e&&this.content.empty().append(e)},s.prototype.addElement=function(e){return this.content.append(e),e},s.prototype.addNamedInput=function(t,i,n,o){var s=document.createElement("div"),r=document.createElement("input"),a=document.createElement("label");if(s.className="ui-named-input",r.type=i,o&&(r.name=o),n){r.id=n;try{a.setAttribute("for",n)}catch(e){}try{a.setAttribute("htmlFor",n)}catch(e){}}return e(a).html(t),"checkbox"===i||"radio"===i?(s.appendChild(r),s.appendChild(a)):(s.appendChild(a),s.appendChild(r)),e(this.dialog).append(s),n&&(this.fields[n]=r),r},s.prototype.setMaximised=function(t){if(this.maximised=t,t){this.dialog.css({paddingRight:0,paddingLeft:0}),this.baseElem.css({width:"auto",margin:0});var i=e(window).height(),n=i-this.headerElem.outerHeight()-this.footerElem.outerHeight()-2;this.content.css({height:n,maxHeight:i})}else this.dialog.css({paddingRight:17,paddingLeft:17}),this.baseElem.css({width:"",margin:""}),this.content.css({height:""})},s.prototype.setMaxWidth=function(e){1*e&&null!=e&&this.baseElem.css({maxWidth:e})},s.prototype.setSize=function(e,t){1*e&&null!=e&&this.baseElem.css({width:e}),1*t&&null!=t&&this.baseElem.height(1*t)},s.prototype.setSizeClass=function(e){this.baseElem.attr("class","modal-dialog").addClass(e)},s.prototype.setMaxBodyHeight=function(e){o.isSet(e)&&this.content.css("max-height",e+"px")},s.prototype.setMinBodyHeight=function(e){o.isSet(e)&&this.content.css("min-height",e+"px")},s.prototype.setNoScroll=function(){this.content.css({"overflow-x":"","overflow-y":"",overflow:"visible"})},s.prototype.setAutoResize=function(t,i){var n=this,o=i;this.autoResize=t,this.autoResize?(e(window).on("resize",this.autoResizeFunc=function(){var t=.9*e(window).height()-Math.max(n.headerElem.outerHeight(!0),49)-Math.max(n.footerElem.outerHeight(!0),60)-60;n.setMaxBodyHeight(t),"function"==typeof o&&o.call(n,t)}),this.autoResizeFunc()):("function"==typeof this.autoResizeFunc&&e(window).off("resize",null,this.autoResizeFunc),this.autoResizeFunc=null)},s.prototype.setCenterButtons=function(e){e?this.footerElem.css("text-align","center"):this.footerElem.css("text-align","")},s.prototype.setClosable=function(e){this.closable=!!e,e?this.xButton.show():this.xButton.hide()},s.prototype.setVisible=function(t,n,o){if(!this.stopPropagation){if(this.stopPropagation=!0,t){if(!o){i.Service.contextMenu&&i.Service.contextMenu.hideAll(),i.Service.popover&&i.Service.popover.closeAll(),s.hideEditors&&"textArea"in i&&i.Service.textArea.hideEditors(),s.stack.length>0&&s.stack[s.stack.length-1].setVisible(!1,!1,!0);var r=!0;for(var a in s.stack)if(s.stack[a].id===this.id){r=!1;break}r&&s.stack.push(this)}n||(o&&(this.ignoreEvent=!0),this.dialog.modal("show"),e(document.body).css("padding-right",""),this.isVisible=!0,o&&(this.ignoreEvent=!1))}else n||(o&&(this.ignoreEvent=!0),this.dialog.modal("hide"),this.isVisible=!1,o&&(this.ignoreEvent=!1)),o||(s.stack.pop(),s.stack.length>0&&s.stack[s.stack.length-1].setVisible(!0,!1,!0));this.stopPropagation=!1}},s.prototype.show=function(e){this.setContent(e),this.setVisible(!0)},s.prototype.hide=function(){this.setVisible(!1)},s.prototype.addButton=function(t,i,n,o,s){this.buttons[t]=i;var r=e('<button class="btn" type="button"></button>');if(r.html(t),"function"==typeof i)r.bind("click",i);else{var a=this;r.bind("click",(function(){a.setVisible(!1)}))}return n?(this.primaryButton=r,r.addClass("btn-success")):r.addClass("btn-default"),o&&r.addClass(o),s&&r.attr("disabled",s),r.attr("iid",t),this.buttons.append(r),r},s.prototype.getButtonCallback=function(e){return!!this.buttons[e]&&this.buttons[e]},s.prototype.removeButton=function(e){this.buttons.children("[iid='"+e+"']").remove()},s.prototype.removeAllButtons=function(){this.buttons.children("[iid]").remove()},s.prototype.setLoading=function(t){this.loading=!!t,this.loading?(this.loadingOverlay||(this.loadingOverlay=e('<div class="wb-modal-loading-overlay"><div class="ico-spin wb-icon-spinner"></div></div>'),this.content.append(this.loadingOverlay)),this.loadingOverlay.show(),this.buttons.children().attr("disabled","disabled")):(this.loadingOverlay.hide(),this.buttons.children().removeAttr("disabled"))},s.prototype.dispose=function(){this.isVisible&&this.setVisible(!1),this.dialog.remove()},s.closeAll=function(){s.stack.length>0&&s.stack[s.stack.length-1].setVisible(!1,!1,!0),s.stack.splice(0,s.stack.length)},window.WB_Dialog=s,s}.apply(t,n))||(e.exports=o)},"./WB_FacebookFans.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./IFrameControl.ts"),i("./element/PropertyType.ts"),i("./util/DataUtil.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s,r,a){var l=i("./core/BuilderConfig.ts").wbConfig,c=function(e){e&&this.__construct(e)};return __extends(c,t.Element),e.registerClass("FacebookFans",c),c.prototype.noPhotoBg="ico-tb-facebook-fans",c.prototype.ifrm=!1,c.prototype.cover=!1,c.prototype._params=!1,Object.defineProperty(c.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"facebookPageUrl",{get:function(){return this._params.url},set:function(e){this._params.url=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"small_header",{get:function(){return this._params.small_header},set:function(e){this._params.small_header=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hide_cover",{get:function(){return this._params.hide_cover},set:function(e){this._params.hide_cover=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hide_friends",{get:function(){return this._params.hide_friends},set:function(e){this._params.hide_friends=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hide_timeline",{get:function(){return this._params.hide_timeline},set:function(e){this._params.hide_timeline=e},enumerable:!0,configurable:!0}),c.supportedLocales=["en_US","ca_ES","cs_CZ","cx_PH","cy_GB","da_DK","de_DE","eu_ES","en_UD","es_LA","es_ES","gn_PY","fi_FI","fr_FR","gl_ES","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nn_NO","nl_NL","fy_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","ku_TR","zh_CN","zh_HK","zh_TW","af_ZA","sq_AL","hy_AM","az_AZ","be_BY","bn_IN","bs_BA","bg_BG","hr_HR","nl_BE","en_GB","et_EE","fo_FO","fr_CA","ka_GE","el_GR","gu_IN","hi_IN","is_IS","id_ID","ga_IE","jv_ID","kn_IN","kk_KZ","lv_LV","lt_LT","mk_MK","mg_MG","ms_MY","mt_MT","mr_IN","mn_MN","ne_NP","pa_IN","sr_RS","so_SO","sw_KE","tl_PH","ta_IN","te_IN","ml_IN","uk_UA","uz_UZ","vi_VN","km_KH","tg_TJ","ar_AR","he_IL","ur_PK","fa_IR","ps_AF","my_MM","qz_MM","or_IN","si_LK","rw_RW","cb_IQ","ha_NG","ja_KS","br_FR","tz_MA","co_FR","as_IN","ff_NG","sc_IT","sz_PL"],c.fixLocale=function(e){return e&&c.supportedLocales.indexOf(e)>-1?e:"en_US"},c.prototype.__construct=function(e){t.Element.call(this,e),this.ifrm=a("<iframe></iframe>"),this.ifrm.attr("scrolling","no"),this.ifrm.attr("frameborder","0"),this.ifrm.attr("allowTransparency","true"),this.ifrm.css({border:"none",overflow:"hidden"}),this.container.append(this.ifrm);var i=this;this._params={url:e.content.url?e.content.url:"",locale:l.locale,small_header:!r.isSet(e.content.small_header)||!!e.content.small_header,hide_cover:!!r.isSet(e.content.hide_cover)&&!!e.content.hide_cover,hide_friends:!!e.content.hide_friends,hide_timeline:!!e.content.hide_timeline,fburl:e.content.fburl?e.content.fburl:"about:blank"},this.elem.bind("resize",(function(){var e=i.getWidth(),t=i.getHeight();i.ifrm.css({width:e+"px",height:t+"px"})})),this.elem.bind("resizestop",(function(){i.updateStyle()})),this.updateStyle(!0)},c.prototype.getDataDefaults=function(){return a.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},c.prototype.getSupportedSizeUnits=function(){return{sizeW:"px",sizeH:"px"}},c.prototype.updateContentSize=function(){t.Element.prototype.updateContentSize.call(this),this.elem.trigger("resize"),this.elem.trigger("resizestop")},c.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={url:this.facebookPageUrl,locale:l.locale,small_header:this.small_header,hide_cover:this.hide_cover,hide_friends:this.hide_friends,hide_timeline:this.hide_timeline,fburl:this.params.fburl},e},c.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this.params;"object"!=typeof n&&(n={});var o=n.url?n.url:"https://www.facebook.com/platform";/^https:\/\/www\.facebook\.com\//.test(o)?this.displayErrorMessage(!1):this.setErrorMessage(__("Incorrect URL")),n.locale=n.locale?n.locale:"en_US",n.small_header=!!n.small_header,n.hide_cover=!!n.hide_cover,n.hide_friends=!!n.hide_friends,n.fburl="https://www.facebook.com/plugins/page.php?href="+encodeURIComponent(o)+"&tabs=&locale="+c.fixLocale(n.locale)+"&small_header="+(n.small_header?"true":"false")+"&hide_cover="+(n.hide_cover?"true":"false")+"&show_facepile="+(n.hide_friends?"false":"true")+"&tabs="+(n.hide_timeline?"":"timeline")+"&width="+parseInt(this.getWidth())+"&height="+parseInt(this.getHeight())+"&adapt_container_width=true",this.ifrm.attr("src",n.fburl),this.elem.trigger("resize")},c.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:340},tabs:[{children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Page URL"),helpText:__("Only for Facebook pages, not for profiles")},{type:"TextField",id:"fbUrl",placeholder:"https://www.facebook.com/platform",change:function(){i.fbPreview.setParam("href",this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbUrl-change",e)}},{type:"VerticalLayout",css:{marginTop:"20px",marginBottom:"20px"},children:[{type:"CheckBox",label:__("Hide cover"),id:"fbHideCover",helpText:__("Hide cover photo in the header."),change:function(){i.fbPreview.setParam("hide_cover",this.getValue()?"true":"false"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbHideCover-change",e)}},{type:"CheckBox",label:__("Hide friends"),id:"fbHideFriends",helpText:__("Hide faces of friends."),change:function(){i.fbPreview.setParam("show_facepile",this.getValue()?"false":"true"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbHideFriends-change",e)}},{type:"CheckBox",label:__("Hide timeline"),id:"fbHideTimeline",helpText:__("Hide page timeline."),change:function(){i.fbPreview.setParam("tabs",this.getValue()?"":"timeline"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbHideTimeline-change",e)}},{type:"CheckBox",label:__("Small header"),id:"fbSmallHeader",helpText:__("Use smaller header."),change:function(){i.fbPreview.setParam("small_header",this.getValue()?"true":"false"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbSmallHeader-change",e)}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Preview")},{type:o.IFrameControl,id:"fbPreview",url:"https://www.facebook.com/plugins/page.php",params:{href:this.params.url,locale:this.params.locale,small_header:this.params.small_header?"true":"false",hide_cover:this.params.hide_cover?"true":"false",show_facepile:this.params.hide_friends?"false":"true",tabs:this.params.hide_timeline?"":"timeline",width:260,height:260},css:{width:260,height:260}}]}]}]}],callbackFunc:function(t){e.facebookPageUrl=t.fbUrl.getValue(),e.small_header=t.fbSmallHeader.getValue(),e.hide_cover=t.fbHideCover.getValue(),e.hide_friends=t.fbHideFriends.getValue(),e.hide_timeline=t.fbHideTimeline.getValue(),e.updateStyle()}});i.fbUrl.setValue(this.facebookPageUrl),i.fbSmallHeader.setValue(this.small_header),i.fbHideCover.setValue(this.hide_cover),i.fbHideFriends.setValue(this.hide_friends),i.fbHideTimeline.setValue(this.hide_timeline)},c.prototype.getIcon=function(){return"fa fa-facebook-square"},c.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"facebookPageUrl",type:s.PropertyType.FacebookPageUrl,dependencies:["params"]}),this.registerProperty({name:"small_header",type:s.PropertyType.UseSmallHeader,dependencies:["params"]}),this.registerProperty({name:"hide_cover",type:s.PropertyType.NoWidgetHeaderCover,dependencies:["params"]}),this.registerProperty({name:"hide_friends",type:s.PropertyType.NoFriendsList,dependencies:["params"]}),this.registerProperty({name:"hide_timeline",type:s.PropertyType.NoTimeline,dependencies:["params"]})},c}.apply(t,n))||(e.exports=o)},"./WB_FacebookLike.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./WB_ToolTipControl.class.js"),i("./IFrameControl.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s,r,a){"use strict";var l=i("./core/BuilderConfig.ts").wbConfig,c=function(e){e&&this.__construct(e)};return __extends(c,t.Element),e.registerClass("FacebookLike",c),c.prototype.noPhotoBg="ico-tb-facebook-like",c.prototype.ifrm=!1,c.prototype._params=!1,c.prototype.defaultUrl="https://www.facebook.com/facebook",Object.defineProperty(c.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"likeUrl",{get:function(){return this._params.url},set:function(e){this._params.url=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"layout",{get:function(){return this._params.layout},set:function(e){this._params.layout=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"show_faces",{get:function(){return this._params.show_faces},set:function(e){this._params.show_faces=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"action",{get:function(){return this._params.action},set:function(e){this._params.action=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"colorscheme",{get:function(){return this._params.colorscheme},set:function(e){this._params.colorscheme=e},enumerable:!0,configurable:!0}),c.prototype.__construct=function(e){t.Element.call(this,e),this.ifrm=a("<iframe></iframe>"),this.ifrm.attr("scrolling","no"),this.ifrm.attr("frameborder","0"),this.ifrm.attr("allowTransparency","true"),this.ifrm.css({border:"none",overflow:"hidden"}),this.container.append(this.ifrm);var i=this;this._params={url:e.content.url?e.content.url:"",locale:l.locale,layout:e.content.layout?e.content.layout:"standard",show_faces:!!e.content.show_faces,action:e.content.action?e.content.action:"like",colorscheme:e.content.colorscheme?e.content.colorscheme:"light",fburl:e.content.fburl?e.content.fburl:"about:blank"},this.elem.bind("resize",(function(){var e=i.getWidth(),t=i.getHeight();i.ifrm.css({width:e+"px",height:t+"px"})})),this.elem.bind("resizestop",(function(){i.updateStyle()})),this.updateStyle(!0)},c.prototype.getDataDefaults=function(){return a.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},c.prototype.getSupportedSizeUnits=function(){return{sizeW:"px",sizeH:"px"}},c.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={url:this.params.url,locale:l.locale,layout:this.params.layout,show_faces:this.params.show_faces,action:this.params.action,colorscheme:this.params.colorscheme,fburl:this.params.fburl},e},c.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this.params,o=this;"object"!=typeof n&&(n={});var s=n.url?n.url:this.defaultUrl;/^http(s)*:\/\//.test(s)?(o.displayErrorMessage(!1),o.setSize(270,37)):(o.setErrorMessage(__("Incorrect URL")),o.setSize(270,160)),n.locale=n.locale?n.locale:"en_US",n.layout=n.layout?n.layout:"standard",n.show_faces=!!n.show_faces,n.action=n.action?n.action:"like",n.colorscheme=n.colorscheme?n.colorscheme:"light",n.fburl="https://www.facebook.com/plugins/like.php?locale="+n.locale+"&href="+encodeURIComponent(s)+"&layout="+encodeURIComponent(n.layout)+"&show_faces="+(n.show_faces?"true":"false")+"&width="+this.getWidth()+"&height="+this.getHeight()+"&action="+encodeURIComponent(n.action)+"&colorscheme="+encodeURIComponent(n.colorscheme),this.ifrm.attr("src",n.fburl),this.elem.trigger("resize")},c.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:360},tabs:[{children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("URL to Like (required)")},{type:"TextField",id:"fbUrl",placeholder:this.defaultUrl,change:function(){i.fbPreview.setParam("href",this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbUrl-change",e)}},{type:"Label",text:__("Verb to display"),helpText:__("The verb to display in the button. Currently only 'like' and 'recommend' are supported."),css:{marginTop:"20px"}},{type:"RadioBox",label:__("Like"),id:"fbActionLike",group:"fbAction",change:function(){i.fbPreview.setParam("action","like"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbActionLike-change",e)}},{type:"RadioBox",label:__("Recommend"),id:"fbActionRecommend",group:"fbAction",change:function(){i.fbPreview.setParam("action","recommend"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbActionRecommend-change",e)}},{type:"CheckBox",label:__("Show Faces"),id:"fbShowFaces",helpText:__("Show profile pictures below the button."),css:{marginTop:"20px"},change:function(){i.fbPreview.setParam("show_faces",this.getValue()?"true":"false"),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbShowFaces-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Layout Style"),helpText:__("determines the size and amount of social context next to the button")},{type:"DropdownBox",id:"fbLayout",options:[{name:__("Standard"),id:"standard"},{name:__("Count button"),id:"button_count"},{name:__("Count box"),id:"box_count"}],change:function(){i.fbPreview.setParam("layout",this.getSelectedItem().getId()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbLayout-change",e)}},{type:"Label",text:__("Color Scheme"),css:{marginTop:"20px"}},{type:"RadioBox",label:__("Light"),id:"fbColorSchemeLight",group:"fbColorScheme",change:function(){i.fbPreview.setParam("colorscheme","light"),i.fbPreview.css({backgroundColor:"#ffffff"}),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbColorSchemeLight-change",e)}},{type:"RadioBox",label:__("Dark"),id:"fbColorSchemeDark",group:"fbColorScheme",change:function(){i.fbPreview.setParam("colorscheme","dark"),i.fbPreview.css({backgroundColor:"#3d3d3d"}),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-fbColorSchemeDark-change",e)}}]}]},{type:"Label",text:__("Preview"),css:{marginTop:"20px"}},{type:s.IFrameControl,id:"fbPreview",url:"https://www.facebook.com/plugins/like.php",params:{href:this.params.url,locale:this.params.locale,show_faces:this.params.show_faces?"true":"false",layout:this.params.layout,action:this.params.action,width:540,height:60,colorscheme:this.params.colorscheme},css:{width:540,height:60}}]}],callbackFunc:function(t){e.likeUrl=t.fbUrl.getValue(),e.layout=t.fbLayout.getSelectedItem().getId(),e.show_faces=t.fbShowFaces.getValue(),e.action=t.fbActionLike.getValue()?"like":"recommend",e.colorscheme=t.fbColorSchemeLight.getValue()?"light":"dark"}});i.fbUrl.setValue(this.likeUrl);var o=i.fbLayout.getItemById(this.layout);o||(o=i.fbLayout.getItem(0)),i.fbLayout.selectItem(o),i.fbShowFaces.setValue(this.show_faces),"like"===this.action?i.fbActionLike.setValue(!0):i.fbActionRecommend.setValue(!0),"light"===this.colorscheme?i.fbColorSchemeLight.setValue(!0):i.fbColorSchemeDark.setValue(!0)},c.prototype.getIcon=function(){return"fa fa-facebook"},c.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"likeUrl",type:r.PropertyType.LikeUrl,dependencies:["params"]}),this.registerProperty({name:"layout",type:r.PropertyType.FacebookLikeLayout,dependencies:["params"]}),this.registerProperty({name:"show_faces",type:r.PropertyType.ShowFaces,dependencies:["params"]}),this.registerProperty({name:"action",type:r.PropertyType.FacebookLikeAction,dependencies:["params"]}),this.registerProperty({name:"colorscheme",type:r.PropertyType.FacebookLikeColorScheme,dependencies:["params"]})},c}.apply(t,n))||(e.exports=o)},"./WB_Flash.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i){"use strict";var n=function(e){e&&this.__construct(e)};return __extends(n,t.Element),e.registerClass("Flash",n),n.prototype.noPhotoBg="ico-tb-flash",n.prototype.flash=!1,n.prototype.params=!1,n.prototype.isNew=!1,n.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this.isNew=!e.id;var i=this;this.params={image:e.content.image?{file:e.content.image,width:e.content.owidth?e.content.owidth:0,height:e.content.oheight?e.content.oheight:0,size:0}:{file:"",width:0,height:0,size:0},wmode:e.content.wmode?e.content.wmode:"opaque"},this.elem.bind("resize",(function(){var e=i.getWidth(),t=i.getHeight();i.flash&&i.params.image&&i.params.image.file&&i.flash.css({width:e,height:t})})),this.updateStyle(!0)},n.prototype.getDataDefaults=function(){return i.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:48,minHeight:24})},n.prototype.getUsedMediaGalleryItems=function(){var e=t.Element.prototype.getUsedMediaGalleryItems.call(this);return this.params&&this.params.image&&this.params.image.file&&""!==this.params.image.file&&"none"!==this.params.image.file&&e.push(this.params.image.file),e},n.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={image:this.params.image.file,wmode:this.params.wmode,owidth:this.params.image.width,oheight:this.params.image.height},e},n.prototype.updateStyle=function(e,n){t.Element.prototype.updateStyle.call(this,e,n);var o=this.params;if("object"!=typeof o&&(o={}),this.displayEmptyMessage(!o.image||!o.image.file),o.image=o.image?o.image:{file:"",width:0,height:0,size:0},o.wmode=o.wmode?o.wmode:"opaque",this.params=o,this.flash&&(this.flash.remove(),this.flash.empty(),this.flash=null),o.image&&o.image.file){this.flash=i("<object></object>"),this.flash.attr("data",this.makeLocalUrl(o.image.file)),this.flash.attr("type","application/x-shockwave-flash"),this.flash.css({width:"100%",height:"100%"});var s=i('<param name="movie" />');s.val(this.makeLocalUrl(o.image.file)),this.flash.append(s),this.flash.append('<param name="menu" value="false" />'),(s=i('<param name="wmode" />')).val(o.wmode),this.flash.append(s),this.flash.append('<param name="flashvars" value="" />')}this.flash&&this.container.append(this.flash),this.elem.trigger("resize")},n.prototype.onResize=function(e){t.Element.prototype.onResize.call(this,e),this.elem.trigger("resize")},n.prototype.resetFlashSize=function(){this.params.image.width>0&&this.params.image.height>0&&(this.setSize(this.params.image.width,this.params.image.height),this.onResize())},n.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",fluid:!0,children:[{type:"Label",text:__("Flash file")},{type:"ImageSelector",id:"flashImage",mode:"flash"},{type:"CheckBox",label:__("Transparent"),id:"flashWmode",css:{marginTop:15}}]}]}],callbackFunc:function(t){e.params.image=t.flashImage.getValues(!0),e.params.image=e.params.image&&e.params.image.length>0?e.params.image[0]:{file:"",width:0,height:0,size:0},e.params.wmode=t.flashWmode.getValue()?"transparent":"opaque",e.updateStyle(),e.isNew&&(e.isNew=!1,e.resetFlashSize())}});i.flashImage.setValue(this.params.image),i.flashWmode.setValue("transparent"===this.params.wmode)},n.prototype.initContextMenu=function(){var e=this;if(t.Element.prototype.initContextMenu.call(this),this.menu){var i=this.contextMenuFirstIndex;this.isResizable&&this.menu.insertItemAt(i++,"resetSize",__("Reset to original size"),(function(){e.system.setPageModified(!0),e.resetFlashSize()}),null,null,null,"icon-fullscreen"),this.menu.addSeparator(i++)}},n}.apply(t,n))||(e.exports=o)},"./WB_FlickrGallery.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./element/PropertyType.ts"),i("./util/ComparisonUtil.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n,o){"use strict";var s=function(e){e&&this.__construct(e)};return __extends(s,t.Element),e.registerClass("FlickrGallery",s),s.prototype.noPhotoBg="ico-tb-flickr-gallery",s.prototype.galleryObject=null,s.prototype._params=!1,Object.defineProperty(s.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"flickrUrl",{get:function(){return this._params.url},set:function(e){this._params.url=e,this._params.uid=null,this._params.isSet=!1,this._params.iid=null;var t=e?this._params.url.split("/photos/"):"https://www.flickr.com/photos/gifrancis/galleries/72157622562924322/".split("/photos/");if((t=t.length>1?t[1]:null)&&(t=t.split("/"),this._params.uid=t[0],this._params.isSet=t.length>1&&"sets"===t[1].toLowerCase(),!this._params.isSet&&t.length>1&&/^[0-9]+$/i.test(t[1])?this._params.iid=t[1]:this._params.isSet&&t.length>2&&/^[0-9]+$/i.test(t[2])&&(this._params.iid=t[2])),!/^[0-9]+\@[a-zA-Z0-9]+$/i.test(this._params.uid)){var i=this;window.jsonFlickrApi=function(e){e.user&&e.user.id&&(i._params.uid=e.user.id,i.updateStyle())},this._params.uid=null,o.getScript("https://api.flickr.com/services/rest/?method=flickr.urls.lookupUser&format=json&api_key=83907c66938b15201d5ad2f56026cc97&url="+this._params.url)}},enumerable:!0,configurable:!0}),s.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this.container.css({overflow:"hidden"}),this._params={url:e.content.url?e.content.url:null,uid:e.content.uid?e.content.uid:null,isSet:!!e.content.isSet,iid:e.content.iid?e.content.iid:null,mv:e.content.mv?e.content.mv:"",fv:e.content.fv?e.content.fv:""},this.updateStyle(!0)},s.prototype.getDataDefaults=function(){return o.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},s.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={url:this.params.url,uid:this.params.uid,isSet:this.params.isSet,iid:this.params.iid,mv:this.params.mv,fv:this.params.fv},e},s.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this.params;if("object"!=typeof n&&(n={}),n.url=n.url?n.url:null,n.uid=n.uid?n.uid:"98682907@N00",n.isSet=!!n.isSet&&n.isSet,n.iid=n.iid?n.iid:null,n.mv="https://www.flickr.com/apps/slideshow/show.swf?v=107931",n.fv="offsite=true&lang=en-us&page_show_url="+encodeURI("/photos/"+n.uid+(n.isSet?"/sets":"")+(n.iid?"/"+n.iid:"")+"/show/")+"&page_show_back_url="+encodeURI("/photos/"+n.uid+(n.isSet?"/sets":"")+(n.iid?"/"+n.iid:"")+"/")+(n.isSet?"&set_id="+(n.iid?encodeURI(n.iid):""):"&user_id="+encodeURI(n.uid))+"&jump_to="+(!n.isSet&&n.iid?encodeURI(n.iid):""),this.params=n,this.galleryObject&&(this.galleryObject.remove(),this.galleryObject.empty(),this.galleryObject=null),n.uid){this.galleryObject=o("<object></object>"),this.galleryObject.attr("data",n.mv),this.galleryObject.attr("type","application/x-shockwave-flash"),this.galleryObject.css({width:"100%",height:"100%"});var s=o('<param name="movie" />');s.val(n.mv),this.galleryObject.append(s),this.galleryObject.append('<param name="menu" value="false" />'),this.galleryObject.append('<param name="allowFullScreen" value="false" />'),this.galleryObject.append('<param name="wmode" value="transparent" />'),(s=o('<param name="flashvars" />')).val(n.fv),this.galleryObject.append(s),this.container.append(this.galleryObject),this.displayEmptyMessage(!1)}else this.displayEmptyMessage(!0);this.elem.trigger("resize")},s.prototype.comProperties=function(){var e=this;t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",fluid:!0,children:[{type:"Label",text:__("Flickr gallery or set URL")},{type:"TextField",id:"flickrUrl",placeholder:"https://www.flickr.com/photos/gifrancis/galleries/72157622562924322/"}]}]}],callbackFunc:function(t){e.flickrUrl=t.flickrUrl.getValue()}}).flickrUrl.setValue(this.flickrUrl)},s.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"flickrUrl",type:i.PropertyType.FlickrGalleryUrl,dependencies:["params"],comparator:function(e,t,i){var o=n.ComparisonUtil.checkEqualsRecursive(e,t);return!o&&i&&(/flickr\.com\/photos\/.+\/galleries/.test(e)||""==e?i.setError(""):i.setError(__("Invalid URL"))),o}})},s}.apply(t,n))||(e.exports=o)},"./WB_FontControl.class.js":function(e,t,i){var n,o;n=[i("./WB_ComboBox.class.js"),i("./EditFontsDialog.ts"),i("./FontManager.ts"),i("./BuilderEvent.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n,o){"use strict";var s=function(e){this.__construct(e)};return s.prototype.elem=null,s.prototype.input=null,s.prototype._elem=null,s.prototype.__construct=function(t){this.elem=o("<div/>"),this._elem=new e,t||this.elem.css({width:100}),this.selectedValue=this.getDefaultFont(),this.updateOptions(),this.setValue(this.selectedValue),this.input=this._elem.input,this.elem.append(this._elem.elem),this._elem.onChange=this.inputValueChanged.bind(this);var i=this;n.GlobalEvents.on("fonts.changed",(function(){i.updateOptions()}))},s.editFontsDialog=null,s.editFontsErrorDialog=null,s.getPrimaryFontName=function(e){return e?e.split(",")[0].replace(/["']/g,"").trim().toLowerCase():null},s.prototype.onChange=null,s.prototype.selectedValue=null,s.prototype.getDefaultFont=function(){return"Arial,Helvetica,sans-serif"},s.prototype.updateOptions=function(){var e=[{value:"Arial,Helvetica,sans-serif",label:"Arial"},{value:"Batang,serif",label:"Batang",data:null},{value:"'Capture it'",label:"Capture it",data:null},{value:"'Avenir Light'",label:"Avenir Light",data:null},{value:"Comic Sans MS,Helvetica,Arial,Verdana,cursive",label:"Comic Sans",data:null},{value:"Courier New,monospace",label:"Courier New",data:null},{value:"Dotum,sans-serif",label:"Dotum",data:null},{value:"Georgia,serif",label:"Georgia",data:null},{value:"Gulim,sans-serif",label:"Gulim",data:null},{value:"Helvetica,Arial,sans-serif",label:"Helvetica",data:null},{value:"'Microsoft JhengHei',sans-serif",label:"JhengHei",data:null},{value:"'Malgun Gothic',sans-serif",label:"Malgun Gothic",data:null},{value:"MingLiU,sans-serif",label:"MingLiU",data:null},{value:"Myriad Set Pro,Lucida Grande,Helvetica Neue,Verdana,sans-serif",label:"Myriad Set Pro",data:null},{value:"'Nanum Gothic',sans-serif",label:"Nanum Gothic",data:null},{value:"'BYekan',sans-serif",label:"BYekan",data:null},{value:"'BNazanin',sans-serif",label:"BNazanin",data:null},{value:"'BZar',sans-serif",label:"BZar",data:null},{value:"'IranNastaliq',sans-serif",label:"IranNastaliq",data:null},{value:"'IRANSansWeb',sans-serif",label:"IRANSansWeb",data:null},{value:"'Vazir',sans-serif",label:"Vazir",data:null},{value:"'AtlanticCruise',sans-serif",label:"AtlanticCruise",data:null},{value:"'Nahid',sans-serif",label:"Nahid",data:null},{value:"Lucida Grande,Lucida Sans Unicode,Helvetica,Arial,Verdana,sans-serif",label:"Lucida Grande",data:null},{value:"PMingLiU,sans-serif",label:"PMingLiU",data:null},{value:"Tahoma,Geneva,sans-serif",label:"Tahoma",data:null},{value:"Times New Roman,Times,serif",label:"Times New Roman",data:null},{value:"Trebuchet MS,sans-serif",label:"Trebuchet",data:null},{value:"Verdana,Arial,Helvetica,sans-serif",label:"Verdana",data:null},{value:"Sylfaen",label:"Sylfaen",data:null}];for(var t in this._elem.removeAllOptions(),wb_builder.site.usedCustomFonts){var i=wb_builder.site.usedCustomFonts[t];e.push({value:i.font.getCssFontFamily(),label:i.font.family,data:null})}e.sort((function(e,t){return e.label===t.label?0:e.label<t.label?-1:1}));var n=!1;for(s.getPrimaryFontName(this.selectedValue),t=0;t<e.length;t++){var o=s.getPrimaryFontName(e[t].value);n=n||o,this._elem.addOption(e[t].value,e[t].label,o,e[t].data).css("font-family",e[t].value)}this._elem.addOption("edit-fonts",'<i class="glyphicon glyphicon-pencil"></i> '+__("Edit fonts"),!1,"edit-fonts-dialog"),n||this.setValue(this.getDefaultFont())},s.prototype.openEditFontsDialog=function(){null===s.editFontsDialog&&i.FontManager.ready?s.editFontsDialog=new t.EditFontsDialog(__("Edit fonts")):null===s.editFontsErrorDialog&&i.FontManager.error&&(s.editFontsErrorDialog=new t.EditFontsErrorDialog(__("Edit fonts"))),i.FontManager.ready?(s.editFontsDialog.fontsControl=this,s.editFontsDialog.setVisible(!0)):i.FontManager.error&&s.editFontsErrorDialog.setVisible(!0)},s.prototype.inputValueChanged=function(){"edit-fonts-dialog"===this._elem.getValueData()?(this._elem.setValue(this.selectedValue),this.openEditFontsDialog()):(this.selectedValue=this._elem.getValue(),"function"==typeof this.onChange&&this.onChange.call(this),this.onValueChanged())},s.prototype.setValueAndTriggerEvents=function(e){this.setValue(e),"function"==typeof this.onChange&&this.onChange.call(this),this.onValueChanged()},s.prototype.getValue=function(){return this._elem.getValue()},s.prototype.setValue=function(e){this.selectedValue=e;var t=e,i=s.getPrimaryFontName(e),n=this._elem.getOptions();for(var o in n)if(n.hasOwnProperty(o)&&s.getPrimaryFontName(o)===i){t=o;break}this._elem.setValue(t)},s.prototype._componentWrapper=null,s.prototype.bindings=null,s.prototype.bindingsBySubType=null,s.prototype.dependencyBindings=null,s.prototype.propertyType=null,s.prototype._revalidating=!1,s.supportsMultipleObjectBindings=function(){return!1},s.prototype.setComponentOptions=function(e){},s}.apply(t,n))||(e.exports=o)},"./WB_FontTransformControl.class.js":function(e,t,i){var n,o;n=[i("./WB_ComboBox.class.js"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){"use strict";var i=function(e){this.__construct(e)};return i.prototype._elem=null,i.prototype.elem=null,i.prototype.input=null,i.prototype.__construct=function(i){this.elem=t("<div/>"),this._elem=new e({none:__("None"),capitalize:__("Capitalize"),uppercase:__("Upper Case"),lowercase:__("Lower Case")},"none",null,!0),i||this.elem.css({width:164});var n=this;this._elem.onChange=function(){n.onValueChanged()},this.input=this._elem.input,this.elem.append(this._elem.elem)},i.prototype.getValue=function(){return{value:this._elem.getValue(),css:{"text-transform":this._elem.getValue()}}},i.prototype.setValue=function(e){this._elem.setValue(e&&"object"==typeof e?e.value:e)},i.prototype._componentWrapper=null,i.prototype.bindings=null,i.prototype.bindingsBySubType=null,i.prototype.dependencyBindings=null,i.prototype.propertyType=null,i.prototype._revalidating=!1,i.supportsMultipleObjectBindings=function(){return!1},i.prototype.setComponentOptions=function(e){},i}.apply(t,n))||(e.exports=o)},"./WB_Form.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./ElementRegister.ts"),i("./Element.ts"),i("./ModeManager.js"),i("./element/PropertyType.ts"),i("./ui/FormFieldsControl.ts"),i("./util/DataUtil.ts")],void 0===(o=function(e,t,n,o,s,r,a){"use strict";var l=i("./Service.ts").Service,c=i("./SizeSelector.ts").SizeSelector,u=function(e,t,i){e&&this.__construct(e,t,i)};return __extends(u,n.Element),t.registerClass("Form",u),l.forms={Form:u},u.prototype._fields=null,Object.defineProperty(u.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=e},enumerable:!0,configurable:!0}),u.prototype._email="",Object.defineProperty(u.prototype,"email",{get:function(){return this._email},set:function(e){this._email=e},enumerable:!0,configurable:!0}),u.prototype._emailFrom="",Object.defineProperty(u.prototype,"emailFrom",{get:function(){return this._emailFrom},set:function(e){this._emailFrom=e},enumerable:!0,configurable:!0}),u.prototype._subject=__("Email from the site"),Object.defineProperty(u.prototype,"subject",{get:function(){return this._subject},set:function(e){this._subject=e},enumerable:!0,configurable:!0}),u.prototype._formSentMessage=__("Form was sent."),Object.defineProperty(u.prototype,"formSentMessage",{get:function(){return this._formSentMessage},set:function(e){this._formSentMessage=e},enumerable:!0,configurable:!0}),u.prototype._maxFileSizeTotal=2,Object.defineProperty(u.prototype,"maxFileSizeTotal",{get:function(){return this._maxFileSizeTotal},set:function(e){this._maxFileSizeTotal=e},enumerable:!0,configurable:!0}),u.prototype._button=__("Submit"),Object.defineProperty(u.prototype,"button",{get:function(){return this._button},set:function(e){this._button=e},enumerable:!0,configurable:!0}),u.prototype._smtpEnable=!1,Object.defineProperty(u.prototype,"smtpEnable",{get:function(){return this._smtpEnable},set:function(e){this._smtpEnable=e},enumerable:!0,configurable:!0}),u.prototype._smtpHost=null,Object.defineProperty(u.prototype,"smtpHost",{get:function(){return this._smtpHost},set:function(e){this._smtpHost=e},enumerable:!0,configurable:!0}),u.prototype._smtpPort=null,Object.defineProperty(u.prototype,"smtpPort",{get:function(){return this._smtpPort},set:function(e){this._smtpPort=e},enumerable:!0,configurable:!0}),u.prototype._smtpEncryption=null,Object.defineProperty(u.prototype,"smtpEncryption",{get:function(){return this._smtpEncryption},set:function(e){this._smtpEncryption=e},enumerable:!0,configurable:!0}),u.prototype._smtpUsername=null,Object.defineProperty(u.prototype,"smtpUsername",{get:function(){return this._smtpUsername},set:function(e){this._smtpUsername=e},enumerable:!0,configurable:!0}),u.prototype._smtpPassword=null,Object.defineProperty(u.prototype,"smtpPassword",{get:function(){return this._smtpPassword},set:function(e){this._smtpPassword=e},enumerable:!0,configurable:!0}),u.prototype._recSiteKey=null,Object.defineProperty(u.prototype,"recSiteKey",{get:function(){return this._recSiteKey},set:function(e){this._recSiteKey=e},enumerable:!0,configurable:!0}),u.prototype._recSecretKey=null,Object.defineProperty(u.prototype,"recSecretKey",{get:function(){return this._recSecretKey},set:function(e){this._recSecretKey=e},enumerable:!0,configurable:!0}),u.prototype.form=null,u.prototype.textStyle=null,u.prototype._labelStyle=null,Object.defineProperty(u.prototype,"labelStyle",{get:function(){return this._labelStyle},set:function(e){this._labelStyle=e},enumerable:!0,configurable:!0}),u.prototype._labelColWidth=0,Object.defineProperty(u.prototype,"labelColWidth",{get:function(){return this._labelColWidth},set:function(e){this._labelColWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"labelColWidthFixed",{get:function(){return!!this._labelColWidth},set:function(e){e?this._labelColWidth||(this._labelColWidth=200):this._labelColWidth=0},enumerable:!0,configurable:!0}),u.prototype.regularsTab=null,u.prototype._enablePostUrl=!1,Object.defineProperty(u.prototype,"enablePostUrl",{get:function(){return this._enablePostUrl},set:function(e){this._enablePostUrl=e},enumerable:!0,configurable:!0}),u.prototype._postUrl="",Object.defineProperty(u.prototype,"postUrl",{get:function(){return this._postUrl},set:function(e){this._postUrl=e},enumerable:!0,configurable:!0}),u.prototype._redirectUrl=null,Object.defineProperty(u.prototype,"redirectUrl",{get:function(){return this._redirectUrl},set:function(e){this._redirectUrl=e},enumerable:!0,configurable:!0}),u.prototype.__construct=function(t,i,o){t.width||(t.width=350,t.height=216);var s="_restoreId"in t;if(n.Element.call(this,t,i,o),this.addLangLabel(),this.container.css({overflow:"hidden"}),this._fields=e.extend(!0,{},r.FormFieldsControl.defaultValue),a.isSet(t.content.fields)){this._fields=t.content.fields;for(var l=0;l<r.FormFieldsControl.defaultValue.length;l++)this._fields[l]&&"object"==typeof this._fields[l]?"type"in this._fields[l]&&"required"in this._fields[l]||(this._fields[l]=e.extend({},r.FormFieldsControl.defaultValue[l],this._fields[l])):this._fields[l]=e.extend(!0,{},r.FormFieldsControl.defaultValue[l]);this._email=t.content.email,this._emailFrom=t.content.emailFrom?t.content.emailFrom:"",this._subject=t.content.subject?t.content.subject:this._subject,this._formSentMessage=t.content.sentMessage?t.content.sentMessage:this._formSentMessage,this._button=t.content.button,s||t._copy||this.isElementPreview||t.content.smtpHost||t.content.smtpPort||t.content.smtpUsername||t.content.smtpPassword||!this.system.formConfig||!(this.system.formConfig.smtpDefaultHost||this.system.formConfig.smtpDefaultPort||this.system.formConfig.smtpDefaultUsername||this.system.formConfig.smtpDefaultPassword)?(this._smtpEnable=!!t.content.smtpEnable&&t.content.smtpEnable,this._smtpHost=t.content.smtpHost?t.content.smtpHost:null,this._smtpPort=t.content.smtpPort?t.content.smtpPort:null,this._smtpEncryption=t.content.smtpEncryption?t.content.smtpEncryption:null,this._smtpUsername=t.content.smtpUsername?t.content.smtpUsername:null,this._smtpPassword=t.content.smtpPassword?t.content.smtpPassword:null):(this._smtpEnable=this.system.formConfig.smtpDefaultEnabled,this._smtpHost=this.system.formConfig.smtpDefaultHost,this._smtpPort=this.system.formConfig.smtpDefaultPort,this._smtpEncryption=this.system.formConfig.smtpDefaultEncryption,this._smtpUsername=this.system.formConfig.smtpDefaultUsername,this._smtpPassword=this.system.formConfig.smtpDefaultPassword),this._recSiteKey=t.content.recSiteKey?t.content.recSiteKey:null,this._recSecretKey=t.content.recSecretKey?t.content.recSecretKey:null,this._maxFileSizeTotal=t.content.maxFileSizeTotal?t.content.maxFileSizeTotal:2,this._labelColWidth=t.content.labelColWidth?t.content.labelColWidth:this._labelColWidth,this._enablePostUrl=!!t.content.enablePostUrl,this._postUrl=t.content.postUrl?t.content.postUrl:"",this._redirectUrl=t.content.redirectUrl?t.content.redirectUrl:null}this.textStyle=t.content.textStyle?t.content.textStyle:{color:"#333333",size:13,decoration:"none",font:"Arial,sans-serif",style:{},align:"left",lineHeight:18,css:{font:"normal normal 13px Arial,sans-serif",color:"#333333","text-align":"left","text-decoration":"none","line-height":"18px"}},this._labelStyle=a.isSet(t.content.labelStyle)?t.content.labelStyle:this._labelStyle,this.updateStyle(!0)},u.prototype.getDataDefaults=function(){return e.extend(n.Element.prototype.getDataDefaults.call(this),{minWidth:200,minHeight:72})},u.prototype.getIcon=function(){return"fa fa-list-alt"},u.prototype.supportsAutoWidth=function(){return!0},u.prototype.supportsAutoHeight=function(){return!0},u.prototype.recheckInactive=function(){},u.prototype.getUsedSiteStyles=function(){var e=n.Element.prototype.getUsedSiteStyles.call(this);return this.labelStyle&&""!==this.labelStyle&&e.push("."+this.labelStyle),e},u.prototype.getUsedFonts=function(){var e=n.Element.prototype.getUsedFonts.call(this);return this.textStyle&&this.textStyle.font&&""!==this.textStyle.font&&e.push(this.textStyle.font),e},u.prototype.serialize=function(){var e=n.Element.prototype.serialize.call(this);return e.content={labelColWidth:this.labelColWidth,fieldsWidth:this.container.find("input[type=text],input[type=file],select,textarea").outerWidth(),fields:this.fields,email:this.email,emailFrom:this.emailFrom,subject:this.subject,sentMessage:this.formSentMessage,button:this.button,smtpEnable:this.smtpEnable,smtpHost:this.smtpHost,smtpPort:this.smtpPort,smtpEncryption:this.smtpEncryption,smtpUsername:this.smtpUsername,smtpPassword:this.smtpPassword,recSiteKey:this.recSiteKey,recSecretKey:this.recSecretKey,maxFileSizeTotal:this.maxFileSizeTotal,textStyle:this.textStyle,labelStyle:this.labelStyle,enablePostUrl:this.enablePostUrl,postUrl:this.postUrl,redirectUrl:this.redirectUrl,timestamp:(new Date).getTime()},e},u.prototype.switchMode=function(t,i,s,r){if(n.Element.prototype.switchMode.call(this,t,i,s,r),i===o.MODE_PHONE){var a=this.id+"_form";this.mobStyle||(this.mobStyle=e('<style type="text/css">#'+a+" table td, #"+a+" table th, #"+a+" table tr { display: block; height: auto!important; } #"+a+" table td input, #"+a+" table td textarea { width: 100%!important; }#"+a+" table td .checkbox-label input { width: auto!important; }</style>")),this.form&&this.form.attr("id",a),this.elem.prepend(this.mobStyle)}else this.mobStyle&&this.mobStyle.detach(),this.form&&this.form.removeAttr("id")},u.prototype.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null===e?"":e.replace(/[&<>"']/g,(function(e){return t[e]}))},u.prototype.updateStyle=function(t,i){var o,s,a,l,c,u,d;for(n.Element.prototype.updateStyle.call(this,t,i),i=i||this.system.site.currSelLang,this.form||(this.form=e('<form class="wb_form"></form>'),this.form.bind("submit",(function(){return!1})),this.form.css({width:"100%",height:"100%"}),this.container.append(this.form)),(i?this.system.site.isRtlLang(i):this.system.site.rtl)?(this.form.removeClass("wb_form_ltr"),this.form.addClass("wb_form_rtl")):(this.form.removeClass("wb_form_rtl"),this.form.addClass("wb_form_ltr")),this.form.empty(),o="",o+="<table>",a=0;a<r.FormFieldsControl.defaultValue.length;a++)if((s=this.fields[a])&&s.checked&&__tr(s.name,i)){switch(l=this.labelColWidth?" width: "+this.labelColWidth+"px; white-space: normal;":"",c="textarea"===s.type?"":" height: 1%;",u="",d=!1,s.type){case"input":u+='<input type="text" class="form-control form-field" value="" />';break;case"select":u+='<select class="form-control form-field">';for(var h=__tr(s.options,i).split(";"),p=0;p<h.length;p++)u+="<option>"+e.trim(h[p]).replace("<","&lt;").replace(">","&gt;")+"</option>";u+="</select>";break;case"textarea":u+='<textarea class="form-control form-field"></textarea>',d=!0;break;case"file":u+='<input class="form-control form-field" type="file" multiple="multiple" />';break;case"checkbox":u+='<label class="checkbox-label"><input type="checkbox" class="form-control form-field" value="1" /> '+__tr(s.name,i)+"</label>"}o+="<tr"+(d?' class="area-row"':"")+'><th style="'+c+l+'">'+(l?'<div style="'+l+'">':"")+("checkbox"===s.type?"":this.escapeHTML(__tr(s.name,i)))+"&nbsp;&nbsp;"+(l?"</div>":"")+'</th><td style="'+c+'">'+u+"</td></tr>"}this.recSiteKey&&this.recSecretKey&&(o+='<tr><th style="height: 1%;">&nbsp;</th><td style="height: 1%;"><div class="wb-recaptcha-placeholder"><span>'+__("I'm not a robot")+"</span></div></td></tr>"),o+='<tr><td height="20" colspan="2"><button type="submit" class="btn btn-default">'+this.escapeHTML(__tr(this.button,i))+"</button></td></tr></table>",this.form.append(o),this.form.css({width:"100%",height:"100%"}),this.form.css(this.textStyle.css),this.labelStyle&&e("th,.checkbox-label",this.form).addClass(this.labelStyle),"function"==typeof this.onUpdateStyle&&this.onUpdateStyle()},u.prototype.onApplyCallback=null,u.prototype.onUpdateStyle=null,u.prototype.comProperties=function(){var e=this,t=n.Element.prototype.comProperties.call(this,{size:{minBodyHeight:356},tabs:[{name:__("Fields"),children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",spacing:5,children:[{type:r.FormFieldsControl,id:"formFields"},{type:"Label",text:__("Submit button text")},{type:"MultilangTextField",id:"formFromSubmit",css:{top:"-7px"}}]}]},{type:"HorizontalLayout",children:[{type:"VerticalLayout",spacing:5,children:[{type:"Label",text:__("URL after submit")},{type:"LinkSelector",id:"formRedirectUrl",multilang:!0,noEmail:!0,noPhone:!0,noFiles:!0,noLinkTitle:!0,noIndexing:!0,noPopup:!0,css:{top:"-7px"}}]}]}]},{name:__("Email settings"),type:"mailSettings",children:[{type:"VerticalLayout",children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Form will be sent to this Email"),helpText:'<div style="width: 180px;">'+__("You can specify several emails separated by semicolons.")+"</div>"},{type:"TextField",id:"formFromEmail",placeholder:"example@yourmail.com",change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-formFromEmail-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Form will be sent from this Email"),helpText:'<div style="width: 180px;">'+__("Specify email here if you want the form to be always sent from one email address.")+"<br /><br />"+__("Note: Make sure that domain of specified email address has DNS record of type %sSPF%s. If it does not then you may not receive mails to your inbox.").replace("%s",'<a href="https://en.wikipedia.org/wiki/Sender_Policy_Framework" target="_blank">').replace("%s","</a>")+"<br /><br />"+__("You can also specify combination of email and name.")+" "+__("The value must be of the following format: %s").replace("%s","<br />"+__("Name")+" &lt;"+__("Email")+"&gt;")+"</div>"},{type:"TextField",id:"formFromSenderEmail",placeholder:"no-reply@"+wb_builder.siteDomain,change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-formFromSenderEmail-change",e)}}]}]},{type:"Label",text:__("With Subject"),css:{marginTop:15}},{type:"TextField",id:"formFromSubject"},{type:"Label",text:__("Form sent Message"),css:{marginTop:15}},{type:"MultilangTextField",id:"formFromSentMessage"},{type:"Label",text:__("Maximum size of attachments"),helpText:__("This field should contain either maximum allowed size for uploads on your server or maximum size your email server will accept in a message (whichever is smaller). Don't change this field if you don't know what limits apply on your server or not sure what it is."),css:{marginTop:15}},{type:"FlowLayout",children:[{type:c,min:1,value:2,units:__("MB"),id:"maxFileSizeTotal"}]}]}]},{name:__("SMTP"),type:"smtpSettings",children:[{type:"CheckBox",label:__("SMTP Enable"),id:"smtpEnable",change:function(){this.getValue()?(t.smtpLine2.setEnabled(!0),t.smtpLine3.setEnabled(!0)):(t.smtpLine2.setEnabled(!1),t.smtpLine3.setEnabled(!1))}},{type:"HorizontalLayout",id:"smtpLine2",columnWeights:[4,3,5],enabled:!1,children:[{type:"TextField",id:"smtpHost",placeholder:__("SMTP Host"),title:__("SMTP Host")},{type:"TextField",id:"smtpPort",placeholder:__("SMTP Port"),title:__("SMTP Port")},{type:"FlowLayout",css:{marginTop:5},children:[{type:"RadioBox",label:__("None"),id:"smtpEncryptionNone",inline:!0,group:"encryption",title:__("SMTP Encryption")},{type:"RadioBox",label:__("TLS"),id:"smtpEncryptionTLS",inline:!0,group:"encryption",title:__("SMTP Encryption")},{type:"RadioBox",label:__("SSL"),id:"smtpEncryptionSSL",inline:!0,group:"encryption",title:__("SMTP Encryption")}]}]},{type:"HorizontalLayout",id:"smtpLine3",css:{marginTop:10},enabled:!1,children:[{type:"TextField",id:"smtpUsername",placeholder:__("SMTP Username"),title:__("SMTP Username")},{type:"TextField",id:"smtpPassword",password:!0,placeholder:__("SMTP Password"),title:__("SMTP Password")}]}]},{name:__("Settings"),type:"settings",children:[{type:"Label",text:__("Google reCAPTCHA")+" (v2)",helpText:__("Go to %s and register new site to get keys.").replace("%s",'<a href="https://www.google.com/recaptcha/" target="_blank">Google ReCaptcha</a>')},{type:"HorizontalLayout",children:[{type:"TextField",id:"recSiteKey",placeholder:__("Site key"),title:__("Site key"),change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-recSiteKey-change",e)}},{type:"TextField",id:"recSecretKey",placeholder:__("Secret Key"),title:__("Secret Key"),change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-recSecretKey-change",e)}}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Label Style")},{type:"StyleSelector",id:"formLabelStyle",emptyChoice:!0,change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-formLabelStyle-change",e)}}]},{type:"VerticalLayout",children:[{type:"FlowLayout",children:[{type:"CheckBox",label:"",id:"formLabelWidthFixed",change:function(t){t.formLabelWidth.setEnabled(this.getValue()),l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-formLabelWidthFixed-change",e)}},{type:"Label",text:__("Label Column Width"),click:function(e,t){t.formLabelWidthFixed.setValue(!t.formLabelWidthFixed.getValue()),t.formLabelWidthFixed.trigger("change")}}]},{type:c,id:"formLabelWidth",enabled:!1,noFixedWidth:!0,min:0,change:function(){l.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-formLabelWidth-change",e)}}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",label:__("Post form data to this URL instead of sending it via email"),css:{marginBottom:5},id:"enablePostUrl",change:function(e){e.postUrl.setEnabled(e.enablePostUrl.getValue())}},{type:"TextField",id:"postUrl",placeholder:"http://"}]}]}],callbackFunc:function(t){e.fields=t.formFields.getValue(),e.email=t.formFromEmail.getValue(),e.emailFrom=t.formFromSenderEmail.getValue(),e.subject=t.formFromSubject.getValue(),e.formSentMessage=t.formFromSentMessage.getValue(),e.button=t.formFromSubmit.getValue(),e.redirectUrl=t.formRedirectUrl.getValue(),e.smtpEnable=t.smtpEnable.getValue(),e.smtpHost=t.smtpHost.getText(),e.smtpPort=t.smtpPort.getText(),t.smtpEncryptionTLS.getValue()?e.smtpEncryption="tls":t.smtpEncryptionSSL.getValue()?e.smtpEncryption="ssl":e.smtpEncryption=null,e.smtpUsername=t.smtpUsername.getText(),e.smtpPassword=t.smtpPassword.getText(),e.recSiteKey=t.recSiteKey.getText(),e.recSecretKey=t.recSecretKey.getText(),e.maxFileSizeTotal=t.maxFileSizeTotal.getValue(),e.labelStyle=t.formLabelStyle.getValue(),e.labelColWidth=t.formLabelWidthFixed.getValue()&&t.formLabelWidth.getValue()?t.formLabelWidth.getValue():0,e.enablePostUrl=t.enablePostUrl.getValue(),e.postUrl=t.postUrl.getValue(),e.updateStyle(),"function"==typeof e.onApplyCallback&&e.onApplyCallback()}});t.formFields.setValue(this.fields),t.formFromEmail.setValue(this.email),t.formFromSenderEmail.setValue(this.emailFrom),t.formFromSubject.setValue(this.subject),t.formFromSentMessage.setValue(this.formSentMessage),t.formFromSubmit.setValue(this.button),t.formRedirectUrl.setValue(this.redirectUrl),t.smtpEnable.setValue(this.smtpEnable),t.smtpEnable.trigger("change"),t.smtpHost.setText(this.smtpHost?this.smtpHost:""),t.smtpPort.setText(this.smtpPort?this.smtpPort:""),t.smtpEncryptionNone.setValue(!0),t.smtpEncryptionTLS.setValue("tls"===this.smtpEncryption),t.smtpEncryptionSSL.setValue("ssl"===this.smtpEncryption),t.smtpUsername.setText(this.smtpUsername?this.smtpUsername:""),t.smtpPassword.setText(this.smtpPassword?this.smtpPassword:""),t.recSiteKey.setText(this.recSiteKey?this.recSiteKey:""),t.recSecretKey.setText(this.recSecretKey?this.recSecretKey:""),t.maxFileSizeTotal.setValue(this.maxFileSizeTotal?this.maxFileSizeTotal:2),t.formLabelStyle.setValue(this.labelStyle),t.formLabelWidth.setValue(this.labelColWidth?this.labelColWidth:0),t.formLabelWidthFixed.setValue(!!this.labelColWidth),t.formLabelWidthFixed.trigger("change"),t.enablePostUrl.setValue(this.enablePostUrl),t.postUrl.setValue(this.postUrl),t.enablePostUrl.trigger("change")},u.prototype.onSwitchLanguage=function(e){n.Element.prototype.onSwitchLanguage.call(this,e),this.updateStyle(!0,e)},u.prototype.registerProperties=function(){n.Element.prototype.registerProperties.call(this),this.registerProperty({name:"fields",type:s.PropertyType.FormFields}),this.registerProperty({name:"button",type:s.PropertyType.SubmitButtonText}),this.registerProperty({name:"redirectUrl",type:s.PropertyType.FormRedirectUrl}),this.registerProperty({name:"email",type:s.PropertyType.EmailSendTo,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:!this.enablePostUrl}}}),this.registerProperty({name:"emailFrom",type:s.PropertyType.EmailSendFrom,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{placeholder:"no-reply@"+wb_builder.siteDomain,enabled:!this.enablePostUrl}}}),this.registerProperty({name:"subject",type:s.PropertyType.EmailSubject,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:!this.enablePostUrl}}}),this.registerProperty({name:"formSentMessage",type:s.PropertyType.EmailSentAlertMessage}),this.registerProperty({name:"maxFileSizeTotal",type:s.PropertyType.EmailMaxAttachmentsSize}),this.registerProperty({name:"smtpEnable",type:s.PropertyType.SmtpEnabled}),this.registerProperty({name:"smtpHost",type:s.PropertyType.SmtpHost,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}}),this.registerProperty({name:"smtpPort",type:s.PropertyType.SmtpPort,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}}),this.registerProperty({name:"smtpEncryption",type:s.PropertyType.SmtpEncryption,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}}),this.registerProperty({name:"smtpUsername",type:s.PropertyType.SmtpUsername,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}}),this.registerProperty({name:"smtpPassword",type:s.PropertyType.SmtpPassword,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}}),this.registerProperty({name:"enablePostUrl",type:s.PropertyType.EnablePostUrl}),this.registerProperty({name:"postUrl",type:s.PropertyType.PostUrl,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:this.enablePostUrl}}}),this.registerProperty({name:"recSiteKey",type:s.PropertyType.CaptchaSiteKey}),this.registerProperty({name:"recSecretKey",type:s.PropertyType.CaptchaSecretKey}),this.registerProperty({name:"labelStyle",type:s.PropertyType.LabelSiteStyle}),this.registerProperty({name:"labelColWidthFixed",type:s.PropertyType.LabelColumnWidthFixed}),this.registerProperty({name:"labelColWidth",type:s.PropertyType.LabelColumnWidth,dependencies:["labelColWidthFixed"],uiComponentOptions:function(){return{visible:this.labelColWidthFixed}}})},window.WB_Form=u,u}.apply(t,n))||(e.exports=o)},"./WB_GoogleAdSense.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./WB_Dialog.class.js"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js"),i("./lib/ckeditor/ckeditor.js")],void 0===(o=function(e,t,i,n,o,s){"use strict";var r=function(e){e&&this.__construct(e)};return __extends(r,t.Element),e.registerClass("GoogleAdSense",r),r.prototype.noPhotoBg="ico-tb-google-adsense",r.prototype.ifrm=!1,r.prototype.params=!1,r.prototype.bg=!1,r.prototype._htmlDeactivate=!0,Object.defineProperty(r.prototype,"htmlDeactivate",{get:function(){return this._htmlDeactivate},set:function(e){this._htmlDeactivate=e},enumerable:!0,configurable:!0}),r.prototype._customHtml="",Object.defineProperty(r.prototype,"customHtml",{get:function(){return this._customHtml},set:function(e){this._customHtml=e},enumerable:!0,configurable:!0}),r.prototype.__construct=function(e){e.width||(e.width=200,e.height=200),t.Element.call(this,e),this.setErrorMessage(""),this._htmlDeactivate=!0,this.container.css({overflow:"hidden"}),o.inArray(s.CKEDITOR.config.language,["en","lt","ru","es"])&&s.CKEDITOR.config.language,this._customHtml=e.content.html?e.content.html:"",this.updateStyle(!0);var i=this;this.controls.onDblClick((function(){i.comProperties()}))},r.prototype.getIcon=function(){return"ico-pl-adsense"},r.prototype.getDataDefaults=function(){return o.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},r.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={html:this.customHtml?this.customHtml:"",htmlDeactivate:this.htmlDeactivate},e},r.prototype.updateStyle=function(e,i){if(t.Element.prototype.updateStyle.call(this,e,i),this.htmlDeactivate)this.container.html("");else try{this.container.html(this.customHtml?this.customHtml:"")}catch(e){}},r.prototype.changeProperties=function(){var e=this;this.dialog||(this.dialog=new i("Change properties"),this.dialog.setSize(420,!1),this.dialog.fields.html=this.dialog.addElement('<table><tr><td style="width: 130px;">'+__("HTML code")+' <a class="wb_tip"><span><span></span>Generate your ad in your Google AdSense account<br/>and copy & paste it\'s HTML code here.</span>(?)</a>: </td></tr><tr><td><textarea style="width: 380px" cols="40" rows="10" name="html"></textarea></td></tr></table>'),this.dialog.addButton("Ok",(function(){var t=e.dialog.fields,i=e.params;e.system.setPageModified(!0),i.html=o("[name=html]",t.html).val(),e.params=i,e.updateStyle(),e.dialog.hide()})),this.dialog.addButton("Cancel",(function(){e.dialog.hide()})));var t=this.dialog.fields,n=this.params;o("[name=html]",t.html).val(n.html),this.dialog.setVisible(!0)},r.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",fluid:!0,children:[{type:"CheckBox",label:__("Deactivate content while in builder (recomended)"),id:"htmlDeactivate",helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")},{type:"Label",text:__("HTML code"),helpText:__("Generate your ad in your Google AdSense account and copy & paste it's HTML code here."),css:{marginTop:"20px"}},{type:"TextField",id:"customHtml",textArea:!0,fixedWidth:12,css:{height:214,marginBottom:0},placeholder:'<script async src="..."><\/script>\n<ins class="adsbygoogle" ...></ins>\n<script> ... <\/script>'}]}]}],callbackFunc:function(t){e.customHtml=t.customHtml.getValue(),e.htmlDeactivate=t.htmlDeactivate.getValue()}});i.customHtml.setValue(this.customHtml?this.customHtml:""),i.htmlDeactivate.setValue(this.htmlDeactivate)},r.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"htmlDeactivate",type:n.PropertyType.GoogleAdSenseDeactivateInBuilder}),this.registerProperty({name:"customHtml",type:n.PropertyType.GoogleAdSenseSourceCode,uiComponentOptions:{helpText:__("Generate your ad in your Google AdSense account and copy & paste it's HTML code here."),placeholder:'<script async src="..."><\/script>\n<ins class="adsbygoogle" ...></ins>\n<script> ... <\/script>'}})},r}.apply(t,n))||(e.exports=o)},"./WB_GoogleMaps.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js"),i("./GoogleMapsApi.ts")],o=function(e,t,n,o,s,r){var a=i("./ui/GoogleMapsPlacesControl.ts").GoogleMapsPlacesControl,l=i("./ColorPicker.ts").ColorPicker,c=i("./SizeSelector.ts").SizeSelector,u=function(e){e&&this.__construct(e)};u.getThemeDefaultStyle=function(){return[]},u.getThemeLightStyle=function(e){return[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:e||"#cccccc"},{visibility:"on"}]}]},u.getThemeDarkStyle=function(e){return[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:e||"#333333"},{lightness:17}]}]},u.getThemeMonochromeStyle=function(e){return[{featureType:"all",elementType:"geometry",stylers:[{color:e||"#3e44b5"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{gamma:.01},{lightness:20}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{saturation:-31},{lightness:-33},{weight:2},{gamma:.8}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:30},{saturation:30}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:20}]},{featureType:"poi.park",elementType:"geometry",stylers:[{lightness:20},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:10},{saturation:-30}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{saturation:25},{lightness:25}]},{featureType:"water",elementType:"all",stylers:[{lightness:-20}]}]},__extends(u,t.Element),e.registerClass("GoogleMaps",u),u.prototype.noPhotoBg="ico-tb-google-maps",u.prototype.mapDiv=null,u.prototype.map=null,u.prototype.disabledOverlay=null,u.prototype.mapMarker=null,u.prototype._params=!1,Object.defineProperty(u.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"address",{get:function(){return this._params.address},set:function(e){this._params.address=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"zoom",{get:function(){return this._params.zoom},set:function(e){this._params.zoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mapTypeId",{get:function(){return this._params.mapTypeId},set:function(e){this._params.mapTypeId=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"key",{get:function(){return this._params.key},set:function(e){this._params.key=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"theme",{get:function(){return this._params.theme},set:function(e){this._params.theme=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"color",{get:function(){return this._params.color},set:function(e){this._params.color=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showSatellite",{get:function(){return this._params.showSatellite},set:function(e){this._params.showSatellite=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showZoom",{get:function(){return this._params.showZoom},set:function(e){this._params.showZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showStreetView",{get:function(){return this._params.showStreetView},set:function(e){this._params.showStreetView=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showFullscreen",{get:function(){return this._params.showFullscreen},set:function(e){this._params.showFullscreen=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allowDragging",{get:function(){return this._params.allowDragging},set:function(e){this._params.allowDragging=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showRoads",{get:function(){return this._params.showRoads},set:function(e){this._params.showRoads=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showLandmarks",{get:function(){return this._params.showLandmarks},set:function(e){this._params.showLandmarks=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showLabels",{get:function(){return this._params.showLabels},set:function(e){this._params.showLabels=e},enumerable:!0,configurable:!0}),u.prototype.mapAddress=null;var d=!1,h=!1;return u.initCustomErrorHandler=function(){if(!h){h=!0;var e=window.console.error;window.console.error=function(){if(arguments[0]&&"string"==typeof arguments[0]&&arguments[0].indexOf("Google Maps JavaScript API error")>-1&&(d=!0),e.apply)e.apply(window.console,arguments);else{var t=Array.prototype.slice.apply(arguments).join(" ");e(t)}}}},u.prototype.__construct=function(e){u.initCustomErrorHandler(),e.width||(e.width=602,e.height=327),t.Element.call(this,e),this.map=null,this.mapMarker=null;var i=this;r.GoogleMapsApi.loadGoogleMapsApi([function(){i.updateStyle()}]);var n={text:e.content.address?e.content.address:wb_builder.mapsConfig.address?wb_builder.mapsConfig.address:""},o=e.content.ll?e.content.ll:wb_builder.mapsConfig.ll?wb_builder.mapsConfig.ll:"";o&&(o=o.split(","),n.latLng={lat:1*o[0],lng:1*o[1]}),this._params={address:n,zoom:e.content.zoom?1*e.content.zoom:16,mapTypeId:e.content.mapTypeId?e.content.mapTypeId:null,key:e.content.key?e.content.key:null,theme:e.content.theme?e.content.theme:"default",color:e.content.color?e.content.color:"#eeeeee",showSatellite:!("showSatellite"in e.content)||e.content.showSatellite,showZoom:!("showZoom"in e.content)||e.content.showZoom,showStreetView:!("showStreetView"in e.content)||e.content.showStreetView,showFullscreen:!("showFullscreen"in e.content)||e.content.showFullscreen,allowDragging:!("allowDragging"in e.content)||e.content.allowDragging,showRoads:!("showRoads"in e.content)||e.content.showRoads,showLandmarks:!("showLandmarks"in e.content)||e.content.showLandmarks,showLabels:!("showLabels"in e.content)||e.content.showLabels},this.cover.on("click mousemove",(function(e){if(i.disabledOverlay){"click"===e.type&&s(".pac-container.pac-logo").remove();var t=e.pageX,n=e.pageY,o=!1;i.disabledOverlay.find("a").each((function(){var i=s(this),r=i.offset(),a=i.width(),l=i.height();if(t>=r.left&&t<=r.left+a&&n>=r.top&&n<=r.top+l)return"click"===e.type&&i.eq(0).trigger("click"),o=!0,!1})),"mousemove"===e.type&&i.cover.css("cursor",o?"pointer":"default")}})),this.updateStyle(!0),this.elem.bind("resizestop",(function(){i.updateStyle(!1,null,!0)}))},u.prototype.getIcon=function(){return"fa fa-map-o"},u.prototype.getDataDefaults=function(){return s.extend(t.Element.prototype.getDataDefaults.call(this),{minHeight:24})},u.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this),i=void 0;return this._params.address.latLng&&(i=this._params.address.latLng.lat+","+this._params.address.latLng.lng),e.content={address:this.params.address.text,ll:i,zoom:this.params.zoom,mapTypeId:this.params.mapTypeId,key:this.params.key,theme:this.params.theme,color:this.params.color,showSatellite:this.params.showSatellite,showZoom:this.params.showZoom,showStreetView:this.params.showStreetView,showFullscreen:this.params.showFullscreen,allowDragging:this.params.allowDragging,showRoads:this.params.showRoads,showLandmarks:this.params.showLandmarks,showLabels:this.params.showLabels,apiKeyError:!!d},e},u.prototype.updateNoKeyMsg=function(){if(!this.isElementPreview)if(this.params.key||wb_builder.mapsConfig.googleMapsClientApiKey)this.disabledOverlay&&this.disabledOverlay.hide();else{var e=this;if(!this.disabledOverlay){var t=__("Get %sAPI key from Google%s and insert it to %splugin properties%s to enable maps on your website.").split("%s"),i=t[0],n=t.length>0&&t[1]?t[1]:null,o=t.length>1&&t[2]?t[2]:null,r=t.length>2&&t[3]?t[3]:null,a=t.length>3&&t[4]?t[4]:null;i&&n&&o&&r&&a||(i="Get ",n="API key from Google",o=" and insert it to ",r="plugin properties",a=" to enable maps on your website.");var l=s("<a>").text(n).attr("href","javascript:void(0)").on("click",(function(){return window.open("https://developers.google.com/maps/documentation/javascript/get-api-key","_blank"),!1})),c=s("<a>").text(r).attr("href","javascript:void(0)").on("click",(function(){return e.comProperties(),!1}));this.disabledOverlay=s('<div class="wb_google_maps_overlay">').append(i).append(l).append(o).append(c).append(a)}setTimeout((function(){e.disabledOverlay.appendTo(e.mapDiv),e.disabledOverlay.show()}),250)}},u.prototype.updateStyle=function(e,i,n){t.Element.prototype.updateStyle.call(this,e,i);var o=this.params;"object"!=typeof o&&(o={});var r=o.address;o.zoom=o.zoom?1*o.zoom:0,o.mapTypeId=o.mapTypeId?o.mapTypeId:null,o.width=o.width?o.width:Math.round(this.getWidth()),o.height=o.height?o.height:Math.round(this.getHeight());var a=this,l=window.google;if(l){n&&(this.map=null,this.mapDiv.detach(),this.mapDiv=null),this.map||(this.mapDiv||(this.mapDiv=s("<div>").css({width:"100%",height:"100%"}).appendTo(this.container)),o.mapTypeId||(o.mapTypeId=l.maps.MapTypeId.ROADMAP),setTimeout((function(){var e=new l.maps.LatLng(0,0);a.map=new l.maps.Map(a.mapDiv.get(0),{zoom:0,center:e,mapTypeId:l.maps.MapTypeId.ROADMAP,mapTypeControl:o.showSatellite,zoomControl:o.showZoom,streetViewControl:o.showStreetView,fullscreenControl:o.showFullscreen,draggable:o.allowDragging,styles:a.getStyles(o)}),a.mapMarker=new l.maps.Marker({position:e,clickable:!1,map:a.map})}),50),this.updateNoKeyMsg());var c=function(){if(!a.map)return void setTimeout(c,10);a.map.setZoom(1*o.zoom);let e=new l.maps.LatLng(r&&r.latLng?r.latLng:{lat:40.689247,lng:-74.044502});a.map.setCenter(e),a.mapMarker.setPosition(e),a.map.setMapTypeId(o.mapTypeId),a.map.setOptions({mapTypeControl:o.showSatellite,zoomControl:o.showZoom,streetViewControl:o.showStreetView,fullscreenControl:o.showFullscreen,draggable:o.allowDragging,styles:a.getStyles(o)})};setTimeout(c,50),this.mapDiv.css("display","block")}else this.mapDiv&&this.mapDiv.css("display","none");this.elem.trigger("resize")},u.getThemeStyle=function(e,t){return"light"===e?u.getThemeLightStyle(t):"dark"===e?u.getThemeDarkStyle(t):"monochrome"===e?u.getThemeMonochromeStyle(t):u.getThemeDefaultStyle()},u.prototype.getStyles=function(e,t){var i=!0,n=!0,o=!0,s="default",r=null;e&&"object"==typeof e?(i=e.showRoads,n=e.showLandmarks,o=e.showLabels,s=e.theme,r=e.color):t&&"object"==typeof t&&(i=t.gmapShowRoads.getValue(),n=t.gmapShowLandmarks.getValue(),o=t.gmapShowLabels.getValue(),s=t.gmapTheme.getValue(),r=t.gmapColor.getValue());var a=[{featureType:"road",stylers:[{visibility:i?"on":"off"}]},{featureType:"poi",stylers:[{visibility:n?"on":"off"}]},{elementType:"labels",stylers:[{visibility:o?"on":"off"}]}];return u.getThemeStyle(s,r).concat(a)},u.prototype.comProperties=function(){var e,i=window.google,o=this,s=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:386},tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("API Key"),helpText:__("Get API Key from %s").replace("%s",'<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">https://developers.google.com/maps/documentation/javascript<br/>/get-api-key</a><br /><br /><div style="text-align: left;">'+__("Make sure that the following APIs are enabled for your key")+':<ul style="padding-left: 22px;"><li>Maps Elevation API</li><li>Maps JavaScript API</li><li>Places API</li><li>Geocoding API</li></ul></div>')},{type:"TextField",id:"gmapKey",placeholder:__("Example")+": AGySLaWeMhg9uBek_wDG-xCA3p33eTZ-vazFRnh",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+o.getClassType()+"-prop-gmapKey-change",o)}}]},{type:"HorizontalLayout",columnWeights:[8,4],css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Address"),helpText:__("The same as in Google Maps")},{type:a,id:"gmapAddress",placeholder:"Liberty Island, New York, NY 10004",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+o.getClassType()+"-prop-gmapAddress-change",o),"function"==typeof e&&e()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Zoom level"),helpText:__("ex. 4")},{type:c,id:"gmapZoomLevel",change:function(){n.Service.HelpSystemPlayer.notify("item-plugin-"+o.getClassType()+"-prop-gmapZoomLevel-change",o)}}]}]},{type:"Label",text:__("Drag marker to set your location"),css:{marginTop:15}},{type:"CustomContainer",id:"gmap",init:function(){var t,n,r=!1,a=this._elem.get(0);e=function(){var e=s.gmapAddress.getValue(),o={lat:"40.689247",lng:"-74.044502"};e.latLng?(t.setCenter(new i.maps.LatLng(e.latLng)),n.setPosition(new i.maps.LatLng(e.latLng))):(t.setCenter(new i.maps.LatLng(o)),n.setPosition(new i.maps.LatLng(o)))},this.getMapTypeId=function(){return t.getMapTypeId()},this.setMapTypeId=function(e){e&&t.setMapTypeId(e)},this.setZoom=function(e){t.setZoom(1*e)},this.initOnView=function(){if(!r){r=!0,this.css({width:this._elem.width()});var l=new i.maps.LatLng(0,0);t=new i.maps.Map(a,{zoom:0,center:l,mapTypeId:i.maps.MapTypeId.ROADMAP,streetViewControl:!1}),n=new i.maps.Marker({position:l,draggable:!0,clickable:!1,optimized:!1,map:t}),i.maps.event.addListener(n,"dragend",(function(){var t=this.getPosition();s.gmapAddress.setValue({latLng:{lat:t.lat(),lng:t.lng()}}),e()})),i.maps.event.addListener(t,"zoom_changed",(function(){s.gmapZoomLevel.setValue(this.getZoom())})),s.gmapZoomLevel.on("change",(function(){t.setZoom(1*s.gmapZoomLevel.getValue())})),s.gmapShowSatellite.on("change",(function(){t.setOptions({mapTypeControl:s.gmapShowSatellite.getValue()})})),s.gmapShowZoom.on("change",(function(){t.setOptions({zoomControl:s.gmapShowZoom.getValue()})})),s.gmapShowStreetView.on("change",(function(){t.setOptions({streetViewControl:s.gmapShowStreetView.getValue()})})),s.gmapShowFullscreen.on("change",(function(){t.setOptions({fullscreenControl:s.gmapShowFullscreen.getValue()})})),s.gmapAllowDragging.on("change",(function(){t.setOptions({draggable:s.gmapAllowDragging.getValue()})})),s.gmapShowRoads.on("change",(function(){t.setOptions({styles:o.getStyles(null,s)})})),s.gmapShowLandmarks.on("change",(function(){t.setOptions({styles:o.getStyles(null,s)})})),s.gmapShowLabels.on("change",(function(){t.setOptions({styles:o.getStyles(null,s)})})),s.gmapTheme.on("change",(function(){t.setOptions({styles:o.getStyles(null,s)})})),s.gmapColor.on("change",(function(){t.setOptions({styles:o.getStyles(null,s)})}))}}},styleClass:"wb_gmap",css:{height:234,border:"1px solid #aaaaaa"}},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Theme")},{type:"DropdownBox",id:"gmapTheme",options:[{id:"default",name:__("Default")},{id:"light",name:__("Light")},{id:"dark",name:__("Dark")},{id:"monochrome",name:__("Monochrome")}],change:function(e){e.colorBlock.setVisible("default"!==this.getValue())}}]},{type:"VerticalLayout",id:"colorBlock",children:[{type:"Label",text:__("Color")},{type:l,id:"gmapColor",noTransparent:!0}]}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"CheckBox",id:"gmapShowSatellite",label:__("Show map and satellite control")},{type:"CheckBox",id:"gmapShowZoom",label:__("Show zoom control")},{type:"CheckBox",id:"gmapShowStreetView",label:__("Show Street View control")},{type:"CheckBox",id:"gmapShowFullscreen",label:__("Show full screen control")},{type:"CheckBox",id:"gmapAllowDragging",label:__("Allow dragging")}]},{type:"VerticalLayout",children:[{type:"CheckBox",id:"gmapShowRoads",label:__("Show roads")},{type:"CheckBox",id:"gmapShowLandmarks",label:__("Show landmarks")},{type:"CheckBox",id:"gmapShowLabels",label:__("Show labels")}]}]}]}],callbackFunc:function(e){o.address=e.gmapAddress.getValue(),o.zoom=e.gmapZoomLevel.getValue(),o.mapTypeId=e.gmap.getMapTypeId(),o.key=e.gmapKey.getValue(),o.theme=e.gmapTheme.getValue(),o.color=e.gmapColor.getValue(),o.showSatellite=e.gmapShowSatellite.getValue(),o.showZoom=e.gmapShowZoom.getValue(),o.showStreetView=e.gmapShowStreetView.getValue(),o.showFullscreen=e.gmapShowFullscreen.getValue(),o.allowDragging=e.gmapAllowDragging.getValue(),o.showRoads=e.gmapShowRoads.getValue(),o.showLandmarks=e.gmapShowLandmarks.getValue(),o.showLabels=e.gmapShowLabels.getValue(),o.updateNoKeyMsg()},open:function(t){t.gmap.initOnView(),t.gmap.setZoom(t.gmapZoomLevel.getValue()),t.gmapAddress.setValue(o.address),t.gmap.setMapTypeId(o.mapTypeId),t.gmapTheme.trigger("change"),t.gmapColor.trigger("change"),t.gmapShowSatellite.trigger("change"),t.gmapShowZoom.trigger("change"),t.gmapShowStreetView.trigger("change"),t.gmapShowFullscreen.trigger("change"),t.gmapAllowDragging.trigger("change"),t.gmapShowRoads.trigger("change"),t.gmapShowLandmarks.trigger("change"),t.gmapShowLabels.trigger("change"),e()}});s.gmapAddress.setValue(this.address),s.gmapZoomLevel.setValue(this.zoom),s.gmapKey.setValue(this.key),s.gmapTheme.setValue(this.theme),s.gmapColor.setValue(this.color),s.gmapShowSatellite.setValue(this.showSatellite),s.gmapShowZoom.setValue(this.showZoom),s.gmapShowStreetView.setValue(this.showStreetView),s.gmapShowFullscreen.setValue(this.showFullscreen),s.gmapAllowDragging.setValue(this.allowDragging),s.gmapShowRoads.setValue(this.showRoads),s.gmapShowLandmarks.setValue(this.showLandmarks),s.gmapShowLabels.setValue(this.showLabels),s.gmapTheme.trigger("change")},u.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"mapTypeId",type:o.PropertyType.GoogleMapType,dependencies:["params"]}),this.registerProperty({name:"address",type:o.PropertyType.GoogleMapAddress,dependencies:["params"],uiComponentOptions:{configSuplier:function(){return{zoom:this._params.zoom,mapTypeId:this._params.mapTypeId,apiKeyError:d}}}}),this.registerProperty({name:"zoom",type:o.PropertyType.MapZoom,dependencies:["params"]}),this.registerProperty({name:"key",type:o.PropertyType.ApiGoogleMapsKey,dependencies:["params"]}),this.registerProperty({name:"theme",type:o.PropertyType.GoogleMapTheme,dependencies:["params"]}),this.registerProperty({name:"color",type:o.PropertyType.MapColor,dependencies:["params","theme"],uiComponentOptions:function(){return{visible:"monochrome"===this.theme}}}),this.registerProperty({name:"showSatellite",type:o.PropertyType.MapShowSatelliteControl,dependencies:["params"]}),this.registerProperty({name:"showZoom",type:o.PropertyType.MapShowZoomControl,dependencies:["params"]}),this.registerProperty({name:"showStreetView",type:o.PropertyType.MapShowStreetViewControl,dependencies:["params"]}),this.registerProperty({name:"showFullscreen",type:o.PropertyType.MapShowFullScreenControl,dependencies:["params"]}),this.registerProperty({name:"allowDragging",type:o.PropertyType.MapAllowDragging,dependencies:["params"]}),this.registerProperty({name:"showRoads",type:o.PropertyType.MapShowRoads,dependencies:["params"]}),this.registerProperty({name:"showLandmarks",type:o.PropertyType.MapShowLandmarks,dependencies:["params"]}),this.registerProperty({name:"showLabels",type:o.PropertyType.MapShowLabels,dependencies:["params"]})},u}.apply(t,n),void 0===o||(e.exports=o)},"./WB_ImagePicker.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./Service.ts"),i("./ui/ThumbEditorControl.ts"),i("./util/TextUtil.ts"),i("./util/VideoThumbGenerator.ts")],void 0===(o=function(e,t,i,n,o){"use strict";var s=function(e,t,i,n,o,s,r){this.__construct(e,t,i,n,o,s,r)};return s.prototype.elem=null,s.prototype.image=null,s.prototype.icon=null,s.prototype.libraryDlg=null,s.prototype.counter=null,s.prototype.src=null,s.prototype.images=null,s.prototype.imagesInfo=null,s.prototype.mode="image",s.prototype.thumbSize=60,s.prototype.multiselect=!1,s.prototype.mediatabs=!1,s.prototype.customContent=null,s.prototype.fontAwesomeTab=!1,s.prototype.usePictureManager=!1,s.prototype.openCallback=null,s.prototype.closeCallback=null,s.prototype.callback=null,s.prototype.valueFileType=null,s.prototype.thumbCtrl=null,s.prototype._enabled=!0,s.prototype.__construct=function(n,o,s,r,a,l,c){this.callback=c,n&&(this.mode=n),!o||isNaN(1*o)?o=60:o*=1,this.thumbSize=o,this.multiselect=!!s,r&&(this.mediatabs=r),l&&(this.usePictureManager=l,this.multiselect=l),this.fontAwesomeTab=!(!a||l)&&a,this.elem=e("<div>").addClass("wb-image-picker"),this.images=[],this.imagesInfo=[];var u=this;this.icon=e("<i>").addClass("fa");var d=function(){if("function"==typeof u.openCallback&&u.openCallback(),u.usePictureManager&&u.images.length)t.Service.GalleryPictureManager.setMediaLibraryOptions({showMediaTabs:u.mediatabs,customContentCallback:u.customContent}),t.Service.GalleryPictureManager.setValue(u.images),t.Service.GalleryPictureManager.setApplyCallback((function(){u.setValues(t.Service.GalleryPictureManager.getValue()),t.Service.GalleryPictureManager.setVisible(!1),u.onValueChanged()})),t.Service.GalleryPictureManager.setCloseCallback((function(){"function"==typeof u.closeCallback&&u.closeCallback()})),t.Service.GalleryPictureManager.setVisible(!0);else{u.libraryDlg=t.Service.mediaLibrary.open(__("Select media"),u.multiselect,u.mode,u.mediatabs,u.fontAwesomeTab,u.customContent),u.libraryDlg.setOnClose((function(){"function"==typeof u.closeCallback&&u.closeCallback()})),u.libraryDlg.addButton(__("Cancel")),u.libraryDlg.addButton(__("Select"),(function(){var e=u.libraryDlg.getSelectedFiles(!0);u.setValueFileType(u.libraryDlg.getSelectedFileType()),u.multiselect?u.setValues(e):u.setImage(e.length>0?e[0]:null),u.libraryDlg.hide(),u.usePictureManager&&u.images.length?d():u.onValueChanged()}),!0);var e="video"===u.getValueFileType()?"video":"image";u.libraryDlg.setUrlType(e),u.libraryDlg.setSelectedFiles(u.images,e),u.libraryDlg.show()}return!1};this.thumbCtrl=(new i.ThumbEditorControl).onEdit((function(){u._enabled&&d()})).onRemove((function(){if(u._enabled)return u.setImage(null),u.setValues([]),u.onValueChanged(),!1})),this.thumbCtrl.getPreviewElem().append(this.icon),this.elem.append(this.thumbCtrl.getElem()),this.reloadElem()},s.prototype.reloadElem=function(){var e;this.thumbCtrl.setSize(this.thumbSize>=140?i.ThumbSize.Big:this.thumbSize<60?i.ThumbSize.Small:i.ThumbSize.Normal),e=this.multiselect?this.images.length?this.images.length+" "+__("picture(s) selected"):"image"===this.mode?__("Click to add picture(s)"):__("Click to add file(s)"):this.images.length?"":"image"===this.mode||"favicon"===this.mode?__("Click to select picture"):__("Click to select file"),this.thumbCtrl.setMessage(e)},s.prototype.setEnabled=function(e){this._enabled=!!e,this.thumbCtrl.setEnabled(this._enabled)},s.prototype.setOnOpen=function(e){return this.openCallback=e,this},s.prototype.setOnClose=function(e){return this.closeCallback=e,this},s.prototype.setOnChange=function(e){return this.callback=function(){e(this.getValue())},this},s.prototype.getValues=function(e){if(e)return this.imagesInfo;for(var t=[],i=0;i<this.list.length;i++)i in this.imagesInfo&&("faIcon"in this.imagesInfo[i]?t.push(this.imagesInfo[i]):t.push(this.imagesInfo[i].file));return t},s.prototype.setValues=function(t){var i;this.list=t,this.images=[],this.imagesInfo=[],this.src=null;for(var n=0;n<t.length;n++){if("object"==typeof t[n]&&"faIcon"in t[n])i=e.extend({},t[n]),this.imagesInfo.push(i);else{var o="object"==typeof t[n]?t[n].file:t[n],s=o&&"none"!==o?o:null;i=s?wb_builder.makeRelUrl(s):null,this.imagesInfo.push(e.extend({},t[n],{file:i}))}this.images.push(i),this.src||(this.src=i)}this.reloadElem(),"function"==typeof this.callback&&this.callback.call(this)},s.prototype.getValue=function(){return this.src},s.prototype.getValueFileType=function(){return this.valueFileType},s.prototype.setValueFileType=function(e){this.valueFileType=e},s.prototype.setValue=function(i,s){this.images=[],this.imagesInfo=[];var r=i&&"object"==typeof i?i:{file:i,width:0,height:0,size:0},a="";if("faIcon"in r)this.src=e.extend({},r),a=r.faIcon,this.icon.attr("class","fa fa-"+r.faIcon),(h=this.thumbCtrl.getPreviewElem())[0].style.backgroundImage="none",this.icon.css({color:"#222","font-size":this.thumbSize-20,height:this.thumbSize-20,top:10}),this.icon.css("display",this.src?"block":"none"),this.src&&(this.images.push(this.src),this.imagesInfo.push(this.src));else{var l=r.file&&"none"!==r.file?r.file:null;this.src=l?wb_builder.makeRelUrl(l):null,/^gallery\//i.test(this.src)&&(this.src=decodeURIComponent(this.src)),this.src&&(this.images.push(this.src),this.imagesInfo.push(e.extend({},r,{file:this.src}))),a=(a=(a=l?l.split("/"):"")?a[a.length-1]:"").split("%20").join(" ");var c=this.src?wb_builder.makeLocalUrl(this.src):"",u=this.getValueFileType()||t.Service.mediaLibrary.getFileType(c),d=t.Service.mediaLibrary.getIconClass(u),h=this.thumbCtrl.getPreviewElem();"image"===u?(h[0].style.backgroundImage="none"!==c?"url('"+n.urlEncode(c,!0)+"')":"none",this.icon.hide()):d&&(this.icon.attr("class",d),h[0].style.backgroundImage="none",c&&"none"!==c&&o.lookupThumb(c,h).done((function(e){h[0].style.backgroundImage="url('"+n.urlEncode(e,!0)+"')"})),this.icon.css({color:"","font-size":"",height:"",top:""}),this.icon.show())}var p=this.thumbCtrl.getPreviewElem();p.attr("title",a),p.data("__WB_TOOLTIP__")&&(p.tooltip("destroy"),p.data("__WB_TOOLTIP__",!1)),p.tooltip(),p.data("__WB_TOOLTIP__",!0),this.reloadElem(),s||"function"!=typeof this.callback||this.callback.call(this)},s.prototype.getImage=function(){return this.getValue()},s.prototype.setImage=function(e){this.setValue(e)},s.prototype.setMode=function(e){this.mode!==e&&(this.mode=e,this.reloadElem())},s.prototype._componentWrapper=null,s.prototype.bindings=null,s.prototype.bindingsBySubType=null,s.prototype.dependencyBindings=null,s.prototype.propertyType=null,s.prototype._revalidating=!1,s.supportsMultipleObjectBindings=function(){return!1},s.prototype.onValueChanged=function(){if(this.bindings.length&&!this._revalidating)for(var e=0;e<this.bindings.length;e++)this.bindings[e].setValue(this.multiselect?this.getValues():this.getImage(),!0)},s.prototype.setComponentOptions=function(e){if("usePictureManager"in e&&(this.usePictureManager=e.usePictureManager,this.usePictureManager&&(e.multiselect=!0,e.fontAwesomeTab=!1)),"mediatabs"in e&&(this.mediatabs=e.mediatabs),"fontAwesomeTab"in e&&(this.fontAwesomeTab=e.fontAwesomeTab),"mode"in e||"thumbSize"in e||"multiselect"in e){var t=e.mode||this.mode,i=e.thumbSize||this.thumbSize,n=e.multiselect||this.multiselect;t===this.mode&&i===this.thumbSize&&n===this.multiselect||(this.mode=t,this.thumbSize=i,this.multiselect=n,this.reloadElem())}},s.prototype.setCombinedBindingsValue=function(e){var t=e.value;this.multiselect?(t?("object"!=typeof t||"faIcon"in t)&&(t=[t]):t=[],this.setValues(t)):(t&&("object"!=typeof t||"faIcon"in t||(t=t.length?t[0]:null)),this.setImage(t))},s}.apply(t,n))||(e.exports=o)},"./WB_LangInputControl.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./TextField.ts"),i("./TextAreaControl.ts")],void 0===(o=function(e,t,i){"use strict";function n(e,t,i,n,o){"%inherit%"!==e&&this.__construct(e,t,i,n,o)}return n.prototype.elem=null,n.prototype._elem=null,n.prototype._elemBtn=null,n.prototype._elemList=null,n.prototype.name=!1,n.prototype.placeholder=!1,n.prototype.zIndex=!1,n.prototype.isTextarea=!1,n.prototype.resizable=!1,n.prototype.events=null,n.prototype.simpleControl=null,n.prototype.onChange=null,n.prototype.onReload=null,n.prototype.modified=null,n.prototype.prevValue=null,n.elemList=[],n.reloadAll=function(){for(var e,t=0;e=n.elemList[t];t++)e.reload()},n.closeAll=function(e){for(var t,i=0;t=n.elemList[i];i++)e!==t&&t._elem.removeClass("open")},n.onDocumentClick=function(t){var i=e(t.target),o=null;i.is(".wb-langinput-controll *")&&(i=i.parents(".wb-langinput-controll"),e.each(n.elemList,(function(){i.get(0)!=this.elem.get(0)||(o=this)}))),n.closeAll(o)},n.prototype.__construct=function(t,i,o,s,r){this.name=t,this.isTextarea=o,e.browser.msie||(this.zIndex=1050),this.resizable=void 0===s&&this.isTextarea?"vertical":s,this.onReload=r,this.events={},this.elem=e('<div class="wb-langinput-controll"></div>'),this.init(),i&&this.setValue(i),n.elemList.push(this)},n.prototype.reload=function(){this._elem&&(this._elem.remove(),this._elem.empty(),this._elem=null,this.elem.find(".exc-mark").remove(),this.elem.removeClass("exc-mark-show"),this.simpleControl=null),this.init()},n.normalizeValue=function(e,t){var i,n,o,s=wb_builder.site.languages,r=wb_builder.site.getLastDefLang();if(t=t||r,s.length>0){for(i={},n=0,o=s.length;n<o;n++)i[s[n].code]=null;if("object"==typeof e)for(n in e)i[n]=e[n];else i[t]=e}else i=__tr(e,t,null,!0,!0);return i},n.prototype.addItem=function(t,i,n){var o,s=this;if(this.simpleControl)o=this.simpleControl.input;else{var r=e('<div class="input'+(i?" virtual":"")+(n?" main":"")+'" data-lang="'+t+'">'+(this.isTextarea?'<textarea class="form-control"></textarea>':'<input class="form-control" type="text" />')+'<span class="lang-label">'+t.toUpperCase()+"</span></div>");n?this._elem.prepend(r):this._elemList.append(r),o=r.children("input, textarea").eq(0),this.isTextarea&&(this.resizable?"vertical"!==this.resizable&&"horizontal"!==this.resizable&&"both"!==this.resizable||o.css("resize",this.resizable):o.css("resize","none"))}o.bind("change",(function(t){s.checkFilled(),"function"==typeof s.onChange&&s.onChange.call(s,t,this.value,s.simpleControl?null:e(this).parent().attr("data-lang"))})),o.bind("focus keydown",(function(){s.modified=!0})),this.reloadEvents(o)},n.prototype.removeVirtualItems=function(){this._elemList.children(".input.virtual").remove()},n.prototype.existsItem=function(t){var i=!1;return this.getInputs(!0).each((function(){if(e(this).attr("data-lang")===t)return i=!0,!1})),i},n.prototype.init=function(){var n=this,o=wb_builder.site.languages;if(o.length){this._elem=e('<div class="input-group"><div class="input-list dropdown-menu"></div><span class="input-group-btn"><button class="btn btn-default dropdown-toggle" type="button"><span class="caret"></span></button></span></div>'),this._elemList=this._elem.find(".input-list").eq(0),this._elemBtn=this._elem.find("button").eq(0),this._elemBtn.attr("disabled",1===o.length).bind("click",(function(){n._elem.toggleClass("open"),n.fixDropdownPosition()}));for(var s,r=0;s=o[r];r++)this.addItem(s.code,!1,s.isDefault)}else n.isTextarea?this.simpleControl=new i.TextAreaControl(this.name,this.value,this.resizable):(this.simpleControl=new t.TextField(this.value),this.simpleControl.setName(this.name)),this._elem=this.simpleControl.elem,this.addItem();this.elem.append(this._elem),this.setPlaceholder(this.placeholder),this.modified=!1,"function"==typeof this.onReload&&this.onReload.call(this)},n.prototype.setTextarea=function(e){if(this.isTextarea!==e){var t=this.getValue();this.isTextarea=e,this.reload(),this.setValue(t)}},n.prototype.setResizable=function(e){this.resizable!==e&&(this.resizable=e,this.resizable?"vertical"!==this.resizable&&"horizontal"!==this.resizable&&"both"!==this.resizable||this.elem.find("textarea").css("resize",this.resizable):this.elem.find("textarea").css("resize","none"))},n.prototype.getMainInput=function(e){return this.simpleControl?e?this.simpleControl.elem:this.simpleControl.input:this.getInputs(e).eq(0)},n.prototype.reloadEvents=function(e){for(var t in e=e||this.getInputs(),this.events)e.unbind(t,this.events[t]).bind(t,this.events[t])},n.prototype.setEvent=function(e,t){"function"==typeof t&&(this.events[e]=t,this.reloadEvents())},n.prototype.fixDropdownPosition=function(){this._elemList.css({width:this.elem.outerWidth()-this._elemBtn.outerWidth()})},n.prototype.getInputs=function(e,t){return this.simpleControl?this.simpleControl.input:this._elem.find(".input"+(t?'[data-lang="'+t+'"]':"")+(e?"":this.isTextarea?" textarea":" input"))},n.prototype.getWidth=function(){return this.simpleControl?this._elem.outerWidth():this.getMainInput().outerWidth()+26},n.prototype.setWidth=function(e){var t,i,n=this;if(this.simpleControl){if(t=this._elem.outerWidth(),i=this._elem.width(),!t||!i)return void setTimeout((function(){n.setWidth(e)}),20);this._elem.css("width",e-t+i+"px")}else{var o=this.getMainInput();if(t=o.outerWidth(),i=o.width(),!t||!i)return void setTimeout((function(){n.setWidth(e)}),20);this.getInputs().css("width",e-26-t+i+"px")}},n.prototype.setVisibleExcMark=function(e){this.simpleControl||(e?(this.elem.find(".dropdown-toggle").attr("title",__("Missing some translations")).tooltip(),this.elem.addClass("exc-mark-show")):(this.elem.find(".dropdown-toggle").attr("title","").tooltip("destroy"),this.elem.removeClass("exc-mark-show")),this.fixDropdownPosition())},n.prototype.getValue=function(){if(!this.modified)return this.prevValue;if(this.simpleControl)return this.simpleControl.getValue();var t=this,i={};return this.getInputs(!0).each((function(){var n=e(this).attr("data-lang");i[n]=t.getInputs(!1,n).val()})),i},n.prototype.setValue=function(e,t,i){this.prevValue=e;var o=n.normalizeValue(e,t);if(this.simpleControl)this.simpleControl.setValue(o);else{for(var s in i||this.reset(),this.removeVirtualItems(),o)!this.existsItem(s)&&o[s]&&this.addItem(s,!0),t&&t!==s||this.getInputs(!1,s).val(o[s]);this.checkFilled()}},n.prototype.setPlaceholder=function(t,i){t?this.simpleControl?this.getMainInput().attr("placeholder",__tr(t)):this.getInputs().each((function(){var n=e(this).parent().attr("data-lang");e(this).attr("placeholder",__tr(t,n,i?__tr(t,wb_builder.site.getLastDefLang()):""))})):this.getInputs().attr("placeholder","")},n.prototype.setDisabled=function(t){var i=this;t?this.getInputs().each((function(){e(this).attr("disabled","disabled"),i.setVisibleExcMark(!1)})):this.getInputs().each((function(){e(this).removeAttr("disabled"),i.checkFilled()}))},n.prototype.reset=function(){if(this.simpleControl)this.simpleControl.setValue("");else{for(var t,i=this.getInputs(),n=0;t=i[n];n++)e(t).val("");this.setVisibleExcMark(!0)}},n.prototype.checkFilled=function(){var t=!0;this.getInputs().each((function(){var i=e(this);i.is("[disabled]")||i.val()||(t=!1)})),this.setVisibleExcMark(!t)},n.prototype.focus=function(){this.getMainInput().focus()},n}.apply(t,n))||(e.exports=o)},"./WB_Languages.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./ElementRegister.ts"),i("./Element.ts"),i("./Confirm.ts"),i("./WB_ComboBox.class.js"),i("./element/Controls.ts"),i("./BorderControl.ts"),i("./element/PropertyType.ts"),i("./WB_RadioBox.class.js"),i("./util/HistoryUtil.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c,u){"use strict";var d=i("./core/BuilderConfig.ts").wbConfig,h=i("./ui/SiteLanguagesControl.ts").SiteLanguagesControl,p=function(e,t){e&&this.__construct(e,t)};return __extends(p,n.Element),t.registerClass("Languages",p),p.prototype.noPhotoBg="ico-tb-lang",p.prototype._type=null,Object.defineProperty(p.prototype,"type",{get:function(){return this._type},set:function(e){this.setType(e)},enumerable:!0,configurable:!0}),p.prototype._flagSize=null,Object.defineProperty(p.prototype,"flagSize",{get:function(){return this._flagSize},set:function(e){this._flagSize=e},enumerable:!0,configurable:!0}),p.prototype._flagSpacing=null,Object.defineProperty(p.prototype,"flagSpacing",{get:function(){return this._flagSpacing},set:function(e){this._flagSpacing=e},enumerable:!0,configurable:!0}),p.prototype._flagBorder=null,Object.defineProperty(p.prototype,"flagBorder",{get:function(){return this._flagBorder},set:function(e){this._flagBorder=e},enumerable:!0,configurable:!0}),p.prototype._flagBorderActive=null,Object.defineProperty(p.prototype,"flagBorderActive",{get:function(){return this._flagBorderActive},set:function(e){this._flagBorderActive=e},enumerable:!0,configurable:!0}),p.prototype._flagUseSquare=!1,Object.defineProperty(p.prototype,"flagUseSquare",{get:function(){return this._flagUseSquare},set:function(e){this._flagUseSquare=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"siteLanguages",{get:function(){return this.system.site.languages},set:function(e){var t,i=this.system.site.currSelLang,n=!1,o=null;this.system.site.languages.splice(0,this.system.site.languages.length);for(var s=0;s<e.length;s++)t=e[s],this.system.site.languages.push(t),t.isDefault&&this.system.site.setLastDefLang(t.code),t.code===i&&(n=!0),o||(o=t.code);n||(i=this.system.site.getLastDefLang()||o)&&this.system.site.switchLanguage(i)},enumerable:!0,configurable:!0}),p.prototype.previewLanguages=null,p.prototype.previewSelectedLanguage=null,p.prototype.comboBox=null,p.prototype._elem=null,p.elemList=[],p.reloadAll=function(e,t){for(var i,n=0;i=p.elemList[n];n++)i!==t&&i.updateStyle(e)},p.prototype.__construct=function(e,t){if(this.ignoreParentBounds=!0,n.Element.call(this,e,t),this.isElementPreview||this.system.site.languages.length||!t){this.setEmptyMessageText(__("Double click to change languages"));var i=this;this._type=e.content.type?e.content.type:"flags",this.isCommon=void 0===typeof e.isCommon||!!e.isCommon,this.includePages=e.includePages?e.includePages:{},this.forceCompactControls="flags"===this.type,this.isElementPreview&&(this.previewLanguages=e.hasOwnProperty("previewLanguages")?e.previewLanguages:null,this.previewSelectedLanguage=e.hasOwnProperty("previewSelectedLanguage")?e.previewSelectedLanguage:null),this._flagSize=e.content.hasOwnProperty("flagSize")?e.content.flagSize:16,this._flagUseSquare=!!e.content.hasOwnProperty("flagUseSquare")&&e.content.flagUseSquare,this._flagSpacing=e.content.hasOwnProperty("flagSpacing")?e.content.flagSpacing:1,this._flagBorder=e.content.hasOwnProperty("flagBorder")&&e.content.flagBorder?e.content.flagBorder:{differ:!1,weight:1,style:"solid",color:"#EEEEEE",css:{border:"1px solid #EEEEEE"}},this._flagBorderActive=e.content.hasOwnProperty("flagBorderActive")&&e.content.flagBorderActive?e.content.flagBorderActive:{differ:!1,weight:2,style:"solid",color:"#777777",css:{border:"2px solid #777777"}},this.isElementPreview||this.cover.on("mousemove",(function(e){var t=e.clientX,n=e.clientY,o=!1;if("flags"===i.type){if(!i._elem)return;i._elem.find("a").each((function(){var e=this.getBoundingClientRect();if(t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)return o=!0,!1}))}else if("select"===i.type){if(!i.comboBox)return;o=!0}"mousemove"===e.type&&i.cover.css("cursor",o?"pointer":"default")})),this.updateStyle(!0),setTimeout((function(){i.updateStyle(!0)}),50),this.elem.bind("resize",(function(){i.onResize(!1)})),this.elem.bind("resizestop",(function(e,t){i.onResize(!1,!0,e)})),this.isElementPreview||p.elemList.push(this),this.isElementPreview||this.system.site.languages.length||this.comProperties(),this.setType(this.type,!0)}else this.remove({noHistory:!0})},p.prototype.onClick=function(t){n.Element.prototype.onClick.call(this,t);var i=t.clientX,o=t.clientY;if("flags"===this.type){if(!this._elem)return;this._elem.find("a").each((function(){var n=this.getBoundingClientRect();if(i>=n.left&&i<=n.right&&o>=n.top&&o<=n.bottom)return"click"===t.type&&e(this).trigger("click"),!1}))}else if("select"===this.type){if(!this.comboBox)return;"click"===t.type&&this.comboBox.input.trigger("click")}"mousemove"===t.type&&this.cover.css("cursor","pointer")},p.prototype.getDataDefaults=function(){return e.extend(n.Element.prototype.getDataDefaults.call(this),{minWidth:18,minHeight:14})},p.prototype.getIcon=function(){return"fa fa-language"},p.prototype.supportsAutoWidth=function(){return!0},p.prototype.supportsAutoHeight=function(){return!0},p.prototype.serialize=function(){var e=n.Element.prototype.serialize.call(this);return e.content={type:this.type,flagSize:this.flagSize,flagUseSquare:this.flagUseSquare,flagSpacing:this.flagSpacing,flagBorder:this.flagBorder,flagBorderActive:this.flagBorderActive},e},p.prototype.getFlagDimensionData=function(){var e={wrapper:{width:0,height:0},inactiveFlag:{left:0,top:0,width:0,height:0},activeFlag:{left:0,top:0,width:0,height:0}},t=a.getBorderWidth(this.flagBorder,3),i=a.getBorderWidth(this.flagBorderActive,3),n=a.getBorderWidth(this.flagBorder,0),o=a.getBorderWidth(this.flagBorderActive,0),s=this.flagUseSquare?1:.75;return e.inactiveFlag.left=1*this.flagSpacing+(t>=i?0:i-t),e.inactiveFlag.top=1*this.flagSpacing+(n>=o?0:o-n),e.inactiveFlag.width=1*this.flagSize+t+a.getBorderWidth(this.flagBorder,1),e.inactiveFlag.height=Math.round(s*this.flagSize)+n+a.getBorderWidth(this.flagBorder,2),e.activeFlag.left=1*this.flagSpacing+(i>=t?0:t-i),e.activeFlag.top=1*this.flagSpacing+(o>=n?0:n-o),e.activeFlag.width=1*this.flagSize+i+a.getBorderWidth(this.flagBorderActive,1),e.activeFlag.height=Math.round(s*this.flagSize)+o+a.getBorderWidth(this.flagBorderActive,2),e.wrapper.width=2*this.flagSpacing+Math.max(e.inactiveFlag.width,e.activeFlag.width),e.wrapper.height=2*this.flagSpacing+Math.max(e.inactiveFlag.height,e.activeFlag.height),e},p.prototype.getDefaultResizeMode=function(){return"select"===this.type?r.ControlsResizeMode.HORIZONTAL:r.ControlsResizeMode.ALL},p.prototype.setType=function(e,t){(t||this._type!=e)&&(this._type=e,"select"===this._type&&(this.setSize(null,34,t),this._useMinWidth||(t?this._useMinWidth=!0:this.useMinWidth=!0),this._minWidth<51&&(t?this._minWidth=51:this.minWidth=51)),this.updateResizeMode(),this.updateStyle(t))},p.prototype.updateStyle=function(t,i){n.Element.prototype.updateStyle.call(this,t,i),i=i||this.previewSelectedLanguage||this.system.site.currSelLang,this.displayEmptyMessage(!1),this._elem&&(this._elem.remove(),this._elem.empty(),this._elem=null),this.forceCompactControls="flags"===this.type;var o,r,a=this.previewLanguages&&this.previewLanguages.length?this.previewLanguages:this.system.site.languages,l=this;if(a.length){if("flags"===this.type){this.comboBox=null,this._elem=e('<div class="langs_flags langs_flags_noa"></div>');var c=this.getFlagDimensionData();for(o=0;r=a[o];o++){var u=e('<a href="'+d.baseUrl+r.code+'/" '+(r.code===i?'class="active"':"")+'title="'+r.name+'" data-lang="'+r.code+'">'),h=e('<i class="flag-icon-'+d.getCountryCode(r.code)+(this.flagUseSquare?" flag-icon-squared":"")+'">');u.append(h),h.css(r.code===i?this.flagBorderActive.css:this.flagBorder.css),h.css(r.code===i?c.activeFlag:c.inactiveFlag),u.css(c.wrapper),this.isElementPreview||u.bind("click",(function(){l.system.site.switchLanguage(e(this).data("lang"))})),this._elem.append(u)}this.container.append(this._elem)}else if("select"===this.type){var p={};for(o=0;r=a[o];o++)p[r.code]=r.name;this.comboBox=new s(p,i,null,!0),this.isElementPreview||(this.comboBox.onChange=function(e){l.system.site.switchLanguage(l.comboBox.getValue())}),this._elem=this.comboBox.elem,this.container.append(this._elem)}}else this.displayEmptyMessage(!0);this.onResize(t)},p.prototype.onBeforeRemove=function(t){if(n.Element.prototype.onBeforeRemove.call(this,t),!(t.preventRemoval||t.noConfirm||t.batch||"languages"in t.requiredConfirmations)){var i=t;t.requiredConfirmations.languages=function(){var t=e.Deferred();return o.Confirm.showDialog(__("Remove languages"),new c.RadioBoxMany({onlyitem:__("Delete only current item"),all:__("Delete all languages and all language items")},"onlyitem","delete_langs").elem,[{title:__("Cancel")},{title:__("Delete"),cssClass:"btn-danger",func:function(){var e=o.Confirm.dialog.content.find('input[name="delete_langs"]:checked').val();i.deleteAllLanguages="all"===e,t.resolve()}}],480,(function(){t.reject()})),o.Confirm.dialog.setCenterButtons(!0),t.promise()}}},p.prototype.remove=function(e){if(!this.isElementPreview&&e.deleteAllLanguages&&this.system.site.languages.length){for(let t=p.elemList.length-1;t>=0;t--)p.elemList[t].remove({noHistory:e.noHistory});p.elemList=[],e.noHistory||(0===this.system.historyGroupState&&console.error("History is not recording a group. Languages snapshot will be as a separate undo/redo action, which will cause inconsistencies."),u.createSiteLanguagesSnapshotHistoryRecord()),this.system.historyCurentAction||(this.system.site.languages=[],this.system.site.switchLanguage(this.system.site.getLastDefLang()),this.system.site.currSelLang=null,this.system.site.onUpdateLanguages(),this.system.setPageModified(!0))}else n.Element.prototype.remove.call(this,e)},p.prototype.releaseResources=function(e){if(n.Element.prototype.releaseResources.call(this,e),this.isElementPreview)return;let t=p.elemList.indexOf(this);t>=0&&p.elemList.splice(t,1)},p.prototype.setApplyDisabled=function(t){var i=e(this.comDialog.buttons).find(".btn-success");i.length&&(t?i.attr("disabled","disabled"):i.removeAttr("disabled"))},p.prototype.getFlagSizeOptions=function(e){return e?[{id:16,name:"16x16"},{id:20,name:"20x20"},{id:24,name:"24x24"},{id:28,name:"28x28"},{id:32,name:"32x32"},{id:36,name:"36x36"},{id:40,name:"40x40"},{id:44,name:"44x44"},{id:48,name:"48x48"},{id:52,name:"52x52"},{id:56,name:"56x56"},{id:60,name:"60x60"}]:[{id:16,name:"16x12"},{id:20,name:"20x15"},{id:24,name:"24x18"},{id:28,name:"28x21"},{id:32,name:"32x24"},{id:36,name:"36x27"},{id:40,name:"40x30"},{id:44,name:"44x33"},{id:48,name:"48x36"},{id:52,name:"52x39"},{id:56,name:"56x42"},{id:60,name:"60x45"}]},p.prototype.comProperties=function(){var e=this,t=n.Element.prototype.comProperties.call(this,{size:{minBodyHeight:340},tabs:[{children:[{type:"VerticalLayout",id:"langsList",children:[{type:h,id:"languageList",change:function(){var i=t.languageList.getValue();e.setApplyDisabled(i.length<2)}}]}]}],callbackFunc:function(t){e.siteLanguages=t.languageList.getValue(),e.system.site.onUpdateLanguages(),e.system.site.switchLanguage(e.system.site.getLastDefLang()),wb_builder.setPageModified(!0)}});this.comDialog.setTitle(__("Languages")),this.comDialog.tabbedPane.setNavVisible(!1);var i=this.comDialog.onClose;this.comDialog.onClose=function(){"function"==typeof i&&i(),e.system.site.languages.length||e.remove(!1,!0)},t.languageList.setValue(this.siteLanguages),this.setApplyDisabled(this.siteLanguages.length<2)},p.prototype.onSwitchLanguage=function(e){n.Element.prototype.onSwitchLanguage.call(this,e),this.updateStyle(!0,e)},p.prototype.registerProperties=function(){n.Element.prototype.registerProperties.call(this);var e=this.getFlagSizeOptions(!1),t=this.getFlagSizeOptions(!0);this.registerProperty({name:"siteLanguages",type:l.PropertyType.SiteLanguages}),this.registerProperty({name:"type",type:l.PropertyType.LanguageSwitchType}),this.registerProperty({name:"flagSize",type:l.PropertyType.FlagSize,dependencies:["type","flagUseSquare"],uiComponentOptions:function(){return{visible:"flags"===this.type,options:this.flagUseSquare?t:e}}}),this.registerProperty({name:"flagSpacing",type:l.PropertyType.FlagSpacing,dependencies:["type"],uiComponentOptions:function(){return{visible:"flags"===this.type}}}),this.registerProperty({name:"flagBorder",type:l.PropertyType.FlagBorders,dependencies:["type"],uiComponentOptions:function(){return{visible:"flags"===this.type}}}),this.registerProperty({name:"flagBorderActive",type:l.PropertyType.FlagActiveBorder,dependencies:["type"],uiComponentOptions:function(){return{visible:"flags"===this.type}}}),this.registerProperty({name:"flagUseSquare",type:l.PropertyType.FlagSquare,dependencies:["type"],uiComponentOptions:function(){return{visible:"flags"===this.type}}})},p}.apply(t,n))||(e.exports=o)},"./WB_Line.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./ContextMenu.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./element/Controls.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s,r,a){var l=i("./ColorPicker.ts").ColorPicker,c=i("./SizeSelector.ts").SizeSelector,u=function(e){e&&this.__construct(e)};return __extends(u,t.Element),e.registerClass("Line",u),u.styleList=[{name:__("Solid"),value:"solid"},{name:__("Dashed"),value:"dashed"},{name:__("Dotted"),value:"dotted"},{name:__("Double"),value:"double"}],u.sizeList=[{name:"1px",value:"1"},{name:"2px",value:"2"},{name:"3px",value:"3"},{name:"4px",value:"4"}],u.prototype.miOrientation=null,u.prototype.miStyle=null,u.prototype.miSize=null,u.prototype.line=null,u.prototype._orientation=1,Object.defineProperty(u.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation=1*e},enumerable:!0,configurable:!0}),u.prototype._size=3,Object.defineProperty(u.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e},enumerable:!0,configurable:!0}),u.prototype._style="solid",Object.defineProperty(u.prototype,"style",{get:function(){return this._style},set:function(e){this._style=e},enumerable:!0,configurable:!0}),u.prototype._color="#303030",Object.defineProperty(u.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!0,configurable:!0}),u.prototype.backupColor=null,u.prototype.__construct=function(e){e.width||(e.width=600,e.height=100),t.Element.call(this,e),this.line=a("<div></div>"),this.line.css({"font-size":"1px",overflow:"hidden","line-height":"1px",margin:"0",padding:"0",background:"transparent",float:"none",position:"relative"}),this.container.empty().append(this.line),this._orientation="orientation"in e.content&&!isNaN(e.content.orientation)?e.content.orientation:this._orientation,this._size=e.content.size?e.content.size:this._size,this._style=e.content.style?e.content.style:this._style,this._color=e.content.color?e.content.color:this._color},u.prototype.getDataDefaults=function(){return a.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:1,minHeight:1})},u.prototype.getIcon=function(){return"fa fa-minus"},u.prototype.getDefaultResizeMode=function(){return r.ControlsResizeMode.SIDES},u.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={orientation:this.orientation,size:this.size,style:this.style,color:this.color},e},u.prototype.getBackupColor=function(){return this.backupColor},u.prototype.setBackupColor=function(e){this.backupColor=e},u.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:350},tabs:[{children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Orientation")},{type:"RadioBox",id:"lineOrientationVert",label:"|",group:this.id+"_lineOrient",init:function(){this._input.css({marginTop:19}),this.setLabel("").setLabelStyle({width:25,height:50,marginRight:25,display:"inline-block",borderRight:"2px solid #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineOrientationVert-change",e)}},{type:"RadioBox",id:"lineOrientationHoriz",label:"-",group:this.id+"_lineOrient",init:function(){this._input.css({marginTop:19}),this.setLabel("").setLabelStyle({width:50,height:27,marginBottom:23,display:"inline-block",borderBottom:"2px solid #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineOrientationHoriz-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:"RadioBox",id:"lineStyleSolid",label:"-",group:this.id+"_lineStyle",init:function(){this.setLabel("").setLabelStyle({width:100,height:12,marginBottom:8,display:"inline-block",borderBottom:"2px solid #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineStyleSolid-change",e)}},{type:"RadioBox",id:"lineStyleDashed",label:"---",group:this.id+"_lineStyle",init:function(){this.setLabel("").setLabelStyle({width:100,height:12,marginBottom:8,display:"inline-block",borderBottom:"2px dashed #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineStyleDashed-change",e)}},{type:"RadioBox",id:"lineStyleDotted",label:"...",group:this.id+"_lineStyle",init:function(){this.setLabel("").setLabelStyle({width:100,height:12,marginBottom:8,display:"inline-block",borderBottom:"2px dotted #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineStyleDotted-change",e)}},{type:"RadioBox",id:"lineStyleDouble",label:"=",group:this.id+"_lineStyle",init:function(){this.setLabel("").setLabelStyle({width:100,height:12,marginBottom:8,display:"inline-block",borderBottom:"3px double #000000",verticalAlign:"top"})},change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineStyleDouble-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Size")},{type:c,id:"lineSize",change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineSize-change",e)}},{type:"Label",text:__("Color"),css:{marginTop:15}},{type:l,id:"lineColor",change:function(){o.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-lineColor-change",e)}}]}]}]}],callbackFunc:function(t){e.size=t.lineSize.getValue();var i="solid";t.lineStyleSolid.getValue()?i="solid":t.lineStyleDashed.getValue()?i="dashed":t.lineStyleDotted.getValue()?i="dotted":t.lineStyleDouble.getValue()&&(i="double"),e.style=i,e.color=t.lineColor.getValue();var n=0;t.lineOrientationVert.getValue()?n=0:t.lineOrientationHoriz.getValue()&&(n=1),e.orientation=n}});i.lineOrientationVert.setValue(0===this.orientation),i.lineOrientationHoriz.setValue(1===this.orientation),i.lineSize.setValue(this.size),i.lineStyleSolid.setValue("solid"===this.style),i.lineStyleDashed.setValue("dashed"===this.style),i.lineStyleDotted.setValue("dotted"===this.style),i.lineStyleDouble.setValue("double"===this.style),i.lineColor.setValue(this.color)},u.prototype.initContextMenu=function(){if(t.Element.prototype.initContextMenu.call(this),this.menu){var e,i=this,o=this.contextMenuFirstIndex;for(this.miOrientation=new n.ContextMenu(this.id+"_orientation_sub"),this.miOrientation.addItem("vertical",__("Vertical"),(function(){i.orientation=0}),0===this.orientation,!1),this.miOrientation.addItem("horizontal",__("Horizontal"),(function(){i.orientation=1}),1===this.orientation,!1),this.menu.insertItemAt(o++,"orientation",__("Orientation"),this.miOrientation,null,null,null,"glyphicon glyphicon-repeat"),this.miStyle=new n.ContextMenu(this.id+"_style_sub"),e=0;e<u.styleList.length;e++)this.miStyle.addItem("style"+e,u.styleList[e].name,(function(e,t){i.style=t.value}),this.style===u.styleList[e].value,!1,u.styleList[e]);for(this.menu.insertItemAt(o++,"style",__("Style"),this.miStyle,null,null,null,"glyphicon glyphicon-adjust"),this.miSize=new n.ContextMenu(this.id+"_size_sub"),e=0;e<u.sizeList.length;e++)this.miSize.addItem("size"+e,u.sizeList[e].name,(function(e,t){i.size=t.value}),this.size==u.sizeList[e].value,!1,u.sizeList[e]);this.menu.insertItemAt(o++,"size",__("Size"),this.miSize,null,null,null,"glyphicon glyphicon-resize-full"),a(this.menu.insertItemAt(o++,"changeColor",__("Change color"),(function(){}),null,null,null,"glyphicon glyphicon-edit")).ColorPicker({WB_ColorPicker:l,color:i.color,onShow:function(e){i.setBackupColor(i.color)},onHide:function(e){return i.color=i.getBackupColor(),a(e).hide(),!1},onChange:function(e,t,n){i.color="#"+t},onSubmit:function(e,t,n,o){i.color="#"+t,i.setBackupColor(i.color),a(o).ColorPickerHide()},onBeforeShow:function(){a(this).ColorPickerSetColor(i.color)}}),this.menu.addSeparator(o++)}},u.prototype.updateContextMenu=function(e){var i;for(t.Element.prototype.updateContextMenu.call(this,e),i=0;i<u.styleList.length;i++)this.miStyle.setSelected("style"+i,this.style===u.styleList[i].value);for(i=0;i<u.sizeList.length;i++)this.miSize.setSelected("size"+i,this.size==u.sizeList[i].value);this.miOrientation.setSelected("vertical",0===this.orientation),this.miOrientation.setSelected("horizontal",1===this.orientation)},u.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i),0===this._orientation?(this.line.css({borderLeft:this.size+"px "+this.style+" "+this._color}),this.line.css({borderTop:"none"}),this.line.css({margin:"0 0 0 -"+Math.round(this.size/2)+"px",width:1,height:"100%",left:"50%",top:0})):(this.line.css({margin:"-"+Math.round(this.size/2)+"px 0 0 0",width:"100%",height:1,left:0,top:"50%"}),this.line.css({borderLeft:"none"}),this.line.css({borderTop:this.size+"px "+this.style+" "+this._color}))},u.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this);for(var e=[],i=0;i<u.styleList.length;i++){var n=u.styleList[i];e.push({value:n.value,label:a("<div/>").css({width:100,height:12,marginBottom:8,display:"inline-block",borderBottom:"3px "+n.value+" #000000",verticalAlign:"top"}),title:n.name})}this.registerProperty({name:"orientation",type:s.PropertyType.LineOrientation}),this.registerProperty({name:"style",type:s.PropertyType.LineStyle}),this.registerProperty({name:"size",type:s.PropertyType.LineSize}),this.registerProperty({name:"color",type:s.PropertyType.LineColor})},u}.apply(t,n))||(e.exports=o)},"./WB_LinkDialog.class.js":function(e,t,i){var n,o;n=[i("./WB_Dialog.class.js"),i("./Service.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n){"use strict";var o=i("./SizeSelector.ts").SizeSelector,s=function(e,t,i,n,o,s,r,a,l){this.__construct(e,t,i,n,o,s,r,a,l)};return(s.prototype=new e("%inherit%")).constructor=s,s.prototype.libraryDlg=null,s.prototype.linkInfo={},s.prototype.isInfoSet=!1,s.prototype.noEmail=!1,s.prototype.noPhone=!1,s.prototype.noFiles=!1,s.prototype.noLinkTitle=!1,s.prototype.noTarget=!1,s.prototype.noIndexing=!1,s.prototype.noPopup=!1,s.prototype.__construct=function(i,s,r,a,l,c,u,d,h){e.prototype.__construct.call(this,i);var p=this,m=this.fields;this.noEmail=r,this.noPhone=a,this.noFiles=l,this.noLinkTitle=c,this.noTarget=u,this.noIndexing=d,this.noPopup=h;var g=function(){var e=n(this);if("popup"===e.attr("data-subtype")){var t=parseInt(e.attr("data-target"));if(t){var i=wb_builder.site.getPage(t);i&&i.popupMode&&(i.popupWidth&&m.linkPopupWidth.setValue(i.popupWidth),i.popupHeight&&m.linkPopupHeight.setValue(i.popupHeight))}m.linkPopup.setValue(!0),p.linkTypeChange(m)}};this.linkTypeChange=function(e){var t=!!e.linkPopup.getValue();e.linkPopupBlock.setVisible(t),e.linkTarget.setEnabled(!t),e.linkNoFollow.setEnabled(!t),e.linkEmailR.setEnabled(!t),e.linkEmail.setEnabled(!t),e.linkPhoneR.setEnabled(!t),e.linkPhone.setEnabled(!t),e.linkFileR.setEnabled(!t),e.linkFile.setEnabled(!t)},this.setContent(new t.Service.UIBuilder({type:"HorizontalLayout",columnWeights:[7,5],children:[{type:"VerticalLayout",children:[{type:"RadioBox",id:"linkUrlR",label:__("Web Address"),group:"linkType",css:{marginBottom:5},change:function(){p.changeType("url")}},{type:"TextField",id:"linkUrl",value:"https://",change:function(){/^www\./.test(this.getValue())&&this.setValue("http://"+this.getValue()),m.linkUrlR.setValue(!0),p.changeType("url")}},{type:"RadioBox",id:"linkPageR",label:__("Page on your Website"),group:"linkType",css:{marginTop:15,marginBottom:5},change:function(){p.changeType("page")}},{type:"MenuItemSelector",id:"linkPage",anchorMode:!0,change:function(){m.linkPageR.setValue(!0),p.changeType("page"),g.call(this)}},{type:"RadioBox",id:"linkEmailR",visible:!this.noEmail,label:__("Email Address"),group:"linkType",css:{marginTop:15,marginBottom:5},change:function(){p.changeType("email")}},{type:"TextField",id:"linkEmail",visible:!this.noEmail,change:function(){m.linkEmailR.setValue(!0),p.changeType("email")}},{type:"RadioBox",id:"linkPhoneR",visible:!this.noPhone,label:__("Phone Number"),group:"linkType",css:{marginTop:15,marginBottom:5},change:function(){p.changeType("phone")}},{type:"TextField",id:"linkPhone",visible:!this.noPhone,change:function(){m.linkPhoneR.setValue(!0),p.changeType("phone")}},{type:"RadioBox",id:"linkFileR",visible:!this.noFiles,label:__("File from your Website"),group:"linkType",css:{marginTop:15,marginBottom:5},change:function(){p.changeType("file")}},{type:"LinkEditSelector",id:"linkFile",visible:!this.noFiles,emptyMsg:__("No files selected"),click:function(){p.changeType("file"),m.linkFileR.setValue(!0),p.libraryDlg=t.Service.mediaLibrary.open(__("Select media"),!1,"all"),p.libraryDlg.addButton(__("Cancel")),p.libraryDlg.addButton(__("Select"),(function(){var e=p.libraryDlg.getSelectedFiles();e.length>0&&m.linkFile.setValue(e[0]),p.libraryDlg.hide()}),!0);var e=m.linkFile.getValue();return e&&e.length&&p.libraryDlg.setSelectedFiles([m.linkFile.getValue()]),p.libraryDlg.show(),!1}},{type:"Label",text:__("Link Title"),visible:!this.noLinkTitle,helpText:__("Link Title will pop up when you hover over the link"),css:{marginTop:15}},{type:"TextField",id:"linkTitle",visible:!this.noLinkTitle}]},{type:"VerticalLayout",children:[{type:"CheckBox",id:"linkTarget",visible:!this.noTarget,label:__("Open in New Window")},{type:"CheckBox",id:"linkNoFollow",visible:!this.noIndexing,label:__('"nofollow" link'),helpText:'<div style="width: 180px;">'+__("Enable this option if you want search systems not to index the link.")+"<br />"+__("You can read more about it %shere%s.").replace("%s",'<a href="https://en.wikipedia.org/wiki/Nofollow" target="_blank" style="display: inline-block; max-width: 100%; word-break: break-all;">').replace("%s","</a>")+"</div>",css:{marginTop:5}},{type:"CheckBox",id:"linkPopup",visible:!this.noPopup,label:__("Open as Popup"),helpText:"",change:p.linkTypeChange,css:{marginTop:5}},{type:"FlowLayout",id:"linkPopupBlock",visible:!this.noPopup,css:{marginTop:5},children:[{type:"VerticalLayout",css:{},children:[{type:o,id:"linkPopupWidth",min:100}]},{type:"VerticalLayout",css:{},children:[{type:"Label",text:" x ",css:{marginTop:7,fontWeight:"normal"}}]},{type:"VerticalLayout",css:{},children:[{type:o,id:"linkPopupHeight",min:100}]}]}]}]},this.fields),!0),s&&s.type?this.setInfo(s):(this.isInfoSet=!1,setTimeout((function(){p.isInfoSet||p.changeType("url",!0)}),100))},s.prototype.changeType=function(e,t){this.isInfoSet=!t,this.linkInfo.type=e,"page"===e?this.fields.linkPageR.setValue(!0):"email"===e?this.fields.linkEmailR.setValue(!0):"file"===e?this.fields.linkFileR.setValue(!0):"phone"===e?this.fields.linkPhoneR.setValue(!0):(this.linkInfo.type="url",this.fields.linkUrlR.setValue(!0))},s.prototype.getType=function(){return this.linkInfo.type},s.prototype.setInfo=function(e){if(this.clearInfo(),e.type){if(this.changeType(e.type),e.url){var t="link"+e.type.substring(0,1).toUpperCase()+e.type.substring(1);this.fields[t]&&("page"===e.type&&e.menuUID?this.fields[t].setExtendedValue({menuUID:e.menuUID,id:parseInt(e.url,10),anchor:e.anchor}):this.fields[t].setValue((""+e.url).trim()))}e.title&&this.fields.linkTitle.setValue(e.title),e.target&&this.fields.linkTarget.setValue(e.target),e.nofollow&&this.fields.linkNoFollow.setValue(e.nofollow),e.popup&&this.fields.linkPopup.setValue(e.popup),this.fields.linkPopupWidth.setValue(e.popupWidth&&e.popupWidth>=100?e.popupWidth:400),this.fields.linkPopupHeight.setValue(e.popupHeight&&e.popupHeight>=100?e.popupHeight:320)}this.linkInfo=e,this.linkTypeChange(this.fields)},s.prototype.clearInfo=function(){this.changeType(null),this.fields.linkUrl.setValue("https://"),this.fields.linkPage.setValue(null),this.fields.linkEmail.setValue(null),this.fields.linkPhone.setValue(null),this.fields.linkFile.clearValue(),this.fields.linkTitle.setValue(null),this.fields.linkTarget.setValue(!1),this.fields.linkNoFollow.setValue(!1),this.fields.linkPopup.setValue(!1),this.fields.linkPopupWidth.setValue(1),this.fields.linkPopupHeight.setValue(1)},s.prototype.getInfo=function(){var e={type:null,url:null,target:null,title:null},t=this.getType();if(t){e.type=t;var i="link"+t.substring(0,1).toUpperCase()+t.substring(1);if(this.fields[i]){if(e.url=this.fields[i].getValue(),e.url&&(e.url=(""+e.url).trim()),"page"===t){var n=this.fields[i].getExtendedValue();e.menuUID=n.menuUID,e.anchor="anchor"in n?n.anchor:null}e.title=this.fields.linkTitle.getValue(),e.target=this.fields.linkTarget.getValue(),e.nofollow=this.fields.linkNoFollow.getValue(),e.popup=this.fields.linkPopup.getValue(),e.popupWidth=this.fields.linkPopupWidth.getValue(),e.popupHeight=this.fields.linkPopupHeight.getValue()}}return e},s.prototype.setVisible=function(t,i,n){t&&(this.fields.linkPage.reloadMenuList(),this.linkInfo.type&&"page"===this.linkInfo.type&&this.linkInfo.url&&(this.linkInfo.menuUID?this.fields.linkPage.setExtendedValue({menuUID:this.linkInfo.menuUID,id:parseInt(this.linkInfo.url,10),anchor:this.linkInfo.anchor}):this.fields.linkPage.setValue(this.linkInfo.url))),e.prototype.setVisible.call(this,t,i,n)},window.WB_LinkDialog=s,s}.apply(t,n))||(e.exports=o)},"./WB_LinkEditControl.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){function i(e,t,i){this.__construct(e,t,i)}return i.prototype.elem=null,i.prototype.link=null,i.prototype.input=null,i.prototype.value=null,i.prototype.editBtn=null,i.prototype.remBtn=null,i.prototype.emptyMsg=__("No link selected"),i.prototype.__construct=function(t,i,n){var o=this;if(this.elem=e('<a class="wb_link" href="javascript:void(0);"></a>'),this.input=e('<span class="txt"></span>'),this.editBtn=e('<span class="btn btn-default btn-xs"><span class="fa fa-pencil"></span></span>'),this.remBtn=e('<span class="btn btn-default btn-xs hide" style="margin-left:5px;"><span class="glyphicon glyphicon-remove"></span></span>'),this.remBtn.click((function(e){o.getEnabled()&&(e.stopPropagation(),o.clearValue())})),this.elem.append(this.input).append(this.editBtn).append(this.remBtn),this.link=this.elem,n){this.elem.wrap('<div data-lang="'+n+'" style="margin-bottom: 4px;"></div>'),this.elem.before("<span>"+n.toUpperCase()+": </span>"),this.elem=this.elem.parent();for(var s,r=0;s=wb_builder.site.languages[r];r++)if(s.code===n&&s.isDefault){this.elem.append('<span style="margin-left: 4px;">('+__("Default")+")</span>");break}}i&&(this.emptyMsg=i),t?this.setValue(t):this.clearValue()},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.input.html(e).removeClass("inactive"),this.value=e,this.remBtn.removeClass("hide")},i.prototype.clearValue=function(){this.input.html(this.emptyMsg).addClass("inactive"),this.value=null,this.remBtn.addClass("hide")},i.prototype.setEnabled=function(e){e?(this.elem.removeClass("wb_link_disabled"),this.editBtn.removeAttr("disabled"),this.remBtn.removeAttr("disabled")):(this.elem.addClass("wb_link_disabled"),this.editBtn.attr("disabled","disabled"),this.remBtn.attr("disabled","disabled"))},i.prototype.getEnabled=function(){return!this.elem.is(".wb_link_disabled")},{LinkEditControl:i}}.apply(t,n))||(e.exports=o)},"./WB_LinkExchangeBadge.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./UIComponent.ts"),i("./RadioBox.js"),i("./Confirm.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n,o,s,r){var a=function(e){e&&this.__construct(e)};return __extends(a,t.Element),e.registerClass("ZyroBadge",a),e.registerClass("LinkExchangeBadge",a),a.badgeTypes=null,a.prototype._badgeType="iZyro",Object.defineProperty(a.prototype,"badgeType",{get:function(){return this._badgeType},set:function(e){this.setBadgeType(e)},enumerable:!0,configurable:!0}),a.prototype.badgeHtml=null,a.prototype.customLock=!1,a.prototype.updateSizeTimeout=null,a.prototype.__construct=function(e){if(this.customLock=!!e.customLock&&e.customLock,null===a.badgeTypes){var i='<i class="icon-wb-logo"></i><a href="http://'+wb_builder.siteProHost+'/" target="_blank" title="'+wb_builder.builderName+'">'+wb_builder.builderShortName+"</a>",n='<i class="icon-wb-logo icon-wb-logo-izyro"></i><a href="http://'+wb_builder.siteProHost+'/" target="_blank" title="'+wb_builder.builderName+'">'+wb_builder.builderShortName+"</a>";a.badgeTypes={poweredBy:__("Powered by %s").replace("%s",i),memberOf:__("Member of %s").replace("%s",i),iZyro:__("I %s").replace("%s",n)}}this.badgeHtml=a.badgeTypes[this._badgeType],e.isCommon=!("isCommon"in e)||!!e.isCommon,t.Element.call(this,e),this.setBadgeType(e.content.type?e.content.type:this._badgeType),this.updateStyle(!0);var o=this;this.elem.bind("resize",(function(){o.onResize()})),o.onResize(!0)},a.prototype.getDataDefaults=function(){return r.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:48,minHeight:24})},a.prototype.getIcon=function(){return"fa fa-share-square-o"},a.prototype.supportsAutoWidth=function(){return!0},a.prototype.supportsAutoHeight=function(){return!0},a.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.customLock=this.customLock,e.content={type:this.badgeType,html:this.badgeHtml?this.badgeHtml:""},e},a.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i),this.container.empty();var n=r("<div></div>");n.addClass("wb-stl-footer"),n.html(this.badgeHtml),this.container.html(n)},a.prototype.initContextMenu=function(){this.customLock||t.Element.prototype.initContextMenu.call(this)},a.prototype.onBeforeRemove=function(e){!this.customLock||e.batch?t.Element.prototype.onBeforeRemove.call(this,e):e.preventRemoval=!0},a.prototype.setBadgeType=function(e){a.badgeTypes.hasOwnProperty(e)||(e="iZyro"),this._badgeType!==e&&(this._badgeType=e,this.badgeHtml=a.badgeTypes[this._badgeType])},a.prototype.comProperties=function(){var e,o=this,s=t.Element.prototype.comProperties.call(this,{tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Widget type")},{type:"VerticalLayout",id:"badgeType",children:[],init:function(){var t,o;for(e in this.items={},a.badgeTypes)this.items[e]=new n(t=i.UIComponent.wrapControl({elem:r("<div>")}),null,"badge_type",!1,null),o=function(e){return function(){return e.setValue(!0),!1}}(this.items[e]),t.getElem().css({cursor:"pointer"}).append(a.badgeTypes[e]).on("click",o).find("a").attr({href:"javascript:void(0)"}),this.addChild(this.items[e])}}]}]}],callbackFunc:function(t){for(e in t.badgeType.items)t.badgeType.items[e].getValue()&&(o.badgeType=e);o.updateStyle()}});for(e in s.badgeType.items[this.badgeType]||(this.badgeType="iZyro"),s.badgeType.items)s.badgeType.items[e].setValue(this.badgeType===e)},a.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this);var e=[];for(var i in a.badgeTypes)a.badgeTypes.hasOwnProperty(i)&&e.push({value:i,label:a.badgeTypes[i],init:function(e,t){var i=e;t.on("click",(function(e){e.stopImmediatePropagation(),e.preventDefault(),i.trigger("click")}))}});this.registerProperty({name:"badgeType",type:s.PropertyType.LinkExchangeBadgeType,uiComponentOptions:{options:e}})},a}.apply(t,n))||(e.exports=o)},"./WB_ListControl.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e){function t(e){this.__construct(e)}t.prototype.elem=null,t.prototype.list=null,t.prototype.input=null,t.prototype.addBtn=null,t.prototype.initiated=!1,t.prototype.options=null,t.prototype.lastSelected=null,t.prototype.lastSelectedLi=null,t.prototype.customBuildSearchBlobFunction=null,t.prototype._itemClickHandler=null,t.prototype.__construct=function(t){var i=this;this.options=e.extend(!0,{deleteRequireConfirm:!0},t),this.elem=e('<div class="wb-list-control well"></div>'),this.searchInput=e("<input>").attr("type","text").css({marginBottom:5}).attr("placeholder",__("Search")).addClass("form-control").on("change keyup",(function(t){27===t.keyCode&&(this.value="");var n=this.value.toLowerCase();i.list.children("li").each((function(){var t,o=e(this),s=o.wbGetClassInstance(),r=!0;s&&"string"==typeof(t=i.customBuildSearchBlobFunction?i.customBuildSearchBlobFunction.call(i,s,o):"buildSearchBlob"in s&&"function"==typeof s.buildSearchBlob?s.buildSearchBlob():o.text().toLowerCase())&&(r=t.indexOf(n)>=0),o.css({display:r?"block":"none"})}))})).appendTo(this.elem),this.list=e('<ul class="nav nav-pills nav-stacked"></ul>'),this.list.hide(),this.elem.append(this.list),this.input=this.elem,!("editable"in this.options)||this.options.editable?(this.addBtn=e('<a class="wb-add-btn" href="javascript:void(0)"><span class="glyphicon glyphicon-plus"></span></a>'),this.addBtn.append("newItemButtonText"in this.options&&null!==this.options.newItemButtonText?this.options.newItemButtonText:__("Add item")),this.elem.append(this.addBtn),this.addBtn.bind("click",(function(){var e=new(i.options.type&&"function"==typeof i.options.type?i.options.type:function(){});i.addItem(e)})),"sortable"in this.options&&!this.options.sortable||this.elem.append('<div class="wb-page-tree-notice"><small><span class="glyphicon glyphicon-exclamation-sign"></span>'+__("Use Drag and Drop to sort items")+"</small></div>")):this.elem.css("height","auto")},t.prototype.setHeight=function(e){this.list.css({height:e,maxHeight:e}),e&&this.list.show()},t.prototype.updateStyle=function(){if((!("editable"in this.options)||this.options.editable)&&(!("sortable"in this.options)||this.options.sortable)){this.initiated&&this.list.sortable("destroy");var e=this;this.list.sortable({distance:3,axis:"y",items:"> li",cursor:"move",start:function(t,i){e.onSortStart(t,i)},stop:function(t,i){e.onSortStop(t,i)}})}this.initiated=!0,this.list.children("li").size()>0?this.list.show():this.list.hide()},t.prototype.onSortStart=function(e,t){this.lastSelected&&this.lastSelectedLi.trigger("click"),this.lastSelected=null,this.lastSelectedLi=null},t.prototype.onSortStop=function(e,t){this.lastSelected=null,this.lastSelectedLi=null},t.prototype.setItemIcon=function(t,i){e(t).find("span.lc-icon").attr("class","lc-icon "+i)};var i=function(e){var t=this.options.itemNameFunc&&"function"==typeof this.options.itemNameFunc?this.options.itemNameFunc:null,i=t?t(e):e.name;return i?__tr(i,"__DEFAULT__",__("New Item"),!0,!0):__("New Item")};return t.prototype.addItem=function(t,n,o,s){var r=this.options.type&&"function"==typeof this.options.type?this.options.type:function(){},a=this.options.itemTitleFunc&&"function"==typeof this.options.itemTitleFunc?this.options.itemTitleFunc:null,l=t.serialize();l.virtual=!0;var c=new r(l),u=this,d=null,h=i.call(this,c),p=a?a(c):c.hasOwnProperty("title")&&c.title?__tr(c.title,"__DEFAULT__"):h,m=e("<span>").addClass("lc-icon "+(o||"glyphicon glyphicon-folder-open")),g=e('<a href="javascript:void(0)"></a>').attr("title",p),f=e("<li>");return g.append(m),f.append(g),"editable"in this.options&&!this.options.editable||(d=e('<span class="wb-x-btn glyphicon glyphicon-remove"></span>')).bind("click",(function(){u.options.deleteRequireConfirm&&!confirm(__("Are you sure you want to delete this menu?"))||u.removeItem(f)})),g.append(" "+h),"editable"in this.options&&!this.options.editable||d&&g.append(d),f.wbSetClassInstance(c),s?f.addClass("disabled"):f.on("click",this._itemClickHandler=function(){e(this).parent().children("li").removeClass("active"),e(this).addClass("active");var t=null;u.options.onSelect&&"function"==typeof u.options.onSelect&&(t=e(this).wbGetClassInstance(),u.options.onSelect.call(e(this).get(0),t)),u.lastSelectedLi&&u.updateItem(u.lastSelectedLi),u.lastSelected=t,u.lastSelectedLi=e(this)}),!n&&"addNewItemsToBeginning"in this.options&&this.options.addNewItemsToBeginning?this.list.prepend(f):this.list.append(f),this.options.onAdd&&"function"==typeof this.options.onAdd&&this.options.onAdd.call(f,f.wbGetClassInstance()),n||this.updateStyle(),f},t.prototype.addSeparator=function(){this.list.append('<li class="divider"></li>')},t.prototype.updateItem=function(e){var t=e.wbGetClassInstance(),n=e.children("a").children("span.glyphicon");n.detach(),e.children("a").empty(),e.children("a").append(n.eq(0)),e.children("a").append(" "+i.call(this,t)),e.children("a").append(n.eq(1))},t.prototype.removeItem=function(e,t){var i=e.wbGetClassInstance();if(this.options.onRemove&&"function"==typeof this.options.onRemove&&this.options.onRemove.call(e,i),e.hasClass("active")&&(this.lastSelected=null,this.lastSelectedLi=null),!t){var n=e.next("li");n.length||(n=e.prev("li"))}e.remove(),e.empty(),e.wbSetClassInstance(null),t||(this.selectItemLi(n),this.updateStyle())},t.prototype.removeAllItems=function(){var t=this;this.list.children("li").each((function(){e(this).hasClass("divider")?(e(this).detach(),e(this).remove()):t.removeItem(e(this),!0)})),this.lastSelected=null,this.lastSelectedLi=null,this.updateStyle()},t.prototype.selectFirst=function(){this.selectItemLi(this.elem.find("li").eq(0))},t.prototype.selectItemLi=function(e){e&&e.length>0?e.trigger("click"):this.options.onSelectNone&&"function"==typeof this.options.onSelectNone&&this.options.onSelectNone.call()},t.prototype.selectItem=function(t){this.getItemsLi().each((function(){var i=e(this).wbGetClassInstance();t(i)&&e(this).trigger("click")}))},t.prototype.setItemLiEnabled=function(e,t){t?e.removeClass("disabled").on("click",this._itemClickHandler):e.addClass("disabled").off("click",this._itemClickHandler)},t.prototype.getItemsLi=function(){return this.list.children("li")},t.prototype.getItems=function(t){var i=this.getItemsLi();if(t){var n=[];return i.each((function(){var t=e(this).wbGetClassInstance();t&&n.push(t)})),n}return i},t.prototype.getValue=function(){var t=this.options.type&&"function"==typeof this.options.type?this.options.type:function(){},i=[];return this.list.children("li").each((function(){var n=e(this).wbGetClassInstance().serialize();n.virtual=!1,i.push(new t(n))})),i},t.prototype.setValue=function(e){this.removeAllItems();for(var t=0;t<e.length;t++)this.addItem(e[t],!0);this.selectFirst(),this.updateStyle()},t.prototype.setCustomBuildSearchBlobFunction=function(e){this.customBuildSearchBlobFunction="function"==typeof e?e:null},{ListControl:t}}.apply(t,n))||(e.exports=o)},"./WB_MediaLibrary.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./WB_Dialog.class.js"),i("./Service.ts"),i("./UIButton.ts"),i("./FreeGallery.ts"),i("./BuilderEvent.ts"),i("./WB_Youtube.class.js"),i("./util/DataUtil.ts"),i("./util/VideoThumbGenerator.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c){"use strict";var u=i("./core/BuilderConfig.ts").wbConfig,d=function(e,t,i,n,o){this.__construct(e,t,i,n,o)};return(d.prototype=new t("%inherit%")).constructor=d,d.prototype.tabbedPane=null,d.prototype.tabActive=null,d.prototype.myTab=null,d.prototype.freeTab=null,d.prototype.urlTab=null,d.prototype.tagSelected=null,d.prototype.tagMenu=null,d.prototype.selectedFiles=null,d.prototype.isMultiselect=!1,d.prototype.uploader=null,d.prototype.uploaderForm=null,d.prototype.uploaderCounter=0,d.prototype.gallery=null,d.prototype.galleryLoaded=!1,d.prototype.selList=null,d.prototype.thumb=null,d.prototype.progress=null,d.prototype.msg=null,d.prototype.mode="all",d.prototype.showTabs=!1,d.prototype.customContent=null,d.prototype.showFontAwesomeTab=!1,d.prototype.galMsg=null,d.prototype.flickrInfo={},d.prototype.flickrKey="881fe8a1a99a491e17c4adf1f46b0350",d.prototype.flickrListRandomUrl="https://api.flickr.com/services/rest/?method=flickr.photos.getRecent&safe_search=1&sort=random&privacy_filter=1&per_page=25&format=json&jsoncallback=?",d.prototype.flickrListUrl="https://api.flickr.com/services/rest/?method=flickr.photos.search&safe_search=1&license=7,9,10&extras=description,license,date_upload,date_taken,owner_name,icon_server,original_format,last_update,geo,tags,machine_tags,o_dims,views,media,path_alias,url_sq,url_t,url_s,url_q,url_m,url_n,url_z,url_c,url_l,url_o&sort=relevance&privacy_filter=1&per_page=25&format=json&jsoncallback=?",d.prototype.flickrImagesUrl="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&format=json&jsoncallback=?",d.prototype.fontAwesomeInfo={},d.prototype.urlInfo={},d.prototype.requiresRevalidation=!0,d.prototype._freeGalleryLoaded=!1,d.youtubeAPILoaded=!1,d.fontAwesomeIcons=null,d.fontAwesomeIconsCharacterMap=null,d.fontAwesomeIconsLoadCallbacks=[],d.fontAwesomeIconsLoadXHR=null,d.iconClass={video:"fa fa-file-video-o",audio:"fa fa-file-audio-o",msword:"fa fa-file-word-o",excel:"fa fa-file-excel-o",powerpoint:"fa fa-file-powerpoint-o",pdf:"fa fa-file-pdf-o",archive:"fa fa-file-archive-o",text:"fa fa-file-text-o",script:"fa fa-file-code-o"},d.fileTypes={image:{extensions:"jpg,jpeg,gif,png,svg,webp,ico"},video:{extensions:"ogg,mp4,mpeg,avi,flv,mkv,mov,webm"},audio:{extensions:"mp3,aac,wav,ra,midi,ram,wma,ogg,ape"},flash:{extensions:"swf"},msword:{extensions:"doc,docx"},excel:{extensions:"xls,xlsx,csv"},powerpoint:{extensions:"ppt,pptx"},pdf:{extensions:"pdf"},archive:{extensions:"zip,rar,tar,gz"},text:{extensions:"txt"},script:{extensions:"html,xml"}},d.modes={all:{title:__("All"),extensions:"jpg,jpeg,gif,png,svg,webp,ico,psd,swf,mp3,aac,wav,ra,midi,ram,wma,ogg,ape,mp4,mpeg,avi,flv,mkv,mov,webm,pdf,docx,doc,xls,xlsx,rtf,ppt,pptx,odt,txt,csv,html,xml,js,yml,rar,zip,tar,gz,eps,cdr"},image:{title:__("Images"),extensions:"jpg,jpeg,gif,png,svg,webp",fileTypes:["image"]},video:{title:__("Videos"),extensions:"ogg,mp4,mpeg,avi,flv,mkv,mov,webm",fileTypes:["video"]},"image+video":{title:__("Images")+" / "+__("Videos"),extensions:"jpg,jpeg,gif,png,svg,webp,ogg,mp4,mpeg,avi,flv,mkv,mov,webm",fileTypes:["image","video"]},favicon:{title:__("Favicon"),extensions:"jpg,jpeg,gif,png,ico,svg",fileTypes:["image"]},flash:{title:__("Flash"),extensions:"swf",fileTypes:["flash"]},audio:{title:__("Audio"),extensions:"mp3,aac,wav,ra,midi,ram,wma,ogg,ape",fileTypes:["audio"]}},d.getModes=function(){return d.modes},d.getFileType=function(e){if(e){var t=e.substring(e.lastIndexOf(".")+1);for(var i in d.fileTypes)if(d.fileTypes[i].extensions.split(",").indexOf(t.toLowerCase())>-1)return i}return null},d.getIconClass=function(e){var t=e&&e in d.fileTypes?e:d.getFileType(e);return t?d.iconClass[t]:"fa fa-file-o"},d.prototype.__construct=function(i,s,r,a,l){t.prototype.__construct.call(this,i);var c=this;this.isMultiselect=!!s,this.mode=void 0!==r&&r in d.modes?r:"all",this.showTabs=!!a,this.showFontAwesomeTab=!!l,this.selectedFiles=[],this.flickrInfo={},this.urlInfo={};var h=d.modes[this.mode];e.browser.msie||e.browser.opera,this.setContent(new n.Service.UIBuilder({type:"TabbedPane",id:"tabbedPane",tabs:[{name:__("Template Gallery"),type:"gallery-main",children:[{type:"HorizontalLayout",columnWeights:"image"!==this.mode&&"image+video"!==this.mode?null:[4,8],css:{marginTop:"all"===this.mode?0:15},children:[{type:"VerticalLayout",ignore:"image"!==this.mode&&"image+video"!==this.mode,children:[{type:"CustomContainer",ignore:"image"!==this.mode&&"image+video"!==this.mode,styleClass:"wb-list-control well wb-media-gallery-list-control",init:function(){var t,i,n,o,s;e("<input>").addClass("form-control input-search").attr("placeholder",__("Search")).css({marginBottom:5}).on("change keyup",(function(t){27===t.keyCode&&(this.value="");var i=this.value.toLowerCase();c.tagMenu.children("li").each((function(){var t=e(this),n=t.text().toLowerCase().indexOf(i)>=0;t.css({display:n?"block":"none"})}))})).appendTo(this._elem),c.tagMenu=e("<ul>").addClass("nav nav-pills nav-stacked tag-menu").append('<li class="active"><a class="tag-item" href="javascript:void(0)"><i class="glyphicon glyphicon-folder-open"></i> '+__("All")+"</a></li>").on("click",".tag-item",(function(){c.selectImageCat(e(this).parent().data("tag"))})).on("click",".btn-rem",(function(){if(confirm(__("Remove this category? All files in it will be deleted!"))){var t=e(this),i=e(this).closest("li").data("tag");e.post(u.getUrl("del_image_cat"),{cat:i},(function(e){if("ok"===e.status){var i=t.parents("li");i.hasClass("active")&&c.tagMenu.find("li:first-child a").click(),i.remove(),c.invalidate()}else c.showMessage(e.msg,'<i class="glyphicon glyphicon-warning-sign"></i>',"error",n)}))}})).sortable({items:"li:not(:first)",update:function(t,i){e.post(u.getUrl("move_image_cat"),{cat:i.item.data("tag"),newIndex:i.item.index()-1},(function(e){})),c.invalidate()}}).appendTo(this._elem),c.customContent||(s=e("<button>").addClass("btn btn-link").attr({type:"button"}).css({marginLeft:"3px"}).append(e("<i>").addClass("glyphicon glyphicon-plus")).append(" "+__("New Item")).on("click",(function(){e(this).addClass("hide"),t.removeClass("hide"),i.focus()})).appendTo(this._elem)),t=e("<div>").addClass("input-group input-group-sm hide").css({margin:"8px 0 0 8px"}).append(i=e("<input>").addClass("form-control").attr({type:"text"}).keyup((function(e){13===e.keyCode&&o()}))).append(e("<span>").addClass("input-group-btn").append(e("<button>").addClass("btn btn-default").append(e("<i>").addClass("glyphicon glyphicon-plus")).on("click",(function(){o()})))).appendTo(this._elem),n=e("<div>").css({margin:"8px 0 0 -22px"}).appendTo(this._elem),o=function(){var o=e.trim(i.val());o&&e.post(u.getUrl("add_image_cat"),{cat:o},(function(e){"ok"===e.status?(c.addImageCat(e.cat),i.val(""),t.addClass("hide"),s.removeClass("hide")):c.showMessage(e.msg,'<i class="glyphicon glyphicon-warning-sign"></i>',"error",n)}))},e("li",this.tagMenu).disableSelection()}},{type:"CheckBox",id:"showAllTagsBtn",label:__("Show All Tags"),visible:!1,change:function(){this.getValue()?(wb_builder.setCookie("wb_show_all_tags","Y"),this.defOriginalValue=c.customContent,c.customContent=null,c.loadGallery()):(wb_builder.setCookie("wb_show_all_tags","N"),!c.customContent&&this.defOriginalValue&&(c.customContent=this.defOriginalValue),c.loadGallery())}}]},{type:"VerticalLayout",children:[{type:"FlowLayout",verticalAlign:"middle",children:[{type:"Label",id:"galMsg",css:{lineHeight:"30px"},text:"image"===this.mode||"favicon"===this.mode?this.isMultiselect?__("Select pictures by clicking below or"):__("Select picture below or"):__("Select file below or")},{type:"Button",buttonStyle:o.UIButton.STYLE_INFO,css:{marginTop:"-5px"},attr:{id:this.id+"_uploader"},text:"image"===this.mode||"favicon"===this.mode?__("Upload New Picture"):__("Upload New File"),init:function(t){var i=h.extensions.split(","),n=new RegExp("(\\.|\\/)("+i.join("|")+")$");c.uploaderForm=e("<form>").append(e('<input type="file" name="file" multiple="multiple" />').attr("accept","."+i.join(",."))),c.uploader=this.getElem().fileupload({fileInput:c.uploaderForm.find("input"),url:u.getUrl("upload")+("favicon"===c.mode?"?mode="+c.mode:""),dataType:"json",sequentialUploads:!0,autoUpload:!0,disableImagePreview:!0,disableImageResize:!1,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!0,loadImageMaxFileSize:5e7,maxFileSize:wb_builder.maxUploadFileSize,acceptFileTypes:n})}},{type:"FlowLayout",css:{float:"right"},ignore:"all"!==this.mode,children:[{type:"Label",text:__("Show")+":"},{type:"DropdownBox",css:{marginTop:"-5px",maxWidth:160},value:this.mode,options:[{name:__("All"),id:"all"},{name:__("Images"),id:"image"},{name:__("Audio"),id:"audio"},{name:__("Flash"),id:"flash"}],change:function(){c.mode=this.getValue(),c.clearGallery(),c.loadGallery()}}]}]},{type:"CustomContainer",id:"gallery",tag:"ul",styleClass:"thumbnails wb_media_library",css:{marginTop:"15px"},attr:{id:"galList"+this.id}}]}]}]},{name:__("Free Gallery"),type:"gallery-free",ignore:!this.showTabs,init:function(){c.loadFlickContent(this)}},{name:"image+video"===this.mode?__("Picture / Video URL"):__("Picture URL"),type:"gallery-url",ignore:!this.showTabs||this.isMultiselect,init:function(){c.loadUrlContent(this)}},{name:__("Font Awesome Icon"),type:"gallery-icons",ignore:!this.showFontAwesomeTab||this.isMultiselect,init:function(){c.loadFontAwesomeContent(this)}}],change:function(e,t){c.hideProgress();var i=e.tabbedPane.getSelectedTabDef();c.tabActive=i?i.type:null,"gallery-free"!==c.tabActive||c.flickrInfo.galleryLoaded||c.loadFlickrGallery()}}),!0),this.dialog.addClass("wb-modal-settings"),this.gallery=this.fields.gallery.getElem(),this.galMsg=this.fields.galMsg.getElem(),this.fields.urlTypeImage&&(this.fields.urlTypeImage.setValue(!0),this.updateUrlTabExample()),c.uploader.on("click",(function(e){c.uploaderForm.find("input").trigger("click")})),this.uploader.on("fileuploadadd",(function(e,t){0===c.uploaderCounter&&(c.hideMessage(),c.showProgress(0,!0)),c.uploaderCounter++})),this.uploader.on("fileuploadalways fileuploadprocessfail",(function(e,t){--c.uploaderCounter<=0&&c.hideProgress(!1,!1)})),this.uploader.on("fileuploadsubmit",(function(e,t){"string"==typeof c.tagSelected&&(t.formData={tag:c.tagSelected})})),this.uploader.on("fileuploadprogressall",(function(e,t){var i=c.uploaderCounter?__("Files left:")+c.uploaderCounter:null;c.showProgress(Math.floor(100*(t.total?t.loaded/t.total:1)),!0,i)})),this.uploader.on("fileuploaddone",(function(e,t){var i=t.result;if("object"==typeof i)if("error"in i)i.error.verifySession?wb_builder.verifySession((function(e,t){e&&t&&c.showMessage(__pr(i.error.message),__("Upload error"),"error")})):c.showMessage(__pr(i.error.message),__("Upload error"),"error"),c.dialog.find(".wb_media_library").scrollTop(0);else{var n=i.result?i.result:t.files[0].name,o=!i.hasOwnProperty("hasThumb")||i.hasThumb?"thumbs/":"";c.addThumb({file:wb_builder.userGalleryUrl+o+n,name:n,genThumb:!!i.genThumb},!0).click(),c.invalidate()}})),this.uploader.on("fileuploadprocess",window.prepareAutoScaleOptions),this.progress=e('<div class="wb_media_progress_wrap"><div class="wb_media_progress progress"><div class="progress-bar progress-bar-striped active" style="width: 1%;"><span class="sr-only"></span></div></div><div class="status"></div><div class="status2"></div></div>'),this.msg=e('<div class="alert alert-danger"><a class="close" data-dismiss="alert" href="#">&times;</a><span></span></div>'),this.thumb=e('<li class="thumb-li"><a href="javascript:void(0)" class="btn btn-default btn-xs" style="display: none;"><i class="glyphicon glyphicon-remove"></i></a><a href="javascript:void(0)" class="thumbnail"><img src="" alt="" /><i class="" style="text-align: center; position: absolute; left: 0; top: 18px; width: 100%; overflow: hidden; height: 24px; font-size: 22px; display: none;"></i></a><span class="wb_thumb_name"></span></li>');var p=this.thumb.clone().addClass("firstThumb"),m=__("Add New");e("span",p).remove(),e("img",p).remove(),e("a.thumbnail",p).attr({title:m,id:"addNewThumb"+this.id}).append('<span class="empty"><i class="glyphicon glyphicon-plus"></i><span class="name">'+m+"</span></span>"),this.gallery.prepend(p),p.fadeIn(),e("#addNewThumb"+this.id).on("click",(function(e){c.uploaderForm.find("input").trigger("click")})),n.Service.templates.addChangeListener((function(){c.requiresRevalidation=!0}))},d.prototype.setUrlType=function(e){"video"===e?this.fields.urlTypeVideo&&this.fields.urlTypeVideo.setValue(!0):this.fields.urlTypeImage&&this.fields.urlTypeImage.setValue(!0),this.updateUrlTabExample()},d.prototype.setCustomContent=function(e){this.customContent=e,this.fields.showAllTagsBtn&&(this.fields.showAllTagsBtn.setVisible(!!this.customContent),"Y"===wb_builder.getCookie("wb_show_all_tags")&&(this.fields.showAllTagsBtn.defOriginalValue=this.customContent,this.customContent=null,this.fields.showAllTagsBtn.setValue(!0)))},d.prototype.sort=function(t){var i=this.gallery.find(".thumb-li:not(.firstThumb)").toArray();for(var n in i.sort((function(t,i){var n=e(t).children(".wb_thumb_name").text(),o=e(i).children(".wb_thumb_name").text();return n===o?0:n>o?1:-1})),i)this.gallery.append(i[n]);if(t){var o=t.offset().top-this.gallery.offset().top;this.gallery.get(0).scrollTop=o}},d.prototype.updateUrlTabExample=function(){this.fields.urlExample&&this.fields.urlExample.getElem().text(__("Example")+": "+(!this.fields.urlTypeImage||this.fields.urlTypeImage.getValue()?"http://www.google.com/images/srpr/logo3w.png":"https://www.youtube.com/watch?v=UF8uR6Z6KLc"))},d.prototype.loadUrlContent=function(t){var i=this,s="image+video"===this.mode,r=function(e){i.updateUrlTabExample(e),e.imgPreview.setImage(null),e.importButton.setVisible(!e.urlTypeImage||e.urlTypeImage.getValue())};n.Service.UIBuilder.buildLayout({type:"VerticalLayout",css:{marginTop:"15px"},children:[{type:"Label",text:__("Picture URL"),ignore:s},{type:"FlowLayout",ignore:!s,css:{marginBottom:5},children:[{type:"RadioBox",label:__("Image"),id:"urlTypeImage",group:"urlType",change:r},{type:"RadioBox",label:__("Video"),id:"urlTypeVideo",group:"urlType",change:r}]},{type:"FlowLayout",children:[{type:"TextField",id:"urlInput",value:"http://",init:function(){this.on("keyup",(function(e){13===e.keyCode&&(void 0)()}))},change:function(){i.fields.imgPreview.setImage(i.fields.urlInput.getValue(),i.fields.urlTypeVideo&&i.fields.urlTypeVideo.getValue()?"video":"image")}},{type:"Button",id:"importButton",text:__("Import into gallery"),buttonStyle:o.UIButton.STYLE_INFO,click:function(){if(!i.fields.urlTypeImage||i.fields.urlTypeImage.getValue()){var e=i.fields.urlInput.getValue().trim();if(e&&e.length&&"http://"!==e&&"https://"!==e)if(/^https?:\/\//i.test(e)){var t=null;i.buttons.find(".btn-success").attr("disabled","disabled"),i.downloadExternalResources([e],(function(e,i,n,o,s){t=s}),(function(){i.buttons.find(".btn-success").removeAttr("disabled"),t?(i.dialog.find(".wb_media_library").children(".active").removeClass("active"),i.fields.tabbedPane.selectTabByType("gallery-main"),t.addClass("active"),i.sort()):alert(__("There was an error while trying to download image from specified URL. Please check if you have entered it correctly."))}))}else alert(__("Please enter a valid web URL starting with http or https"))}}}]},{type:"CustomContainer",tag:"span",id:"urlExample",styleClass:"help-block help-block-sm"},{type:"CustomContainer",id:"imgPreview",styleClass:"thumbnail",css:{marginTop:15,marginBottom:0,minHeight:190,maxHeight:190,overflow:"hidden"},init:function(){var t,n,o,s;this.getElem().css("text-align","center").append(t=e("<img>").hide()).append(n=e("<video autoplay muted loop>").hide().css({maxHeight:180})).append(o=e("<div>").css({position:"relative",height:180})).append(s=e("<div>").css({textAlign:"center",marginTop:76,color:"#999999"}).text(__("Preview")));var r,l=function(t){var i=o.children("iframe");t?(i.length||(i=e("<iframe>").css({height:"100%"}),o.append(i)),i.attr("src","https://www.youtube.com/embed/"+t),o.show()):(i.remove(),o.hide())};this.setImage=function(e,o){if(!r||r!==e){if(e&&"http://"!==e){if(i.urlInfo.url=e,"image"===o)n.get(0).src="",t.get(0).src=i.urlInfo.url=e,s.hide(),n.hide(),l(null),t.show(),this.css({minHeight:"auto"});else if("video"===o){t.get(0).src="",s.hide(),t.hide();var c=a.extractId(e);c?(n.hide(),l(c)):(l(null),n.get(0).src=i.urlInfo.url=e,n.show()),this.css({minHeight:190})}}else t.get(0).src="",n.get(0).src="",t.hide(),n.hide(),l(null),s.show(),this.css({minHeight:190});r=e,i.checkSelected()}}}}]},t,this.fields)},d.prototype.loadUrlImage=function(){this.fields.imgPreview&&this.fields.urlInput&&this.fields.imgPreview.setImage(this.fields.urlInput.getValue(),this.fields.urlTypeVideo&&this.fields.urlTypeVideo.getValue()?"video":"image")},d.prototype.loadFlickContent=function(e){var t,i=this;n.Service.UIBuilder.buildLayout({type:"VerticalLayout",css:{marginTop:"15px"},children:[{type:"FlowLayout",children:[{type:"TextField",id:"searchInput",init:function(){this.on("keyup",(function(e){13===e.keyCode&&t()}))}},{type:"Button",text:__("Search"),buttonStyle:o.UIButton.STYLE_INFO,click:t=function(){i.flickrInfo.searchPhrase=i.fields.searchInput.getValue(),i.loadFlickrGallery()}}]},{type:"CustomContainer",id:"flcrGallery",tag:"ul",styleClass:"thumbnails wb_media_library",css:{marginTop:"15px"},attr:{id:"galList"+this.id+"_flcr"}}]},e,this.fields),this.flickrInfo.gallery=this.fields.flcrGallery.getElem()},d.prototype.loadFlickrGallery=function(t){if(this.flickrInfo.galleryLoading)return!1;this.flickrInfo.galleryLoading=!0;var i=this;this._freeGalleryLoaded||(this._freeGalleryLoaded=!0,s.Module.init({perPage:25,beforeForEach:function(){i.flickrInfo.showMoreThumb&&i.flickrInfo.showMoreThumb.remove()},forEach:function(e,t){i.addThumb(t.thumb,!1,i.flickrInfo.gallery,{title:t.title,url:t.url,name:t.name}),i.showProgress(parseInt((e+1)/s.Module.current.totalImages*100),!0)},emptyList:function(){i.showMessage(__("No images found."),'<i class="glyphicon glyphicon-warning-sign"></i>',"error",i.flickrInfo.gallery),i.flickrInfo.galleryLoading=!1,i.flickrInfo.galleryLoaded=!0,i.hideProgress()},afterForEach:function(){i.flickrInfo.showMoreThumb=i.thumb.clone();var t=__("Show more");e("span",i.flickrInfo.showMoreThumb).remove(),e("img",i.flickrInfo.showMoreThumb).remove(),e("a.thumbnail",i.flickrInfo.showMoreThumb).attr({title:t}).append('<span class="empty"><i class="glyphicon glyphicon-plus"></i><span class="name">'+t+"</span></span>").click((function(){s.Module.load(i.flickrInfo.searchPhrase)})),i.flickrInfo.gallery.append(i.flickrInfo.showMoreThumb),i.flickrInfo.showMoreThumb.fadeIn(),i.flickrInfo.galleryLoading=!1,i.flickrInfo.galleryLoaded=!0,i.hideProgress()}})),t||(s.Module.resetPages(),this.flickrInfo.gallery.empty()),this.showProgress(0,!0),s.Module.load(i.flickrInfo.searchPhrase)},d.prototype.loadFontAwesomeContent=function(e){var t,i=this;n.Service.UIBuilder.buildLayout({type:"VerticalLayout",css:{marginTop:"15px"},children:[{type:"FlowLayout",children:[{type:"TextField",id:"fontAwesomeSearchInput",init:function(){this.on("keyup",(function(e){t()}))}},{type:"Button",text:__("Search"),buttonStyle:o.UIButton.STYLE_INFO,click:t=function(){i.fontAwesomeInfo.searchPhrase=i.fields.fontAwesomeSearchInput.getValue(),i.renderFontAwesomeGallery()}}]},{type:"CustomContainer",id:"fontAwesomeGallery",tag:"ul",styleClass:"wb_media_library font_awesome_icons",css:{marginTop:"15px"},attr:{id:"galList"+this.id+"_fontAwesome"}}]},e,this.fields),this.fontAwesomeInfo.rendered=!1,this.fontAwesomeInfo.searchPhrase="",this.fontAwesomeInfo.gallery=this.fields.fontAwesomeGallery.getElem(),i.loadFontAwesomeGallery()},d.prototype.loadFontAwesomeGallery=function(){var e=this;d.getFontAwesomeIcons((function(){e.renderFontAwesomeGallery()}))},d.getFontAwesomeIcons=function(t){null===d.fontAwesomeIcons?("function"==typeof t&&d.fontAwesomeIconsLoadCallbacks.push(t),null===d.fontAwesomeIconsLoadXHR&&(d.fontAwesomeIconsLoadXHR=e.ajax({url:u.getUrl(wb_builder.getFontAwesomeIconsUri),success:function(e){if(d.fontAwesomeLoadIconsXHR=null,"object"==typeof e&&"success"in e&&e.success){d.fontAwesomeIconsCharacterMap={};for(var t=e.icons.length-1;t>=0;t--)d.fontAwesomeIconsCharacterMap[e.icons[t].character]=e.icons[t];for(d.fontAwesomeIcons=e.icons;d.fontAwesomeIconsLoadCallbacks.length;)d.fontAwesomeIconsLoadCallbacks.shift().call(window,d.fontAwesomeIcons)}else setTimeout(d.getFontAwesomeIcons,6e4)},error:function(e){d.fontAwesomeLoadIconsXHR=null,setTimeout(d.getFontAwesomeIcons,6e4)},dataType:"json"}))):"function"==typeof t&&t(d.fontAwesomeIcons)},d.updateFontAwesomeIconInfo=function(e,t){var i=e,n=t;!e||"object"!=typeof e||e.faWidth&&e.faHeight?"function"==typeof n&&n.call(window,i):d.getFontAwesomeIcons((function(e){if(i.hasOwnProperty("faCharacter")&&d.fontAwesomeIconsCharacterMap.hasOwnProperty(i.faCharacter)){var t=d.fontAwesomeIconsCharacterMap[i.faCharacter];i.faXOffset=t.x,i.faBaseLine=t.y,i.faWidth=t.w,i.faHeight=t.h,i.faFontSize=t.s}"function"==typeof n&&n.call(window,i)}))},d.prototype.renderFontAwesomeGallery=function(){if(d.fontAwesomeIcons&&d.fontAwesomeIcons.length){var t=this,i=this.fontAwesomeInfo.gallery;if(!this.fontAwesomeInfo.rendered){this.fontAwesomeInfo.rendered=!0;for(var n=0,o=d.fontAwesomeIcons.length;n<o;n++){var s=d.fontAwesomeIcons[n],r=s.names[0],a={};i.append(e("<li>").append(e('<i class="fa fa-'+r+'"></i>')).append(e("<span>").text(r)).data("faIcon",s).attr("title",s.names.join("\n")).on("click touchend",(function(){t.isMultiselect?e(this).toggleClass("active"):(t.dialog.find(".wb_media_library").children().removeClass("active"),e(this).addClass("active")),t.checkSelected()})).on("click touchend",(function(e){e.stopPropagation(),a[e.type]&&a[e.type].target===e.currentTarget||(a[e.type]={target:e.currentTarget,time:0}),0===a[e.type].time?a[e.type].time=(new Date).getTime():(new Date).getTime()-a[e.type].time<800?(t.buttons.find(".btn-success").click(),a[e.type].time=0):a[e.type].time=(new Date).getTime()})).on("dblclick",(function(e){e.stopPropagation()})))}}""===this.fontAwesomeInfo.searchPhrase?i.children().removeClass("hidden"):i.children().each((function(){var i=e(this),n=i.data("faIcon"),o=i.hasClass("active")||n.character.indexOf(t.fontAwesomeInfo.searchPhrase)>=0;if(!o)for(var s=0;s<n.names.length;s++)if(n.names[s].indexOf(t.fontAwesomeInfo.searchPhrase)>=0){o=!0;break}o?i.removeClass("hidden"):i.addClass("hidden")}))}},d.prototype.clearGallery=function(){this.gallery.children("li:not(.firstThumb)").remove(),this.galleryLoaded=!1,this.invalidate()},d.prototype.loadGallery=function(t){var i,n=this;this.hideMessage(),this.showProgress(0).children(".progress-bar").animate({width:"100%"},1e4),this.clearGallery(),e.get(u.getUrl("upload_list"),{mode:this.mode},(function(t){var o=null;if(t&&"object"==typeof t&&"error"in t)i=[],t.error.verifySession?wb_builder.verifySession((function(e,i){e&&i&&n.showMessage(t.error.message,'<i class="icon-warning-sign"></i>',"error")})):n.showMessage(t.error.message,'<i class="icon-warning-sign"></i>',"error");else if(t&&"object"==typeof t&&l.isSet(t.list)){if(i=t.list,n.tagMenu)if(n.tagMenu.children("li:not(:first)").remove(),n.customContent&&"object"==typeof n.customContent){for(var s in n.customContent)n.addImageCat(s,!0),o||(o=s);i=n.filterDataByCustomContent(i,n.customContent)}else t.tags&&(o=n.tagMenu.children("li.active").data("tag"),e.each(t.tags,(function(e,t){null!=t&&!1!==t&&n.addImageCat(t)})))}else i=t;n.hideProgress(!1,(function(){if(i&&"object"==typeof i&&i.hasOwnProperty("length")){for(var e=0;e<i.length;e++)n.addThumb(i[e]);n.setSelectedFiles(n.selectedFiles),n.checkSelected()}else n.showMessage(__("No files found."),'<i class="icon-info-sign"></i>',"info");n.selectImageCat(o),n.requiresRevalidation=!1}))})).error((function(){n.hideProgress(!1,(function(){n.showMessage(__("File loading failed."),'<i class="icon-warning-sign"></i>',"error")}))})),this.galleryLoaded=!0},d.prototype.filterDataByCustomContent=function(e,t){var i,n={};for(var o in t)for(var s=0;s<t[o].length;s++)n[i=t[o][s].split("/").pop()]=o;for(o=0;o<e.length;o++)(i=e[o].file.split("/").pop())in n&&(e[o].tag=n[i]);return e},d.prototype.checkSelected=function(){this.getSelectedFiles(!0).length?this.buttons.find(".btn-success").removeAttr("disabled"):this.buttons.find(".btn-success").attr("disabled","disabled")},d.prototype.addThumb=function(t,i,n,o,s){var r,a=this.thumb.clone();s&&a.removeClass("span2").addClass("span"+s);var h=e.extend({width:0,height:0,size:0},"object"==typeof t?t:{file:t,name:t}),p=this.tagSelected;"object"==typeof t&&(p=l.isSet(t.tag)?t.tag:null,r=t.name,t=t.file),a.addClass("tag-sort"),a.data("tag",p),o&&"name"in o&&null!==o.name?r=o.name:r||(r=(r=t.split("/"))[r.length-1]);var m=r.replace(/-ts\d+/gi,"");h.width>0&&h.height>0&&(m+=" ("+h.width+"x"+h.height+")"),n||(n=this.gallery);var g=d.getIconClass(r),f=d.getFileType(r),y=e("a.thumbnail",a),b=y.children("img"),v=y.children("i");"image"===f?(v.hide(),b.attr("src",wb_builder.makeLocalUrl(t)+"?ts="+(new Date).getTime()).show()):g&&(t.match(/\.(jpg|jpeg|png|gif)$/i)?b.attr("src",wb_builder.makeLocalUrl(t)+"?ts="+(new Date).getTime()).show():b.hide(),v.attr("class",g).show()),y.attr("title",o?o.title:m),e("span",a).html(r),h.genThumb&&(h.genThumb=!1,c.generateThumb(h.name,y).done((function(e){b[0].src=wb_builder.makeLocalUrl(e),b.show()}))),o?(a.data("url",o.url),a.data("external",1),e("a.btn",a).remove()):(a.data("url",wb_builder.userGalleryUrl+r),a.data("wb_width",h.width),a.data("wb_height",h.height),a.data("wb_size",h.size));var _=this,C={};return a.on("click touchend",(function(){_.isMultiselect?e(this).toggleClass("active"):(_.dialog.find(".wb_media_library").children().removeClass("active"),e(this).addClass("active")),_.checkSelected()})).bind("click touchend",(function(t){t.stopPropagation(),C[t.type]&&C[t.type].target===t.currentTarget||(C[t.type]={target:t.currentTarget,time:0}),0===C[t.type].time?C[t.type].time=(new Date).getTime():(new Date).getTime()-C[t.type].time<800?(_.isMultiselect||_.dialog.find(".wb_media_library").children().removeClass("active"),e(this).addClass("active"),_.buttons.find(".btn-success").click(),C[t.type].time=0):C[t.type].time=(new Date).getTime()})).bind("dblclick",(function(e){e.stopPropagation()})).hover((function(){e("a.btn",this).css("display","block")}),(function(){e("a.btn",this).css("display","none")})),e("a.btn",a).bind("click touchend",(function(t){return confirm(__("Remove this file?"))&&(wb_builder.makeRelUrl(e("img",a).get(0).src.split("?",2)[0]),e.get(u.getUrl("upload_remove"),{filename:r}),a.remove(),_.invalidate()),t.stopPropagation(),!1})),void 0===i&&(i=!1),i?e(".firstThumb",n).length?e(".firstThumb",n).after(a):n.prepend(a):n.append(a),a.fadeIn(),clearInterval(this.sortTimeInterval),this.sortTimeInterval=setTimeout((function(){_.sort(a)}),150),a},d.prototype.addButton=function(i,n,o,s){if(o){var r=this,a=n;n=function(){if("gallery-free"===r.tabActive){var t=r.getSelectedFiles(),i=t.length;i>0&&r.buttons.find(".btn-success").attr("disabled","disabled");for(var n=[],o=[],s=0;s<i;s++)/^gallery/i.test(t[s])?o.push(t[s]):n.push(t[s]);var l=[],c=function(t){var i=t.split("/"),n=i[i.length-1],o=new RegExp(n),s=null;return r.dialog.find(".wb_media_library").find("img").each((function(){if(o.test(this.src))return s=e(this).parent().parent(),!1})),s};r.downloadExternalResources(n,(function(e,t,i,n,o){l.push(o)}),(function(){var e,t;for(r.dialog.find(".wb_media_library").children(".active").removeClass("active"),r.buttons.find(".btn-success").removeAttr("disabled"),r.fields.tabbedPane.selectTabByType("gallery-main"),e=0,t=o.length;e<t;e++){var i=c(o[e]);i.length&&i.addClass("active")}for(e=0,t=l.length;e<t;e++)l[e].addClass("active");r.sort(),"function"==typeof a&&a()}))}else"function"==typeof a&&a()}}return t.prototype.addButton.call(this,i,n,o,s)},d.prototype.downloadExternalResources=function(t,i,n){if(t&&t.length){var o=this,s=t,r=i,a=n,l=function(t){void 0===t&&(t=1),o.showProgress(Math.round(t/s.length*100),!0,__("Downloading resources into gallery"));var i=s[t-1];e.post(u.getUrl("upload_download"),{url:i},(function(n){if(n.ok&&n.src&&n.thumb){var c=null;if(n.existing){var u=n.thumb.split("/"),d=u[u.length-1],h=new RegExp(d);o.dialog.find(".wb_media_library").find("img").each((function(){if(h.test(this.src))return c=e(this).parent().parent(),!1}))}else c=o.addThumb(n.thumb);r(!0,i,n.src,n.thumb,c,n.existing)}else r(!1,i,null,null,!1);t===s.length?(o.hideProgress(!0),"function"==typeof a&&a()):l(t+1)}))};l()}else"function"==typeof n&&n()},d.prototype.addImageCat=function(e,t){this.tagMenu.append('<li data-tag="'+e+'"><a class="tag-item" href="javascript:void(0)" title="'+e+'"><i class="glyphicon glyphicon-folder-open"></i> '+e+"</a>"+(t?"":'<button class="btn btn-xs btn-link btn-rem"><i class="glyphicon glyphicon-remove"></i></button>')+"</li>"),this.invalidate()},d.prototype.selectImageCat=function(t){if(this.tagMenu){var i=null,n=this;this.tagMenu.find("li").each((function(){var n=e(this);n.removeClass("active"),n.data("tag")!==t&&i||(i=n)})),i.addClass("active"),n.tagSelected=i.data("tag")?""+i.data("tag"):null,n.tagSelected?n.gallery.find(".tag-sort").each((function(){e(this).data("tag")===n.tagSelected?e(this).removeClass("hide"):e(this).addClass("hide")})):n.gallery.find(".tag-sort").removeClass("hide")}},d.prototype.clearFileSelection=function(){this.dialog.find(".wb_media_library").children().removeClass("active")},d.prototype.setSelectedFiles=function(t){this.clearFileSelection();var i="gallery-main";this.selectedFiles=t,t.length?this.showTabs&&"string"==typeof this.selectedFiles[0]&&/^https?:\/\//i.test(this.selectedFiles[0])?(this.fields.urlInput.setValue(this.selectedFiles[0]),i="gallery-url"):(this.fields.urlInput&&this.fields.urlInput.setValue("http://"),i="gallery-main",this.dialog.find(".wb_media_library").children().each((function(){var n,o=e(this);if(o.data("faIcon")){var s=o.data("faIcon");for(n in t)t.hasOwnProperty(n)&&"object"==typeof t[n]&&"faCharacter"in t[n]&&s.character===t[n].faCharacter&&(o.addClass("active"),i="gallery-icons")}else{var r=o.data("url")?o.data("url").split("?"):[""];for(n in r=wb_builder.makeRelUrl(r[0]),t)t.hasOwnProperty(n)&&"string"==typeof t[n]&&r===wb_builder.makeRelUrl(t[n])&&(o.addClass("active"),i="gallery-main")}}))):this.fields.urlInput&&this.fields.urlInput.setValue("http://"),this.loadUrlImage();var n=this.fields.tabbedPane.selectTabByType(i);this.tabActive=n?n.type:null},d.prototype.getSelectedFileType=function(){var e=this.getSelectedFiles(),t=e.length?e[0]:null;return t?"gallery-url"===this.tabActive?this.fields.urlTypeVideo&&this.fields.urlTypeVideo.getValue()?"video":"image":"gallery-icons"===this.tabActive?"image":d.getFileType(t):null},d.prototype.getSelectedFiles=function(t){var i=[];if("gallery-url"===this.tabActive&&this.urlInfo.url)this.clearFileSelection(),i[i.length]=t?{file:this.urlInfo.url,width:0,height:0,size:0}:this.urlInfo.url;else{var n=t;this.dialog.find(".wb_media_library").children(".active").each((function(){var t,o=e(this);if(o.data("faIcon")){var s=o.data("faIcon");i.push({faIcon:s.names[0],faCharacter:s.character,faXOffset:s.x,faBaseLine:s.y,faWidth:s.w,faHeight:s.h,faFontSize:s.s})}else o.data("external")?(t=o.data("url"),i[i.length]=n?{file:t,width:0,height:0,size:0}:t):(t=o.data("url").split("?"),i[i.length]=n?{file:wb_builder.makeRelUrl(t[0]),width:parseInt(o.data("wb_width"),10),height:parseInt(o.data("wb_height"),10),size:parseInt(o.data("wb_size"),10)}:wb_builder.makeRelUrl(t[0]))}))}return i},d.prototype.showProgress=function(e,t,i){return void 0===t&&(t=!1),this.progress.find(".progress-bar").stop().css("width",1*e+"%"),t&&(this.progress.find(".progress-bar > span").text(1*e+"%"),this.progress.children(".status").html(1*e+"%")),i&&this.progress.children(".status2").html(i),this.dialog.find(".tab-content").fadeTo(0,.3),this.content.append(this.progress),this.progress.fadeIn(),this.progress},d.prototype.hideProgress=function(t,i){var n=i&&"function"==typeof i?i:null;return this.dialog.find(".tab-content").fadeTo(0,1),this.progress.children(".status2").html(""),t?(this.progress.detach(),n&&n()):this.progress.fadeOut((function(){e(this).detach(),n&&n()})),this.progress},d.prototype.showMessage=function(e,t,i,n){n||(n=this.gallery);var o=(t?"<strong>"+t+"</strong> ":"")+e;this.msg.children("span").html(o),this.msg.removeClass("alert-error"),this.msg.removeClass("alert-success"),this.msg.removeClass("alert-info"),this.msg.removeClass("alert-block"),"error"===i||"success"===i||"info"===i||"block"===i?this.msg.addClass("alert-"+i):this.msg.addClass("alert-block"),this.msg.css("opacity",1),n.prepend(this.msg),this.msg.fadeIn()},d.prototype.hideMessage=function(){this.msg.detach()},d.prototype.setVisible=function(e,i,n){this.uploader&&this.uploader.fileupload(e?"enable":"disable"),!e||this.galleryLoaded&&!this.requiresRevalidation||this.loadGallery(this.checkSelected()),t.prototype.setVisible.call(this,e,i,n)},d.prototype.createDefaultButtons=function(){if("all"!==this.mode){var t=e('<a href="javascript:void(0)" iid="fullMediaLibrary"></a>').addClass("btn btn-default").text(__("Full Media Library")).on("click",(function(){var e=d.open(__("Upload media"),!1,"all");return e.galMsg.parent().hide(),e.addButton(__("Close")),e.setVisible(!0),!1})).css({float:wb_builder.rtl?"right":"left"});this.buttons.prepend(t)}},d.prototype.invalidate=function(){for(var e in d.dialogs)d.dialogs[e].requiresRevalidation=!0},d.dialogs={},d.metaCache={},d.metaRetreivalQueue={timer:null,requests:{}},d.open=function(e,t,i,n,o,s){var r="function"==typeof s?s():null,a=i+":"+(t?"1":"0")+":"+(n?"1":"0")+":"+(o?"1":"0")+":"+(r?HasherUtil.crc32(JSON.stringify(r)):"0");"object"!=typeof d.dialogs[a]&&(d.dialogs[a]=new d(e,t,i,n,o));var l=d.dialogs[a];return l.setCustomContent(r),l.setTitle(e),l.removeAllButtons(),l.createDefaultButtons(),l.clearFileSelection(),l},d.reload=function(){for(var e in d.dialogs)d.dialogs.hasOwnProperty(e)&&d.dialogs[e].loadGallery()},d.getPathMeta=function(t,i,o,s){var r;if(s){if("function"==typeof i){t=(""+t).replace(/^.+\/element_compositions\/[^\/]+\/[^\/]+\/(.+)$/,"$1"),r=d.pathToId(t);var a=n.Service.ElementComposition.getLazyComposition(s);i(a&&r in a.fileMeta?a.fileMeta[r]:{})}}else r=d.pathToId(t),d.metaCache.hasOwnProperty(r)?"function"==typeof i&&i(d.metaCache[r]):(d.metaRetreivalQueue.requests.hasOwnProperty(r)||(d.metaRetreivalQueue.requests[r]=[]),d.metaRetreivalQueue.requests[r].push([i,o]),d.metaRetreivalQueue.timer||(d.metaRetreivalQueue.timer=setTimeout((function(){d.metaRetreivalQueue.timer=null;var t=d.metaRetreivalQueue.requests;d.metaRetreivalQueue.requests={};var i=function(e,i){for(var n in t)if(t.hasOwnProperty(n)){for(var o=i?0===e?i.hasOwnProperty(n)?i[n]:void 0:i:void 0,s=0,r=t[n].length;s<r;s++)"function"==typeof t[n][s][e]&&t[n][s][e](o);0===e&&(d.metaCache[n]=o)}};e.post(u.getUrl("upload_get_meta"),JSON.stringify({paths:Object.keys(t)}),(function(e){e&&"object"==typeof e?"error"in e?i(1,e.error):i(0,e.meta):i(1)}),"json").error((function(e){i(1,e)}))}),0)))},d.setPathMeta=function(t,i,n,o){e.post(u.getUrl("upload_set_meta"),JSON.stringify({path:d.pathToId(t),meta:i}),(function(e){if(e&&"object"==typeof e)if("error"in e)"function"==typeof o&&o(e.error);else{d.metaCache[e.path]=e.meta;var t=new r.MediaLibraryMetaChangedBuilderEvent(e.path,e.meta);r.GlobalEvents.triggerEvent("media.meta.changed",t),"function"==typeof n&&n()}else"function"==typeof o&&o()}),"json").error((function(e){"function"==typeof o&&o(e)}))},d.pathToId=function(e){return e.replace(/^gallery\//,"")},n.Service.mediaLibrary={open:d.open,reload:d.reload,getPathMeta:d.getPathMeta,setPathMeta:d.setPathMeta,getFileType:d.getFileType,getIconClass:d.getIconClass,updateFontAwesomeIconInfo:d.updateFontAwesomeIconInfo,getModes:d.getModes},d}.apply(t,n))||(e.exports=o)},"./WB_Menu.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./ElementRegister.ts"),i("./Element.ts"),i("./WB_Site.class.js"),i("./ContextMenu.ts"),i("./ModeManager.js"),i("./EditMenuItemsDialog.js"),i("./Service.ts"),i("./MenuConfirmDialog.ts"),i("./TextControl.ts"),i("./TreeListControl.js"),i("./BuilderEvent.ts"),i("./util/TextUtil.ts"),i("./util/DataUtil.ts"),i("./util/MenuList.ts"),i("./ui/AnimationControl.ts"),i("./element/PropertyType.ts"),i("./util/HistoryUtil.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b){"use strict";var v,_=i("./core/BuilderConfig.ts").wbConfig,C=i("./core/SitePage.ts").Page,w=i("./BorderControl.ts").BorderControl,T=i("./BackgroundControl.ts").BackgroundControl,E=i("./ColorPicker.ts").ColorPicker,I=i("./SpacingSelector.ts").SpacingSelector,x=i("./SizeSelector.ts").SizeSelector,S=i("./FontStyleSelector.ts").FontStyleSelector,k=function(e){e&&this.__construct(e)};return __extends(k,n.Element),t.registerClass("Menu",k),k.lastIndex=0,k.lastPageId=0,k.elemList={},k.strangeElemList={},k.getMenuByUID=function(e,t){var i=k.getElemList(t);for(var n in i)if(i[n].menuUID===e)return i[n];return null},k.getMenuItemById=function(e,t){var i=e.split("_");i.length>1&&(e=i[1]),t||i.length>1&&(t=i[0]);var n=function(e,t){var i,o;for(o in e.items)if(e.items[o].id==t&&(i=e.items[o]),i||(i=n(e.items[o],t)),i)break;return i},o=k.getMenuByUID(t,!0);return o?n(o,e):null},k.hasPage=function(e,t,i){var n,o,s,r=[];if(t)for(n in t.items)for(t.items[n].type&&"internal"!==t.items[n].type&&"page"!==t.items[n].type||t.items[n].targetId==e&&(i?r.push({menuUID:t.menuUID,menuItemId:t.items[n].id}):r.push(t.items[n].id)),s=k.hasPage(e,t.items[n],i),o=0;o<s.length;o++)r.push(s[o]);else for(var a in k.elemList){var l=k.elemList[a];for(n in l.items)for(l.items[n].type&&"internal"!==l.items[n].type&&"page"!==l.items[n].type||l.items[n].targetId==e&&(i?r.push({menuUID:l.menuUID,menuItemId:l.items[n].id}):r.push(l.items[n].id)),s=k.hasPage(e,l.items[n],i),o=0;o<s.length;o++)r.push(s[o]);if(l.itemsTmp&&l.itemsTmp.items)for(n in l.itemsTmp.items)for(l.itemsTmp.items[n].type&&"internal"!==l.itemsTmp.items[n].type&&"page"!==l.itemsTmp.items[n].type||l.itemsTmp.items[n].targetId==e&&(i?r.push({menuUID:l.menuUID,menuItemId:l.itemsTmp.items[n].id}):r.push(l.itemsTmp.items[n].id)),s=k.hasPage(e,l.itemsTmp.items[n],i),o=0;o<s.length;o++)r.push(s[o])}return i?r:m.arrayUnique(r)},k.editMenu=function(){for(var e in k.elemList){var t=k.elemList[e];t.menuElem.children("li").size()>0?t.openEditMenuItems(!1):t.openEditMenuItems(!0);break}},k.getTotalPages=function(e){var t=0;for(var i in k.elemList)k.elemList[i]!==e&&(t+=k.elemList[i].getItemsCount(!0,!0));return t},k.getLandingMenu=function(){var e=k.getElemList(!0);for(var t in e)if(e[t].landing)return e[t];return null},k.updateEmptyLinks=function(){var e=l.Service.menu.getElemList(!0),t=function(e){if(e.items)for(var i in e.items){var n=e.items[i];"internal"===n.type&&n.targetId&&!("#"+n.targetId in wb_builder.site.pages)&&(n.type="empty"),t(n)}};for(var i in e)t(e[i])},k.getElemList=function(e){if(e){var t,i,n={},o={};for(t in k.elemList)(i=k.elemList[t]).menuUID&&(o["#"+i.menuUID]=!0),n[t]=k.elemList[t];for(t in k.strangeElemList)((i=k.strangeElemList[t]).menuUID&&!("#"+i.menuUID in o)||!i.menuUID)&&(i.menuUID&&(o["#"+i.menuUID]=!0),n[t]=i);return n}return k.elemList},k.isMenuItemExist=function(e,t,i){var n=k.getElemList(!0);for(var o in n)if(n[o]!==i){var s=n[o].serialize();for(var r in s.content.tree)if(s.content.tree.hasOwnProperty(r)){var a=s.content.tree[r];if(a.type==e&&a.targetId==t)return!0}}return!1},k.constructStrangeMenu=function(e){var t=new k;t._menuType="strange",t._menuUID=e.content.menuUID?e.content.menuUID:null,t.menuIndex=k.lastIndex++,t.menuId=t.menuType+"_"+t.menuIndex,t.pageId=e.pageId?e.pageId:null,t.isCommon=!!e.isCommon,t.includePages=e.includePages&&"object"==typeof e.includePages?e.includePages:{},t.items={},t.serialize=function(){return{isCommon:this.isCommon,includePages:this.includePages,content:{menuUID:this.menuUID,menuType:this.menuType,tree:this.serializeItems()}}},function(){var t,i,n=[],o={};for(i=0;i<e.content.tree.length;i++)o[e.content.tree[i].id]=i,e.content.tree[i]._items=[];for(i=0;i<e.content.tree.length;i++)0!==(t=e.content.tree[i]).idp?e.content.tree[o[t.idp]]._items.push(t):n.push(t);e.content.tree=n}();var i=function(e,t){for(var n in t)!function(t){var n=new k.MenuItem;n.id=t._ignoreId?null:t.id,delete t._ignoreId,n.id||(n.id=n.getFreeId()),k.MenuItem.idReg["#"+n.id]=!0,n.serialize=function(){return{id:this.id,idp:this.idp,type:this.type,subType:this.subType,targetId:this.targetId,name:this.name,url:this.url,menuUID:this.menuUID}},n.idp=t.idp?t.idp:0,n.menuUID=e.menuUID,n.name=__tr(t.name,wb_builder.site.getLastDefLang())?t.name:__("New Item"),n.type=t.type?t.type:"page",n.subType=t.subType?t.subType:null,n.url=t.url,n.targetId=t.targetId?t.targetId:t.target_id,n.type=n.type?n.type:n.url?"external":"internal",n.items={},t._items&&i(n,t._items),e.items["#"+n.id]=n}(t[n])};return i(t,e.content.tree),t},k.storeStrangeMenu=function(e){var t=k.constructStrangeMenu(e);k.strangeElemList[t.menuId]=t},k.removeStrangeMenu=function(e,t){if(e)if(e.menuId&&e.menuId in k.strangeElemList)delete k.strangeElemList[e.menuId];else if(t&&e.menuUID)for(var i in k.strangeElemList)k.strangeElemList[i].menuUID===e.menuUID&&delete k.strangeElemList[i]},k.firstMenuLoadedCallback=null,k._editDialog=null,k.prototype.noPhotoBg="ico-tb-menu",k.prototype._menuUID=0,Object.defineProperty(k.prototype,"menuUID",{get:function(){return this._menuUID},set:function(e){this._menuUID=e},enumerable:!0,configurable:!0}),k.prototype.menuIndex=0,k.prototype.menuElem=null,k.prototype.menuTmp=null,k.prototype.pagesMenu=null,k.prototype.menuId="",k.prototype.items=null,k.prototype.itemsTmp={},k.prototype._menuType="hmenu",Object.defineProperty(k.prototype,"menuType",{get:function(){return this._menuType},set:function(e){this._menuType=e},enumerable:!0,configurable:!0}),k.prototype._noCollapse=!1,k.prototype._menuItemTextTransform=null,Object.defineProperty(k.prototype,"menuItemTextTransform",{get:function(){return this._menuItemTextTransform},set:function(e){this._menuItemTextTransform=e},enumerable:!0,configurable:!0}),k.prototype._menuItemSpacingCombined=null,k.prototype._menuItemPadding=null,k.prototype._menuItemSpacing=null,Object.defineProperty(k.prototype,"menuItemSpacingCombined",{get:function(){return this._menuItemSpacingCombined},set:function(e){this.setMenuItemSpacingCombined(e)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"menuItemPadding",{get:function(){return this._menuItemPadding},set:function(e){this.setMenuItemPadding(e)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"menuItemSpacing",{get:function(){return this._menuItemSpacing},set:function(e){this.setMenuItemSpacing(e)},enumerable:!0,configurable:!0}),k.prototype._menuItemAlign="left",Object.defineProperty(k.prototype,"menuItemAlign",{get:function(){return this._menuItemAlign},set:function(e){this._menuItemAlign=e},enumerable:!0,configurable:!0}),k.prototype._txtNormal=null,Object.defineProperty(k.prototype,"txtFontControl",{get:function(){return this._txtNormal.textTransform=this._menuItemTextTransform,this._txtNormal},set:function(e){this._txtNormal.font=e.font||"Arial,sans-serif",this._txtHover.font=e.font||"Arial,sans-serif",this._txtActive.font=e.font||"Arial,sans-serif",this._txtNormal.size=e.size||22,this._txtHover.size=e.size||22,this._txtActive.size=e.size||22,this._txtNormal.letterSpacing=e.letterSpacing,this._txtHover.letterSpacing=e.letterSpacing,this._txtActive.letterSpacing=e.letterSpacing,this._txtNormal.textTransform=e.textTransform,this._menuItemTextTransform=e.textTransform,this.updateItemCss(this._txtNormal),this.updateItemCss(this._txtHover),this.updateItemCss(this._txtActive)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"txtNormal",{get:function(){return this._txtNormal},set:function(e){this._txtNormal=e},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"txtFont",{get:function(){return this._txtNormal.font||"Arial,sans-serif"},set:function(e){this._txtNormal.font=e,this._txtHover.font=e,this._txtActive.font=e,this.updateItemCss(this._txtNormal),this.updateItemCss(this._txtHover),this.updateItemCss(this._txtActive)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"txtSize",{get:function(){return this._txtNormal.size||22},set:function(e){this._txtNormal.size=e,this._txtHover.size=e,this._txtActive.size=e,this.updateItemCss(this._txtNormal),this.updateItemCss(this._txtHover),this.updateItemCss(this._txtActive)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"txtLetterSpacing",{get:function(){return this._txtNormal.letterSpacing||0},set:function(e){this._txtNormal.letterSpacing=e,this._txtHover.letterSpacing=e,this._txtActive.letterSpacing=e,this.updateItemCss(this._txtNormal),this.updateItemCss(this._txtHover),this.updateItemCss(this._txtActive)},enumerable:!0,configurable:!0}),k.prototype._txtHover=null,Object.defineProperty(k.prototype,"txtHover",{get:function(){return this._txtHover},set:function(e){this._txtHover=e},enumerable:!0,configurable:!0}),k.prototype._txtActive=null,Object.defineProperty(k.prototype,"txtActive",{get:function(){return this._txtActive},set:function(e){this._txtActive=e},enumerable:!0,configurable:!0}),k.prototype._bgMenu=null,k.prototype._bgSubMenu=null,k.prototype._bgMobMenu=null,k.prototype._bgItemNormal=null,k.prototype._bgItemHover=null,k.prototype._bgItemActive=null,k.prototype._brdMenu=null,k.prototype._brdNormal=null,k.prototype._brdHover=null,k.prototype._brdActive=null,Object.defineProperty(k.prototype,"menuStyle",{get:function(){return{menu:{bg:this._bgMenu,border:this._brdMenu},sub:{bg:this._bgSubMenu},mobile:{bg:this._bgMobMenu,noCollapse:this._noCollapse}}},set:function(e){this._bgMenu=e.menu.bg,this._brdMenu=e.menu.border,this._bgSubMenu=e.sub.bg,this._bgMobMenu=e.mobile.bg,this._noCollapse=e.mobile.noCollapse},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"menuItemStyle",{get:function(){return{normal:{style:this._txtNormal.style||{},color:this._txtNormal.color||"#2c2c2c",bg:this._bgItemNormal,border:this._brdNormal},hover:{style:this._txtHover.style||{},color:this._txtHover.color||"#43852d",bg:this._bgItemHover,border:this._brdHover},active:{style:this._txtActive.style||{},color:this._txtActive.color||"#43852d",bg:this._bgItemActive,border:this._brdActive}}},set:function(e){this._txtNormal.style=e.normal.style,this._txtNormal.color=e.normal.color,this.updateItemCss(this._txtNormal),this._bgItemNormal=e.normal.bg,this._brdNormal=e.normal.border,this._txtHover.style=e.hover.style,this._txtHover.color=e.hover.color,this.updateItemCss(this._txtHover),this._bgItemHover=e.hover.bg,this._brdHover=e.hover.border,this._txtActive.style=e.active.style,this._txtActive.color=e.active.color,this.updateItemCss(this._txtActive),this._bgItemActive=e.active.bg,this._brdActive=e.active.border},enumerable:!0,configurable:!0}),k.prototype._menuItemAnim=null,Object.defineProperty(k.prototype,"menuItemAnim",{get:function(){return this._menuItemAnim},set:function(e){e&&"_preview"in e&&e._preview?(e._preview in e?this.applyAnimation(e[e._preview]):this.applyAnimation(null),delete e._preview):e||this.applyAnimation(null),this._menuItemAnim=e},enumerable:!0,configurable:!0}),k.prototype.landing=null,k.prototype.editDialog=null,k.prototype.editDialogMode=null,k.prototype.origType=null,k.prototype._elemCollapseBtn=null,k.prototype.getDataDefaults=function(){return e.extend(n.Element.prototype.getDataDefaults.call(this),{minHeight:24})},k.prototype.__construct=function(t){t.isCommon=!("isCommon"in t)||!!t.isCommon,t.isMenu=!0,t.width||(t.width=200,t.height=200),n.Element.call(this,t);var i=this;e.isEmptyObject(t.content)&&!e.isEmptyObject(k.elemList)&&e.each(k.elemList,(function(i,n){return e.each(["brdActive","brdHover","brdNormal","brdMenu","bgSubMenu","bgMobMenu","bgMenu","bgItemActive","bgItemHover","bgItemNormal","txtActive","txtHover","txtNormal","menuItemAlign","menuType","menuItemPadding","menuItemSpacing"],(function(e,i){n[i]&&(t.content[i]=n[i])})),!1})),this.setEmptyMessageText(__("Double click to add menu items")),this.displayEmptyMessage(!0),this._menuType="vmenu"===t.content.menuType?"vmenu":"hmenu",this._noCollapse=!!t.content.noCollapse,this._menuUID=t.content.menuUID?t.content.menuUID:null,this._menuUID&&!t._copy&&t.id||(this._menuUID=HasherUtil.crc32Hex(""+(new Date).getTime())),this.menuIndex=k.lastIndex++,this.menuId=this.menuType+"_"+this.menuIndex,this.items={},this.isElementPreview||(t.isStrange?k.strangeElemList["strange_"+this.menuId]=this:k.elemList[this.menuId]=this),this.menuElem=e("<ul></ul>"),this.menuElem.addClass(this.menuType),this.menuElem.attr("id",this.menuId),this.container.append(this.menuElem),this.container.css({overflow:"hidden"}),this.isElementPreview||this.cover.on("click mousemove",(function(e){var t=e.pageX,n=e.pageY,o=!1;for(var s in i.items){var r=i.items[s].elem.offset(),a={width:i.items[s].elem.width(),height:i.items[s].elem.height()};if(t>=r.left&&t<=r.left+a.width&&n>=r.top&&n<=r.top+a.height){"click"===e.type&&(i.items[s].elem.find("a").eq(0).trigger("click"),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()),o=!0;break}}"mousemove"===e.type&&i.cover.css("cursor",o?"pointer":"default")}));var o,s=t.content.tree?t.content.tree:[],r={};for(o=0;o<s.length;o++){var a=new k.MenuItem(s[o]);r["#"+a.id]=a}for(o in r)r[o].idp&&parseInt(r[o].idp,10)!==parseInt(r[o].id,10)&&r["#"+r[o].idp]?r["#"+r[o].idp].addItem(r[o]):(r[o].idp=0,this.addItem(r[o]));if(this.setMenuItemSpacingCombined({paddingTop:2,paddingRight:2,paddingBottom:2,paddingLeft:2,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10}),this._menuType=t.content.menuType?t.content.menuType:this._menuType,this._menuItemTextTransform=t.content.menuItemTextTransform?t.content.menuItemTextTransform:null,this.setMenuItemPadding(t.content.menuItemPadding?t.content.menuItemPadding:this._menuItemPadding),this.setMenuItemSpacing(t.content.menuItemSpacing?t.content.menuItemSpacing:this._menuItemSpacing),this._menuItemAlign=t.content.menuItemAlign?t.content.menuItemAlign:this._menuItemAlign,t.content.menuItemAnim&&"object"==typeof t.content.menuItemAnim&&(this._menuItemAnim=t.content.menuItemAnim),this._txtNormal=t.content.txtNormal?t.content.txtNormal:{color:"#2c2c2c",size:22,decoration:"none",font:"Arial,sans-serif",style:{},align:this._menuItemAlign,css:{font:"normal normal 22px Arial,sans-serif",color:"#2c2c2c","text-decoration":"none"}},this._txtHover=t.content.txtHover?t.content.txtHover:{color:"#43852d",size:22,decoration:"none",font:"Arial,sans-serif",style:{},align:this._menuItemAlign,css:{font:"normal normal 22px Arial,sans-serif",color:"#43852d","text-decoration":"none"}},this._txtActive=t.content.txtActive?t.content.txtActive:{color:"#43852d",size:22,decoration:"none",font:"Arial,sans-serif",style:{},align:this._menuItemAlign,css:{font:"normal normal 22px Arial,sans-serif",color:"#43852d","text-decoration":"none"}},delete this._txtNormal.css["text-align"],delete this._txtHover.css["text-align"],delete this._txtActive.css["text-align"],this._bgItemNormal=t.content.bgItemNormal?t.content.bgItemNormal:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this._bgItemHover=t.content.bgItemHover?t.content.bgItemHover:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this._bgItemActive=t.content.bgItemActive?t.content.bgItemActive:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this._bgMenu=t.content.bgMenu?t.content.bgMenu:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this._bgSubMenu=t.content.bgSubMenu?t.content.bgSubMenu:{color:"#2e2e2e",image:"none",position:"left top",repeat:"repeat",css:{background:"#2e2e2e none repeat scroll left top"}},this._bgMobMenu=t.content.bgMobMenu?t.content.bgMobMenu:{color:"#bcbcbc",image:"none",position:"left top",repeat:"repeat",css:{background:"#bcbcbc none repeat scroll left top"}},this._brdMenu=t.content.brdMenu?t.content.brdMenu:{color:"#000000",style:"none",weight:0,css:{border:"none"}},this._brdNormal=t.content.brdNormal?t.content.brdNormal:{color:"#000000",style:"none",weight:0,css:{border:"none"}},this._brdHover=t.content.brdHover?t.content.brdHover:{color:"#000000",style:"none",weight:0,css:{border:"none"}},this._brdActive=t.content.brdActive?t.content.brdActive:{color:"#000000",style:"none",weight:0,css:{border:"none"}},this.landing=!!t.content.landing,!(this.isElementPreview||t._copy||t.content&&t.content.tree&&t.content.tree.length)){var l=null;t.forceNewDialog||e.each(this.system.site.pages,(function(){return this.isSingle&&(l=this),!1})),l&&!t.forceNewDialog?this.addItem(new k.MenuItem({name:l.title?l.title:__("New Item"),targetId:l.id,isFront:!0,type:"page"})):this.openEditMenuItems(!0)}!this.isElementPreview&&t._copy&&this.convertItemsFromPageToInternal(),this._elemCollapseBtn=e("<a>").addClass("btn btn-default btn-collapser").appendTo(this.container),this._elemCollapseBtn.append('<span class="icon-bar"></span>'),this._elemCollapseBtn.append('<span class="icon-bar"></span>'),this._elemCollapseBtn.append('<span class="icon-bar"></span>'),this.updateStyle(!0),this.elem.bind("resize",(function(){i.onResize()})),setTimeout((function(){i.updateStyle(!0)}),1e3),this.isElementPreview||this.controls.onDblClick((function(){i.menuElem.children("li").size()>0||i.openEditMenuItems(!0)})),this.isElementPreview||h.GlobalEvents.triggerEvent("pages.changed",new h.PagesChangedBuilderEvent),this.modeContextOk.goTo=!0,0!==this.getItemsCount()||this.useMinHeight||(this.useMinHeight=!0,0===this.minHeight&&(this.minHeight=24))},k.prototype.getIcon=function(){return"fa fa-sitemap"},k.prototype.convertItemsFromPageToInternal=function(){if(!this.isElementPreview)for(var e in this.items)"page"===this.items[e].type&&(this.items[e].type="internal"),this.convertItemsFromPageToInternal.call(this.items[e])},k.prototype.supportsAutoWidth=function(){return!0},k.prototype.supportsAutoHeight=function(){return!0},k.prototype.onResize=function(e,t){t||n.Element.prototype.onResize.call(this,e),this.elem.trigger("elementresize",[this])},k.prototype.switchMode=function(e,t,i,o){n.Element.prototype.switchMode.call(this,e,t,i,o),t!==r.MODE_PHONE||this._noCollapse?(this.elem.removeClass("wb-menu-mobile"),this.container.removeClass("collapsed")):(this.elem.addClass("wb-menu-mobile"),this.container.addClass("collapsed"))},k.prototype.getUsedMediaGalleryItems=function(){var e=n.Element.prototype.getUsedMediaGalleryItems.call(this);return this._bgMenu&&this._bgMenu.image&&""!==this._bgMenu.image&&"none"!==this._bgMenu.image&&e.push(this._bgMenu.image),this._bgSubMenu&&this._bgSubMenu.image&&""!==this._bgSubMenu.image&&"none"!==this._bgSubMenu.image&&e.push(this._bgSubMenu.image),this._bgMobMenu&&this._bgMobMenu.image&&""!==this._bgMobMenu.image&&"none"!==this._bgMobMenu.image&&e.push(this._bgMobMenu.image),this._bgItemNormal&&this._bgItemNormal.image&&""!==this._bgItemNormal.image&&"none"!==this._bgItemNormal.image&&e.push(this._bgItemNormal.image),this._bgItemHover&&this._bgItemHover.image&&""!==this._bgItemHover.image&&"none"!==this._bgItemHover.image&&e.push(this._bgItemHover.image),this._bgItemActive&&this._bgItemActive.image&&""!==this._bgItemActive.image&&"none"!==this._bgItemActive.image&&e.push(this._bgItemActive.image),e},k.prototype.getUsedFonts=function(){var e=n.Element.prototype.getUsedFonts.call(this);return this.txtNormal&&this.txtNormal.font&&""!==this.txtNormal.font&&e.push(this.txtNormal.font),this.txtHover&&this.txtHover.font&&""!==this.txtHover.font&&e.push(this.txtHover.font),this.txtActive&&this.txtActive.font&&""!==this.txtActive.font&&e.push(this.txtActive.font),e},k.prototype.serialize=function(){var e=n.Element.prototype.serialize.call(this);return e.content={menuUID:this.menuUID,tree:this.serializeItems(),menuType:this.menuType,noCollapse:this._noCollapse,menuItemTextTransform:this.menuItemTextTransform,menuItemPadding:this.menuItemPadding,menuItemSpacing:this.menuItemSpacing,menuItemAlign:this.menuItemAlign,menuItemAnim:this._menuItemAnim||void 0,txtNormal:this.txtNormal,txtHover:this.txtHover,txtActive:this.txtActive,bgItemNormal:this._bgItemNormal,bgItemHover:this._bgItemHover,bgItemActive:this._bgItemActive,bgMenu:this._bgMenu,bgSubMenu:this._bgSubMenu,bgMobMenu:this._bgMobMenu,brdMenu:this._brdMenu,brdNormal:this._brdNormal,brdHover:this._brdHover,brdActive:this._brdActive,landing:this.landing},e},k.prototype.serializeItems=function(e,t){for(var i in t||(t=[]),e||(e=this.items),e)t.push(e[i].serialize()),this.serializeItems(e[i].items,t);return t},k.prototype.applyAnimation=function(t){var i=this.items,n=0;for(var o in i){var s=i[o];s.elem.css(f.buildAnimCss()),t&&(s.elem.addClass("wb-anim-entry").removeClass("wb-anim-entry-on"),function(i){setTimeout((function(){i.elem.css(f.buildAnimCss(e.extend(t,{delay:0}))),setTimeout((function(){i.elem.addClass("wb-anim-entry-on").removeClass("wb-anim-entry")}),40)}),1e3*t.delay*n)}(s)),n++}},k.prototype.addItem=function(t,i,n){n=void 0!==n&&n,null==i&&(i=-1),t.parent?t.parent.removeItem(t,n):!n&&t.menu&&t.menu.removeItem(t,n);var o,s=n?this.itemsTmp:this.items;if(s["#"+t.id]=t,n){o={};var r=0;e.each(s,(function(e,n){r===i&&(o["#"+t.id]=t),n.id!=t.id&&(o["#"+n.id]=n),r++})),this.itemsTmp=o}else i>=0&&i<this.menuElem.children().size()?(e(this.menuElem.children().get(i)).before(t.elem),o={},this.menuElem.children().each((function(){var t=e(this).wbGetClassInstance();o["#"+t.id]=t})),s=o):this.menuElem.append(t.elem);t.idp=0,t.setMenu(this),t.parent=null},k.prototype.addAllItems=function(e,t){if(!t||!t.menu||t.menu===this){var i,n,o,s=t||this;if(e instanceof d.Item)for(i=0;i<e.getItemCount();i++)o=new k.MenuItem(e.getItem(i).getOriginal()),s.addItem(o),this.addAllItems(e.getItem(i),o);else for(n in e.items)o=new k.MenuItem(e.items[n].serialize()),s.addItem(o),this.addAllItems(e.items[n],o)}},k.prototype.removeItem=function(e,t){var i=t?this.itemsTmp:this.items;i["#"+e.id]=null,delete i["#"+e.id],!t&&e.elem&&(e.setMenu(null),e.parent=null,e.elem.detach())},k.prototype.removeAllItems=function(){for(var e in this.items){var t=this.items[e];this.removeItem(t),t.dispose()}this.items={}},k.prototype.getItemsCount=function(e,t){var i=0;for(var n in this.items)t&&"page"!==this.items[n].type||i++,e&&(i+=k.prototype.getItemsCount.call(this.items[n],e,t));return i},k.prototype.updateItemCss=function(e){var t=u.TextControl.buildCss(e);delete t.css["text-align"],e.css=t.css},k.prototype.updateStyle=function(t,i){n.Element.prototype.updateStyle.call(this,t,i);var o=this;0===this.menuElem.children().size()?(this.displayEmptyMessage(!0),this.menuElem.hide()):(this.displayEmptyMessage(!1),this.menuElem.show());var s={};this.menuElem.removeClass("vmenu"),this.menuElem.removeClass("hmenu"),this.menuElem.addClass(this.menuType);var a=i?this.system.site.isRtlLang(i):this.system.site.rtl;this.menuElem.attr("dir",a?"rtl":"ltr");var l=!0;for(var c in this.items)if(!this.items[c].noMenu){l=!1;break}l?this.elem.addClass("wb-menu-hidden"):this.elem.removeClass("wb-menu-hidden"),this.menuElem.children("li").each((function(){e("a",this).css(e.extend({padding:x.toCSS(o.menuItemPadding)},o.menuItemTextTransform&&"object"==typeof o.menuItemTextTransform?o.menuItemTextTransform.css:{})),e(this).hasClass("active")?(s=e.extend({},o.txtActive.css),s=e.extend(s,o._bgItemActive.css),s=e.extend(s,o._brdActive.css)):(s=e.extend({},o.txtNormal.css),s=e.extend(s,o._bgItemNormal.css),s=e.extend(s,o._brdNormal.css)),s.background=s.background.replace("url('","url('"+wb_builder.userBaseUrl),delete s["text-align"],e(this).children("a").css(s)})),this.menuElem.children("li").css({margin:x.toCSS(this.menuItemSpacing)}),this.menuElem.children("li").css(this._brdNormal.css),this.menuElem.children("li").each((function(){if(e(this).is(":not(:visible)"))return!0;e(this).outerWidth(!0)})),"vmenu"===this.menuType&&this.menuElem.css({minWidth:"auto"}),this.menuElem.css(this._brdMenu.css),(s=e.extend({},this._bgMenu.css)).background=s.background.replace("url('","url('"+wb_builder.userBaseUrl);var u=this.height;s.height="number"==typeof u?u:"",this.menuElem.css(s),"justify"===this.menuItemAlign?(this.menuElem.css({display:"flex","justify-content":"space-between"}),this.elem.css("text-align","")):(this.menuElem.css({display:"","justify-content":"","text-align":this.menuItemAlign}),this.elem.css("text-align",this.menuItemAlign)),this.isElementPreview||"function"!=typeof k.firstMenuLoadedCallback||1!==Object.keys(k.elemList).length||k.firstMenuLoadedCallback(),r.getMode()!==r.MODE_PHONE||this._noCollapse?this.container.removeClass("collapsed"):this.container.addClass("collapsed")},k.prototype.openEditMenuItems=function(e){var t=this;if(k._editDialog||((k._editDialog=new a).onClose=function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-edit-end",t)},wb_builder.maxMenuItems>0&&k._editDialog.setLiteVersionMessage('<div class="wb-tiny-btn">'+("expired"===_.premiumButtonType?'<span style="color: #fff;">'+__("Ask administrator to enable this feature")+"</span>":__("%sGo Premium%s to manage more than %d pages").replace("%s","<a"+(_.upgradeUrl?' href="'+_.upgradeUrl+'"':"")+' target="_blank">').replace("%s","</a>").replace("%d",wb_builder.maxMenuItems))+"</div>")),e||!this.getItemsCount()){k._editDialog.getNewDialog().setMenu(this,wb_builder.site.pages),k._editDialog.getNewDialog().setOnCancel((function(){Object.keys(t.items).length||t.remove(!0,!0)}));var i=wb_builder.maxMenuItems<=0||k.getTotalPages()<wb_builder.maxMenuItems;k._editDialog.getNewDialog().getPanel().setDisabled(!i),k._editDialog.getNewDialog().setVisible(!0)}else k._editDialog.setMenu(this,wb_builder.site.pages),k._editDialog.setVisible(!0);l.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-menu-"+(e?"new":"edit"),this),l.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-start",this)},k.prototype.setLanding=function(e){this.landing=!!e},k.prototype.comProperties=function(){var e=this,t=n.Element.prototype.comProperties.call(this,{size:{minBodyHeight:524},tabs:[{name:__("Menu Style"),children:[{type:"FlowLayout",spacing:20,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Align")},{type:"HAlignSelector",id:"menuItemAlign",justify:!0,change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-menuItemAlign-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:w,id:"brdMenu",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-brdMenu-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Type")},{type:"VerticalLayout",id:"menuType",children:[{type:"RadioBox",label:__("Horizontal"),id:"hmenu",group:"wb_menu_"+this.id+"_menuType"},{type:"RadioBox",label:__("Vertical"),id:"vmenu",group:"wb_menu_"+this.id+"_menuType"}],init:function(){this.getValue=function(){var e="hmenu";return t.hmenu.getValue()?e="hmenu":t.vmenu.getValue()&&(e="vmenu"),e},this.setValue=function(e){t.hmenu.setValue("hmenu"===e),t.vmenu.setValue("vmenu"===e)}}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Collapse on mobile")},{type:"CheckBox",label:__("Do not collapse"),id:"noCollapse"}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Background")},{type:T,id:"bgMenu",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgMenu-change",e)}},{type:"Label",text:__("Submenu background"),css:{marginTop:"10px"}},{type:T,id:"bgSubMenu",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgSubMenu-change",e)}},{type:"Label",text:__("Mobile menu background"),css:{marginTop:"10px"}},{type:T,id:"bgMobMenu",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgMobMenu-change",e)}}],styleClass:"modal-body-inscroll",css:{height:365,overflowY:"auto",marginTop:"10px"}}]},{name:__("Menu Item Style"),type:"menuItemStyles",children:[{type:"FlowLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Font")},{type:"FlowLayout",spacing:-1,children:[{type:"FontFamilySelector",id:"txtFont",css:{width:140},change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtFont-change",e)}},{type:"Button",icon:"glyphicon glyphicon-pencil",click:function(e,t){t.txtFont.getWrappedControl().openEditFontsDialog()}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Size")},{type:x,id:"txtSize",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-txtSize-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Letter spacing")},{type:x,id:"txtLetterSpacing",min:-100,precision:2,step:.01,value:0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Text Transform")},{type:"FontTransformSelector",id:"menuItemTextTransform"}]}]},{type:"FlowLayout",children:[{type:"VerticalLayout",css:{margin:"10px 0"},children:[{type:"Label",text:__("Spacing")},{type:I,id:"menuItemSpacing"}]}]},{type:"TabbedPane",fixedHeight:180,noScroll:!0,tabs:[{name:__("Item"),children:[{type:"FlowLayout",css:{marginTop:10},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:S,id:"textNormalStyle",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-textNormalStyle-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:E,id:"textNormalColor",noTransparent:!0,change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-textNormalColor-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:w,id:"brdNormal",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-brdNormal-change",e)}}]}]},{type:"Label",text:__("Background"),css:{marginTop:10}},{type:T,id:"bgNormal",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-bgNormal-change",e)}}]},{name:__("Item: Hover"),children:[{type:"FlowLayout",css:{marginTop:10},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:S,id:"textHoverStyle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:E,id:"textHoverColor",noTransparent:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:w,id:"brdHover"}]}]},{type:"Label",text:__("Background"),css:{marginTop:10}},{type:T,id:"bgHover"}]},{name:__("Item: Active"),children:[{type:"FlowLayout",css:{marginTop:10},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Style")},{type:S,id:"textActiveStyle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:E,id:"textActiveColor",noTransparent:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:w,id:"brdActive"}]}]},{type:"Label",text:__("Background"),css:{marginTop:10}},{type:T,id:"bgActive"}]}]}]}],callbackFunc:function(t){e.menuItemAlign=t.menuItemAlign.getValue(),e._brdMenu=t.brdMenu.getValue(),e.menuType=t.menuType.getValue(),e._noCollapse=t.noCollapse.getValue(),e._bgMenu=t.bgMenu.getValue(),e._bgSubMenu=t.bgSubMenu.getValue(),e._bgMobMenu=t.bgMobMenu.getValue(),e._brdNormal=t.brdNormal.getValue(),e._brdHover=t.brdHover.getValue(),e._brdActive=t.brdActive.getValue(),e.menuItemTextTransform=t.menuItemTextTransform.getValue(),e.menuItemSpacingCombined=t.menuItemSpacing.getValue(),e.txtNormal=u.combine(t.txtFont,t.txtSize,t.textNormalColor,t.textNormalStyle,null,t.txtLetterSpacing),delete e.txtNormal.css["text-align"],e.txtHover=u.combine(t.txtFont,t.txtSize,t.textHoverColor,t.textHoverStyle,null,t.txtLetterSpacing),delete e.txtHover.css["text-align"],e.txtActive=u.combine(t.txtFont,t.txtSize,t.textActiveColor,t.textActiveStyle,null,t.txtLetterSpacing),delete e.txtActive.css["text-align"],e._bgItemNormal=t.bgNormal.getValue(),e._bgItemHover=t.bgHover.getValue(),e._bgItemActive=t.bgActive.getValue(),e.updateStyle()}});t.menuItemAlign.setValue(this.menuItemAlign),t.brdMenu.setValue(this._brdMenu),t.menuType.setValue(this.menuType),t.noCollapse.setValue(this._noCollapse),t.bgMenu.setValue(this._bgMenu),t.bgSubMenu.setValue(this._bgSubMenu),t.bgMobMenu.setValue(this._bgMobMenu),t.brdNormal.setValue(this._brdNormal),t.brdHover.setValue(this._brdHover),t.brdActive.setValue(this._brdActive),t.menuItemTextTransform.setValue(this.menuItemTextTransform),t.menuItemSpacing.setValue(this.menuItemSpacingCombined),t.txtFont.setValue(this.txtNormal.font),t.txtSize.setValue(this.txtNormal.size),t.txtLetterSpacing.setValue("letterSpacing"in this.txtNormal?this.txtNormal.letterSpacing:0),t.textNormalColor.setValue(this.txtNormal.color),t.textNormalStyle.setValue(this.txtNormal.style),t.textHoverColor.setValue(this.txtHover.color),t.textHoverStyle.setValue(this.txtHover.style),t.textActiveColor.setValue(this.txtActive.color),t.textActiveStyle.setValue(this.txtActive.style),t.bgNormal.setValue(this._bgItemNormal),t.bgHover.setValue(this._bgItemHover),t.bgActive.setValue(this._bgItemActive)},k.prototype.comPropertiesField=function(e){var t,i;if(e&&(t=e.match(/^menu\-(.+)$/))){if(!k._editDialog)return null;if("new"===(t=t[1].split("-"))[0]?i=k._editDialog.getNewDialog():"edit"===t[0]&&(i=k._editDialog),"apply"===t[1])return i.primaryButton?{_elem:i.primaryButton,getElem:function(){return this._elem}}:null;if(t[1].match(/^select\:[0-9]+$/i)){var o=i.getTreeRootItem(1*t[1].split(":")[1]);return o?{_elem:o._elem,getElem:function(){return this._elem}}:null}return t[1]in i.fields&&i.fields[t[1]]?i.fields[t[1]]:null}return e.match(/^(?:txt(?:Normal|Active|Hover).*|(?:brd|bg)(?:Sub|Mob|)Menu)$/)?e="menuItemStyle":e.match(/^txt(?:Font|Size)$/)&&(e="txtFontControl"),n.Element.prototype.comPropertiesField.call(this,e)},k.prototype.applyComProperties=function(e){var t,i;if(e&&(t=e.match(/^menu\-(.+)$/))){if(!k._editDialog)return;if("new"===(t=t[1].split("-"))[0]?i=k._editDialog.getNewDialog():"edit"===t[0]&&(i=k._editDialog),"apply"===t[1])i._applyAction();else if(t[1].match(/^select\:[0-9]+$/i)){var o=1*t[1].split(":")[1];i.selectTreeRootItem(o),l.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-menu-edit-select:"+o,this)}}else n.Element.prototype.applyComProperties.call(this,e)},k.prototype.toggleDialogMode=function(e,t){this.editDialogMode!==e&&("add"===e?(this.reloadTree(t.miList),t.miId.val(null).removeData(),this.editDialog&&this.editDialog.buttons.children("[iid='"+__("Save")+"']").html(__("Add")),t.miType.input.find("input").removeAttr("checked"),t.miType.input.find("input:first").attr("checked","checked"),t.miType.input.find("input").change(),t.miType.input.find("input[value='blank']").parent().show(),t.miName.setValue(""),t.miTypePages.setValue(""),t.miTypeUrl.setValue("http://"),t.miTarget.setValue(""),t.miNoMenu&&t.miNoMenu.setValue(!1)):(this.editDialog&&this.editDialog.buttons.children("[iid='"+__("Save")+"']").html(__("Save")),t.miType.input.find("input[value='blank']").parent().hide()),this.editDialogMode=e)},k.prototype.reloadTree=function(t,i){i||t.jstree("refresh",-1),t.find("li").unbind("mouseenter").unbind("mouseleave").each((function(){var i=e(this),n=i.children("button.btn");0===n.size()&&(n=e('<button class="btn btn-mini btn-link jstree-x-btn"><i class="icon-remove"></i></button>').bind("click",(function(){t.jstree("remove",i)})),i.append(n))})).mouseenter((function(i){i.stopPropagation();var n=this;t.find("button").hide(),e(this).parents("li").length?setTimeout((function(){t.find("button").hide(),e(n).children("button").show()}),1):e(this).children("button").show()})).mouseleave((function(){e(this).children("button").hide(),e(this).parents("li").mouseenter()}))},k.prototype.pagesPre={},k.prototype.reloadMenu=function(t,i,n){var o=this;i||(i=0,"object"==typeof this.items&&null!==this.items&&e.each(this.items,(function(e,t){o.removeItem(t)}))),i++,e.each(t,(function(e,t){t.id=String(t.id),t.targetId=String(t.targetId),t.idp=String(t.idp);var s,r="p"===t.id.substr(0,1)?t.id.substr(1):t.id,a="p"===t.targetId.substr(0,1)?t.targetId.substr(1):t.targetId,l="p"===t.idp.substr(0,1)?t.idp.substr(1):t.idp;t.idp=l,!t.type||"internal"!==t.type&&"page"!==t.type?!t.type&&a&&"p"!==t.targetId.substr(0,1)&&(o.pagesPre[r]=a):t.id===t.targetId?o.pagesPre[r]?t.targetId=o.pagesPre[r]:((s=new C({})).title=t.name,s.id=o.system.site.getFreeId(),o.system.site.addPage(s),t.targetId=s.id,o.pagesPre[r]=s.id):"p"===t.targetId.substr(0,1)?o.pagesPre[a]?t.targetId=o.pagesPre[a]:((s=new C({})).title=t.name,s.id=o.system.site.getFreeId(),o.system.site.addPage(s),t.targetId=s.id,o.pagesPre[a]=s.id):o.pagesPre[r]=a,t.id=r;var c=new k.MenuItem(t);t.items&&o.reloadMenu(t.items,i,c),1===i?o.addItem(c):n&&n.addItem(c,null,!1)}))},k.prototype.setMenuItemPadding=function(e){"object"==typeof e&&e.length?2===e.length?(e[2]=e[0],e[3]=e[1]):4!==e.length&&(e=[0,0,0,0]):e=[e=isNaN(parseInt(e,10))?0:parseInt(e,10),e,e,e],this._menuItemPadding=e,this._menuItemSpacingCombined.paddingTop=e[0],this._menuItemSpacingCombined.paddingRight=e[1],this._menuItemSpacingCombined.paddingBottom=e[2],this._menuItemSpacingCombined.paddingLeft=e[3]},k.prototype.setMenuItemSpacing=function(e){"object"==typeof e&&e.length?2===e.length?(e[2]=e[0],e[3]=e[1]):4!==e.length&&(e=[0,0,0,0]):e=[e=isNaN(parseInt(e,10))?0:parseInt(e,10),e,e,e],this._menuItemSpacing=e,this._menuItemSpacingCombined.marginTop=e[0],this._menuItemSpacingCombined.marginRight=e[1],this._menuItemSpacingCombined.marginBottom=e[2],this._menuItemSpacingCombined.marginLeft=e[3]},k.prototype.setMenuItemSpacingCombined=function(e){this._menuItemSpacingCombined=e,this._menuItemPadding=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],this._menuItemSpacing=[e.marginTop,e.marginRight,e.marginBottom,e.marginLeft]},k.getUsedPages=function(t){var i={};return e.isEmptyObject(t.items)||e.each(t.items,(function(t,n){n.targetId&&(void 0===n.type&&!n.url||"internal"===n.type||"page"===n.type)&&(i[n.targetId]=n.id),e.isEmptyObject(n.items)||(i=e.extend(i,k.getUsedPages(n)))})),i},k.getAllUsedPages=function(){var t={};return e.each(k.elemList,(function(i,n){t=e.extend(t,k.getUsedPages(n))})),t},k.deleteUnusedPages=function(){if(!this.isElementPreview){var t=k.getAllUsedPages(),i={};e.each(t,(function(e,t){i["#"+e]=1}));var n=e.isEmptyObject(i)?"#"+wb_builder.pageId:null;for(var o in wb_builder.site.pages)i[o]||o==n?wb_builder.site.pages[o].isSingle=!0:wb_builder.site.removePage(wb_builder.site.pages[o])}},k.prototype.cloneItems=function(t){var i={};return e.each(t,(function(t,n){var o=e.extend(!0,{},n);e.each(o,(function(t,i){if("items"===t){var n={};e.each(i,(function(e,t){var i=new k.MenuItem(t);i.parent=o,n[e]=i})),o[t]=n}})),i[t]=o})),i},k.prototype.initContextMenu=function(){if(n.Element.prototype.initContextMenu.call(this),this.menu){var e=this.contextMenuFirstIndex,t=this;this.menu.insertItemAt(e++,"newMenu",__("New Menu Item"),(function(){t.openEditMenuItems(!0)}),null,null,null,"glyphicon glyphicon-plus"),this.menu.insertItemAt(e++,"editManu",__("Edit Menu"),(function(){t.openEditMenuItems(!1)}),null,null,null,"glyphicon glyphicon-pencil"),this.pagesMenu=new s.ContextMenu,this.menu.insertItemAt(e++,"goTo",__("Go to page"),this.pagesMenu,null,null,null,"glyphicon glyphicon-folder-open"),this.pagesMenu.setHeight(200),this.menu.addSeparator(e++)}},k.prototype.updateContextMenu=function(e){n.Element.prototype.updateContextMenu.call(this,e),this.pagesMenu.removeAllItems();for(var t=this,i=g.buildMenuStruct(!1,!1,this),o=0;o<i.length;o++){var s=i[o];if(0!==s.items.length)for(var r=0;r<s.items.length;r++){for(var a=s.items[r],c="",u=a.lvl;u>0;)u--,c+="&nbsp;&nbsp;&nbsp;&nbsp;";!function(e){t.pagesMenu.addItem("pages_menu_item_"+e.uID,c+e.name,(function(){e.navigate()}),e.isCurrent(),!1,e)}(a)}}this.parent&&l.Service.paste.addPaste(this.menu,this.parent,this,!0)},k.prototype.deletePagesByItems=function(e){var t;if(e&&"object"==typeof e)for(var i in e)"page"===e[i].type&&parseInt(e[i].targetId)&&(t=wb_builder.site.getPage(parseInt(e[i].targetId)))&&!l.Service.menu.isMenuItemExist(e[i].type,e[i].targetId,this)&&(wb_builder.site.removePage(t),this.deletePagesByItems(e[i].items))},k.prototype.onBeforeRemove=function(t){if(n.Element.prototype.onBeforeRemove.call(this,t),!(t.preventRemoval||t.noConfirm||t.batch||"menu"in t.requiredConfirmations)){var i=t;t.requiredConfirmations.menu=function(){var t=e.Deferred();return c.confirmDelete((function(){i.deletePages=!0,t.resolve()}),(function(){t.reject()})),t.promise()}}},k.prototype.releaseResources=function(e){n.Element.prototype.releaseResources.call(this,e),this.isElementPreview||(k.elemList[this.menuId]=null,delete k.elemList[this.menuId],l.Service.menu.removeStrangeMenu(this,!0),e.deletePages?(e.noHistory||(0===wb_builder.historyGroupState&&console.error("History is not recording a group. Pages snapshot will be as a separate undo/redo action, which will cause inconsistencies."),b.createSitePagesSnapshotHistoryRecord()),wb_builder.historyCurentAction||this.deletePagesByItems(this.items)):(e.noHistory||b.createRemoveStrangeMenuHistoryRecord(this.menuId,this.menuUID),k.storeStrangeMenu(this.serialize())),e.batch||h.GlobalEvents.triggerEvent("pages.changed",new h.PagesChangedBuilderEvent))},k.prototype.onSwitchLanguage=function(e){for(var t in n.Element.prototype.onSwitchLanguage.call(this,e),this.updateStyle(!0,e),this.items)this.items[t].onSwitchLanguage(e)},k.prototype.registerProperties=function(){n.Element.prototype.registerProperties.call(this),this.registerProperty({name:"editButton",type:y.PropertyType.EditMenuButton,uiComponentOptions:{click:function(){this.openEditMenuItems(!1)}}}),this.registerProperty({name:"txtNormal"}),this.registerProperty({name:"txtHover"}),this.registerProperty({name:"txtActive"}),this.registerProperty({name:"menuItemPadding"}),this.registerProperty({name:"menuItemSpacing"}),this.registerProperty({name:"menuItemAlign",type:y.PropertyType.MenuItemAlign,uiComponentOptions:{justify:!0}}),this.registerProperty({name:"menuType",type:y.PropertyType.MenuType}),this.registerProperty({name:"menuStyle",type:y.PropertyType.MenuStyle}),this.registerProperty({name:"menuItemStyle",type:y.PropertyType.MenuItemStyle,dependencies:["txtNormal","txtHover","txtActive"]}),this.registerProperty({name:"txtFontControl",type:y.PropertyType.MenuFontControl,dependencies:["txtNormal"]}),this.registerProperty({name:"txtFont",type:y.PropertyType.MenuFontFamily,dependencies:["txtNormal"]}),this.registerProperty({name:"txtSize",type:y.PropertyType.MenuFontSize,dependencies:["txtNormal"]}),this.registerProperty({name:"txtLetterSpacing",type:y.PropertyType.MenuLetterSpacing,dependencies:["txtNormal"]}),this.registerProperty({name:"menuItemTextTransform",type:y.PropertyType.MenuTransform}),this.registerProperty({name:"menuItemSpacingCombined",type:y.PropertyType.MenuItemSpacing,dependencies:["menuItemPadding","menuItemSpacing"]}),this.registerProperty({name:"menuItemAnim",type:y.PropertyType.MenuItemAnimation}),this.registerProperty({name:"menuUID",type:y.PropertyType.DebugMenuUID})},k.MenuItem=v=function(e){e&&this.__construct(e)},v.idReg={},v.prototype.elem=null,v.prototype.virtual=!1,v.prototype.menu=null,v.prototype.menuUID=null,v.prototype.menuElem=null,v.prototype.parent=null,v.prototype.items=null,v.prototype.itemCount=0,v.prototype.id=0,v.prototype.idp=0,v.prototype.targetId=0,v.prototype.anchor=0,v.prototype.name="",v.prototype.alias="",v.prototype.url="",v.prototype.type="internal",v.prototype.subType=null,v.prototype.target="_self",v.prototype.copyFrom=null,v.prototype.isNew=!1,v.prototype.noMenu=!1,v.prototype._clickIsSet=!1,v.prototype.__construct=function(t){this.virtual=!(!t||!t.virtual),this.virtual?this.isNew=!!t.isNew:(this.elem=e('<li><a href="javascript:void(0)"></a></li>'),this.elem.wbSetClassInstance(this)),this.id=t._ignoreId?null:t.id,delete t._ignoreId,this.type=t.type,this.subType=t.subType?t.subType:null,this.id||(this.id=this.getFreeId()),v.idReg["#"+this.id]=!0,this.idp=t.idp?t.idp:0,this.targetId=t.targetId?t.targetId:t.target_id,this.anchor=t.anchor?t.anchor:null,this.setName(t.name),this.alias=t.alias,this.url=t.url,this.target=t.target,this.menuUID=t.menuUID,"_blank"!==this.target&&(this.target="_self"),this.setNoMenu(!!t.noMenu),this.type=this.type?this.type:this.url?"external":"internal",this.items={},this.virtual||(wb_builder.pageId!=this.targetId||(this.type||this.url)&&(!this.type||"internal"!==this.type&&"page"!==this.type)||this.elem.addClass("active"),this.elem.children("a").hover((function(){e(this).hasClass("dropdown")&&e(this).addClass("open")}),(function(){e(this).removeClass("open")})),this.initItemClick())},v.prototype.convertItemsFromPageToInternal=function(){k.prototype.convertItemsFromPageToInternal.call(this)},v.prototype.fixItemType=function(){var e=wb_builder.site.pages;if(!this.type||"internal"===this.type&&this.targetId){var t="#"+this.targetId in e?e["#"+this.targetId]:null;t&&t.title&&__tr(t.title)&&__tr(t.title)===__tr(this.name)&&(this.type="page")}},v.prototype.initItemClick=function(){var e=this;this._clickIsSet||(this.elem.find("a").on("click",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),g.navigate(e)})),this._clickIsSet=!0)},v.prototype.getFreeId=function(){for(var e=100;e<5e3;e++)if(!v.idReg["#"+e])return e;return 1},v.prototype.serialize=function(){var e={id:this.id,idp:!this.idp&&this.parent?this.parent.id:this.idp,type:this.type,subType:this.subType,targetId:this.targetId,anchor:this.anchor&&"object"==typeof this.anchor?{name:this.anchor.name,pageId:this.anchor.pageId}:null,name:this.name,alias:this.alias,url:this.url,target:this.target,noMenu:this.noMenu,copyFrom:this.copyFrom,menuUID:this.menuUID?this.menuUID:this.menu&&this.menu.menuUID?this.menu.menuUID:null};return this.virtual&&(e.isNew=!!this.isNew),e},v.prototype.addItem=function(t,i,n){var o;if(null==i&&(i=-1),t.parent?t.parent.removeItem(t,n):t.menu&&t.menu.removeItem(t,n),this.virtual&&(t.virtual=!0),n){o={};var s=0;e.each(this.items,(function(e,n){s===i&&(o["#"+t.id]=t),n.id!=t.id&&(o["#"+n.id]=n),s++})),this.items=o}else if(this.virtual||(this.menuElem||(this.menuElem=e('<ul class="dropdown-menu pull-right"></ul>')),0===this.menuElem.children().length&&(this.elem.append(this.menuElem),this.elem.addClass("dropdown"),this.elem.children("a").addClass("dropdown-toggle"),this.elem.children("a").attr("data-toggle","dropdown"))),i>=0&&i<this.getItemCount()){for(var r in this.virtual||e(this.menuElem.children().get(i)).before(t.elem),o=[],this.items)o.push(this.items[r]);o.splice(i,0,t),this.items={};for(var a=0;a<o.length;a++)this.items["#"+o[a].id]=o[a]}else this.virtual||(this.menuElem.append(t.elem),this.items["#"+t.id]=t);this.items["#"+t.id]=t,t.setMenu(this.menu),t.parent=this,t.idp=this.id},v.prototype.setMenu=function(e){this.menu=e,this.menuUID=e?e.menuUID:null},v.prototype.getItem=function(e){return this.items["#"+e]},v.prototype.removeItem=function(e,t){t=void 0!==t&&t,this.items["#"+e.id]=null,delete this.items["#"+e.id],t||(e.setMenu(null),e.parent=null,e.idp=null,this.virtual||(e.elem&&e.elem.detach(),this.menuElem&&0===this.menuElem.children().length&&(this.menuElem.detach(),this.elem&&(this.elem.removeClass("dropdown"),this.elem.children("a").removeClass("dropdown-toggle"),this.elem.children("a").removeAttr("data-toggle")))))},v.prototype.dispose=function(){for(var e in this.parent?this.parent.removeItem(this):this.menu&&this.menu.removeItem(this),this.items)this.items[e].dispose();!this.virtual&&this.elem&&(this.elem.remove(),this.elem.empty(),delete this.elem)},v.prototype.getItemCount=function(){var e=0;for(var t in this.items)e++;return e},v.prototype.getParent=function(){return this.parent},v.prototype.setName=function(e,t){if(this.name=e,!this.virtual){var i=__tr(this.name,t,__tr(this.name,wb_builder.site.getLastDefLang()),!0,!0);i||(i=__("New Item")),this.elem.children("a").text(p.stripTags(i))}},v.prototype.setNoMenu=function(e){this.noMenu=e,this.virtual||(this.noMenu?this.elem.css({display:"none"}):this.elem.css({display:""}))},v.prototype.onSwitchLanguage=function(e){this.setName(this.name,e)},l.Service.menu={MenuItem:k.MenuItem,getElemList:k.getElemList,getFirstMenuLoadedCallback:function(){return k.firstMenuLoadedCallback},setFirstMenuLoadedCallback:function(e){k.firstMenuLoadedCallback=e},getLandingMenu:k.getLandingMenu,editMenu:k.editMenu,getMenuByUID:k.getMenuByUID,storeStrangeMenu:function(e){k.storeStrangeMenu(e)},removeStrangeMenu:function(e,t){k.removeStrangeMenu(e,t)},updateEmptyLinks:function(){k.updateEmptyLinks()},getMenuItemById:function(e,t){return k.getMenuItemById(e,t)},isMenuItemExist:function(e,t,i){return k.isMenuItemExist(e,t,i)}},k}.apply(t,n))||(e.exports=o)},"./WB_MsgDialog.class.js":function(e,t,i){var n,o;n=[i("./WB_Dialog.class.js"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){"use strict";var i=function(e,t,i,n,o,s){this.__construct(e,t,i,n,o,s)};return(i.prototype=new e("%inherit%")).constructor=i,i.prototype.msg=null,i.prototype.__construct=function(i,n,o,s,r,a){if(e.prototype.__construct.call(this,i,r),this.msg=t('<div class="alert alert-danger" style="margin: 0px;"><span></span></div>'),this.content.empty().append(this.msg),this.addButton(__("OK")),a){var l=this;this.setTitleVisible(!1),this.setFooterVisible(!1),this.dialog.on("click",(function(){l.setVisible(!1)}))}(n||o)&&this.setMessage(n,o,s)},i.prototype.setMessage=function(e,t,i){"error-big"===i&&(i="error");var n=(t?"<strong>"+t+"</strong> ":"")+e;if(this.msg.children("span").html(n),this.msg.removeClass("alert-error alert-danger alert-success alert-info alert-block alert-error-big"),"error"===i||"danger"===i||"success"===i||"info"===i||"block"===i)this.msg.addClass("alert-"+("error"===i?"danger":i));else if("error-big"===i){this.msg.addClass("alert-error-big");var o=wb_builder.commonErrorMessage?wb_builder.commonErrorMessage:__("If you see this error once again, please contact us through the �Support� section (lower left).");n=(n?n+"<br><br>":"")+__("If you see this message, it means that we are already informed and are working on it. We apologize for the inconvenience.")+"<br><br><strong>"+__("Relax for 5 minutes.")+"</strong><br>"+o,this.msg.children("span").html(n)}else this.msg.addClass("alert-block")},i.prototype.setVisible=function(t,i,n){e.prototype.setVisible.call(this,t,i,n)},window.WB_MsgDialog=i,i}.apply(t,n))||(e.exports=o)},"./WB_MusicPlayer.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n){"use strict";var o=function(e){e&&this.__construct(e)};return __extends(o,t.Element),e.registerClass("MusicPlayer",o),o.onScriptReadyOptions={loading:!1,ready:!1,listeners:[]},o.onScriptReady=function(e,t){if(this.onScriptReadyOptions.ready)t.call(e);else if(this.onScriptReadyOptions.listeners.push({inst:e,func:t}),!this.onScriptReadyOptions.loading){this.onScriptReadyOptions.loading=!0;var i=this;n.getScript(wb_builder.modBaseUrl+"site/js/MusicPlayer.js",(function(){n.getScript(wb_builder.modBaseUrl+"js/lib/audiojs/audio.min.js",(function(){i.onScriptReadyOptions.ready=!0,i.onScriptReadyOptions.loading=!1;for(var e=0;e<i.onScriptReadyOptions.listeners.length;e++)i.onScriptReadyOptions.listeners[e].func.call(i.onScriptReadyOptions.listeners[e].inst)}))}))}},o.prototype.noPhotoBg="ico-tb-musicplayer",o.prototype._audioUrl=!1,Object.defineProperty(o.prototype,"audioUrl",{get:function(){return this._audioUrl},set:function(e){this._audioUrl=e},enumerable:!0,configurable:!0}),o.prototype._autoPlay=!0,Object.defineProperty(o.prototype,"autoPlay",{get:function(){return this._autoPlay},set:function(e){this._autoPlay=e},enumerable:!0,configurable:!0}),o.prototype.hideSelf=!0,o.prototype.player=null,o.prototype.__construct=function(e){t.Element.call(this,e),this.displayEmptyMessage(!0),this._audioUrl=e.content.audioUrl?e.content.audioUrl:null,this._autoPlay=!!e.content.autoPlay&&e.content.autoPlay,this.setSize(this.width,this.height),this._audioUrl?this._audioUrl instanceof Array||(this._audioUrl=[this._audioUrl]):this._audioUrl=[],this.updateStyle(!0)},o.prototype.getDataDefaults=function(){return n.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:100})},o.prototype.supportsAutoWidth=function(){return!0},o.prototype.supportsAutoHeight=function(){return!0},o.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={audioUrl:this.audioUrl,autoPlay:this.autoPlay},e},o.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i),this.displayEmptyMessage(!1),o.onScriptReady(this,(function(){this.player?(this.player.removeAllItems(),this.player.addAllItems(this.audioUrl)):(this.player=window.WBMusicPlayer.create(this.container.get(0),{noInit:!0}),this.player.addAllItems(this.audioUrl))}))},o.prototype.getParamsString=function(e,t){var i=e||this.width,n=t||this.height,o="showplaylistnumbers=0&mp3="+this.getMP3String(this.audioUrl)+"&title="+this.getTitleString(this.audioUrl)+"&width="+i+"&height="+n;return this.autoPlay&&(o+="&autoplay=1"),o},o.prototype.getMP3String=function(e){for(var t,i="",n=0;t=e[n];n++)i+="|"+encodeURIComponent(t);return i.substring(1)},o.prototype.getTitleString=function(e){e||(e=this.audioUrl);for(var t,i="",n=0;t=e[n];n++){var o;0===t.indexOf("/")&&(t=t.substring(1)),t.lastIndexOf("/")===t.length-1&&(t=t.substring(0,t.length-1)),(o=t.split("/").pop())&&(i+="|"+o)}return i.substring(1)},o.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("MP3 file(s)")},{type:"ImageSelector",id:"audioUrl",mode:"audio",multiselect:!0,mediatabs:!1,css:{marginBottom:"20px"},select:function(){i.testPlayer.update(this.getValues())}},{type:"CheckBox",id:"autoPlay",label:__("Start playing when page is loaded"),helpText:__("This option may not work properly on some browsers.")}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"testPlayer",styleClass:"thumbnail",css:{maxHeight:210,overflowY:"hidden"},init:function(){var e=null;this.update=function(t){var i,n=this,s=[];if(t)for(i=0;i<t.length;i++)s.push(wb_builder.userBaseUrl+t[i]);e?(e.removeAllItems(),e.addAllItems(s)):o.onScriptReady(this,(function(){(e=window.WBMusicPlayer.create(n._elem.get(0),{noInit:!1})).addAllItems(s)}))}}}]}]}]}],callbackFunc:function(t){e.audioUrl=t.audioUrl.getValues(),e.autoPlay=t.autoPlay.getValue()}});i.audioUrl.setValues(this.audioUrl),i.autoPlay.setValue(this.autoPlay)},o.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"audioUrl",type:i.PropertyType.MusicPlaylist}),this.registerProperty({name:"autoPlay",type:i.PropertyType.MusicAutoStart})},o}.apply(t,n))||(e.exports=o)},"./WB_Preloader.class.js":function(e,t,i){var n,o;n=[i("./WB_Dialog.class.js"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){"use strict";var n=i("./core/BuilderConfig.ts").wbConfig,o=function(e){this.__construct(e)};return o.maxRetries=3,o.hints={builder:[{title:__("Drag & Drop"),image:"modules/builder/img/hints/drag_and_drop.gif",timesShown:0},{title:"",image:"modules/builder/img/hints/publish.gif"}]},(o.prototype=new e("%inherit%")).constructor=o,o.prototype.progress=null,o.prototype.msg=null,o.prototype.cancelMonitoring=!1,o.prototype.retries=0,o.prototype.mon=null,o.prototype.loaderStack=null,o.prototype.stackIndex=-1,o.prototype._container=null,o.prototype._nContainer=null,o.prototype._hintContainer=null,o.prototype.hintsCategory=null,o.prototype.__construct=function(i){e.prototype.__construct.call(this,i,!0);var n=this;this.content.empty(),this._container=t("<div>").appendTo(this.content),this._nContainer={elem:null,elems:null,title:null,message:null,init:function(e){return this.elem=t("<div>"),this.elem.appendTo(e),this.elems=[],this},addMessage:function(e,i,n){var o=t("<div>").addClass("alert alert-"+(n||"info"));i&&t("<strong>").text(i).appendTo(o),e&&t("<span>").html((i?" ":"")+e).appendTo(o),(i||e)&&(o.appendTo(this.elem),this.elems.push(o))},clearMessages:function(){for(var e=0;e<this.elems.length;e++)this.elems[e].remove();this.elems=[]}}.init(this.content),this._hintContainer=t('<div class="preloader-hint hidden">').appendTo(this.content),this.loaderStack=[],this.pushStack(),this.xButton.hide(),this.onClose=function(){n.cancelMonitoring=!0}},o.prototype.setNotification=function(e,t,i){this._nContainer.addMessage(e,t,i)},o.prototype.clearNotifications=function(){this._nContainer.clearMessages()},o.prototype.monitor=function(e,i,s,r,a,l){var c=e,u=this,d=i,h="function"==typeof a?a:null;"object"!=typeof e&&(e={url:e});var p=e.url,m="object"==typeof e.opts?e.opts:{};m.ts=(new Date).getTime(),s||(this.cancelMonitoring=!1,this.retries=0,m.reset=1);var g=!!r,f=!!l,y=function(e,i,o){if(!u.cancelMonitoring)if(e&&"object"==typeof e||(e={complete:!1,error:__("Server error")},function(e,i,o){var s="unknown error";if(!(e&&e.status>=400&&e.status<600)){if(e&&e.readyState>=2&&e.readyState<=4)s="Response error (status: "+e.status+" "+e.statusText+")",e.readyState>=3&&(s+=" (res: "+e.responseText+")");else{var r="";if(e&&"function"==typeof e.getAllResponseHeaders){var a=e.getAllResponseHeaders();if(r="["+(a?"Y":"N")+"]",0===e.status&&"error"===e.statusText&&!a)return}s="Network error ("+(e?e.readyState:"?")+")"+r,e&&(0!==e.status||e.statusText)&&(s+=" (status: "+e.status+" "+e.statusText+")")}o&&(s+=" :URL: "+o);try{t.ajax(n.baseUrl+"error/log-js-error",{data:JSON.stringify({error:s}),contentType:"application/json; charset=UTF-8",type:"POST"}).fail((function(e,t,i){console.error("Failed logging error: "+i)}))}catch(e){console.error("Failed logging error: "+e)}}}(o,0,p)),e.error){if(h&&h(e.error))return;var s="object"==typeof e.error&&"title"in e.error?e.error.title:e.error;u.setMessage(__pr(s),__("Error:"),"danger"),setTimeout((function(){u.setVisible(!1),"function"==typeof d&&d(!1,e.error)}),500)}else if(e.complete)u.setMessage("",__("Complete"),"success"),u.setProgress(100),setTimeout((function(){g||f||u.setVisible(!1),"function"==typeof d&&d(!0,null,e)}),500);else{if(u.cancelMonitoring)return;void 0!==e.text&&u.setMessage(__pr(e.text)),void 0!==e.progress&&u.setProgress(e.progress),setTimeout((function(){u.cancelMonitoring||(u.retries=0,u.monitor(p,d,!0,null,h,f))}),5e3)}},b=function(e,t,i){if(!u.cancelMonitoring&&++u.retries<=o.maxRetries)setTimeout((function(){u.monitor(c,d,!0,null,h,f)}),1e3);else{var n=__("Server error")+(e.status&&200!==e.status?" ("+e.status+")":""),s="responseJSON"in e?e.responseJSON:null;s&&"object"==typeof s&&"error"in s&&s.error&&(n+=": "+s.error),u.setMessage("",__("Server error"),"error"),setTimeout((function(){u.setVisible(!1),"function"==typeof d&&d(!1,n)}),500)}};"post"===e.method?(this.mon=t.post(p,m,y)).error(b):(this.mon=t.get(p,m,y)).error(b)},o.prototype.numStacks=function(){return this.loaderStack.length},o.prototype.pushStack=function(){var e={};e.progress=t('<div class="progress"><div class="progress-bar progress-bar-success progress-bar-striped active" style="width: 1%;"></div></div>'),e.msg=t('<div class="alert alert-danger"><span></span></div>'),this._container.append(e.msg),this._container.append(e.progress),this.loaderStack.push(e),this.stackIndex<0&&this.selectStack(0)},o.prototype.popStack=function(){if(1!==this.loaderStack.length){var e=this.loaderStack.pop();this.stackIndex>=this.loaderStack.length&&this.selectStack(0),e.progress.remove(),e.progress.empty(),delete e.progress,e.msg.remove(),e.msg.empty(),delete e.msg}},o.prototype.selectStack=function(e){e<0||e>=this.loaderStack.length||!this.loaderStack[e]||(this.stackIndex=e,this.progress=this.loaderStack[e].progress,this.msg=this.loaderStack[e].msg)},o.prototype.reset=function(){this.setProgress(0),this.setMessage(__("loading..."))},o.prototype.resetAll=function(){for(var e=this.stackIndex,t=0;t<this.loaderStack.length;t++)this.selectStack(t),this.setProgress(0),this.setMessage(__("loading..."));this.selectStack(e)},o.prototype.setProgress=function(e){this.progress.children(".progress-bar").css("width",1*e+"%")},o.prototype.setMessage=function(e,t,i){var n=(t?"<strong>"+t+"</strong> ":"")+e;"block"===i&&(i="warning"),this.msg.children("span").html(n),this.msg.removeClass("alert-danger"),this.msg.removeClass("alert-success"),this.msg.removeClass("alert-info"),this.msg.removeClass("alert-warning");var o=this.progress.children(".progress-bar");o.removeClass("progress-bar-danger progress-bar-success"),"danger"===i?o.addClass("progress-bar-danger"):o.addClass("progress-bar-success"),"danger"===i||"success"===i||"info"===i||"warning"===i?this.msg.addClass("alert-"+i):this.msg.addClass("alert-warning")},o.prototype.setVisible=function(t,i,n){e.prototype.setVisible.call(this,t,i,n)},o.prototype.setHintsCategory=function(e){(n.adminMode||n.devTestMode||n.devDebugMode||n.isB2C||n.unbrandedTestMode)&&(this.hintsCategory=e&&o.hints.hasOwnProperty(e)?o.hints[e]:null,this.renderHint())},o.prototype.renderHint=function(){var e;this.hintsCategory&&this.hintsCategory.length?(this._hintContainer.empty(),o.hints.builder[0].timesShown>=2||wb_builder.historyHasUndo()?e=this.hintsCategory[1]:(o.hints.builder[0].timesShown++,e=this.hintsCategory[0]),e.text&&(t("<h3/>").appendTo(this._hintContainer).text(__("Hint")),t("<p/>").appendTo(this._hintContainer).text(e.text)),t("<img/>").attr("src",e.image).appendTo(this._hintContainer),t("<h4/>").appendTo(this._hintContainer).text(e.title),this._hintContainer.removeClass("hidden")):this._hintContainer.addClass("hidden")},window.WB_Preloader=o,o}.apply(t,n))||(e.exports=o)},"./WB_PropertyDialog.class.js":function(e,t,i){var n,o;n=[i("./WB_Dialog.class.js"),i("./WB_TabbedPane.class.js"),i("./Service.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n){"use strict";var o=function(e,t){this.__construct(e,void 0,void 0,void 0,t)};return(o.prototype=new e("%inherit%")).constructor=o,o.prototype.tabbedPane=null,o.prototype.bottomPane=null,o.prototype.generalTab=null,o.prototype.optionsTab=null,o.prototype.tabElem=null,o.prototype.hideTabPane=!1,o.prototype.hideTab=!1,o.prototype.__construct=function(o,s,r,a,l){e.prototype.__construct.call(this,o,s,r,a);var c=this;this.content.empty(),this.tabbedPane=new t,this.content.append(this.tabbedPane.getElem()),this.tabElem=n("<div>").addClass("wb-prop-dlg-tabs").append(n("<div>").addClass("wb-prop-dlg-tabs-wrap").append(this.tabbedPane.elemNav)).appendTo(this.headerElem),this.tabbedPane.on("nav-show",(function(){c.tabbedPane.addClass("wb-prop-dlg-tabs-cont")})).on("nav-hide",(function(){c.tabbedPane.removeClass("wb-prop-dlg-tabs-cont")})),this.bottomPane=n("<div>"),this.content.append(this.bottomPane);var u,d,h,p=!1;if("object"==typeof l&&l){if("object"==typeof l.size&&l.size&&(l.size.sizeClass&&this.setSizeClass(l.size.sizeClass),l.size.width&&this.setSize(l.size.width),l.size.height&&this.tabbedPane.setFixedHeight(l.size.height-200),l.size.minBodyHeight&&this.setMinBodyHeight(l.size.minBodyHeight),l.size.maxBodyHeight&&this.setMaxBodyHeight(l.size.maxBodyHeight)),l.noScroll&&(this.setNoScroll(),this.tabbedPane.setNoScroll()),"object"==typeof l.tabs&&l.tabs&&l.tabs.length>0)for(l.tabs.sort((function(e,t){return("priority"in e?e.priority:0)-("priority"in t?t.priority:0)})),u=0;u<l.tabs.length;u++)d=l.tabs[u],h=this.tabbedPane.addTab(d.name?d.name:__("General"),u),d.general?(this.generalTab=h,this.generalTab.type="general"):d.name||this.generalTab||(this.generalTab=h,this.generalTab.type="general"),d.options&&(this.optionsTab=h,this.optionsTab.type="options"),!h.type&&d.type&&(h.type=d.type),p=!0,l.tabs[u].hideTab&&this.setTabVisible(h,!1),d.children&&i.Service.UIBuilder.buildLayout(d.children,h.contentElem,this.fields);if(l.hideNavigation&&(this.tabbedPane.setNavVisible(!1,!1),this.hideTabPane=!0),"object"==typeof l.buttons&&l.buttons&&l.buttons.length>0)for(u=0;u<l.buttons.length;u++)d=l.buttons[u],this.addButton(d.name,"click"in d&&"function"==typeof d.click?d.click:null,!!d.primary);"open"in l&&"function"==typeof l.open&&(this.onShown=function(){l.open.call(c,c.fields)}),"close"in l&&"function"==typeof l.close&&(this.onClose=function(){l.close.call(c,c.fields)})}p&&this.tabbedPane.selectTab(0)},o.prototype.getGeneralTab=function(){return this.generalTab||(this.generalTab=this.tabbedPane.addTab(__("General"),0),this.tabbedPane.selectTab(null,this.generalTab)),this.generalTab},o.prototype.setTabbedPaneVisible=function(e){this.hideTabPane||this.tabbedPane.setNavVisible(e,!1)},o.prototype.setTabVisible=function(e,t){this.tabbedPane.setTabVisible(e,t)},window.WB_PropertyDialog=o,o}.apply(t,n))||(e.exports=o)},"./WB_RadioBox.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e){function t(e,t,i){this.__construct(e,t,i)}return t.lastIndex=0,t.prototype.name=null,t.prototype.elem=null,t.prototype.input=null,t.prototype.options=null,t.prototype.__construct=function(i,n,o){var s=i,r=n,a=o;if("object"!=typeof i&&(a=i,s=n,r=o),this.name=a||"radiobox_group"+t.lastIndex++,this.options={},this.input=this.elem=e("<span></span>"),s)for(var l in s)this.options[l]=s[l],this.addOption(l,s[l],l===r)},t.prototype.getValue=function(){var e=this.input.find("input:checked").val();if(null===e)for(var t in this.options){e=this.options[t];break}return e},t.prototype.setValue=function(e){this.input.find("input[value='"+e+"']").attr("checked","checked")},t.prototype.addOption=function(t,i,n){this.options[t]=i;var o=e('<div class="radio"><label><input type="radio" name="'+this.name+'" value="'+t+'"> '+i+" </label></div>");n&&o.find("input").attr("checked","checked"),this.input.append(o)},t.prototype.removeAllOptions=function(){this.input.empty(),this.options={}},t.prototype.getSelectedLabel=function(){return this.input.find("input:checked").parent().text()},t.prototype.getSelected=function(){return this.getValue()},t.prototype.setSelected=function(e){this.setValue(e)},{RadioBoxMany:t}}.apply(t,n))||(e.exports=o)},"./WB_Site.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./IdIndexedList.js"),i("./WB_Dialog.class.js"),i("./BackgroundDialog.ts"),i("./ui/SettingsDialog.ts"),i("./Service.ts"),i("./WB_URLControl.class.js"),i("./FontManager.ts"),i("./WB_LangInputControl.class.js"),i("./util/TextUtil.ts"),i("./util/MenuList.ts"),i("./ModeManager.js"),i("./BuilderEvent.ts"),i("./SiteStylesElement.ts"),i("./WYSIWYGControl.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c,u,d,h,p,m,g){"use strict";var f,y=i("./core/BuilderConfig.ts").wbConfig,b=i("./core/SitePage.ts").Page,v=i("./ColorPicker.ts").ColorPicker,_=i("./SpacingSelector.ts").SpacingSelector,C=i("./SizeSelector.ts").SizeSelector,w=i("./TextControl.ts").TextControl,T=i("./FontStyleSelector.ts").FontStyleSelector,E=function(e){e&&this.__construct(e)};return E.prototype.pages=null,E.prototype.defFixedHeight=null,E.prototype.defNoPageBg=null,E.prototype.languages=null,E.prototype.lastDefLang=null,E.prototype.currSelLang=null,E.prototype.prevSelLang=null,E.prototype.frontPage=null,E.prototype.styles=null,E.prototype.anchors=null,E.prototype.stylesElem=null,E.prototype.changeDlg=null,E.prototype.siteSEODlg=null,E.prototype.changeBgDlg=null,E.prototype.changeSiteBgDlg=null,E.prototype.faviconDlg=null,E.prototype.analyticsId=null,E.prototype.anonymizeIp=null,E.prototype.webmasterId=null,E.prototype.yaMetrikaCode=null,E.prototype.facebookPixelCode=null,E.prototype.favicon=null,E.prototype.translations=null,E.prototype.publishWithForcedHttps=!1,E.prototype.publishWithForcedHttpsPort=0,E.prototype.forceRedirectEnabled=!1,E.prototype.forceRedirectWww=!1,E.prototype.forceSlashes=!1,E.prototype.disableRightClick=!1,E.prototype.metaHtml=null,E.prototype.robotsTxtEnable=null,E.prototype.robotsTxt=null,E.prototype.htaccessEnable=null,E.prototype.htaccess=null,E.prototype.landing=null,E.prototype.rtl=!1,E.prototype.minWebsiteMode=null,E.prototype.maxWebsiteMode=null,E.prototype.showDebugLines=!1,E.prototype.imagePixelDensity=0,E.prototype.usedCustomFonts=null,E.prototype.downloadCustomFonts=null,E.prototype.cookiePolicyEnabled=!1,E.prototype.cookiePolicyList=[],E.prototype.cookiePolicyFont="Arial,Helvetica,sans-serif",E.prototype.cookiePolicyFontSize=14,E.prototype.cookiePolicyMessage=null,E.prototype.cookiePolicyButtonText=null,E.prototype.cookiePolicyCustomizeButtonText=null,E.prototype.cookiePolicyBg="rgba(0, 0, 0, 0.66)",E.prototype.cookiePolicyMessageColor="#FFFFFF",E.prototype.cookiePolicyButtonBg="#5cb85c",E.prototype.cookiePolicyButtonColor="#FFFFFF",E.prototype.eventListeners=null,E.prototype.__construct=function(e){this.eventListeners={},this.applyData(e)},E.prototype.switchMode=function(e,t,i){},E.prototype.applyData=function(t){this.frontPage=null,this.pages={};var i,n,o=t.content.pages?t.content.pages:[],s={},a=null,c=0,u=!1;for(d=0;d<o.length;d++)o[d].anchors&&(s[""+o[d].id]=o[d].anchors),(a=new b(e.extend(!0,{},o[d]))).copyFrom=null,a.copyClearHeader=null,a.copyClearBody=null,a.copyClearFooter=null,a.isFront&&(u=!0),n||(n=a),this.addPage(a),c++;if(u||((i=this.getPage(parseInt(wb_builder.pageId)?parseInt(wb_builder.pageId):1))?i.isFront=!0:n&&(n.isFront=!0)),0===c&&(a=new b({id:1,isFront:!0,title:__("Home"),layout:"Empty"}),this.addPage(a)),E.AnchorUtil.init(wb_builder,this),this.defFixedHeader=!!t.content.defFixedHeader&&t.content.defFixedHeader,this.defNoPageBg=!!t.content.defNoPageBg&&t.content.defNoPageBg,this.languages=t.content.languages?t.content.languages:[],this.lastDefLang=t.content.lastDefLang?t.content.lastDefLang:null,this.currSelLang=this.languages.length>0?this.getLastDefLang():null,this.rtl=!!t.content.rtl,this.languages&&this.languages instanceof Array&&this.languages.length)for(var d in this.languages){var h=""+this.languages[d].code,m=y.getLanguageByCode(h);this.languages[d].locale=m?m.locale:h.toLowerCase()+"_"+h.toUpperCase()}this.styles=[];var g=!1;for((o=t.content.styles?t.content.styles:[])&&o.length||(o=E.Style.defaults,g=!0),d=0;d<E.Style.defaults.length;d++){for(var f=!1,v=0;v<o.length;v++)if(E.Style.defaults[d].selector===o[v].selector){f=!0;break}f||(o.push(E.Style.defaults[d]),g=!0)}for(d=0;d<o.length;d++)this.styles.push(new E.Style(g?e.extend(!0,{},o[d]):o[d]));for(d=0;d<this.styles.length;d++)for(v=0;v<E.Style.defaults.length;v++)if(E.Style.defaults[v].selector===this.styles[d].selector){this.styles[d].tag=E.Style.defaults[v].tag,this.styles[d].ident=E.Style.defaults[v].ident;break}if(this.anchors=t.content.anchors?t.content.anchors:E.AnchorUtil.fixOldData(s),this.favicon=t.content.favicon?t.content.favicon:null,this.analyticsId=t.content.analyticsId?t.content.analyticsId:null,this.anonymizeIp=!!t.content.anonymizeIp,this.webmasterId=t.content.webmasterId?t.content.webmasterId:null,this.yaMetrikaCode=t.content.yaMetrikaCode?t.content.yaMetrikaCode:null,this.facebookPixelCode=t.content.facebookPixelCode?t.content.facebookPixelCode:null,this.metaHtml=t.content.metaHtml?t.content.metaHtml:null,this.headSnippetsHtml=t.content.headSnippetsHtml?t.content.headSnippetsHtml:null,this.bodySnippetsHtml=t.content.bodySnippetsHtml?t.content.bodySnippetsHtml:null,this.bodyStartSnippetsHtml=t.content.bodyStartSnippetsHtml?t.content.bodyStartSnippetsHtml:null,this.robotsTxtEnable=!!t.content.robotsTxtEnable,this.robotsTxt=t.content.robotsTxt?t.content.robotsTxt:null,this.htaccessEnable=!!t.content.htaccessEnable,this.htaccess=t.content.htaccess?t.content.htaccess:null,this.landing=!!t.content.landing,this.translations={},this.updateStyle(),"publishWithForcedHttps"in t.content&&(this.publishWithForcedHttps=!!t.content.publishWithForcedHttps),"publishWithForcedHttpsPort"in t.content&&(this.publishWithForcedHttpsPort=parseInt(t.content.publishWithForcedHttpsPort,10)),"forceRedirectEnabled"in t.content&&(this.forceRedirectEnabled=!!t.content.forceRedirectEnabled),"forceRedirectWww"in t.content&&(this.forceRedirectWww=!!t.content.forceRedirectWww),this.forceSlashes=!("forceSlashes"in t.content)||t.content.forceSlashes,this.disableRightClick=!!t.content.disableRightClick,y.isB2C&&(this.forceRedirectEnabled=!0),this.downloadCustomFonts="downloadCustomFonts"in t.content?t.content.downloadCustomFonts:this.downloadCustomFonts,this.usedCustomFonts={},l.FontManager.forceCustomFontsUsage(),t.content.hasOwnProperty("usedCustomFonts")){for(d=0;d<t.content.usedCustomFonts.length;d++)if("string"==typeof t.content.usedCustomFonts[d])l.FontManager.addCustomFontUsage(t.content.usedCustomFonts[d]);else{var _=l.GoogleFontUsage.fromJson(t.content.usedCustomFonts[d]);this.usedCustomFonts[_.font.family]=_,l.FontManager.createFontLinkElementForFont(_.font)}var C=new p.FontsChangedBuilderEvent;p.GlobalEvents.triggerEvent("fonts.changed",C)}this.cookiePolicyEnabled="cookiePolicyEnabled"in t.content?t.content.cookiePolicyEnabled:this.cookiePolicyEnabled,this.cookiePolicyList="cookiePolicyList"in t.content?t.content.cookiePolicyList:this.cookiePolicyList,this.cookiePolicyFont="cookiePolicyFont"in t.content?t.content.cookiePolicyFont:this.cookiePolicyFont,this.cookiePolicyFontSize="cookiePolicyFontSize"in t.content?t.content.cookiePolicyFontSize:this.cookiePolicyFontSize,this.cookiePolicyMessage="cookiePolicyMessage"in t.content?t.content.cookiePolicyMessage:__("We use cookies (and gather certain personal information) to provide you with a better online experience. By visiting our site you accept our terms."),this.cookiePolicyButtonText="cookiePolicyButtonText"in t.content?t.content.cookiePolicyButtonText:__("Got it"),this.cookiePolicyCustomizeButtonText="cookiePolicyCustomizeButtonText"in t.content?t.content.cookiePolicyCustomizeButtonText:__("Customize"),this.cookiePolicyBg="cookiePolicyBg"in t.content?t.content.cookiePolicyBg:this.cookiePolicyBg,this.cookiePolicyMessageColor="cookiePolicyMessageColor"in t.content?t.content.cookiePolicyMessageColor:this.cookiePolicyMessageColor,this.cookiePolicyButtonBg="cookiePolicyButtonBg"in t.content?t.content.cookiePolicyButtonBg:this.cookiePolicyButtonBg,this.cookiePolicyButtonColor="cookiePolicyButtonColor"in t.content?t.content.cookiePolicyButtonColor:this.cookiePolicyButtonColor,this.minWebsiteMode="minMode"in t.content?t.content.minMode:this.minWebsiteMode,r.Service.modeManager.setMinMode(this.minWebsiteMode),this.maxWebsiteMode="maxMode"in t.content?t.content.maxMode:this.maxWebsiteMode,r.Service.modeManager.setMaxMode(this.maxWebsiteMode),this.showDebugLines=!("showDebugLines"in t.content)||!!t.content.showDebugLines,this.imagePixelDensity="number"==typeof t.content.imagePixelDensity&&t.content.imagePixelDensity>=1?t.content.imagePixelDensity:y.defaultImagePixelDensity},E.prototype.getLastDefLang=function(){if(!this.lastDefLang)for(var e,t=0;e=this.languages[t];t++)if(e.isDefault){this.lastDefLang=e.code;break}return this.lastDefLang},E.prototype.setLastDefLang=function(e){this.lastDefLang=e},E.prototype.isRtlLang=function(e){return(e=e||this.currSelLang)&&e in wb_builder.rtlLanguages&&wb_builder.rtlLanguages[e]},E.prototype.serialize=function(){var e,t=[];for(e in this.pages)this.pages[e]&&t.push(this.pages[e].serialize());var i=[];for(e=0;e<this.styles.length;e++)this.styles[e]&&i.push(this.styles[e].serialize());var n=[];for(e in this.usedCustomFonts)this.usedCustomFonts.hasOwnProperty(e)&&n.push(this.usedCustomFonts[e].serialize());return{class:"Site",content:{pages:t,defFixedHeader:this.defFixedHeader,defNoPageBg:this.defNoPageBg,languages:this.languages,styles:i,anchors:E.AnchorUtil.serialize(),analyticsId:this.analyticsId,anonymizeIp:this.anonymizeIp,webmasterId:this.webmasterId,yaMetrikaCode:this.yaMetrikaCode,facebookPixelCode:this.facebookPixelCode,favicon:this.favicon,publishWithForcedHttps:this.publishWithForcedHttps,publishWithForcedHttpsPort:this.publishWithForcedHttpsPort,forceRedirectEnabled:this.forceRedirectEnabled,forceRedirectWww:this.forceRedirectWww,forceSlashes:this.forceSlashes,disableRightClick:this.disableRightClick,minMode:this.minWebsiteMode,maxMode:this.maxWebsiteMode,showDebugLines:this.showDebugLines,imagePixelDensity:this.imagePixelDensity,metaHtml:this.metaHtml,headSnippetsHtml:this.headSnippetsHtml,bodySnippetsHtml:this.bodySnippetsHtml,bodyStartSnippetsHtml:this.bodyStartSnippetsHtml,robotsTxtEnable:this.robotsTxtEnable,robotsTxt:this.robotsTxt,htaccessEnable:this.htaccessEnable,htaccess:this.htaccess,lastDefLang:this.getLastDefLang(),landing:this.landing,rtl:this.rtl,usedCustomFonts:n,downloadCustomFonts:this.downloadCustomFonts,cookiePolicyEnabled:this.cookiePolicyEnabled,cookiePolicyList:this.cookiePolicyList,cookiePolicyFont:this.cookiePolicyFont,cookiePolicyFontSize:this.cookiePolicyFontSize,cookiePolicyMessage:this.cookiePolicyMessage,cookiePolicyButtonText:this.cookiePolicyButtonText,cookiePolicyCustomizeButtonText:this.cookiePolicyCustomizeButtonText,cookiePolicyBg:this.cookiePolicyBg,cookiePolicyMessageColor:this.cookiePolicyMessageColor,cookiePolicyButtonBg:this.cookiePolicyButtonBg,cookiePolicyButtonColor:this.cookiePolicyButtonColor}}},E.prototype.updatePageList=function(e){var i,n,o,s,r,a,l=!1;if(e instanceof t){for(e.sortItems((function(e,t){return e.id>t.id?1:-1})),i=0,n=e.getItemCount();i<n;i++){if(o=e.getItem(i),s=this.getPage(o.id))s.title=o.title;else if((a=this.getPage(o.copyFrom?o.copyFrom:wb_builder.pageId))&&(o.blocks=a.blocks),o.title=null,this.addPage(s=new b(o)),wb_builder.layoutPopupMode&&(s.popupMode=!0,s.popupWidth=wb_builder.layoutPopupWidth?wb_builder.layoutPopupWidth:null,s.popupHeight=wb_builder.layoutPopupHeight?wb_builder.layoutPopupHeight:null),"number"==typeof o.copyFrom){var c,u={isCommon:!0,includePages:{}};for(var d in this.pages){var h=this.pages[d];h.popupMode||h===s||(u.includePages[""+h.id]=!0)}wb_builder.bodyInstance.traverseElements((function(e,t,i,n){if(!c&&!(c=e.getProperty("commonality")))return console.error("Can't update includePages because commonality property no longer exists"),1;var r=""+o.copyFrom,a=c.get(e);if(!a.isCommon||!a.includePages)return 0;if("copyClearHeader"in o&&o.copyClearHeader&&"wb_header"===n||"copyClearBody"in o&&o.copyClearBody&&"wb_main"===n||"copyClearFooter"in o&&o.copyClearFooter&&"wb_footer"===n)Object.keys(a.includePages).length>0&&delete a.includePages[""+s.id],Object.keys(a.includePages).length||(a=u);else{if(!a.includePages.hasOwnProperty(r))return 0;a.includePages[""+s.id]=a.includePages[r]}return c.set(e,a,!1,!0),0}))}!l&&o.isFront?(l=!0,s.isFront=!0):s.isFront=!1,s.openPopupPageId=o.openPopupPageId}for(r in this.pages)o=this.pages[r],e.getItemById(o.id)?l||(l=!0,o.isFront=!0):this.removePage(o)}this.refreshAnchors()},E.prototype.reloadPagesMiId=function(e){for(var t in this.pages)this.pages[t].reloadMiId(e)},E.prototype.getPage=function(e){var t=parseInt(e,10);return this.pages["#"+t]?this.pages["#"+t]:null},E.prototype.addPage=function(e){this.pages["#"+parseInt(e.id,10)]=e,e.site=this,e.isFront&&(this.frontPage=e)},E.prototype.removePage=function(e){e&&parseInt(e.id,10)===parseInt(wb_builder.pageId,10)?1===Object.keys(this.pages).length&&(e.isSingle=!0):(this.pages["#"+parseInt(e.id,10)]=null,delete this.pages["#"+parseInt(e.id,10)],e.site=null,this.frontPage&&parseInt(this.frontPage.id,10)===parseInt(e.id,10)&&(this.frontPage=null))},E.prototype.getFreeId=function(e){for(var t=1;t<5e3;t++)if(!(this.pages["#"+t]||e&&e["#"+t]))return t;return 1},E.prototype.addAnchor=function(e){E.AnchorUtil.addByElem(e)},E.prototype.removeAnchor=function(e,t){E.AnchorUtil.removeByElem(e,t)},E.prototype.getAnchors=function(e,t){return E.AnchorUtil.getData(e,t)},E.prototype.refreshAnchors=function(){E.AnchorUtil.refreshData()},E.prototype.updateStyle=function(){var e=this.getPage(wb_builder.pageId),t=e&&e.popupMode?e.popupWidth:null;this.stylesElem||(this.stylesElem=new m.SiteStylesElement),this.stylesElem.clearRules(),this.stylesElem.addStyles(this.styles,!!t),this.reloadTextTags(),this.reloadCkIframeStyles()},E.prototype.reloadTextTags=function(t){if(this.styles){if(void 0!==t){if("object"==typeof t&&t){var i=e.extend({},t);for(var n in i)i[n]=this.reloadTextTags(i[n]);return i}if("string"==typeof t){for(var o=e("<div>").append(t),s=0;s<this.styles.length;s++){var r=this.styles[s];"string"==typeof r.tag&&o.find(r.selector).each((function(){var t=e(this);if(t.is(r.tag)||t.is("li"))return!0;for(var i=e("<"+r.tag+">"+this.innerHTML+"</"+r.tag+">"),n=0;n<this.attributes.length;n++){var o=this.attributes[n];i.attr(o.name,o.value)}t.replaceWith(i)}))}return o.html()}return t}if(wb_builder.bodyInstance){var a,l=wb_builder.bodyInstance.getContentElements(!0);for(s=0;a=l[s];s++)a.onReloadTextTags();g.WYSIWYGControl.reloadAll()}}},E.prototype.reloadCkIframeStyles=function(){if(!e(".cke_panel_frame").length&&!e(".cke_wysiwyg_frame").length)return!1;var t,i=(t=void 0!==document.styleSheets&&document.styleSheets?function(e,t,i,n){var o,s=i.styleSheets;s&&s.length&&(!(o=s[s.length-1]).href||o.href.indexOf(location.origin)>-1)&&(o.addRule?o.addRule(e,t):"string"==typeof o.cssText?o.cssText=e+" {"+t+"}":o.insertRule&&o.cssRules&&o.insertRule(e+" {"+t+"}",o.cssRules.length))}:function(e,t,i,n){n.appendChild(i.createTextNode(e+" {"+t+"}"))},function(e,i,n){var o=(n=n||document).getElementsByTagName("head")[0];if(o&&t){var s=n.createElement("style");s.setAttribute("type","text/css"),s.media="screen",o.appendChild(s),t(e,i,n,s),s=null}}),n=frames[frames.length-1].document;return r.Service.style.enumerateRules(wb_builder.site.styles,(function(e){i(e.selector,r.Service.style.stringifyCss(e.css),n)})),!0},E.prototype.centerPopover=function(e){var t=e.next(".popover");t.css("left",e.position().left+e.width()/2-t.width()/2)},E.prototype.changeFavicon=function(){var e=this,t=null;this.faviconDlg||(this.faviconDlg=new n(__("Change favicon"),null,new r.Service.UIBuilder({type:"VerticalLayout",children:[{type:"Label",text:__("Favicon")},{type:"ImageSelector",id:"imageUrl",mode:"favicon",multyselect:!1,mediatabs:!1},{type:"CustomContainer",styleClass:"alert alert-info",css:{marginTop:15,marginBottom:0},content:__("Supported image formats are PNG, JPEG, GIF, SVG and ICO.")+"<br />"+__("Internet Explorer browsers only support ICO format.")+"<br />"+__("When you are using ICO format, to see changes you might need to clear browser cache and even restart browser.")}]})),t=this.faviconDlg.fields,this.faviconDlg.addButton(__("Cancel")),this.faviconDlg.addButton(__("Apply"),(function(){e.faviconDlg.hide(),wb_builder.setPageModified(!0),e.favicon=t.imageUrl.getValue()}),!0)),(t=this.faviconDlg.fields).imageUrl.setValue(this.favicon),this.faviconDlg.setVisible(!0)},E.prototype.changeSiteSEO=function(){var t=this,i=null;this.siteSEODlg||(this.siteSEODlg=new n(__("Search engine optimization")),this.siteSEODlg.dialog.addClass("wb-modal-settings"),this.siteSEODlg.setContent(new r.Service.UIBuilder({type:"TabbedPane",tabs:[{children:[{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],css:{marginTop:"20px"},children:[{type:"List",id:"list",css:{height:328},listHeight:310,itemType:r.Service.menu.MenuItem,editable:!1,init:function(){this.pages={pages:{},addPage:function(e){e.mis={},e.addMi=function(e){this.mis["#"+e.id]=e},e.getMis=function(){var e=[];for(var t in this.mis)e.push(this.mis[t]);return e},this.pages["#"+e.id]=e},removeAllPages:function(){this.pages={}},getPage:function(e){return this.pages["#"+e]?this.pages["#"+e]:null}},this.setAliasSlashVisible=function(t,i){var n=wb_builder.site.languages.length>0,o=wb_builder.site.getLastDefLang();t.alias.getInputs().each((function(){var t=e(this).parent().children("span").text().toLowerCase();e(this).parent().find("i").text(i?(n&&t!==o?"/"+t:"")+"/":""),e(this).css("padding-left",(n&&t!==o?40:20)+"px")}))},this.setTitleBlockVisible=function(e,t){e.titleBlock.setVisible(t),e.descriptionBlock.css({marginTop:t?10:0})}},select:function(e,t){var i,n=e.list.getLastSelected();if(n&&"external"!==n.type&&"anchor"!==n.type&&"empty"!==n.type&&("default"===e.list.getLastSelected().type?(e.defaultInf.title=e.title.getValue(),e.defaultInf.keywords=e.keywords.getValue(),e.defaultInf.description=e.description.getValue(),e.defaultInf.image=e.image.getValue()):(i=e.list.pages.getPage(e.list.getLastSelected().targetId))&&(i.alias=e.alias.getValue(),i.title=e.title.getValue(),i.keywords=e.keywords.getValue(),i.description=e.description.getValue(),i.image=e.image.getValue(),i.noindex=e.noindex.getValue(),i.addMi(t))),"default"===t.type)this.setTitleBlockVisible(e,!1),e.aliasBlock.setVisible(!1),e.imageBlock.setVisible(!0),e.title.setValue(e.defaultInf.title),e.title.setEnabled(!0),e.title.setTooltip(!1),e.noindex.setVisible(!1),e.noindex.setValue(!1),e.noindex.setEnabled(!1),e.keywords.setValue(e.defaultInf.keywords),e.description.setValue(e.defaultInf.description),e.image.setValue(e.defaultInf.image),e.keywords.setEnabled(!0),e.description.setEnabled(!0);else if("external"!==t.type&&"anchor"!==t.type&&"empty"!==t.type){if(i=e.list.pages.getPage(t.targetId)){var o=t.menuUID?r.Service.menu.getMenuByUID(t.menuUID):null,s=i.isFront,a=o&&o.landing,l=a||!s;e.alias.setValue(l?i.alias?i.alias:t.alias:""),e.alias.setPlaceholder(s?null:__trf(t.name,u.sanitizeAlias),!0),e.alias.setEnabled(l),this.setAliasSlashVisible(e,!0),this.setTitleBlockVisible(e,!0),e.aliasBlock.setVisible(!0),e.imageBlock.setVisible(!0),e.title.setValue(i.title),e.title.setPlaceholder(t.name,!0),e.title.setEnabled(s||!a),e.noindex.setVisible(!0),e.noindex.setValue(i.noindex),e.noindex.setEnabled(s||!a),e.keywords.setValue(i.keywords),e.description.setValue(i.description),e.image.setValue(i.image),a&&!s?e.title.setTooltip(__("When Landing mode is turned on then title of homepage is used"),"bottom","hover"):e.title.setTooltip(!1),e.keywords.setEnabled(!0),e.description.setEnabled(!0)}}else e.alias.setValue(""),e.alias.setEnabled(!1),e.alias.setPlaceholder(null,!0),this.setAliasSlashVisible(e,!1),this.setTitleBlockVisible(e,!1),e.aliasBlock.setVisible(!0),e.imageBlock.setVisible(!1),e.title.setValue(""),e.title.setEnabled(!1),e.title.setTooltip(!1),e.noindex.setVisible(!1),e.noindex.setValue(!1),e.noindex.setEnabled(!1),e.keywords.setValue(""),e.description.setValue(""),e.image.setValue(null),e.keywords.setEnabled(!1),e.description.setEnabled(!1)}},{type:"VerticalLayout",children:[{type:"VerticalLayout",id:"titleBlock",children:[{type:"Label",text:__("Title"),helpText:__("Title is critical to giving users a quick insight into the content of a result and why it's relevant to their query. It's often the primary piece of information used to decide which result to click on.")},{type:"MultilangTextField",id:"title"}]},{type:"VerticalLayout",id:"descriptionBlock",css:{marginTop:10},children:[{type:"Label",text:__("Description"),helpText:__("The description attribute is a good way to provide a concise, human-readable summary of each page's content. Accurate meta descriptions can help improve your clickthrough.")},{type:"MultilangTextField",id:"description",textArea:!0}]},{type:"VerticalLayout",id:"keywordsBlock",css:{marginTop:10},children:[{type:"Label",text:__("Keywords"),helpText:__("Keywords are words or phrases your target audience would type in the search box when looking for the subject of your web page.")},{type:"MultilangTextField",id:"keywords",textArea:!0}]},{type:"VerticalLayout",id:"aliasBlock",css:{marginTop:10},children:[{type:"Label",text:__("User friendly URL"),helpText:__('This is an alias for the page. For example if you specify value "apple" then this website page will have URL "yourwebsite.com/apple".')},{type:"MultilangTextField",id:"alias",onChange:function(e,t,n){if(t)for(var o in t=(t=t.replace(/(?:http|https):\/\//i,"")).replace(/\./,"-"),i.alias.setText(t,n,!0),i.list.pages.pages){var s=i.list.pages.pages[o];if(i.list.getLastSelected().targetId!==s.id&&t&&__tr(s.alias,n)===t){var a=r.Service.menu.getMenuItemById(s.miId),l=a?__tr(a.name,"__DEFAULT__",null,!0,!0):__tr(s.title,"__DEFAULT__",null,!0,!0);return alert(__('The value "%s" is already assigned to page "%s"').replace("%s",t).replace("%s",l)),void i.alias.setText("",n)}}},onReload:function(){this.elem.find(".__alias__").remove(),this.getInputs().each((function(){var t=e('<i class="__alias__">').css({fontStyle:"normal",position:"absolute",left:12,top:0,lineHeight:"34px",zIndex:3,color:"#999"});e(this).parent().append(t)}))}}]},{type:"HorizontalLayout",css:{marginTop:10},columnWeights:[4,8],children:[{type:"VerticalLayout",id:"imageBlock",children:[{type:"Label",text:__("Image"),helpText:__("Unique image representing the content of the page. It will be used by social graphs like Facebook Open Graph and Twitter Cards when the page is liked or shared.")},{type:"ImageSelector",id:"image"}]},{type:"CheckBox",id:"noindex",label:__("Do not index page"),helpText:__("If checked the page will be excluded from search results of search engines like Google.")}]}]}]}]},{name:__("Analytics"),children:[{type:"VerticalLayout",css:{marginTop:"20px"},children:[{type:"Label",text:__("Google Analytics Tracking ID"),helpText:__("Create google analytics profile on google analytics page for your website and paste profile ID hare (ex. UA-38401376-1)")},{type:"TextField",id:"analyticsId"},{type:"CheckBox",css:{marginTop:5},label:__("Anonymize IP"),id:"anonymizeIp",helpText:__("Click for more information")+':<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://support.google.com/analytics/answer/2763052" target="_blank">https://support.google.com/analytics/answer/2763052</a>'},{type:"Label",text:__("Facebook Pixel Tracking ID"),css:{marginTop:"15px"},helpText:__("In Facebook page open setting for counter and copy ID counter to this field.")},{type:"TextField",id:"facebookPixelCode"},{type:"Label",text:__("Error msg"),id:"facebookPixelCodeError",css:{marginTop:"5px",color:"red",display:"none"}},{type:"Label",text:__("Yandex.Metrika Tracking ID"),css:{marginTop:"15px"},helpText:__('In "Yandex Metrika" page open setting for counter and copy ID counter to this field.')},{type:"TextField",id:"yaMetrikaCode"},{type:"Label",text:__("Error msg"),id:"yaMetrikaCodeError",css:{marginTop:"5px",color:"red",display:"none"}},{type:"Label",text:__("Google Search Console Verification Code"),css:{marginTop:"15px"},helpText:__('In "Google Search Console" verification page choose "Alternative methods" > "HTML tag" and copy that tag to this field.')},{type:"TextField",id:"webmasterId"},{type:"Label",text:__("Sitemap URL"),css:{marginTop:"15px"},helpText:__("You can submit this URL as a sitemap to Google Webmaster Tools.")},{type:"CustomContainer",tag:"pre",id:"sitemapUrl",content:wb_builder.meta.sitemapUrl,css:{padding:"4px 6px"},init:function(){this.setValue=function(e){this.getElem().text(e)}}}]}]}]},this.siteSEODlg.fields),!0),this.siteSEODlg.setMinBodyHeight(444),i=this.siteSEODlg.fields,this.siteSEODlg.addButton(__("Cancel")),this.siteSEODlg.addButton(__("Apply"),(function(){if(t.yaMetrikaCode=i.yaMetrikaCode.getValue(),(a=t.yaMetrikaCode.match(/ym\((\d+), "init", /i))&&(t.yaMetrikaCode=a[1]),i.yaMetrikaCodeError._elem.hide(),a=t.yaMetrikaCode.match(/\D/i))i.yaMetrikaCodeError._elem.text(__("Only number or code of counter")).show();else if(t.facebookPixelCode=i.facebookPixelCode.getValue(),(a=t.facebookPixelCode.match(/fbq\(\'init\', (?:\')?(\d+)(?:\')?/i))&&(t.facebookPixelCode=a[1]),(a=t.facebookPixelCode.match(/src="https:\/\/www.facebook.com\/tr?id=(\d+)/i))&&(t.facebookPixelCode=a[1]),i.facebookPixelCodeError._elem.hide(),a=t.facebookPixelCode.match(/\D/i))i.facebookPixelCodeError._elem.text(__("Only number or code of counter")).show();else{for(var e in t.siteSEODlg.hide(),wb_builder.setPageModified(!0),i.list.selectFirst(),i.list.pages.pages){var n=i.list.pages.pages[e];if("external"!==n.type){var o=t.getPage(n.id);if(o){o.alias=n.alias,o.title=n.title,o.keywords=n.keywords,o.description=n.description,o.image=n.image,o.noindex=n.noindex;for(var s=n.getMis(),r=0;r<s.length;r++)s[r].alias=n.alias}}}var a;wb_builder.meta.title=i.defaultInf.title,wb_builder.meta.keywords=i.defaultInf.keywords,wb_builder.meta.description=i.defaultInf.description,wb_builder.meta.image=i.defaultInf.image,t.analyticsId=i.analyticsId.getValue(),t.anonymizeIp=i.anonymizeIp.getValue(),t.webmasterId=i.webmasterId.getValue(),(a=t.webmasterId.match(/<meta[^>]+content="([^"]+)"[^>]+>/i))&&(t.webmasterId=a[1])}}),!0)),i=this.siteSEODlg.fields;var o=this.getPage(wb_builder.pageId);o&&(i.alias.setValue(o.alias),i.title.setValue(o.title),i.keywords.setValue(o.keywords),i.description.setValue(o.description),i.image.setValue(o.image),i.noindex.setValue(o.noindex));var s,a=!1,l=null;i.list.removeAllItems(),i.list.addItem(i.defaultInf={id:-1,type:"default",name:__("Default (for all pages)"),title:wb_builder.meta.title,keywords:wb_builder.meta.keywords,description:wb_builder.meta.description,image:wb_builder.meta.image,serialize:function(){return this}},!1,"glyphicon glyphicon-folder-open"),i.list.setCustomBuildSearchBlobFunction((function(e,t){var n=[__tr(e.name).toLowerCase()];if("page"===e.type){var o=i.list.pages.getPage(e.targetId);n.push(__tr(o.alias)),n.push(__tr(o.title))}return n.join(" ")}));for(var c=d.buildMenuStruct(!1,!0),h=!0,p=0;p<c.length;p++){var m=c[p];h?h=!1:i.list.addSeparator();for(var g=0;g<m.items.length;g++){var f=m.items[g];if(f.miElem&&"internal"!==f.type){var y=f.pageId?wb_builder.site.getPage(f.pageId):null;if(!y||!y.popupMode){for(var b="external"===f.type||"internal"===f.type||"anchor"===f.type||"empty"===f.type?"glyphicon glyphicon-share-alt":y&&y.isFront?"glyphicon glyphicon-home":"glyphicon glyphicon-folder-open",v=i.list.addItem(f.miElem,!1,b,f.isLink()),_=20,C=f.lvl;C>0;)C--,_+=20;v.css({marginLeft:_+"px"}),a||"external"===f.type||f.pageId!=wb_builder.pageId||(a=!0,l=v)}}}}for(s in i.list.pages.removeAllPages(),this.pages)this.pages[s].popupMode||i.list.pages.addPage(this.pages[s].serialize());a?l&&l.trigger("click"):i.list.selectFirst(),i.analyticsId.setValue(this.analyticsId),i.anonymizeIp.setValue(this.anonymizeIp),i.webmasterId.setValue(this.webmasterId),i.yaMetrikaCode.setValue(this.yaMetrikaCode),i.facebookPixelCode.setValue(this.facebookPixelCode),i.sitemapUrl.setValue((""+wb_builder.meta.sitemapUrl).replace(/^(?:http|https):\/\//,this.publishWithForcedHttps?"https://":"http://")),this.siteSEODlg.setVisible(!0)},E.prototype.setLanding=function(e,t){t||wb_builder.setPageModified(!0),this.landing=!!e;var i,n,o=r.Service.menu.getElemList(!0);for(i in this.pages)this.pages[i].setLanding(!1);for(i in o)o[i].setLanding(!1);if(wb_builder.bodyInstance.setLandingLock(!1),this.landing){var s=null;for(i in this.pages)if(this.pages[i].isFront){s=this.pages[i];break}if(s){var a;e:for(i in o)for(var l=d.buildMenuStruct(!1,!1,o[i]),c=0;c<l.length;c++)for(var u=l[c],h=0;h<u.items.length;h++){var m=u.items[h];if(!a&&"page"===m.type&&m.pageId===s.id){u.menuElem.setLanding(!0),a=u.menuElem;break e}}if(a){var g=[],f=0;for(l=d.buildMenuStruct(!1,!1,a),c=0;c<l.length;c++)for(u=l[c],h=0;h<u.items.length;h++)"page"===(m=u.items[h]).type&&m.pageId&&g.push(m.pageId);for(i=0,n=g.length;i<n;i++)(y=this.getPage(g[i]))&&(y.setLanding(!0,++f),y.id!==wb_builder.pageId||y.isFront||wb_builder.bodyInstance.setLandingLock(!0))}}}var y,b=(y=this.getPage(wb_builder.pageId))&&y.popupMode;wb_builder.layoutManager.setPageSwitchesEnabled(this.landing&&!b),p.GlobalEvents.triggerEvent("pages.changed",new p.PagesChangedEvent),p.GlobalEvents.triggerEvent("landing.changed",new p.LandingChangedBuilderEvent(this.landing)),p.GlobalEvents.triggerEvent("block.main.updatesize",{})},E.prototype.changeBackground=function(){return this.changeBgDlg||(this.changeBgDlg=new o.BackgroundDialog),this.changeBgDlg.setVisible(!0),this.changeBgDlg},E.prototype.getStyleByName=function(e){for(var t=0;t<this.styles.length;t++)if(this.styles[t].name===e)return this.styles[t];return null},E.prototype.changeStyles=function(t,i){var o=this,s=null;this.changeStylesDlg||(this.changeStylesDlg=new n(__("Styles"),null,new r.Service.UIBuilder({type:"HorizontalLayout",columnWeightsSmall:[4,8],columnWeights:[4,8],children:[{type:"List",id:"tree",css:{marginBottom:0},listHeight:480,itemType:E.Style,itemNameFunc:function(e){var t=e.name;if(e.tag){var i=[];"object"==typeof e.tag&&e.tag.hasOwnProperty("length")?i=e.tag.slice():"string"==typeof e.tag&&(i=[e.tag]);for(var n=0;n<i.length;n++)i[n]="&lt;"+i[n]+"&gt;";t+=" <small>"+i.join(", ")+"</small>"}return t},itemTitleFunc:function(e){return e.name},editable:!1,init:function(){var e=this.addItem;this.addItem=function(t,i){var n=e.call(this,t,i,"no-icon");return t.ident&&(wb_builder.rtl?n.css({marginRight:"20px"}):n.css({marginLeft:"20px"})),n}},select:function(e,t){var i,n;if(e.tree.getLastSelected()){var o=((n=e.tree.getLastSelected()).isHeading()||n.isParagraph())&&n.isCustom();for(i in o&&(n.tag=e.liTag.getValue()),n.sys.text=e.text.getValue(),n.sys.text.name=n.name,n.sys.linkNormalColor=e.linkNormalColor.getValue(),n.sys.linkNormalStyle=e.linkNormalStyle.getValue(),n.sys.linkHoverColor=e.linkHoverColor.getValue(),n.sys.linkHoverStyle=e.linkHoverStyle.getValue(),n.sys.advTextTransform=e.advTextTransform.getValue(),n.sys.advSpacing=e.advSpacing.getValue(),n.sys.liSpacing=e.liSpacing.getValue(),n.sys.advListBullet=e.advListBullet.getValue(),n.modes)h.getModes().indexOf(i)<0||(n.modes[i].fontScale=e.fontScale[i].getValue()/100)}n=t,e.text.setValue(n.sys.text),e.text.setPreviewTag(n.tag),e.linkNormalColor.setValue(n.sys.linkNormalColor),e.linkNormalStyle.setValue(n.sys.linkNormalStyle),e.linkHoverColor.setValue(n.sys.linkHoverColor),e.linkHoverStyle.setValue(n.sys.linkHoverStyle),e.advTextTransform.setValue(n.sys.advTextTransform),e.advSpacing.setValue(n.sys.advSpacing),e.liSpacing.setValue(n.sys.liSpacing);var s=n.appliesToTag("ul")||n.appliesToTag("ol");for(i in o=(n.isHeading()||n.isParagraph())&&n.isCustom(),e.advSpacingLabel.setText(s?__("List Margin / Padding"):__("Margin / Padding")),e.liProperties.setVisible(s),e.liSpacingCont.setVisible(s),e.liBulletCont.setVisible(s),e.liTagCont.setVisible(o),o&&e.liTag.setValue(n.tag),e.advListBullet.setValue(n.sys.advListBullet),n.modes)h.getModes().indexOf(i)<0||(e.fontScale[i].setValue(Math.round(100*n.modes[i].fontScale)),e.fontScale[i].setEnabled(!0))}},{type:"TabbedPane",tabs:[{name:__("Standard"),children:[{type:w,id:"text",css:{marginTop:"15px"},needLineHeight:!0,ttPlacement:"left",horizontal:!1,needPreview:!0}]},{name:__("Links"),children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Link Text"),css:{marginTop:"15px"}},{type:"FlowLayout",children:[{type:v,id:"linkNormalColor",noTransparent:!0},{type:T,id:"linkNormalStyle"}]},{type:"Label",text:__("Link Hover"),css:{marginTop:"15px"}},{type:"FlowLayout",children:[{type:v,id:"linkHoverColor",noTransparent:!0},{type:T,id:"linkHoverStyle"}]}]}]},{name:__("Advanced"),children:[{type:"VerticalLayout",children:[{type:"HorizontalLayout",css:{marginTop:"15px"},columnWeights:[4,4,4],columnWeightsSmall:[4,4,4],children:[{type:"VerticalLayout",css:{marginRight:4},children:[{type:"Label",text:__("Text Transform")},{type:"FontTransformSelector",id:"advTextTransform"}]},{type:"VerticalLayout",children:[{type:"Label",id:"advSpacingLabel",text:__("Margin / Padding")},{type:_,id:"advSpacing"}]}]},{type:"FlowLayout",id:"liProperties",css:{marginTop:"15px"},spacing:20,children:[{type:"VerticalLayout",id:"liBulletCont",children:[{type:"Label",text:__("List Options"),helpText:__("Default bullet image for list items")},{type:"ImageSelector",fontAwesomeTab:!0,id:"advListBullet"}]},{type:"VerticalLayout",id:"liSpacingCont",children:[{type:"Label",text:__("List Item Margin / Padding")},{type:_,id:"liSpacing"}]}]},{type:"CustomContainer",id:"fontScaleBlock",children:[{type:"Label",text:__("Font Scale for different devices"),css:{marginTop:"15px"}},{type:"FlowLayout",styleClass:"font-scale-ctrl",spacing:20,children:[{type:"VerticalLayout",children:[{type:"Label",text:r.Service.modeManager.getModeName(r.Service.modeManager.MODE_TV)},{type:C,units:"%",min:1,max:500,init:function(e,t){t.fontScale[r.Service.modeManager.MODE_TV]=this}},{type:"CustomContainer",tag:"p",styleClass:"help-text",content:__("Recomended")+" 120%"}]},{type:"VerticalLayout",enabled:!1,children:[{type:"Label",text:r.Service.modeManager.getModeName(r.Service.modeManager.MODE_DESKTOP)},{type:C,units:"%",min:1,max:500,init:function(e,t){t.fontScale[r.Service.modeManager.MODE_DESKTOP]=this}},{type:"CustomContainer",styleClass:"cover"}]},{type:"VerticalLayout",children:[{type:"Label",text:r.Service.modeManager.getModeName(r.Service.modeManager.MODE_TABLET)},{type:C,units:"%",min:1,max:500,init:function(e,t){t.fontScale[r.Service.modeManager.MODE_TABLET]=this}},{type:"CustomContainer",tag:"p",styleClass:"help-text",content:__("Recomended")+" 80%"}]},{type:"VerticalLayout",children:[{type:"Label",text:r.Service.modeManager.getModeName(r.Service.modeManager.MODE_PHONE)},{type:C,units:"%",min:1,max:500,init:function(e,t){t.fontScale[r.Service.modeManager.MODE_PHONE]=this}},{type:"CustomContainer",tag:"p",styleClass:"help-text",content:__("Recomended")+" 60%"}]}],init:function(e,t){t.fontScale={}}}]},{type:"FlowLayout",id:"liTagCont",css:{marginTop:"15px"},spacing:20,children:[{type:"VerticalLayout",css:{width:100},children:[{type:"Label",text:__("Tag")},{type:"DropdownBox",id:"liTag",options:[{id:"h1",name:"<h1>"},{id:"h2",name:"<h2>"},{id:"h3",name:"<h3>"},{id:"h4",name:"<h4>"},{id:"h5",name:"<h5>"},{id:"h6",name:"<h6>"},{id:"p",name:"<p>"}]}]}]}]}]}]}]})),this.changeStylesDlg.dialog.addClass("wb-modal-settings"),"function"==typeof i&&(this.changeStylesDlg.onClosed=function(){n.stack.length>0||i()}),s=this.changeStylesDlg.fields,this.changeStylesDlg.addButton(__("Cancel")),this.changeStylesDlg.addButton(__("Apply"),(function(){for(var e in wb_builder.setPageModified(!0),s.tree.selectFirst(),o.styles=s.tree.getValue(),o.styles)o.styles.hasOwnProperty(e)&&o.styles[e].updateRuleSets();o.updateStyle(),o.changeStylesDlg.hide()}),!0)),(s=this.changeStylesDlg.fields).tree.removeAllItems();for(var a=0;a<this.styles.length;a++)s.tree.addItem(this.styles[a]);if(t){var l=!1;s.tree.getItemsLi().each((function(){var i=e(this).wbGetClassInstance();if(i&&i.selector===t)return s.tree.selectItemLi(e(this)),l=!0,!1})),l||s.tree.selectFirst()}else s.tree.selectFirst();this.changeStylesDlg.setVisible(!0),s.fontScaleBlock.setVisible(!wb_builder.layoutPopupMode||!wb_builder.layoutPopupWidth)},E.prototype.changeProperties=function(){this.changeDlg||(this.changeDlg=new s.SettingsDialog),this.changeDlg.setVisible(!0)},E.prototype.onUpdateLanguages=function(e){var t=new p.LanguagesUpdateBuilderEvent(e);if(p.GlobalEvents.triggerEvent("languages.update",t),!t.defaultPrevented){WB_Languages.reloadAll(e),c.reloadAll(),a.reloadAll();for(var i,n=wb_builder.bodyInstance.getContentElements(),o=0;i=n[o];o++)"function"==typeof i.onUpdateLanguages&&i.onUpdateLanguages()}},E.prototype.switchLanguage=function(e){var t=this;"function"==typeof wb_builder.bodyInstance.onBeforeSwitchLanguage&&wb_builder.bodyInstance.onBeforeSwitchLanguage(),wb_builder.bodyInstance.traverseElements((function(e){"function"==typeof e.onBeforeSwitchLanguage&&e.onBeforeSwitchLanguage()})),setTimeout((function(){t.currSelLang=e,wb_builder.bodyInstance.traverseElements((function(t){"function"==typeof t.onSwitchLanguage&&t.onSwitchLanguage(e)})),"function"==typeof wb_builder.bodyInstance.onSwitchLanguage&&wb_builder.bodyInstance.onSwitchLanguage(e)}),10)},E.Style=((f=function(e){e&&this.__construct(e)}).defaults=[{name:"Page Title",tag:"h4",ident:0,selector:".wb-stl-pagetitle",sys:{text:{size:24}}},{name:"Sub Title",tag:"h5",ident:1,selector:".wb-stl-subtitle",sys:{text:{size:18}}},{name:"Heading 1",tag:"h1",ident:0,selector:".wb-stl-heading1",sys:{text:{size:24}}},{name:"Heading 2",tag:"h2",ident:1,selector:".wb-stl-heading2",sys:{text:{size:20}}},{name:"Heading 3",tag:"h3",ident:1,selector:".wb-stl-heading3",sys:{text:{size:16}}},{name:"Normal",tag:"p",ident:0,selector:".wb-stl-normal",sys:{text:{size:12}}},{name:"Highlight",tag:"span",ident:1,selector:".wb-stl-highlight",rules:{"font-size":"12px",background:"yellow"},sys:{text:{size:12}}},{name:"Special",tag:"span",ident:1,selector:".wb-stl-special",sys:{text:{size:12,style:{bold:!0,underline:!0}}}},{name:"Footer",tag:"p",ident:0,selector:".wb-stl-footer",rules:{background:"black",color:"#ffffff"},sys:{text:{color:"#ffffff"}}},{name:"List 1",tag:["ul","ol"],ident:0,selector:".wb-stl-list1",sys:{text:{size:12,lineHeight:14,color:"#000000"}}},{name:"List 2",tag:["ul","ol"],ident:0,selector:".wb-stl-list2",sys:{text:{size:16,lineHeight:18,color:"#777777"}}},{name:"List 3",tag:["ul","ol"],ident:0,selector:".wb-stl-list3",sys:{text:{size:20,lineHeight:24,color:"#ffffff"}}}],f.prototype.selector=null,f.prototype.ruleSets=null,f.prototype.name=null,f.prototype.tag=null,f.prototype.ident=0,f.prototype.sys=null,f.prototype.modes=null,f.prototype.appliesToTag=function(e){return"object"==typeof this.tag?this.tag.indexOf(e)>=0:this.tag===e},f.prototype.isHeading=function(){return this.appliesToTag("h1")||this.appliesToTag("h2")||this.appliesToTag("h3")||this.appliesToTag("h4")||this.appliesToTag("h5")||this.appliesToTag("h6")},f.prototype.isParagraph=function(){return this.appliesToTag("p")},f.prototype.isCustom=function(){return/^\.wb\-stl\-custom\d+$/.test(this.selector)},f.prototype.buildSelector=function(e){if(e=e.replace(/{class}/gi,this.selector),!/{tag}/i.test(e))return e;for(var t=[],i="object"==typeof this.tag?this.tag:[this.tag],n=0;n<i.length;n++)t.push(e.replace(/{tag}/gi,i[n]));return t.join(", ")},f.enumerateRules=function(e,t){var i,n,o,s,r,a,l,c={};for(i=0;i<e.length;i++)for(s=e[i],n=0;n<s.ruleSets.length;n++)a=""+(r=s.ruleSets[n]).priority,c.hasOwnProperty(a)||(c[a]=[]),c[a].push([s,r]);var u=[];for(i in c)c.hasOwnProperty(i)&&u.push(c[i]);for(u.sort((function(e,t){return e[0][1].priority<t[0][1].priority?-1:1})),i=0;i<u.length;i++)for(l=u[i],n=0;n<l.length;n++)for(s=l[n][0],r=l[n][1],o=0;o<r.rules.length;o++)t(r.rules[o],r,s)},f.stringifyCss=function(e){var t=[];for(var i in e)!/-wb-/.test(i)&&e.hasOwnProperty(i)&&t.push(i+":"+e[i]+";");return t.join(" ")},f.prototype.updateRuleSets=function(){var t,i,n,o;this.ruleSets=[{priority:0,rules:[]}],this.sys.text=w.buildCss(this.sys.text),i=e.extend(!0,{},this.sys.text.css);var s=e.extend(!0,{},i);if(this.sys.advSpacing&&this.sys.advSpacing.css&&(s=e.extend(!0,s,this.sys.advSpacing.css)),this.sys.advTextTransform&&this.sys.advTextTransform.css&&(s=e.extend(!0,s,this.sys.advTextTransform.css)),this.ruleSets[0].rules.push({selector:this.selector,css:s}),n=e.extend(!0,{},i),this.sys.linkNormalColor&&(n.color=this.sys.linkNormalColor),this.sys.linkNormalStyle&&this.sys.linkNormalStyle.css&&(n=e.extend(!0,{},n,this.sys.linkNormalStyle.css)),this.ruleSets[0].rules.push({selector:this.buildSelector("{class} a"),css:n}),o=e.extend(!0,{},i),this.sys.linkHoverColor&&(o.color=this.sys.linkHoverColor),this.sys.linkHoverStyle&&this.sys.linkHoverStyle.css&&(o=e.extend(!0,{},o,this.sys.linkHoverStyle.css)),this.ruleSets[0].rules.push({selector:this.buildSelector("{class} a:hover"),css:o}),this.appliesToTag("ul")||this.appliesToTag("ol")){var r=!!this.sys.advListBullet&&"object"==typeof this.sys.advListBullet&&this.sys.advListBullet,a=this.sys.advListBullet&&!r?"url('"+(this.sys.advListBullet?this.sys.advListBullet.replace(/\'/g,"\\'"):"")+"')":"none";if(this.ruleSets.push({priority:1,rules:[]}),this.ruleSets[0].rules.push({selector:this.buildSelector("{tag}{class} ul:not([class]), {tag}{class} ol:not([class])"),css:this.ruleSets[0].rules[0].css}),(t=e.extend(!0,{},i,this.sys.liSpacing&&this.sys.liSpacing.css?this.sys.liSpacing.css:{}))["list-style-type"]=r?"none":"unset",this.sys.advListBullet&&!r&&(t["list-style-image"]=a),this.ruleSets[0].rules.push({selector:this.buildSelector("{tag}{class} :not([class]) > li"),css:t}),this.ruleSets[1].rules.push({selector:this.buildSelector("{tag}{class} > li"),css:t}),r){var l=this.sys.liSpacing?this.sys.liSpacing.paddingLeft:0;t={content:'"'+(r?"\\"+this.sys.advListBullet.faCharacter:this.sys.advListBullet?"":"\\2022")+'"',"font-size":i["font-size"],"font-family":r?'"FontAwesome"':"",display:"inline-block","vertical-align":"middle","background-image":a,"background-repeat":"no-repeat","background-size":"contain","background-position":"center center",width:i["font-size"],height:i["line-height"],"margin-left":"-"+i["font-size"],"margin-right":l+"px","-wb-offs-post-calc":l}}else t={display:"none"};this.ruleSets[0].rules.push({selector:this.buildSelector("{tag}{class} li::before"),css:t}),this.ruleSets[1].rules.push({selector:this.buildSelector("{tag}{class} > li::before"),css:t})}return this},f.prototype.__construct=function(e){if(function(e){if(!(e&&"object"==typeof e&&e.selector&&"object"==typeof e.sys&&e.sys&&"object"==typeof e.sys.advSpacing&&e.sys.advSpacing))return;let t=50,i=!1,n=!1;if(".wb-stl-footer"==e.selector){let o=e.sys.advSpacing;(o.marginTop<-50||o.marginTop>t)&&(o.marginTop=0,i=!0),(o.marginRight<-50||o.marginRight>t)&&(o.marginRight=0,i=!0),(o.marginBottom<-50||o.marginBottom>t)&&(o.marginBottom=0,i=!0),(o.marginLeft<-50||o.marginLeft>t)&&(o.marginLeft=0,i=!0),i&&o.css&&"margin"in o.css&&(o.css.margin=o.marginTop+"px "+o.marginRight+"px "+o.marginBottom+"px "+o.marginLeft+"px"),(o.paddingTop<-50||o.paddingTop>t)&&(o.paddingTop=0,n=!0),(o.paddingRight<-50||o.paddingRight>t)&&(o.paddingRight=0,n=!0),(o.paddingBottom<-50||o.paddingBottom>t)&&(o.paddingBottom=0,n=!0),(o.paddingLeft<-50||o.paddingLeft>t)&&(o.paddingLeft=0,n=!0),n&&o.css&&"padding"in o.css&&(o.css.padding=o.paddingTop+"px "+o.paddingRight+"px "+o.paddingBottom+"px "+o.paddingLeft+"px")}}(e),this.selector=e.selector?e.selector+"":".dummy-no-name",this.name=e.name?e.name+"":"no-name",this.tag=e.tag?"object"==typeof e.tag?e.tag:e.tag+"":"span",this.ident=e.ident&&!isNaN(parseInt(e.ident,10))?e.ident:0,this.sys=e.sys&&"object"==typeof e.sys?e.sys:{},"ul"!==this.tag&&"ol"!==this.tag||(this.tag=["ul","ol"]),(this.appliesToTag("ul")||this.appliesToTag("ol"))&&(this.sys.advSpacing?this.sys.liSpacing||0!==this.sys.advSpacing.paddingLeft||(this.sys.advSpacing.paddingLeft=40):this.sys.advSpacing=_.createValue({paddingLeft:40}),this.sys.liSpacing||(this.sys.liSpacing=_.createValue())),this.modes={},this.modes[h.MODE_TV]=new f.Mode({fontScale:1.2}),this.modes[h.MODE_DESKTOP]=new f.Mode({fontScale:1}),this.modes[h.MODE_TABLET]=new f.Mode({fontScale:.8}),this.modes[h.MODE_PHONE]=new f.Mode({fontScale:.6}),e.modes)for(var t in e.modes)this.modes[t]=new f.Mode(e.modes[t]);this.updateRuleSets()},f.prototype.getUsedMediaGalleryItems=function(){var e=[];return this.sys&&"object"==typeof this.sys&&this.sys.hasOwnProperty("advListBullet")&&this.sys.advListBullet&&""!==this.sys.advListBullet&&"none"!==this.sys.advListBullet&&e.push(this.sys.advListBullet),e},f.prototype.getUsedFonts=function(){var e=[];return this.sys&&"object"==typeof this.sys&&this.sys.hasOwnProperty("text")&&this.sys.text&&this.sys.text.font&&""!==this.sys.text.font&&e.push(this.sys.text.font),e},f.prototype.serialize=function(){var t={};for(var i in this.modes)t[i]=this.modes[i].serialize();return{selector:this.selector,name:this.name,tag:this.tag,ident:this.ident,sys:e.extend(!0,{},this.sys),modes:t}},f.prototype.equals=function(e){var t=this.serialize(),i=e.serialize();return delete t.selector,delete t.ruleSets,delete t.name,delete t.ident,delete i.selector,delete i.ruleSets,delete i.name,delete i.ident,JSON.stringify(t)===JSON.stringify(i)},f.Mode=function(){var e=function(e,t){e.fontScale=t.fontScale},t=function(t){t&&e(this,t)};return t.prototype.fontScale=1,t.prototype.copy=function(t){e(this,t)},t.prototype.serialize=function(){return{fontScale:this.fontScale}},t}(),f),E.AnchorUtil={builder:null,site:null,init:function(e,t){this.builder=e,this.site=t},addByElem:function(e){e.anchor&&this.applyData(this.prepareElemData(e,e.anchor))},removeByElem:function(e,t){var i=t||e.anchor;i&&this.applyData(this.prepareElemData(e,i),!0)},refreshData:function(){var e,t,i=[],n=[];for(e in this.site.pages)i.push(""+this.site.pages[e].id);for(e in this.site.anchors)i.indexOf(""+e)<0&&n.push(""+e);for(t in n)delete this.site.anchors[n[t]]},getData:function(e,t){e||(e=this.builder.pageId),!t&&this.site.currSelLang&&(t=this.site.currSelLang),!t&&this.site.lastDefLang&&(t=this.site.lastDefLang);var i=[];if(""+e in this.site.anchors)for(var n in this.site.anchors[""+e]){var o=this.site.anchors[""+e][n];"object"==typeof o?t&&t in o&&o[t]&&i.push(n):!0===o&&i.push(n)}return i},serialize:function(){var e={};for(var t in this.site.anchors){var i=this.site.anchors[t];for(var n in i){var o=i[n],s=this.normalizeDataPart(o),r=!1;if("object"==typeof s){for(var a in s)if(s[a]){r=!0;break}}else s&&(r=!0);r&&(""+t in e||(e[""+t]={}),e[""+t][n]=s)}}return e},prepareElemData:function(e,t){var i=e.isCommon,n=e.includePages,o=Object.keys(n).length>0,s={};if(i)if(o)for(var r in n)s[""+r]={},s[""+r][t]=n[r];else for(var r in this.site.pages)s[""+this.site.pages[r].id]={},s[""+this.site.pages[r].id][t]=!0;else s[""+this.builder.pageId]={},s[""+this.builder.pageId][t]=!o||n;return s},applyData:function(e,t){if(t){for(var i in this.site.anchors)if(""+i in e)for(var n in this.site.anchors[i])n in e[""+i]&&(this.site.anchors[i][n]=this.substractDataPart(this.site.anchors[i][n],e[""+i][n]))}else for(var i in e){""+i in this.site.anchors||(this.site.anchors[""+i]={});var o=e[""+i];for(var n in o)this.site.anchors[""+i][n]=this.mergeDataParts(n in this.site.anchors[""+i]?this.site.anchors[""+i][n]:null,o[n])}},normalizeDataPart:function(e){var t;if(this.site.languages.length>0){t={};for(var i=0,n=this.site.languages.length;i<n;i++){var o=this.site.languages[i].code;t[o]=e&&"object"==typeof e?o in e&&e[o]:!!e}}else t=e&&"object"==typeof e?!(!this.site.lastDefLang||!(this.site.lastDefLang in e))&&e[this.site.lastDefLang]:!!e;return t},mergeDataParts:function(t,i){var n,o=this.normalizeDataPart(t),s=this.normalizeDataPart(i);if(this.site.languages.length>0)for(var r in n=e.extend(!0,{},o),s)n[r]=s[r];else n=s;return n},substractDataPart:function(t,i){var n,o=this.normalizeDataPart(t),s=this.normalizeDataPart(i);if(this.site.languages.length>0)for(var r in n=e.extend(!0,{},o),s)n[r]=!s[r];else n=!s;return n},fixOldData:function(e){var t,i,n,o={};for(var s in e)for(t=0,n=e[""+s].length;t<n;t++){""+s in o||(o[""+s]={});for(i=0;i<e[""+s].length;i++)o[""+s][e[""+s][i]]=!0}return o}},r.Service.style={enumerateRules:E.Style.enumerateRules,stringifyCss:E.Style.stringifyCss},r.Service.site=E,window.WB_Site=E,E}.apply(t,n))||(e.exports=o)},"./WB_SkypeImOnline.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./element/Controls.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s){"use strict";var r=i("./ColorPicker.ts").ColorPicker,a=function(e){e&&this.__construct(e)};return __extends(a,t.Element),e.registerClass("SkypeImOnline",a),a.prototype.action=!1,a.prototype.members=!1,a.prototype._button=!1,a.prototype._bubblePlaceholder=null,a.prototype.size=!1,a.prototype.id=!1,a.prototype._params=null,Object.defineProperty(a.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonStyle",{get:function(){return this._params.style},set:function(e){this._params.style=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonLabel",{get:function(){return this._params.label},set:function(e){this._params.label=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonShowIcon",{get:function(){return this._params.showIcon},set:function(e){this._params.showIcon=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"btnColor",{get:function(){return this._params.btnColor},set:function(e){this._params.btnColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contactName",{get:function(){return this._params.name},set:function(e){this._params.name=e},enumerable:!0,configurable:!0}),a.lastId=0,a.prototype.__construct=function(e){t.Element.call(this,e),this.elem.addClass("wb_skype_element"),a.lastId++,this.id=a.lastId,this.container.append('<script type="text/javascript" src="https://download.skype.com/share/skypebuttons/js/skypeCheck.js"><\/script>'),this._button=s('<span class="skype-button">'),this.container.append(this._button),this._bubblePlaceholder=s('<div class="wb_caption smaller"><div><i class="ico-tb-skype-imonline"></i> <strong>Skype</strong><br />'+__("Bubble element will appear at the page bottom right side")+"</div></div>").hide(),this.container.append(this._bubblePlaceholder);var i=this;this.params={style:e.content.style?e.content.style:"rounded",label:e.content.label?e.content.label:__("Contact Us"),showIcon:!("showIcon"in e.content)||e.content.showIcon,btnColor:e.content.btnColor?e.content.btnColor:"#00AFF0",name:e.content.name?e.content.name:""},a.scriptAdded||(s.getScript("https://swc.cdn.skype.com/sdk/v1/sdk.min.js"),a.scriptAdded=!0);var n=120,o=function(){if("SkypeWebControl"in window&&window.SkypeWebControl)i.updateStyle(!0);else{if(--n<=0)return;setTimeout(o,250)}};setTimeout(o,250)},a.prototype.getDataDefaults=function(){return s.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:60,minHeight:34})},a.prototype.getIcon=function(){return"fa fa-skype"},a.prototype.getDefaultResizeMode=function(){return n.ControlsResizeMode.NONE},a.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={style:this.buttonStyle,label:this.buttonLabel,showIcon:this.buttonShowIcon,btnColor:this.btnColor,name:this.contactName},e},a.prototype.updateStyle=function(e,i){if(t.Element.prototype.updateStyle.call(this,e,i),"SkypeWebControl"in window&&window.SkypeWebControl){i=i||this.system.site.currSelLang;var n=this.params,o=this;"object"!=typeof n&&(n={}),n.style=n.style?n.style:"rounded",n.label=n.label?n.label:__("Contact Us"),n.showIcon=!("showIcon"in n)||n.showIcon,n.btnColor=n.btnColor?n.btnColor:"#00AFF0";var s=n.name?n.name:"";this.params=n,this._button.empty(),"bubble"===n.style?(this._button.hide(),this._bubblePlaceholder.show(),this.setSize(190,70)):(this._bubblePlaceholder.hide(),this._button.show(),this._button.attr("class","skype-button"),this._button.addClass(n.style),this._button.attr("data-text",__tr(n.label,i)),n.showIcon?this._button.removeClass("textonly"):this._button.addClass("textonly"),this._button.attr("data-color",n.btnColor),this._button.attr("data-contact-id",s||"echo123"),SkypeWebControl.SDK.Buttons.refresh(),setTimeout((function(){var e=o._button.children(".lwc-chat-button");o.setSize(e.outerWidth(),e.outerHeight())}),10))}},a.prototype.onSwitchLanguage=function(e){t.Element.prototype.onSwitchLanguage.call(this,e),this.updateStyle(!0,e)},a.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Skype Name")},{type:"TextField",id:"skypeName",placeholder:"echo123",change:function(){i.skypePreview.setParam("name",this.getValue())}}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Style")},{type:"DropdownBox",id:"skypeStyle",options:[{id:"bubble",name:__("Bubble")},{id:"rounded",name:__("Rounded")},{id:"rectangle",name:__("Rectangle")}],change:function(e){e.styleOpts.setVisible("bubble"!==this.getValue()),e.skypePreview.setParam("style",this.getValue())}}]},{type:"HorizontalLayout",css:{marginTop:15},id:"styleOpts",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Show Icon")},{type:"RadioBox",label:__("Yes"),id:"skypeShowIconYes",group:"skypeShowIcon",change:function(){i.skypePreview.setParam("showIcon",!0)}},{type:"RadioBox",label:__("No"),id:"skypeShowIconNo",group:"skypeShowIcon",change:function(){i.skypePreview.setParam("showIcon",!1)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Button Label")},{type:"TextField",id:"skypeButtonLabel",change:function(){i.skypePreview.setParam("label",this.getValue())}}]}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Button Color")},{type:r,id:"skypeButtonColor",change:function(){i.skypePreview.setParam("btnColor",this.getValue())}}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"skypePreview",init:function(){var t=s("<i>").addClass("icon-loading").css({position:"absolute"}).appendTo(this._elem),i=s('<span class="skype-button">'),n=s("<div>").addClass("wb-skype-preview");n.append(s("<div>").addClass("wb-skype-preview-backdrop")),n.append(i),this._elem.append(n);var o={style:e.buttonStyle,label:e.buttonLabel,showIcon:e.buttonShowIcon,btnColor:e.btnColor,name:e.contactName},r=!1,a=function(){n.fadeOut(200,(function(){i.empty(),t.fadeIn(100),t.fadeOut(100),n.fadeIn(300),i.attr("class","skype-button"),i.addClass(o.style),i.attr("data-text",__tr(o.label,e.system.site.currSelLang)),o.showIcon?i.removeClass("textonly"):i.addClass("textonly"),i.attr("data-color",o.btnColor),i.attr("data-contact-id",o.name),SkypeWebControl.SDK.Buttons.refresh()}))};this.setAutoUpdate=function(e){(r=!!e)&&a()},this.setParam=function(e,t){o[e]=t,r&&a()},this.getParam=function(e){return o[e]}}}]}]}],callbackFunc:function(t){e.buttonStyle=t.skypeStyle.getValue(),e.buttonLabel=t.skypeButtonLabel.getValue(),e.buttonShowIcon=t.skypeShowIconYes.getValue(),e.btnColor=t.skypeButtonColor.getValue(),e.contactName=t.skypeName.getValue(),e.updateStyle()}});i.skypePreview.setAutoUpdate(!1),i.skypeName.setValue(this.contactName),i.skypeStyle.setValue(this.buttonStyle),i.skypeStyle.trigger("change"),i.skypeButtonLabel.setValue(this.buttonLabel),this.buttonShowIcon?(i.skypeShowIconYes.setValue(!0),i.skypeShowIconYes.trigger("change")):(i.skypeShowIconNo.setValue(!0),i.skypeShowIconNo.trigger("change")),i.skypeButtonColor.setValue(this.btnColor),i.skypeButtonColor.trigger("change"),i.skypePreview.setAutoUpdate(!0)},a.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"contactName",type:o.PropertyType.SkypeContactName,dependencies:["params"]}),this.registerProperty({name:"buttonStyle",type:o.PropertyType.SkypeButtonStyle,dependencies:["params"]}),this.registerProperty({name:"buttonLabel",type:o.PropertyType.SkypeButtonText,dependencies:["params"],uiComponentOptions:{label:__("Button Label")}}),this.registerProperty({name:"buttonShowIcon",type:o.PropertyType.SkypeButtonIconVisible,dependencies:["params"]}),this.registerProperty({name:"btnColor",type:o.PropertyType.SkypeBackgroundColor,dependencies:["params"],uiComponentOptions:{label:__("Button Color")}})},a}.apply(t,n))||(e.exports=o)},"./WB_StyleControl.class.js":function(e,t,i){var n,o;n=[i("./WB_ComboBox.class.js"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){"use strict";var i=function(e){this.__construct(e)};return i.prototype.elem=null,i.prototype.input=null,i.prototype._elem=null,i.prototype.emptyChoice=!1,i.prototype.onChange=null,i.prototype.__construct=function(i){this.elem=t("<div/>"),this._elem=new e,this.elem.append(this._elem.elem),this.input=this._elem.input,i&&(this.emptyChoice=!0);var n=this;this._elem.onChange=function(){n._triggerOnChange(),n.onValueChanged()},this.update()},i.prototype._triggerOnChange=function(){"function"==typeof this.onChange&&this.onChange.call(this)},i.prototype.update=function(){this._elem.removeAllOptions(),this.emptyChoice&&this._elem.addOption(""," - ");for(var e=0;e<wb_builder.site.styles.length;e++){var t=wb_builder.site.styles[e],i=t.ident?10*t.ident+20:0,n=this._elem.addOption(t.selector.substring(1),t.name);i&&n.children("a").css({paddingLeft:i+"px"})}},i.prototype.setEmptyChoice=function(e){if(this.emptyChoice!==e){this.emptyChoice=e;var t=this._elem.getValue();this.update(),this._elem.setValue(t)}},i.prototype.getValue=function(){return this._elem.getValue()},i.prototype.setValue=function(e){this._elem.setValue(e)},i.prototype._componentWrapper=null,i.prototype.bindings=null,i.prototype.bindingsBySubType=null,i.prototype.dependencyBindings=null,i.prototype.propertyType=null,i.prototype._revalidating=!1,i.supportsMultipleObjectBindings=function(){return!1},i.prototype.setComponentOptions=function(e){"emptyChoice"in e&&this.setEmptyChoice(!!e.emptyChoice)},i}.apply(t,n))||(e.exports=o)},"./WB_TabbedPane.class.js":function(e,t,i){var n,o;n=[i("./UIComponent.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t){"use strict";var i=function(){this.__construct()};return(i.prototype=new e.UIComponent("%inherit%")).constructor=i,i.prototype.elem=null,i.prototype.elemNav=null,i.prototype.elemContent=null,i.prototype.id=null,i.prototype.tabIndex=0,i.prototype.locked=!1,i.paneIndex=0,i.prototype._events=null,i.prototype._navVisible=!1,i.prototype._shownTabFunc=null,i.prototype.onChange=null,i.prototype.tabs=null,i.prototype.tab=null,i.prototype.__construct=function(){e.UIComponent.prototype.constructor.call(this),this.id="wb_tab_pane_"+i.paneIndex++,this.tabs=[],this._elem.addClass("tabbable"),this.elemNav=t("<ul>").addClass("nav nav-tabs").appendTo(this._elem),this.elemContent=t("<div>").addClass("tab-content").appendTo(this._elem),this.elemNav.hide(),this._navVisible=!1,this.elem=this._elem,this._events=[],this.trigger("nav-hide");var n=this;this._shownTabFunc=function(e,t){"function"==typeof n.onChange&&n.onChange.call(n,e.target,e.relatedTarget,t)}},i.prototype.setLocked=function(e){this.locked=e},i.prototype.addTab=function(e,i){var n=this,o=this.id+"_tab"+this.tabIndex++,s=t('<li><a data-toggle="tab"></a></li>'),r=t("<div>").addClass("tab-pane");r.attr("id",o);var a={id:o,type:null,btnElem:s,btnAnchorElem:s.children("a").eq(0),contentElem:r};return s.children("a").on("shown.bs.tab",(function(e){n.tab=a,n._shownTabFunc.call(this,e,a)})).attr({href:"#"+o}).html(e),null==i||i>=this.elemNav.children().size()?(this.elemNav.append(s),this.elemContent.append(r),this.tabs.push(a)):(this.elemNav.children().eq(i).before(s),this.elemContent.children().eq(i).before(r),i<=0?this.tabs.unshift(a):i>=this.tabs.length?this.tabs.push(a):this.tabs.splice(i,0,a)),this.elemNav.children("li").size()>1&&!this.locked&&(this._navVisible||(this.elemNav.show(),this._navVisible=!0,this.trigger("nav-show"))),a},i.prototype.setNavVisible=function(e,t){e&&(this.elemNav.children("li").length>1||t)?this._navVisible||(this.elemNav.show(),this._navVisible=!0,this.trigger("nav-show")):this._navVisible&&(this.elemNav.hide(),this._navVisible=!1,this.trigger("nav-hide"))},i.prototype.setTabVisible=function(e,t){if(e){var i=e.btnElem,n=e.contentElem;t?(i.css({display:""}),n.css({display:""})):(i.css({display:"none"}),n.css({display:"none"}))}},i.prototype.getTabByType=function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].type===e)return this.tabs[t];return null},i.prototype.selectTab=function(e,t){this.locked||(this.elemNav.children().removeClass("active"),this.elemContent.children().removeClass("active"),this.tab=t||(e>=0&&e<this.tabs.length?this.tabs[e]:null),this.tab&&(this.tab.btnElem.addClass("active"),this.tab.contentElem.addClass("active")))},i.prototype.selectTabByType=function(e){var t=this.getTabByType(e);return t&&this.selectTab(-1,t),t},i.prototype.getSelectedTabDef=function(){return this.tab},i.prototype.getSelectedTab=function(){return this.tab.btnElem},i.prototype.setFixedHeight=function(e){this.elemContent.css({height:e+"px","overflow-y":"auto"})},i.prototype.setNoScroll=function(){this.elemContent.css({"overflow-x":"","overflow-y":"",overflow:"visible"})},i.prototype.on=function(t,i){return"nav-show"===t||"nav-hide"===t?this._events.push({id:t,func:i}):e.UIComponent.prototype.on.call(this,t,i),this},i.prototype.off=function(t,i){if("nav-show"===t||"nav-hide"===t)for(var n=this._events.length-1;n>=0;n--)this._events[n].func===i&&this._events.splice(n,1);else e.UIComponent.prototype.off.call(this,t,i);return this},i.prototype.trigger=function(t,i){if("nav-show"===t||"nav-hide"===t)for(var n=0;n<this._events.length;n++)this._events[n].id===t&&this._events[n].func(this,i);else e.UIComponent.prototype.trigger.call(this,t,i);return this},window.WB_TabbedPane=i,i}.apply(t,n))||(e.exports=o)},"./WB_Table.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./ElementRegister.ts"),i("./Element.ts"),i("./ContextMenu.ts"),i("./util/EventUtil.ts"),i("./element/Controls.ts"),i("./WB_TextArea.class.js"),i("./element/PropertyType.ts")],void 0===(o=function(e,t,n,o,s,r,a,l){"use strict";var c,u=i("./BorderControl.ts").BorderControl,d=i("./ColorPicker.ts").ColorPicker,h=i("./SizeSelector.ts").SizeSelector;function p(){}function m(e){e&&this.__construct(e)}return p.prototype.isResizable=!1,p.prototype.isDown=!1,p.prototype.pos=null,p.prototype.cellColA=null,p.prototype.cellColB=null,p.prototype.bounds={left:0,top:0,right:0,bottom:0,width:0,totalWidth:0},p.prototype.start=function(e,t){if(this.isResizable&&this.cellColA&&this.cellColB){this.isDown=!0,this.pos=s.posFromEvent(e);var i=this.cellColA[0].elem.get(0).getBoundingClientRect(),n=this.cellColB[0].elem.get(0).getBoundingClientRect();this.bounds.left=i.left,this.bounds.top=i.top,this.bounds.right=n.right,this.bounds.bottom=n.bottom,this.bounds.width=n.right-i.left,this.bounds.totalWidth=t}},p.prototype.stop=function(){this.isDown=!1},p.prototype.update=function(e){if(this.isDown&&this.cellColA&&this.cellColB){for(var t=s.posFromEvent(e),i=Math.min(Math.max(10,t.left-this.bounds.left),this.bounds.width-10),n=this.bounds.width-i,o=0,r=this.cellColA.length;o<r;o++)this.cellColA[o].setSize(100*i/this.bounds.totalWidth);for(o=0,r=this.cellColB.length;o<r;o++)this.cellColB[o].setSize(100*n/this.bounds.totalWidth)}},p.prototype.set=function(e,t){this.isResizable=!0,this.cellColA=e,this.cellColB=t},p.prototype.unset=function(){this.isResizable=!1},__extends(m,n.Element),t.registerClass("Table",m),m.editor=null,m.prototype.table=null,m.prototype.tableBody=null,m.prototype.cols=0,m.prototype.rows=0,m.prototype.cells=null,m.prototype.resizeCells=null,m.prototype.selectedCells=null,m.prototype._border=null,Object.defineProperty(m.prototype,"border",{get:function(){return this._border},set:function(e){this._border=e},enumerable:!0,configurable:!0}),m.prototype._padding=null,Object.defineProperty(m.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding=e},enumerable:!0,configurable:!0}),m.prototype._bgColor=null,Object.defineProperty(m.prototype,"bgColor",{get:function(){return this._bgColor},set:function(e){this._bgColor=e},enumerable:!0,configurable:!0}),m.prototype.editingCell=null,m.prototype._selectableConfig=null,m.prototype._selectableDisabled=!1,m.prototype._eventsDisabled=!0,m.prototype._absTable=!1,m.prototype.__construct=function(t){n.Element.call(this,t);var i=this;this.cols=t.content.cols?1*t.content.cols:2,this.rows=t.content.rows?1*t.content.rows:2,this.table=e("<table>").attr({cellspacing:0,cellpadding:0}).append("<tbody>"),this.table.addClass("wb_table"),this.table.css({"border-collapse":"collapse"}),this.tableBody=this.table.children("tbody"),this.container.append(this.table),this.selectedCells=[],m.editor||(m.editor=new WB_TextArea({content:{},_fromTablePlugin:!0}),m._showEditor=m.editor.showEditor,m.editor.showEditor=function(e){m.editor.hideEditor(),this.textId=e.textId,this.editorId=e.textId+"_editor",this.textDiv=e.container,this.textDivValue=e.text,m._showEditor.call(this),this.textDiv.removeClass("outline1").addClass("outline2"),this.thisTable=e.table,this.thisTable.editingCell=e,this.thisTable.setEventsEnabled(!1),this.thisTable.setControlsEnabled(!1)},m._hideEditor=m.editor.hideEditor,m.editor.hideEditor=function(){m._hideEditor.call(this),this.thisTable&&(this.thisTable.editingCell.text=this.textDivValue,this.textDiv.removeClass("outline2"),this.thisTable.setControlsEnabled(!0),this.thisTable.editingCell=null,this.thisTable.setEventsEnabled(!0),this.thisTable.updateElemSize(),this.thisTable.table.removeAttr("data-cke-table-faked-selection-table"),this.thisTable.table.find("td").removeClass("cke_table-faked-selection"),this.thisTable.table.find("td > div").removeClass("cke_table-faked-selection-editor"),this.thisTable=null)}),this.cells={};var o,s,r,a=t.content.cells?t.content.cells:[],l=0,c=0,u=this.calcTotalWidth(a),d=!!t.content.resp;for(l=0;l<this.rows;l++){for(o=e("<tr>"),c=0;c<this.cols;c++){if((s=this.getCell(l,c,a))||(s={},a.push(s)),t._copy&&(s.id=null),void 0===s.r&&(s.row=l),void 0===s.c&&(s.col=c),void 0===s.width){var h=this.getCell(0,c,a);h&&(s.width=h.width)}d||(s.width=100*s.width/u),(r=new m.TableCell(s)).row=l,r.col=c,r.table=this,o.append(r.elem),this.cells["#"+r.id]=r}this.tableBody.append(o)}this._border=t.content.border?t.content.border:{color:"#c0c0c0",style:"solid",weight:1,css:{border:"1px solid #c0c0c0"}},this._padding=t.content.padding||0===t.content.padding?t.content.padding:2,this._bgColor=t.content.bgColor?t.content.bgColor:"transparent",this.updateElemSize(!0),this.isElementPreview||(this.moveBtn.elem.bind("mousedown",(function(e){i.elem.unbind("mousemove",i._mousemoveFunc)})),this.moveBtn.elem.bind("mouseup",(function(e){i.elem.bind("mousemove",i._mousemoveFunc)})));var g=this.resizeCells=new p;this._mousemoveFunc=function(e){if(g.isDown)return i._onMouseDrag(e),e.stopPropagation(),!1;i._onMouseMove(e)},this._mousedownFunc=function(e){2===e.button?i._selectCellByEvent(e):g.start(e,i.getWidthInPixels())},this._mouseupFunc=function(e){g.stop()},this._dblclickFunc=function(e){i._selectCellByEvent(e),i.editCell(),e.stopPropagation()},this.isLocked&&this.setLocked(this.isLocked),this.setEventsEnabled(!0)},m.prototype.getDataDefaults=function(){return e.extend(n.Element.prototype.getDataDefaults.call(this),{minWidth:10,minHeight:10})},m.prototype.getDefaultResizeMode=function(){return r.ControlsResizeMode.HORIZONTAL},m.prototype.getIcon=function(){return"fa fa-table"},m.prototype.supportsAutoWidth=function(){return!0},m.prototype.supportsAutoHeight=function(){return!0},m.prototype.setLayoutConstraints=function(e,t){n.Element.prototype.setLayoutConstraints.call(this,e,t),this._absTable="absolute"===e,this.updateElemSize(t)},m.prototype.canBeMoved=function(){return!this.resizeCells.isResizable&&!this.resizeCells.isDown},m.prototype._selectCellByEvent=function(e){var t,i,n,o,s,r,a=e.pageX,l=e.pageY;for(var c in this.cells)if(i=(r=(t=this.cells[c]).elem.offset()).left,n=r.top,o=t.elem.outerWidth(),s=t.elem.outerHeight(),a>=i&&a<=i+o&&l>=n&&l<=n+s){if("#"+t.id in this.selectedCells)break;for(var u in this.cells)this.cells[u].elem.removeClass("ui-selected");t.elem.addClass("ui-selected"),this.selectedCells={},this.selectedCells["#"+t.id]=t;break}},m.prototype.setEventsEnabled=function(e){this.isElementPreview||(e&&this._eventsDisabled?(this.elem.wbSetClassInstance(this),this.cover.bind("mousedown",this._mousedownFunc),this.cover.bind("mousemove",this._mousemoveFunc),this.cover.bind("mouseup",this._mouseupFunc),this.cover.bind("dblclick",this._dblclickFunc),this._eventsDisabled=!1):e||this._eventsDisabled||(this.cover.unbind("mousedown",this._mousedownFunc),this.cover.unbind("mousemove",this._mousemoveFunc),this.cover.unbind("mouseup",this._mouseupFunc),this.cover.unbind("dblclick",this._dblclickFunc),this._eventsDisabled=!0))},m.prototype._selectableSetEnabled=function(e){this.isElementPreview||this.elem.hasClass("ui-selectable")&&(e&&this._selectableDisabled&&!this.editingCell?(this.elem.selectable("enable"),this._selectableDisabled=!1):e||this._selectableDisabled||(this.elem.selectable("disable"),this.elem.removeClass("ui-state-disabled"),this._selectableDisabled=!0))},m.prototype._getModOffset=function(e){var t=this.elem.offset();return{x:e.pageX-t.left,y:e.pageY-t.top}},m.prototype._onMouseDrag=function(e){this.resizeCells.update(e),this.updateElemSize()},m.prototype._onMouseMove=function(e){if(!this.resizeCells.isDown){var t=e.offsetX,i=this.getHorizBorderWeight(),n=(this.getWidthInPixels(),0),o=(Math.max(i,10)-i)/2,s=0,r=i,a=!1,l=this.getRow(0);l.sort((function(e,t){return e.col>t.col?1:-1})),this.resizeCells.unset();for(var c=0,u=l.length;c<u;c++)if(r+=(n=l[c].elem.outerWidth())+i,t>=(s+=n+i)-o&&t<=r+o&&u>c+1){this.resizeCells.set(this.getCol(c),this.getCol(c+1)),a=!0;break}a?this.elem.css("cursor","w-resize"):this.elem.css("cursor","")}},m.prototype.getFirstSelectedCell=function(e){if(e=!!e,Object.keys(this.selectedCells).length){var t=null;if(e)for(var i in this.selectedCells){var n=this.selectedCells[i];(!t||n.col>t.col||n.row>t.row)&&(t=n)}else for(var i in this.selectedCells)n=this.selectedCells[i],(!t||n.row<t.row||n.col<t.col)&&(t=n);return t}return null},m.prototype.getCell=function(e,t,i){for(var n in i=i||this.cells){var o=i[n];if(o.row===e&&o.col===t)return o}return null},m.prototype.getLastCell=function(){return this.getCell(this.rows-1,this.cols-1)},m.prototype.getUsedSiteStyles=function(){var e=n.Element.prototype.getUsedSiteStyles.call(this);for(var t in this.cells)this.cells.hasOwnProperty(t)&&(e=e.concat(a.scanTextForStyleUsage(this.cells[t].text)));return e},m.prototype.serialize=function(){var e=n.Element.prototype.serialize.call(this),t=[];for(var i in this.cells)t.push(this.cells[i].serialize());return e.content={resp:!0,cols:this.cols,rows:this.rows,border:this.border,padding:this.padding,bgColor:this.bgColor,cells:t},e},m.prototype.setLocked=function(e,t){if(e)for(var i in this.cells)this.cells[i].elem.removeClass("ui-selected");n.Element.prototype.setLocked.call(this,e)},m.prototype.calcTotalWidth=function(e){var t,i,n,o,s=0,r=this.getRow(0,e);for(t=0,i=r.length;t<i;t++)n=0===t,o=t===i-1,s+=Math.ceil(r[t].width),this.border&&this.border.weight&&("object"==typeof this.border.weight&&this.border.weight?this.border.differ?s+=n?this.border.weight[3]:o?this.border.weight[1]:Math.max(this.border.weight[1],this.border.weight[3]):s+=this.border.weight[0]:this.border.weight&&(s+=this.border.weight));return s},m.prototype.onResize=function(e){this.__noResize__?this.__noResize__=!1:n.Element.prototype.onResize.call(this,e)},m.prototype.updateElemSize=function(e){this.setSize(null,this._absTable?this.table.outerHeight():"auto"),this.onResize(e)},m.prototype.updateStyle=function(e,t){n.Element.prototype.updateStyle.call(this,e,t),this._border&&this._border.css?this.table.find("td").css(this._border.css):this.table.find("td").attr("style",""),this.table.css("background-color",this._bgColor?this._bgColor:"transparent"),this.table.find("td > div").css("padding",("number"==typeof this._padding?this._padding:0)+"px"),this.updateElemSize(!1)},m.prototype.getRow=function(e,t){t=t||this.cells;var i=[];for(var n in t)t[n].row===e&&i.push(t[n]);return i},m.prototype.getCol=function(e,t){t=t||this.cells;var i=[];for(var n in t)t[n].col===e&&i.push(t[n]);return i},m.prototype.refreshCellsPosition=function(){var t=this;this.tableBody.children("tr").each((function(i){e(this).children("td").each((function(n){var o="#"+e(this).attr("data-id");o in t.cells&&(t.cells[o],t.cells[o].row=i,t.cells[o].col=n)}))}))},m.prototype.insertRow=function(t){var i=this.getFirstSelectedCell(!t);if(!i){var n=Object.keys(this.cells).length;n&&(i=this.cells[Object.keys(this.cells)[t?0:n-1]])}if(i){for(var o=e("<tr></tr>"),s=0;s<this.cols;s++){var r=new m.TableCell;r.row=-1,r.col=s,r.table=this,r.setSize(this.getCell(i.row,s).width),this.cells["#"+r.id]=r,o.append(r.elem)}t?i.elem.parent().before(o):i.elem.parent().after(o),this.rows++,this.refreshCellsPosition(),this.updateElemSize(),this.updateStyle()}},m.prototype.insertColumn=function(e){var t=this.getFirstSelectedCell(!e);if(!t){var i=Object.keys(this.cells).length;i&&(t=this.cells[Object.keys(this.cells)[e?0:i-1]])}if(t){for(var n=0;n<this.rows;n++){var o=this.getCell(n,t.col),s=new m.TableCell;s.row=n,s.col=-1,s.table=this,this.cells["#"+s.id]=s,e?o.elem.before(s.elem):o.elem.after(s.elem)}this.cols++,this.refreshCellsPosition(),this.updateElemSize(),this.updateStyle()}},m.prototype.removeRows=function(){var e={};for(var t in this.selectedCells){var i=this.selectedCells[t];e[i.row]||(this._removeRow(i.row),e[i.row]=!0,this.rows--)}this.refreshCellsPosition(),this.updateElemSize()},m.prototype._removeRow=function(e){var t=null;for(var i in this.cells){var n=this.cells[i];n.row===e&&(t||(t=n.elem.parent()),n.remove())}t&&(t.detach(),t=null)},m.prototype.removeColumns=function(){var e={};for(var t in this.selectedCells){var i=this.selectedCells[t];e[i.col]||(this._removeColumn(i.col),e[i.col]=!0,this.cols--)}this.refreshCellsPosition(),this.updateElemSize()},m.prototype._removeColumn=function(e){for(var t in this.cells){var i=this.cells[t];i.col===e&&i.remove()}},m.prototype.mergeCells=function(){},m.prototype.splitCells=function(){},m.prototype.editCell=function(){var e=null;for(var t in this.selectedCells){e=this.selectedCells[t];break}e&&(e.elem.removeClass("ui-selected"),delete this.selectedCells["#"+e.id],this.menu.hide(),m.editor.showEditor(e))},m.prototype.clearCells=function(){for(var e in this.selectedCells)this.selectedCells[e].setText("&nbsp;"),delete this.selectedCells[e];this.updateElemSize()},m.prototype.getHorizBorderWeight=function(){var e=0;return this.border&&("object"!=typeof this.border.weight?e=this.border.weight:"length"in this.border.weight&&(e=Math.max(this.border.weight[1],this.border.weight[3]))),e},m.prototype.initContextMenu=function(){if(n.Element.prototype.initContextMenu.call(this),this.menu){var e=this,t=this.contextMenuFirstIndex,i=new o.ContextMenu(this.id+"_insert_sub");i.addItem("insertRowAbove",__("Row above"),(function(){e.insertRow(!0)})),i.addItem("insertRowBelow",__("Row below"),(function(){e.insertRow()})),i.addSeparator(),i.addItem("insertColumnLeft",__("Column to the left"),(function(){e.insertColumn(!0)})),i.addItem("insertColumnRight",__("Column to the right"),(function(){e.insertColumn()})),this.menu.insertItemAt(t++,"insert",__("Insert"),i,null,null,null,"glyphicon glyphicon-plus"),(i=new o.ContextMenu(this.id+"_remove_sub")).addItem("removeRows",__("Row(s)"),(function(){e.removeRows()})),i.addItem("removeColumns",__("Column(s)"),(function(){e.removeColumns()})),this.menu.insertItemAt(t++,"remove2",__("Remove"),i,null,null,null,"glyphicon glyphicon-remove"),this.submenu_remove=i,this.menu.insertItemAt(t++,"editCellText",__("Edit cell text"),(function(){e.editCell()}),null,null,null,"glyphicon glyphicon-pencil"),this.menu.insertItemAt(t++,"clearCells",__("Clear cell(s)"),(function(){e.clearCells()}),null,null,null,"glyphicon glyphicon-erase"),this.menu.addSeparator(t++)}},m.prototype.updateContextMenu=function(e){n.Element.prototype.updateContextMenu.call(this,e);var t=Object.keys(this.selectedCells).length;this.menu.setDisabled("mergeCells",1===t),this.menu.setDisabled("editCellText",t>1),this.submenu_remove.setDisabled("removeRows",1===this.rows),this.submenu_remove.setDisabled("removeColumns",1===this.cols)},m.prototype.onSwitchLanguage=function(e){for(var t in n.Element.prototype.onSwitchLanguage.call(this,e),this.cells)this.cells[t].setText()},m.prototype.comProperties=function(){var e=this,t=n.Element.prototype.comProperties.call(this,{tabs:[{children:[{type:"HorizontalLayout",css:{marginTop:15},columnWeights:[4,4,4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Background color")},{type:d,id:"bgColor",big:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:u,id:"border"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Cell padding")},{type:h,id:"padding",min:0}]}]}]}],callbackFunc:function(t){e.border=t.border.getValue(),e.padding=t.padding.getValue(),e.bgColor=t.bgColor.getValue(),e.setSize(t.sizeW.getValue(),t.sizeH.getValue(),!0),e.updateElemSize()}});t.border.setValue(e.border),t.padding.setValue(e.padding),t.bgColor.setValue(e.bgColor)},m.prototype.switchMode=function(e,t,i,o){var s=this;if(n.Element.prototype.switchMode.call(this,e,t,i,o),t){for(var r in this.cells)this.cells[r].switchMode(e,t,i);this.__noResize__=!0,setTimeout((function(){s.updateElemSize(i)}),1)}},m.prototype.registerProperties=function(){n.Element.prototype.registerProperties.call(this),this.registerProperty({name:"padding",type:l.PropertyType.TableCellPadding}),this.registerProperty({name:"bgColor",type:l.PropertyType.TableBackgroundColor}),this.registerProperty({name:"border",type:l.PropertyType.TableBorder})},c=function(e){this.__construct(e)},m.TableCell=c,c.defaultWidth=160,c.defaultHeight=30,c.idReg={},c.prototype.id=null,c.prototype.textId=null,c.prototype.elem=null,c.prototype.container=null,c.prototype.table=null,c.prototype.row=0,c.prototype.col=0,c.prototype.colspan=1,c.prototype.rowspan=1,c.prototype.width=0,c.prototype.text='<p class="wb-stl-normal" style="text-align: center;">'+__("Enter your text here")+"</p>",c.prototype.__construct=function(t){null==t&&(t={}),this.id=t.id&&!("#"+t.id in c.idReg)?t.id:this.getFreeId(),this.textId="wb_celltext_"+this.id,c.idReg["#"+this.id]=!0,this.row=t.row?1*t.row:this.row,this.col=t.col?1*t.col:this.col,this.width=t.width?1*t.width:0,(!this.width||this.width<=0)&&(this.width=c.defaultWidth),this.text=void 0!==t.text?t.text:this.text,this.elem=e("<td>").append("<div>"),this.elem.attr("data-id",this.id),this.container=this.elem.children("div"),this.container.attr("id",this.textId),this.setSize(this.width),this.setText(this.text),this.setColspan(t.colspan?1*t.colspan:this.colspan),this.setRowspan(t.rowspan?1*t.rowspan:this.rowspan)},c.prototype.setText=function(e){this.text=void 0===e?this.text:e,this.container.html(__tr(this.text,null,"&nbsp;",!0))},c.prototype.serialize=function(){return{id:this.id,row:this.row,col:this.col,width:this.width,height:this.height,colspan:this.colspan,rowspan:this.rowspan,text:this.text}},c.prototype.remove=function(){this.elem.detach(),this.elem=null,this.table.cells["#"+this.id]=null,delete this.table.cells["#"+this.id]},c.prototype.setColspan=function(e){this.colspan=parseInt(e),this.elem.attr("colspan",this.colspan&&this.colspan>1?this.colspan:"")},c.prototype.setRowspan=function(e){this.rowspan=parseInt(e),this.elem.attr("rowspan",this.rowspan&&this.rowspan>1?this.rowspan:"")},c.prototype.setSize=function(e,t,i){var n={};void 0!==e&&(e*=1,(e=Math.max(e,0))&&(this.width=e),n.width=this.width+"%"),this.elem.css(n)},c.prototype.getFreeId=function(){for(var e=1;e<5e4;e++)if(!c.idReg["#"+e])return e},c.prototype.switchMode=function(e,t,i){},m}.apply(t,n))||(e.exports=o)},"./WB_TextArea.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./lib/ckeditor/ckeditor.js"),i("./ElementRegister.ts"),i("./Element.ts"),i("./WB_Dialog.class.js"),i("./Service.ts"),i("./element/Controls.ts"),i("./CommonTypes.ts"),i("./element/PropertyType.ts"),i("./BuilderEvent.ts"),i("./util/TextUtil.ts")],void 0===(o=function(e,t,n,o,s,r,a,l,c,u,d){"use strict";var h=i("./core/BuilderConfig.ts").wbConfig,p=function(e){this.__construct(e)};return __extends(p,o.Element),n.registerClass("TextArea",p),p.rtl=!1,p.mousedowned=!1,p.allowHideEditors=!1,p.areaActive=null,p.editorDefaultText='<p class="wb-stl-normal">'+__("Enter your text here")+"</p>",p.editorInitialized=!1,p.tinyEditor=!1,p.textAreaElements=[],p.editorInit=function(){p.editorInitialized||(p.editorInitialized=!0,(p.tinyEditor=!!wb_builder.isTouchDevice&&!wb_builder.forceFullTextEditorForTouchDevices)||e((function(){wb_builder.body.on("click",(function(t){!p.mousedowned||e.browser.mozilla?(s.hideEditors=!0,p.hideEditors()):p.mousedowned=!1}))})))},p.hideEditors=function(e){for(var t=0;t<p.textAreaElements.length;t++){var i=p.textAreaElements[t];for(var n in i.editorTimeoutHandles)i.editorTimeoutHandles[n]&&clearTimeout(i.editorTimeoutHandles[n]),i.editorTimeoutHandles[n]=null}p.editorActive&&p.editorActive.hideEditor(e)},p.editorActive=null,p.execCommandCallback=function(t,i,n,o,s){if("ForeColor"===n){var r=e(i);if(r.is("a"))return p.rgb2hex(r.css("color"))!==s.toLowerCase()?r.css("color",s):r.css("color",""),!0;if(r.parent().is("a"))return p.rgb2hex(r.parent().css("color"))!==s.toLowerCase()?r.parent().css("color",s):r.parent().css("color",""),!0}return!1},p.rgb2hex=function(e){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(!t)return e;function i(e){return("0"+parseInt(e).toString(16)).slice(-2)}return("#"+i(t[1])+i(t[2])+i(t[3])).toLowerCase()},p.getActiveTextArea=function(){for(var e,t=wb_builder.bodyInstance.getContentElements(),i=0;e=t[i];i++)if(e instanceof p&&e.editor)return e},p.prototype.cover=!1,p.prototype.editor=null,p.prototype.editorAttached=!1,p.prototype.lastContent="",p.prototype.textId="",p.prototype.editorId="",p.prototype.toolbarWidth=350,p.prototype.toolbarHeight=29,p.prototype.editor=null,p.prototype.editorToolbar=null,p.prototype.editorVisible=!1,p.prototype.editorChosenLanguage=null,p.prototype.textDiv=null,p.prototype.textDivValue=null,p.prototype.textArea=null,p.prototype.toolbarMover=null,p.prototype.cssRuleIndexes=null,p.prototype.wflRefreshCounter=120,p.prototype.wflInitialSize=0,p.prototype.wasMoveRelativeHandleEnabled=!1,p.prototype.editorTimeoutHandles=null,p.prototype.__construct=function(i){o.Element.call(this,i),this.elem.addClass("wb_text_element"),this.addLangLabel(),this.cssRuleIndexes={a:-1,b:-1,c:-1},this.editorTimeoutHandles={},t.CKEDITOR.timestamp=Math.random(),p.editorInit(),p.textAreaElements.push(this);var n=this;this.textId=this.id+"_text",this.editorId=this.id+"_editor",p.rtl="ar_AE"===h.locale||"he_IL"===h.locale||"fa_IR"===h.locale,this.textDiv=e('<div id="'+this.textId+'"'+(p.rtl?' class="rtl"':"")+"></div>"),this.textDiv.css({"word-wrap":"break-word",padding:"0.1px 0"}),this.textDiv.on("mousedown",(function(){p.mousedowned=!0})),this.textDiv.on("mouseup",(function(){e.browser.msie||(p.mousedowned=!1)})),this.container.append(this.textDiv),this.container.css("line-height","normal"),e(this.container).bind("resize",(function(){e(n.textDiv).css("width",e(n.container).width())})),this.controls.elem.tooltip({trigger:"manual",placement:"top",html:!0,title:__("This element can be edited only in Desktop mode")}),this.isEditableStrict&&this.controls.onDblClick((function(e){n.debug&&console.log("DoubleClick"),n.showEditor(e.pageX,e.pageY)})),i&&i.content&&null!==i.content.text&&void 0!==i.content.text?this.textDivValue=i.content.text:this.textDivValue=p.editorDefaultText,i.content.__noInitCleanupWbTrOk||this.cleanupWbTrOk(),this.setHtml(__tr(this.textDivValue,null,p.editorDefaultText,!0)),this.opacity="opacity"in i.content?i.content.opacity:this.opacity,this.elem.bind("resize",(function(){n.wflRefreshCounter=0,n.onResize()})),this.setSize(null,"auto"),this.onUpdateLanguages(),this.wflInitialSize=this.height,this.waitFontLoaded()},p.prototype.switchMode=function(e,t,i,n){o.Element.prototype.switchMode.call(this,e,t,i,n);var s=this;setTimeout((function(){if("number"==typeof s.height){var e=s.calcTextHeight();s.maxHeight<=s.height&&(s.maxHeight=e),s.setSize(null,e),s.elem.trigger("elementresize",[this])}}),400)},p.prototype.getDataDefaults=function(){return e.extend(o.Element.prototype.getDataDefaults.call(this),{minWidth:24,minHeight:24})},p.prototype.getDefaultResizeMode=function(){return a.ControlsResizeMode.HORIZONTAL},p.prototype.getName=function(e){if(this.name&&!e)return this.name;var t=e?200:20,i=__tr(this.textDivValue,null,p.editorDefaultText,!0);return i&&(i=i.replace(/<[^>]+>/g," ").replace("&nbsp;"," ").replace(/ +/g," ")).length>t&&(i=i.substring(0,t)+"..."),i||o.Element.prototype.getName.call(this,e)},p.prototype.getIcon=function(){return"fa fa-font"},p.prototype.supportsAutoWidth=function(){return!0},p.prototype.supportsAutoHeight=function(){return!0},p.prototype.show=function(e,t){o.Element.prototype.show.call(this,e,t),e&&t&&this.onResize()},p.prototype.onBeforeRemove=function(e){this.isEditableStrict||e.batch?o.Element.prototype.onBeforeRemove.call(this,e):e.preventRemoval=!0},p.prototype.releaseResources=function(e){var t=p.textAreaElements.indexOf(this);t>=0&&p.textAreaElements.splice(t,1),o.Element.prototype.releaseResources.call(this,e)},p.prototype.cleanupWbTrOk=function(t,i){if(i){var n=e("<div>").html(i);n.find(".wb_tr_ok").contents().unwrap();var o=n.html();return n=null,o}if("object"==typeof this.textDivValue)for(var s in this.textDivValue)this.textDivValue[s]&&(this.textDivValue[s]=this.cleanupWbTrOk(!1,this.textDivValue[s]));else this.textDivValue&&(this.textDivValue=this.cleanupWbTrOk(!1,this.textDivValue));t&&this.setHtml(__tr(this.textDivValue,null,null,!0))},p.prototype.waitFontLoaded=function(){--this.wflRefreshCounter<0||this.editorVisible||(wb_builder.previewToolbar.isOpen||this.onResize(!0),this.wflRefreshCounter>0&&this.height===this.wflInitialSize&&setTimeout(this.waitFontLoaded.bind(this),250))},p.scanTextForStyleUsage=function(e){if(!e)return[];var t=function(e){for(var t=[],i=0;i<wb_builder.site.styles.length;i++){var n=wb_builder.site.styles[i].selector,o=n.replace(/^\./,"");e.indexOf(o)>=0&&t.push(n)}return t},i=[];if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(i=i.concat(t(e[n])));else i=i.concat(t(e));return i},p.prototype.getUsedSiteStyles=function(){var e=o.Element.prototype.getUsedSiteStyles.call(this);return e.concat(p.scanTextForStyleUsage(this.textDivValue))},p.prototype.serialize=function(){var e,t=function(e){return e?e.replace(/<(\/*(?:script|iframe|object|embed|audio|video|source|canvas)[^>]*\/*)>/g,"&lt;$1&gt;"):e};if("object"==typeof this.textDivValue)for(var i in e={},this.textDivValue)e[i]=t(this.textDivValue[i]);else e=t(this.textDivValue);var n=o.Element.prototype.serialize.call(this);return n.content={text:e,opacity:this.opacity,rtl:p.rtl},n},p.prototype.setHtml=function(t){t=(t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*(?:<\/script>|$)/gi,"")).replace(/[\r\t]/g,""),e.browser.msie&&(t=t.replace(/(<p[^>]*>)(?:&shy;|&shy;&shy;|&shy;&shy;&shy;)(<\/p>)/gi,"$1&nbsp;$2")),t=wb_builder.site.reloadTextTags(t),this.textDiv.html()!==t&&this.textDiv.html(t)},p.prototype.getHtml=function(){return this.textDiv.html()},p.prototype.onClick=function(e){this.editorVisible||o.Element.prototype.onClick.call(this,e)},p.prototype.setParent=function(e,t){o.Element.prototype.setParent.call(this,e,t)},p.prototype.selectAll=function(){if(this.editor){this.editor.focus();var e=this.editor.createRange();if(e){e.selectNodeContents(e.root),e.select(),this.editor.getSelection().selectRanges([e]);var t=this;setTimeout((function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-edit-select",t)}),10)}}},p.prototype.insertText=function(e,t){this.editor&&(this.editor.focus(),t?this.editor.insertHtml(e):this.editor.insertText(e),r.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-text",this))},p.prototype.execCommand=function(e){if(this.editor)return this.editor.focus(),!!e&&this.editor.execCommand(e)},p.prototype.getToolbarElem=function(t){if(this.editor){var i=e("#cke_"+this.textId);return t?i.find(".cke_button__"+t):i}},p.prototype.showEditor=function(i,n){var a=this;if(!this.isElementPreview){if(this.isLocked)return this.moveBtn.elem.tooltip("show"),void setTimeout((function(){a.moveBtn.elem.tooltip("hide")}),2e3);if(r.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-start",this),this.debug&&console.log("ShowEditor"),this.wasMoveRelativeHandleEnabled=this.moveRelativeHandle.isEnabled(),this.wasMoveRelativeHandleEnabled&&this.moveRelativeHandle.setEnabled(!1),!this.editor){p.hideEditors(),this.menu&&this.menu.hide();var l=t.CKEDITOR.stylesSet.get("wb_site_styles");l||(l=t.CKEDITOR.stylesSet.add("wb_site_styles",[])),l.splice(0,l.length);for(var c=0;c<this.system.site.styles.length;c++){var d=this.system.site.styles[c],h=/^\.([^\ ]+)(?:\ |$)/i.exec(d.selector);h&&l.push({name:d.name,element:d.tag?d.tag:"span",attributes:{class:h[1]}})}this.textDiv.addClass("outline1"),p.tinyEditor||this.textDiv.attr("contenteditable","true"),this.controls.setButtonsCompact(!0),this.setDraggingEnabled(!1),this.setControlsEnabled(!1),o.Element.hotKeysDisabled=!0;var m={title:"",stylesSet:"wb_site_styles",on:{selectionChange:function(e){e.data.selection&&e.data.selection.getSelectedText()&&r.Service.HelpSystemPlayer.notify("item-plugin-"+a.getClassType()+"-edit-select",a)},afterCommandExec:function(e){r.Service.HelpSystemPlayer.notify("item-plugin-"+a.getClassType()+"-edit-cmd-"+e.data.name,a)}}};if(this.textDiv.css("z-index",11).focus(),p.tinyEditor){if(document.removeEventListener("touchstart",wb_builder.touchHandler,!0),document.removeEventListener("touchmove",wb_builder.touchHandler,!0),document.removeEventListener("touchend",wb_builder.touchHandler,!0),document.removeEventListener("touchcancel",wb_builder.touchHandler,!0),e(".wb-scroll-bar").hide(),!p.maxCont){var g=(p.maxCont=e('<div id="WB_TextArea_maxCont"><div class="inner3" contenteditable="true"></div></div>')).find(".inner3");p.maxCont.css({border:0,left:0,top:0,width:"100%",height:e(window).height(),overflow:"auto",position:"fixed",background:"#ffffff",paddingBottom:30,zIndex:1001}),p.maxCont.on("keydown",(function(e){13===e.keyCode&&setTimeout((function(){document.execCommand("formatBlock",!1,"p")}),10)})),e(window).on("resize",(function(){p.maxCont.css({height:e(window).height()})})),g.on("paste",(function(t){t.stopPropagation(),t.preventDefault();var i=t.originalEvent.clipboardData||window.clipboardData;if(i&&i.getData){var n=i.getData("Text");n=n.replace(/\n/gi,"<br />"),e(this).html(n)}})),g.css({margin:"60px 10px 10px"});var f=e('<div class="form-actions input-block-level"><span class="wb-ed-small-msg">'+__("Full featured text editor is currently not available on touch devices")+'</span><button class="btn btn-success pull-right">'+__("Apply")+'</button><button class="btn btn-default pull-right">'+__("Close")+"</button></div>"),y=f.find(".btn-success"),b=f.find(".btn-default").css({marginRight:5});f.css({top:0,right:0,marginTop:0,padding:10,borderBottom:"1px solid #E5E5E5",position:"absolute",zIndex:9001}),e(p.maxCont).append(f),e(document.body).append(p.maxCont),y.on("click",(function(){p.hideEditors()})),b.on("click",(function(){p.hideEditors(!0)})),p.maxCont.on("click",(function(){p.maxCont.find(".inner3").focus()})),p.maxCont.click()}var v=a.getContentColor(!0);p.maxCont.css({background:v||"#ffffff"});var _=p.maxCont.find(".inner3");_.html(this.textDiv.html()),e(document.body).append(p.maxCont);var C=p.maxCont.children(".form-actions").eq(0).outerHeight(!0);_.css({marginTop:C+"px"}),this.editor=!0}else{if(e.browser.msie){var w=this.textDiv.html();w=w.replace(/(<p[^>]*>)&nbsp;(<\/p>)/gi,"$1­$2"),this.textDiv.html(w)}this.editor=t.CKEDITOR.inline(this.textId,m);for(var T=1e3;T<=2e3;T+=1e3)setTimeout((function(){e("#cke_"+a.textId).css({"z-index":20})}),T)}p.tinyEditor||(this.textDiv.on("click mousedown touchstart mouseup touchend",(function(e){e.stopPropagation()})),e.browser.chrome&&(this.textDiv.blur(),setTimeout((function(){a.textDiv.focus()}),100))),this._onStylesComboboxCreate(),this.lastContent=this.textDiv.html(),this.editorVisible=!0,p.editorActive=this,s.hideEditors=!1,"object"==typeof this.editor&&(this.editor.wbTextAreaInstance=this),u.GlobalEvents.triggerEvent("inplaceeditor.state.changed",new u.InPlaceEditorStateChangedEvent(!0))}}},p.prototype._onStylesComboboxCreate=function(){var i=this;this._stylesComboboxIntervalId=setInterval((function(){var n;(n=e("#cke_"+i.textId+" .cke_combopanel:not(.dropdown_languages)")).length&&(clearInterval(i._stylesComboboxIntervalId),function(e){var i=e.children("iframe")[0].contentDocument,n=i.createElement("script");n.type="text/javascript",n.src=t.CKEDITOR.basePath+"stylescombo.js?ts="+(new Date).getTime(),i.getElementsByTagName("head")[0].appendChild(n)}(n))}),100)},p.prototype.hideEditor=function(t){if(r.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-end",this),this.editor){!0!==this.editor&&(this.editor.focus(),this.editor.destroy()),this.editor=null,p.mousedowned=!1,this.wasMoveRelativeHandleEnabled&&this.moveRelativeHandle.setEnabled(!0),p.tinyEditor?p.maxCont&&(t||this.setHtml(p.maxCont.find(".inner3").html()),p.maxCont.find(".inner3").empty(),p.maxCont.remove(),p.maxCont=null,document.addEventListener("touchstart",wb_builder.touchHandler,!0),document.addEventListener("touchmove",wb_builder.touchHandler,!0),document.addEventListener("touchend",wb_builder.touchHandler,!0),document.addEventListener("touchcancel",wb_builder.touchHandler,!0),e(".wb-scroll-bar").show()):(this.textDiv.removeAttr("contenteditable"),t||this.setHtml(this.textDiv.html())),this.textDiv.off("click").removeClass("outline1").css("z-index",""),this.setDraggingEnabled(!0),this.setControlsEnabled(!0),this.updateContentSize(),o.Element.hotKeysDisabled=!1;var i=this.textDiv.html(),n=!1,s="function"==typeof"".trimEnd;if(s&&this.lastContent.trimEnd()!==i.trimEnd()||!s&&this.lastContent!==i){this.system.setPageModified(!0),n=!0;var a=function(e){var t=window.getElementById(e.element);if(t){var i=t.textDivValue;t.textDivValue=e.value,e.value=i,t.updateText()}else console.error("Unable to undo 'textAreaTextChange': can't find element "+e.element)};let e="object"==typeof this.textDivValue?Object.assign({},this.textDivValue):this.textDivValue;wb_builder.historyAdd("textAreaTextChange",{element:this.id,value:e},a,a)}this.lastContent="",this.editorVisible=!1,p.editorActive=null,this.setValue(i,this.editorChosenLanguage),this.updateText(),clearInterval(this._stylesComboboxIntervalId),u.GlobalEvents.triggerEvent("inplaceeditor.state.changed",new u.InPlaceEditorStateChangedEvent(!1)),n&&u.GlobalEvents.triggerEvent("site.structure.changed",new u.SiteStructureChangedBuilderEvent)}},p.prototype.updateText=function(){this.onSwitchLanguage(this.system.site.currSelLang,!0),this.onResize();var e=this.getParent();e&&(e instanceof o.Element?e.updateStyle():e.updateSize(),this.onResize())},p.prototype.getContentColor=function(e,t,i,n){if(t||(t=this.container.get(0)),3===t.nodeType&&i)return i;n||(n=0);for(var o=n;o>0;)o--;var s,r=t.nodeType<3&&"getComputedStyle"in window?window.getComputedStyle(t):null,a=null,l=r?r.color:null;if(l&&(s=l.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i))?a={r:parseInt(s[1]),g:parseInt(s[2]),b:parseInt(s[3])}:l&&(4===l.length||7===l.length)&&(s=l.match(/^#([0-f]+)$/i))&&(a=3===s[0].length?{r:parseInt(s[0].substring(0,1),16),g:parseInt(s[0].substring(1,2),16),b:parseInt(s[0].substring(2,3),16)}:{r:parseInt(s[0].substring(0,2),16),g:parseInt(s[0].substring(2,4),16),b:parseInt(s[0].substring(4,6),16)}),a&&e){var c=(299*a.r+587*a.g+114*a.b)/1e3;a.r=a.g=a.b=255-c>c?255:0}l=a?"#"+("0"+parseInt(a.r).toString(16)).slice(-2)+("0"+parseInt(a.g).toString(16)).slice(-2)+("0"+parseInt(a.b).toString(16)).slice(-2):null;for(var u=0;u<t.childNodes.length;u++){var d=this.getContentColor(e,t.childNodes[u],l,n+1);if(d)return d}return null},p.prototype.setValue=function(e,t){var i;if(!t&&this.system.site.currSelLang&&(t=this.system.site.currSelLang),!t&&this.system.site.getLastDefLang()&&(t=this.system.site.getLastDefLang()),t){"object"==typeof this.textDivValue&&this.textDivValue?i=this.textDivValue:(i={},"string"==typeof this.textDivValue&&this.system.site.getLastDefLang()&&(i[this.system.site.getLastDefLang()]=this.textDivValue));var n=!0;t in i&&d.stripTags(i[t])||__tr(this.textDivValue,"__DEFAULT__")!==e.trim()||(n=!1),n&&(i[t]=e)}else i=e;this.textDivValue=i},p.prototype.fitToWindow=function(t,i){var n=e(window).width(),o=t;return o+i>n&&(o=t-(o+i-n+10)),o},p.prototype.onResize=function(e){if(e||this.system.setPageModified(!0),"number"==typeof this.height){var t=this.calcTextHeight();this.maxHeight<=this.height&&(this.maxHeight=t),this.setSize(null,t),this.elem.trigger("elementresize",[this])}},p.prototype.calcTextHeight=function(){var e=this.textDiv.outerHeight(!1);return e<10&&!this.parent&&this.height>10&&(e=this.height),e<10&&(e=10),e},p.prototype.updateContentSize=function(e){e&&e.size?(e.size.height=this.calcTextHeight(),this.updateCtrlBtnsPos&&this.updateCtrlBtnsPos(e.size.width,e.size.height)):this.updateCtrlBtnsPos&&this.updateCtrlBtnsPos(this.getWidthInPixels(),this.getHeightInPixels())},p.prototype.onStopResize=function(e){o.Element.prototype.onStopResize.call(this,e);var t=this.getParent();t&&t.updateSize()},p.prototype._opacity=100,Object.defineProperty(p.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity=Math.max(0,Math.min(100,parseInt(e))),this.textDiv&&this.textDiv.css("opacity",this._opacity/100)},enumerable:!0,configurable:!0}),p.prototype.comProperties=function(){var e=this;o.Element.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Opacity (%)")},{type:"SliderControl",id:"opacity",width:120}]}]}],callbackFunc:function(t){e.opacity=t.opacity.getValue(),e.updateStyle()}}).opacity.setValue(this.opacity)},p.prototype.updateStyle=function(e,t){o.Element.prototype.updateStyle.call(this,e,t),this.parent&&this.parent.getChildrenLayout(),this.textDiv.css({position:"relative"})},p.prototype.initContextMenu=function(){var e=this;if(o.Element.prototype.initContextMenu.call(this),this.menu){var t=this.contextMenuFirstIndex;this.menu.insertItemAt(t++,"editText",__("Edit text"),(function(){var t=e.menu.menu.offset();e.showEditor(t.left,t.top)}),null,null,null,"glyphicon glyphicon-pencil"),this.menu.addSeparator(t++)}},p.prototype.onReloadTextTags=function(){this.setHtml(this.getHtml())},p.prototype.onSwitchLanguage=function(e,t){t||(o.Element.prototype.onSwitchLanguage.call(this,e),this.hideEditor()),this.setHtml(__tr(this.textDivValue,e,null,!0)),this.onResize(!0)},p.prototype.registerProperties=function(){o.Element.prototype.registerProperties.call(this),this.registerProperty({name:"opacity",type:c.PropertyType.ElementOpacity})},r.Service.textArea={hideEditors:function(){p.hideEditors()},isMousedowned:function(){return p.mousedowned},resetMousedowned:function(){e.browser.msie||(p.mousedowned=!1)},getActiveEditor:function(){return p.editorActive}},p}.apply(t,n))||(e.exports=o)},"./WB_ToolTipControl.class.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e){"use strict";var t=function(e,t,i){this.__construct(e,t,i)};return t.prototype.elem=null,t.prototype.__construct=function(t,i,n){this.elem=e('<span class="badge wb_badge_help">?</span>');var o="tooltip"+Math.round(1e8*Math.random());this.setLabel(t),this.elem.removeAttr("title"),this.elem.css({marginLeft:"6px",cursor:"default"});var s,r=this,a=!1,l=!1,c=null,u=!1;this.elem.on("mouseover focus",(function(){a||(a=!0,setTimeout((function(){s&&s.length||(s=e("."+o)),s.on("mouseover",(function(){u=!0})),s.on("mouseout",(function(){u=!1,a||(c&&clearTimeout(c),c=setTimeout((function(){a||u||r.elem.tooltip("hide")}),100))}))}),0),r.elem.tooltip("show"))})).on("mouseout blur",(function(){a&&(a=!1,c&&clearTimeout(c),c=setTimeout((function(){a||u||r.elem.tooltip("hide")}),100))})).on("shown.bs.tooltip",(function(){l||(l=!0,e(this).parent().children(".tooltip").eq(0).on("mouseout",(function(){a&&(a=!1,c&&clearTimeout(c),c=setTimeout((function(){a||u||r.elem.tooltip("hide")}),100))})).on("mouseover",(function(){a=!0})))})),wb_builder.rtl&&("left"===n?n="right":"right"===n&&(n="left")),this.elem.tooltip({container:"body",trigger:"manual",template:'<div class="tooltip '+o+'" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',html:!0,title:i,placement:n||"top"})},t.prototype.remove=function(){this.elem.tooltip("destroy"),this.elem.remove()},t.prototype.setLabel=function(e){"warn"==e?(this.elem.addClass("wb-badge-warn fa fa-exclamation-triangle").removeClass("fa-times-circle"),this.elem.html("")):"error"==e?(this.elem.addClass("wb-badge-error fa fa-times-circle").removeClass("fa-exclamation-triangle"),this.elem.html("")):"?"==e?(this.elem.addClass("wb-badge-info fa fa-question-circle"),this.elem.html("")):(this.elem.removeClass("wb-badge-warn wb-badge-error fa fa-exclamation-triangle fa-times-circle"),this.elem.html(e))},t.prototype.setTitle=function(e,t){this.elem.attr("data-original-title",e),this.elem.tooltip({html:t})},t.prototype.setPlacement=function(e){this.elem.tooltip({placement:e})},t}.apply(t,n))||(e.exports=o)},"./WB_Twitter.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./element/PropertyType.ts"),i("./util/ComparisonUtil.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,n,o,s,r){"use strict";var a=i("./ColorPicker.ts").ColorPicker,l=i("./SizeSelector.ts").SizeSelector,c=function(e){e&&this.__construct(e)};return __extends(c,t.Element),e.registerClass("Twitter",c),c.scriptLoaded=!1,c.defaultId="",c.prototype.noPhotoBg="ico-tb-twitter",c.prototype.widget=null,c.prototype.updateRetries=10,c.prototype.renderedWidgetData=null,c.prototype.loadDeferred=null,c.prototype._params=null,Object.defineProperty(c.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"widgetId",{get:function(){return this._params.id},set:function(e){this._params.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"numTweets",{get:function(){return this._params.numTweets},set:function(e){this._params.numTweets=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"theme",{get:function(){return this._params.theme},set:function(e){this._params.theme=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"noHeader",{get:function(){return this._params.noHeader},set:function(e){this._params.noHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"noFooter",{get:function(){return this._params.noFooter},set:function(e){this._params.noFooter=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"noBorders",{get:function(){return this._params.noBorders},set:function(e){this._params.noBorders=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"noScrollbar",{get:function(){return this._params.noScrollbar},set:function(e){this._params.noScrollbar=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"transparent",{get:function(){return this._params.transparent},set:function(e){this._params.transparent=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"borderColor",{get:function(){return this._params.colors.border},set:function(e){this._params.colors.border=e},enumerable:!0,configurable:!0}),c.prototype.__construct=function(e){e.width||(e.width=230,e.height=530),t.Element.call(this,e),this.loadDeferred=r.Deferred(),this.displayEmptyMessage(!1),this.container.css({overflow:"hidden"});var i=this;c.scriptLoaded||(c.scriptLoaded=!0,window.twttr=function(e,t,i){var n,o,s=e.getElementsByTagName(t)[0];if(!e.getElementById(i))return(o=e.createElement(t)).id=i,o.src="https://platform.twitter.com/widgets.js",s.parentNode.insertBefore(o,s),window.twttr||(n={_e:[],ready:function(e){n._e.push(e)}})}(document,"script","twitter-wjs"));var n=e.content.colors&&"object"==typeof e.content.colors?e.content.colors:{};this._params={id:e.content.id?e.content.id:"",numTweets:1*e.content.numTweets?1*e.content.numTweets:3,theme:e.content.theme?e.content.theme:"light",noHeader:!!e.content.noHeader,noFooter:!!e.content.noFooter,noBorders:!!e.content.noBorders,noScrollbar:!!e.content.noScrollbar,transparent:!!e.content.transparent,colors:{border:n.border?n.border:""}},setTimeout((function(){i.updateStyle(!0)}),500)},c.prototype.getDataDefaults=function(){return r.extend(t.Element.prototype.getDataDefaults.call(this),{minWidth:150,minHeight:100})},c.prototype.onLoaded=function(){return this.loadDeferred},c.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={id:this.params.id,numTweets:this.params.numTweets,theme:this.params.theme,noHeader:this.params.noHeader,noFooter:this.params.noFooter,noBorders:this.params.noBorders,noScrollbar:this.params.noScrollbar,transparent:this.params.transparent,colors:{border:this.params.colors.border}},e},c.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this.params;"object"!=typeof n&&(n={}),n.id=n.id?n.id:"",n.theme=n.theme?n.theme:"light",n.noHeader=!!n.noHeader,n.noFooter=!!n.noFooter,n.noBorders=!!n.noBorders,n.noScrollbar=!!n.noScrollbar,n.transparent=!!n.transparent,"object"!=typeof n.colors&&(n.colors={}),n.colors.border=n.colors.border?n.colors.border:"",this.params=n,n.noScrollbar?this.container.css("overflow-y","hidden"):this.container.css("overflow-y","auto");var o=this;if(window.twttr&&window.twttr.widgets){var s="";n.noHeader&&(s+=" noheader"),n.noFooter&&(s+=" nofooter"),n.noBorders&&(s+=" noborders"),n.noScrollbar&&(s+=" noscrollbar"),n.transparent&&(s+=" transparent"),s=r.trim(s);var a,l={theme:n.theme,chrome:s,width:"100%",height:this.height};n.numTweets&&(l.tweetLimit=n.numTweets),n.colors.border&&(l.borderColor=n.colors.border),a=0===n.id.indexOf("http")||""==n.id?{sourceType:"url",url:n.id?n.id:"https://twitter.com/twitter"}:{sourceType:"widget",widgetId:n.id?n.id:""};var c=JSON.stringify([a,l]);if(null===this.renderedWidgetData||this.renderedWidgetData!==c){this.renderedWidgetData=c;try{this.container.empty(),twttr.widgets.createTimeline(a,o.container.get(0),(function(e){o.loadDeferred&&o.loadDeferred.resolve()}),l)}catch(e){}}this.elem.trigger("resize"),this.elem.trigger("resizestop")}else--this.updateRetries>0&&setTimeout((function(){o.invalidate()}),500)},c.prototype.setParent=function(e,i){t.Element.prototype.setParent.call(this,e,i),this.updateStyle(i)},c.prototype.comProperties=function(){var e=this,i=t.Element.prototype.comProperties.call(this,{size:{minBodyHeight:386},tabs:[{children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Widget ID or profile URL"),helpText:__('To get Widget Id go to %s. Create new widget "Create New > Search". After create, go back to widgets list and click on it again, copy the ID from the url address OR insert in this field your profile URL').replace("%s",'<a href="https://twitter.com/settings/widgets" target="_blank"> https://twitter.com/settings/widgets</a>')},{type:"TextField",id:"tweetId",placeholder:"https://twitter.com/twitter",change:function(){i.tweetPreview.setParam("id",this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetId-change",e)}},{type:"Label",text:__("Number of Tweets"),css:{marginTop:15}},{type:l,id:"tweetNumTweets",min:0,change:function(){i.tweetPreview.setParam("numTweets",this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetNumTweets-change",e)}},{type:"Label",text:__("Theme"),css:{marginTop:15}},{type:"DropdownBox",id:"tweetTheme",options:[{name:__("Light"),id:"light"},{name:__("Dark"),id:"dark"}],change:function(){i.tweetPreview.setParam("theme",this.getSelectedItem().getId()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetTheme-change",e)}},{type:"CheckBox",label:__("Hide header"),id:"tweetNoHeader",css:{marginTop:15},change:function(){i.tweetPreview.setParam("noHeader",!!this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetNoHeader-change",e)}},{type:"CheckBox",label:__("Hide footer"),id:"tweetNoFooter",change:function(){i.tweetPreview.setParam("noFooter",!!this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetNoFooter-change",e)}},{type:"CheckBox",label:__("No borders"),id:"tweetNoBorders",change:function(){i.tweetPreview.setParam("noBorders",!!this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetNoBorders-change",e)}},{type:"CheckBox",label:__("Hide scrollbar"),id:"tweetNoScrollbar",change:function(){i.tweetPreview.setParam("noScrollbar",!!this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetNoScrollbar-change",e)}},{type:"CheckBox",label:__("Transparent background"),id:"tweetTransparent",change:function(){i.tweetPreview.setParam("transparent",!!this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetTransparent-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"tweetPreview",css:{height:342,overflow:"auto"},init:function(e){var t={},i=!1,n=this,o=function(){if(window.twttr&&window.twttr.widgets){t.id=t.id?t.id:"",t.theme=t.theme?t.theme:"light",t.noHeader=!!t.noHeader,t.noFooter=!!t.noFooter,t.noBorders=!!t.noBorders,t.noScrollbar=!!t.noScrollbar,t.transparent=!!t.transparent,"object"!=typeof t.colors&&(t.colors={}),t.colors.border=t.colors.border?t.colors.border:"",n._elem.empty();var e="";t.noHeader&&(e+=" noheader"),t.noFooter&&(e+=" nofooter"),t.noBorders&&(e+=" noborders"),t.noScrollbar&&(e+=" noscrollbar"),t.transparent&&(e+=" transparent"),e=r.trim(e);var i,o={theme:t.theme,chrome:e,width:"260",height:"300"};t.numTweets&&(o.tweetLimit=t.numTweets),t.colors.border&&(o.borderColor=t.colors.border),i=0!==t.id.indexOf("http")&&t.id?{sourceType:"widget",widgetId:t.id?t.id:""}:{sourceType:"url",url:t.id?t.id:"https://twitter.com/twitter"};try{twttr.widgets.createTimeline(i,n._elem.get(0),(function(e){}),o)}catch(e){alert(e)}}};this.setAutoUpdate=function(e){(i=!!e)&&o()},this.setParam=function(e,n){t[e]=n,i&&o()},this.getParam=function(e){return t[e]}}}]}]}]},{name:__("Colors"),type:"colors",children:[{type:"Label",text:__("Border color")},{type:a,id:"tweetColBorder",change:function(){i.tweetPreview.setParam("borderColor",this.getValue()),n.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-tweetColBorder-change",e)}}]}],callbackFunc:function(t){e.widgetId=t.tweetId.getValue(),e.numTweets=t.tweetNumTweets.getValue(),e.theme=t.tweetTheme.getValue(),e.noHeader=t.tweetNoHeader.getValue(),e.noFooter=t.tweetNoFooter.getValue(),e.noBorders=t.tweetNoBorders.getValue(),e.noScrollbar=t.tweetNoScrollbar.getValue(),e.transparent=t.tweetTransparent.getValue(),e.borderColor=t.tweetColBorder.getValue()}});i.tweetPreview.setAutoUpdate(!1),i.tweetId.setValue(this.widgetId),i.tweetNumTweets.setValue(this.numTweets),i.tweetTheme.setValue(this.theme),i.tweetNoHeader.setValue(this.noHeader),i.tweetNoFooter.setValue(this.noFooter),i.tweetNoBorders.setValue(this.noBorders),i.tweetNoScrollbar.setValue(this.noScrollbar),i.tweetTransparent.setValue(this.transparent),i.tweetColBorder.setValue(this.borderColor),i.tweetPreview.setAutoUpdate(!0)},c.prototype.getIcon=function(){return"fa fa-twitter"},c.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"params"}),this.registerProperty({name:"widgetId",type:o.PropertyType.TwitterWidgetId,dependencies:["params"],comparator:function(e,t,i){var n=s.ComparisonUtil.checkEqualsRecursive(e,t);return!n&&i&&(/[0-9]{18}/.test(e)||/https?:\/\/(www\.)?twitter\.com\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)/.test(e)||""==e?(this.displayErrorMessage(!1),i.setError("")):(this.setErrorMessage(__("Invalid ID or URL")),i.setError(__("Invalid ID or URL")))),n}}),this.registerProperty({name:"numTweets",type:o.PropertyType.TwitterMaxMessageCount,dependencies:["params"]}),this.registerProperty({name:"theme",type:o.PropertyType.TwitterColorScheme,dependencies:["params"]}),this.registerProperty({name:"noHeader",type:o.PropertyType.NoWidgetHeader,dependencies:["params"]}),this.registerProperty({name:"noFooter",type:o.PropertyType.NoWidgetFooter,dependencies:["params"]}),this.registerProperty({name:"noBorders",type:o.PropertyType.NoWidgetBorders,dependencies:["params"]}),this.registerProperty({name:"noScrollbar",type:o.PropertyType.NoWidgetScrollbars,dependencies:["params"]}),this.registerProperty({name:"transparent",type:o.PropertyType.NoWidgetBackground,dependencies:["params"]}),this.registerProperty({name:"borderColor",type:o.PropertyType.TwitterElementBorderColor,dependencies:["params","noBorders"],uiComponentOptions:function(){return{visible:!this.noBorders}}})},c}.apply(t,n))||(e.exports=o)},"./WB_URLControl.class.js":function(e,t,i){var n,o;n=[i("./WB_LinkDialog.class.js"),i("./WB_LinkEditControl.class.js"),i("./util/MenuList.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n){"use strict";var o=function(e,t,i,n,o,s,r,a){this.__construct(e,t,i,n,o,s,r,a)};return o.prototype._elem=null,o.prototype.controlsContainer=null,o.prototype.elem=null,o.prototype.linkDialog=null,o.prototype.value=null,o.prototype.multilang=!1,o.prototype.noEmail=!1,o.prototype.noPhone=!1,o.prototype.noFiles=!1,o.prototype.noLinkTitle=!1,o.prototype.noTarget=!1,o.prototype.noIndexing=!1,o.prototype.noPopup=!1,o.prototype.onChange=null,o.prototype.enabled=!0,o.elemList=[],o.reloadAll=function(){for(var e,t=0;e=o.elemList[t];t++)e.reload()},o.getUrl=function(e){var t=null;if(e)if("url"in e?t=e.url:"object"==typeof e&&(t=e[wb_builder.site.currSelLang].url),"page"===e.type){var n=i.getItemInfo(e.url,null,e.menuUID);n&&(t="internal"===n.type||"page"===n.type?"mi:"+(e.menuUID?e.menuUID+"_":"")+n.id+"/":n.url)}else"email"===e.type?t="mailto:"+t:"phone"===e.type?t="tel:"+t:e.type;return t},o.getName=function(e){var t=null;if(e)if("page"===e.type){var n=i.getItemInfo(e.url,null,e.menuUID);n&&(t=__tr(n.name))}else t=e.url?e.url.replace(/^(?:https?:\/\/|gallery\/)/i,""):null;return t},o.isActiveLinkValue=function(e){if(e&&"object"==typeof e){if("type"in e)return!(!e.type||!e.url);for(let t in e)if(e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&"type"in e[t]&&e[t].type&&e[t].url)return!0}return!1},o.prototype.__construct=function(e,t,i,s,r,a,l,c){this.elem=n('<div class="wb-url-controll"></div>'),this.controlsContainer=n("<div/>"),this.elem.append(this.controlsContainer),this.multilang=!!e,this.noEmail=t,this.noPhone=i,this.noFiles=s,this.noLinkTitle=r,this.noTarget=a,this.noIndexing=l,this.noPopup=c,this.init(),o.elemList.push(this)},o.prototype._triggerOnChange=function(){"function"==typeof this.onChange&&this.onChange.call(this),"function"==typeof this.onValueChanged&&this.onValueChanged()},o.prototype.reload=function(){this._elem=null,this.controlsContainer.empty(),this.init()},o.prototype.init=function(){var e=this,i=window.wb_builder.site.languages;if(i.length&&this.multilang){this._elem={};for(var o,s=0;o=i[s];s++){var r=new t.LinkEditControl(null,null,o.code);r.link.bind("click",(function(){return e.__onClick(null,n(this).parent().attr("data-lang")),!1})),r.remBtn.bind("click",(function(){e.enabled&&(e.setValue(null,n(this).parent().parent().attr("data-lang")),e._triggerOnChange())})),this._elem[o.code]=r,this.controlsContainer.append(this._elem[o.code].elem)}}else this._elem=new t.LinkEditControl,this._elem.link.bind("click",(function(){return e.__onClick(),!1})),this._elem.remBtn.bind("click",(function(){e.enabled&&(e.setValue(null),e._triggerOnChange())})),this.controlsContainer.append(this._elem.elem);this.setValue(),this.setEnabled(this.enabled)},o.prototype.__onClick=function(t,i){if(this.enabled){var o=this,s="function"==typeof t?t:null;this.linkDialog||(this.linkDialog=new e(__("Link properties"),{},this.noEmail,this.noPhone,this.noFiles,this.noLinkTitle,this.noTarget,this.noIndexing,this.noPopup),this.linkDialog.addButton(__("Cancel")),this.linkDialog.addButton(__("Apply"),(function(){o.setValue(o.linkDialog.getInfo(),o.linkDialog.langCode),o.linkDialog.hide(),s&&s.call(o),o._triggerOnChange()}),!0)),this.linkDialog.langCode=i,this.linkDialog.setInfo(n.extend(!0,{},this.getValue(i))),this.linkDialog.show()}},o.prototype.setMultilang=function(e){if(this.multilang!=e){var t=this.getValue();this.multilang=e,this.reload(),this.setValue(t)}},o.prototype.getValue=function(e){return e?this.value[e]:this.value},o.prototype.setValue=function(e,t,s){var r,a,l;if(s){if((l=e&&"object"==typeof e?n.extend(!0,{},e):{}).type||(l.type="url"),l.url||(l.url=null),l.menuUID||(l.menuUID=null),l.anchor||(l.anchor=null),l.target||(l.target=null),l.title||(l.title=null),l.popup||(l.popup=!1),l.popupWidth||(l.popupWidth=null),l.popupHeight||(l.popupHeight=null),l.menuUID&&(l.menuUID=(""+l.menuUID).replace(/_+/g,"")),l.url&&(l.url=(""+l.url).replace(/^(mi:.+?)_+(.+)$/,"$1_$2")),l.finalUrl=o.getUrl(l),l.name=o.getName(l),"page"===l.type){var c=l.anchor?{name:"#"+l.anchor}:i.getItemInfo(l.url,null,l.menuUID);c?s.setValue(__tr(c.name,wb_builder.site.getLastDefLang())):s.clearValue()}else l.url?s.setValue(l.url):s.clearValue();return l}if(l=n.extend(!0,{},this.value),wb_builder.site.languages.length&&this.multilang)if(t)l[t]=this.setValue(e,t,this._elem[t]);else if(l={},e&&"object"==typeof e&&Object.keys(e).length>0)if("type"in e)for(r in a=wb_builder.site.getLastDefLang(),this._elem)this._elem.hasOwnProperty(r)&&(l[r]=this.setValue(r===a?e:null,r,this._elem[r]));else for(r in this._elem)this._elem.hasOwnProperty(r)&&(l[r]=this.setValue(e.hasOwnProperty(r)?e[r]:null,r,this._elem[r]));else for(r in this._elem)this._elem.hasOwnProperty(r)&&(l[r]=this.setValue(null,null,this._elem[r]));else e&&"object"==typeof e?"type"in e?l=this.setValue(e,null,this._elem):(a=wb_builder.site.getLastDefLang(),l=this.setValue(e[a],null,this._elem)):l=this.setValue(null,null,this._elem);this.value=l},o.prototype.enumControls=function(e){if("function"==typeof e){var t=window.wb_builder.site.languages;if(t.length&&this.multilang)for(var i,n=0;i=t[n];n++)this._elem.hasOwnProperty(i.code)&&e(this._elem[i.code],i.code);else e(this._elem,null)}},o.prototype.setEnabled=function(e){var t=this;this.enabled=e,this.enumControls((function(e,i){e.setEnabled(t.enabled)}))},o.prototype.getEnabled=function(){return this.enabled},o.prototype.getUrlTitle=function(){return"title"in this.value?this.value.title:"object"==typeof this.value?this.value[wb_builder.site.currSelLang].title:void 0},o.prototype.getUrlTarget=function(){var e=null;return"target"in this.value?e=this.value.target:"object"==typeof this.value&&(e=this.value[wb_builder.currSelLang].target),"string"!=typeof e&&e&&(e="_blank"),e},o.prototype.getUrl=function(){return o.getUrl(this.value)},o.prototype.getName=function(){return o.getName(this.value)},o.prototype._componentWrapper=null,o.prototype.bindings=null,o.prototype.bindingsBySubType=null,o.prototype.dependencyBindings=null,o.prototype.propertyType=null,o.prototype._revalidating=!1,o.supportsMultipleObjectBindings=function(){return!1},o.prototype.setComponentOptions=function(e){"multilang"in e&&this.setMultilang(!!e.multilang),"noEmail"in e&&(this.noEmail=!!e.noEmail),"noPhone"in e&&(this.noPhone=!!e.noPhone),"noFiles"in e&&(this.noFiles=!!e.noFiles),"noLinkTitle"in e&&(this.noLinkTitle=!!e.noLinkTitle),"noTarget"in e&&(this.noTarget=!!e.noTarget),"noIndexing"in e&&(this.noIndexing=!!e.noIndexing),"noPopup"in e&&(this.noPopup=!!e.noPopup)},window.WB_URLControl=o,o}.apply(t,n))||(e.exports=o)},"./WB_Youtube.class.js":function(e,t,i){var n,o;n=[i("./ElementRegister.ts"),i("./Element.ts"),i("./Service.ts"),i("./BackgroundControl.ts"),i("./element/PropertyType.ts"),i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e,t,i,n,o,s){var r=function(e){e&&this.__construct(e)};return __extends(r,t.Element),e.registerClass("Youtube",r),r.prototype.noPhotoBg="ico-tb-youtube",r.prototype.videoUrl=null,r.prototype._videoId=null,Object.defineProperty(r.prototype,"videoId",{get:function(){return this._videoId},set:function(e){this._videoId=r.extractId(e)||e},enumerable:!0,configurable:!0}),r.prototype._startAt=null,Object.defineProperty(r.prototype,"startAt",{get:function(){return this._startAt},set:function(e){this._startAt=e},enumerable:!0,configurable:!0}),r.prototype._showControls=null,Object.defineProperty(r.prototype,"showControls",{get:function(){return this._showControls},set:function(e){this._showControls=e},enumerable:!0,configurable:!0}),r.prototype._nocookieDomain=null,Object.defineProperty(r.prototype,"nocookieDomain",{get:function(){return this._nocookieDomain},set:function(e){this._nocookieDomain=e},enumerable:!0,configurable:!0}),r.prototype.playerMode="iframe",r.prototype.hideSelf=!0,r.prototype.player=null,r.prototype.previewLoader=null,r.prototype.previewReady=!1,r.defaultVideoId="UF8uR6Z6KLc",r.prototype.__construct=function(e){if(e.width||(e.width=420,e.height=315),t.Element.call(this,e),this.hideSelf){this.player=s('<div style="width: 100%; height: 100%;"><img alt="" style="width: 100%; height: 100%;" /></div>'),this.player.css({background:"#000000",position:"relative"}),this.player.children("img").css({position:"absolute"});var i=s("<div></div>");i.css({position:"absolute",zIndex:4,left:"0px",top:"0px",width:"100%",height:"100%",background:"transparent url('"+wb_builder.modBaseUrl+"img/play_btn.png') no-repeat center center"}),this.player.append(i)}else"iframe"===this.playerMode?this.player=s('<iframe title="YouTube video player" class="youtube-player" type="text/html" width="560" height="345" src="about:blank" frameborder="0"></iframe>'):this.player=s('<object width="560" height="340" data="" type="application/x-shockwave-flash"><param name="src" value=""></param><param name="movie" value=""></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param></object>');this.container.append(this.player);var n=e.content.videoId?e.content.videoId:"";this._videoId=r.extractId(n)||n,this._startAt=e.content.startAt?e.content.startAt:"",this._showControls=!("showControls"in e.content)||!!e.content.showControls,this._nocookieDomain="nocookieDomain"in e.content&&!!e.content.nocookieDomain;var o=this,a=null;this.elem.bind("resize",(function(){a&&clearTimeout(a),a=setTimeout((function(){o.elem.trigger("resize")}),200);var e=o.getWidthInPixels(),t=o.getHeightInPixels();if(o.player.css({width:"100%",height:"100%",overflow:"hidden"}),o.player.attr("width","100%"),o.player.attr("height","100%"),o.previewReady){var i=o.player.children("img"),n=e,s=Math.floor(o.previewLoader.height*e/o.previewLoader.width),r=0,l=Math.floor((t-s)/2);s>t&&(s=t,n=Math.floor(o.previewLoader.width*t/o.previewLoader.height),l=0,r=Math.floor((e-n)/2)),i.css({width:n+"px",height:s+"px",left:r+"px",top:l+"px"})}})),this.updateStyle(!0)},r.prototype.getIcon=function(){return"fa fa-youtube-play"},r.prototype.serialize=function(){var e=t.Element.prototype.serialize.call(this);return e.content={videoId:this.videoId,startAt:this.startAt,showControls:this.showControls,nocookieDomain:this.nocookieDomain,videoUrl:this.videoUrl},e},r.prototype.updateStyle=function(e,i){t.Element.prototype.updateStyle.call(this,e,i);var n=this,o=this.startAt?r.parseTime(this.startAt):0,a=[];o&&a.push("start="+o),a.push("controls="+(this.showControls?"1":"0"));var l=this.getFinalVideoId();this.nocookieDomain?this.videoUrl="//www.youtube-nocookie.com/embed/"+l+"?"+a.join("&amp;"):this.videoUrl="iframe"===this.playerMode?"//www.youtube.com/embed/"+l+"?"+a.join("&amp;"):"//www.youtube-nocookie.com/v/"+l+"?fs=1&amp;hl=en_US",this.hideSelf?(this.previewReady=!1,this.previewLoader=new Image,this.previewLoader.onload=function(){n.previewReady=!0,n.elem.trigger("resize")},this.getVideoImageUrl((function(e){e?(n.displayErrorMessage(!1),n.previewLoader.src=e,n.player.children("img").attr("src",n.previewLoader.src),n.elem.trigger("resize")):n.setErrorMessage(__("Incorrect URL or ID"))})),this.player.css({visibility:"visible"})):"iframe"===this.playerMode?this.player.attr("src",this.videoUrl):(this.player.attr("data",this.videoUrl),s("param[name=src]",this.player).attr("value",this.videoUrl),s("param[name=movie]",this.player).attr("value",this.videoUrl)),this.elem.trigger("resize")},r.prototype.getFinalVideoId=function(){return this.videoId?this.videoId:r.defaultVideoId},r.prototype.getVideoImageUrl=function(e){var t=new Image;t.src="//i2.ytimg.com/vi/"+this.getFinalVideoId()+"/hqdefault.jpg",t.onload=function(){var i=120===t.width&&90===t.height?null:this.src;"function"==typeof e&&e(i)}},r.prototype.canUseAsBackground=function(){return!0},r.prototype.comProperties=function(){var e=this,n=t.Element.prototype.comProperties.call(this,{tabs:[{children:[{type:"HorizontalLayout",columnWeights:[9,3],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Youtube URL or ID")},{type:"TextField",id:"videoId",placeholder:r.defaultVideoId,init:function(){this.on("paste",(function(){setTimeout((function(){var t=r.extractId(n.videoId.getValue());t||(t=r.defaultVideoId),n.videoId.setValue(t),n.videoPreview.setVideoId(t),n.videoPreview.update(),i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-videoId-change",e)}),100)}))},change:function(){i.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-prop-videoId-change",e)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Start at")},{type:"TextField",id:"startAt",placeholder:"00:00"}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"showControls",label:__("Show player controls"),change:function(e){e.videoPreview.update()}},{type:"CheckBox",id:"nocookieDomain",label:__("Use nocookie domain"),helpText:__("for GDPR compliance")}]},{type:"CustomContainer",id:"videoPreview",styleClass:"thumbnail",css:{height:200,marginTop:15,marginBottom:0},init:function(){this._vidId=null,this.setVideoId=function(e){this._vidId=e},this.update=function(){var e;if(this._vidId){var t=n.showControls.getValue();e='<iframe width="100%" height="100%" style="width: 100%; height: 100%;" src="https://www.youtube.com/embed/'+this._vidId+"?controls="+(t?"1":"0")+'" frameborder="0" allowfullscreen=""></iframe>'}else e="";this._elem.html(e),this.setVisible(!!e)},this.destroy=function(){this._vidId=null,this.update()}}}]}],callbackFunc:function(t){var i=r.extractId(t.videoId.getValue());e.videoId=i||t.videoId.getValue(),e.startAt=t.startAt.getValue(),e.showControls=t.showControls.getValue(),e.nocookieDomain=t.nocookieDomain.getValue()},close:function(){n.videoPreview.destroy()}});this.videoId&&(n.videoId.setValue(this.videoId),n.startAt.setValue(this.startAt),n.showControls.setValue(this.showControls),n.nocookieDomain.setValue(this.nocookieDomain),n.videoId.trigger("paste"))},r.prototype.registerProperties=function(){t.Element.prototype.registerProperties.call(this),this.registerProperty({name:"videoId",type:o.PropertyType.YouTubeVideoId}),this.registerProperty({name:"startAt",type:o.PropertyType.VideoStartTime}),this.registerProperty({name:"showControls",type:o.PropertyType.VideoPlayerControls}),this.registerProperty({name:"nocookieDomain",type:o.PropertyType.YouTubeUseNoCookieDomain})},r.extractId=function(e){return n.extractYoutubeId(e)},r.parseTime=function(e){var t=0,i=0,n=0,o=e.split(":");return o.length>=3&&(t=parseInt(o.shift(),10),isNaN(t)&&(t=0)),o.length>=2&&(i=parseInt(o.shift(),10),isNaN(i)&&(i=0)),n=parseInt(o.shift(),10),isNaN(n)&&(n=0),60*t*60+60*i+n},r.prototype.supportsAutoWidth=function(){return!1},r.prototype.supportsAutoHeight=function(){return!1},r.prototype.getSupportedSizeUnits=function(){let e=[{suffix:"",label:"px"},{suffix:"%",min:1,max:100,precision:2,step:1}],t=[{suffix:"",label:"px"},{suffix:"%",min:1,max:100,precision:2,step:1}];return this.supportsAutoWidth()&&e.push({fixedValue:"auto",label:__("auto")}),this.supportsAutoHeight()&&t.push({fixedValue:"auto",label:__("auto")}),{sizeW:e,sizeH:t}},r}.apply(t,n))||(e.exports=o)},"./WidgetToolbar.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js"),i("./ElementRegister.ts"),i("./Service.ts")],void 0===(o=function(e,t,i){"use strict";var n=[],o={TOOLBAR_ITEM_STATE_ACTIVE_BUT_GRAY:"active_but_gray",elem:null,items:null,tbItems:null,collapsableGroups:null,enabled:!0,id:null,lastOrder:0,_resizeFuncApplied:!1,init:function(t,i,n){return this.elem=e("<div>").addClass("wb_toolbar"),i&&this.elem.addClass(i),this.items=[],this.tbItems=[],this.collapsableGroups=[],this.parseData(t,this,n),this},setEnabled:function(e){var t,i;if(this.enabled!==e)if(this.enabled=e,e)for(t=0;t<this.tbItems.length;t++)(i=this.tbItems[t]).oriEnabled&&!i.enabled&&i.setEnabled(!0);else for(t=0;t<this.tbItems.length;t++)(i=this.tbItems[t]).oriEnabled=i.enabled,i.oriEnabled&&i.setEnabled(!1)},ajustSize:function(){var t=this,i=!1;if(!t._resizeFuncApplied){t._resizeFuncApplied=!0;var n=null;e(window).on("resize",(function(){!i&&t.elem.width()>0&&(i=!0,function(){var e,i;for(e=0;e<t.items.length;e++)i=t.items[e],Object.getPrototypeOf(i)===t.ToolbarItemGroup&&i.ajustSize()}());var e,o,s=0,r=t.elem.width();if(n!==r||null===n){for(n=r,e=0;e<t.items.length;e++)s+="blockWidth"in t.items[e]&&t.items[e].blockWidth?t.items[e].blockWidth:t.items[e].elem.outerWidth(!0);for(e=t.items.length-1;e>=0;e--)"expanderWidth"in t.items[e]&&(o="blockWidth"in t.items[e]&&t.items[e].blockWidth?t.items[e].blockWidth:t.items[e].elem.outerWidth(!0),s>r?(s-=o-t.items[e].expanderWidth,t.items[e].setCollapsed(!0,!0)):t.items[e].setCollapsed(!1,!0))}}))}e(window).trigger("resize")},getToolbarItem:function(e){return this.tbItems.length>e&&e>=0?this.tbItems[e]:null},parseData:function(e,t,i){var n,o,s,r,a=this;for(n=0;n<e.length;n++)if("type"in(o=e[n])&&o.type&&"item"!==o.type&&"widget"!==o.type)if("group"===o.type){if(s=Object.create(this.ToolbarItemGroup).init(),"id"in o&&s.setId(o.id),"collapsable"in o&&o.collapsable?(r=Object.create(this.ToolbarItem).init(o.icon,o.name),"borderless"in o?r.setBorderless(!!o.borderless):r.setBorderless(!0),this.registerCollapsableGroup(s,r),"collapseCallback"in o&&o.collapseCallback&&(s.collapseCallback=o.collapseCallback)):r=null,this.parseData(o.items,s,i),i){for(var l=!1,c=0,u=s.items.length;c<u;c++)if(s.items[c].enabled){l=!0;break}!l&&s.expander&&s.expander.setEnabled(!1)}t.addItem(s)}else"-"===o.type&&(s=Object.create(this.ToolbarItemSeparator).init(),o.styleClass&&s.elem.addClass(o.styleClass),t.addItem(s,this.getNextOrder()));else{if(s=Object.create(this.ToolbarItem).init(o.icon,o.name,!!o.iconImage),"beta"in o&&o.beta&&s.setBeta(!0),"id"in o&&(s.id=o.id,s.setId("widget"===o.type?"wb__"+o.id:o.id)),"borderless"in o&&o.borderless&&s.setBorderless(!0),"active"in o){var d="function"==typeof o.active?o.active(o.id):o.active;s.setEnabled(!!d),d===a.TOOLBAR_ITEM_STATE_ACTIVE_BUT_GRAY&&s.masqueradeDisabled(!0)}"widget"===o.type?(window.wb_builder.isTouchDevice?s.setTitle(__("Tap to add")):s.setTitle(__("Drag and drop to add")),s.enabled&&!o.noDraggable&&s.setDraggable(!0,(function(){for(var e=0;e<a.collapsableGroups.length;e++)a.collapsableGroups[e].setOpen(!1,!0)}))):("title"in o&&o.title?s.setTitle(o.title):"submenu"in o||s.setTitle(o.name),"submenu"in o&&s.setSubmenu(o.submenu)),"click"in o&&"function"==typeof o.click?s.elem.on("click touchend",function(e,t){return function(i){t.enabled&&e.call(t,i,t)}}(o.click,s)):"url"in o&&o.url&&s.setLink(o.url),"featureMessage"in o&&o.featureMessage&&s.setFeatureMessage(o.featureMessage),"init"in o&&"function"==typeof o.init&&o.init.call(s),t.addItem(s,this.getNextOrder()),this.tbItems.push(s)}},registerCollapsableGroup:function(e,t){t&&(t.setExpander(!0),e.addItem(t)),function(e,t){(t?t.elem:e.elem).on("mouseover",(function(){if(!t||t.enabled){if(!e.isOpen)for(var i=0;i<n.length;i++)n[i]!==e&&n[i].setOpen(!1,!0);e.setOpen(!0),e.isOutTimeout&&(clearTimeout(e.isOutTimeout),e.isOutTimeout=null)}})).on("touchstart",(function(){if(!t||t.enabled)if(e.isOpen)e.setOpen(!1);else{for(var i=0;i<n.length;i++)n[i]!==e&&n[i].setOpen(!1,!0);e.setOpen(!0)}})).on("mouseout",(function(){t&&!t.enabled||e.isOutTimeout||(e.isOutTimeout=setTimeout((function(){e.isOutTimeout=null,e.setOpen(!1)}),40))})),(t?e.container:e.elem).on("mouseover",(function(){e.isOutTimeout&&(clearTimeout(e.isOutTimeout),e.isOutTimeout=null)})).on("mouseout",(function(){e.isOutTimeout||(e.isOutTimeout=setTimeout((function(){e.isOutTimeout=null,e.setOpen(!1)}),40))}))}(e,t),this.collapsableGroups.push(e),n.push(e)},addItem:function(e,t){var i=!1;if(t&&this.items.length>0)for(var n in t=(t=parseInt(t))&&!isNaN(t)?t:0,e.order=t,this.items)if(this.items[n].order&&e.order<this.items[n].order){e.elem.insertBefore(this.items[n].elem),i=!0;break}i||this.elem.append(e.elem),this.items.push(e)},getNextOrder:function(){return this.lastOrder+=20,this.lastOrder},setId:function(e){this.elem.attr("id",e)},getId:function(){return this.elem.attr("id")},getItemById:function(e){if(!e)return null;var t,i;for(t=0;t<this.items.length;t++)if((i=this.items[t]).getId&&e===i.getId())return i;return null},getItemByIdRe:function(e){if(!e)return null;var t,i;for(t=0;t<this.tbItems.length;t++)if((i=this.tbItems[t]).getId&&e===i.getId())return i;return null},closeAllGroups:function(){for(var e=0;e<n.length;e++)n[e].setOpen(!1,!0)}};return o.ToolbarItemGroup={elem:null,container:null,expander:null,items:null,expanderWidth:0,blockWidth:0,blockDWidth:0,blockHeight:0,isOpen:!1,isCollapsed:!1,_id:null,collapseCallback:null,init:function(){return this.container=e("<div>").addClass("wb_item_group_container"),this.elem=e("<div>").addClass("wb_item_group").append(this.container),e("<div>").addClass("arrow").appendTo(this.container),this.items=[],this},addItem:function(e){e.expander?(this.expander=e,this.elem.prepend(e.elem)):(this.items.push(e),this.container.append(e.elem))},ajustSize:function(){this.expanderWidth=this.expander?this.expander.getWidth():0,this.blockWidth=this.getWidth(!0),this.blockDWidth=this.getWidth(!0,3),this.blockHeight=this.getHeight(),this.elem.width(this.blockWidth),this.container.width(this.blockWidth+100),this.setCollapsed(!0)},setCollapsed:function(e,t){var i=this;this.expander&&(e?(this.expander.setVisible(!0),this.elem.css({overflow:"hidden"}),t?(this.elem.stop(!0,!1).css({width:this.expanderWidth}),"function"==typeof this.collapseCallback&&this.collapseCallback(!0,this.elem)):this.elem.stop(!0,!1).animate({width:this.expanderWidth},200,(function(){"function"==typeof i.collapseCallback&&i.collapseCallback(!0,i.elem)})),this.isCollapsed=!0):(this.isOpen&&this.setOpen(!1,!0),"function"==typeof this.collapseCallback&&this.collapseCallback(!1,i.elem),this.expander.setVisible(!1),t?(this.elem.stop(!0,!1).css({width:i.blockWidth}),this.elem.css({overflow:"visible"})):this.elem.stop(!0,!1).animate({width:i.blockWidth},200,(function(){i.elem.css({overflow:"visible"})})),this.isCollapsed=!1))},setOpen:function(t,n){if(this.expander&&this.isCollapsed){var o=this._id;o&&(o=o.replace(/^wb-group-/i,"")),t?(this.elem.stop(!0,!1).css({width:"",height:"",overflow:"visible"}),this.elem.addClass("vertical"),this.container.css({width:this.blockDWidth+21}),e(window).width()<this.container.offset().left+this.container.outerWidth(!0)&&this.elem.addClass("vertical-right"),this.isOpen=!0,o&&!n&&i.Service.HelpSystemPlayer.notify("toolbar-plugin-"+o+"-open",this)):(this.elem.stop(!0,!1).css({width:this.expanderWidth,height:this.blockHeight,overflow:"hidden"}),this.elem.removeClass("vertical").removeClass("vertical-right"),this.container.width(this.blockWidth+100),this.isOpen=!1,o&&!n&&i.Service.HelpSystemPlayer.notify("toolbar-plugin-"+o+"-close",this))}},getWidth:function(e,t){if(e){var i,n=0,o=0,s=0;if(t){for(i=0;i<this.items.length;i++)this.items[i].expander||(n+=this.items[i].elem.outerWidth(!0),(++o>=t||i===this.items.length-1)&&(n>s&&(s=n),o=0,n=0));return s}for(i=0;i<this.items.length&&(this.items[i].expander||(n+=this.items[i].elem.outerWidth(!0),!(t&&i>=t-1)));i++);return n}return this.elem.outerWidth(!0)},getHeight:function(e){if(e){var t,i=0;for(t=0;t<this.items.length;t++)i+=this.items[t].elem.outerHeight(!0)+6;return i}return this.elem.outerHeight(!0)},setId:function(e){this._id=e},getId:function(){return this._id},getItemById:function(e){if(!e)return null;var t,i;for(t=0;t<this.items.length;t++)if(e===(i=this.items[t]).getId())return i;return null},setVisible:function(e){e?this.elem.show():this.elem.hide()}},o.ToolbarItem={name:"",elem:null,cover:null,button:null,icon:null,iconVal:null,_caretElem:null,_nameElem:null,_betaElem:null,_submenuElem:null,_submenuFunc:null,submenuItems:null,expander:!1,draggable:!1,enabled:!0,oriTitle:null,oriEnabled:!0,external:!1,_tooltipActive:!1,_featureMessage:null,isVisuallyDraggable:!1,dots:null,init:function(t,i,n){if(this.iconVal=t,this.elem=e("<div>").addClass("wb_item"),this.cover=e("<div>").addClass("wb_cover"),this.elem.append(this.cover),this.button=e("<button>").addClass("btn btn-wb-item"),this.button.attr("type","button"),this.external=!!n,this.external){if(this.icon=e("<i>").addClass("ico-tb ico-tb-no-bg"),t){var o=(""+t).split(" #");o.length>1&&o[1]&&this.icon.addClass(o[1]),this.icon.append('<img src="'+o[0]+'" alt="'+(null!==i?i:"")+'" />')}}else this.icon=e("<i>").addClass(t);return this.button.append(this.icon),this.elem.append(this.button),null!==i&&(this.name=i,this._nameElem=e("<span>").text(i),this.elem.append(this._nameElem)),this.submenuItems=[],this},setVisuallyDragable:function(t){if(this.isVisuallyDraggable!==t)if(this.isVisuallyDraggable=t,t){if(!this.dots){var i='<svg width="3" height="3"><circle cx="1.5" cy="1.5" r="1.5" fill="#919191"/></svg>';this.dots=e("<div>").addClass("wb-vis-dots").append(e("<div>").append(i).append(i).append(i)).append(e("<div>").append(i).append(i).append(i))}this.elem.addClass("wb-vis-draggable"),this.elem.css({cursor:""}),this._nameElem.before(this.dots)}else this.dots&&this.dots.detach(),this.elem.removeClass("wb-vis-draggable")},getIcon:function(){return this.iconVal},setIcon:function(e){if(this.iconVal!==e){var t=this.iconVal;this.iconVal=e,this.icon.addClass(e),this.icon.removeClass(t)}},setBeta:function(t){t?this._betaElem?this._betaElem.show():(this._betaElem=e("<span>").addClass("beta").text("beta"),this.elem.prepend(this._betaElem)):this._betaElem&&this._betaElem.hide()},setLink:function(e){return this.cover.append('<a href="'+e+'" target="_blank"></a>'),this},setSubmenu:function(t){var i,n,s="object"==typeof t&&"length"in t&&t.length>0?t:null;if(s){if(this.elem.addClass("wb-dropdown"),this.button.attr("data-toggle","dropdown"),this._caretElem||(this._caretElem=e("<span>").addClass("caret")),this.button.append(this._caretElem),this._submenuElem||(this._submenuElem=e("<ul>").addClass("dropdown-menu")),this.elem.append(this._submenuElem),!this._submenuFunc){var r=this;this._submenuFunc={over:function(){r.submenuItems.length>0&&r.elem.addClass("open")},out:function(){r.submenuItems.length>0&&r.elem.removeClass("open")}},window.wb_builder.isTouchDevice?this.elem.on("click touchend",(function(e){e.stopPropagation(),r._submenuFunc.over()})):this.elem.hover(this._submenuFunc.over,this._submenuFunc.out)}for(i=0;i<s.length;i++)"type"in s[i]&&"-"===s[i].type?n=Object.create(o.ToolbarItemSubmenuSeparator).init():(n=Object.create(o.ToolbarItemSubmenuItem).init(s[i].name,"help"in s[i]?s[i].help:null,"helpPlacement"in s[i]?s[i].helpPlacement:null),"beta"in s[i]&&s[i].beta&&n.setBeta(!0),"featureMessage"in s[i]&&s[i].featureMessage&&n.setFeatureMessage(s[i].featureMessage),"id"in s[i]&&s[i].id&&n.setId(s[i].id),"active"in s[i]&&!s[i].active?n.setInactive():"click"in s[i]&&"function"==typeof s[i].click&&n._aElem.on("click touchend",s[i].click)),"hidden"in s[i]&&s[i].hidden||this.addSubmenuItem(n)}else this.elem.removeClass("wb-dropdown"),this.elem.removeClass("open"),this.button.removeAttr("data-toggle"),this._caretElem&&this._caretElem.detach(),this._submenuElem&&(this._submenuElem.empty(),this._submenuElem.detach()),this.submenuItems.splice(0,this.submenuItems.length)},addSubmenuItem:function(e){this.submenuItems.push(e),this._submenuElem&&this._submenuElem.append(e.elem)},setTitle:function(e){this.oriTitle=e,this.updateTooltip()},setFeatureMessage:function(e){this._featureMessage=e,this.updateTooltip()},setBorderless:function(e){e?this.button.addClass("btn-wb-noborder"):this.button.removeClass("btn-wb-noborder")},setExpander:function(t){this.expander=t,t?(this.elem.addClass("wb_item_grouper"),this._caretElem||(this._caretElem=e("<span>").addClass("caret")),this.button.append(this._caretElem)):(this.elem.removeClass("wb_item_grouper"),this._caretElem&&0===this.submenuItems.length&&(this._caretElem.remove(),this._caretElem=null))},setDraggable:function(t,n){if(this.draggable=t,t){this.elem.draggable({revert:"invalid",revertDuration:300,helper:"clone",appendTo:e(document.body),start:"function"==typeof n?n:function(e,t){},drag:function(e,t){}}),this.elem.css("cursor","move");var o=i.Service.uiManager.getApiInstance();s=this.elem,r=n,s.on("touchend",(function(){if(this.id){var t=e(window).width()/2+e(window).scrollLeft(),i=e(window).height()/2+e(window).scrollTop();return o.addElementAt(this.id.split("__")[1],t,i),"function"==typeof r&&r.call(this),!1}}))}else this.elem.draggable("destroy"),this.elem.css("cursor","pointer");var s,r;this.updateTooltip()},setEnabled:function(e){this.enabled=e,e?(this.elem.removeClass("wb_inactive"),this.elem.css({opacity:1,cursor:this.isVisuallyDraggable?"":this.draggable?"move":"pointer"}),this.elem.attr("title",this.oriTitle),this.draggable&&this.elem.draggable("enable")):(this.elem.addClass("wb_inactive"),this.elem.css({opacity:.3,cursor:"default"}),this.draggable&&this.elem.draggable("disable")),this.updateTooltip()},masqueradeDisabled:function(e){e?this.elem.css({opacity:.3}):this.elem.css({opacity:1}),this.updateTooltip()},setVisible:function(e){e?this.elem.show():this.elem.hide()},setActive:function(e){e?this.elem.addClass("active"):this.elem.removeClass("active")},getWidth:function(){return this.elem.outerWidth(!0)},setId:function(e){this.elem.attr("id",e)},getId:function(){return this.elem.attr("id")},updateTooltip:function(){var e=!1;!this.enabled&&this._featureMessage?(this.elem.attr("title",this._featureMessage),e=!0):this.oriTitle?(this.elem.attr("title",this.oriTitle),e=this.draggable):this.elem.removeAttr("title"),e&&!this._tooltipActive?this.elem.tooltip({placement:"bottom",container:"body",template:'<div class="tooltip no-interaction" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}):!e&&this._tooltipActive&&this.elem.tooltip("destroy"),this._tooltipActive=e}},o.ToolbarItemSeparator={elem:null,init:function(){return this.elem=e("<div>").addClass("wb_item_sep"),this}},o.ToolbarItemSubmenuItem={elem:null,_aElem:null,_helpElem:null,_betaElem:null,_inactive:!1,_helpMessage:null,_featureMessage:null,_helpPlacement:"top",init:function(t,i,n){return this.elem=e("<li>"),this._aElem=e("<a>").attr("href","javascript:void(0)").appendTo(this.elem),this._aElem.text(t),n&&(this._helpPlacement=n),i&&(this._helpMessage=i,this.updateTooltip()),this},setId:function(e){this._aElem.attr("id",e)},getId:function(){return this._aElem.attr("id")},setInactive:function(){this._aElem.css({cursor:"default",color:"rgba(51, 51, 51, 0.3)"}),this._aElem.off("click touchend").on("click touchend",(function(e){e.stopImmediatePropagation(),e.preventDefault()})),this._inactive=!0,this.updateTooltip()},setBeta:function(t){t?this._betaElem?this._betaElem.show():(this._betaElem=e("<sup>").addClass("submenu-beta").text(" beta"),this._aElem.append(this._betaElem)):this._betaElem&&this._betaElem.hide()},setFeatureMessage:function(e){this._featureMessage=e,this._inactive&&this.updateTooltip()},updateTooltip:function(){var t=this._inactive?this._featureMessage:this._helpMessage;if(this._helpElem?this._helpElem.attr("title",t):(this._helpElem=e("<span>").addClass("badge wb_badge_help").attr("title",t).text("?").appendTo(this._aElem),this._helpElem.tooltip({placement:this._helpPlacement,container:"body",template:'<div class="tooltip no-interaction" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'})),this._inactive){var i="rgba(51, 51, 51, 0.3)";this._helpElem.css({color:i,borderColor:i})}}},o.ToolbarItemSubmenuSeparator={elem:null,init:function(){return this.elem=e("<li>").addClass("divider").on("click",(function(e){return e.stopPropagation(),e.preventDefault(),!1})).css("cursor","default"),this}},o}.apply(t,n))||(e.exports=o)},"./lib/JavaScript-Canvas-to-Blob-3.6.0/js/canvas-to-blob.js":function(e,t,i){var n;!function(o){"use strict";var s=o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype,r=o.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),a=r&&o.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),l=o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(r||l)&&o.atob&&o.ArrayBuffer&&o.Uint8Array&&function(e){var t,i,n,o,s,u,d,h,p;if(!(t=e.match(c)))throw new Error("invalid data URI");for(i=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),n=!!t[4],o=e.slice(t[0].length),s=n?atob(o):decodeURIComponent(o),u=new ArrayBuffer(s.length),d=new Uint8Array(u),h=0;h<s.length;h+=1)d[h]=s.charCodeAt(h);return r?new Blob([a?d:u],{type:i}):((p=new l).append(u),p.getBlob(i))};o.HTMLCanvasElement&&!s.toBlob&&(s.mozGetAsFile?s.toBlob=function(e,t,i){i&&s.toDataURL&&u?e(u(this.toDataURL(t,i))):e(this.mozGetAsFile("blob",t))}:s.toDataURL&&u&&(s.toBlob=function(e,t,i){e(u(this.toDataURL(t,i)))})),void 0===(n=function(){return u}.call(t,i,t,e))||(e.exports=n)}(window)},"./lib/JavaScript-Load-Image-2.10.1/js/load-image-exif.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/JavaScript-Load-Image-2.10.1/js/load-image.js"),i("./lib/JavaScript-Load-Image-2.10.1/js/load-image-meta.js")],void 0===(s="function"==typeof(n=function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,i){var n,o,s;if(i&&!(t+i>e.byteLength)){for(n=[],o=0;o<i;o+=1)s=e.getUint8(t+o),n.push((s<16?"0":"")+s.toString(16));return"data:image/jpeg,%"+n.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,i,n,o,s,r){var a,l,c,u,d,h,p=e.exifTagTypes[o];if(p){if(!((l=(a=p.size*s)>4?i+t.getUint32(n+8,r):n+8)+a>t.byteLength)){if(1===s)return p.getValue(t,l,r);for(c=[],u=0;u<s;u+=1)c[u]=p.getValue(t,l+u*p.size,r);if(p.ascii){for(d="",u=0;u<c.length&&"\0"!==(h=c[u]);u+=1)d+=h;return d}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,i,n,o,s){var r=t.getUint16(n,o);s.exif[r]=e.getExifValue(t,i,n,t.getUint16(n+2,o),t.getUint32(n+4,o),o)},e.parseExifTags=function(e,t,i,n,o){var s,r,a;if(i+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((r=i+2+12*(s=e.getUint16(i,n)))+4>e.byteLength)){for(a=0;a<s;a+=1)this.parseExifTag(e,t,i+2+12*a,n,o);return e.getUint32(r,n)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,i,n,o,s){if(!s.disableExif){var r,a,l,c=i+10;if(1165519206===t.getUint32(i+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(i+8)){switch(t.getUint16(c)){case 18761:r=!0;break;case 19789:r=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,r)?(a=t.getUint32(c+4,r),o.exif=new e.ExifMap,(a=e.parseExifTags(t,c,c+a,r,o))&&!s.disableExifThumbnail&&(l={exif:{}},a=e.parseExifTags(t,c,c+a,r,l),l.exif[513]&&(o.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),o.exif[34665]&&!s.disableExifSub&&e.parseExifTags(t,c,c+o.exif[34665],r,o),o.exif[34853]&&!s.disableExifGps&&e.parseExifTags(t,c,c+o.exif[34853],r,o)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})?n.apply(t,o):n)||(e.exports=s)}()},"./lib/JavaScript-Load-Image-2.10.1/js/load-image-meta.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/JavaScript-Load-Image-2.10.1/js/load-image.js")],n=function(e){var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,i,n,o){o=o||{};var s=this,r=(n=n||{}).maxMetaDataSize||262144;window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice&&e.readFile(e.blobSlice.call(t,0,r),(function(t){if(t.target.error)return console.log(t.target.error),void i(o);var r,a,l,c,u=t.target.result,d=new DataView(u),h=2,p=d.byteLength-4,m=h;if(65496===d.getUint16(0)){for(;h<p&&((r=d.getUint16(h))>=65504&&r<=65519||65534===r);){if(h+(a=d.getUint16(h+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=e.metaDataParsers.jpeg[r])for(c=0;c<l.length;c+=1)l[c].call(s,d,h,a,o,n);m=h+=a}!n.disableImageHead&&m>6&&(u.slice?o.imageHead=u.slice(0,m):o.imageHead=new Uint8Array(u).subarray(0,m))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(o)}),"readAsArrayBuffer")||i(o)},e.hasMetaOption=function(e){return e.meta};var i=e.transform;e.transform=function(t,n,o,s,r){e.hasMetaOption(n||{})?e.parseMetaData(s,(function(r){i.call(e,t,n,o,s,r)}),n,r):i.apply(e,arguments)}},void 0===(s=n.apply(t,o))||(e.exports=s)}()},"./lib/JavaScript-Load-Image-2.10.1/js/load-image.js":function(e,t,i){var n;!function(o){"use strict";function s(e,t,i){var n,o=document.createElement("img");if(o.onerror=function(n){return s.onerror(o,n,e,t,i)},o.onload=function(n){return s.onload(o,n,e,t,i)},s.isInstanceOf("Blob",e)||s.isInstanceOf("File",e))n=o._objectURL=s.createObjectURL(e);else{if("string"!=typeof e)return!1;n=e,i&&i.crossOrigin&&(o.crossOrigin=i.crossOrigin)}return n?(o.src=n,o):s.readFile(e,(function(e){var i=e.target;i&&i.result?o.src=i.result:t&&t(e)}))}var r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;function a(e,t){!e._objectURL||t&&t.noRevoke||(s.revokeObjectURL(e._objectURL),delete e._objectURL)}s.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},s.transform=function(e,t,i,n,o){i(s.scale(e,t,o),o)},s.onerror=function(e,t,i,n,o){a(e,o),n&&n.call(e,t)},s.onload=function(e,t,i,n,o){a(e,o),n&&s.transform(e,o,n,i,{})},s.transformCoordinates=function(){},s.getTransformedOptions=function(e,t){var i,n,o,s,r=t.aspectRatio;if(!r)return t;for(n in i={},t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i.crop=!0,(o=e.naturalWidth||e.width)/(s=e.naturalHeight||e.height)>r?(i.maxWidth=s*r,i.maxHeight=s):(i.maxWidth=o,i.maxHeight=o/r),i},s.renderImageToCanvas=function(e,t,i,n,o,s,r,a,l,c){return e.getContext("2d").drawImage(t,i,n,o,s,r,a,l,c),e},s.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},s.scale=function(e,t,i){t=t||{};var n,o,r,a,l,c,u,d,h,p,m,g=document.createElement("canvas"),f=e.getContext||s.hasCanvasOption(t)&&g.getContext,y=e.naturalWidth||e.width,b=e.naturalHeight||e.height,v=y,_=b;function C(){var e=Math.max((r||v)/v,(a||_)/_);e>1&&(v*=e,_*=e)}function w(){var e=Math.min((n||v)/v,(o||_)/_);e<1&&(v*=e,_*=e)}if(f&&(u=(t=s.getTransformedOptions(e,t,i)).left||0,d=t.top||0,t.sourceWidth?(l=t.sourceWidth,void 0!==t.right&&void 0===t.left&&(u=y-l-t.right)):l=y-u-(t.right||0),t.sourceHeight?(c=t.sourceHeight,void 0!==t.bottom&&void 0===t.top&&(d=b-c-t.bottom)):c=b-d-(t.bottom||0),v=l,_=c),n=t.maxWidth,o=t.maxHeight,r=t.minWidth,a=t.minHeight,f&&n&&o&&t.crop?(v=n,_=o,(m=l/c-n/o)<0?(c=o*l/n,void 0===t.top&&void 0===t.bottom&&(d=(b-c)/2)):m>0&&(l=n*c/o,void 0===t.left&&void 0===t.right&&(u=(y-l)/2))):((t.contain||t.cover)&&(r=n=n||r,a=o=o||a),t.cover?(w(),C()):(C(),w())),f){if((h=t.pixelRatio)>1&&(g.style.width=v+"px",g.style.height=_+"px",v*=h,_*=h,g.getContext("2d").scale(h,h)),(p=t.downsamplingRatio)>0&&p<1&&v<l&&_<c)for(;l*p>v;)g.width=l*p,g.height=c*p,s.renderImageToCanvas(g,e,u,d,l,c,0,0,g.width,g.height),u=0,d=0,l=g.width,c=g.height,(e=document.createElement("canvas")).width=l,e.height=c,s.renderImageToCanvas(e,g,0,0,l,c,0,0,l,c);return g.width=v,g.height=_,s.transformCoordinates(g,t),s.renderImageToCanvas(g,e,u,d,l,c,0,0,v,_)}return e.width=v,e.height=_,e},s.createObjectURL=function(e){return!!r&&r.createObjectURL(e)},s.revokeObjectURL=function(e){return!!r&&r.revokeObjectURL(e)},s.readFile=function(e,t,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=t,n[i=i||"readAsDataURL"])return n[i](e),n}return!1},void 0===(n=function(){return s}.call(t,i,t,e))||(e.exports=n)}(window)},"./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload-image.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/jquery-1.11.3.min.js"),i("./lib/JavaScript-Load-Image-2.10.1/js/load-image.js"),i("./lib/JavaScript-Load-Image-2.10.1/js/load-image-meta.js"),i("./lib/JavaScript-Load-Image-2.10.1/js/load-image-exif.js"),i("./lib/JavaScript-Canvas-to-Blob-3.6.0/js/canvas-to-blob.js"),i("./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload-process.js")],void 0===(s="function"==typeof(n=function(e,t){e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var o=this,s=i.files[i.index],r=e.Deferred();return"number"===e.type(n.maxFileSize)&&s.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(s.type)||!t(s,(function(e){e.src&&(i.img=e),r.resolveWith(o,[i])}),n)?i:r.promise()},resizeImage:function(i,n){if(n.disabled||!i.canvas&&!i.img)return i;n=e.extend({canvas:!0},n);var o,s=this,r=e.Deferred(),a=n.canvas&&i.canvas||i.img,l=function(e){e&&(e.width!==a.width||e.height!==a.height||n.forceResize)&&(i[e.getContext?"canvas":"img"]=e),i.preview=e,r.resolveWith(s,[i])};if(i.exif){if(!0===n.orientation&&(n.orientation=i.exif.get("Orientation")),n.thumbnail&&(o=i.exif.get("Thumbnail")))return t(o,l,n),r.promise();i.orientation?delete n.orientation:i.orientation=n.orientation}return a?(l(t.scale(a,n)),r.promise()):i},saveImage:function(t,i){if(!t.canvas||i.disabled)return t;var n=this,o=t.files[t.index],s=e.Deferred();return t.canvas.toBlob?(t.canvas.toBlob((function(e){e.name||(o.type===e.type?e.name=o.name:o.name&&(e.name=o.name.replace(/\.\w+$/,"."+e.type.substr(6)))),o.type!==e.type&&delete t.imageHead,t.files[t.index]=e,s.resolveWith(n,[t])}),i.type||o.type,i.quality),s.promise()):t},loadImageMetaData:function(i,n){if(n.disabled)return i;var o=this,s=e.Deferred();return t.parseMetaData(i.files[i.index],(function(t){e.extend(i,t),s.resolveWith(o,[i])}),n),s.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var i=e.files[e.index],n=new Blob([e.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,e.files[e.index]=n,e},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})})?n.apply(t,o):n)||(e.exports=s)}()},"./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload-process.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/jquery-1.11.3.min.js"),i("./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload.js")],void 0===(s="function"==typeof(n=function(e){var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var o=e(this);n.process((function(){return o.fileupload("process",n)})),t.call(this,i,n)}},processActions:{},_processFile:function(t,i){var n=this,o=e.Deferred().resolveWith(n,[t]).promise();return this._trigger("process",null,t),e.each(t.processQueue,(function(t,s){var r=function(t){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():n.processActions[s.action].call(n,t,s)};o=o.then(r,s.always&&r)})),o.done((function(){n._trigger("processdone",null,t),n._trigger("processalways",null,t)})).fail((function(){n._trigger("processfail",null,t),n._trigger("processalways",null,t)})),o},_transformProcessQueue:function(t){var i=[];e.each(t.processQueue,(function(){var n={},o=this.action,s=!0===this.prefix?o:this.prefix;e.each(this,(function(i,o){"string"===e.type(o)&&"@"===o.charAt(0)?n[i]=t[o.slice(1)||(s?s+i.charAt(0).toUpperCase()+i.slice(1):i)]:n[i]=o})),i.push(n)})),t.processQueue=i},processing:function(){return this._processing},process:function(t){var i=this,n=e.extend({},this.options,t);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(t.files,(function(o){var s=o?e.extend({},n):n,r=function(){return t.errorThrown?e.Deferred().rejectWith(i,[t]).promise():i._processFile(s,t)};s.index=o,i._processing+=1,i._processingQueue=i._processingQueue.then(r,r).always((function(){i._processing-=1,0===i._processing&&i._trigger("processstop")}))}))),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})})?n.apply(t,o):n)||(e.exports=s)}()},"./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/jquery-1.11.3.min.js"),i("./lib/jquery-ui/jquery-ui-1.9.2.custom.min.js")],n=function(e){function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var o=n.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:n}))&&(n.preventDefault(),i&&(o.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,(function(e,i){t=t.replace("{"+e+"}",i)})),t},formData:function(e){return e.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done((function(){i.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,(function(e,t){i.push({name:e,value:t})})),i):[]},_getTotal:function(t){var i=0;return e.each(t,(function(e,t){i+=t.size||1})),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,o=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&o-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=o,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(o,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",(function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)})),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,o=t.files[0],s=t.multipart||!e.support.xhrFileUpload,r="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:r,value:t.blob}):e.each(t.files,(function(n,o){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||r,value:o})}))):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),(function(e,t){i.append(t.name,t.value)}))),t.blob?i.append(r,t.blob,o.name):e.each(t.files,(function(o,s){(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s))&&i.append("array"===e.type(t.paramName)&&t.paramName[o]||r,s,s.uploadName||s.name)}))),t.data=i):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each((function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1})),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),s=o.promise();return i=i||this.options.context||s,!0===t?o.resolveWith(i,n):!1===t&&o.rejectWith(i,n),s.abort=o.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,s){return(t||s)&&(i._processQueue=this._processQueue=(this._processQueue||o([this])).then((function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():o(arguments)})).then(t,s)),this._processQueue||o([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,o,s=this,r=t.files[0],a=r.size,l=t.uploadedBytes,c=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return!(!(this._isXHRUpload(t)&&u&&(l||c<a))||t.data)&&(!!i||(l>=a?(r.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",r.error])):(o=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(r,l,l+c,r.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,s._initXHRData(i),s._initProgressListener(i),n=(!1!==s._trigger("chunksend",null,i)&&e.ajax(i)||s._getXHRPromise(!1,i.context)).done((function(n,r,c){l=s._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=r,i.jqXHR=c,s._trigger("chunkdone",null,i),s._trigger("chunkalways",null,i),l<a?o():d.resolveWith(i.context,[n,r,c])})).fail((function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,s._trigger("chunkfail",null,i),s._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])}))},this._enhancePromise(h),h.abort=function(){return n.abort()},o(),h)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var s=o._progress.total,r=o._response;o._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),o),r.result=o.result=t,r.textStatus=o.textStatus=i,r.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,s,r,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||!1===a._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done((function(e,t,i){a._onDone(e,t,i,l)})).fail((function(e,t,i){a._onFail(e,t,i,l)})).always((function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")}))};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),r=s.then(c)):(this._sequence=this._sequence.then(c,c),r=this._sequence),r.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(s&&s.rejectWith(l.context,o),c())},this._enhancePromise(r)):c()},_onAdd:function(t,i){var n,o,s,r,a=this,l=!0,c=e.extend({},this.options,i),u=i.files,d=u.length,h=c.limitMultiFileUploads,p=c.limitMultiFileUploadSize,m=c.limitMultiFileUploadSizeOverhead,g=0,f=this._getParamName(c),y=0;if(!d)return!1;if(p&&void 0===u[0].size&&(p=void 0),(c.singleFileUploads||h||p)&&this._isXHRUpload(c))if(c.singleFileUploads||p||!h)if(!c.singleFileUploads&&p)for(s=[],n=[],r=0;r<d;r+=1)g+=u[r].size+m,(r+1===d||g+u[r+1].size+m>p||h&&r+1-y>=h)&&(s.push(u.slice(y,r+1)),(o=f.slice(y,r+1)).length||(o=f),n.push(o),y=r+1,g=0);else n=f;else for(s=[],n=[],r=0;r<d;r+=h)s.push(u.slice(r,r+h)),(o=f.slice(r,r+h)).length||(o=f),n.push(o);else s=[u],n=[f];return i.originalFiles=u,e.each(s||u,(function(o,r){var c=e.extend({},i);return c.files=s?r:[r],c.paramName=n[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),c)})),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0),o=i.is(document.activeElement);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),o&&n.focus(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map((function(e,t){return t===i[0]?n[0]:t})),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,o=this,s=e.Deferred(),r=[],a=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])},l=function(){n.readEntries((function(e){e.length?(r=r.concat(e),l()):function(e){o._handleFileTreeEntries(e,i+t.name+"/").done((function(e){s.resolve(e)})).fail(a)}(r)}),a)};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,s.resolve(t._file)):t.file((function(e){e.relativePath=i,s.resolve(e)}),a):t.isDirectory?(n=t.createReader(),l()):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,(function(e){return n._handleFileTreeEntry(e,i)}))).then((function(){return Array.prototype.concat.apply([],arguments)}))},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,(function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()}))):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var i,n,o=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((i=e.makeArray(t.prop("files"))).length)void 0===i[0].name&&i[0].fileName&&e.each(i,(function(e,t){t.name=t.fileName,t.size=t.fileSize}));else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then((function(){return Array.prototype.concat.apply([],arguments)})):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always((function(o){n.files=o,i.options.replaceFileInput&&i._replaceFileInput(n),!1!==i._trigger("change",e.Event("change",{delegatedEvent:t}),n)&&i._onAdd(t,n)}))},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,(function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)})),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,o={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always((function(n){o.files=n,!1!==i._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)&&i._onAdd(t,o)})))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data();e.each(this.element[0].attributes,(function(e,o){var s,r=o.name.toLowerCase();/^data-/.test(r)&&(r=r.slice(5).replace(/-[a-z]/g,(function(e){return e.charAt(1).toUpperCase()})),s=n[r],t._isRegExpOption(r,s)&&(s=t._getRegExp(s)),i[r]=s)}))},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always((function(e){t.files=e,i._onAdd(null,t)})):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,s=e.Deferred(),r=s.promise();return r.abort=function(){return n=!0,i?i.abort():(s.reject(null,"abort","abort"),r)},this._getFileInputFiles(t.fileInput).always((function(e){n||(e.length?(t.files=e,(i=o._onSend(null,t)).then((function(e,t,i){s.resolve(e,t,i)}),(function(e,t,i){s.reject(e,t,i)}))):s.reject())})),this._enhancePromise(r)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})},void 0===(s=n.apply(t,o))||(e.exports=s)}()},"./lib/jQuery-File-Upload-9.16.0/js/jquery.iframe-transport.js":function(e,t,i){var n,o,s;!function(r){"use strict";o=[i("./lib/jquery-1.11.3.min.js")],void 0===(s="function"==typeof(n=function(e){var t=0,i=e,n="parseJSON";"JSON"in window&&"parse"in JSON&&(i=JSON,n="parse"),e.ajaxTransport("iframe",(function(i){if(i.async){var n,o,s,r=i.initialIframeSrc||"javascript:false;";return{send:function(a,l){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),s=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+s+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+s+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+s+"_method=PATCH",i.type="POST"),o=e('<iframe src="'+r+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",(function(){var t,s=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",(function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout((function(){n.remove()}),0)})),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,(function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)})),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after((function(e){return t[e]})),i.paramName&&i.fileInput.each((function(t){e(this).prop("name",s[t]||i.paramName)})),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each((function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)}))})),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",r),n&&n.remove()}}}})),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&i[n](e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})?n.apply(t,o):n)||(e.exports=s)}()},"./lib/jquery-1.11.3.min.js":function(e,t){var i,n,o;n="undefined"!=typeof window?window:this,o=function(n,o){var s=[],r=s.slice,a=s.concat,l=s.push,c=s.indexOf,u={},d=u.toString,h=u.hasOwnProperty,p={},m="1.11.3",g=function(e,t){return new g.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,y=/^-ms-/,b=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function _(e){var t="length"in e&&e.length,i=g.type(e);return"function"!==i&&!g.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}g.fn=g.prototype={jquery:m,constructor:g,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=g.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return g.each(this,e,t)},map:function(e){return this.pushStack(g.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:s.sort,splice:s.splice},g.extend=g.fn.extend=function(){var e,t,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||g.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(n in o)e=r[n],r!==(i=o[n])&&(c&&i&&(g.isPlainObject(i)||(t=g.isArray(i)))?(t?(t=!1,s=e&&g.isArray(e)?e:[]):s=e&&g.isPlainObject(e)?e:{},r[n]=g.extend(c,s,i)):void 0!==i&&(r[n]=i));return r},g.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===g.type(e)},isArray:Array.isArray||function(e){return"array"===g.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!g.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==g.type(e)||e.nodeType||g.isWindow(e))return!1;try{if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(p.ownLast)for(t in e)return h.call(e,t);for(t in e);return void 0===t||h.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[d.call(e)]||"object":typeof e},globalEval:function(e){e&&g.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(y,"ms-").replace(b,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,o=e.length,s=_(e);if(i){if(s)for(;o>n&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(s)for(;o>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(_(Object(e))?g.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(c)return c.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;i>n;)e[o++]=t[n++];if(i!=i)for(;void 0!==t[n];)e[o++]=t[n++];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,s=e.length,r=!i;s>o;o++)!t(e[o],o)!==r&&n.push(e[o]);return n},map:function(e,t,i){var n,o=0,s=e.length,r=[];if(_(e))for(;s>o;o++)null!=(n=t(e[o],o,i))&&r.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&r.push(n);return a.apply([],r)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(o=e[t],t=e,e=o),g.isFunction(e)?(i=r.call(arguments,2),n=function(){return e.apply(t||this,i.concat(r.call(arguments)))},n.guid=e.guid=e.guid||g.guid++,n):void 0},now:function(){return+new Date},support:p}),g.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var C=function(e){var t,i,n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_="sizzle"+1*new Date,C=e.document,w=0,T=0,E=re(),I=re(),x=re(),S=function(e,t){return e===t&&(d=!0),0},k=1<<31,D={}.hasOwnProperty,O=[],R=O.pop,P=O.push,L=O.push,A=O.slice,M=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",K=F.replace("w","w#"),V="\\["+N+"*("+F+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+K+"))|)"+N+"*\\]",H=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",j=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),z=new RegExp("^"+N+"*,"+N+"*"),W=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),G=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),$=new RegExp(H),q=new RegExp("^"+K+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ie=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ne=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},oe=function(){h()};try{L.apply(O=A.call(C.childNodes),C.childNodes),O[C.childNodes.length].nodeType}catch(e){L={apply:O.length?function(e,t){P.apply(e,A.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function se(e,t,n,o){var s,a,c,u,d,m,y,b,w,T;if((t?t.ownerDocument||t:C)!==p&&h(t),n=n||[],u=(t=t||p).nodeType,"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return n;if(!o&&g){if(11!==u&&(s=Q.exec(e)))if(c=s[1]){if(9===u){if(!(a=t.getElementById(c))||!a.parentNode)return n;if(a.id===c)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(c))&&v(t,a)&&a.id===c)return n.push(a),n}else{if(s[2])return L.apply(n,t.getElementsByTagName(e)),n;if((c=s[3])&&i.getElementsByClassName)return L.apply(n,t.getElementsByClassName(c)),n}if(i.qsa&&(!f||!f.test(e))){if(b=y=_,w=t,T=1!==u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(m=r(e),(y=t.getAttribute("id"))?b=y.replace(te,"\\$&"):t.setAttribute("id",b),b="[id='"+b+"'] ",d=m.length;d--;)m[d]=b+fe(m[d]);w=ee.test(e)&&me(t.parentNode)||t,T=m.join(",")}if(T)try{return L.apply(n,w.querySelectorAll(T)),n}catch(e){}finally{y||t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,n,o)}function re(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function ae(e){return e[_]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),o=e.length;o--;)n.attrHandle[i[o]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function pe(e){return ae((function(t){return t=+t,ae((function(i,n){for(var o,s=e([],i.length,t),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=se.support={},s=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=se.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:C;return r!==p&&9===r.nodeType&&r.documentElement?(p=r,m=r.documentElement,(o=r.defaultView)&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",oe,!1):o.attachEvent&&o.attachEvent("onunload",oe)),g=!s(r),i.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=le((function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=J.test(r.getElementsByClassName),i.getById=le((function(e){return m.appendChild(e).id=_,!r.getElementsByName||!r.getElementsByName(_).length})),i.getById?(n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(e){var t=e.replace(ie,ne);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(ie,ne);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(e,t){return g?t.getElementsByClassName(e):void 0},y=[],f=[],(i.qsa=J.test(r.querySelectorAll))&&(le((function(e){m.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+N+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+_+"-]").length||f.push("~="),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||f.push(".#.+[+~]")})),le((function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+N+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")}))),(i.matchesSelector=J.test(b=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&le((function(e){i.disconnectedMatch=b.call(e,"div"),b.call(e,"[s!='']:x"),y.push("!=",H)})),f=f.length&&new RegExp(f.join("|")),y=y.length&&new RegExp(y.join("|")),t=J.test(m.compareDocumentPosition),v=t||J.test(m.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===C&&v(C,e)?-1:t===r||t.ownerDocument===C&&v(C,t)?1:u?M(u,e)-M(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,n=0,o=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:u?M(u,e)-M(u,t):0;if(o===s)return ue(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?ue(a[n],l[n]):a[n]===C?-1:l[n]===C?1:0},r):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(G,"='$1']"),!(!i.matchesSelector||!g||y&&y.test(t)||f&&f.test(t)))try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var o=n.attrHandle[t.toLowerCase()],s=o&&D.call(n.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==s?s:i.attributes||!g?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],o=0,s=0;if(d=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(S),d){for(;t=e[s++];)t===e[s]&&(o=n.push(s));for(;o--;)e.splice(n[o],1)}return u=null,e},o=se.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},n=se.selectors={cacheLength:50,createPseudo:ae,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&$.test(i)&&(t=r(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var o=se.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(j," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,p,m,g=s!==r?"nextSibling":"previousSibling",f=t.parentNode,y=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(f){if(s){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[r?f.firstChild:f.lastChild],r&&b){for(p=(c=(u=f[_]||(f[_]={}))[e]||[])[0]===w&&c[1],h=c[0]===w&&c[2],d=p&&f.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||m.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[w,p,h];break}}else if(b&&(c=(t[_]||(t[_]={}))[e])&&c[0]===w)h=c[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||m.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(b&&((d[_]||(d[_]={}))[e]=[w,h]),d!==t)););return(h-=o)===n||h%n==0&&h/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[_]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ae((function(e,i){for(var n,s=o(e,t),r=s.length;r--;)e[n=M(e,s[r])]=!(i[n]=s[r])})):function(e){return o(e,0,i)}):o}},pseudos:{not:ae((function(e){var t=[],i=[],n=a(e.replace(U,"$1"));return n[_]?ae((function(e,t,i,o){for(var s,r=n(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))})):function(e,o,s){return t[0]=e,n(t,null,s,i),t[0]=null,!i.pop()}})),has:ae((function(e){return function(t){return se(e,t).length>0}})),contains:ae((function(e){return e=e.replace(ie,ne),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:ae((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(ie,ne).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===m},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,i){return[0>i?i+t:i]})),even:pe((function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e})),odd:pe((function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e})),lt:pe((function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e})),gt:pe((function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=he(t);function ge(){}function fe(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function ye(e,t,i){var n=t.dir,o=i&&"parentNode"===n,s=T++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,s)}:function(t,i,r){var a,l,c=[w,s];if(r){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if((a=(l=t[_]||(t[_]={}))[n])&&a[0]===w&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,r))return!0}}}function be(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function ve(e,t,i,n,o){for(var s,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!i||i(s,n,o))&&(r.push(s),c&&t.push(a));return r}function _e(e,t,i,n,o,s){return n&&!n[_]&&(n=_e(n)),o&&!o[_]&&(o=_e(o,s)),ae((function(s,r,a,l){var c,u,d,h=[],p=[],m=r.length,g=s||function(e,t,i){for(var n=0,o=t.length;o>n;n++)se(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),f=!e||!s&&t?g:ve(g,h,e,a,l),y=i?o||(s?e:m||n)?[]:r:f;if(i&&i(f,y,a,l),n)for(c=ve(y,p),n(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(f[p[u]]=d));if(s){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(f[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?M(s,d):h[u])>-1&&(s[c]=!(r[c]=d))}}else y=ve(y===r?y.splice(m,y.length):y),o?o(null,r,y,l):L.apply(r,y)}))}function Ce(e){for(var t,i,o,s=e.length,r=n.relative[e[0].type],a=r||n.relative[" "],l=r?1:0,u=ye((function(e){return e===t}),a,!0),d=ye((function(e){return M(t,e)>-1}),a,!0),h=[function(e,i,n){var o=!r&&(n||i!==c)||((t=i).nodeType?u(e,i,n):d(e,i,n));return t=null,o}];s>l;l++)if(i=n.relative[e[l].type])h=[ye(be(h),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[_]){for(o=++l;s>o&&!n.relative[e[o].type];o++);return _e(l>1&&be(h),l>1&&fe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),i,o>l&&Ce(e.slice(l,o)),s>o&&Ce(e=e.slice(o)),s>o&&fe(e))}h.push(i)}return be(h)}function we(e,t){var i=t.length>0,o=e.length>0,s=function(s,r,a,l,u){var d,h,m,g=0,f="0",y=s&&[],b=[],v=c,_=s||o&&n.find.TAG("*",u),C=w+=null==v?1:Math.random()||.1,T=_.length;for(u&&(c=r!==p&&r);f!==T&&null!=(d=_[f]);f++){if(o&&d){for(h=0;m=e[h++];)if(m(d,r,a)){l.push(d);break}u&&(w=C)}i&&((d=!m&&d)&&g--,s&&y.push(d))}if(g+=f,i&&f!==g){for(h=0;m=t[h++];)m(y,b,r,a);if(s){if(g>0)for(;f--;)y[f]||b[f]||(b[f]=R.call(l));b=ve(b)}L.apply(l,b),u&&!s&&b.length>0&&g+t.length>1&&se.uniqueSort(l)}return u&&(w=C,c=v),y};return i?ae(s):s}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,r=se.tokenize=function(e,t){var i,o,s,r,a,l,c,u=I[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=n.preFilter;a;){for(r in(!i||(o=z.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),i=!1,(o=W.exec(a))&&(i=o.shift(),s.push({value:i,type:o[0].replace(U," ")}),a=a.slice(i.length)),n.filter)!(o=Y[r].exec(a))||c[r]&&!(o=c[r](o))||(i=o.shift(),s.push({value:i,type:r,matches:o}),a=a.slice(i.length));if(!i)break}return t?a.length:a?se.error(e):I(e,l).slice(0)},a=se.compile=function(e,t){var i,n=[],o=[],s=x[e+" "];if(!s){for(t||(t=r(e)),i=t.length;i--;)(s=Ce(t[i]))[_]?n.push(s):o.push(s);(s=x(e,we(o,n))).selector=e}return s},l=se.select=function(e,t,o,s){var l,c,u,d,h,p="function"==typeof e&&e,m=!s&&r(e=p.selector||e);if(o=o||[],1===m.length){if((c=m[0]=m[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&i.getById&&9===t.nodeType&&g&&n.relative[c[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(ie,ne),t)||[])[0]))return o;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=Y.needsContext.test(e)?0:c.length;l--&&(u=c[l],!n.relative[d=u.type]);)if((h=n.find[d])&&(s=h(u.matches[0].replace(ie,ne),ee.test(c[0].type)&&me(t.parentNode)||t))){if(c.splice(l,1),!(e=s.length&&fe(c)))return L.apply(o,s),o;break}}return(p||a(e,m))(s,t,!g,o,ee.test(e)&&me(t.parentNode)||t),o},i.sortStable=_.split("").sort(S).join("")===_,i.detectDuplicates=!!d,h(),i.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ce("type|href|height|width",(function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ce("value",(function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ce(B,(function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),se}(n);g.find=C,g.expr=C.selectors,g.expr[":"]=g.expr.pseudos,g.unique=C.uniqueSort,g.text=C.getText,g.isXMLDoc=C.isXML,g.contains=C.contains;var w=g.expr.match.needsContext,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;function I(e,t,i){if(g.isFunction(t))return g.grep(e,(function(e,n){return!!t.call(e,n,e)!==i}));if(t.nodeType)return g.grep(e,(function(e){return e===t!==i}));if("string"==typeof t){if(E.test(t))return g.filter(t,e,i);t=g.filter(t,e)}return g.grep(e,(function(e){return g.inArray(e,t)>=0!==i}))}g.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?g.find.matchesSelector(n,e)?[n]:[]:g.find.matches(e,g.grep(t,(function(e){return 1===e.nodeType})))},g.fn.extend({find:function(e){var t,i=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(g(e).filter((function(){for(t=0;o>t;t++)if(g.contains(n[t],this))return!0})));for(t=0;o>t;t++)g.find(e,n[t],i);return(i=this.pushStack(o>1?g.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&w.test(e)?g(e):e||[],!1).length}});var x,S=n.document,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,D=g.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:k.exec(e))||!i[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof g?t[0]:t,g.merge(this,g.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),T.test(i[1])&&g.isPlainObject(t))for(i in t)g.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((n=S.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return x.find(e);this.length=1,this[0]=n}return this.context=S,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):g.isFunction(e)?void 0!==x.ready?x.ready(e):e(g):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),g.makeArray(e,this))};D.prototype=g.fn,x=g(S);var O=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}g.extend({dir:function(e,t,i){for(var n=[],o=e[t];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!g(o).is(i));)1===o.nodeType&&n.push(o),o=o[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),g.fn.extend({has:function(e){var t,i=g(e,this),n=i.length;return this.filter((function(){for(t=0;n>t;t++)if(g.contains(this,i[t]))return!0}))},closest:function(e,t){for(var i,n=0,o=this.length,s=[],r=w.test(e)||"string"!=typeof e?g(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&g.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?g.unique(s):s)},index:function(e){return e?"string"==typeof e?g.inArray(this[0],g(e)):g.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(g.unique(g.merge(this.get(),g(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),g.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return g.dir(e,"parentNode")},parentsUntil:function(e,t,i){return g.dir(e,"parentNode",i)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return g.dir(e,"nextSibling")},prevAll:function(e){return g.dir(e,"previousSibling")},nextUntil:function(e,t,i){return g.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return g.dir(e,"previousSibling",i)},siblings:function(e){return g.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return g.sibling(e.firstChild)},contents:function(e){return g.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:g.merge([],e.childNodes)}},(function(e,t){g.fn[e]=function(i,n){var o=g.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=g.filter(n,o)),this.length>1&&(R[e]||(o=g.unique(o)),O.test(e)&&(o=o.reverse())),this.pushStack(o)}}));var L,A=/\S+/g,M={};function B(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",N,!1),n.removeEventListener("load",N,!1)):(S.detachEvent("onreadystatechange",N),n.detachEvent("onload",N))}function N(){(S.addEventListener||"load"===event.type||"complete"===S.readyState)&&(B(),g.ready())}g.Callbacks=function(e){e="string"==typeof e?M[e]||function(e){var t=M[e]={};return g.each(e.match(A)||[],(function(e,i){t[i]=!0})),t}(e):g.extend({},e);var t,i,n,o,s,r,a=[],l=!e.once&&[],c=function(d){for(i=e.memory&&d,n=!0,s=r||0,r=0,o=a.length,t=!0;a&&o>s;s++)if(!1===a[s].apply(d[0],d[1])&&e.stopOnFalse){i=!1;break}t=!1,a&&(l?l.length&&c(l.shift()):i?a=[]:u.disable())},u={add:function(){if(a){var n=a.length;!function t(i){g.each(i,(function(i,n){var o=g.type(n);"function"===o?e.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==o&&t(n)}))}(arguments),t?o=a.length:i&&(r=n,c(i))}return this},remove:function(){return a&&g.each(arguments,(function(e,i){for(var n;(n=g.inArray(i,a,n))>-1;)a.splice(n,1),t&&(o>=n&&o--,s>=n&&s--)})),this},has:function(e){return e?g.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=l=i=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,i||u.disable(),this},locked:function(){return!l},fireWith:function(e,i){return!a||n&&!l||(i=[e,(i=i||[]).slice?i.slice():i],t?l.push(i):c(i)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},g.extend({Deferred:function(e){var t=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return g.Deferred((function(i){g.each(t,(function(t,s){var r=g.isFunction(e[t])&&e[t];o[s[1]]((function(){var e=r&&r.apply(this,arguments);e&&g.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?g.extend(e,n):n}},o={};return n.pipe=n.then,g.each(t,(function(e,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add((function(){i=a}),t[1^e][2].disable,t[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith})),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,s=r.call(arguments),a=s.length,l=1!==a||e&&g.isFunction(e.promise)?a:0,c=1===l?e:g.Deferred(),u=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?r.call(arguments):o,n===t?c.notifyWith(i,n):--l||c.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);a>o;o++)s[o]&&g.isFunction(s[o].promise)?s[o].promise().done(u(o,n,s)).fail(c.reject).progress(u(o,i,t)):--l;return l||c.resolveWith(n,s),c.promise()}}),g.fn.ready=function(e){return g.ready.promise().done(e),this},g.extend({isReady:!1,readyWait:1,holdReady:function(e){e?g.readyWait++:g.ready(!0)},ready:function(e){if(!0===e?!--g.readyWait:!g.isReady){if(!S.body)return setTimeout(g.ready);g.isReady=!0,!0!==e&&--g.readyWait>0||(L.resolveWith(S,[g]),g.fn.triggerHandler&&(g(S).triggerHandler("ready"),g(S).off("ready")))}}}),g.ready.promise=function(e){if(!L)if(L=g.Deferred(),"complete"===S.readyState)setTimeout(g.ready);else if(S.addEventListener)S.addEventListener("DOMContentLoaded",N,!1),n.addEventListener("load",N,!1);else{S.attachEvent("onreadystatechange",N),n.attachEvent("onload",N);var t=!1;try{t=null==n.frameElement&&S.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!g.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}B(),g.ready()}}()}return L.promise(e)};var F,K="undefined";for(F in g(p))break;p.ownLast="0"!==F,p.inlineBlockNeedsLayout=!1,g((function(){var e,t,i,n;(i=S.getElementsByTagName("body")[0])&&i.style&&(t=S.createElement("div"),(n=S.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==K&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",p.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))})),function(){var e=S.createElement("div");if(null==p.deleteExpando){p.deleteExpando=!0;try{delete e.test}catch(e){p.deleteExpando=!1}}e=null}(),g.acceptData=function(e){var t=g.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,H=/([A-Z])/g;function j(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(H,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:V.test(i)?g.parseJSON(i):i)}catch(e){}g.data(e,t,i)}else i=void 0}return i}function U(e){var t;for(t in e)if(("data"!==t||!g.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function z(e,t,i,n){if(g.acceptData(e)){var o,r,a=g.expando,l=e.nodeType,c=l?g.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(n||c[u].data)||void 0!==i||"string"!=typeof t)return u||(u=l?e[a]=s.pop()||g.guid++:a),c[u]||(c[u]=l?{}:{toJSON:g.noop}),("object"==typeof t||"function"==typeof t)&&(n?c[u]=g.extend(c[u],t):c[u].data=g.extend(c[u].data,t)),r=c[u],n||(r.data||(r.data={}),r=r.data),void 0!==i&&(r[g.camelCase(t)]=i),"string"==typeof t?null==(o=r[t])&&(o=r[g.camelCase(t)]):o=r,o}}function W(e,t,i){if(g.acceptData(e)){var n,o,s=e.nodeType,r=s?g.cache:e,a=s?e[g.expando]:g.expando;if(r[a]){if(t&&(n=i?r[a]:r[a].data)){o=(t=g.isArray(t)?t.concat(g.map(t,g.camelCase)):t in n||(t=g.camelCase(t))in n?[t]:t.split(" ")).length;for(;o--;)delete n[t[o]];if(i?!U(n):!g.isEmptyObject(n))return}(i||(delete r[a].data,U(r[a])))&&(s?g.cleanData([e],!0):p.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}g.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?g.cache[e[g.expando]]:e[g.expando])&&!U(e)},data:function(e,t,i){return z(e,t,i)},removeData:function(e,t){return W(e,t)},_data:function(e,t,i){return z(e,t,i,!0)},_removeData:function(e,t){return W(e,t,!0)}}),g.fn.extend({data:function(e,t){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===e){if(this.length&&(o=g.data(s),1===s.nodeType&&!g._data(s,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&j(s,n=g.camelCase(n.slice(5)),o[n]);g._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each((function(){g.data(this,e)})):arguments.length>1?this.each((function(){g.data(this,e,t)})):s?j(s,e,g.data(s,e)):void 0},removeData:function(e){return this.each((function(){g.removeData(this,e)}))}}),g.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=g._data(e,t),i&&(!n||g.isArray(i)?n=g._data(e,t,g.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=g.queue(e,t),n=i.length,o=i.shift(),s=g._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete s.stop,o.call(e,(function(){g.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return g._data(e,i)||g._data(e,i,{empty:g.Callbacks("once memory").add((function(){g._removeData(e,t+"queue"),g._removeData(e,i)}))})}}),g.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?g.queue(this[0],e):void 0===t?this:this.each((function(){var i=g.queue(this,e,t);g._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&g.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){g.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=g.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(i=g._data(s[r],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$=["Top","Right","Bottom","Left"],q=function(e,t){return e=t||e,"none"===g.css(e,"display")||!g.contains(e.ownerDocument,e)},Y=g.access=function(e,t,i,n,o,s,r){var a=0,l=e.length,c=null==i;if("object"===g.type(i))for(a in o=!0,i)g.access(e,t,a,i[a],!0,s,r);else if(void 0!==n&&(o=!0,g.isFunction(n)||(r=!0),c&&(r?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(g(e),i)})),t))for(;l>a;a++)t(e[a],i,r?n:n.call(e[a],a,t(e[a],i)));return o?e:c?t.call(e):l?t(e[0],i):s},Z=/^(?:checkbox|radio)$/i;!function(){var e=S.createElement("input"),t=S.createElement("div"),i=S.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",p.leadingWhitespace=3===t.firstChild.nodeType,p.tbody=!t.getElementsByTagName("tbody").length,p.htmlSerialize=!!t.getElementsByTagName("link").length,p.html5Clone="<:nav></:nav>"!==S.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),p.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",p.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,p.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",(function(){p.noCloneEvent=!1})),t.cloneNode(!0).click()),null==p.deleteExpando){p.deleteExpando=!0;try{delete t.test}catch(e){p.deleteExpando=!1}}}(),function(){var e,t,i=S.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(p[e+"Bubbles"]=t in n)||(i.setAttribute(t,"t"),p[e+"Bubbles"]=!1===i.attributes[t].expando);i=null}();var X=/^(?:input|select|textarea)$/i,J=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,ee=/^(?:focusinfocus|focusoutblur)$/,te=/^([^.]*)(?:\.(.+)|)$/;function ie(){return!0}function ne(){return!1}function oe(){try{return S.activeElement}catch(e){}}function se(e){var t=re.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}g.event={global:{},add:function(e,t,i,n,o){var s,r,a,l,c,u,d,h,p,m,f,y=g._data(e);if(y){for(i.handler&&(i=(l=i).handler,o=l.selector),i.guid||(i.guid=g.guid++),(r=y.events)||(r=y.events={}),(u=y.handle)||(u=y.handle=function(e){return typeof g===K||e&&g.event.triggered===e.type?void 0:g.event.dispatch.apply(u.elem,arguments)},u.elem=e),a=(t=(t||"").match(A)||[""]).length;a--;)p=f=(s=te.exec(t[a])||[])[1],m=(s[2]||"").split(".").sort(),p&&(c=g.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=g.event.special[p]||{},d=g.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&g.expr.match.needsContext.test(o),namespace:m.join(".")},l),(h=r[p])||((h=r[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,m,u)||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),g.event.global[p]=!0);e=null}},remove:function(e,t,i,n,o){var s,r,a,l,c,u,d,h,p,m,f,y=g.hasData(e)&&g._data(e);if(y&&(u=y.events)){for(c=(t=(t||"").match(A)||[""]).length;c--;)if(p=f=(a=te.exec(t[c])||[])[1],m=(a[2]||"").split(".").sort(),p){for(d=g.event.special[p]||{},h=u[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)r=h[s],!o&&f!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(h.splice(s,1),r.selector&&h.delegateCount--,d.remove&&d.remove.call(e,r));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,m,y.handle)||g.removeEvent(e,p,y.handle),delete u[p])}else for(p in u)g.event.remove(e,p+t[c],i,n,!0);g.isEmptyObject(u)&&(delete y.handle,g._removeData(e,"events"))}},trigger:function(e,t,i,o){var s,r,a,l,c,u,d,p=[i||S],m=h.call(e,"type")?e.type:e,f=h.call(e,"namespace")?e.namespace.split("."):[];if(a=u=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!ee.test(m+g.event.triggered)&&(m.indexOf(".")>=0&&(f=m.split("."),m=f.shift(),f.sort()),r=m.indexOf(":")<0&&"on"+m,(e=e[g.expando]?e:new g.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:g.makeArray(t,[e]),c=g.event.special[m]||{},o||!c.trigger||!1!==c.trigger.apply(i,t))){if(!o&&!c.noBubble&&!g.isWindow(i)){for(l=c.delegateType||m,ee.test(l+m)||(a=a.parentNode);a;a=a.parentNode)p.push(a),u=a;u===(i.ownerDocument||S)&&p.push(u.defaultView||u.parentWindow||n)}for(d=0;(a=p[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||m,(s=(g._data(a,"events")||{})[e.type]&&g._data(a,"handle"))&&s.apply(a,t),(s=r&&a[r])&&s.apply&&g.acceptData(a)&&(e.result=s.apply(a,t),!1===e.result&&e.preventDefault());if(e.type=m,!o&&!e.isDefaultPrevented()&&(!c._default||!1===c._default.apply(p.pop(),t))&&g.acceptData(i)&&r&&i[m]&&!g.isWindow(i)){(u=i[r])&&(i[r]=null),g.event.triggered=m;try{i[m]()}catch(e){}g.event.triggered=void 0,u&&(i[r]=u)}return e.result}},dispatch:function(e){e=g.event.fix(e);var t,i,n,o,s,a=[],l=r.call(arguments),c=(g._data(this,"events")||{})[e.type]||[],u=g.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=g.event.handlers.call(this,e,c),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,s=0;(n=o.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,void 0!==(i=((g.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,s,r=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(o=[],s=0;a>s;s++)void 0===o[i=(n=t[s]).selector+" "]&&(o[i]=n.needsContext?g(i,this).index(l)>=0:g.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&r.push({elem:l,handlers:o})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},fix:function(e){if(e[g.expando])return e;var t,i,n,o=e.type,s=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Q.test(o)?this.mouseHooks:J.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new g.Event(s),t=n.length;t--;)e[i=n[t]]=s[i];return e.target||(e.target=s.srcElement||S),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,s=t.button,r=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=(n=e.target.ownerDocument||S).documentElement,i=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?t.toElement:r),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==oe()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===oe()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return g.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return g.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=g.extend(new g.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?g.event.trigger(o,null,t):g.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},g.removeEvent=S.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===K&&(e[n]=null),e.detachEvent(n,i))},g.Event=function(e,t){return this instanceof g.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ie:ne):this.type=e,t&&g.extend(this,t),this.timeStamp=e&&e.timeStamp||g.now(),void(this[g.expando]=!0)):new g.Event(e,t)},g.Event.prototype={isDefaultPrevented:ne,isPropagationStopped:ne,isImmediatePropagationStopped:ne,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ie,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ie,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ie,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){g.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,s=e.handleObj;return(!o||o!==n&&!g.contains(n,o))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}})),p.submitBubbles||(g.event.special.submit={setup:function(){return!g.nodeName(this,"form")&&void g.event.add(this,"click._submit keypress._submit",(function(e){var t=e.target,i=g.nodeName(t,"input")||g.nodeName(t,"button")?t.form:void 0;i&&!g._data(i,"submitBubbles")&&(g.event.add(i,"submit._submit",(function(e){e._submit_bubble=!0})),g._data(i,"submitBubbles",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&g.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!g.nodeName(this,"form")&&void g.event.remove(this,"._submit")}}),p.changeBubbles||(g.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(g.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),g.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),g.event.simulate("change",this,e,!0)}))),!1):void g.event.add(this,"beforeactivate._change",(function(e){var t=e.target;X.test(t.nodeName)&&!g._data(t,"changeBubbles")&&(g.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||g.event.simulate("change",this.parentNode,e,!0)})),g._data(t,"changeBubbles",!0))}))},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return g.event.remove(this,"._change"),!X.test(this.nodeName)}}),p.focusinBubbles||g.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){g.event.simulate(t,e.target,g.event.fix(e),!0)};g.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=g._data(n,t);o||n.addEventListener(e,i,!0),g._data(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=g._data(n,t)-1;o?g._data(n,t,o):(n.removeEventListener(e,i,!0),g._removeData(n,t))}}})),g.fn.extend({on:function(e,t,i,n,o){var s,r;if("object"==typeof e){for(s in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(s,t,i,e[s],o);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=ne;else if(!n)return this;return 1===o&&(r=n,n=function(e){return g().off(e),r.apply(this,arguments)},n.guid=r.guid||(r.guid=g.guid++)),this.each((function(){g.event.add(this,e,n,i,t)}))},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,g(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(!1===t||"function"==typeof t)&&(i=t,t=void 0),!1===i&&(i=ne),this.each((function(){g.event.remove(this,e,i,t)}))},trigger:function(e,t){return this.each((function(){g.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];return i?g.event.trigger(e,t,i,!0):void 0}});var re="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ae=/ jQuery\d+="(?:null|\d+)"/g,le=new RegExp("<(?:"+re+")[\\s/>]","i"),ce=/^\s+/,ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,de=/<([\w:]+)/,he=/<tbody/i,pe=/<|&#?\w+;/,me=/<(?:script|style|link)/i,ge=/checked\s*(?:[^=]|=\s*.checked.)/i,fe=/^$|\/(?:java|ecma)script/i,ye=/^true\/(.*)/,be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ve={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:p.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_e=se(S).appendChild(S.createElement("div"));function Ce(e,t){var i,n,o=0,s=typeof e.getElementsByTagName!==K?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==K?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],i=e.childNodes||e;null!=(n=i[o]);o++)!t||g.nodeName(n,t)?s.push(n):g.merge(s,Ce(n,t));return void 0===t||t&&g.nodeName(e,t)?g.merge([e],s):s}function we(e){Z.test(e.type)&&(e.defaultChecked=e.checked)}function Te(e,t){return g.nodeName(e,"table")&&g.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ee(e){return e.type=(null!==g.find.attr(e,"type"))+"/"+e.type,e}function Ie(e){var t=ye.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function xe(e,t){for(var i,n=0;null!=(i=e[n]);n++)g._data(i,"globalEval",!t||g._data(t[n],"globalEval"))}function Se(e,t){if(1===t.nodeType&&g.hasData(e)){var i,n,o,s=g._data(e),r=g._data(t,s),a=s.events;if(a)for(i in delete r.handle,r.events={},a)for(n=0,o=a[i].length;o>n;n++)g.event.add(t,i,a[i][n]);r.data&&(r.data=g.extend({},r.data))}}function ke(e,t){var i,n,o;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!p.noCloneEvent&&t[g.expando]){for(n in(o=g._data(t)).events)g.removeEvent(t,n,o.handle);t.removeAttribute(g.expando)}"script"===i&&t.text!==e.text?(Ee(t).text=e.text,Ie(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),p.html5Clone&&e.innerHTML&&!g.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Z.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,g.extend({clone:function(e,t,i){var n,o,s,r,a,l=g.contains(e.ownerDocument,e);if(p.html5Clone||g.isXMLDoc(e)||!le.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(_e.innerHTML=e.outerHTML,_e.removeChild(s=_e.firstChild)),!(p.noCloneEvent&&p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||g.isXMLDoc(e)))for(n=Ce(s),a=Ce(e),r=0;null!=(o=a[r]);++r)n[r]&&ke(o,n[r]);if(t)if(i)for(a=a||Ce(e),n=n||Ce(s),r=0;null!=(o=a[r]);r++)Se(o,n[r]);else Se(e,s);return(n=Ce(s,"script")).length>0&&xe(n,!l&&Ce(e,"script")),n=a=o=null,s},buildFragment:function(e,t,i,n){for(var o,s,r,a,l,c,u,d=e.length,h=se(t),m=[],f=0;d>f;f++)if((s=e[f])||0===s)if("object"===g.type(s))g.merge(m,s.nodeType?[s]:s);else if(pe.test(s)){for(a=a||h.appendChild(t.createElement("div")),l=(de.exec(s)||["",""])[1].toLowerCase(),u=ve[l]||ve._default,a.innerHTML=u[1]+s.replace(ue,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!p.leadingWhitespace&&ce.test(s)&&m.push(t.createTextNode(ce.exec(s)[0])),!p.tbody)for(o=(s="table"!==l||he.test(s)?"<table>"!==u[1]||he.test(s)?0:a:a.firstChild)&&s.childNodes.length;o--;)g.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(g.merge(m,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else m.push(t.createTextNode(s));for(a&&h.removeChild(a),p.appendChecked||g.grep(Ce(m,"input"),we),f=0;s=m[f++];)if((!n||-1===g.inArray(s,n))&&(r=g.contains(s.ownerDocument,s),a=Ce(h.appendChild(s),"script"),r&&xe(a),i))for(o=0;s=a[o++];)fe.test(s.type||"")&&i.push(s);return a=null,h},cleanData:function(e,t){for(var i,n,o,r,a=0,l=g.expando,c=g.cache,u=p.deleteExpando,d=g.event.special;null!=(i=e[a]);a++)if((t||g.acceptData(i))&&(r=(o=i[l])&&c[o])){if(r.events)for(n in r.events)d[n]?g.event.remove(i,n):g.removeEvent(i,n,r.handle);c[o]&&(delete c[o],u?delete i[l]:typeof i.removeAttribute!==K?i.removeAttribute(l):i[l]=null,s.push(o))}}}),g.fn.extend({text:function(e){return Y(this,(function(e){return void 0===e?g.text(this):this.empty().append((this[0]&&this[0].ownerDocument||S).createTextNode(e))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Te(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Te(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var i,n=e?g.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||g.cleanData(Ce(i)),i.parentNode&&(t&&g.contains(i.ownerDocument,i)&&xe(Ce(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&g.cleanData(Ce(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&g.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return g.clone(this,e,t)}))},html:function(e){return Y(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ae,""):void 0;if(!("string"!=typeof e||me.test(e)||!p.htmlSerialize&&le.test(e)||!p.leadingWhitespace&&ce.test(e)||ve[(de.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ue,"<$1></$2>");try{for(;n>i;i++)1===(t=this[i]||{}).nodeType&&(g.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,g.cleanData(Ce(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var i,n,o,s,r,l,c=0,u=this.length,d=this,h=u-1,m=e[0],f=g.isFunction(m);if(f||u>1&&"string"==typeof m&&!p.checkClone&&ge.test(m))return this.each((function(i){var n=d.eq(i);f&&(e[0]=m.call(this,i,n.html())),n.domManip(e,t)}));if(u&&(i=(l=g.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=i),i)){for(o=(s=g.map(Ce(l,"script"),Ee)).length;u>c;c++)n=l,c!==h&&(n=g.clone(n,!0,!0),o&&g.merge(s,Ce(n,"script"))),t.call(this[c],n,c);if(o)for(r=s[s.length-1].ownerDocument,g.map(s,Ie),c=0;o>c;c++)n=s[c],fe.test(n.type||"")&&!g._data(n,"globalEval")&&g.contains(r,n)&&(n.src?g._evalUrl&&g._evalUrl(n.src):g.globalEval((n.text||n.textContent||n.innerHTML||"").replace(be,"")));l=i=null}return this}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){g.fn[e]=function(e){for(var i,n=0,o=[],s=g(e),r=s.length-1;r>=n;n++)i=n===r?this:this.clone(!0),g(s[n])[t](i),l.apply(o,i.get());return this.pushStack(o)}}));var De,Oe={};function Re(e,t){var i,o=g(t.createElement(e)).appendTo(t.body),s=n.getDefaultComputedStyle&&(i=n.getDefaultComputedStyle(o[0]))?i.display:g.css(o[0],"display");return o.detach(),s}function Pe(e){var t=S,i=Oe[e];return i||("none"!==(i=Re(e,t))&&i||((t=((De=(De||g("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||De[0].contentDocument).document).write(),t.close(),i=Re(e,t),De.detach()),Oe[e]=i),i}!function(){var e;p.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(i=S.getElementsByTagName("body")[0])&&i.style?(t=S.createElement("div"),(n=S.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==K&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(S.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0);var t,i,n}}();var Le,Ae,Me=/^margin/,Be=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),Ne=/^(top|right|bottom|left)$/;function Fe(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}n.getComputedStyle?(Le=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):n.getComputedStyle(e,null)},Ae=function(e,t,i){var n,o,s,r,a=e.style;return r=(i=i||Le(e))?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==r||g.contains(e.ownerDocument,e)||(r=g.style(e,t)),Be.test(r)&&Me.test(t)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0===r?r:r+""}):S.documentElement.currentStyle&&(Le=function(e){return e.currentStyle},Ae=function(e,t,i){var n,o,s,r,a=e.style;return null==(r=(i=i||Le(e))?i[t]:void 0)&&a&&a[t]&&(r=a[t]),Be.test(r)&&!Ne.test(t)&&(n=a.left,(s=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),a.left="fontSize"===t?"1em":r,r=a.pixelLeft+"px",a.left=n,s&&(o.left=s)),void 0===r?r:r+""||"auto"}),function(){var e,t,i,o,s,r,a;if((e=S.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=(i=e.getElementsByTagName("a")[0])&&i.style){function l(){var e,t,i,l;(t=S.getElementsByTagName("body")[0])&&t.style&&(e=S.createElement("div"),(i=S.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,a=!0,n.getComputedStyle&&(o="1%"!==(n.getComputedStyle(e,null)||{}).top,s="4px"===(n.getComputedStyle(e,null)||{width:"4px"}).width,(l=e.appendChild(S.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",e.style.width="1px",a=!parseFloat((n.getComputedStyle(l,null)||{}).marginRight),e.removeChild(l)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(r=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",r=0===l[0].offsetHeight),t.removeChild(i))}t.cssText="float:left;opacity:.5",p.opacity="0.5"===t.opacity,p.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===e.style.backgroundClip,p.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,g.extend(p,{reliableHiddenOffsets:function(){return null==r&&l(),r},boxSizingReliable:function(){return null==s&&l(),s},pixelPosition:function(){return null==o&&l(),o},reliableMarginRight:function(){return null==a&&l(),a}})}}(),g.swap=function(e,t,i,n){var o,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in o=i.apply(e,n||[]),t)e.style[s]=r[s];return o};var Ke=/alpha\([^)]*\)/i,Ve=/opacity\s*=\s*([^)]*)/,He=/^(none|table(?!-c[ea]).+)/,je=new RegExp("^("+G+")(.*)$","i"),Ue=new RegExp("^([+-])=("+G+")","i"),ze={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];function $e(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=Ge.length;o--;)if((t=Ge[o]+i)in e)return t;return n}function qe(e,t){for(var i,n,o,s=[],r=0,a=e.length;a>r;r++)(n=e[r]).style&&(s[r]=g._data(n,"olddisplay"),i=n.style.display,t?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&q(n)&&(s[r]=g._data(n,"olddisplay",Pe(n.nodeName)))):(o=q(n),(i&&"none"!==i||!o)&&g._data(n,"olddisplay",o?i:g.css(n,"display"))));for(r=0;a>r;r++)(n=e[r]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[r]||"":"none"));return e}function Ye(e,t,i){var n=je.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function Ze(e,t,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=g.css(e,i+$[s],!0,o)),n?("content"===i&&(r-=g.css(e,"padding"+$[s],!0,o)),"margin"!==i&&(r-=g.css(e,"border"+$[s]+"Width",!0,o))):(r+=g.css(e,"padding"+$[s],!0,o),"padding"!==i&&(r+=g.css(e,"border"+$[s]+"Width",!0,o)));return r}function Xe(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,s=Le(e),r=p.boxSizing&&"border-box"===g.css(e,"boxSizing",!1,s);if(0>=o||null==o){if((0>(o=Ae(e,t,s))||null==o)&&(o=e.style[t]),Be.test(o))return o;n=r&&(p.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+Ze(e,t,i||(r?"border":"content"),n,s)+"px"}function Je(e,t,i,n,o){return new Je.prototype.init(e,t,i,n,o)}g.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ae(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:p.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,r,a=g.camelCase(t),l=e.style;if(t=g.cssProps[a]||(g.cssProps[a]=$e(l,a)),r=g.cssHooks[t]||g.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(e,!1,n))?o:l[t];if("string"==(s=typeof i)&&(o=Ue.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(g.css(e,t)),s="number"),null!=i&&i==i&&("number"!==s||g.cssNumber[a]||(i+="px"),p.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!r||!("set"in r)||void 0!==(i=r.set(e,i,n))))try{l[t]=i}catch(e){}}},css:function(e,t,i,n){var o,s,r,a=g.camelCase(t);return t=g.cssProps[a]||(g.cssProps[a]=$e(e.style,a)),(r=g.cssHooks[t]||g.cssHooks[a])&&"get"in r&&(s=r.get(e,!0,i)),void 0===s&&(s=Ae(e,t,n)),"normal"===s&&t in We&&(s=We[t]),""===i||i?(o=parseFloat(s),!0===i||g.isNumeric(o)?o||0:s):s}}),g.each(["height","width"],(function(e,t){g.cssHooks[t]={get:function(e,i,n){return i?He.test(g.css(e,"display"))&&0===e.offsetWidth?g.swap(e,ze,(function(){return Xe(e,t,n)})):Xe(e,t,n):void 0},set:function(e,i,n){var o=n&&Le(e);return Ye(0,i,n?Ze(e,t,n,p.boxSizing&&"border-box"===g.css(e,"boxSizing",!1,o),o):0)}}})),p.opacity||(g.cssHooks.opacity={get:function(e,t){return Ve.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=g.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===g.trim(s.replace(Ke,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=Ke.test(s)?s.replace(Ke,o):s+" "+o)}}),g.cssHooks.marginRight=Fe(p.reliableMarginRight,(function(e,t){return t?g.swap(e,{display:"inline-block"},Ae,[e,"marginRight"]):void 0})),g.each({margin:"",padding:"",border:"Width"},(function(e,t){g.cssHooks[e+t]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+$[n]+t]=s[n]||s[n-2]||s[0];return o}},Me.test(e)||(g.cssHooks[e+t].set=Ye)})),g.fn.extend({css:function(e,t){return Y(this,(function(e,t,i){var n,o,s={},r=0;if(g.isArray(t)){for(n=Le(e),o=t.length;o>r;r++)s[t[r]]=g.css(e,t[r],!1,n);return s}return void 0!==i?g.style(e,t,i):g.css(e,t)}),e,t,arguments.length>1)},show:function(){return qe(this,!0)},hide:function(){return qe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){q(this)?g(this).show():g(this).hide()}))}}),g.Tween=Je,Je.prototype={constructor:Je,init:function(e,t,i,n,o,s){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(g.cssNumber[i]?"":"px")},cur:function(){var e=Je.propHooks[this.prop];return e&&e.get?e.get(this):Je.propHooks._default.get(this)},run:function(e){var t,i=Je.propHooks[this.prop];return this.options.duration?this.pos=t=g.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Je.propHooks._default.set(this),this}},Je.prototype.init.prototype=Je.prototype,Je.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=g.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){g.fx.step[e.prop]?g.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[g.cssProps[e.prop]]||g.cssHooks[e.prop])?g.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Je.propHooks.scrollTop=Je.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},g.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},g.fx=Je.prototype.init,g.fx.step={};var Qe,et,tt=/^(?:toggle|show|hide)$/,it=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),nt=/queueHooks$/,ot=[function(e,t,i){var n,o,s,r,a,l,c,u=this,d={},h=e.style,m=e.nodeType&&q(e),f=g._data(e,"fxshow");for(n in i.queue||(null==(a=g._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always((function(){u.always((function(){a.unqueued--,g.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=g.css(e,"display"))?g._data(e,"olddisplay")||Pe(e.nodeName):c)&&"none"===g.css(e,"float")&&(p.inlineBlockNeedsLayout&&"inline"!==Pe(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",p.shrinkWrapBlocks()||u.always((function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}))),t)if(o=t[n],tt.exec(o)){if(delete t[n],s=s||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;m=!0}d[n]=f&&f[n]||g.style(e,n)}else c=void 0;if(g.isEmptyObject(d))"inline"===("none"===c?Pe(e.nodeName):c)&&(h.display=c);else for(n in f?"hidden"in f&&(m=f.hidden):f=g._data(e,"fxshow",{}),s&&(f.hidden=!m),m?g(e).show():u.done((function(){g(e).hide()})),u.done((function(){var t;for(t in g._removeData(e,"fxshow"),d)g.style(e,t,d[t])})),d)r=lt(m?f[n]:0,n,u),n in f||(f[n]=r.start,m&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}],st={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=it.exec(t),s=o&&o[3]||(g.cssNumber[e]?"":"px"),r=(g.cssNumber[e]||"px"!==s&&+n)&&it.exec(g.css(i.elem,e)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do{r/=a=a||".5",g.style(i.elem,e,r+s)}while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};function rt(){return setTimeout((function(){Qe=void 0})),Qe=g.now()}function at(e,t){var i,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n["margin"+(i=$[o])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function lt(e,t,i){for(var n,o=(st[t]||[]).concat(st["*"]),s=0,r=o.length;r>s;s++)if(n=o[s].call(i,t,e))return n}function ct(e,t,i){var n,o,s=0,r=ot.length,a=g.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=Qe||rt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),s=0,r=c.tweens.length;r>s;s++)c.tweens[s].run(n);return a.notifyWith(e,[c,n,i]),1>n&&r?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:g.extend({},t),opts:g.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Qe||rt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=g.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var i,n,o,s,r;for(i in e)if(o=t[n=g.camelCase(i)],s=e[i],g.isArray(s)&&(o=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(r=g.cssHooks[n])&&"expand"in r)for(i in s=r.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=o);else t[n]=o}(u,c.opts.specialEasing);r>s;s++)if(n=ot[s].call(c,e,u,c.opts))return n;return g.map(u,lt,c),g.isFunction(c.opts.start)&&c.opts.start.call(e,c),g.fx.timer(g.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}g.Animation=g.extend(ct,{tweener:function(e,t){g.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],st[i]=st[i]||[],st[i].unshift(t)},prefilter:function(e,t){t?ot.unshift(e):ot.push(e)}}),g.speed=function(e,t,i){var n=e&&"object"==typeof e?g.extend({},e):{complete:i||!i&&t||g.isFunction(e)&&e,duration:e,easing:i&&t||t&&!g.isFunction(t)&&t};return n.duration=g.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in g.fx.speeds?g.fx.speeds[n.duration]:g.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){g.isFunction(n.old)&&n.old.call(this),n.queue&&g.dequeue(this,n.queue)},n},g.fn.extend({fadeTo:function(e,t,i,n){return this.filter(q).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=g.isEmptyObject(e),s=g.speed(t,i,n),r=function(){var t=ct(this,g.extend({},e),s);(o||g._data(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",s=g.timers,r=g._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&nt.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=e&&s[o].queue!==e||(s[o].anim.stop(i),t=!1,s.splice(o,1));(t||!i)&&g.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=g._data(this),n=i[e+"queue"],o=i[e+"queueHooks"],s=g.timers,r=n?n.length:0;for(i.finish=!0,g.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),g.each(["toggle","show","hide"],(function(e,t){var i=g.fn[t];g.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(at(t,!0),e,n,o)}})),g.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){g.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),g.timers=[],g.fx.tick=function(){var e,t=g.timers,i=0;for(Qe=g.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||g.fx.stop(),Qe=void 0},g.fx.timer=function(e){g.timers.push(e),e()?g.fx.start():g.timers.pop()},g.fx.interval=13,g.fx.start=function(){et||(et=setInterval(g.fx.tick,g.fx.interval))},g.fx.stop=function(){clearInterval(et),et=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(e,t){return e=g.fx&&g.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}}))},function(){var e,t,i,n,o;(t=S.createElement("div")).setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],o=(i=S.createElement("select")).appendChild(S.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",p.getSetAttribute="t"!==t.className,p.style=/top/.test(n.getAttribute("style")),p.hrefNormalized="/a"===n.getAttribute("href"),p.checkOn=!!e.value,p.optSelected=o.selected,p.enctype=!!S.createElement("form").enctype,i.disabled=!0,p.optDisabled=!o.disabled,(e=S.createElement("input")).setAttribute("value",""),p.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),p.radioValue="t"===e.value}();var ut=/\r/g;g.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=g.isFunction(e),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,g(this).val()):e)?o="":"number"==typeof o?o+="":g.isArray(o)&&(o=g.map(o,(function(e){return null==e?"":e+""}))),(t=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=g.valHooks[o.type]||g.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(ut,""):null==i?"":i:void 0}}),g.extend({valHooks:{option:{get:function(e){var t=g.find.attr(e,"value");return null!=t?t:g.trim(g.text(e))}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,s="select-one"===e.type||0>o,r=s?null:[],a=s?o+1:n.length,l=0>o?a:s?o:0;a>l;l++)if(!(!(i=n[l]).selected&&l!==o||(p.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&g.nodeName(i.parentNode,"optgroup"))){if(t=g(i).val(),s)return t;r.push(t)}return r},set:function(e,t){for(var i,n,o=e.options,s=g.makeArray(t),r=o.length;r--;)if(n=o[r],g.inArray(g.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(e){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),o}}}}),g.each(["radio","checkbox"],(function(){g.valHooks[this]={set:function(e,t){return g.isArray(t)?e.checked=g.inArray(g(e).val(),t)>=0:void 0}},p.checkOn||(g.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var dt,ht,pt=g.expr.attrHandle,mt=/^(?:checked|selected)$/i,gt=p.getSetAttribute,ft=p.input;g.fn.extend({attr:function(e,t){return Y(this,g.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){g.removeAttr(this,e)}))}}),g.extend({attr:function(e,t,i){var n,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===K?g.prop(e,t,i):(1===s&&g.isXMLDoc(e)||(t=t.toLowerCase(),n=g.attrHooks[t]||(g.expr.match.bool.test(t)?ht:dt)),void 0===i?n&&"get"in n&&null!==(o=n.get(e,t))?o:null==(o=g.find.attr(e,t))?void 0:o:null!==i?n&&"set"in n&&void 0!==(o=n.set(e,i,t))?o:(e.setAttribute(t,i+""),i):void g.removeAttr(e,t))},removeAttr:function(e,t){var i,n,o=0,s=t&&t.match(A);if(s&&1===e.nodeType)for(;i=s[o++];)n=g.propFix[i]||i,g.expr.match.bool.test(i)?ft&&gt||!mt.test(i)?e[n]=!1:e[g.camelCase("default-"+i)]=e[n]=!1:g.attr(e,i,""),e.removeAttribute(gt?i:n)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&g.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ht={set:function(e,t,i){return!1===t?g.removeAttr(e,i):ft&&gt||!mt.test(i)?e.setAttribute(!gt&&g.propFix[i]||i,i):e[g.camelCase("default-"+i)]=e[i]=!0,i}},g.each(g.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=pt[t]||g.find.attr;pt[t]=ft&&gt||!mt.test(t)?function(e,t,n){var o,s;return n||(s=pt[t],pt[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,pt[t]=s),o}:function(e,t,i){return i?void 0:e[g.camelCase("default-"+t)]?t.toLowerCase():null}})),ft&&gt||(g.attrHooks.value={set:function(e,t,i){return g.nodeName(e,"input")?void(e.defaultValue=t):dt&&dt.set(e,t,i)}}),gt||(dt={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},pt.id=pt.name=pt.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},g.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:dt.set},g.attrHooks.contenteditable={set:function(e,t,i){dt.set(e,""!==t&&t,i)}},g.each(["width","height"],(function(e,t){g.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}}))),p.style||(g.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var yt=/^(?:input|select|textarea|button|object)$/i,bt=/^(?:a|area)$/i;g.fn.extend({prop:function(e,t){return Y(this,g.prop,e,t,arguments.length>1)},removeProp:function(e){return e=g.propFix[e]||e,this.each((function(){try{this[e]=void 0,delete this[e]}catch(e){}}))}}),g.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!g.isXMLDoc(e))&&(t=g.propFix[t]||t,o=g.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=g.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}}}),p.hrefNormalized||g.each(["href","src"],(function(e,t){g.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),p.optSelected||(g.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){g.propFix[this.toLowerCase()]=this})),p.enctype||(g.propFix.enctype="encoding");var vt=/[\t\r\n\f]/g;g.fn.extend({addClass:function(e){var t,i,n,o,s,r,a=0,l=this.length,c="string"==typeof e&&e;if(g.isFunction(e))return this.each((function(t){g(this).addClass(e.call(this,t,this.className))}));if(c)for(t=(e||"").match(A)||[];l>a;a++)if(n=1===(i=this[a]).nodeType&&(i.className?(" "+i.className+" ").replace(vt," "):" ")){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=g.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(e){var t,i,n,o,s,r,a=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(g.isFunction(e))return this.each((function(t){g(this).removeClass(e.call(this,t,this.className))}));if(c)for(t=(e||"").match(A)||[];l>a;a++)if(n=1===(i=this[a]).nodeType&&(i.className?(" "+i.className+" ").replace(vt," "):"")){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=e?g.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(g.isFunction(e)?function(i){g(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,o=g(this),s=e.match(A)||[];t=s[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(i===K||"boolean"===i)&&(this.className&&g._data(this,"__className__",this.className),this.className=this.className||!1===e?"":g._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(vt," ").indexOf(t)>=0)return!0;return!1}}),g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){g.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),g.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var _t=g.now(),Ct=/\?/,wt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;g.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,i=null,o=g.trim(e+"");return o&&!g.trim(o.replace(wt,(function(e,n,o,s){return t&&n&&(i=0),0===i?e:(t=o||n,i+=!s-!o,"")})))?Function("return "+o)():g.error("Invalid JSON: "+e)},g.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{n.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+e),t};var Tt,Et,It=/#.*$/,xt=/([?&])_=[^&]*/,St=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,kt=/^(?:GET|HEAD)$/,Dt=/^\/\//,Ot=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Rt={},Pt={},Lt="*/".concat("*");try{Et=location.href}catch(e){(Et=S.createElement("a")).href="",Et=Et.href}function At(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,s=t.toLowerCase().match(A)||[];if(g.isFunction(i))for(;n=s[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Mt(e,t,i,n){var o={},s=e===Pt;function r(a){var l;return o[a]=!0,g.each(e[a]||[],(function(e,a){var c=a(t,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)})),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Bt(e,t){var i,n,o=g.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&g.extend(!0,e,i),e}Tt=Ot.exec(Et.toLowerCase())||[],g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,g.ajaxSettings),t):Bt(g.ajaxSettings,e)},ajaxPrefilter:At(Rt),ajaxTransport:At(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,o,s,r,a,l,c,u=g.ajaxSetup({},t),d=u.context||u,h=u.context&&(d.nodeType||d.jquery)?g(d):g.event,p=g.Deferred(),m=g.Callbacks("once memory"),f=u.statusCode||{},y={},b={},v=0,_="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!c)for(c={};t=St.exec(s);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return v||(e=b[i]=b[i]||e,y[e]=t),this},overrideMimeType:function(e){return v||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)f[t]=[f[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||_;return l&&l.abort(t),w(0,t),this}};if(p.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,u.url=((e||u.url||Et)+"").replace(It,"").replace(Dt,Tt[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=g.trim(u.dataType||"*").toLowerCase().match(A)||[""],null==u.crossDomain&&(i=Ot.exec(u.url.toLowerCase()),u.crossDomain=!(!i||i[1]===Tt[1]&&i[2]===Tt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=g.param(u.data,u.traditional)),Mt(Rt,u,t,C),2===v)return C;for(n in(a=g.event&&u.global)&&0==g.active++&&g.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!kt.test(u.type),o=u.url,u.hasContent||(u.data&&(o=u.url+=(Ct.test(o)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=xt.test(o)?o.replace(xt,"$1_="+_t++):o+(Ct.test(o)?"&":"?")+"_="+_t++)),u.ifModified&&(g.lastModified[o]&&C.setRequestHeader("If-Modified-Since",g.lastModified[o]),g.etag[o]&&C.setRequestHeader("If-None-Match",g.etag[o])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&C.setRequestHeader("Content-Type",u.contentType),C.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Lt+"; q=0.01":""):u.accepts["*"]),u.headers)C.setRequestHeader(n,u.headers[n]);if(u.beforeSend&&(!1===u.beforeSend.call(d,C,u)||2===v))return C.abort();for(n in _="abort",{success:1,error:1,complete:1})C[n](u[n]);if(l=Mt(Pt,u,t,C)){C.readyState=1,a&&h.trigger("ajaxSend",[C,u]),u.async&&u.timeout>0&&(r=setTimeout((function(){C.abort("timeout")}),u.timeout));try{v=1,l.send(y,w)}catch(e){if(!(2>v))throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,i,n){var c,y,b,_,w,T=t;2!==v&&(v=2,r&&clearTimeout(r),l=void 0,s=n||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,i&&(_=function(e,t,i){for(var n,o,s,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}n||(n=r)}s=s||n}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}(u,C,i)),_=function(e,t,i,n){var o,s,r,a,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if((a=o.split(" "))[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(u,_,C,c),c?(u.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(g.lastModified[o]=w),(w=C.getResponseHeader("etag"))&&(g.etag[o]=w)),204===e||"HEAD"===u.type?T="nocontent":304===e?T="notmodified":(T=_.state,y=_.data,c=!(b=_.error))):(b=T,(e||!T)&&(T="error",0>e&&(e=0))),C.status=e,C.statusText=(t||T)+"",c?p.resolveWith(d,[y,T,C]):p.rejectWith(d,[C,T,b]),C.statusCode(f),f=void 0,a&&h.trigger(c?"ajaxSuccess":"ajaxError",[C,u,c?y:b]),m.fireWith(d,[C,T]),a&&(h.trigger("ajaxComplete",[C,u]),--g.active||g.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return g.get(e,t,i,"json")},getScript:function(e,t){return g.get(e,void 0,t,"script")}}),g.each(["get","post"],(function(e,t){g[t]=function(e,i,n,o){return g.isFunction(i)&&(o=o||n,n=i,i=void 0),g.ajax({url:e,type:t,dataType:o,data:i,success:n})}})),g._evalUrl=function(e){return g.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},g.fn.extend({wrapAll:function(e){if(g.isFunction(e))return this.each((function(t){g(this).wrapAll(e.call(this,t))}));if(this[0]){var t=g(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return this.each(g.isFunction(e)?function(t){g(this).wrapInner(e.call(this,t))}:function(){var t=g(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=g.isFunction(e);return this.each((function(i){g(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(){return this.parent().each((function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)})).end()}}),g.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!p.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||g.css(e,"display"))},g.expr.filters.visible=function(e){return!g.expr.filters.hidden(e)};var Nt=/%20/g,Ft=/\[\]$/,Kt=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;function jt(e,t,i,n){var o;if(g.isArray(t))g.each(t,(function(t,o){i||Ft.test(e)?n(e,o):jt(e+"["+("object"==typeof o?t:"")+"]",o,i,n)}));else if(i||"object"!==g.type(t))n(e,t);else for(o in t)jt(e+"["+o+"]",t[o],i,n)}g.param=function(e,t){var i,n=[],o=function(e,t){t=g.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=g.ajaxSettings&&g.ajaxSettings.traditional),g.isArray(e)||e.jquery&&!g.isPlainObject(e))g.each(e,(function(){o(this.name,this.value)}));else for(i in e)jt(i,e[i],t,o);return n.join("&").replace(Nt,"+")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=g.prop(this,"elements");return e?g.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!g(this).is(":disabled")&&Ht.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!Z.test(e))})).map((function(e,t){var i=g(this).val();return null==i?null:g.isArray(i)?g.map(i,(function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}})):{name:t.name,value:i.replace(Kt,"\r\n")}})).get()}}),g.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Gt()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Gt;var Ut=0,zt={},Wt=g.ajaxSettings.xhr();function Gt(){try{return new n.XMLHttpRequest}catch(e){}}n.attachEvent&&n.attachEvent("onunload",(function(){for(var e in zt)zt[e](void 0,!0)})),p.cors=!!Wt&&"withCredentials"in Wt,(Wt=p.ajax=!!Wt)&&g.ajaxTransport((function(e){var t;if(!e.crossDomain||p.cors)return{send:function(i,n){var o,s=e.xhr(),r=++Ut;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)void 0!==i[o]&&s.setRequestHeader(o,i[o]+"");s.send(e.hasContent&&e.data||null),t=function(i,o){var a,l,c;if(t&&(o||4===s.readyState))if(delete zt[r],t=void 0,s.onreadystatechange=g.noop,o)4!==s.readyState&&s.abort();else{c={},a=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(e){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=zt[r]=t:t()},abort:function(){t&&t(void 0,!0)}}})),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return g.globalEval(e),e}}}),g.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),g.ajaxTransport("script",(function(e){if(e.crossDomain){var t,i=S.head||g("head")[0]||S.documentElement;return{send:function(n,o){(t=S.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||o(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}));var $t=[],qt=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||g.expando+"_"+_t++;return this[e]=!0,e}}),g.ajaxPrefilter("json jsonp",(function(e,t,i){var o,s,r,a=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=g.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(qt,"$1"+o):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||g.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=n[o],n[o]=function(){r=arguments},i.always((function(){n[o]=s,e[o]&&(e.jsonpCallback=t.jsonpCallback,$t.push(o)),r&&g.isFunction(s)&&s(r[0]),r=s=void 0})),"script"):void 0})),g.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||S;var n=T.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=g.buildFragment([e],t,o),o&&o.length&&g(o).remove(),g.merge([],n.childNodes))};var Yt=g.fn.load;g.fn.load=function(e,t,i){if("string"!=typeof e&&Yt)return Yt.apply(this,arguments);var n,o,s,r=this,a=e.indexOf(" ");return a>=0&&(n=g.trim(e.slice(a,e.length)),e=e.slice(0,a)),g.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),r.length>0&&g.ajax({url:e,type:s,dataType:"html",data:t}).done((function(e){o=arguments,r.html(n?g("<div>").append(g.parseHTML(e)).find(n):e)})).complete(i&&function(e,t){r.each(i,o||[e.responseText,t,e])}),this},g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){g.fn[t]=function(e){return this.on(t,e)}})),g.expr.filters.animated=function(e){return g.grep(g.timers,(function(t){return e===t.elem})).length};var Zt=n.document.documentElement;function Xt(e){return g.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}g.offset={setOffset:function(e,t,i){var n,o,s,r,a,l,c=g.css(e,"position"),u=g(e),d={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=g.css(e,"top"),l=g.css(e,"left"),("absolute"===c||"fixed"===c)&&g.inArray("auto",[s,l])>-1?(r=(n=u.position()).top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),g.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):u.css(d)}},g.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){g.offset.setOffset(this,e,t)}));var t,i,n={top:0,left:0},o=this[0],s=o&&o.ownerDocument;return s?(t=s.documentElement,g.contains(t,o)?(typeof o.getBoundingClientRect!==K&&(n=o.getBoundingClientRect()),i=Xt(s),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===g.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),g.nodeName(e[0],"html")||(i=e.offset()),i.top+=g.css(e[0],"borderTopWidth",!0),i.left+=g.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-g.css(n,"marginTop",!0),left:t.left-i.left-g.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||Zt;e&&!g.nodeName(e,"html")&&"static"===g.css(e,"position");)e=e.offsetParent;return e||Zt}))}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i=/Y/.test(t);g.fn[e]=function(n){return Y(this,(function(e,n,o){var s=Xt(e);return void 0===o?s?t in s?s[t]:s.document.documentElement[n]:e[n]:void(s?s.scrollTo(i?g(s).scrollLeft():o,i?o:g(s).scrollTop()):e[n]=o)}),e,n,arguments.length,null)}})),g.each(["top","left"],(function(e,t){g.cssHooks[t]=Fe(p.pixelPosition,(function(e,i){return i?(i=Ae(e,t),Be.test(i)?g(e).position()[t]+"px":i):void 0}))})),g.each({Height:"height",Width:"width"},(function(e,t){g.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){g.fn[n]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(!0===n||!0===o?"margin":"border");return Y(this,(function(t,i,n){var o;return g.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?g.css(t,i,r):g.style(t,i,n,r)}),t,s?n:void 0,s,null)}}))})),g.fn.size=function(){return this.length},g.fn.andSelf=g.fn.addBack,void 0===(i=function(){return g}.apply(t,[]))||(e.exports=i);var Jt=n.jQuery,Qt=n.$;return g.noConflict=function(e){return n.$===g&&(n.$=Qt),e&&n.jQuery===g&&(n.jQuery=Jt),g},typeof o===K&&(n.jQuery=n.$=g),g},"object"==typeof e.exports?e.exports=n.document?o(n,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return o(e)}:o(n)},"./lib/jquery-bridget/jquery-bridget.js":function(e,t,i){!function(t,n){e.exports?e.exports=n(t,i("./lib/jquery-1.11.3.min.js")):t.jQueryBridget=n(t,t.jQuery)}(window,(function(e,t){var i=e.console,n=void 0===i?function(){}:function(e){i.error(e)};return function(i,o,s){function r(e,t,o){var r,a="$()."+i+'("'+t+'")';return e.each((function(e,l){var c=s.data(l,i);if(c){var u=c[t];if(u&&"_"!=t.charAt(0)){var d=u.apply(c,o);r=void 0===r?d:r}else n(a+" is not a valid method")}else n(i+" not initialized. Cannot call method "+a)})),void 0!==r?r:e}function a(e,t){e.each((function(e,n){var r=s.data(n,i);r?(r.option(t),r._init()):(r=new o(n,t),s.data(n,i,r))}))}(s=s||t||e.jQuery)&&(o.prototype.option||(o.prototype.option=function(e){e&&(this.options=Object.assign(this.options||{},e))}),s.fn[i]=function(e){if("string"==typeof e){var t=Array.prototype.slice.call(arguments,1);return r(this,e,t)}return a(this,e),this})}}))},"./lib/jquery.browser.min.js":function(e,t,i){var n,o;n=[i("./lib/jquery-1.11.3.min.js")],void 0===(o=function(e){return function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],n={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:i[0]||""};if(o.browser&&(n[o.browser]=!0,n.version=o.version,n.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(n[o.platform]=!0),(n.android||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"])&&(n.mobile=!0),(n.cros||n.mac||n.linux||n.win)&&(n.desktop=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.iemobile){var s="msie";o.browser=s,n[s]=!0}if(n.edge){delete n.edge;var r="msedge";o.browser=r,n[r]=!0}if(n.safari&&n.blackberry){var a="blackberry";o.browser=a,n[a]=!0}if(n.safari&&n.playbook){var l="playbook";o.browser=l,n[l]=!0}if(n.bb){var c="blackberry";o.browser=c,n[c]=!0}if(n.opr){var u="opera";o.browser=u,n[u]=!0}if(n.safari&&n.android){var d="android";o.browser=d,n[d]=!0}if(n.safari&&n.kindle){var h="kindle";o.browser=h,n[h]=!0}if(n.safari&&n.silk){var p="silk";o.browser=p,n[p]=!0}return n.name=o.browser,n.platform=o.platform,n}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser}(e)}.apply(t,n))||(e.exports=o)},"./lib/masonry-4.2.2/masonry.pkgd.min.js":function(e,t,i){var n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_,C,w;w=window,_=[i("./lib/jquery-1.11.3.min.js")],C=function(e){return function(e,t){"use strict";function i(i,s,a){function l(e,t,n){var o,s="$()."+i+'("'+t+'")';return e.each((function(e,l){var c=a.data(l,i);if(c){var u=c[t];if(u&&"_"!=t.charAt(0)){var d=u.apply(c,n);o=void 0===o?d:o}else r(s+" is not a valid method")}else r(i+" not initialized. Cannot call methods, i.e. "+s)})),void 0!==o?o:e}function c(e,t){e.each((function(e,n){var o=a.data(n,i);o?(o.option(t),o._init()):(o=new s(n,t),a.data(n,i,o))}))}(a=a||t||e.jQuery)&&(s.prototype.option||(s.prototype.option=function(e){a.isPlainObject(e)&&(this.options=a.extend(!0,this.options,e))}),a.fn[i]=function(e){return"string"==typeof e?l(this,e,o.call(arguments,1)):(c(this,e),this)},n(a))}function n(e){!e||e&&e.bridget||(e.bridget=i)}var o=Array.prototype.slice,s=e.console,r=void 0===s?function(){}:function(e){s.error(e)};return n(t||e.jQuery),i}(w,e)}.apply(t,_),void 0===C||(e.exports=C),"undefined"!=typeof window&&window,o=function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var s=i[o];n&&n[s]&&(this.off(e,s),delete n[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e},n=o.call((s={id:"ev-emitter/ev-emitter",exports:{},loaded:!1}).exports,i,s.exports,s),s.loaded=!0,void 0===n&&(n=s.exports),window,a=function(){"use strict";function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}function t(e){var t=getComputedStyle(e);return t||s("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}function i(){if(!l){l=!0;var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style.boxSizing="border-box";var s=document.body||document.documentElement;s.appendChild(i);var r=t(i);o=200==Math.round(e(r.width)),n.isBoxSizeOuter=o,s.removeChild(i)}}function n(n){if(i(),"string"==typeof n&&(n=document.querySelector(n)),n&&"object"==typeof n&&n.nodeType){var s=t(n);if("none"==s.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;a>t;t++)e[r[t]]=0;return e}();var l={};l.width=n.offsetWidth,l.height=n.offsetHeight;for(var c=l.isBorderBox="border-box"==s.boxSizing,u=0;a>u;u++){var d=r[u],h=s[d],p=parseFloat(h);l[d]=isNaN(p)?0:p}var m=l.paddingLeft+l.paddingRight,g=l.paddingTop+l.paddingBottom,f=l.marginLeft+l.marginRight,y=l.marginTop+l.marginBottom,b=l.borderLeftWidth+l.borderRightWidth,v=l.borderTopWidth+l.borderBottomWidth,_=c&&o,C=e(s.width);!1!==C&&(l.width=C+(_?0:m+b));var w=e(s.height);return!1!==w&&(l.height=w+(_?0:g+v)),l.innerWidth=l.width-(m+b),l.innerHeight=l.height-(g+v),l.outerWidth=l.width+f,l.outerHeight=l.height+y,l}}var o,s="undefined"==typeof console?function(){}:function(e){console.error(e)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=r.length,l=!1;return n},r=a.call((l={id:"get-size/get-size",exports:{},loaded:!1}).exports,i,l.exports,l),l.loaded=!0,void 0===r&&(r=l.exports),function(e,t){"use strict";u=function(){var e=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}}();return function(t,i){return t[e](i)}},c=u.call((d={id:"desandro-matches-selector/matches-selector",exports:{},loaded:!1}).exports,i,d.exports,d),d.loaded=!0,void 0===c&&(c=d.exports)}(window),function(e,t){h=function(t){return function(e,t){var i={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},n=Array.prototype.slice;i.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?n.call(e):[e]},i.removeFrom=function(e,t){var i=e.indexOf(t);-1!=i&&e.splice(i,1)},i.getParent=function(e,i){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,t(e,i))return e},i.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.filterFindElements=function(e,n){e=i.makeArray(e);var o=[];return e.forEach((function(e){if(e instanceof HTMLElement){if(!n)return void o.push(e);t(e,n)&&o.push(e);for(var i=e.querySelectorAll(n),s=0;s<i.length;s++)o.push(i[s])}})),o},i.debounceMethod=function(e,t,i){i=i||100;var n=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments,s=this;this[o]=setTimeout((function(){n.apply(s,t),delete s[o]}),i)}},i.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,(function(e,t,i){return t+"-"+i})).toLowerCase()};var o=e.console;return i.htmlInit=function(t,n){i.docReady((function(){var s=i.toDashed(n),r="data-"+s,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+s),c=i.makeArray(a).concat(i.makeArray(l)),u=r+"-options",d=e.jQuery;c.forEach((function(e){var i,s=e.getAttribute(r)||e.getAttribute(u);try{i=s&&JSON.parse(s)}catch(t){return void(o&&o.error("Error parsing "+r+" on "+e.className+": "+t))}var a=new t(e,i);d&&d.data(e,n,a)}))}))},i}(e,t)}.apply(p={},_=[c]),void 0!==h||(h=p)}(window),window,m=function(e,t){"use strict";function i(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var n=document.documentElement.style,o="string"==typeof n.transition?"transition":"WebkitTransition",s="string"==typeof n.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],a={transform:s,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"},l=i.prototype=Object.create(e.prototype);l.constructor=i,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.getSize=function(){this.size=t(this.element)},l.css=function(e){var t=this.element.style;for(var i in e)t[a[i]||i]=e[i]},l.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=e[t?"left":"right"],o=e[i?"top":"bottom"],s=parseFloat(n),r=parseFloat(o),a=this.layout.size;-1!=n.indexOf("%")&&(s=s/100*a.width),-1!=o.indexOf("%")&&(r=r/100*a.height),s=isNaN(s)?0:s,r=isNaN(r)?0:r,s-=t?a.paddingLeft:a.paddingRight,r-=i?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=r},l.layoutPosition=function(){var e=this.layout.size,t={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",s=i?"left":"right",r=i?"right":"left",a=this.position.x+e[o];t[s]=this.getXValue(a),t[r]="";var l=n?"paddingTop":"paddingBottom",c=n?"top":"bottom",u=n?"bottom":"top",d=this.position.y+e[l];t[c]=this.getYValue(d),t[u]="",this.css(t),this.emitEvent("layout",[this])},l.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},l.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},l._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,o=e==this.position.x&&t==this.position.y;if(this.setPosition(e,t),!o||this.isTransitioning){var s=e-i,r=t-n,a={};a.transform=this.getTranslate(s,r),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},l.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},l.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},l._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},l.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);e.from&&(this.css(e.from),this.element.offsetHeight),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var c="opacity,"+function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}(s);l.enableTransition=function(){if(!this.isTransitioning){var e=this.layout.options.transitionDuration;e="number"==typeof e?e+"ms":e,this.css({transitionProperty:c,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1)}},l.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},l.onotransitionend=function(e){this.ontransitionend(e)};var u={"-webkit-transform":"transform"};l.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,i=u[e.propertyName]||e.propertyName;delete t.ingProperties[i],function(e){for(var t in e)return!1;return!0}(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd&&(t.onEnd[i].call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},l._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(d)},l.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){return o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),void this.hide()):void this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var i in t)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i},void 0===(f=m.apply(g={},[n,r]))&&(f=g),function(e,t){"use strict";y=function(t,i,n,o){return function(e,t,i,n,o){function s(e,t){var i=n.getQueryElement(e);if(i){this.element=i,l&&(this.$element=l(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t);var o=++u;this.element.outlayerGUID=o,d[o]=this,this._create(),this._getOption("initLayout")&&this.layout()}else a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||e))}function r(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}var a=e.console,l=e.jQuery,c=function(){},u=0,d={};s.namespace="outlayer",s.Item=o,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var h=s.prototype;n.extend(h,t.prototype),h.option=function(e){n.extend(this.options,e)},h._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},h._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},h.reloadItems=function(){this.items=this._itemize(this.element.children)},h._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],o=0;o<t.length;o++){var s=new i(t[o],this);n.push(s)}return n},h._filterFindItemElements=function(e){return n.filterFindElements(e,this.options.itemSelector)},h.getItemElements=function(){return this.items.map((function(e){return e.element}))},h.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},h._init=h.layout,h._resetLayout=function(){this.getSize()},h.getSize=function(){this.size=i(this.element)},h._getMeasurement=function(e,t){var n,o=this.options[e];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[e]=n?i(n)[t]:o):this[e]=0},h.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},h._getItemsForLayout=function(e){return e.filter((function(e){return!e.isIgnored}))},h._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){var i=[];e.forEach((function(e){var n=this._getItemLayoutPosition(e);n.item=e,n.isInstant=t||e.isLayoutInstant,i.push(n)}),this),this._processLayoutQueue(i)}},h._getItemLayoutPosition=function(){return{x:0,y:0}},h._processLayoutQueue=function(e){this.updateStagger(),e.forEach((function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)}),this)},h.updateStagger=function(){var e=this.options.stagger;return null==e?void(this.stagger=0):(this.stagger=function(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),i=t&&t[1],n=t&&t[2];return i.length?(i=parseFloat(i))*(p[n]||1):0}(e),this.stagger)},h._positionItem=function(e,t,i,n,o){n?e.goTo(t,i):(e.stagger(o*this.stagger),e.moveTo(t,i))},h._postLayout=function(){this.resizeContainer()},h.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},h._getContainerSize=c,h._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},h._emitCompleteOnItems=function(e,t){function i(){o.dispatchEvent(e+"Complete",null,[t])}function n(){++r==s&&i()}var o=this,s=t.length;if(t&&s){var r=0;t.forEach((function(t){t.once(e,n)}))}else i()},h.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;if(this.emitEvent(e,n),l)if(this.$element=this.$element||l(this.element),t){var o=l.Event(t);o.type=e,this.$element.trigger(o,i)}else this.$element.trigger(e,i)},h.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},h.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},h.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},h.unstamp=function(e){(e=this._find(e))&&e.forEach((function(e){n.removeFrom(this.stamps,e),this.unignore(e)}),this)},h._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=n.makeArray(e)):void 0},h._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},h._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},h._manageStamp=c,h._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,o=i(e);return{left:t.left-n.left-o.marginLeft,top:t.top-n.top-o.marginTop,right:n.right-t.right-o.marginRight,bottom:n.bottom-t.bottom-o.marginBottom}},h.handleEvent=n.handleEvent,h.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},h.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},h.onresize=function(){this.resize()},n.debounceMethod(s,"onresize",100),h.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},h.needsResizeLayout=function(){var e=i(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},h.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},h.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},h.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},h.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),e&&e.length){var t=this.updateStagger();e.forEach((function(e,i){e.stagger(i*t),e.reveal()}))}},h.hide=function(e){if(this._emitCompleteOnItems("hide",e),e&&e.length){var t=this.updateStagger();e.forEach((function(e,i){e.stagger(i*t),e.hide()}))}},h.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},h.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},h.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e)return i}},h.getItems=function(e){e=n.makeArray(e);var t=[];return e.forEach((function(e){var i=this.getItem(e);i&&t.push(i)}),this),t},h.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach((function(e){e.remove(),n.removeFrom(this.items,e)}),this)},h.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach((function(e){e.destroy()})),this.unbindResize();var t=this.element.outlayerGUID;delete d[t],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},s.data=function(e){var t=(e=n.getQueryElement(e))&&e.outlayerGUID;return t&&d[t]},s.create=function(e,t){var i=r(s);return i.defaults=n.extend({},s.defaults),n.extend(i.defaults,t),i.compatOptions=n.extend({},s.compatOptions),i.namespace=e,i.data=s.data,i.Item=r(o),n.htmlInit(i,e),l&&l.bridget&&l.bridget(e,i),i};var p={ms:1,s:1e3};return s.Item=o,s}(e,t,i,n,o)}.apply(b={},_=[n,r,h,f]),void 0!==y||(y=b)}(window),window,v=function(e,t){var i=e.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],i=e&&e.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,s=o/n,r=n-o%n;s=Math[r&&1>r?"round":"floor"](s),this.cols=Math.max(s,1)},n.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,i=t(e);this.containerWidth=i&&i.innerWidth},n._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=Math[t&&1>t?"round":"ceil"](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,e),o={x:this.columnWidth*n.col,y:n.y},s=n.y+e.size.outerHeight,r=i+n.col,a=n.col;r>a;a++)this.colYs[a]=s;return o},n._getTopColPosition=function(e){var t=this._getTopColGroup(e),i=Math.min.apply(Math,t);return{col:t.indexOf(i),y:i}},n._getTopColGroup=function(e){if(2>e)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;i>n;n++)t[n]=this._getColGroupY(n,e);return t},n._getColGroupY=function(e,t){if(2>t)return this.colYs[e];var i=this.colYs.slice(e,e+t);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(e,t){var i=this.horizontalColIndex%this.cols;i=e>1&&i+e>this.cols?0:i;var n=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=n?i+e:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,e)}},n._manageStamp=function(e){var i=t(e),n=this._getElementOffset(e),o=this._getOption("originLeft")?n.left:n.right,s=o+i.outerWidth,r=Math.floor(o/this.columnWidth);r=Math.max(0,r);var a=Math.floor(s/this.columnWidth);a-=s%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,c=r;a>=c;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},n._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},i},void 0===(C=v.apply(t,_=[y,r]))||(e.exports=C)},"./lib/ckeditor/ckeditor.js":function(e){var t,i,n,o,s,r,a,l,c,u,d;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"I8BG",version:"4.10.1",revision:"59246e9",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++){var o=i[n].src.match(e);if(o){t=o[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(e){}}function t(){for(var e;e=i.shift();)e()}var i=[];return function(t){if(i.push(t),"complete"===document.readyState&&setTimeout(e,1),1==i.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(e){}document.documentElement.doScroll&&t&&function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}}}()},i=window.CKEDITOR_GETURL;if(i){var n=t.getUrl;t.getUrl=function(e){return i.call(t,e)||n.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,i=CKEDITOR.event.prototype;for(t in i)null==e[t]&&(e[t]=i[t])},CKEDITOR.event.prototype=function(){function e(e){var n=t(this);return n[e]||(n[e]=new i(e))}var t=function(e){return(e=e.getPrivate&&e.getPrivate()||e._||(e._={})).events||(e.events={})},i=function(e){this.name=e,this.listeners=[]};return i.prototype={getListenerIndex:function(e){for(var t=0,i=this.listeners;t<i.length;t++)if(i[t].fn==e)return t;return-1}},{define:function(t,i){var n=e.call(this,t);CKEDITOR.tools.extend(n,i,!0)},on:function(t,i,n,o,s){function r(e,s,r,l){return e={name:t,sender:this,editor:e,data:s,listenerData:o,stop:r,cancel:l,removeListener:a},!1!==i.call(n,e)&&e.data}function a(){c.removeListener(t,i)}var l=e.call(this,t);if(0>l.getListenerIndex(i)){l=l.listeners,n||(n=this),isNaN(s)&&(s=10);var c=this;r.fn=i,r.priority=s;for(var u=l.length-1;0<=u;u--)if(l[u].priority<=s)return l.splice(u+1,0,r),{removeListener:a};l.unshift(r)}return{removeListener:a}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,i=function(){e=1},n=0,o=function(){n=1};return function(s,r,a){var l=t(this)[s];s=e;var c=n;if(e=n=0,l&&(d=l.listeners).length)for(var u,d=d.slice(0),h=0;h<d.length;h++){if(l.errorProof)try{u=d[h].call(this,a,r,i,o)}catch(e){}else u=d[h].call(this,a,r,i,o);if(!1===u?n=1:void 0!==u&&(r=u),e||n)break}return r=!n&&(void 0===r||r),e=s,n=c,r}}(),fireOnce:function(e,i,n){return i=this.fire(e,i,n),delete t(this)[e],i},removeListener:function(e,i){var n=t(this)[e];if(n){var o=n.getListenerIndex(i);0<=o&&n.listeners.splice(o,1)}},removeAllListeners:function(){var e,i=t(this);for(e in i)delete i[e]},hasListeners:function(e){return(e=t(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),i=-1<e.indexOf("trident/");(i={ie:i=!(!t&&!i),edge:!!t,webkit:!i&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!i.webkit&&!i.ie,i.webkit&&(-1<e.indexOf("chrome")?i.chrome=!0:i.safari=!0);var n=0;return i.ie&&(n=t?parseFloat(t[1]):i.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)&&RegExp.$1?RegExp.$1:0):document.documentMode,i.ie9Compat=9==n,i.ie8Compat=8==n,i.ie7Compat=7==n,i.ie6Compat=7>n||i.quirks),i.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(n=1e4*(t=t[1].split("."))[0]+100*(t[1]||0)+1*(t[2]||0)),i.air&&(n=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),i.webkit&&(n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=!(i.ie&&7>n||i.gecko&&4e4>n||i.webkit&&534>n),i.hidpi=2<=window.devicePixelRatio,i.needsBrFiller=i.gecko||i.webkit||i.ie&&10<n,i.needsNbspFiller=i.ie&&11>n,i.cssClass="cke_browser_"+(i.ie?"ie":i.gecko?"gecko":i.webkit?"webkit":"unknown"),i.quirks&&(i.cssClass+=" cke_browser_quirks"),i.ie&&(i.cssClass+=" cke_browser_ie"+(i.quirks?"6 cke_browser_iequirks":i.version)),i.air&&(i.cssClass+=" cke_browser_air"),i.iOS&&(i.cssClass+=" cke_browser_ios"),i.hidpi&&(i.cssClass+=" cke_hidpi"),i}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},CKEDITOR.domReady((function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*t))})),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:t})},CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:t})},CKEDITOR.on("log",(function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:"log",i=e.data.errorCode;(e=e.data.additionalData)?console[t]("[CKEDITOR] Error code: "+i+".",e):console[t]("[CKEDITOR] Error code: "+i+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+i)}}),null,null,999),CKEDITOR.dom={},t=[],i=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",n=/&/g,o=/>/g,s=/</g,r=/"/g,a=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},c=function(e,t){return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):l[t]},CKEDITOR.on("reset",(function(){t=[]})),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},getIndex:function(e,t){for(var i=0;i<e.length;++i)if(t(e[i]))return i;return-1},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var i=0;i<e.length;i++)t[i]=CKEDITOR.tools.clone(e[i]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;for(i in t=new e.constructor,e)t[i]=CKEDITOR.tools.clone(e[i]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,i,n=arguments.length;"boolean"==typeof(t=arguments[n-1])?n--:"boolean"==typeof(t=arguments[n-2])&&(i=arguments[n-1],n-=2);for(var o=1;o<n;o++){var s,r=arguments[o];for(s in r)!0!==t&&null!=e[s]||i&&!(s in i)||(e[s]=r[s])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,i={};for(t in e)i[t]=e[t];return i},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?i+e+":"+t+";"+e+":"+t:((n={})[e]=t,n[i+e]=t,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=void 0!==e.cssFloat?"cssFloat":void 0!==e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,(function(e){return e.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,i=[],n=0;n<e.length;n++)(t=e[n])&&(/@import|[{}]/.test(t)?i.push("<style>"+t+"</style>"):i.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return i.join("")},htmlEncode:function(e){return null==e?"":String(e).replace(n,"&amp;").replace(o,"&gt;").replace(s,"&lt;")},htmlDecode:function(e){return e.replace(a,c)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(r,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var i=t==CKEDITOR.ENTER_BR,n=(n=this.htmlEncode(e.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),o=t==CKEDITOR.ENTER_P?"p":"div";if(!i){var s=/\n{2}/g;if(s.test(n)){var r="<"+o+">",a="</"+o+">";n=r+n.replace(s,(function(){return a+r}))+a}}return n=n.replace(/\n/g,"<br>"),i||(n=n.replace(new RegExp("<br>(?=</"+o+">)"),(function(e){return CKEDITOR.tools.repeat(e,2)}))),(n=n.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,(function(e,t){return t+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var i=t(e);return i.prototype=e.prototype,i},setTimeout:function(e,t,i,n,o){return o||(o=window),i||(i=o),o.setTimeout((function(){n?e.apply(i,[].concat(n)):e.apply(i)}),t||0)},throttle:function(e,t,i){var n,o=0;return i=i||{},{input:function(){function s(){o=(new Date).getTime(),n=!1,t.apply(i,r)}var r=Array.prototype.slice.call(arguments);n&&(clearTimeout(n),n=0);var a=(new Date).getTime()-o;a<e?n=setTimeout(s,e-a):s()},reset:function(){n&&(clearTimeout(n),n=o=0)}}},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var i=0,n=e.length;i<n;i++)if(t(e[i]))return i}else{if(e.indexOf)return e.indexOf(t);for(i=0,n=e.length;i<n;i++)if(e[i]===t)return i}return-1},search:function(e,t){var i=CKEDITOR.tools.indexOf(e,t);return 0<=i?e[i]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,i=e.base,n=e.privates||e._,o=e.proto;if(e=e.statics,!t&&(t=function(){i&&this.base.apply(this,arguments)}),n){var s=t;t=function(){var e,t=this._||(this._={});for(e in n){var i=n[e];t[e]="function"==typeof i?CKEDITOR.tools.bind(i,this):i}s.apply(this,arguments)}}return i&&(t.prototype=this.prototypedCopy(i.prototype),t.prototype.constructor=t,t.base=i,t.baseProto=i.prototype,t.prototype.base=function(){this.base=i.prototype.base,i.apply(this,arguments),this.base=arguments.callee}),o&&this.extend(t.prototype,o,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,i){return t.push((function(){return e.apply(i||this,arguments)}))-1},removeFunction:function(e){t[e]=null},callFunction:function(e){var i=t[e];return i&&i.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(i){return e=CKEDITOR.tools.trim(i+"")+"px",t.test(e)?e:i||""}}(),convertToPx:function(){var e;return function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,i=arguments.length;t<i;t++){var n=arguments[t];try{e=n();break}catch(e){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,i=this;window.setTimeout((function(){e.apply(i,t)}),0)}},normalizeCssText:function(e,t){var i,n=[],o=CKEDITOR.tools.parseCssText(e,!0,t);for(i in o)n.push(i+":"+o[i]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(e,t,i,n){for(e=[t,i,n],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")}))},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(e,t,i,n){return 3==(e=t.toLowerCase()).length&&(e=[(e=e.split(""))[0],e[0],e[1],e[1],e[2],e[2]].join("")),"#"+e+n}))},parseCssText:function(e,t,i){var n={};return i&&(e=new CKEDITOR.dom.element("span").setAttribute("style",e).getAttribute("style")||""),e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e))),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,i,o){t&&("font-family"==(i=i.toLowerCase())&&(o=o.replace(/\s*,\s*/g,",")),o=CKEDITOR.tools.trim(o)),n[i]=o})),n):n},writeCssText:function(e,t){var i,n=[];for(i in e)n.push(i+":"+e[i]);return t&&n.sort(),n.join("; ")},objectCompare:function(e,t,i){var n;if(!e&&!t)return!0;if(!e||!t)return!1;for(n in e)if(e[n]!=t[n])return!1;if(!i)for(n in t)if(e[n]!=t[n])return!1;return!0},objectKeys:function(e){var t,i=[];for(t in e)i.push(t);return i},convertArrayToObject:function(e,t){var i={};1==arguments.length&&(t=!0);for(var n=0,o=e.length;n<o;++n)i[e[n]]=t;return i},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(e,t,i){function n(){s=(new Date).getTime(),o=!1,i?t.call(i):t()}var o,s=0;return{input:function(){if(!o){var t=(new Date).getTime()-s;t<e?o=setTimeout(n,e-t):n()}},reset:function(){o&&clearTimeout(o),o=s=0}}},enableHtml5Elements:function(e,t){for(var i,n="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),o=n.length;o--;)i=e.createElement(n[o]),t&&e.appendChild(i)},checkIfAnyArrayItemMatches:function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var i in e)if(i.match(t))return!0;return!1},keystrokeToString:function(e,t){var i=this.keystrokeToArray(e,t);return i.display=i.display.join("+"),i.aria=i.aria.join("+"),i},keystrokeToArray:function(e,t){var i=16711680&t,n=65535&t,o=CKEDITOR.env.mac,s=[],r=[];return i&CKEDITOR.CTRL&&(s.push(o?"⌘":e[17]),r.push(o?e[224]:e[17])),i&CKEDITOR.ALT&&(s.push(o?"⌥":e[18]),r.push(e[18])),i&CKEDITOR.SHIFT&&(s.push(o?"⇧":e[16]),r.push(e[16])),n&&(e[n]?(s.push(e[n]),r.push(e[n])):(s.push(String.fromCharCode(n)),r.push(String.fromCharCode(n)))),{display:s,aria:r}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(e){e=e.toLowerCase();for(var t,i=document.cookie.split(";"),n=0;n<i.length;n++)if(t=i[n].split("="),decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase())===e)return decodeURIComponent(1<t.length?t[1]:"");return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/"},getCsrfToken:function(){if(!(e=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=e.length){var e=[],t="";if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var i=0;40>i;i++)e.push(Math.floor(256*Math.random()));for(i=0;i<e.length;i++){var n="abcdefghijklmnopqrstuvwxyz0123456789".charAt(e[i]%36);t+=.5<Math.random()?n.toUpperCase():n}e=t,CKEDITOR.tools.setCookie("ckCsrfToken",e)}return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:"\\3"+e.charAt(0)+" "+e.substring(1,e.length):""},getMouseButton:function(e){var t=(e=e.data)&&e.$;return!(!e||!t)&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?4===t.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===t.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:t.button)},convertHexStringToBytes:function(e){var t,i=[],n=e.length/2;for(t=0;t<n;t++)i.push(parseInt(e.substr(2*t,2),16));return i},convertBytesToBase64:function(e){var t,i="",n=e.length;for(t=0;t<n;t+=3){var o,s=e.slice(t,t+3),r=s.length,a=[];if(3>r)for(o=r;3>o;o++)s[o]=0;for(a[0]=(252&s[0])>>2,a[1]=(3&s[0])<<4|s[1]>>4,a[2]=(15&s[1])<<2|(192&s[2])>>6,a[3]=63&s[2],o=0;4>o;o++)i=o<=r?i+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a[o]):i+"="}return i},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},i=this._findColor(e);return i.length&&(t.color=i[0],CKEDITOR.tools.array.forEach(i,(function(t){e=e.replace(t,"")}))),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(e){function t(e){i.top=n[e[0]],i.right=n[e[1]],i.bottom=n[e[2]],i.left=n[e[3]]}var i={},n=e.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(n.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}return i},border:function(e){var t={},i=e.split(/\s+/g);return(e=CKEDITOR.tools.style.parse._findColor(e)).length&&(t.color=e[0]),CKEDITOR.tools.array.forEach(i,(function(e){t.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,e)?!t.width&&CKEDITOR.tools.style.parse._widthRegExp.test(e)&&(t.width=e):t.style=e})),t},_findColor:function(e){var t=[],i=CKEDITOR.tools.array;return(t=(t=t.concat(e.match(this._rgbaRegExp)||[])).concat(e.match(this._hslaRegExp)||[])).concat(i.filter(e.split(/\s+/),(function(e){return!!e.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||e.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(e,t,i){var n=[];return this.forEach(e,(function(o,s){t.call(i,o,s,e)&&n.push(o)})),n},forEach:function(e,t,i){var n,o=e.length;for(n=0;n<o;n++)t.call(i,e[n],n,e)},map:function(e,t,i){for(var n=[],o=0;o<e.length;o++)n.push(t.call(i,e[o],o,e));return n},reduce:function(e,t,i,n){for(var o=0;o<e.length;o++)i=t.call(n,i,e[o],o,e);return i},every:function(e,t,i){return!e.length||(t=this.filter(e,t,i),e.length===t.length)}},object:{findKey:function(e,t){if("object"!=typeof e)return null;for(var i in e)if(e[i]===t)return i;return null},merge:function(e,t){var i=CKEDITOR.tools,n=i.clone(e),o=i.clone(t);return i.array.forEach(i.objectKeys(o),(function(e){n[e]="object"==typeof o[e]&&"object"==typeof n[e]?i.object.merge(n[e],o[e]):o[e]})),n}},getAbsoluteRectPosition:function(e,t){var i=CKEDITOR.tools.copy(t);!function e(t){if(t){var n=t.getClientRect();i.top+=n.top,i.left+=n.left,"x"in i&&"y"in i&&(i.x+=n.x,i.y+=n.y),e(t.getWindow().getFrame())}}(e.getFrame());var n=CKEDITOR.document.getWindow().getScrollPosition();return i.top+=n.y,i.left+=n.x,"x"in i&&"y"in i&&(i.y+=n.y,i.x+=n.x),i.right=i.left+i.width,i.bottom=i.top+i.height,i}},CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2,CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var i=CKEDITOR.tools.clone(e),n=1;n<arguments.length;n++)for(var o in t=arguments[n])delete i[o];return i},i={},n={},o={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},s={command:1,link:1,meta:1,noscript:1,script:1,style:1},r={},a={"#":1},l={center:1,dir:1,noframes:1};return e(i,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},a,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(n,o,i,l),t={a:t(i,{a:1,button:1}),abbr:i,address:n,area:r,article:n,aside:n,audio:e({source:1,track:1},n),b:i,base:r,bdi:i,bdo:i,blockquote:n,body:n,br:r,button:t(i,{a:1,button:1}),canvas:i,caption:n,cite:i,code:i,col:r,colgroup:{col:1},command:r,datalist:e({option:1},i),dd:n,del:i,details:e({summary:1},n),dfn:i,div:n,dl:{dt:1,dd:1},dt:n,em:i,embed:r,fieldset:e({legend:1},n),figcaption:n,figure:e({figcaption:1},n),footer:n,form:n,h1:i,h2:i,h3:i,h4:i,h5:i,h6:i,head:e({title:1,base:1},s),header:n,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:r,html:e({head:1,body:1},n,s),i:i,iframe:a,img:r,input:r,ins:i,kbd:i,keygen:r,label:i,legend:i,li:n,link:r,main:n,map:n,mark:i,menu:e({li:1},n),meta:r,meter:t(i,{meter:1}),nav:n,noscript:e({link:1,meta:1,style:1},i),object:e({param:1},i),ol:{li:1},optgroup:{option:1},option:a,output:i,p:i,param:r,pre:i,progress:t(i,{progress:1}),q:i,rp:i,rt:i,ruby:e({rp:1,rt:1},i),s:i,samp:i,script:a,section:n,select:{optgroup:1,option:1},small:i,source:r,span:i,strong:i,style:a,sub:i,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},i),sup:i,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:n,textarea:a,tfoot:{tr:1},th:n,thead:{tr:1},time:t(i,{time:1}),title:a,tr:{th:1,td:1},track:r,u:i,ul:{li:1},var:i,video:e({source:1,track:1},n),wbr:r,acronym:i,applet:e({param:1},n),basefont:r,big:i,center:n,dialog:r,dir:{li:1},font:i,isindex:r,noframes:n,strike:i,tt:i},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},o,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:i,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(i){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(i))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var i=this.getCustomData("_cke_nativeListeners");return i||(i={},this.setCustomData("_cke_nativeListeners",i)),i[t]||(i=i[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,i,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,i)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),i=t&&t[e];i&&(this.$.removeEventListener?this.$.removeEventListener(e,i,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,i),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var i=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,i):this.$.removeEventListener&&this.$.removeEventListener(e,i,!1),delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",(function(){t={}})),e.equals=function(e){try{return e&&e.$===this.$}catch(e){return!1}},e.setCustomData=function(e,i){var n=this.getUniqueId();return(t[n]||(t[n]={}))[e]=i,this},e.getCustomData=function(e){var i=this.$["data-cke-expando"];return(i=i&&t[i])&&e in i?i[e]:null},e.removeCustomData=function(e){var i,n,o;return(i=(i=this.$["data-cke-expando"])&&t[i])&&(n=i[e],o=e in i,delete i[e]),o?n:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){var i=this.$.cloneNode(e);return function i(n){if(n["data-cke-expando"]&&(n["data-cke-expando"]=!1),(n.nodeType==CKEDITOR.NODE_ELEMENT||n.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(t||n.nodeType!=CKEDITOR.NODE_ELEMENT||n.removeAttribute("id",!1),e)){n=n.childNodes;for(var o=0;o<n.length;o++)i(n[o])}}(i),i=new CKEDITOR.dom.node(i),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function t(i){if(i.type==CKEDITOR.NODE_ELEMENT||i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=i.getName();":"==n[0]&&i.renameNode(n.substring(1))}if(e)for(n=0;n<i.getChildCount();n++)t(i.getChild(n))}}(i),i},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],i=this.getDocument().$.documentElement,n=this.$;n&&n!=i;){var o=n.parentNode;o&&t.unshift(this.getIndex.call({$:n},e)),n=o}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,n){var o=n?e.nextSibling:e.previousSibling;return o&&o.nodeType==CKEDITOR.NODE_TEXT?i(o)?t(o,n):o:null}function i(e){return!e.nodeValue||e.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var n,o=this.$,s=-1;if(!this.$.parentNode||e&&o.nodeType==CKEDITOR.NODE_TEXT&&i(o)&&!t(o)&&!t(o,!0))return-1;do{e&&o!=this.$&&o.nodeType==CKEDITOR.NODE_TEXT&&(n||i(o))||(s++,n=o.nodeType==CKEDITOR.NODE_TEXT)}while(o=o.previousSibling);return s},getNextSourceNode:function(e,t,i){if(i&&!i.call){var n=i;i=function(e){return!e.equals(n)}}var o;if(!(e=!e&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0))return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(i&&!1===i(o,!0))return null;e=o.getNext()}return!e||i&&!1===i(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,i):e},getPreviousSourceNode:function(e,t,i){if(i&&!i.call){var n=i;i=function(e){return!e.equals(n)}}var o;if(!(e=!e&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0))return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(i&&!1===i(o,!0))return null;e=o.getPrevious()}return!e||i&&!1===i(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,i):e},getPrevious:function(e){var t,i=this.$;do{t=(i=i.previousSibling)&&10!=i.nodeType&&new CKEDITOR.dom.node(i)}while(t&&e&&!e(t));return t},getNext:function(e){var t,i=this.$;do{t=(i=i.nextSibling)&&new CKEDITOR.dom.node(i)}while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,i=[];do{i[e?"push":"unshift"](t)}while(t=t.getParent());return i},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,i=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(i);if(t==i)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(i))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(i.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return 0>t.sourceIndex||0>i.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<i.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress(),i=Math.min(t.length,e.length);for(var n=0;n<i;n++)if(t[n]!=e[n])return t[n]<e[n]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var i,n,o=this.$;for(t||(o=o.parentNode),"function"==typeof e?(n=!0,i=e):(n=!1,i=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});o;){if(i(n?new CKEDITOR.dom.node(o):o))return new CKEDITOR.dom.node(o);try{o=o.parentNode}catch(e){o=null}}return null},hasAscendant:function(e,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==e)return!0;i=i.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,i=t.parentNode;if(i){if(e)for(;e=t.firstChild;)i.insertBefore(t.removeChild(e),t);i.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(i-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea","input")&&(e=!0),!e&&t&&void 0!==t.$.isContentEditable)return!(t.$.isContentEditable||t.data("cke-editable"));for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return"false"==t.getAttribute("contenteditable");t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:{x:(e=e.document).documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var i=new CKEDITOR.dom.element("style",this);i.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(i)}return t||i.$.sheet},createElement:function(e,t){var i=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&i.setAttributes(t.attributes),t.styles&&i.setStyles(t.styles)),i},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var i=this.$.documentElement,n=0;i&&n<e.length;n++){var o=e[n];if(t)for(var s=-1,r=0;r<i.childNodes.length;r++){var a=i.childNodes[r];if((!0!==t||3!=a.nodeType||!a.previousSibling||3!=a.previousSibling.nodeType)&&++s==o){i=a;break}}else i=i.childNodes[o]}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(e,t){return CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,(function(e){return new CKEDITOR.dom.node(e)}))}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var i=new CKEDITOR.dom.element("div",t);return i.setHtml(e),i.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,i,n){var o=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),s=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=t,s[i]=1,t.setCustomData(i,n)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,i){var n,o=t.getCustomData("list_marker_names"),s=t.getCustomData("list_marker_id");for(n in o)t.removeCustomData(n);t.removeCustomData("list_marker_names"),i&&(t.removeCustomData("list_marker_id"),delete e[s])},function(){function e(e,t){return-1<(" "+e+" ").replace(s," ").indexOf(" "+t+" ")}function t(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function i(e,t){var i=CKEDITOR.tools.escapeCss(e.$.id);return"#"+i+" "+t.split(/,\s*/).join(", #"+i+" ")}function n(e){for(var t=0,i=0,n=r[e].length;i<n;i++)t+=parseFloat(this.getComputedStyle(r[e][i])||0,10)||0;return t}var o=void 0!==(o=document.createElement("_").classList)&&null!==String(o.add).match(/\[Native code\]/gi),s=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:o?function(e){return this.$.classList.add(e),this}:function(t){var i=this.$.className;return i&&(e(i,t)||(i+=" "+t)),this.$.className=i||t,this},removeClass:o?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(t){var i=this.getAttribute("class");return i&&e(i,t)&&((i=i.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",i):this.removeAttribute("class")),this},hasClass:function(t){return e(this.$.className,t)},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e,t){var i=new CKEDITOR.dom.range(this.getDocument());i.setStartAfter(this),i.setEndAfter(e);var n,o=i.extractContents(!1,t||!1);if(i.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(i=new CKEDITOR.dom.element("div");n=o.getFirst();)n.$.style.backgroundColor&&(n.$.style.backgroundColor=n.$.style.backgroundColor),i.append(n);i.insertAfter(this),i.remove(!0)}else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(16&this.$.compareDocumentPosition(e.$))}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(e){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),e?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),t):t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var i=this.getDocument()._getHtml5ShivFrag();return i.appendChild(t),t.innerHTML=e,i.removeChild(t),e}catch(i){for(this.$.innerHTML="",(t=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(e=this.$.getAttribute(e,2))&&0===this.$.tabIndex&&(e=null),e;case"checked":return((e=this.$.attributes.getNamedItem(e)).specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:function(e){return this.$.getAttribute(e,2)},getAttributes:function(e){var t,i={},n=this.$.attributes;for(e=CKEDITOR.tools.isArray(e)?e:[],t=0;t<n.length;t++)-1===CKEDITOR.tools.indexOf(e,n[t].name)&&(i[n[t].name]=n[t].value);return i},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==e&&(!(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span)||!e["#"]))},isIdentical:function(e){var t=this.clone(0,1);if(e=e.clone(0,1),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var i=this.getParent();i.type==CKEDITOR.NODE_ELEMENT&&((i=i.clone()).setHtml(t),t=i.getHtml(),i.setHtml(e),e=i.getHtml())}return t==e},isVisible:function(){var e,t,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&CKEDITOR.env.webkit&&!(e=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(i=new CKEDITOR.dom.element(t).isVisible()),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,i=e.count();t<i;t++){var n=e.getItem(t);if((n.type!=CKEDITOR.NODE_ELEMENT||!n.data("cke-bookmark"))&&(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEmptyInlineRemoveable()||n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var i=e[t];switch(i.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(i.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,i={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!i[e[0].nodeName]||2==t&&!i[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(e=this.getAttribute("type"))||"radio"==e?"on"!=this.$.value:!!this.$.value}return!!t&&t.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var i,n=this.$;if(n!=(e=e.$))if(t)for(;i=n.lastChild;)e.insertBefore(n.removeChild(i),e.firstChild);else for(;i=n.firstChild;)e.appendChild(n.removeChild(i))},mergeSiblings:function(){function e(e,t,i){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var n=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(n.push(t),!(t=i?t.getNext():t.getPrevious())||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var o=i?e.getLast():e.getFirst();n.length;)n.shift().move(e,!i);t.moveChildren(e,!i),t.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,i){return"class"==t?this.$.className=i:"style"==t?this.$.style.cssText=i:"tabindex"==t?this.$.tabIndex=i:"checked"==t?this.$.checked=i:"contenteditable"==t?e.call(this,"contentEditable",i):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,i){if("src"==t&&i.match(/^http:\/\//))try{e.apply(this,arguments)}catch(e){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:function(e){this.$.removeAttribute(e)},removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes())e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){if((n=this.$.style).removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)n.removeProperty?n.removeProperty(e):n.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var t,i=["top","left","right","bottom"];"border"==e&&(t=["color","style","width"]);for(var n=[],o=0;o<i.length;o++)if(t)for(var s=0;s<t.length;s++)n.push([e,i[o],t[s]].join("-"));else n.push([e,i[o]].join("-"));for(e=0;e<n.length;e++)this.removeStyle(n[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e=this.getElementsByTag("*"),t=0,i=e.count();t<i;t++)e.getItem(t).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,i=0,n=this.getDocument(),o=n.getBody(),s="BackCompat"==n.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,i+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,i+=l.$.clientTop||0);c&&!c.equals(l);)t-=c.$.scrollLeft,i-=c.$.scrollTop,c=c.getParent();c=l,l=(r=l.$.offsetParent)?new CKEDITOR.dom.element(r):null}else{var r=this.$.getBoundingClientRect(),a=n.$.documentElement,l=a.clientTop||o.$.clientTop||0,c=a.clientLeft||o.$.clientLeft||0,u=!0;CKEDITOR.env.ie&&(u=n.getDocumentElement().contains(this),n=n.getBody().contains(this),u=s&&n||!s&&u),u&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(t=o.$.scrollLeft||a.scrollLeft,i=o.$.scrollTop||a.scrollTop):(t=(i=s?o.$:a).scrollLeft,i=i.scrollTop),t=r.left+t-c,i=r.top+i-l)}return e&&(r=this.getWindow(),l=e.getWindow(),!r.equals(l)&&r.$.frameElement&&(t+=(e=new CKEDITOR.dom.element(r.$.frameElement).getDocumentPosition(e)).x,i+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||s||(t+=this.$.clientLeft?1:0,i+=this.$.clientTop?1:0),{x:t,y:i}},scrollIntoView:function(e){var t=this.getParent();if(t)do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var i=t.getWindow();try{var n=i.$.frameElement;n&&(t=new CKEDITOR.dom.element(n))}catch(e){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,i){var n,o,s,r;function a(t,i){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,i):(e.$.scrollLeft+=t,e.$.scrollTop+=i)}function l(e,t){var i={x:0,y:0};if(!e.is(u?"body":"html")){var n=e.$.getBoundingClientRect();i.x=n.left,i.y=n.top}return(n=e.getWindow()).equals(t)||(n=l(CKEDITOR.dom.element.get(n.$.frameElement),t),i.x+=n.x,i.y+=n.y),i}function c(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}!e&&(e=this.getWindow());var u="BackCompat"==(s=e.getDocument()).$.compatMode;e instanceof CKEDITOR.dom.window&&(e=u?s.getBody():s.getDocumentElement()),CKEDITOR.env.webkit&&(s=this.getEditor(!1))&&(s._.previousScrollTop=null),o=l(this,s=e.getWindow());var d=l(e,s),h=this.$.offsetHeight;n=this.$.offsetWidth;var p=e.$.clientHeight,m=e.$.clientWidth;s=o.x-c(this,"left")-d.x||0,r=o.y-c(this,"top")-d.y||0,n=o.x+n+c(this,"right")-(d.x+m)||0,o=o.y+h+c(this,"bottom")-(d.y+p)||0,(0>r||0<o)&&a(0,!0===t?r:!1===t?o:0>r?r:o),i&&(0>s||0<n)&&a(0>s?s:n,0)},setState:function(e,t,i){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),i&&this.setAttribute("aria-pressed",!0),i&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),i&&this.setAttribute("aria-disabled",!0),i&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),i&&this.removeAttribute("aria-pressed"),i&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){var i=this.$.attributes;t=t||{};for(var n=0;n<i.length;n++){var o,s=i[n],r=s.nodeName.toLowerCase();r in t||("checked"==r&&(o=this.getAttribute(r))?e.setAttribute(r,o):CKEDITOR.env.ie&&!this.hasAttribute(r)||(null===(o=this.getAttribute(r))&&(o=s.nodeValue),e.setAttribute(r,o)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t),this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var i=e.childNodes;if(0<=t&&t<i.length)return i[t]}return function(t){var i=this.$;if(t.slice)for(t=t.slice();0<t.length&&i;)i=e(i,t.shift());else i=e(i,t);return i?new CKEDITOR.dom.node(i):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()}))},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(e){var t,i,n,o=CKEDITOR.instances;for(t in e=e||void 0===e,o)if((i=o[t]).element.equals(this)&&i.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(n=i.editable())&&(n.equals(this)||n.contains(this)))return i;return null},find:function(e){var n=t(this);return e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i(this,e))),n(),e},findOne:function(e){var n=t(this);return e=this.$.querySelector(i(this,e)),n(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(!1!==n){i=this.getChildren();for(var o=0;o<i.count();o++)(n=i.getItem(o)).type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):t&&n.type!=t||e(n)}}});var r={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,i){"number"==typeof t&&(!i||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=n.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var i=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(i-=n.call(this,e)),i}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var i=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,i.collapsed)return this.end(),null;i.optimize()}var n,o=i.startContainer;n=i.endContainer;var s,r=i.startOffset,a=i.endOffset,l=this.guard,c=this.type,u=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var d=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),h=n.type==CKEDITOR.NODE_ELEMENT?n.getChild(a):n.getNext();this._.guardLTR=function(e,t){return!(t&&d.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))}}if(e&&!this._.guardRTL){var p=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),m=o.type==CKEDITOR.NODE_ELEMENT?r?o.getChild(r-1):null:o.getPrevious();this._.guardRTL=function(e,t){return!(t&&p.equals(e)||m&&e.equals(m)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))}}var g=e?this._.guardRTL:this._.guardLTR;for(s=l?function(e,t){return!1!==g(e,t)&&l(e,t)}:g,this.current?n=this.current[u](!1,c,s):(e?n.type==CKEDITOR.NODE_ELEMENT&&(n=0<a?n.getChild(a-1):!1===s(n,!0)?null:n.getPreviousSourceNode(!0,c,s)):(n=o).type==CKEDITOR.NODE_ELEMENT&&((n=n.getChild(r))||(n=!1===s(o,!0)?null:o.getNextSourceNode(!0,c,s))),n&&!1===s(n)&&(n=null));n&&!this._.end;){if(this.current=n,this.evaluator&&!1===this.evaluator(n)){if(t&&this.evaluator)return!1}else if(!t)return n;n=n[u](!1,c,s)}return this.end(),this.current=null}function t(t){for(var i,n=null;i=e.call(this,t);)n=i;return n}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var i={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},n={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in n||!i[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function i(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(n){var o,s;return o=n&&n.type!=CKEDITOR.NODE_ELEMENT&&(s=n.getParent())&&i(s),o=e?o:o||i(n),!!(t^o)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var i;return t&&t.type==CKEDITOR.NODE_TEXT&&(i=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(e^i)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.env.webkit?1:0;return function(n){return t(n)?n=1:(n.type==CKEDITOR.NODE_TEXT&&(n=n.getParent()),n=n.$.offsetWidth<=i),!!(e^n)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(i){return!!(t^i.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!s(e)&&!r(e)}return function(i){var n=CKEDITOR.env.needsBrFiller?i.is&&i.is("br"):i.getText&&o.test(i.getText());return n&&(n=i.getParent(),i=i.getNext(t),n=n.isBlockBoundary()&&(!i||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())),!!(e^n)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.whitespaces(),r=CKEDITOR.dom.walker.bookmark(),a=CKEDITOR.dom.walker.temp(),l=function(e){return r(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=s(t)||r(t)||a(t),!!(e^t)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var i=0,n=t.getChildCount();i<n;++i)if(!c(t.getChild(i)))return!!e;return!e}};var u=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t,i={};for(t in e)CKEDITOR.dtd[t]["#"]&&(i[t]=1);return i}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!c(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(d)&&u(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do{e=e.getPreviousSourceNode()}while(l(e));return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&o.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,i,n,o){function s(e,t,i,n){var s=i?e.getPrevious():e.getNext();return n&&r||(l||n?t.append(e.clone(!0,o),i):(e.remove(),a&&t.append(e,i))),s}e.optimizeBookmark();var r=0===t,a=1==t,l=2==t;t=l||a;var c,u,d,h,p,m,g=e.startContainer,f=e.endContainer,y=e.startOffset,b=e.endOffset;if(l&&f.type==CKEDITOR.NODE_TEXT&&(g.equals(f)||g.type===CKEDITOR.NODE_ELEMENT&&g.getFirst().equals(f)))i.append(e.document.createText(f.substring(y,b)));else{f.type==CKEDITOR.NODE_TEXT?l?m=!0:f=f.split(b):0<f.getChildCount()?b>=f.getChildCount()?(f=f.getChild(b-1),u=!0):f=f.getChild(b):h=u=!0,g.type==CKEDITOR.NODE_TEXT?l?p=!0:g.split(y):0<g.getChildCount()?0===y?(g=g.getChild(y),c=!0):g=g.getChild(y-1):d=c=!0;for(var v,_,C,w=g.getParents(),T=f.getParents(),E=function(){var e,t,i,n=Math.min(w.length,T.length);for(e=0;e<n;e++)if(t=w[e],i=T[e],!t.equals(i))return e;return e-1}(),I=w.length-1,x=T.length-1,S=i,k=-1,D=E;D<=I;D++){for(C=(_=w[D]).getNext(),D!=I||_.equals(T[D])&&I<x?t&&(v=S.append(_.clone(0,o))):c?s(_,S,!1,d):p&&S.append(e.document.createText(_.substring(y)));C;){if(C.equals(T[D])){k=D;break}C=s(C,S)}S=v}for(S=i,D=E;D<=x;D++)if(C=(i=T[D]).getPrevious(),i.equals(w[D]))t&&(S=S.getChild(0));else{if(D!=x||i.equals(w[D])&&x<I?t&&(v=S.append(i.clone(0,o))):u?s(i,S,!1,h):m&&S.append(e.document.createText(i.substring(0,b))),D>k)for(;C;)C=s(C,S,!0);S=v}l||function(){var t=E-1,i=d&&h&&!g.equals(f);t<I-1||t<x-1||i?(i?e.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START):x==t+1&&u?e.moveToPosition(T[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(T[t+1],CKEDITOR.POSITION_BEFORE_START),n&&(t=w[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&((i=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document)).insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:i}))):e.collapse(!0)}()}}function i(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!0),n=CKEDITOR.dom.walker.bogus();return function(s){return!(!i(s)&&!t(s))||(n(s)&&!e?e=!0:!(s.type==CKEDITOR.NODE_TEXT&&(s.hasAscendant("pre")||CKEDITOR.tools.trim(s.getText()).length)||s.type==CKEDITOR.NODE_ELEMENT&&!s.is(o)))}}function n(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"]((function(e){return!t&&l(e)&&(t=e),a(e)&&!(s(e)&&e.equals(t))}))}}var o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},s=CKEDITOR.dom.walker.bogus(),r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,i,!1,void 0===e||e),i},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,i){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,n,e,void 0===i||i),n},createBookmark:function(e){var t,i,n,o,s=this.collapsed;return(t=this.document.createElement("span")).data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(n="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",n+(s?"C":"S"))),s||((i=t.clone()).setHtml("&nbsp;"),e&&i.setAttribute("id",n+"E"),(o=this.clone()).collapse(),o.insertNode(i)),(o=this.clone()).collapse(!0),o.insertNode(t),i?(this.setStartAfter(t),this.setEndBefore(i)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?n+(s?"C":"S"):t,endNode:e?n+"E":i,serializable:e,collapsed:s}},createBookmark2:function(){function e(e){var t,n=e.container,o=e.offset,s=o;if((t=(t=n).type!=CKEDITOR.NODE_ELEMENT||0===s||s==t.getChildCount()?0:t.getChild(s-1).type==CKEDITOR.NODE_TEXT&&t.getChild(s).type==CKEDITOR.NODE_TEXT)&&(o=(n=n.getChild(o-1)).getLength()),n.type==CKEDITOR.NODE_ELEMENT&&0<o){e:{for(t=n;o--;)if(0<=(s=t.getChild(o).getIndex(!0))){o=s;break e}o=-1}o+=1}if(n.type==CKEDITOR.NODE_TEXT){for(t=n,s=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)s+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;t=s,n.getText()?o+=t:(s=n.getPrevious(i),t?(o=t,n=s?s.getNext():n.getParent().getFirst()):(n=n.getParent(),o=s?s.getIndex(!0)+1:0))}e.container=n,e.offset=o}function t(e,t){var i=t.getCustomData("cke-fillingChar");if(i){var n=e.container;i.equals(n)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=n.getIndex(),e.container=n.getParent()))}}var i=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(i){var n=this.collapsed,o={container:this.startContainer,offset:this.startOffset},s={container:this.endContainer,offset:this.endOffset};return i&&(e(o),t(o,this.root),n||(e(s),t(s,this.root))),{start:o.container.getAddress(i),end:n?null:s.container.getAddress(i),startOffset:o.offset,endOffset:s.offset,normalized:i,collapsed:n,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),i=e.startOffset,n=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,i),n?this.setEnd(n,e):this.collapse(!0)}else t=(i=e.serializable)?this.document.getById(e.startNode):e.startNode,e=i?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,i=this.endContainer,n=this.startOffset,o=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if((e=t.getChildCount())>n)t=t.getChild(n);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=(t=new CKEDITOR.dom.node(t)).getNextSourceNode()||t}if(i.type==CKEDITOR.NODE_ELEMENT)if((e=i.getChildCount())>o)i=i.getChild(o).getPreviousSourceNode(!0);else if(1>e)i=i.getPreviousSourceNode();else{for(i=i.$;i.lastChild;)i=i.lastChild;i=new CKEDITOR.dom.node(i)}return t.getPosition(i)&CKEDITOR.POSITION_FOLLOWING&&(t=i),{startNode:t,endNode:i}},getCommonAncestor:function(e,t){var i=this.startContainer,n=this.endContainer;return i=i.equals(n)?e&&i.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?i.getChild(this.startOffset):i:i.getCommonAncestor(n),t&&!i.is?i.getParent():i},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var i=this.startContainer,n=this.startOffset,o=this.collapsed;if((!e||o)&&i&&i.type==CKEDITOR.NODE_TEXT){if(n)if(n>=i.getLength())n=i.getIndex()+1,i=i.getParent();else{var s=i.split(n);n=i.getIndex()+1,i=i.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(s,this.endOffset-this.startOffset):i.equals(this.endContainer)&&(this.endOffset+=1)}else n=i.getIndex(),i=i.getParent();if(this.setStart(i,n),o)return void this.collapse(!0)}i=this.endContainer,n=this.endOffset,t||o||!i||i.type!=CKEDITOR.NODE_TEXT||(n?(n>=i.getLength()||i.split(n),n=i.getIndex()+1):n=i.getIndex(),i=i.getParent(),this.setEnd(i,n))},enlarge:function(e,t){function i(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var n=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var o=1;case CKEDITOR.ENLARGE_ELEMENT:var s=function(e,t){var i,o;for((i=new CKEDITOR.dom.range(m)).setStart(e,t),i.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};o=i.next();){if(o.type!=CKEDITOR.NODE_TEXT)return!1;if(h=o!=e?o.getText():o.substring(t),n.test(h))return!1}return!0};if(this.collapsed)break;var r,a,l,c,u,d,h,p=this.getCommonAncestor(),m=this.root,g=!1;d=this.startContainer;var f=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(f&&(g=!!(d=!CKEDITOR.tools.trim(d.substring(0,f)).length&&d)),d&&((c=d.getPrevious())||(l=d.getParent()))):(f&&(c=d.getChild(f-1)||d.getLast()),c||(l=d)),l=i(l);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),o?l.isBlockBoundary():!m.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?r=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(d=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)h=c.getText(),n.test(h)&&(c=null),d=/[\s\ufeff]$/.test(h);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),n.test(h))c=null;else{f=c.$.getElementsByTagName("*");for(var y,b=0;y=f[b++];)if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){c=null;break}}c&&(d=!!h.length)}else c=null;if(d&&(g?u?r=l:l&&this.setStartBefore(l):g=!0),c){if(d=c.getPrevious(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=i(l.getParent()))}for(d=this.endContainer,f=this.endOffset,l=c=null,u=g=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(f)).length?g=!0:(g=!d.getLength(),f==d.getLength()?(c=d.getNext())||(l=d.getParent()):s(d,f)&&(l=d.getParent())):(c=d.getChild(f))||(l=d);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),o?l.isBlockBoundary():!m.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?a=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(d=!1,c.type==CKEDITOR.NODE_TEXT)h=c.getText(),s(c,0)||(c=null),d=/^[\s\ufeff]/.test(h);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||t&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),n.test(h))c=null;else for(f=c.$.getElementsByTagName("*"),b=0;y=f[b++];)if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){c=null;break}c&&(d=!!h.length)}else c=null}else d=1;if(d&&g&&(u?a=l:this.setEndAfter(l)),c){if(d=c.getNext(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=i(l.getParent()))}r&&a&&(p=r.contains(a)?a:r,this.setStartBefore(p),this.setEndAfter(p));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),m=this.root,l.setStartAt(m,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var v,_,C=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),w=null,T=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(w){if(w.equals(e))return void(w=null)}else w=e;else if(w)return;var t=C(e);return t||(v=e),t};if(o=function(e){var t=T(e);return!t&&e.is&&e.is("br")&&(_=e),t},l.guard=T,l=l.lastBackward(),v=v||m,this.setStartAt(v,!v.is("br")&&(!l&&this.checkStartOfBlock()||l&&v.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var E=CKEDITOR.dom.walker.whitespaces(),I=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(e){return!E(e)&&!I(e)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?o:T,v=w=_=null,l=l.lastForward(),v=v||m,this.setEndAt(v,!l&&this.checkEndOfBlock()||l&&v.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),_&&this.setEndAfter(_)}},shrink:function(e,t,i){var n="boolean"==typeof i?i:!i||"boolean"!=typeof i.shrinkOnBlockBoundary||i.shrinkOnBlockBoundary,o=i&&i.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var s=this.clone(),r=this.startContainer,a=this.endContainer,l=this.startOffset,c=this.endOffset,u=i=1;r&&r.type==CKEDITOR.NODE_TEXT&&(l?l>=r.getLength()?s.setStartAfter(r):(s.setStartBefore(r),i=0):s.setStartBefore(r)),a&&a.type==CKEDITOR.NODE_TEXT&&(c?c>=a.getLength()?s.setEndAfter(a):(s.setEndAfter(a),u=0):s.setEndBefore(a)),s=new CKEDITOR.dom.walker(s);var d,h=CKEDITOR.dom.walker.bookmark(),p=CKEDITOR.dom.walker.bogus();return s.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},s.guard=function(t,i){return!!(o&&p(t)||h(t))||!(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||i&&t.equals(d)||!1===n&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(i||t.type!=CKEDITOR.NODE_ELEMENT||(d=t),!0)},i&&(r=s[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(r,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),u&&(s.reset(),(s=s[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(s,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!i&&!u)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,i=t.getChild(this.startOffset);i?e.insertBefore(i):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,i){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(i=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=i,this.endContainer||(this._setEndContainer(t),this.endOffset=i),e(this)},setEnd:function(t,i){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(i=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=i,this.startContainer||(this._setStartContainer(t),this.startOffset=i),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,i){switch(i){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,i){switch(i){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var i=this.createBookmark(),n=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(n),n.trim(),this.insertNode(n);var o=n.getBogus();return o&&o.remove(),n.appendBogus(),this.moveToBookmark(i),n},splitBlock:function(e,t){var i=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),o=i.block,s=n.block,r=null;return i.blockLimit.equals(n.blockLimit)?("br"!=e&&(o||(o=this.fixBlock(!0,e),s=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),s||(s=this.fixBlock(!1,e))),i=o&&this.checkStartOfBlock(),n=s&&this.checkEndOfBlock(),this.deleteContents(),o&&o.equals(s)&&(n?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(s,CKEDITOR.POSITION_AFTER_END),s=null):i?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o=null):(s=this.splitElement(o,t||!1),o.is("ul","ol")||o.appendBogus())),{previousBlock:o,nextBlock:s,wasStartOfBlock:i,wasEndOfBlock:n,elementPath:r}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var i=this.extractContents(!1,t||!1),n=e.clone(!1,t||!1);return i.appendTo(n),n.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),n},removeEmptyBlocksAtEnd:function(){function e(e){return function(n){return!(t(n)||i(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isEmptyInlineRemoveable()||e.is("table")&&n.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var i,n=this.createBookmark(),o=this[t?"endPath":"startPath"](),s=o.block||o.blockLimit;s&&!s.equals(o.root)&&!s.getFirst(e(s));)i=s.getParent(),this[t?"setEndAt":"setStartAt"](s,CKEDITOR.POSITION_AFTER_END),s.remove(1),s=i;this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var i=t==CKEDITOR.START,n=this.clone();return n.collapse(i),n[i?"setStartAt":"setEndAt"](e,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).evaluator=function(e){var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(1);return function(n){return!(!i(n)&&!t(n))||!e&&s(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.$removeEmpty)}}(i),n[i?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),r.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=i(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),r.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=i(),e.checkForward()},getPreviousNode:function(e,t,i){var n=this.clone();return n.collapse(1),n.setStartAt(i||this.root,CKEDITOR.POSITION_AFTER_START),(i=new CKEDITOR.dom.walker(n)).evaluator=e,i.guard=t,i.previous()},getNextNode:function(e,t,i){var n=this.clone();return n.collapse(),n.setEndAt(i||this.root,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(n)).evaluator=e,i.guard=t,i.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,i=this.endContainer;return!(e(t,i)&&e(i,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var i=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&r.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),i=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),i=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var n=e,o=i,s=void 0;n.type==CKEDITOR.NODE_ELEMENT&&n.isEditable(!1)&&(s=n[t?"getLast":"getFirst"](l)),o||s||(s=n[t?"getPrevious":"getNext"](l)),e=s}return!!i},moveToClosestEditablePosition:function(e,t){var i,n,o,s=0,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(i=new CKEDITOR.dom.range(this.root)).moveToPosition(e,r[t?0:1]):i=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?s=1:(n=i[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(s=1,(o=n.type==CKEDITOR.NODE_ELEMENT)&&n.is(CKEDITOR.dtd.$block)&&"false"==n.getAttribute("contenteditable")?(i.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),i.setEndAt(n,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&o&&n.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(i.setEnd(n,0),i.collapse()):i.moveToPosition(n,r[t?1:0])),s&&this.moveToRange(i),!!s},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return i(e)&&t(e)};var n=e.next();return e.reset(),n&&n.equals(e.previous())?n:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:n(),getPreviousEditableNode:n(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.startContainer,i=this.endContainer,n=t.getAscendant("table",!0),o=i.getAscendant("table",!0);return CKEDITOR.env.safari&&n&&i.equals(this.root)?t.getAscendant(e,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):n&&o&&(n.equals(o)||n.contains(o)||o.contains(n))?t.getAscendant(e,!0):null},scrollIntoView:function(){var e,t,i,n=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(i=o.startContainer.type==CKEDITOR.NODE_TEXT)?(t=o.startContainer.getText(),e=o.startContainer.split(o.startOffset),n.insertAfter(o.startContainer)):o.insertNode(n),n.scrollIntoView(),i&&(o.startContainer.setText(t),e.remove()),n.remove()},getClientRects:function(){function e(e,t,n){var o;return t.collapsed?n.startContainer instanceof CKEDITOR.dom.element?(e=n.checkStartOfBlock(),o=new CKEDITOR.dom.text("​"),e?n.startContainer.append(o,!0):0===n.startOffset?o.insertBefore(n.startContainer.getFirst()):(n=n.startContainer.getChildren().getItem(n.startOffset-1),o.insertAfter(n)),t.setStart(o.$,0),t.setEnd(o.$,0),e=t.getClientRects(),o.remove()):n.startContainer instanceof CKEDITOR.dom.text&&(""===n.startContainer.getText()?(n.startContainer.setText("​"),e=t.getClientRects(),n.startContainer.setText("")):e=[i(n.createBookmark())]):e=[i(n.createBookmark())],e}function t(e,t,i){return e=CKEDITOR.tools.extend({},e),t&&(e=CKEDITOR.tools.getAbsoluteRectPosition(i.document.getWindow(),e)),!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e}function i(e){var t,i=e.startNode;return e=e.endNode,i.setText("​"),i.removeStyle("display"),e?(e.setText("​"),e.removeStyle("display"),t=[i.getClientRect(),e.getClientRect()],e.remove()):t=[i.getClientRect(),i.getClientRect()],i.remove(),{right:Math.max(t[0].right,t[1].right),bottom:Math.max(t[0].bottom,t[1].bottom),left:Math.min(t[0].left,t[1].left),top:Math.min(t[0].top,t[1].top),width:Math.abs(t[0].left-t[1].left),height:Math.max(t[0].bottom,t[1].bottom)-Math.min(t[0].top,t[1].top)}}return void 0!==this.document.getSelection?function(i){var n,o=this.root.getDocument().$.createRange();return o.setStart(this.startContainer.$,this.startOffset),o.setEnd(this.endContainer.$,this.endOffset),n=function(e,t){var i,n,o,s=CKEDITOR.tools.array.map(e,(function(e){return e})),r=new CKEDITOR.dom.range(t.root);if(t.startContainer instanceof CKEDITOR.dom.element&&(n=0===t.startOffset&&t.startContainer.hasAttribute("data-widget")),t.endContainer instanceof CKEDITOR.dom.element&&(o=(o=t.endOffset===(t.endContainer.getChildCount?t.endContainer.getChildCount():t.endContainer.length))&&t.endContainer.hasAttribute("data-widget")),n&&r.setStart(t.startContainer.getParent(),t.startContainer.getIndex()),o&&r.setEnd(t.endContainer.getParent(),t.endContainer.getIndex()+1),(n||o)&&(t=r),r=t.cloneContents(),r=CKEDITOR.dom.document.prototype.find.call(r,"[data-cke-widget-id]").toArray(),r=CKEDITOR.tools.array.map(r,(function(e){var i=t.root.editor;return e=e.getAttribute("data-cke-widget-id"),i.widgets.instances[e].element})))return r=CKEDITOR.tools.array.map(r,(function(e){var t;return t=e.getParent().hasClass("cke_widget_wrapper")?e.getParent():e,(i=this.root.getDocument().$.createRange()).setStart(t.getParent().$,t.getIndex()),i.setEnd(t.getParent().$,t.getIndex()+1),(t=i.getClientRects()).widgetRect=e.getClientRect(),t}),t),CKEDITOR.tools.array.forEach(r,(function(e){var t;!function i(n){CKEDITOR.tools.array.forEach(s,(function(i,o){var r=CKEDITOR.tools.objectCompare(e[n],i);r||(r=CKEDITOR.tools.objectCompare(e.widgetRect,i)),r&&(Array.prototype.splice.call(s,o,e.length-n,e.widgetRect),t=!0)})),t||(n<s.length-1?i(n+1):s.push(e.widgetRect))}(0)})),s}(n=o.getClientRects(),this),n.length||(n=e(n,o,this)),CKEDITOR.tools.array.map(n,(function(e){return t(e,i,this)}),this)}:function(e){return[t(i(this.createBookmark()),e,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var i,n,o,s,r=this.getCommonAncestor(),a=this.getBoundaryNodes(),l=[];if(r&&r.find)for(n=r.find(e),i=0;i<n.count();i++)r=n.getItem(i),(t||!r.isReadOnly())&&(o=r.getPosition(a.startNode)&CKEDITOR.POSITION_FOLLOWING||a.startNode.equals(r),s=r.getPosition(a.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||a.endNode.equals(r),o&&s&&l.push(r));return l}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,(function(e,t){var i=e[e.length-1],n=!1;if((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),i){var o=new CKEDITOR.dom.range(t.root),s=(n=new CKEDITOR.dom.walker(o),CKEDITOR.dom.walker.whitespaces());for(o.setStart(i.endContainer,i.endOffset),o.setEnd(t.startContainer,t.startOffset),o=n.next();s(o)||t.endContainer.equals(o);)o=n.next();n=!o}return n?i.setEnd(t.endContainer,t.endOffset):e.push(t),e}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e,i,n,o){e:{null==o&&(o=function(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}(n));for(var s;s=o.shift();)if(s.getDtd().p){o={element:s,remaining:o};break e}o=null}return o?(s=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!s.check(i)?t(e,i,n,o.remaining):((i=new CKEDITOR.dom.range(o.element)).selectNodeContents(o.element),(i=i.createIterator()).enlargeBr=e.enlargeBr,i.enforceRealBlocks=e.enforceRealBlocks,i.activeFilter=i.filter=s,e._.nestedEditable={element:o.element,container:n,remaining:o.remaining,iterator:i},1):0}function i(e,t,i){return!!t&&((e=e.clone()).collapse(!i),e.checkBoundaryOfElement(t,i?CKEDITOR.START:CKEDITOR.END))}var n=/^[\r\n\t ]+$/,o=CKEDITOR.dom.walker.bookmark(!1,!0),s=CKEDITOR.dom.walker.whitespaces(!0),r=function(e){return o(e)&&s(e)},a={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var s,l,c,u,d;if(e=e||"p",this._.nestedEditable){if(s=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,s;if(this.activeFilter=this.filter,t(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var h=this.range.clone();l=h.startPath();var p=h.endPath(),m=!h.collapsed&&i(h,l.block),g=!h.collapsed&&i(h,p.block,1);h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),m&&h.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),g&&h.setEndAt(p.block,CKEDITOR.POSITION_AFTER_START),l=h.endContainer.hasAscendant("pre",!0)||h.startContainer.hasAscendant("pre",!0),h.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),h.collapsed||(l=new CKEDITOR.dom.walker(h.clone()),p=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=p,this._.nextNode=l.next(),(l=new CKEDITOR.dom.walker(h.clone())).evaluator=p,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,h.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((p=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),p.checkEndOfBlock()&&(p=new CKEDITOR.dom.elementPath(p.endContainer,p.root),this._.lastNode=(p.block||p.blockLimit).getNextSourceNode(!0))),this._.lastNode&&h.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=h.document.createText(""),this._.lastNode.insertAfter(l)),h=null),this._.started=1,l=h}for(p=this._.nextNode,h=this._.lastNode,this._.nextNode=null;p;){m=0,g=p.hasAscendant("pre");var f=p.type!=CKEDITOR.NODE_ELEMENT,y=0;if(f)p.type==CKEDITOR.NODE_TEXT&&n.test(p.getText())&&(f=0);else{var b=p.getName();if(CKEDITOR.dtd.$block[b]&&"false"==p.getAttribute("contenteditable")){t(this,e,s=p);break}if(p.isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){if("br"==b)f=1;else if(!l&&!p.getChildCount()&&"hr"!=b){s=p,c=p.equals(h);break}l&&(l.setEndAt(p,CKEDITOR.POSITION_BEFORE_START),"br"!=b&&(this._.nextNode=p)),m=1}else{if(p.getFirst()){l||(l=this.range.clone()).setStartAt(p,CKEDITOR.POSITION_BEFORE_START),p=p.getFirst();continue}f=1}}if(f&&!l&&(l=this.range.clone()).setStartAt(p,CKEDITOR.POSITION_BEFORE_START),c=(!m||f)&&p.equals(h),l&&!m)for(;!p.getNext(r)&&!c;){if((b=p.getParent()).isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){m=1,f=0,c||b.equals(h),l.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);break}f=1,c=(p=b).equals(h),y=1}if(f&&l.setEndAt(p,CKEDITOR.POSITION_AFTER_END),(c=!(p=this._getNextSourceNode(p,y,h)))||m&&l)break}if(!s){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;p=(s=new CKEDITOR.dom.elementPath(l.startContainer,l.root)).blockLimit,m={div:1,th:1,td:1},!(s=s.block)&&p&&!this.enforceRealBlocks&&m[p.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!p.equals(l.root)?s=p:!s||this.enforceRealBlocks&&s.is(a)?(s=this.range.document.createElement(e),l.extractContents().appendTo(s),s.trim(),l.insertNode(s),u=d=!0):"li"!=s.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(s=s.clone(!1),l.extractContents().appendTo(s),s.trim(),u=!(d=l.splitBlock()).wasStartOfBlock,d=!d.wasEndOfBlock,l.insertNode(s)):c||(this._.nextNode=s.equals(h)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,h))}return u&&(u=s.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove()),d&&(u=s.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(o)||u.getNext(o))&&u.remove(),this._.nextNode||(this._.nextNode=c||s.equals(h)||!h?null:this._getNextSourceNode(s,1,h)),s},_getNextSourceNode:function(e,t,i){function n(e){return!(e.equals(i)||e.equals(s))}var s=this.range.root;for(e=e.getNextSourceNode(t,null,n);!o(e);)e=e.getNextSourceNode(t,null,n);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){var i;this.uiItems=[],this.exec=function(i){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,e,i))},this.refresh=function(e,i){return!(this.readOnly||!e.readOnly)||(this.context&&!i.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:i})||t.refresh&&!1!==t.refresh.apply(this,arguments)))},this.checkAllowed=function(t){return t||"boolean"!=typeof i?i=e.activeFilter.checkFeature(this):i},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=e,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,i,n,o){var s,a,l;for(s in e=[],t){a="boolean"==typeof(a=t[s])?{}:"function"==typeof a?{match:a}:I(a),"$"!=s.charAt(0)&&(a.elements=s),i&&(a.featureName=i.toLowerCase());var c=a;c.elements=r(c.elements,/\s+/)||null,c.propertiesOnly=c.propertiesOnly||!0===c.elements;var u=/\s*,\s*/,d=void 0;for(d in D){c[d]=r(c[d],u)||null;var h=c,p=O[d],m=r(c[O[d]],u),f=c[d],y=[],b=!0,v=void 0;for(v in m?b=!1:m={},f)"!"==v.charAt(0)&&(v=v.slice(1),y.push(v),m[v]=!0,b=!1);for(;v=y.pop();)f[v]=f["!"+v],delete f["!"+v];h[p]=!b&&m||null}c.match=c.match||null,n.push(a),e.push(a)}for(t=o.elements,o=o.generic,i=0,n=e.length;i<n;++i){for(u in a=!0===(s=I(e[i])).classes||!0===s.styles||!0===s.attributes,c=s,d=p=u=void 0,D)c[u]=g(c[u]);for(d in h=!0,O){for(f in m=[],f=void 0,p=c[u=O[d]])-1<f.indexOf("*")?m.push(new RegExp("^"+f.replace(/\*/g,".*")+"$")):m.push(f);(p=m).length&&(c[u]=p,h=!1)}if(c.nothingRequired=h,c.noProperties=!(c.attributes||c.classes||c.styles),!0===s.elements||null===s.elements)o[a?"unshift":"push"](s);else for(l in c=s.elements,delete s.elements,c)t[l]?t[l][a?"unshift":"push"](s):t[l]=[s]}}function t(e,t,n,o){if((!e.match||e.match(t))&&(o||function(e,t){if(e.nothingRequired)return!0;var i,n,o,s;if(o=e.requiredClasses)for(s=t.classes,i=0;i<o.length;++i)if("string"==typeof(n=o[i])){if(-1==CKEDITOR.tools.indexOf(s,n))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(s,n))return!1;return a(t.styles,e.requiredStyles)&&a(t.attributes,e.requiredAttributes)}(e,t))&&(e.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=i(e.attributes,t.attributes,n.validAttributes)),n.allStyles||(n.allStyles=i(e.styles,t.styles,n.validStyles)),!n.allClasses)){if(e=e.classes,t=t.classes,o=n.validClasses,e)if(!0===e)e=!0;else{for(var s,r=0,l=t.length;r<l;++r)o[s=t[r]]||(o[s]=e(s));e=!1}else e=!1;n.allClasses=e}}function i(e,t,i){if(!e)return!1;if(!0===e)return!0;for(var n in t)i[n]||(i[n]=e(n));return!1}function n(e,t,i){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(i.hadInvalidAttribute=o(e.attributes,t.attributes)||i.hadInvalidAttribute,i.hadInvalidStyle=o(e.styles,t.styles)||i.hadInvalidStyle,e=e.classes,t=t.classes,e){for(var n=!1,s=!0===e,r=t.length;r--;)(s||e(t[r]))&&(t.splice(r,1),n=!0);e=n}else e=!1;i.hadInvalidClass=e||i.hadInvalidClass}}function o(e,t){if(!e)return!1;var i,n=!1,o=!0===e;for(i in t)(o||e(i))&&(delete t[i],n=!0);return n}function s(e,t,i){return!(e.disabled||e.customConfig&&!i||!t||(e._.cachedChecks={},0))}function r(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return"*"==(e=x(e))||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var i,n={},o=0;for(i in e)n[i]=e[i],o++;return!!o&&n}function a(e,t){if(!t)return!0;for(var i,n=0;n<t.length;++n)if("string"==typeof(i=t[n])){if(!(i in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,i))return!1;return!0}function l(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]="cke-test";return t}function c(e){var t,i,n,o,s={},r=1;for(e=x(e);t=e.match(R);)(i=t[2])?(n=u(i,"styles"),o=u(i,"attrs"),i=u(i,"classes")):n=o=i=null,s["$"+r++]={elements:t[1],classes:i,styles:n,attributes:o},e=e.slice(t[0].length);return s}function u(e,t){var i=e.match(P[t]);return i?x(i[1]):null}function d(e){var t=e.styleBackup=e.attributes.style,i=e.classBackup=e.attributes.class;e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=i?i.split(/\s+/):[])}function h(e,i,o,s){var r,a=0;if(s.toHtml&&(i.name=i.name.replace(L,"$1")),s.doCallbacks&&e.elementCallbacks){e:{for(var l,c=0,u=(r=e.elementCallbacks).length;c<u;++c)if(l=r[c](i)){r=l;break e}r=void 0}if(r)return r}if(s.doTransform&&(r=e._.transformations[i.name])){for(d(i),c=0;c<r.length;++c)v(e,i,r[c]);p(i)}if(s.doFilter){e:{c=i.name,e=(u=e._).allowedRules.elements[c],r=u.allowedRules.generic,c=u.disallowedRules.elements[c],u=u.disallowedRules.generic,l=s.skipRequired;var h,g,f={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(e||r){if(d(i),c)for(h=0,g=c.length;h<g;++h)if(!1===n(c[h],i,f)){e=null;break e}if(u)for(h=0,g=u.length;h<g;++h)n(u[h],i,f);if(e)for(h=0,g=e.length;h<g;++h)t(e[h],i,f,l);if(r)for(h=0,g=r.length;h<g;++h)t(r[h],i,f,l);e=f}else e=null}if(!e||!e.valid)return o.push(i),1;g=e.validAttributes;var y=e.validStyles;r=e.validClasses,c=i.attributes;var b=i.styles;u=i.classes,l=i.classBackup;var _,C,w=i.styleBackup,T=[],E=(f=[],/^data-cke-/);if(h=!1,delete c.style,delete c.class,delete i.classBackup,delete i.styleBackup,!e.allAttributes)for(_ in c)g[_]||E.test(_)&&(_==(C=_.replace(/^data-cke-saved-/,""))||g[C])||(delete c[_],h=!0);if(!e.allStyles||e.hadInvalidStyle){for(_ in b)e.allStyles||y[_]?T.push(_+":"+b[_]):h=!0;T.length&&(c.style=T.sort().join("; "))}else w&&(c.style=w);if(!e.allClasses||e.hadInvalidClass){for(_=0;_<u.length;++_)(e.allClasses||r[u[_]])&&f.push(u[_]);f.length&&(c.class=f.sort().join(" ")),l&&f.length<l.split(/\s+/).length&&(h=!0)}else l&&(c.class=l);if(h&&(a=1),!s.skipFinalValidation&&!m(i))return o.push(i),1}return s.toHtml&&(i.name=i.name.replace(A,"cke:$1")),a}function p(e){var t,i=e.attributes;delete i.style,delete i.class,(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(i.style=t),e.classes.length&&(i.class=e.classes.sort().join(" "))}function m(e){switch(e.name){case"a":if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function g(e){if(!e)return!1;if(!0===e)return!0;var t=function(e){var t,i=[];for(t in e)-1<t.indexOf("*")&&i.push(t.replace(/\*/g,".*"));return i.length?new RegExp("^(?:"+i.join("|")+")$"):null}(e);return function(i){return i in e||t&&i.match(t)}}function f(){return new CKEDITOR.htmlParser.element("br")}function y(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||E.$block[e.name])}function b(e,t,i){var n=e.name;if(E.$empty[n]||!e.children.length)"hr"==n&&"br"==t?e.replaceWith(f()):(e.parent&&i.push({check:"it",el:e.parent}),e.remove());else if(E.$block[n]||"tr"==n)if("br"==t)e.previous&&!y(e.previous)&&(t=f()).insertBefore(e),e.next&&!y(e.next)&&(t=f()).insertAfter(e),e.replaceWithChildren();else{var o;n=e.children;e:{o=E[t];for(var s,r=0,a=n.length;r<a;++r)if((s=n[r]).type==CKEDITOR.NODE_ELEMENT&&!o[s.name]){o=!1;break e}o=!0}if(o)e.name=t,e.attributes={},i.push({check:"parent-down",el:e});else{var l,c;for(r=(o=e.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,a=n.length;0<a;)s=n[--a],r&&(s.type==CKEDITOR.NODE_TEXT||s.type==CKEDITOR.NODE_ELEMENT&&E.$inline[s.name])?(l||((l=new CKEDITOR.htmlParser.element(t)).insertAfter(e),i.push({check:"parent-down",el:l})),l.add(s,0)):(l=null,c=E[o.name]||E.span,s.insertAfter(e),o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||s.type!=CKEDITOR.NODE_ELEMENT||c[s.name]||i.push({check:"el-up",el:s}));e.remove()}}else n in{style:1,script:1}?e.remove():(e.parent&&i.push({check:"it",el:e.parent}),e.replaceWithChildren())}function v(e,t,i){var n,o;for(n=0;n<i.length;++n)if(!((o=i[n]).check&&!e.check(o.check,!1)||o.left&&!o.left(t))){o.right(t,k);break}}function _(e,t){var i,n,o,s,r=t.getDefinition(),a=r.attributes,l=r.styles;if(e.name!=r.element)return!1;for(i in a)if("class"==i){for(r=a[i].split(/\s+/),o=e.classes.join("|");s=r.pop();)if(-1==o.indexOf(s))return!1}else if(e.attributes[i]!=a[i])return!1;for(n in l)if(e.styles[n]!=l[n])return!1;return!0}function C(e,t){var i,n;return"string"==typeof e?i=e:e instanceof CKEDITOR.style?n=e:(i=e[0],n=e[1]),[{element:i,left:n,right:function(e,i){i.transform(e,t)}}]}function w(e){return function(t){return _(t,e)}}function T(e){return function(t,i){i[e](t)}}var E=CKEDITOR.dtd,I=CKEDITOR.tools.copy,x=CKEDITOR.tools.trim,S=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this,e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;!0===t?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(S[e.enterMode]+" "+S[e.shiftEnterMode],"default",1),this.disallow(e.config.disallowedContent))}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,i,n){if(!s(this,t,n))return!1;var o,r;if("string"==typeof t)t=c(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),i,n);o=t.getDefinition(),t={},n=o.attributes,t[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.objectKeys(o.styles)},n&&(n=I(n),o.classes=n.class?n.class.split(/\s+/):null,o.requiredClasses=o.classes,delete n.class,o.attributes=n,o.requiredAttributes=n&&CKEDITOR.tools.objectKeys(n))}else if(CKEDITOR.tools.isArray(t)){for(o=0;o<t.length;++o)r=this.allow(t[o],i,n);return r}return e(this,t,i,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,i,n){if(this.disabled)return!1;var o,s,r,a=this,l=[],c=this.editor&&this.editor.config.protectedSource,u=!1,d={doFilter:!i,doTransform:!0,doCallbacks:!0,toHtml:t};for(e.forEach((function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-"))if(1&(o=h(a,e,l,d)))u=!0;else if(2&o)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var i;e:{var n,s,r,p=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));if(i=[],c)for(s=0;s<c.length;++s)if((r=p.match(c[s]))&&r[0].length==p.length){i=!0;break e}1==(p=CKEDITOR.htmlParser.fragment.fromHtml(p)).children.length&&(n=p.children[0]).type==CKEDITOR.NODE_ELEMENT&&h(a,n,i,d),i=!i.length}i||l.push(e)}}),null,!0),l.length&&(u=!0),e=[],n=S[n||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];i=l.pop();)i.type==CKEDITOR.NODE_ELEMENT?b(i,n,e):i.remove();for(;s=e.pop();)if((i=s.el).parent)switch(r=E[i.parent.name]||E.span,s.check){case"it":E.$removeEmpty[i.name]&&!i.children.length?b(i,n,e):m(i)||b(i,n,e);break;case"el-up":i.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r[i.name]||b(i,n,e);break;case"parent-down":i.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r[i.name]||b(i.parent,n,e)}return u},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!s(this,t,!0)&&("string"==typeof t&&(t=c(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(e){if(!this.disabled&&e){var t,i,n,o=[];for(t=0;t<e.length&&!n;++t)("string"==typeof(i=e[t])||i instanceof CKEDITOR.style)&&this.check(i)&&(n=i);if(n){for(t=0;t<e.length;++t)o.push(C(e[t],n));this.addTransformations(o)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!e.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(e.requiredContent))},addTransformations:function(e){var t,i;if(!this.disabled&&e){var n,o=this._.transformations;for(n=0;n<e.length;++n){t=e[n];var s=void 0,r=void 0,a=void 0,l=void 0,c=void 0,u=void 0;for(i=[],r=0;r<t.length;++r)"string"==typeof(a=t[r])?(l=(a=a.split(/\s*:\s*/))[0],c=null,u=a[1]):(l=a.check,c=a.left,u=a.right),s||(s=(s=a).element?s.element:l?l.match(/^([a-z0-9]+)/i)[0]:s.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=w(c)),i.push({check:l==s?null:l,left:c,right:"string"==typeof u?T(u):u});o[t=s]||(o[t]=[]),o[t].push(i)}}},check:function(e,t,i){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var n=e.length;n--;)if(this.check(e[n],t,i))return!0;return!1}var o,s;if("string"==typeof e){if((s=e+"<"+(!1===t?"0":"1")+(i?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[s];var r=(o=c(e).$1).styles;n=o.classes,o.name=o.elements,o.classes=n=n?n.split(/\s*,\s*/):[],o.styles=l(r),o.attributes=l(o.attributes),o.children=[],n.length&&(o.attributes.class=n.join(" ")),r&&(o.attributes.style=CKEDITOR.tools.writeCssText(o.styles))}else r=(o=e.getDefinition()).styles,n=o.attributes||{},r&&!CKEDITOR.tools.isEmpty(r)?(r=I(r),n.style=CKEDITOR.tools.writeCssText(r,!0)):r={},o={name:o.element,attributes:n,classes:n.class?n.class.split(/\s+/):[],styles:r,children:[]};r=CKEDITOR.tools.clone(o);var a,u=[];if(!1!==t&&(a=this._.transformations[o.name])){for(n=0;n<a.length;++n)v(this,o,a[n]);p(o)}return h(this,r,u,{doFilter:!0,doTransform:!1!==t,skipRequired:!i,skipFinalValidation:!i}),0<u.length?i=!1:((t=o.attributes.class)&&(o.attributes.class=o.attributes.class.split(" ").sort().join(" ")),i=CKEDITOR.tools.objectCompare(o.attributes,r.attributes,!0),t&&(o.attributes.class=t)),"string"==typeof e&&(this._.cachedChecks[s]=i),i},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(i,n){var o,s=e.slice();if(this.check(S[i]))return i;for(n||(s=s.reverse());o=s.pop();)if(this.check(o))return t[o];return CKEDITOR.ENTER_BR}}(),clone:function(){var e=new CKEDITOR.filter,t=CKEDITOR.tools.clone;return e.allowedContent=t(this.allowedContent),e._.allowedRules=t(this._.allowedRules),e.disallowedContent=t(this.disallowedContent),e._.disallowedRules=t(this._.disallowedRules),e._.transformations=t(this._.transformations),e.disabled=this.disabled,e.editor=this.editor,e},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var k,D={styles:1,attributes:1,classes:1},O={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},R=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,P={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},L=/^cke:(object|embed|param)$/,A=/^(object|embed|param)$/;k=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,i){if(!((i=i||t)in e.styles)){var n=e.attributes[t];n&&(/^\d+$/.test(n)&&(n+="px"),e.styles[i]=n)}delete e.attributes[t]},lengthToAttribute:function(e,t,i){if(!((i=i||t)in e.attributes)){var n=e.styles[t],o=n&&n.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[i]=o[1]:"cke-test"==n&&(e.attributes[i]="cke-test")}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles.float=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles.float;"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles.float},splitBorderShorthand:function(e){if(e.styles.border){var t=CKEDITOR.tools.style.parse.border(e.styles.border);t.color&&(e.styles["border-color"]=t.color),t.style&&(e.styles["border-style"]=t.style),t.width&&(e.styles["border-width"]=t.width),delete e.styles.border}},listTypeToStyle:function(e){if(e.attributes.type)switch(e.attributes.type){case"a":e.styles["list-style-type"]="lower-alpha";break;case"A":e.styles["list-style-type"]="upper-alpha";break;case"i":e.styles["list-style-type"]="lower-roman";break;case"I":e.styles["list-style-type"]="upper-roman";break;case"1":e.styles["list-style-type"]="decimal";break;default:e.styles["list-style-type"]=e.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=i[t[0]],e.styles["margin-right"]=i[t[1]],e.styles["margin-bottom"]=i[t[2]],e.styles["margin-left"]=i[t[3]]}if(e.styles.margin){var i=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(i.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:_,transform:function(e,t){if("string"==typeof t)e.name=t;else{var i,n,o,s,r=t.getDefinition(),a=r.styles,l=r.attributes;for(i in e.name=r.element,l)if("class"==i)for(r=e.classes.join("|"),o=l[i].split(/\s+/);s=o.pop();)-1==r.indexOf(s)&&e.classes.push(s);else e.attributes[i]=l[i];for(n in a)e.styles[n]=a[n]}}}}(),CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var i=CKEDITOR.focusManager._.blurDelay;e||!i?t.call(this):this._.timer=CKEDITOR.tools.setTimeout((function(){delete this._.timer,t.call(this)}),i,this)}},add:function(e,t){if(!(i=e.getCustomData("focusmanager"))||i!=this){i&&i.remove(e);var i="focus",n="blur";t&&(CKEDITOR.env.ie?(i="focusin",n="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(i,o.focus,this),e.on(n,o.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}},CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var i=(t=t.data).getKeystroke(),n=this.keystrokes[i],o=this._.editor;return(e=!1===o.fire("key",{keyCode:i,domEvent:t}))||(n&&(e=!1!==o.execCommand(n,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[i])),e&&t.preventDefault(!0),!e},i=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",i,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,i){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var n=this;t=function(){n[e].dir=n.rtl[e]?"rtl":"ltr",i(e,n[e])},this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var i=this.languages,n=(o=(t=t||navigator.userLanguage||navigator.language||e).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],o=o[2];return i[n+"-"+o]?n=n+"-"+o:i[n]||(n=null),CKEDITOR.lang.detect=n?function(){return n}:function(e){return e},n||e}},CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(i,n,o,s){var r="string"==typeof i;r&&(i=[i]),o||(o=CKEDITOR);var a=i.length,l=[],c=[],u=function(e){n&&(r?n.call(o,e):n.call(o,l,c))};if(0===a)u(!0);else{var d=function(e,t){(t?l:c).push(e),0>=--a&&(s&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),u(t))},h=function(i,n){e[i]=1;var o=t[i];delete t[i];for(var s=0;s<o.length;s++)o[s](i,n)},p=function(i){if(e[i])d(i,!0);else{var o=t[i]||(t[i]=[]);if(o.push(d),!(1<o.length)){var s=new CKEDITOR.dom.element("script");s.setAttributes({type:"text/javascript",src:i}),n&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?s.$.onreadystatechange=function(){"loaded"!=s.$.readyState&&"complete"!=s.$.readyState||(s.$.onreadystatechange=null,h(i,!0))}:(s.$.onload=function(){setTimeout((function(){h(i,!0)}),0)},s.$.onerror=function(){h(i,!1)})),s.appendTo(CKEDITOR.document.getHead())}}};s&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var m=0;m<a;m++)p(i[m])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(i,n){var o=this;t.push({scriptUrl:i,callback:function(){n&&n.apply(this,arguments),t.shift(),e.call(o)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var i=this.registered[e]=t||{};return i.name=e,i.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",i),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,i){e=e.split(",");for(var n=0;n<e.length;n++){var o=e[n];i||(t=t.replace(/[^\/]+$/,(function(e){return i=e,""}))),this.externals[o]={dir:t,file:i||this.fileName+".js"}}},load:function(e,t,i){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var n=this.loaded,o=this.registered,s=[],r={},a={},l=0;l<e.length;l++){var c=e[l];if(c)if(n[c]||o[c])a[c]=this.get(c);else{var u=this.getFilePath(c);s.push(u),u in r||(r[u]=[]),r[u].push(c)}}CKEDITOR.scriptLoader.load(s,(function(e,o){if(o.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+r[o[0]].join(",")+'" was not found at "'+o[0]+'".');for(var s=0;s<e.length;s++)for(var l=r[e[s]],c=0;c<l.length;c++){var u=l[c];a[u]=this.get(u),n[u]=1}t.call(i,a)}),this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(e){var t={};return function(i,n,o){var s={},r=function(i){e.call(this,i,(function(e){CKEDITOR.tools.extend(s,e);var i,a=[];for(i in e){var l=e[i],c=l&&l.requires;if(!t[i]){if(l.icons)for(var u=l.icons.split(","),d=u.length;d--;)CKEDITOR.skin.addIcon(u[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+u[d]+".png");t[i]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)s[c[l]]||a.push(c[l])}if(a.length)r.call(this,a);else{for(i in s)(l=s[i]).onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete s[i],l.onLoad._called=1);n&&n.call(o||window,s)}}),this)};r.call(this,i)}})),CKEDITOR.plugins.setLang=function(e,t,i){var n=this.get(e);e=n.langEntries||(n.langEntries={}),(n=n.lang||(n.lang=[])).split&&(n=n.split(",")),-1==CKEDITOR.tools.indexOf(n,t)&&n.push(t),e[t]=i},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,i){i.name=e.toLowerCase();var n=this.items[e]={type:t,command:i.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(n,i)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],i=t&&this._.handlers[t.type],n=t&&t.command&&this.editor.getCommand(t.command);return i=i&&i.create.apply(this,t.args),this.instances[e]=i,n&&n.uiItems.push(i),i&&!i.type&&(i.type=t.type),i},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,i,s){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==i){if(!(i instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!s)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1}(i,s))throw Error('The specified element mode is not supported on element: "'+i.getName()+'".');this.element=i,this.elementMode=s,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(i.getId()||i.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var e="editor"+ ++r}while(CKEDITOR.instances[e]);return e}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",t),this.on("selectionChange",(function(e){n(this,e.data.path)})),this.on("activeFilterChange",(function(){n(this,this.elementPath(),!0)})),this.on("mode",t),this.on("instanceReady",(function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable()),e.shrink(CKEDITOR.SHRINK_ELEMENT,!0),e.collapse(),this.getSelection().selectRanges([e])}this.focus()}})),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout((function(){"destroyed"!==this.status?function(e,t){e.on("customConfigLoaded",(function(){if(t){if(t.on)for(var i in t.on)e.on(i,t.on[i]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}i=e.config,e.readOnly=!!i.readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=i.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:i.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:i.shiftEnterMode,i.skin&&(CKEDITOR.skinName=i.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),function(e){CKEDITOR.skin.loadPart("editor",(function(){!function(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,(function(t,i){var n=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(i),e.title="string"==typeof n||!1===n?n:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),function(e){e.getStylesSet((function(t){e.once("loaded",(function(){e.fire("stylesSet",{styles:t})}),null,null,1),function(e){function t(e){return e?(CKEDITOR.tools.isArray(e)&&(e=e.join(",")),e.replace(/\s/g,"")):""}var i=e.config,n=t(i.plugins),o=t(i.extraPlugins),s=t(i.removePlugins);if(o){var r=new RegExp("(?:^|,)(?:"+o.replace(/,/g,"|")+")(?=,|$)","g");n=(n=n.replace(r,""))+","+o}if(s){var a=new RegExp("(?:^|,)(?:"+s.replace(/,/g,"|")+")(?=,|$)","g");n=n.replace(a,"")}CKEDITOR.env.air&&(n+=",adobeair"),CKEDITOR.plugins.load(n.split(","),(function(t){var n=[],o=[],s=[];for(var r in e.plugins=CKEDITOR.tools.extend({},e.plugins,t),t){var l,c=t[r],u=c.lang,d=null,h=c.requires;if(CKEDITOR.tools.isArray(h)&&(h=h.join(",")),h&&(l=h.match(a)))for(;h=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:h.replace(",",""),requiredBy:r});u&&!e.lang[r]&&(u.split&&(u=u.split(",")),d=0<=CKEDITOR.tools.indexOf(u,e.langCode)?e.langCode:(d=e.langCode.replace(/-.*/,""))!=e.langCode&&0<=CKEDITOR.tools.indexOf(u,d)?d:0<=CKEDITOR.tools.indexOf(u,"en")?"en":u[0],c.langEntries&&c.langEntries[d]?(e.lang[r]=c.langEntries[d],d=null):s.push(CKEDITOR.getUrl(c.path+"lang/"+d+".js"))),o.push(d),n.push(c)}CKEDITOR.scriptLoader.load(s,(function(){for(var t=["beforeInit","init","afterInit"],s=0;s<t.length;s++)for(var r=0;r<n.length;r++){var a=n[r];0===s&&o[r]&&a.lang&&a.langEntries&&(e.lang[a.name]=a.langEntries[o[r]]),a[t[s]]&&a[t[s]](e)}for(e.fireOnce("pluginsLoaded"),i.keystrokes&&e.setKeystroke(e.config.keystrokes),r=0;r<e.config.blockedKeystrokes.length;r++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[r]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)}))}))}(e)}))}(e)}))}(e)}))}(e)})),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),o(e)||e.fireOnce("customConfigLoaded")}(this,e):CKEDITOR.warn("editor-incorrect-destroy")}),0,this)}function t(){var e,t=this.commands;for(e in t)i(this,t[e])}function i(e,t){t[t.startDisabled||e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function n(e,t,i){if(t){var n,o,s=e.commands;for(o in s)n=s[o],(i||n.contextSensitive)&&n.refresh(e,t)}}function o(e){if(!(t=e.config.customConfig))return!1;var t=CKEDITOR.getUrl(t),i=a[t]||(a[t]={});return i.fn?(i.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=t&&o(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,(function(){i.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},o(e)})),!0}function s(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var r=0,a={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(this[n])return CKEDITOR.warn("editor-plugin-conflict",{plugin:e,replacedWith:n}),!0}return!1}},addCommand:function(e,t){t.name=e.toLowerCase();var n=t instanceof CKEDITOR.command?t:new CKEDITOR.command(this,t);return this.mode&&i(this,n),this.commands[e]=n},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!i.getValue()&&!1===t.fire("required")&&e.data.preventDefault()}var t=this,i=t.element,n=new CKEDITOR.dom.element(i.$.form);i.is("textarea")&&n&&(n.on("submit",e),function(e){return!!(e&&e.call&&e.apply)}(n.$.submit)&&(n.$.submit=CKEDITOR.tools.override(n.$.submit,(function(t){return function(){e(),t.apply?t.apply(this):t()}}))),t.on("destroy",(function(){n.removeListener("submit",e)})))},destroy:function(e){this.fire("beforeDestroy"),!e&&s.call(this),this.editable(null),this.filter&&(this.filter.destroy(),delete this.filter),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(!(e=this.getSelection()))return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var i=this.getCommand(e),n={name:e,commandData:t||{},command:i};return!(!i||i.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",n)||(n.returnValue=i.exec(n.commandData),i.async||!1===this.fire("afterCommandExec",n)))&&n.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,i){var n=!0,o=t;t&&"object"==typeof t&&(i=t.internal,o=t.callback,n=!t.noSnapshot),!i&&n&&this.fire("saveSnapshot"),!o&&i||this.once("dataReady",(function(e){!i&&n&&this.fire("saveSnapshot"),o&&o.call(e.editor)})),e={dataValue:e},!i&&this.fire("setData",e),this._.data=e.dataValue,!i&&this.fire("afterSetData",e)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,i){this.fire("insertHtml",{dataValue:e,mode:t,range:i})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),i=(i=this.getSelection())&&i.getRanges();return t&&i&&0!==i.length?(t=function(e,t){function i(e){var t=e.startContainer,i=e.endContainer;return!(!t.is||!(t.is("tr")||t.is("td")&&t.equals(i)&&e.endOffset===t.getChildCount()))}function n(e){var t=e.startContainer;return t.is("tr")?e.cloneContents():t.clone(!0)}for(var o,s,r,a=new CKEDITOR.dom.documentFragment,l=0;l<e.length;l++){var c=e[l],u=c.startContainer.getAscendant("tr",!0);i(c)?(o||((o=u.getAscendant("table").clone()).append(u.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),a.append(o),o=o.findOne("thead, tbody, tfoot")),s&&s.equals(u)||(s=u,r=u.clone(),o.append(r)),r.append(n(c))):a.append(c.cloneContents())}return o?a:t.getHtmlFromRange(e[0])}(i,t),e?t.getHtml():t):null},extractSelectedHtml:function(e,t){var i,n=this.editable(),o=this.getSelection().getRanges(),s=new CKEDITOR.dom.documentFragment;if(!n||0===o.length)return null;for(i=0;i<o.length;i++)s.append(n.extractHtmlFromRange(o[i],t));return t||this.getSelection().selectRanges([o[0]]),e?s.getHtml():s},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return s.call(this)},setKeystroke:function(){for(var e,t,i=this.keystrokeHandler.keystrokes,n=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o=n.length;o--;)e=n[o],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?i[e]=t:delete i[e]},getCommandKeystroke:function(e){if(e="string"==typeof e?this.getCommand(e):e){var t,i=CKEDITOR.tools.object.findKey(this.commands,e),n=this.keystrokeHandler.keystrokes;if(e.fakeKeystroke)return e.fakeKeystroke;for(t in n)if(n.hasOwnProperty(t)&&n[t]==i)return t}return null},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))},showNotification:function(e){alert(e)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(i){for(var n,o,s,r=0;n=this._.htmlPartsRegex.exec(i);)if((o=n.index)>r&&(r=i.substring(r,o),s?s.push(r):this.onText(r)),r=this._.htmlPartsRegex.lastIndex,!(o=n[1])||(o=o.toLowerCase(),s&&CKEDITOR.dtd.$cdata[o]&&(this.onCDATA(s.join("")),s=null),s))if(s)s.push(n[0]);else if(o=n[3]){if(o=o.toLowerCase(),!/="/.test(o)){var a,l={},c=n[4];if(n=!!n[5],c)for(;a=e.exec(c);){var u=a[1].toLowerCase();a=a[2]||a[3]||a[4]||"",l[u]=!a&&t[u]?u:CKEDITOR.tools.htmlDecodeAttr(a)}this.onTagOpen(o,l,n),!s&&CKEDITOR.dtd.$cdata[o]&&(s=[])}}else(o=n[2])&&this.onComment(o);else this.onTagClose(o);i.length>r&&this.onText(i.substring(r,i.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),i=this.previous,n=this.next;i&&(i.next=n),n&&(n.previous=i),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,i=CKEDITOR.tools.indexOf(t,this),n=e.previous=this.previous,o=e.next=this.next;n&&(n.next=e),o&&(o.previous=e),t[i]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e),n=e.next;t.splice(i+1,0,this),this.next=e.next,this.previous=e,e.next=this,n&&(n.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e);t.splice(i,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},i=this.parent;i&&i.type==CKEDITOR.NODE_ELEMENT;){if(t(i))return i;i=i.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}},CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var i=this.value;return(i=e.onComment(t,i,this))?"string"!=typeof i?(this.replaceWith(i),!1):(this.value=i,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),i={ol:1,ul:1},n=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(s,r,a){function l(e){var t;if(0<f.length)for(var i=0;i<f.length;i++){var n=f[i],o=n.name,s=CKEDITOR.dtd[o],r=b.name&&CKEDITOR.dtd[b.name];r&&!r[o]||e&&s&&!s[e]&&CKEDITOR.dtd[e]?o==b.name&&(d(b,b.parent,1),i--):(t||(c(),t=1),(n=n.clone()).parent=b,b=n,f.splice(i,1),i--)}}function c(){for(;y.length;)d(y.shift(),b)}function u(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,i=e.children.length,n=e.children[i-1];n&&n.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(n.value))?n.value=t:e.children.length=i-1)}}function d(t,i,n){i=i||b||g;var o=b;void 0===t.previous&&(h(i,t)&&(b=i,m.onTagOpen(a,{}),t.returnPoint=i=b),u(t),e(t)&&!t.children.length||i.add(t),"pre"==t.name&&(_=!1),"textarea"==t.name&&(v=!1)),t.returnPoint?(b=t.returnPoint,delete t.returnPoint):b=n?i:o}function h(e,t){var i,n;if((e==g||"body"==e.name)&&a&&(!e.name||CKEDITOR.dtd[e.name][a]))return(i=t.attributes&&(n=t.attributes["data-cke-real-element-type"])?n:t.name)&&i in CKEDITOR.dtd.$inline&&!(i in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}function p(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var m=new CKEDITOR.htmlParser,g=r instanceof CKEDITOR.htmlParser.element?r:"string"==typeof r?new CKEDITOR.htmlParser.element(r):new CKEDITOR.htmlParser.fragment,f=[],y=[],b=g,v="textarea"==g.name,_="pre"==g.name;for(m.onTagOpen=function(o,s,r,a){if((s=new CKEDITOR.htmlParser.element(o,s)).isUnknown&&r&&(s.isEmpty=!0),s.isOptionalClose=a,e(s))f.push(s);else{if("pre"==o)_=!0;else{if("br"==o&&_)return void b.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==o&&(v=!0)}if("br"==o)y.push(s);else{for(;a=(r=b.name)?CKEDITOR.dtd[r]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n,!(s.isUnknown||b.isUnknown||a[o]);)if(b.isOptionalClose)m.onTagClose(r);else if(o in i&&r in i)(r=(r=b.children)[r.length-1])&&"li"==r.name||d(r=new CKEDITOR.htmlParser.element("li"),b),!s.returnPoint&&(s.returnPoint=b),b=r;else if(o in CKEDITOR.dtd.$listItem&&!p(o,r))m.onTagOpen("li"==o?"ul":"dl",{},0,1);else if(r in t&&!p(o,r))!s.returnPoint&&(s.returnPoint=b),b=b.parent;else{if(r in CKEDITOR.dtd.$inline&&f.unshift(b),!b.parent){s.isOrphan=1;break}d(b,b.parent,1)}l(o),c(),s.parent=b,s.isEmpty?d(s):b=s}}},m.onTagClose=function(e){for(var t=f.length-1;0<=t;t--)if(e==f[t].name)return void f.splice(t,1);for(var i=[],n=[],o=b;o!=g&&o.name!=e;)o._.isBlockLike||n.unshift(o),i.push(o),o=o.returnPoint||o.parent;if(o!=g){for(t=0;t<i.length;t++){var s=i[t];d(s,s.parent)}b=o,o._.isBlockLike&&c(),d(o,o.parent),o==b&&(b=b.parent),f=f.concat(n)}"body"==e&&(a=!1)},m.onText=function(e){if(b._.hasInlineStarted&&!y.length||_||v||0!==(e=CKEDITOR.tools.ltrim(e)).length){var i=b.name,s=i?CKEDITOR.dtd[i]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n;v||s["#"]||!(i in t)?(c(),l(),_||v||(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),h(b,e)&&this.onTagOpen(a,{},0,1),b.add(e)):(m.onTagOpen(o[i]||""),m.onText(e))}},m.onCDATA=function(e){b.add(new CKEDITOR.htmlParser.cdata(e))},m.onComment=function(e){c(),l(),b.add(new CKEDITOR.htmlParser.comment(e))},m.parse(s),c();b!=g;)d(b,b.parent,1);return u(g),g},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var i=0<t?this.children[t-1]:null;if(i){if(e._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(e);i.next=e}e.previous=i,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,i){if(this.childrenFilteredBy!=e.id)for(i=this.getFilterContext(i),t&&!this.parent&&e.onRoot(i,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,i)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,i){var n=this.getFilterContext();for(i&&!this.parent&&t&&t.onRoot(n,this),t&&this.filterChildren(t,!1,n),t=0,n=(i=this.children).length;t<n;t++)i[t].writeHtml(e)},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(!1!==n){i=this.children;for(var o=0;o<i.length;o++)(n=i[o]).type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):t&&n.type!=t||e(n)}},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,i,n,o){var s,r;for(s in i)(r=t[s])||(r=t[s]=new e),r.add(i[s],n,o)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,i){var n;"number"==typeof i?n=i:i&&"priority"in i&&(n=i.priority),"number"!=typeof n&&(n=10),"object"!=typeof i&&(i={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,n,i),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,n,i),e.elements&&t(this.elementsRules,e.elements,n,i),e.attributes&&t(this.attributesRules,e.attributes,n,i),e.text&&this.textRules.add(e.text,n,i),e.comment&&this.commentRules.add(e.comment,n,i),e.root&&this.rootRules.add(e.root,n,i)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,i){return this.textRules.exec(e,t,i)},onComment:function(e,t,i){return this.commentRules.exec(e,t,i)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var i,n=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],o=0;3>o;o++)if(i=n[o]){if(!1===(i=i.exec(e,t,this)))return null;if(i&&i!=t)return this.onNode(e,i);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var i=t.type;return i==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):i==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):i==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,i,n){return(i=this.attributesRules[i])?i.exec(e,n,t,this):n}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,i){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:i})},addMany:function(e,t,i){for(var n=[this.findIndex(t),0],o=0,s=e.length;o<s;o++)n.push({value:e[o],priority:t,options:i});this.rules.splice.apply(this.rules,n)},findIndex:function(e){for(var t=this.rules,i=t.length-1;0<=i&&e<t[i].priority;)i--;return i+1},exec:function(e,t){var i,n,o,s,r=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(s=0;s<c;s++)if(r&&(i=t.type,n=t.name),o=l[s],!(e.nonEditable&&!o.options.applyToAll||e.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,a))||r&&o&&(o.name!=n||o.type!=i))return o;null!=o&&(a[0]=t=o)}return t},execOnName:function(e,t){for(var i,n=0,o=this.rules,s=o.length;t&&n<s;n++)i=o[n],e.nonEditable&&!i.options.applyToAll||e.nestedEditable&&i.options.excludeNestedEditable||(t=t.replace(i.value[0],i.value[1]));return t}}}(),function(){function e(e,t){function a(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(o){if(o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var r,l,u=[],d=i(o);if(d)for(c(d,1)&&u.push(d);d;)s(d)&&(r=n(d))&&c(r)&&((l=n(r))&&!s(l)?u.push(r):(a(p).insertAfter(r),r.remove())),d=d.previous;for(d=0;d<u.length;d++)u[d].remove();(u=!e||!1!==("function"==typeof t?t(o):t))&&(u=!(!p&&!CKEDITOR.env.needsBrFiller&&o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!p&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||o.name in CKEDITOR.dtd.tr||o.name in CKEDITOR.dtd.$listItem)||(u=i(o))&&("form"!=o.name||"input"!=u.name))),u&&o.add(a(e))}}}function c(e,t){return!(p&&!CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_ELEMENT||"br"!=e.name||e.attributes["data-cke-eol"])||!!(e.type==CKEDITOR.NODE_TEXT&&(i=e.value.match(h))&&(i.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,i.index)).insertBefore(e),e.value=i[0]),!CKEDITOR.env.needsBrFiller&&p&&(!t||e.parent.name in g)||!p&&((i=e.previous)&&"br"==i.name||!i||s(i))));var i}var u,d={elements:{}},p="html"==t,g=CKEDITOR.tools.extend({},f);for(u in g)"#"in m[u]||delete g[u];for(u in g)d.elements[u]=l(p,e.config.fillEmptyBlocks);return d.root=l(p,!1),d.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=t.attributes;if("data-cke-bogus"in i||"data-cke-eol"in i)delete i["data-cke-bogus"];else{for(i=t.next;i&&o(i);)i=i.next;var l=n(t);!i&&s(t.parent)?r(t.parent,a(e)):s(i)&&l&&!s(l)&&a(e).insertBefore(i)}}}}(p),d}function t(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function i(e){for(e=e.children[e.children.length-1];e&&o(e);)e=e.previous;return e}function n(e){for(e=e.previous;e&&o(e);)e=e.previous;return e}function o(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function s(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in f||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function r(e,t){var i=e.children[e.children.length-1];e.children.push(t),t.parent=e,i&&(i.next=t,t.previous=i)}function a(e){"false"!=(e=e.attributes).contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch((e=e.attributes)["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function c(e,t){return e.replace(t,(function(e,t,i){return 0===e.indexOf("<textarea")&&(e=t+u(i).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"}))}function u(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)}))}function d(e,t){var i=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)})).replace(/\{cke_protected_(\d+)\}/g,(function(e,t){return i&&i[t]||""}))}CKEDITOR.htmlDataProcessor=function(i){var n,o,s=this;this.editor=i,this.dataFilter=n=new CKEDITOR.htmlParser.filter,this.htmlFilter=o=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,n.addRules(y),n.addRules(b,{applyToAll:!0}),n.addRules(e(i,"data"),{applyToAll:!0}),o.addRules(v),o.addRules(_,{applyToAll:!0}),o.addRules(e(i,"html"),{applyToAll:!0}),i.on("toHtml",(function(e){var n,o,s=function(e,t){var i=[],n=t.config.protectedSource,o=t._.dataStore||(t._.dataStore={id:1}),s=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;n=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(n),e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(e){return"\x3c!--{cke_tempcomment}"+(i.push(e)-1)+"--\x3e"}));for(var r=0;r<n.length;r++)e=e.replace(n[r],(function(e){return e=e.replace(s,(function(e,t,n){return i[n]})),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(i.push(e)-1)+"--\x3e"}));return e=e.replace(s,(function(e,t,n){return"\x3c!--"+p+(t?"{C}":"")+encodeURIComponent(i[n]).replace(/--/g,"%2D%2D")+"--\x3e"})),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(e,t){return o[o.id]=decodeURIComponent(t),"{cke_protected_"+o.id+++"}"}))})),e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(e,i,n,o){return"<"+i+n+">"+d(u(o),t)+"</"+i+">"}))}(s=(e=e.data).dataValue,i);s=function(e){return e.replace(C,(function(e,t,i){return"<"+t+i.replace(w,(function(e,t){return T.test(t)&&-1==i.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e}))+">"}))}(s=c(s,I)),s=(s=(s=(s=(s=c(s,E)).replace(S,"$1cke:$2")).replace(D,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),n=e.context||i.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==n&&(n="div",s="<pre>"+s+"</pre>",o=1),(n=i.document.createElement(n)).setHtml("a"+s),s=(s=n.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),o&&(s=s.replace(/^<pre>|<\/pre>$/gi,"")),s=function(e){return e.replace(x,(function(e,t){return decodeURIComponent(t)}))}(s=s.replace(k,"$1$2")),s=u(s),n=!1!==e.fixForBody&&t(e.enterMode,i.config.autoParagraph),s=CKEDITOR.htmlParser.fragment.fromHtml(s,e.context,n),n&&!(o=s).children.length&&CKEDITOR.dtd[o.name][n]&&(n=new CKEDITOR.htmlParser.element(n),o.add(n)),e.dataValue=s}),null,null,5),i.on("toHtml",(function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&i.fire("dataFiltered")}),null,null,6),i.on("toHtml",(function(e){e.data.dataValue.filterChildren(s.dataFilter,!0)}),null,null,10),i.on("toHtml",(function(e){var t=(e=e.data).dataValue,i=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(i),t=i.getHtml(!0),e.dataValue=function(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(e){return"\x3c!--"+p+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"}))}(t)}),null,null,15),i.on("toDataFormat",(function(e){var n=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,e.data.context,t(e.data.enterMode,i.config.autoParagraph))}),null,null,5),i.on("toDataFormat",(function(e){e.data.dataValue.filterChildren(s.htmlFilter,!0)}),null,null,10),i.on("toDataFormat",(function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)}),null,null,11),i.on("toDataFormat",(function(e){var t=e.data.dataValue,n=s.writer;n.reset(),t.writeChildrenHtml(n),t=d(t=u(t=n.getHtml(!0)),i),e.data.dataValue=t}),null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,i,n){var o,s,r,a,l=this.editor;return t&&"object"==typeof t?(o=t.context,i=t.fixForBody,n=t.dontFilter,s=t.filter,r=t.enterMode,a=t.protectedWhitespaces):o=t,o||null===o||(o=l.editable().getName()),l.fire("toHtml",{dataValue:e,context:o,fixForBody:i,dontFilter:n,filter:s||l.filter,enterMode:r||l.enterMode,protectedWhitespaces:a}).dataValue},toDataFormat:function(e,t){var i,n,o;return t&&(i=t.context,n=t.filter,o=t.enterMode),i||null===i||(i=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:n||this.editor.filter,context:i,enterMode:o||this.editor.enterMode}).dataValue}};var h=/(?:&nbsp;|\xa0)$/,p="{cke_protected}",m=CKEDITOR.dtd,g="caption colgroup col thead tfoot tbody".split(" "),f=CKEDITOR.tools.extend({},m.$blockLimit,m.$block),y={elements:{input:a,textarea:a}},b={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},v={elements:{embed:function(e){if((i=e.parent)&&"object"==i.name){var t=i.attributes.width,i=i.attributes.height;t&&(e.attributes.width=t),i&&(e.attributes.height=i)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},_={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var i=["name","href","src"],n=0;n<i.length;n++)"data-cke-saved-"+i[n]in t&&delete t[i[n]]}return e},table:function(e){e.children.slice(0).sort((function(e,t){var i,n;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(i=CKEDITOR.tools.indexOf(g,e.name),n=CKEDITOR.tools.indexOf(g,t.name)),-1<i&&-1<n&&i!=n||(i=e.parent?e.getIndex():-1,n=t.parent?t.getIndex():-1),i>n?1:-1}))},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes.class&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes.class},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&r(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(_.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,(function(e){return e.toLowerCase()}))});var C=/<(a|area|img|input|source)\b([^>]*)>/gi,w=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,T=/^(href|src|name)$/i,E=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,I=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,x=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,S=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,k=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,D=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var i=e||"",n=i.match(/^cke:(.*)/);n&&(i=n[1]),i=!!(CKEDITOR.dtd.$nonBodyContent[i]||CKEDITOR.dtd.$block[i]||CKEDITOR.dtd.$listItem[i]||CKEDITOR.dtd.$tableContent[i]||CKEDITOR.dtd.$nonEditable[i]||"br"==i),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,i,n){"font-family"==i&&(n=n.replace(/["']/g,"")),t[i.toLowerCase()]=n})),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,i=[];for(e in t)t[e]&&i.push(e,":",t[e],";");return i.join("")}}},function(){var e=function(e,t){return(e=e[0])<(t=t[0])?-1:e>t?1:0},t=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:t.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var i,n,o,s,r=this;if((t=r.getFilterContext(t)).off)return!0;for(r.parent||e.onRoot(t,r);;){if(i=r.name,!(n=e.onElementName(t,i)))return this.remove(),!1;if(r.name=n,!(r=e.onElement(t,r)))return this.remove(),!1;if(r!==this)return this.replaceWith(r),!1;if(r.name==i)break;if(r.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(r),!1;if(!r.name)return this.replaceWithChildren(),!1}for(o in i=r.attributes){for(n=i[o];;){if(!(s=e.onAttributeName(t,o))){delete i[o];break}if(s==o)break;delete i[o],o=s}s&&(!1===(n=e.onAttribute(t,r,s,n))?delete i[s]:i[s]=n)}return r.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:t.filterChildren,writeHtml:function(t,i){i&&this.filter(i);var n,o,s=this.name,r=[],a=this.attributes;for(n in t.openTag(s,a),a)r.push([n,a[n]]);for(t.sortAttributes&&r.sort(e),n=0,o=r.length;n<o;n++)a=r[n],t.attribute(a[0],a[1]);t.openTagClose(s,this.isEmpty),this.writeChildrenHtml(t),this.isEmpty||t.closeTag(s)},writeChildrenHtml:t.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:t.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;"function"!=typeof e&&(e=function(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}(e));for(var t=0,i=this.children.length;t<i;++t)if(e(this.children[t]))return this.children[t];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var t=0,i=(e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children).length;t<i;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),i=this.clone(),n=0;n<t.length;++n)t[n].parent=i;return i.children=t,t[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(i,this.getIndex()+1),i},find:function(e,t){void 0===t&&(t=!1);var i,n=[];for(i=0;i<this.children.length;i++){var o=this.children[i];("function"==typeof e&&e(o)||"string"==typeof e&&o.name===e)&&n.push(o),t&&o.find&&(n=n.concat(o.find(e,t)))}return n},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes.class||"";this.attributes.class=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes.class;t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes.class=t:delete this.attributes.class)},hasClass:function(e){var t=this.attributes.class;return!!t&&new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),e.off||"off"!=this.attributes["data-cke-processor"]||t.push("off",!0),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var i=0;i<t.length;i+=2)e[t[i]]=t[i+1]}return e}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(e){this.source=String(e)},CKEDITOR.template.prototype.output=function(t,i){var n=this.source.replace(e,(function(e,i){return void 0!==t[i]?t[i]:e}));return i?i.push(n):n}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",(function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))})),e.on("blur",(function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))})),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,i){var n=e[t];return n||(n={name:t,source:i},CKEDITOR.fire("template",n),e[t]=new CKEDITOR.template(n.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if((e=CKEDITOR.dom.element.get(e)).getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),n=e.is("textarea")?e:null;return n?(i.setData(n.getValue(),null,!0),(e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!i.readOnly+'" class="cke_textarea_inline">'+n.getValue()+"</div>",CKEDITOR.document)).insertAfter(n),n.hide(),n.$.form&&i._attachToForm()):i.setData(e.getHtml(),null,!0),i.on("loaded",(function(){i.fire("uiReady"),i.editable(e),i.container=e,i.ui.contentsElement=e,i.setData(i.getData(1)),i.resetDirty(),i.fire("contentDom"),i.mode="wysiwyg",i.fire("mode"),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)}),null,null,1e4),i.on("destroy",(function(){n&&(i.container.clearCustomData(),i.container.remove(),n.show()),i.element.clearCustomData(),delete i.element})),i},CKEDITOR.inlineAll=function(){var e,t,i;for(i in CKEDITOR.dtd.$editable)for(var n=CKEDITOR.document.getElementsByTag(i),o=0,s=n.count();o<s;o++)"true"==(e=n.getItem(o)).getAttribute("contenteditable")&&(t={element:e,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})),CKEDITOR.replaceClass="ckeditor",function(){function e(e,i,n,o){if(!CKEDITOR.env.isCompatible)return null;if((e=CKEDITOR.dom.element.get(e)).getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var s=new CKEDITOR.editor(i,e,o);return o==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),s._.required=e.hasAttribute("required"),e.removeAttribute("required")),n&&s.setData(n,null,!0),s.on("loaded",(function(){!function(e){var t=e.name,i=e.element,n=e.elementMode,o=e.fire("uiSpace",{space:"top",html:""}).html,s=e.fire("uiSpace",{space:"bottom",html:""}).html,r=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');t=CKEDITOR.dom.element.createFromHtml(r.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:o?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:s?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+s+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),n==CKEDITOR.ELEMENT_MODE_REPLACE?(i.hide(),t.insertAfter(i)):i.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),o&&e.ui.space("top").unselectable(),s&&e.ui.space("bottom").unselectable(),i=e.config.width,n=e.config.height,i&&t.setStyle("width",CKEDITOR.tools.cssLength(i)),n&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(n)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",(function(){e.focus()})),e.fireOnce("uiReady")}(s),o==CKEDITOR.ELEMENT_MODE_REPLACE&&s.config.autoUpdateElement&&e.$.form&&s._attachToForm(),s.setMode(s.config.startupMode,(function(){s.resetDirty(),s.status="ready",s.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,s)}))})),s.on("destroy",t),s}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(t,i){return e(t,i,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,i,n){return e(t,i,n,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var i=null,n=e[t];if(n.name||n.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(n.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](n,i={}))continue;this.replace(n,i)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var i=this,n=this._.modes;if(e!=i.mode&&n&&n[e]){if(i.fire("beforeSetMode",e),i.mode){var o,s=i.checkDirty(),r=(n=i._.previousModeData,0);i.fire("beforeModeUnload"),i.editable(0),i._.previousMode=i.mode,i._.previousModeData=o=i.getData(1),"source"==i.mode&&n==o&&(i.fire("lockSnapshot",{forceUpdate:!0}),r=1),i.ui.space("contents").setHtml(""),i.mode=""}else i._.previousModeData=i.getData(1);this._.modes[e]((function(){i.mode=e,void 0!==s&&!s&&i.resetDirty(),r?i.fire("unlockSnapshot"):"wysiwyg"==e&&i.fire("saveSnapshot"),setTimeout((function(){i.fire("mode"),t&&t.call(i)}),0)}))}},CKEDITOR.editor.prototype.resize=function(e,t,i,n){var o=this.container,s=this.ui.space("contents"),r=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;n=n?this.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})):o,n.setSize("width",e,!0),r&&(r.style.width="1%");var a=(n.$.offsetHeight||0)-(s.$.clientHeight||0);o=Math.max(t-(i?0:a),0),t=i?t+a:t,s.setStyle("height",o+"px"),r&&(r.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:o,outerWidth:e||n.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var t,n=e.editor,o=e.data.path,r=o.blockLimit,a=e.data.selection,l=a.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(a=function(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,o=n&&n.getLast(i);return!n||!n.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||n.is("pre")||n.getBogus()?void 0:n}(a,o))&&(a.appendBogus(),t=CKEDITOR.env.ie),s(n,o.block,r)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&((o=l.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(r=new CKEDITOR.dom.walker(o)).guard=function(e){return!i(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},!r.checkForward()||o.checkStartOfBlock()&&o.checkEndOfBlock())&&(n=l.fixBlock(!0,n.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(n=n.getFirst(i))&&n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText()).match(/^(?:&nbsp;|\xa0)$/)&&n.remove(),t=1,e.cancel()),t&&l.select()}function t(e){var t=e.data.getTarget();t.is("input")&&("submit"!=(t=t.getAttribute("type"))&&"reset"!=t||e.data.preventDefault())}function i(e){return c(e)&&u(e)}function n(e,t){return function(i){var n=i.data.$.toElement||i.data.$.fromElement||i.data.$.relatedTarget;(n=n&&n.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(n):null)&&(t.equals(n)||t.contains(n))||e.call(this,i)}}function o(e){function t(e){return function(t,o){if(o&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(s)&&(n=t),!(o||!i(t)||e&&h(t)))return!1}}var n,o=e.getRanges()[0];e=e.root;var s={table:1,ul:1,ol:1,dl:1};if(o.startPath().contains(s)){var r=o.clone();if(r.collapse(1),r.setStartAt(e,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(r)).guard=t(),e.checkBackward(),n)return(r=o.clone()).collapse(),r.setEndAt(n,CKEDITOR.POSITION_AFTER_END),(e=new CKEDITOR.dom.walker(r)).guard=t(!0),n=!1,e.checkForward(),n}return null}function s(e,t,i){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(i)&&!t||t&&"true"==t.getAttribute("contenteditable"))}function r(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph&&(e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function a(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout((function(){t.fire("saveSnapshot")}),0)}function l(e,t,i){var n=e.getCommonAncestor(t);for(t=e=i?t:e;(e=e.getParent())&&!n.equals(e)&&1==e.getChildCount();)t=e;t.remove()}var c,u,d,h,p,m,g,f,y,b;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))e.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var t=this.$.scrollTop;this.$.focus(),this.$.scrollTop=t}else this.$.focus();else this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e}CKEDITOR.env.safari&&!this.isInline()&&((e=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(e,t){var i=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=n(t,this),i[0]=e,i[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,i)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1);return t=e.on.apply(e,t),this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(e){}},restoreAttrs:function(){var e,t,i=this._.attrChanges;for(t in i)i.hasOwnProperty(t)&&(null!==(e=i[t])?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var i=this.getAttribute(e);t!==i&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=i),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,i){var n=this.editor;n.focus(),n.fire("saveSnapshot"),i||(i=n.getSelection().getRanges()[0]),m(this,t||"html",e,i),i.select(),a(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,i){m(this,i||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){(o=this.editor).focus(),o.fire("saveSnapshot");var n=o.activeEnterMode,o=o.getSelection(),s=e.getName();s=CKEDITOR.dtd.$block[s],t||(t=o.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),s&&((s=e.getNext((function(e){return i(e)&&!h(e)})))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.$block)?s.getDtd()["#"]?t.moveToElementEditStart(s):t.moveToElementEditEnd(e):s||n==CKEDITOR.ENTER_BR||(s=t.fixBlock(!0,n==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(s)))),o.selectRanges([t]),a(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var i,n,o=this.editor,s=o.config.enterMode,r=e.getName(),a=CKEDITOR.dtd.$block[r];if(t.checkReadOnly())return!1;if(t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&(t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?g(t):t.startContainer.is(CKEDITOR.dtd.$list)&&f(t)),a)for(;(i=t.getCommonAncestor(0,1))&&(n=CKEDITOR.dtd[i.getName()])&&(!n||!n[r]);)i.getName()in CKEDITOR.dtd.span?t.splitElement(i):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(i),t.collapse(!0),i.remove()):t.splitBlock(s==CKEDITOR.ENTER_DIV?"div":"p",o.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,i=t.getDocument().$,n=i.getSelection();e:if(n.anchorNode&&n.anchorNode==t.$)e=!0;else{if(CKEDITOR.env.webkit&&(e=t.getDocument().getActive())&&e.equals(t)&&!n.anchorNode){e=!0;break e}e=void 0}e&&((e=new CKEDITOR.dom.range(t)).moveToElementEditStart(t),(i=i.createRange()).setStart(e.startContainer.$,e.startOffset),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}var t=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var e=t.getDocument().$,i=e.selection,n=t.getDocument().getActive();"None"==i.type&&n.equals(t)&&(i=new CKEDITOR.dom.range(t),e=e.body.createTextRange(),i.moveToElementEditStart(t),(i=i.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(i=i.getParent()),e.moveToElementText(i.$),e.collapse(!0),e.select())}()):this.hasFocus?(this.focus(),e()):this.once("focus",(function(){e()}),null,null,-999)},getHtmlFromRange:function(e){return e.collapsed?new CKEDITOR.dom.documentFragment(e.document):(e={doc:this.getDocument(),range:e.clone()},y.eol.detect(e,this),y.bogus.exclude(e),y.cell.shrink(e),e.fragment=e.range.cloneContents(),y.tree.rebuild(e,this),y.eol.fix(e,this),new CKEDITOR.dom.documentFragment(e.fragment.$))},extractHtmlFromRange:function(e,t){var i=b,n={range:e,doc:e.document},o=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),o;if(e.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.table.detectPurge(n),n.bookmark=e.createBookmark(),delete n.range,(r=this.editor.createRange()).moveToPosition(n.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),n.targetBookmark=r.createBookmark(),i.list.detectMerge(n,this),i.table.detectRanges(n,this),i.block.detectMerge(n,this),n.tableContentsRanges?(i.table.deleteRanges(n),e.moveToBookmark(n.bookmark),n.range=e):(e.moveToBookmark(n.bookmark),n.range=e,e.extractContents(i.detectExtractMerge(n))),e.moveToBookmark(n.targetBookmark),e.optimize(),i.fixUneditableRangePosition(e),i.list.merge(n,this),i.table.purge(n,this),i.block.merge(n,this),t){if(i=e.startPath(),n=e.checkStartOfBlock()&&e.checkEndOfBlock()&&i.block&&!e.root.equals(i.block)){e:{var s,r=0;if(n=i.block.getElementsByTag("span"))for(;s=n.getItem(r++);)if(!u(s)){n=!0;break e}n=!1}n=!n}n&&(e.moveToPosition(i.block,CKEDITOR.POSITION_BEFORE_START),i.block.remove())}else i.autoParagraph(this.editor,e),d(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),o},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",(function(){var t=this.getData();this.is("textarea")||!1!==e.config.ignoreEmptyParagraph&&(t=t.replace(p,(function(e,t){return t}))),e.setData(t,null,1)}),this),this.attachListener(e,"getSnapshot",(function(e){e.data=this.getData(1)}),this),this.attachListener(e,"afterSetData",(function(){this.setData(e.getData(1))}),this),this.attachListener(e,"loadSnapshot",(function(e){this.setData(e.data,1)}),this),this.attachListener(e,"beforeFocus",(function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()}),this),this.attachListener(e,"insertHtml",(function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)}),this),this.attachListener(e,"insertElement",(function(e){this.insertElement(e.data)}),this),this.attachListener(e,"insertText",(function(e){this.insertText(e.data)}),this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",(function(){this.hasFocus=!1}),null,null,-1),this.on("focus",(function(){this.hasFocus=!0}),null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",(function(){e._.previousScrollTop=e.editable().$.scrollTop}),null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var n=function(){var t=e.editable();null!=e._.previousScrollTop&&t.getDocument().equals(CKEDITOR.document)&&(t.$.scrollTop=e._.previousScrollTop,e._.previousScrollTop=null,this.removeListener("scroll",n))};this.on("scroll",n)}if(e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",(function(){e.focusManager.focus(this)}),this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var s=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var r=e.config.contentsLangDirection;this.getDirection(1)!=r&&this.changeAttr("dir",r);var a=CKEDITOR.getCss();if(a){var u=(r=s.getHead()).getCustomData("stylesheet");u?a!=u.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?u.$.styleSheet.cssText=a:u.setText(a)):(a=s.appendStyleText(a),a=new CKEDITOR.dom.element(a.ownerNode||a.owningElement),r.setCustomData("stylesheet",a),a.data("cke-temp",1))}r=s.getCustomData("stylesheet_ref")||0,s.setCustomData("stylesheet_ref",r+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",(function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()}));var d={8:1,46:1};this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;var i,n=t.data.domEvent.getKey();if(0!==(t=e.getSelection()).getRanges().length){if(n in d){var s,r,a,l,u=t.getRanges()[0],h=u.startPath();n=8==n,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(s=t.getSelectedElement())||(s=o(t))?(e.fire("saveSnapshot"),u.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),s.remove(),u.select(),e.fire("saveSnapshot"),i=1):u.collapsed&&((r=h.block)&&(l=r[n?"getPrevious":"getNext"](c))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&u[n?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),u[n?"checkEndOfBlock":"checkStartOfBlock"]()&&r.remove(),u["moveToElementEdit"+(n?"End":"Start")](l),u.select(),e.fire("saveSnapshot"),i=1):h.blockLimit&&h.blockLimit.is("td")&&(a=h.blockLimit.getAscendant("table"))&&u.checkBoundaryOfElement(a,n?CKEDITOR.START:CKEDITOR.END)&&(l=a[n?"getPrevious":"getNext"](c))?(e.fire("saveSnapshot"),u["moveToElementEdit"+(n?"End":"Start")](l),u.checkStartOfBlock()&&u.checkEndOfBlock()?l.remove():u.select(),e.fire("saveSnapshot"),i=1):(a=h.contains(["td","th","caption"]))&&u.checkBoundaryOfElement(a,n?CKEDITOR.START:CKEDITOR.END)&&(i=1))}return!i}})),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",(function(t){t.data.getKeystroke()in d&&!this.getFirst(i)&&(this.appendBogus(),(t=e.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())})),this.attachListener(this,"dblclick",(function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)})),CKEDITOR.env.ie&&this.attachListener(this,"click",t),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",(function(t){var i=t.data.getTarget();i.is("img","hr","input","textarea","select")&&!i.isReadOnly()&&(e.getSelection().selectElement(i),i.is("input","textarea","select")&&t.data.preventDefault())})),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",(function(t){(t=t.data.getTarget())&&t.is("img")&&!t.isReadOnly()&&e.getSelection().selectElement(t)})),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",(function(t){if(2==t.data.$.button&&!(t=t.data.getTarget()).getAscendant("table")&&!t.getOuterHtml().replace(p,"")){var i=e.createRange();i.moveToElementEditStart(t),i.select(!0)}})),CKEDITOR.env.webkit&&(this.attachListener(this,"click",(function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()})),this.attachListener(this,"mouseup",(function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))),CKEDITOR.env.webkit&&this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;if((i=t.data.domEvent.getKey())in d&&0!==(t=e.getSelection()).getRanges().length){var i=8==i,n=t.getRanges()[0];if(t=n.startPath(),n.collapsed)e:{var o=t.block;if(o&&n[i?"checkStartOfBlock":"checkEndOfBlock"]()&&n.moveToClosestEditablePosition(o,!i)&&n.collapsed){if(n.startContainer.type==CKEDITOR.NODE_ELEMENT){var s=n.startContainer.getChild(n.startOffset-(i?1:0));if(s&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("hr")){e.fire("saveSnapshot"),s.remove(),t=!0;break e}}var r;!(n=n.startPath().block)||n&&n.contains(o)?t=void 0:(e.fire("saveSnapshot"),(r=(i?n:o).getBogus())&&r.remove(),s=(r=e.getSelection()).createBookmarks(),(i?o:n).moveChildren(i?n:o,!1),t.lastElement.mergeSiblings(),l(o,n,!i),r.selectBookmarks(s),t=!0)}else t=!1}else i=n,r=t.block,n=i.endPath().block,r&&n&&!r.equals(n)?(e.fire("saveSnapshot"),(o=r.getBogus())&&o.remove(),i.enlarge(CKEDITOR.ENLARGE_INLINE),i.deleteContents(),n.getParent()&&(n.moveChildren(r,!1),t.lastElement.mergeSiblings(),l(r,n,!0)),(i=e.getSelection().getRanges()[0]).collapse(1),i.optimize(),""===i.startContainer.getHtml()&&i.startContainer.appendBogus(),i.select(),t=!0):t=!1;if(!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}}),this,null,100)}}},_:{detach:function(){var e;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){var t=(e=this.getDocument()).getHead();if(t.getCustomData("stylesheet")){var i=e.getCustomData("stylesheet_ref");--i?e.setCustomData("stylesheet_ref",i):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)},CKEDITOR.on("instanceLoaded",(function(t){var i=t.editor;i.on("insertElement",(function(e){(e=e.data).type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))})),i.on("selectionChange",(function(t){if(!i.readOnly){var n=i.getSelection();n&&!n.isLocked&&(n=i.checkDirty(),i.fire("lockSnapshot"),e(t),i.fire("unlockSnapshot"),!n&&i.resetDirty())}}))})),CKEDITOR.on("instanceCreated",(function(e){var t=e.editor;t.on("mode",(function(){var e=t.editable();if(e&&e.isInline()){var i=t.title;if(e.changeAttr("role","textbox"),e.changeAttr("aria-multiline","true"),e.changeAttr("aria-label",i),i&&e.changeAttr("title",i),(o=t.fire("ariaEditorHelpLabel",{}).label)&&(i=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var n=CKEDITOR.tools.getNextId(),o=CKEDITOR.dom.element.createFromHtml('<span id="'+n+'" class="cke_voice_label">'+o+"</span>");i.append(o),e.changeAttr("aria-describedby",n)}}}))})),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),c=CKEDITOR.dom.walker.whitespaces(!0),u=CKEDITOR.dom.walker.bookmark(!1,!0),d=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.bogus(),p=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,m=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(i,n){var o,s,r,a,l=[],u=n.range.startContainer;o=n.range.startPath(),u=c[u.getName()];for(var d=0,h=i.getChildren(),p=h.count(),m=-1,g=-1,f=0,y=o.contains(c.$list);d<p;++d)e(o=h.getItem(d))?(r=o.getName(),y&&r in CKEDITOR.dtd.$list?l=l.concat(t(o,n)):(a=!!u[r],"br"!=r||!o.data("cke-eol")||d&&d!=p-1||(f=(s=d?l[d-1].node:h.getItem(d+1))&&(!e(s)||!s.is("br")),s=s&&e(s)&&c.$block[s.getName()]),-1!=m||a||(m=d),a||(g=d),l.push({isElement:1,isLineBreak:f,isBlock:o.isBlockBoundary(),hasBlockSibling:s,node:o,name:r,allowed:a}),s=f=0)):l.push({isElement:0,node:o,allowed:1});return-1<m&&(l[m].firstNotAllowed=1),-1<g&&(l[g].lastNotAllowed=1),l}function n(t,i){var o,s=[],r=t.getChildren(),a=r.count(),l=0,u=c[i],d=!t.is(c.$inline)||t.is("br");for(d&&s.push(" ");l<a;l++)e(o=r.getItem(l))&&!o.is(u)?s=s.concat(n(o,i)):s.push(o);return d&&s.push(" "),s}function o(t){return e(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function a(t){return t&&e(t)&&(t.is(c.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function l(t,i,n,o){var s,r,a=t.clone();a.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(s=new CKEDITOR.dom.walker(a).next())&&e(s)&&u[s.getName()]&&(r=s.getPrevious())&&e(r)&&!r.getParent().equals(t.startContainer)&&n.contains(r)&&o.contains(s)&&s.isIdentical(r)&&(s.moveChildren(r),s.remove(),l(t,i,n,o))}var c=CKEDITOR.dtd,u={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},h=CKEDITOR.tools.extend({},c.$inline);return delete h.br,function(u,p,m,g){var f=u.editor,y=!1;if("unfiltered_html"==p&&(p="html",y=!0),!g.checkReadOnly()){var b,v,_;if(p=(u={type:p,dontFilter:y,editable:u,editor:f,range:g,blockLimit:R=new CKEDITOR.dom.elementPath(g.startContainer,g.root).blockLimit||g.root,mergeCandidates:[],zombies:[]}).range,g=u.mergeCandidates,"text"==u.type&&p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(b=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",p.document),p.insertNode(b),p.setStartAfter(b)),y=new CKEDITOR.dom.elementPath(p.startContainer),u.endPath=R=new CKEDITOR.dom.elementPath(p.endContainer),!p.collapsed){f=R.block||R.blockLimit;var C=p.getCommonAncestor();f&&!f.equals(C)&&!f.contains(C)&&p.checkEndOfBlock()&&u.zombies.push(f),p.deleteContents()}for(;(v=o(p))&&e(v)&&v.isBlockBoundary()&&y.contains(v);)p.moveToPosition(v,CKEDITOR.POSITION_BEFORE_END);for(l(p,u.blockLimit,y,R),b&&(p.setEndBefore(b),p.collapse(),b.remove()),(f=(b=p.startPath()).contains(a,!1,1))&&(p.splitElement(f),u.inlineStylesRoot=f,u.inlineStylesPeak=b.lastElement),(f=(b=p.createBookmark()).startNode.getPrevious(i))&&e(f)&&a(f)&&g.push(f),(f=b.startNode.getNext(i))&&e(f)&&a(f)&&g.push(f),f=b.startNode;(f=f.getParent())&&a(f);)g.push(f);if(p.moveToBookmark(b),b=m){if(b=u.range,"text"==u.type&&u.inlineStylesRoot){for(p=(v=u.inlineStylesPeak).getDocument().createText("{cke-peak}"),g=u.inlineStylesRoot.getParent();!v.equals(g);)p=p.appendTo(v.clone()),v=v.getParent();m=p.getOuterHtml().split("{cke-peak}").join(m)}if(v=u.blockLimit.getName(),/^\s+|\s+$/.test(m)&&"span"in CKEDITOR.dtd[v]&&(m=(D='<span data-cke-marker="1">&nbsp;</span>')+m+D),m=u.editor.dataProcessor.toHtml(m,{context:null,fixForBody:!1,protectedWhitespaces:!!D,dontFilter:u.dontFilter,filter:u.editor.activeFilter,enterMode:u.editor.activeEnterMode}),(v=b.document.createElement("body")).setHtml(m),D&&(v.getFirst().remove(),v.getLast().remove()),(D=b.startPath().block)&&(1!=D.getChildCount()||!D.getBogus()))e:{var w;if(1==v.getChildCount()&&e(w=v.getFirst())&&w.is(d)&&!w.hasAttribute("contenteditable")){for(b=0,g=(D=w.getElementsByTag("*")).count();b<g;b++)if(!(p=D.getItem(b)).is(h))break e;w.moveChildren(w.getParent(1)),w.remove()}}u.dataWrapper=v,b=m}if(b){var T;b=(w=u.range).document,v=u.blockLimit,g=0;var E,I,x,S,k,D=[];m=f=0,p=w.startContainer;var O,R=(y=u.endPath.elements[0]).getPosition(p);for(C=!(!y.getCommonAncestor(p)||R==CKEDITOR.POSITION_IDENTICAL||R&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(t,i){function n(t,i){if(i.isBlock&&i.isElement&&!i.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var o=i.endContainer.getChild(i.endOffset),s=i.endContainer.getChild(i.endOffset-1);o&&n(o,t[t.length-1]),s&&n(s,t[0])&&(i.setEnd(i.endContainer,i.endOffset-1),i.collapse())}(p=t(u.dataWrapper,u),w);g<p.length;g++){if(T=(R=p[g]).isLineBreak){T=w,S=v;var P=void 0,L=void 0;R.hasBlockSibling?T=1:(P=T.startContainer.getAscendant(c.$block,1))&&P.is({div:1,p:1})?(L=P.getPosition(S))==CKEDITOR.POSITION_IDENTICAL||L==CKEDITOR.POSITION_CONTAINS?T=0:(S=T.splitElement(P),T.moveToPosition(S,CKEDITOR.POSITION_AFTER_START),T=1):T=0}if(T)m=0<g;else{if(T=w.startPath(),!R.isBlock&&s(u.editor,T.block,T.blockLimit)&&(x=r(u.editor))&&((x=b.createElement(x)).appendBogus(),w.insertNode(x),CKEDITOR.env.needsBrFiller&&(E=x.getBogus())&&E.remove(),w.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END)),(T=w.startPath().block)&&!T.equals(I)&&((E=T.getBogus())&&(E.remove(),D.push(T)),I=T),R.firstNotAllowed&&(f=1),f&&R.isElement){for(T=w.startContainer,S=null;T&&!c[T.getName()][R.name];){if(T.equals(v)){T=null;break}S=T,T=T.getParent()}if(T)S&&(k=w.splitElement(S),u.zombies.push(k),u.zombies.push(S));else{S=v.getName(),O=!g,T=g==p.length-1,P=[],L=(S=n(R.node,S)).length;for(var A=0,M=void 0,B=0,N=-1;A<L;A++)" "==(M=S[A])?(B||O&&!A||(P.push(new CKEDITOR.dom.text(" ")),N=P.length),B=1):(P.push(M),B=0);T&&N==P.length&&P.pop(),O=P}}if(O){for(;T=O.pop();)w.insertNode(T);O=0}else w.insertNode(R.node);R.lastNotAllowed&&g<p.length-1&&((k=C?y:k)&&w.setEndAt(k,CKEDITOR.POSITION_AFTER_START),f=0),w.collapse()}}(E=1==p.length&&(E=p[0]).isElement&&"false"==E.node.getAttribute("contenteditable"))&&(m=!0,T=p[0].node,w.setStartAt(T,CKEDITOR.POSITION_BEFORE_START),w.setEndAt(T,CKEDITOR.POSITION_AFTER_END)),u.dontMoveCaret=m,u.bogusNeededBlocks=D}for(E=u.range,k=u.bogusNeededBlocks,O=E.createBookmark();I=u.zombies.pop();)I.getParent()&&((x=E.clone()).moveToElementEditStart(I),x.removeEmptyBlocksAtEnd());if(k)for(;I=k.pop();)CKEDITOR.env.needsBrFiller?I.appendBogus():I.append(E.document.createText(" "));for(;I=u.mergeCandidates.pop();)I.mergeSiblings();if(E.moveToBookmark(O),!u.dontMoveCaret){for(I=o(E);I&&e(I)&&!I.is(c.$empty);){if(I.isBlockBoundary())E.moveToPosition(I,CKEDITOR.POSITION_BEFORE_END);else{if(a(I)&&I.getHtml().match(/(\s|&nbsp;)$/g)){_=null;break}(_=E.clone()).moveToPosition(I,CKEDITOR.POSITION_BEFORE_END)}I=I.getLast(i)}_&&E.moveToRange(_)}}}}(),g=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,i){return t=e.getDocument().createElement(t),e.append(t,i),t}function i(e){for(var t,i=e.count();0<i--;)t=e.getItem(i),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())}return function(n){var o=n.startContainer,s=o.getAscendant("table",1),r=!1;i(s.getElementsByTag("td")),i(s.getElementsByTag("th")),(s=n.clone()).setStart(o,0),(s=e(s).lastBackward())||((s=n.clone()).setEndAt(o,CKEDITOR.POSITION_BEFORE_END),s=e(s).lastForward(),r=!0),s||(s=o),s.is("table")?(n.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),n.collapse(!0),s.remove()):(s.is({tbody:1,thead:1,tfoot:1})&&(s=t(s,"tr",r)),s.is("tr")&&(s=t(s,s.getParent().is("thead")?"th":"td",r)),(o=s.getBogus())&&o.remove(),n.moveToPosition(s,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),f=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$listItem)},e}return function(t){var i,n=t.startContainer,o=!1;(i=t.clone()).setStart(n,0),(i=e(i).lastBackward())||((i=t.clone()).setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i=e(i).lastForward(),o=!0),i||(i=n),i.is(CKEDITOR.dtd.$list)?(t.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),i.remove()):((n=i.getBogus())&&n.remove(),t.moveToPosition(i,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}(),y={eol:{detect:function(e,t){var i=e.range,n=i.clone(),o=i.clone(),s=new CKEDITOR.dom.elementPath(i.startContainer,t),r=new CKEDITOR.dom.elementPath(i.endContainer,t);n.collapse(1),o.collapse(),s.block&&n.checkBoundaryOfElement(s.block,CKEDITOR.END)&&(i.setStartAfter(s.block),e.prependEolBr=1),r.block&&o.checkBoundaryOfElement(r.block,CKEDITOR.START)&&(i.setEndBefore(r.block),e.appendEolBr=1)},fix:function(e,t){var i,n=t.getDocument();e.appendEolBr&&(i=this.createEolBr(n),e.fragment.append(i)),!e.prependEolBr||i&&!i.getPrevious()||e.fragment.append(this.createEolBr(n),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var t,i=(t=e.range.getBoundaryNodes()).startNode;!(t=t.endNode)||!h(t)||i&&i.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var i,n=(r=e.range).getCommonAncestor(),o=new CKEDITOR.dom.elementPath(n,t),s=new CKEDITOR.dom.elementPath(r.startContainer,t),r=new CKEDITOR.dom.elementPath(r.endContainer,t);if(n.type==CKEDITOR.NODE_TEXT&&(n=n.getParent()),o.blockLimit.is({tr:1,table:1})){var a=o.contains("table").getParent();i=function(e){return!e.equals(a)}}else if(o.block&&o.block.is(CKEDITOR.dtd.$listItem)&&(s=s.contains(CKEDITOR.dtd.$list),r=r.contains(CKEDITOR.dtd.$list),!s.equals(r))){var l=o.contains(CKEDITOR.dtd.$list).getParent();i=function(e){return!e.equals(l)}}i||(i=function(e){return!e.equals(o.block)&&!e.equals(o.blockLimit)}),this.rebuildFragment(e,t,n,i)},rebuildFragment:function(e,t,i,n){for(var o;i&&!i.equals(t)&&n(i);)o=i.clone(0,1),e.fragment.appendTo(o),e.fragment=o,i=i.getParent()}},cell:{shrink:function(e){var t=(e=e.range).startContainer,i=e.endContainer,n=e.startOffset,o=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(i)&&t.is("tr")&&++n==o&&e.shrink(CKEDITOR.SHRINK_TEXT)}}},b=function(){function e(e,t){var i=e.getParent();i.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](i)}function t(t,i,n){e(i),e(n,1);for(var o;o=n.getNext();)o.insertAfter(i),i=o;d(t)&&t.remove()}function i(e,t){var i=new CKEDITOR.dom.range(e);return i.setStartAfter(t.startNode),i.setEndBefore(t.endNode),i}return{list:{detectMerge:function(e,t){var n=i(t,e.bookmark),o=n.startPath(),s=n.endPath(),r=o.contains(CKEDITOR.dtd.$list),a=s.contains(CKEDITOR.dtd.$list);e.mergeList=r&&a&&r.getParent().equals(a.getParent())&&!r.equals(a),e.mergeListItems=o.block&&s.block&&o.block.is(CKEDITOR.dtd.$listItem)&&s.block.is(CKEDITOR.dtd.$listItem),(e.mergeList||e.mergeListItems)&&((n=n.clone()).setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=n.createBookmark())},merge:function(e,i){if(e.mergeListBookmark){var n=e.mergeListBookmark.startNode,o=e.mergeListBookmark.endNode,s=new CKEDITOR.dom.elementPath(n,i),r=new CKEDITOR.dom.elementPath(o,i);if(e.mergeList){var a=s.contains(CKEDITOR.dtd.$list),l=r.contains(CKEDITOR.dtd.$list);a.equals(l)||(l.moveChildren(a),l.remove())}e.mergeListItems&&(s=s.contains(CKEDITOR.dtd.$listItem),r=r.contains(CKEDITOR.dtd.$listItem),s.equals(r)||t(r,n,o)),n.remove(),o.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var i=new CKEDITOR.dom.range(t);i.setStartBefore(e.bookmark.startNode),i.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=i.createBookmark()}},merge:function(e,i){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var n=e.mergeBlockBookmark.startNode,o=e.mergeBlockBookmark.endNode,s=new CKEDITOR.dom.elementPath(n,i),r=new CKEDITOR.dom.elementPath(o,i);s=s.block,r=r.block,s&&r&&!s.equals(r)&&t(r,n,o),n.remove(),o.remove()}}},table:function(){function e(e){var i,o=[],s=new CKEDITOR.dom.walker(e),r=e.startPath().contains(n),a=e.endPath().contains(n),l={};return s.guard=function(s,c){if(s.type==CKEDITOR.NODE_ELEMENT){var u="visited_"+(c?"out":"in");if(s.getCustomData(u))return;CKEDITOR.dom.element.setMarker(l,s,u,1)}if(c&&r&&s.equals(r))(i=e.clone()).setEndAt(r,CKEDITOR.POSITION_BEFORE_END),o.push(i);else if(!c&&a&&s.equals(a))(i=e.clone()).setStartAt(a,CKEDITOR.POSITION_AFTER_START),o.push(i);else{if((u=!c)&&(u=s.type==CKEDITOR.NODE_ELEMENT&&s.is(n)&&(!r||t(s,r))&&(!a||t(s,a))),!u&&(u=c))if(s.is(n)){u=r&&r.getAscendant("table",!0);var d=a&&a.getAscendant("table",!0),h=s.getAscendant("table",!0);u=u&&u.contains(h)||d&&d.contains(h)}else u=void 0;u&&((i=e.clone()).selectNodeContents(s),o.push(i))}},s.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),o}function t(e,t){var i=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,n=e.getPosition(t);return n!==CKEDITOR.POSITION_IDENTICAL&&0==(n&i)}var n={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range;(i=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var i=new CKEDITOR.dom.walker(i),o=0;if(i.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(n)&&++o},i.checkForward(),1<o){i=t.startPath().contains("table");var s=t.endPath().contains("table");i&&s&&t.checkBoundaryOfElement(i,CKEDITOR.START)&&t.checkBoundaryOfElement(s,CKEDITOR.END)&&((t=e.range.clone()).setStartBefore(i),t.setEndAfter(s),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(o,s){var r,a,l=i(s,o.bookmark),c=l.clone(),u=l.getCommonAncestor();u.is(CKEDITOR.dtd.$tableContent)&&!u.is(n)&&(u=u.getAscendant("table",!0)),a=u,u=new CKEDITOR.dom.elementPath(l.startContainer,a),a=new CKEDITOR.dom.elementPath(l.endContainer,a),u=u.contains("table"),a=a.contains("table"),(u||a)&&(u&&a&&t(u,a)?(o.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),c.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),(c=l.clone()).setEndAt(u,CKEDITOR.POSITION_AFTER_END),(r=l.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),r=e(c).concat(e(r))):u?a||(o.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),l.setEndAt(u,CKEDITOR.POSITION_AFTER_END)):(o.tableSurroundingRange=c,c.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(a,CKEDITOR.POSITION_AFTER_START)),o.tableContentsRanges=r||e(l))},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),d(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,i=e.range.clone();(t=t.createElement("p")).insertBefore(e.purgeTableBookmark.startNode),i.moveToBookmark(e.purgeTableBookmark),i.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var i,n=t.startPath();s(e,n.block,n.blockLimit)&&(i=r(e))&&((i=t.document.createElement(i)).appendBogus(),t.insertNode(i),t.moveToPosition(i,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(t,i){if(0===t.length||e(t[0].getEnclosedNode()))return!1;var n,o;if((n=!i&&1===t.length)&&!(n=t[0].collapsed)){var s=t[0];n=s.startContainer.getAscendant({td:1,th:1},!0);var r=s.endContainer.getAscendant({td:1,th:1},!0);o=CKEDITOR.tools.trim,n=!(!n||!n.equals(r)||n.findOne("td, th, tr, tbody, table")||(s=s.cloneContents()).getFirst()&&o(s.getFirst().getText())===o(n.getText()))}if(n)return!1;for(o=0;o<t.length;o++)if(!(n=t[o]._getTableElement()))return!1;return!0}function i(e){var t=this.root.editor,i=t.getSelection(1);this.reset(),d=!0,i.root.once("selectionchange",(function(e){e.cancel()}),null,null,0),i.selectRanges([e[0]]),(i=this._.cache).ranges=new CKEDITOR.dom.rangeList(e),i.type=CKEDITOR.SELECTION_TEXT,i.selectedElement=e[0]._getTableElement(),i.selectedText=function(e){e=function(e){function t(e){e=e.find("td, th");var t,i=[];for(t=0;t<e.count();t++)i.push(e.getItem(t));return i}var i,n,o=[];for(n=0;n<e.length;n++)(i=e[n]._getTableElement()).is&&i.is({td:1,th:1})?o.push(i):o=o.concat(t(i));return o}(e);var t,i,n="",o=[];for(i=0;i<e.length;i++)t&&!t.equals(e[i].getAscendant("tr"))?(n+=o.join("\t")+"\n",t=e[i].getAscendant("tr"),o=[]):0===i&&(t=e[i].getAscendant("tr")),o.push(e[i].getText());return n+o.join("\t")}(e),i.nativeSel=null,this.isFake=1,this.rev=g++,t._.fakeSelection=this,d=!1,this.root.fire("selectionchange")}function n(){var i,n=this._.fakeSelection;if(n){var o;if(!(o=!(i=this.getSelection(1)))&&(o=!i.isHidden())){o=n;var s=i.getRanges(),r=o.getRanges(),a=s.length&&s[0]._getTableElement()&&s[0]._getTableElement().getAscendant("table",!0),l=r.length&&r[0]._getTableElement()&&r[0]._getTableElement().getAscendant("table",!0),c=1===s.length&&s[0]._getTableElement()&&s[0]._getTableElement().is("table"),u=1===r.length&&r[0]._getTableElement()&&r[0]._getTableElement().is("table");if(e(o.getSelectedElement()))o=!1;else{var d=1===s.length&&s[0].collapsed;r=t(s,!!CKEDITOR.env.webkit)&&t(r),(a=!(!a||!l)&&(a.equals(l)||l.contains(a)))&&(d||r)?(c&&!u&&o.selectRanges(s),o=!0):o=!1}o=!o}o&&(n.reset(),n=0)}(n||(n=i||this.getSelection(1))&&n.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",n),(i=this.elementPath()).compare(this._.selectionPreviousPath)||(o=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(i.blockLimit),CKEDITOR.env.webkit&&!o&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=i,this.fire("selectionChange",{selection:n,path:i})))}function o(){p=!0,h||(s.call(this),h=CKEDITOR.tools.setTimeout(s,200,this))}function s(){h=null,p&&(CKEDITOR.tools.setTimeout(n,0,this),p=!1)}function r(e){return!(!b(e)&&(e.type!=CKEDITOR.NODE_ELEMENT||e.is(CKEDITOR.dtd.$empty)))}function a(e){function t(t,i){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&e.clone()["moveToElementEdit"+(i?"End":"Start")](t)}if(!(e.root instanceof CKEDITOR.editable))return!1;var i=e.startContainer,n=e.getPreviousNode(r,null,i),o=e.getNextNode(r,null,i);return!(!t(n)&&!t(o,1)&&(n||o||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()&&i.getBogus()))}function l(e){c(e,!1);var t=e.getDocument().createText(f);return e.setCustomData("cke-fillingChar",t),t}function c(e,t){var i=e&&e.removeCustomData("cke-fillingChar");if(i){if(!1!==t){var n=e.getDocument().getSelection().getNative(),o=n&&"None"!=n.type&&n.getRangeAt(0),s=f.length;if(i.getLength()>s&&o&&o.intersectsNode(i.$)){var r=[{node:n.anchorNode,offset:n.anchorOffset},{node:n.focusNode,offset:n.focusOffset}];n.anchorNode==i.$&&n.anchorOffset>s&&(r[0].offset-=s),n.focusNode==i.$&&n.focusOffset>s&&(r[1].offset-=s)}}i.setText(u(i.getText(),1)),r&&(n=(i=e.getDocument().$).getSelection(),(i=i.createRange()).setStart(r[0].node,r[0].offset),i.collapse(!0),n.removeAllRanges(),n.addRange(i),n.extend(r[1].node,r[1].offset))}}function u(e,t){return t?e.replace(y,(function(e,t){return t?" ":""})):e.replace(f,"")}var d,h,p,m="function"!=typeof window.getSelection,g=1,f=CKEDITOR.tools.repeat("​",7),y=new RegExp(f+"( )?","g"),b=CKEDITOR.dom.walker.invisible(1),v=function(){function e(e){return function(t){var i=t.editor.createRange();return i.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([i]),!1}}function t(e){return function(t){var i,n=t.editor,o=n.createRange();if(!n.readOnly)return(i=o.moveToClosestEditablePosition(t.selected,e))||(i=o.moveToClosestEditablePosition(t.selected,!e)),i&&n.getSelection().selectRanges([o]),n.fire("saveSnapshot"),t.selected.remove(),i||(o.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([o])),n.fire("saveSnapshot"),!1}}var i=e(),n=e(1);return{37:i,38:i,39:n,40:n,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",(function(e){function t(){var e=i.getSelection();e&&e.removeAllRanges()}var i=e.editor;i.on("contentDom",(function(){function e(){(r=new CKEDITOR.dom.selection(i.getSelection())).lock()}function t(){p.removeListener("mouseup",t),y.removeListener("mouseup",t);var e=CKEDITOR.document.$.selection,i=e.createRange();"None"!=e.type&&i.parentElement()&&i.parentElement().ownerDocument==h.$&&i.select()}var s,r,a,l,u,d,h=i.document,p=CKEDITOR.document,g=i.editable(),f=h.getBody(),y=h.getDocumentElement(),b=g.isInline();CKEDITOR.env.gecko&&g.attachListener(g,"focus",(function(e){e.removeListener(),0!==s&&(e=i.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==g.$&&((e=i.createRange()).moveToElementEditStart(g),e.select())}),null,null,-2),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",(function(){s&&CKEDITOR.env.webkit&&(s=i._.previousActive&&i._.previousActive.equals(h.getActive()))&&null!=i._.previousScrollTop&&i._.previousScrollTop!=g.$.scrollTop&&(g.$.scrollTop=i._.previousScrollTop),i.unlockSelection(s),s=0}),null,null,-1),g.attachListener(g,"mousedown",(function(){s=0})),(CKEDITOR.env.ie||b)&&(m?g.attachListener(g,"beforedeactivate",e,null,null,-1):g.attachListener(i,"selectionCheck",e,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",(function(){i.lockSelection(r),s=1}),null,null,-1),g.attachListener(g,"mousedown",(function(){s=0}))),CKEDITOR.env.ie&&!b&&(g.attachListener(g,"mousedown",(function(e){2==e.data.$.button&&((e=i.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(a=i.window.getScrollPosition()))})),g.attachListener(g,"mouseup",(function(e){2==e.data.$.button&&a&&(i.document.$.documentElement.scrollLeft=a.x,i.document.$.documentElement.scrollTop=a.y),a=null})),"BackCompat"!=h.$.compatMode)&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&y.on("mousedown",(function(e){function t(e){if(e=e.data.$,u){var t=f.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(e){}u.setEndPoint(0>d.compareEndPoints("StartToStart",t)?"EndToEnd":"StartToStart",t),u.select()}}function i(){y.removeListener("mousemove",t),p.removeListener("mouseup",i),y.removeListener("mouseup",i),u.select()}if((e=e.data).getTarget().is("html")&&e.$.y<y.$.clientHeight&&e.$.x<y.$.clientWidth){u=f.$.createTextRange();try{u.moveToPoint(e.$.clientX,e.$.clientY)}catch(e){}d=u.duplicate(),y.on("mousemove",t),p.on("mouseup",i),y.on("mouseup",i)}})),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&y.on("mousedown",(function(e){e.data.getTarget().is("html")&&(p.on("mouseup",t),y.on("mouseup",t))}))),g.attachListener(g,"selectionchange",n,i),g.attachListener(g,"keyup",o,i),CKEDITOR.env.ie&&g.attachListener(g,"keydown",(function(e){var t=this.getSelection(1),i=function(e){return(e=e.getRanges()[0])&&(e=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")}),!0))&&"false"===e.getAttribute("contenteditable")?e:null}(t);i&&!i.equals(g)&&(t.selectElement(i),e.data.preventDefault())}),i),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",(function(){i.forceNextSelectionCheck(),i.selectionChange(1)})),b&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(g.attachListener(g,"mousedown",(function(){l=1})),g.attachListener(h.getDocumentElement(),"mouseup",(function(){l&&o.call(i),l=0}))):g.attachListener(CKEDITOR.env.ie?g:h.getDocumentElement(),"mouseup",o,i),CKEDITOR.env.webkit&&g.attachListener(h,"keydown",(function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:g.hasFocus&&c(g)}}),null,null,-1),g.attachListener(g,"keydown",function(e){var t={37:1,39:1,8:1,46:1};return function(i){var n=i.data.getKeystroke();if(t[n]){var o=e.getSelection().getRanges(),s=o[0];1==o.length&&s.collapsed&&(n=s[38>n?"getPreviousEditableNode":"getNextEditableNode"]())&&n.type==CKEDITOR.NODE_ELEMENT&&"false"==n.getAttribute("contenteditable")&&(e.getSelection().fake(n),i.data.preventDefault(),i.cancel())}}}(i),null,null,-1)})),i.on("setData",(function(){i.unlockSelection(),CKEDITOR.env.webkit&&t()})),i.on("contentDomUnload",(function(){i.unlockSelection()})),CKEDITOR.env.ie9Compat&&i.on("beforeDestroy",t,null,null,9),i.on("dataReady",(function(){delete i._.fakeSelection,delete i._.hiddenSelectionContainer,i.selectionChange(1)})),i.on("loadSnapshot",(function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=i.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=i.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())}),null,null,100),i.on("key",(function(e){if("wysiwyg"==i.mode){var t=i.getSelection();if(t.isFake){var n=v[e.data.keyCode];if(n)return n({editor:i,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}}))})),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(e){var t=e.editor;t.on("selectionChange",(function(){var e=t.editable(),i=e.getCustomData("cke-fillingChar");i&&(i.getCustomData("ready")?(c(e),e.editor.fire("selectionCheck")):i.setCustomData("ready",1))}),null,null,-1),t.on("beforeSetMode",(function(){c(t.editable())}),null,null,-1),t.on("getSnapshot",(function(e){e.data&&(e.data=u(e.data))}),t,null,20),t.on("toDataFormat",(function(e){e.data.dataValue=u(e.data.dataValue)}),null,null,0)})),CKEDITOR.editor.prototype.selectionChange=function(e){(e?n:o).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return(e=e||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var i,n,o=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:g++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=o?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(e=this.getNative())if(e.getRangeAt)i=(n=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(n.commonAncestorContainer);else{try{n=e.createRange()}catch(e){}i=n&&CKEDITOR.dom.element.get(n.item&&n.item(0)||n.parentElement())}return(!i||i.type!=CKEDITOR.NODE_ELEMENT&&i.type!=CKEDITOR.NODE_TEXT||!this.root.equals(i)&&!this.root.contains(i))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var _={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:u,_createFillingCharSequenceNode:l,FILLING_CHAR_SEQUENCE:f}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=m?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:m?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var i=this.getNative(),n=i.type;"Text"==n&&(t=CKEDITOR.SELECTION_TEXT),"Control"==n&&(t=CKEDITOR.SELECTION_ELEMENT),i.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(e){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT;if((i=this.getNative())&&i.rangeCount){if(1==i.rangeCount){var i,n=(i=i.getRangeAt(0)).startContainer;n==i.endContainer&&1==n.nodeType&&1==i.endOffset-i.startOffset&&_[n.childNodes[i.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=m?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,i){(t=t.duplicate()).collapse(i);var n=t.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var o,s,r,a,l=n.children,c=t.duplicate(),u=0,d=l.length-1,h=-1;u<=d;)if(o=l[h=Math.floor((u+d)/2)],c.moveToElementText(o),0<(r=c.compareEndPoints("StartToStart",t)))d=h-1;else{if(!(0>r))return{container:n,offset:e(o)};u=h+1}if(-1==h||h==l.length-1&&0>r){if(c.moveToElementText(n),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=n.childNodes,!c)return(o=l[l.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:n,offset:l.length}:{container:o,offset:o.nodeValue.length};for(n=l.length;0<c&&0<n;)(s=l[--n]).nodeType==CKEDITOR.NODE_TEXT&&(a=s,c-=s.nodeValue.length);return{container:a,offset:-c}}if(c.collapse(0<r),c.setEndPoint(0<r?"StartToStart":"EndToStart",t),!(c=c.text.replace(/(\r\n|\r)/g,"\n").length))return{container:n,offset:e(o)+(0<r?0:1)};for(;0<c;)try{(s=o[0<r?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(c-=s.nodeValue.length,a=s),o=s}catch(t){return{container:n,offset:e(o)}}return{container:a,offset:0<r?-c:a.nodeValue.length+c}};return function(){var e=(a=this.getNative())&&a.createRange(),i=this.getType();if(!a)return[];if(i==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),i=t(e,!0),a.setStart(new CKEDITOR.dom.node(i.container),i.offset),i=t(e),a.setEnd(new CKEDITOR.dom.node(i.container),i.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(i==CKEDITOR.SELECTION_ELEMENT){i=[];for(var n=0;n<e.length;n++){for(var o=e.item(n),s=o.parentNode,r=0,a=new CKEDITOR.dom.range(this.root);r<s.childNodes.length&&s.childNodes[r]!=o;r++);a.setStart(new CKEDITOR.dom.node(s),r),a.setEnd(new CKEDITOR.dom.node(s),r+1),i.push(a)}return i}return[]}}():function(){var e,t=[],i=this.getNative();if(!i)return t;for(var n=0;n<i.rangeCount;n++){var o=i.getRangeAt(n);(e=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),e.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),t.push(e)}return t};return function(t){var i=this._.cache,n=i.ranges;return n||(i.ranges=n=new CKEDITOR.dom.rangeList(e.call(this))),t?function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.getCommonAncestor().isReadOnly()&&e.splice(t,1),!i.collapsed){if(i.startContainer.isReadOnly())for(var n,o=i.startContainer;o&&!((n=o.type==CKEDITOR.NODE_ELEMENT)&&o.is("body")||!o.isReadOnly());)n&&"false"==o.getAttribute("contentEditable")&&i.setStartAfter(o),o=o.getParent();o=i.startContainer,n=i.endContainer;var s=i.startOffset,r=i.endOffset,a=i.clone();o&&o.type==CKEDITOR.NODE_TEXT&&(s>=o.getLength()?a.setStartAfter(o):a.setStartBefore(o)),n&&n.type==CKEDITOR.NODE_TEXT&&(r?a.setEndAfter(n):a.setEndBefore(n)),(o=new CKEDITOR.dom.walker(a)).evaluator=function(n){if(n.type==CKEDITOR.NODE_ELEMENT&&n.isReadOnly()){var o=i.clone();return i.setEndBefore(n),i.collapsed&&e.splice(t--,1),n.getPosition(a.endContainer)&CKEDITOR.POSITION_CONTAINS||(o.setStartAfter(n),o.collapsed||e.splice(t+1,0,o)),!0}return!1},o.next()}}return e}(new CKEDITOR.dom.rangeList(n.slice())):n}}(),getStartElement:function(){var e,t=this._.cache;if(void 0!==t.startElement)return t.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var i=this.getRanges()[0];if(i){if(i.collapsed)(e=i.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(i.optimize();e=i.startContainer,i.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)i.setStartAfter(e);if((e=i.startContainer).type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(i.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(i=e.getFirst();i&&i.type==CKEDITOR.NODE_ELEMENT;)e=i,i=i.getFirst();else e=i.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,i=CKEDITOR.tools.tryThese((function(){return t.getNative().createRange().item(0)}),(function(){for(var e,i,n=t.getRanges()[0].clone(),o=2;o&&!((e=n.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&_[e.getName()]&&(i=e));o--)n.shrink(CKEDITOR.SHRINK_ELEMENT);return i&&i.$}));return e.selectedElement=i?new CKEDITOR.dom.element(i):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative();return t=m?"Control"==t.type?"":t.createRange().text:t.toString(),e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var n=this.getSelectedElement(),o=this.getRanges(),s=this.isFake;this.isLocked=0,this.reset(),e&&(e=n||o[0]&&o[0].getCommonAncestor())&&e.getAscendant("body",1)&&(t(o)?i.call(this,o):s?this.fake(n):n?this.selectElement(n):this.selectRanges(o))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var i=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!i&&e.resetDirty()}delete e._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=g++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var n=this.root.editor,o=n&&n._.hiddenSelectionContainer;if(this.reset(),o){o=this.root;for(var s,r=0;r<e.length;++r)(s=e[r]).endContainer.equals(o)&&(s.endOffset=Math.min(s.endOffset,o.getChildCount()))}if(e.length)if(this.isLocked){var u=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),u&&!u.equals(this.root)&&u.focus()}else{var h,p,g;if(1==e.length&&!(g=e[0]).collapsed&&(h=g.getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&((g=g.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(p=g.getEnclosedNode())&&p.type==CKEDITOR.NODE_ELEMENT&&(h=p),"false"==h.getAttribute("contenteditable"))||(h=void 0),h)this.fake(h);else if(n&&n.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&t(e)&&!d)i.call(this,e);else{if(m){var f,y,b;if(p=CKEDITOR.dom.walker.whitespaces(!0),h=/\ufeff|\u00a0/,g={table:1,tbody:1,tr:1},1<e.length&&(n=e[e.length-1],e[0].setEnd(n.endContainer,n.endOffset)),e=(n=e[0]).collapsed,(o=n.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in _&&(!o.is("a")||!o.getText()))try{return(b=o.$.createControlRange()).addElement(o.$),void b.select()}catch(e){}(n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in g||n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in g)&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),e=n.collapsed),g=(b=n.createBookmark()).startNode,e||(u=b.endNode),(b=n.document.$.body.createTextRange()).moveToElementText(g.$),b.moveStart("character",1),u?((h=n.document.$.body.createTextRange()).moveToElementText(u.$),b.setEndPoint("EndToEnd",h),b.moveEnd("character",-1)):(f=g.getNext(p),y=g.hasAscendant("pre"),f=!(f&&f.getText&&f.getText().match(h))&&(y||!g.hasPrevious()||g.getPrevious().is&&g.getPrevious().is("br")),(y=n.document.createElement("span")).setHtml("&#65279;"),y.insertBefore(g),f&&n.document.createText("\ufeff").insertBefore(g)),n.setStartBefore(g),g.remove(),e?(f?(b.moveStart("character",-1),b.select(),n.document.$.selection.clear()):b.select(),n.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START),y.remove()):(n.setEndBefore(u),u.remove(),b.select())}else{if(!(u=this.getNative()))return;for(this.removeAllRanges(),b=0;b<e.length;b++)if(b<e.length-1&&(f=e[b],y=e[b+1],(h=f.clone()).setStart(f.endContainer,f.endOffset),h.setEnd(y.startContainer,y.startOffset),!h.collapsed&&(h.shrink(CKEDITOR.NODE_ELEMENT,!0),n=h.getCommonAncestor(),h=h.getEnclosedNode(),n.isReadOnly()||h&&h.isReadOnly())))y.setStart(f.startContainer,f.startOffset),e.splice(b--,1);else{n=e[b],y=this.document.$.createRange(),n.collapsed&&CKEDITOR.env.webkit&&a(n)&&(h=l(this.root),n.insertNode(h),(f=h.getNext())&&!h.getPrevious()&&f.type==CKEDITOR.NODE_ELEMENT&&"br"==f.getName()?(c(this.root),n.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START)):n.moveToPosition(h,CKEDITOR.POSITION_AFTER_END)),y.setStart(n.startContainer.$,n.startOffset);try{y.setEnd(n.endContainer.$,n.endOffset)}catch(e){if(!(0<=e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw e;n.collapse(1),y.setEnd(n.endContainer.$,n.endOffset)}u.addRange(y)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e,t){var i=this.root.editor;void 0===t&&e.hasAttribute("aria-label")&&(t=e.getAttribute("aria-label")),this.reset(),function(e,t){var i=t&&CKEDITOR.tools.htmlEncode(t)||"&nbsp;";i=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px")+'">'+i+"</div>",e.document),e.fire("lockSnapshot"),e.editable().append(i);var n=e.getSelection(1),o=e.createRange(),s=n.root.on("selectionchange",(function(e){e.cancel()}),null,null,0);o.setStartAt(i,CKEDITOR.POSITION_AFTER_START),o.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n.selectRanges([o]),s.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=i}(i,t);var n=this._.cache,o=new CKEDITOR.dom.range(this.root);o.setStartBefore(e),o.setEndAfter(e),n.ranges=new CKEDITOR.dom.rangeList(o),n.selectedElement=n.startElement=e,n.type=CKEDITOR.SELECTION_ELEMENT,n.selectedText=n.nativeSel=null,this.isFake=1,this.rev=g++,i._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},isInTable:function(e){return t(this.getRanges(),e)},isCollapsed:function(){var e=this.getRanges();return 1===e.length&&e[0].collapsed},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var i,n=[],o=0;o<e.length;o++){var s=new CKEDITOR.dom.range(this.root);s.moveToBookmark(e[o]),n.push(s)}return e.isFake&&((i=t(n)?n[0]._getTableElement():n[0].getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),e.isFake=0)),e.isFake&&!t(n)?this.fake(i):this.selectRanges(n),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[m?"empty":"removeAllRanges"]()}catch(e){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var i,n;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))i=e;else if(!n){var o=e.getAttribute("contentEditable");"false"==o?i=e:"true"==o&&(n=1)}return i}function t(e,t,i,n){return(e.getPosition(t)|n)==n&&(!i.childRule||i.childRule(e))}function i(n){var s=n.document;if(n.collapsed)s=g(this,s),n.insertNode(s),n.moveToPosition(s,CKEDITOR.POSITION_BEFORE_END);else{var r,a=this.element,l=this._.definition,c=(b=l.ignoreReadonly)||l.includeReadonly;null==c&&(c=n.root.getCustomData("cke_includeReadonly"));var u=CKEDITOR.dtd[a];u||(r=!0,u=CKEDITOR.dtd.span),n.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.trim();var d,p=n.createBookmark(),m=p.startNode,f=p.endNode,y=m;if(!b){var b=e(m,v=n.getCommonAncestor()),v=e(f,v);b&&(y=b.getNextSourceNode(!0)),v&&(f=v)}for(y.getPosition(f)==CKEDITOR.POSITION_FOLLOWING&&(y=0);y;){if(b=!1,y.equals(f))y=null,b=!0;else{v=(S=y.type==CKEDITOR.NODE_ELEMENT?y.getName():null)&&"false"==y.getAttribute("contentEditable");var _=S&&y.getAttribute("data-nostyle");if(S&&y.data("cke-bookmark")){y=y.getNextSourceNode(!0);continue}if(v&&c&&CKEDITOR.dtd.$block[S])for(var C=void 0,w=0,T=(A=(L=o(T=y)).length)&&new CKEDITOR.dom.range(T.getDocument());w<A;++w){C=L[w];var E=CKEDITOR.filter.instances[C.data("cke-filter")];E&&!E.check(this)||(T.selectNodeContents(C),i.call(this,T))}if(L=S?!u[S]||_||v&&!c?0:t(y,f,l,k):1){if(L=l,A=a,w=r,!(C=y.getParent())||!(C.getDtd()||CKEDITOR.dtd.span)[A]&&!w||L.parentRule&&!L.parentRule(C))b=!0;else if(d||S&&CKEDITOR.dtd.$removeEmpty[S]&&(y.getPosition(f)|k)!=k||(d=n.clone()).setStartBefore(y),(S=y.type)==CKEDITOR.NODE_TEXT||v||S==CKEDITOR.NODE_ELEMENT&&!y.getChildCount()){for(var I,S=y;(b=!S.getNext(x))&&u[(I=S.getParent()).getName()]&&t(I,m,l,D);)S=I;d.setEndAfter(S)}}else b=!0;y=y.getNextSourceNode(_||v)}if(b&&d&&!d.collapsed){v=(b=g(this,s)).hasAttributes(),_=d.getCommonAncestor(),S={};for(var O,R,P,L={},A=(C={},{});b&&_;){if(_.getName()==a){for(O in l.attributes)!A[O]&&(P=_.getAttribute(R))&&(b.getAttribute(O)==P?L[O]=1:A[O]=1);for(R in l.styles)!C[R]&&(P=_.getStyle(R))&&(b.getStyle(R)==P?S[R]=1:C[R]=1)}_=_.getParent()}for(O in L)b.removeAttribute(O);for(R in S)b.removeStyle(R);v&&!b.hasAttributes()&&(b=null),b?(d.extractContents().appendTo(b),d.insertNode(b),h.call(this,b),b.mergeSiblings(),CKEDITOR.env.ie||b.$.normalize()):(b=new CKEDITOR.dom.element("span"),d.extractContents().appendTo(b),d.insertNode(b),h.call(this,b),b.remove(!0)),d=null}}n.moveToBookmark(p),n.shrink(CKEDITOR.SHRINK_TEXT),n.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function n(e){function t(){for(var e=new CKEDITOR.dom.elementPath(n.getParent()),t=new CKEDITOR.dom.elementPath(u.getParent()),i=null,o=null,s=0;s<e.elements.length;s++){var r=e.elements[s];if(r==e.block||r==e.blockLimit)break;h.checkElementRemovable(r,!0)&&(i=r)}for(s=0;s<t.elements.length&&(r=t.elements[s])!=t.block&&r!=t.blockLimit;s++)h.checkElementRemovable(r,!0)&&(o=r);o&&u.breakParent(o),i&&n.breakParent(i)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var i=e.createBookmark(),n=i.startNode,o=this._.definition.alwaysRemoveElement;if(e.collapsed){for(var s,r,a=new CKEDITOR.dom.elementPath(n.getParent(),e.root),l=0;l<a.elements.length&&(r=a.elements[l])&&r!=a.block&&r!=a.blockLimit;l++)if(this.checkElementRemovable(r)){var c;!o&&e.collapsed&&(e.checkBoundaryOfElement(r,CKEDITOR.END)||(c=e.checkBoundaryOfElement(r,CKEDITOR.START)))?(s=r).match=c?"start":"end":(r.mergeSiblings(),r.is(this.element)?d.call(this,r):p(r,b(this)[r.getName()]))}if(s){for(o=n,l=0;!(r=a.elements[l]).equals(s);l++)r.match||((r=r.clone()).append(o),o=r);o["start"==s.match?"insertBefore":"insertAfter"](s)}}else{var u=i.endNode,h=this;for(t(),a=n;!a.equals(u);)s=a.getNextSourceNode(),a.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(a)&&(a.getName()==this.element?d.call(this,a):p(a,b(this)[a.getName()]),s.type==CKEDITOR.NODE_ELEMENT&&s.contains(n)&&(t(),s=n.getNext())),a=s}e.moveToBookmark(i),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function o(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}function s(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&f(e,this)}function r(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var i=(t=this._.definition).attributes;if(i)for(var n in i)e.removeAttribute(n,i[n]);if(t.styles)for(var o in t.styles)t.styles.hasOwnProperty(o)&&e.removeStyle(o)}}function a(e){var t=e.createBookmark(!0),i=e.createIterator();i.enforceRealBlocks=!0,this._.enterMode&&(i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var n,o=e.document;n=i.getNextParagraph();)!n.isReadOnly()&&(!i.activeFilter||i.activeFilter.check(this))&&c(n,g(this,o,n));e.moveToBookmark(t)}function l(e){var t,i,n=e.createBookmark(1),o=e.createIterator();for(o.enforceRealBlocks=!0,o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;t=o.getNextParagraph();)this.checkElementRemovable(t)&&(t.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&t.copyAttributes(i),c(t,i)):d.call(this,t));e.moveToBookmark(n)}function c(e,t){(i=!t)&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var i,n,o=t&&t.is("pre"),s=e.is("pre"),r=!o&&s;if(o&&!s){if(s=t,(r=e.getBogus())&&r.remove(),r=(r=(r=(r=u(r=e.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var a=e.getDocument().createElement("div");a.append(s),s.$.outerHTML="<pre>"+r+"</pre>",s.copyAttributes(a.getFirst()),s=a.getFirst().remove()}else s.setHtml(r);t=s}else r?t=function(e,t){var i;1<e.length&&(i=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var n=0;n<e.length;n++){var o=u(o=(o=e[n]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if(o=u(o,/\n$/,""),o=u(o,/^[ \t]+|[ \t]+$/g,(function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})),o=(o=o.replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,(function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})),i){var s=t.clone();s.setHtml(o),i.append(s)}else t.setHtml(o)}return i||t}(i?[e.getHtml()]:function(e){var t=[];return u(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(e,t,i){return t+"</pre>"+i+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(e,i){t.push(i)})),t}(e),t):e.moveChildren(t);t.replace(e),o?(n=(i=t).getPrevious(S))&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("pre")&&(o=u(n.getHtml(),/\n$/,"")+"\n\n"+u(i.getHtml(),/^\n/,""),CKEDITOR.env.ie?i.$.outerHTML="<pre>"+o+"</pre>":i.setHtml(o),n.remove()):i&&m(t)}function u(e,t,i){var n="",o="";return e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(e,t,i){return t&&(n=t),i&&(o=i),""})),n+e.replace(t,i)+o}function d(e,t){var i,n=(o=this._.definition).attributes,o=o.styles,s=b(this)[e.getName()],r=CKEDITOR.tools.isEmpty(n)&&CKEDITOR.tools.isEmpty(o);for(i in n)("class"!=i&&!this._.definition.fullMatch||e.getAttribute(i)==v(i,n[i]))&&(t&&"data-"==i.slice(0,5)||(r=e.hasAttribute(i),e.removeAttribute(i)));for(var a in o)this._.definition.fullMatch&&e.getStyle(a)!=v(a,o[a],!0)||(r=r||!!e.getStyle(a),e.removeStyle(a));p(e,s,w[e.getName()]),r&&(this._.definition.alwaysRemoveElement?m(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?m(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function h(e){for(var t,i=b(this),n=e.getElementsByTag(this.element),o=n.count();0<=--o;)(t=n.getItem(o)).isReadOnly()||d.call(this,t,!0);for(var s in i)if(s!=this.element)for(o=(n=e.getElementsByTag(s)).count()-1;0<=o;o--)(t=n.getItem(o)).isReadOnly()||p(t,i[s])}function p(e,t,i){if(t=t&&t.attributes)for(var n=0;n<t.length;n++){var o,s=t[n][0];if(o=e.getAttribute(s)){var r=t[n][1];(null===r||r.test&&r.test(o)||"string"==typeof r&&o==r)&&e.removeAttribute(s)}}i||m(e)}function m(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var i=e.getPrevious(S),n=e.getNext(S);!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||e.append("br",1),!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append("br"),e.remove(!0)}else i=e.getFirst(),n=e.getLast(),e.remove(!0),i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings(),n&&!i.equals(n)&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings())}function g(e,t,i){var n;return"*"==(n=e.element)&&(n="span"),n=new CKEDITOR.dom.element(n,t),i&&i.copyAttributes(n),n=f(n,e),t.getCustomData("doc_processing_style")&&n.hasAttribute("id")?n.removeAttribute("id"):t.setCustomData("doc_processing_style",1),n}function f(e,t){var i=(n=t._.definition).attributes,n=CKEDITOR.style.getStyleText(n);if(i)for(var o in i)e.setAttribute(o,i[o]);return n&&e.setAttribute("style",n),e.getDocument().removeCustomData("doc_processing_style"),e}function y(e,t){for(var i in e)e[i]=e[i].replace(I,(function(e,i){return t[i]}))}function b(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},i=e._.definition.overrides;if(i){CKEDITOR.tools.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var o,s;if("string"==typeof(a=i[n])?o=a.toLowerCase():(o=a.element?a.element.toLowerCase():e.element,s=a.attributes),a=t[o]||(t[o]={}),s){var r,a=a.attributes=a.attributes||[];for(r in s)a.push([r.toLowerCase(),s[r]])}}}return t}function v(e,t,i){var n=new CKEDITOR.dom.element("span");return n[i?"setStyle":"setAttribute"](e,t),n[i?"getStyle":"getAttribute"](e)}function _(e,t){function i(e,t){return"font-family"==t.toLowerCase()?e.replace(/["']/g,""):e}for(var n in"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e)),"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0)),e)if(!(n in t)||i(t[n],n)!=i(e[n],n)&&"inherit"!=e[n]&&"inherit"!=t[n])return!1;return!0}function C(e,t,i){var n,o,s=e.getRanges();if(t=t?this.removeFromRange:this.applyToRange,e.isFake&&e.isInTable())for(n=[],o=0;o<s.length;o++)n.push(s[o].clone());for(var r=s.createIterator();o=r.getNextRange();)t.call(this,o,i);e.selectRanges(n||s)}var w={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},T={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},E=/\s*(?:;\s*|$)/,I=/#\((.+?)\)/g,x=CKEDITOR.dom.walker.bookmark(0,1),S=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if("string"==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var i=e.attributes;i&&i.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style),t&&(y((e=CKEDITOR.tools.clone(e)).attributes,t),y(e.styles,t)),i=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(w[i]?CKEDITOR.STYLE_BLOCK:T[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return C.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),C.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return C.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),C.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?a:this.type==CKEDITOR.STYLE_OBJECT?s:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?r:null,this.removeFromRange(e)},applyToObject:function(e){f(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var i,n=e.elements,o=0;o<n.length;o++)if(i=n[o],this.type!=CKEDITOR.STYLE_INLINE||i!=e.block&&i!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var s=i.getName();if(!("string"==typeof this.element?s==this.element:s in this.element))continue}if(this.checkElementRemovable(i,!0,t))return!0}}return!1},checkApplicable:function(e,t,i){if(t&&t instanceof CKEDITOR.filter&&(i=t),i&&!i.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var i=this._.definition;if(!e||!i.ignoreReadonly&&e.isReadOnly())return!1;var n=e.getName();if("string"==typeof this.element?n==this.element:n in this.element){if(!t&&!e.hasAttributes())return!0;if(n=i._AC)i=n;else{n={};var o=0,s=i.attributes;if(s)for(var r in s)o++,n[r]=s[r];(r=CKEDITOR.style.getStyleText(i))&&(n.style||o++,n.style=r),n._length=o,i=i._AC=n}if(!i._length)return!0;for(var a in i)if("_length"!=a)if(n=e.getAttribute(a)||"","style"==a?_(i[a],n):i[a]==n){if(!t)return!0}else if(t)return!1;if(t)return!0}return!1},checkElementRemovable:function(e,t,i){if(this.checkElementMatch(e,t,i))return!0;if(t=b(this)[e.getName()]){var n;if(!(t=t.attributes))return!0;for(i=0;i<t.length;i++)if(n=t[i][0],n=e.getAttribute(n)){var o=t[i][1];if(null===o)return!0;if("string"==typeof o){if(n==o)return!0}else if(o.test(n))return!0}}return!1},buildPreview:function(e){var t=this._.definition,i=[],n=t.element;"bdo"==n&&(n="span"),i=["<",n];var o=t.attributes;if(o)for(var s in o)i.push(" ",s,'="',o[s],'"');return(o=CKEDITOR.style.getStyleText(t))&&i.push(' style="',o,'"'),i.push(">",e||t.name,"</",n,">"),i.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){if(t=e._ST)return t;var t=e.styles,i=e.attributes&&e.attributes.style||"",n="";for(var o in i.length&&(i=i.replace(E,";")),t){var s=t[o],r=(o+":"+s).replace(E,";");"inherit"==s?n+=r:i+=r}return i.length&&(i=CKEDITOR.tools.normalizeCssText(i,!0)),e._ST=i+n},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var k=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,D=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,i){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,i)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var i=this._.styleStateChangeCallbacks;i||(i=this._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(e){for(var t=0;t<i.length;t++){var n=i[t],o=n.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,o)}}))),i.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this;if(!1===(i=t.config.stylesCombo_stylesSet||t.config.stylesSet))e(null);else if(i instanceof Array)t._.stylesDefinitions=i,e(i);else{i||(i="default");var i,n=(i=i.split(":"))[0];CKEDITOR.stylesSet.addExternal(n,i[1]?i.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(n,(function(i){t._.stylesDefinitions=i[n],e(t._.stylesDefinitions)}))}}}}),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var e,t={},i={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(i[e]=1);CKEDITOR.dom.elementPath=function(e,n){var o,s=null,r=null,a=[],l=e;n=n||e.getDocument().getBody(),l||(l=n);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(a.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(n))break;if(!r&&(o=l.getName(),"true"==l.getAttribute("contenteditable")?r=l:!s&&i[o]&&(s=l),t[o])){if(o=!s&&"div"==o){e:{for(var c=0,u=(o=l.getChildren()).count();c<u;c++){var d=o.getItem(c);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){o=!0;break e}}o=!1}o=!o}o?s=l:r=l}}}while(l=l.getParent());r||(r=n),this.block=s,this.blockLimit=r,this.root=n,this.elements=a}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(!(e=e&&e.elements)||t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0},contains:function(e,t,i){var n,o=0;"string"==typeof e&&(n=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?n=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?n=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?n=e:"object"==typeof e&&(n=function(t){return t.getName()in e});var s=this.elements,r=s.length;for(t&&(i?o+=1:--r),i&&(s=Array.prototype.slice.call(s,0)).reverse();o<r;o++)if(n(s[o]))return s[o];return null},isContextFor:function(e){return!(e in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[e]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,i=t.childNodes.length,n=this.getLength(),o=this.getDocument(),s=new CKEDITOR.dom.text(this.$.splitText(e),o);return t.childNodes.length==i&&(e>=n?(s=o.createText("")).insertAfter(this):((e=o.createText("")).insertAfter(s),e.remove())),s},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,i){var n=e.serializable,o=t[i?"endContainer":"startContainer"],s=i?"endOffset":"startOffset",r=n?t.document.getById(e.startNode):e.startNode;return e=n?t.document.getById(e.endNode):e.endNode,o.equals(r.getPrevious())?(t.startOffset=t.startOffset-o.getLength()-e.getPrevious().getLength(),o=e.getNext()):o.equals(e.getPrevious())&&(t.startOffset-=o.getLength(),o=e.getNext()),o.equals(r.getParent())&&t[s]++,o.equals(e.getParent())&&t[s]++,t[i?"endContainer":"startContainer"]=o,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,i=CKEDITOR.dom.walker.bookmark(),n=[];return{getNextRange:function(o){var s=t[e=void 0===e?0:e+1];if(s&&1<t.length){if(!e)for(var r=t.length-1;0<=r;r--)n.unshift(t[r].createBookmark(!0));if(o)for(var a=0;t[e+a+1];){var l=s.document;for(o=0,r=l.getById(n[a].endNode),l=l.getById(n[a+1].startNode);;){if(r=r.getNextSourceNode(!1),l.equals(r))o=1;else if(i(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary())continue;break}if(!o)break;a++}for(s.moveToBookmark(n.shift());a--;)(r=t[++e]).moveToBookmark(n.shift()),s.setEnd(r.endContainer,r.endOffset)}return s}}},createBookmarks:function(t){for(var i,n=[],o=0;o<this.length;o++){n.push(i=this[o].createBookmark(t,!0));for(var s=o+1;s<this.length;s++)this[s]=e(i,this[s]),this[s]=e(i,this[s],!0)}return n},createBookmarks2:function(e){for(var t=[],i=0;i<this.length;i++)t.push(this[i].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var i=CKEDITOR.skin["ua_"+t],n=CKEDITOR.env;if(i){i=i.split(",").sort((function(e,t){return e>t?-1:1}));for(var o,s=0;s<i.length;s++)if(o=i[s],n.ie&&(o.replace(/^ie/,"")==n.version||n.quirks&&"iequirks"==o)&&(o="ie"),n[o]){t+="_"+i[s];break}}return CKEDITOR.getUrl(e()+t+".css")}function i(e,i){s[e]||(CKEDITOR.document.appendStyleSheet(t(e)),s[e]=1),i&&i()}function n(e){var t=e.getById(r);return t||((t=e.getHead().append("style")).setAttribute("id",r),t.setAttribute("type","text/css")),t}function o(e,t,i){var n,o,s;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split("{");for(var r=0;r<e.length;r++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){for(s=t[o][1],n=0;n<i.length;n++)s=s.replace(i[n][0],i[n][1]);e[r].$.sheet.addRule(t[o][0],s)}else{for(s=t,n=0;n<i.length;n++)s=s.replace(i[n][0],i[n][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[r].$.styleSheet.cssText+=s:e[r].$.innerHTML+=s}}var s={};CKEDITOR.skin={path:e,loadPart:function(t,n){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),(function(){i(t,n)})):i(t,n)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,i,n){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:i||0,bgsize:n||"16px"})},getIconStyle:function(e,t,i,n,o){var s;return e&&(e=e.toLowerCase(),t&&(s=this.icons[e+"-rtl"]),s||(s=this.icons[e])),e=i||s&&s.path||"",n=n||s&&s.offset,o=o||s&&s.bgsize||"16px",e&&(e=e.replace(/'/g,"\\'")),e&&"background-image:url('"+CKEDITOR.getUrl(e)+"');background-position:0 "+n+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=n(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var i=CKEDITOR.skin.chameleon,n="",s="";"function"==typeof i&&(n=i(this,"editor"),s=i(this,"panel")),o([t],n,e=[[l,e]]),o(a,s,e)}).call(this,e)}});var r="cke_ui_color",a=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",(function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor;e=function(e){if(!(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){e=n(e),a.push(e);var i=t.getUiColor();i&&o([e],CKEDITOR.skin.chameleon(t,"panel"),[[l,i]])}},t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),i=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=i)}catch(e){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var e=function(e,t){for(var i=e.match(/[^#]./g),n=0;3>n;n++){var o,s=n;o=parseInt(i[n],16),o=("0"+(0>t?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),i[s]=o}return"#"+i.join("")},t={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(i,n){var o=e(i.uiColor,.4);return o={id:"."+i.id,defaultBorder:e(o,-.2),toolbarElementsBorder:e(o,-.25),defaultBackground:o,lightBackground:e(o,.8),darkBackground:e(o,-.15),ckeButtonOn:e(o,.4),ckeResizer:e(o,-.4),ckeColorauto:e(o,.8),dialogBody:e(o,.7),dialogTab:e(o,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:e(o,-.6),menubuttonHover:e(o,.1),menubuttonIcon:e(o,.5),menubuttonIconHover:e(o,.3)},t[n].output(o).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._.default=this._.initValue=e.default||"",this._.required=e.required||!1;for(var t=[this._],i=1;i<arguments.length;i++)t.push(arguments[i]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,i){return new CKEDITOR.ui.dialog.textInput(e,t,i)}},i={build:function(e,t,i){return new CKEDITOR.ui.dialog[t.type](e,t,i)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",(function(){this.getInputElement().on("change",(function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),s=/^on([A-Z]\w+)/,r=function(e){for(var t in e)(s.test(t)||"title"==t||"type"==t)&&delete e[t];return e},a=function(e){(e=e.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,i,n,o){if(!(4>arguments.length)){var s=e.call(this,i);s.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var r={role:i.role||"presentation"};i.includeLabel&&(r["aria-labelledby"]=s.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"div",null,r,(function(){var e=[],n=i.required?" cke_required":"";return"horizontal"!=i.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+n+'" ',' id="'+s.labelId+'"',s.inputId?' for="'+s.inputId+'"':"",(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",i.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',i.controlStyle?' style="'+i.controlStyle+'"':"",' role="presentation">',o.call(this,t,i),"</div>"):(n={type:"hbox",widths:i.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+n+'" id="'+s.labelId+'" for="'+s.inputId+'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(i.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(i.controlStyle?' style="'+i.controlStyle+'"':"")+">"+o.call(this,t,i)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,n,e)),e.join("")}))}},textInput:function(t,i,n){if(!(3>arguments.length)){e.call(this,i);var o=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",s={class:"cke_dialog_ui_input_"+i.type,id:o,type:i.type};i.validate&&(this.validate=i.validate),i.maxLength&&(s.maxlength=i.maxLength),i.size&&(s.size=i.size),i.inputStyle&&(s.style=i.inputStyle);var r=this,l=!1;t.on("load",(function(){r.getInputElement().on("keydown",(function(e){13==e.data.getKeystroke()&&(l=!0)})),r.getInputElement().on("keyup",(function(e){13==e.data.getKeystroke()&&l&&(t.getButton("ok")&&setTimeout((function(){t.getButton("ok").click()}),0),l=!1),r.bidi&&a.call(r,e)}),null,null,1e3)})),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,(function(){var e=['<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'];for(var t in i.width&&e.push('style="width:'+i.width+'" '),e.push("><input "),s["aria-labelledby"]=this._.labelId,this._.required&&(s["aria-required"]=this._.required),s)e.push(t+'="'+s[t]+'" ');return e.push(" /></div>"),e.join("")}))}},textarea:function(t,i,n){if(!(3>arguments.length)){e.call(this,i);var o=this,s=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};i.validate&&(this.validate=i.validate),r.rows=i.rows||5,r.cols=i.cols||20,r.class="cke_dialog_ui_input_textarea "+(i.class||""),void 0!==i.inputStyle&&(r.style=i.inputStyle),i.dir&&(r.dir=i.dir),o.bidi&&t.on("load",(function(){o.getInputElement().on("keyup",a)}),o),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,(function(){r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',s,'" '];for(e in r)t.push(e+'="'+CKEDITOR.tools.htmlEncode(r[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(o._.default),"</textarea></div>"),t.join("")}))}},checkbox:function(t,i,n){if(!(3>arguments.length)){var o=e.call(this,i,{default:!!i.default});i.validate&&(this.validate=i.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"span",null,null,(function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),n=[],s=CKEDITOR.tools.getNextId()+"_label",a={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":s};return r(e),i.default&&(a.checked="checked"),void 0!==e.inputStyle&&(e.style=e.inputStyle),o.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,n,"input",null,a),n.push(' <label id="',s,'" for="',a.id,'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(i.label),"</label>"),n.join("")}))}},radio:function(t,i,n){if(!(3>arguments.length)){e.call(this,i),this._.default||(this._.default=this._.initValue=i.items[0][1]),i.validate&&(this.validate=i.validate);var o=[],s=this;i.role="radiogroup",i.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,(function(){for(var e=[],n=[],a=(i.id?i.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<i.items.length;l++){var c=i.items[l],u=void 0!==c[2]?c[2]:c[0],d=void 0!==c[1]?c[1]:c[0],h=(p=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",p=CKEDITOR.tools.extend({},i,{id:p,title:null,type:null},!0),m=(u=CKEDITOR.tools.extend({},p,{title:u},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:a,value:d,"aria-labelledby":h}),g=[];s._.default==d&&(m.checked="checked"),r(p),r(u),void 0!==p.inputStyle&&(p.style=p.inputStyle),p.keyboardFocusable=!0,o.push(new CKEDITOR.ui.dialog.uiElement(t,p,g,"input",null,m)),g.push(" "),new CKEDITOR.ui.dialog.uiElement(t,u,g,"label",null,{id:h,for:m.id},c[0]),e.push(g.join(""))}return new CKEDITOR.ui.dialog.hbox(t,o,e,n),n.join("")})),this._.children=o}},button:function(t,i,n){if(arguments.length){"function"==typeof i&&(i=i(t.getParentEditor())),e.call(this,i,{disabled:i.disabled||!1}),CKEDITOR.event.implementOn(this);var o=this;t.on("load",(function(){var e=this.getElement();e.on("click",(function(e){o.click(),e.data.preventDefault()})),e.on("keydown",(function(e){e.data.getKeystroke()in{32:1}&&(o.click(),e.data.preventDefault())})),e.unselectable()}),this);var s=CKEDITOR.tools.extend({},i);delete s.style;var r=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,s,n,"a",null,{style:i.style,href:"javascript:void(0)",title:i.label,hidefocus:"true",class:i.class,role:"button","aria-labelledby":r},'<span id="'+r+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(i.label)+"</span>")}},select:function(t,i,n){if(!(3>arguments.length)){var o=e.call(this,i);i.validate&&(this.validate=i.validate),o.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,(function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),n=[],s=[],a={id:o.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};n.push('<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'),i.width&&n.push('style="width:'+i.width+'" '),n.push(">"),void 0!==i.size&&(a.size=i.size),void 0!==i.multiple&&(a.multiple=i.multiple),r(e);for(var l,c=0;c<i.items.length&&(l=i.items[c]);c++)s.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==e.inputStyle&&(e.style=e.inputStyle),o.select=new CKEDITOR.ui.dialog.uiElement(t,e,n,"select",null,a,s.join("")),n.push("</div>"),n.join("")}))}},file:function(t,i,n){if(!(3>arguments.length)){void 0===i.default&&(i.default="");var o=CKEDITOR.tools.extend(e.call(this,i),{definition:i,buttons:[]});i.validate&&(this.validate=i.validate),t.on("load",(function(){CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file")})),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,(function(){o.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',o.frameId,'" title="',i.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")}))}},fileButton:function(t,i,n){var o=this;if(!(3>arguments.length)){e.call(this,i),i.validate&&(this.validate=i.validate);var s=CKEDITOR.tools.extend({},i),r=s.onClick;s.className=(s.className?s.className+" ":"")+"cke_dialog_ui_button",s.onClick=function(e){var n=i.for;!1!==(e=!!r&&r.call(this,e))&&("xhr"!==e&&t.getContentElement(n[0],n[1]).submit(),this.disable())},t.on("load",(function(){t.getContentElement(i.for[0],i.for[1])._.buttons.push(o)})),CKEDITOR.ui.dialog.button.call(this,t,s,n)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,i=/\/$/;return function(n,o,s){if(!(3>arguments.length)){var r=[],a=o.html;"<"!=a.charAt(0)&&(a="<span>"+a+"</span>");var l=o.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},o.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,n,o,r,"span",null,null,""),r=r.join("").match(e),a=a.match(t)||["","",""],i.test(a[1])&&(a[1]=a[1].slice(0,-1),a[2]="/"+a[2]),s.push([a[1]," ",r[1]||"",a[2]].join(""))}}}(),fieldset:function(e,t,i,n,o){var s=o.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,o,n,"fieldset",null,null,(function(){var e=[];s&&e.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+s+"</legend>");for(var t=0;t<i.length;t++)e.push(i[t]);return e.join("")}))}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",(function(){t.apply(this,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&t.$.focus()}),0)},select:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t="‪"==t?"ltr":"‫"==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"‪":"‫")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,i){var n=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return n.$.text=e,n.$.value=null==t?e:t,null==i?CKEDITOR.env.ie?o.add(n.$):o.add(n.$,null):o.add(n.$,i),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){var e=this._.checkbox.getElement();e.on("propertychange",(function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:e.$.checked})}),this)}),this),this.on("change",t),null)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var i,n=this._.children,o=0;o<n.length&&(i=n[o]);o++)i.getElement().$.checked=i.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){for(var e=this._.children,t=this,i=0;i<e.length;i++)e[i].getElement().on("propertychange",(function(e){"checked"==(e=e.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})}))}),this),this.on("change",t),null)}}},n,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,o=function(e,t,i,n){e.on("formLoaded",(function(){e.getInputElement().on(i,n,e)}))};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):o(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},reset:function(){function e(){i.$.open();var e="";n.size&&(e=n.size-(CKEDITOR.env.ie?7:0));var c=t.frameId+"_input";for(i.$.write(['<html dir="'+a+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+a+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(n.action),'"><label id="',t.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(n.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(n.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+s+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+r+")}","<\/script>"].join("")),i.$.close(),e=0;e<o.length;e++)o[e].enable()}var t=this._,i=CKEDITOR.document.getById(t.frameId).getFrameDocument(),n=t.definition,o=t.buttons,s=this.formLoadedNumber,r=this.formUnloadNumber,a=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;s||(s=this.formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this),r=this.formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(s),CKEDITOR.tools.removeFunction(r)}))),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",i),CKEDITOR.dialog.addUIElement("checkbox",i),CKEDITOR.dialog.addUIElement("radio",i),CKEDITOR.dialog.addUIElement("button",i),CKEDITOR.dialog.addUIElement("select",i),CKEDITOR.dialog.addUIElement("file",i),CKEDITOR.dialog.addUIElement("fileButton",i),CKEDITOR.dialog.addUIElement("html",i),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,i){for(var n,o=t.children,s=[],r=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];s.push(l),r.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,r,s,i,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,i=t-1;i>t-e;i--)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),i=t+1;i<t+e;i++)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];return null}function i(e,t){for(var i=e.$.getElementsByTagName("input"),n=0,o=i.length;n<o;n++){var s=new CKEDITOR.dom.element(i[n]);"text"==s.getAttribute("type").toLowerCase()&&(t?(s.setAttribute("value",s.getCustomData("fake_value")||""),s.removeCustomData("fake_value")):(s.setCustomData("fake_value",s.getAttribute("value")),s.setAttribute("value","")))}}function n(e,t){var i=this.getInputElement();i&&(e?i.removeAttribute("aria-invalid"):i.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function o(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function s(e,t,i){this.element=t,this.focusIndex=i,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",(function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")})),t.on("focus",(function(){this.fire("mouseover")})),t.on("blur",(function(){this.fire("mouseout")}))}function r(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function a(e){e.data.preventDefault(1)}function l(e){var t=CKEDITOR.document.getWindow(),i=e.config,n=CKEDITOR.skinName||e.config.skin,o=i.dialog_backgroundCoverColor||("moono-lisa"==n?"black":"white"),s=(n=i.dialog_backgroundCoverOpacity,i.baseFloatZIndex),r=(i=CKEDITOR.tools.genKey(o,n,s),v[i]);r?r.show():(s=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",s,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+o,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(o="<html><body style=\\'background-color:"+o+";\\'></body></html>",s.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),s.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+o+"' );document.close();")+"})())"),s.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),s.push("</div>"),(r=CKEDITOR.dom.element.createFromHtml(s.join(""))).setOpacity(void 0!==n?n:.5),r.on("keydown",a),r.on("keypress",a),r.on("keyup",a),r.appendTo(CKEDITOR.document.getBody()),v[i]=r),e.focusManager.add(r),b=r;var l=function(){var e=t.getScrollPosition(),i=CKEDITOR.dialog._.currentTop;if(r.setStyles({left:e.x+"px",top:e.y+"px"}),i)do{e=i.getPosition(),i.move(e.x,e.y)}while(i=i._.parentDialog)};if(y=e=function(){var e=t.getViewPaneSize();r.setStyles({width:e.width+"px",height:e.height+"px"})},t.on("resize",e),e(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||r.focus(),CKEDITOR.env.ie6Compat){var c=function(){l(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout((function(){c.prevScrollHandler=window.onscroll||function(){},window.onscroll=c}),0),l()}}function c(e){b&&(e.focusManager.remove(b),e=CKEDITOR.document.getWindow(),b.hide(),e.removeListener("resize",y),CKEDITOR.env.ie6Compat&&e.$.setTimeout((function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null}),0),y=null)}var u=CKEDITOR.tools.cssLength,d='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(i,s){function r(e){var t=C._.focusList;if(e=e||0,!(1>t.length)){var i=C._.currentFocusIndex;C._.tabBarMode&&0>e&&(i=0);try{t[i].getInputElement().$.blur()}catch(e){}var n=i,o=1<C._.pageCount;do{if(n+=e,o&&!C._.tabBarMode&&(n==t.length||-1==n))return C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus(),void(C._.currentFocusIndex=-1);if((n=(n+t.length)%t.length)==i)break}while(e&&!t[n].isFocusable());t[n].focus(),"text"==t[n].type&&t[n].select()}}function a(n){if(C==CKEDITOR.dialog._.currentTop){var o=n.data.getKeystroke(),s="rtl"==i.lang.dir;if(c=u=0,9==o||o==CKEDITOR.SHIFT+9)r(o==CKEDITOR.SHIFT+9?-1:1),c=1;else if(o==CKEDITOR.ALT+121&&!C._.tabBarMode&&1<C.getPageCount())C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus(),C._.currentFocusIndex=-1,c=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],o)&&C._.tabBarMode)o=-1!=CKEDITOR.tools.indexOf([s?39:37,38],o)?e.call(C):t.call(C),C.selectPage(o),C._.tabs[o][0].focus(),c=1;else if(13!=o&&32!=o||!C._.tabBarMode)if(13==o)(o=n.data.getTarget()).is("a","button","select","textarea")||o.is("input")&&"button"==o.$.type||((o=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(o.click,0,o),c=1),u=1;else{if(27!=o)return;(o=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(o.click,0,o):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),u=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1),c=1;l(n)}}function l(e){c?e.data.preventDefault(1):u&&e.data.stopPropagation()}var c,u,p=CKEDITOR.dialog._.dialogDefinitions[s],m=CKEDITOR.tools.clone(h),g=i.config.dialog_buttonsOrder||"OS",y=i.lang.dir,v={};if(("OS"==g&&CKEDITOR.env.mac||"rtl"==g&&"ltr"==y||"ltr"==g&&"rtl"==y)&&m.buttons.reverse(),p=CKEDITOR.tools.extend(p(i),m),p=CKEDITOR.tools.clone(p),p=new f(this,p),m=function(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",d).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),i=t.getChild([0,0,0,0,0]),n=i.getChild(0),o=i.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(i),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(i.getParent())),n.unselectable(),o.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:n,close:o,tabs:i.getChild(2),contents:i.getChild([3,0,0,0]),footer:i.getChild([3,0,1,0])}}}(i),this._={editor:i,element:m.element,name:s,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=m.parts,CKEDITOR.tools.setTimeout((function(){i.fire("ariaWidget",this.parts.contents)}),0,this),(m={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==y?"right":"left"]=0,this.parts.dialog.setStyles(m),CKEDITOR.event.call(this),this.definition=p=CKEDITOR.fire("dialogDefinition",{name:s,definition:p},i).definition,!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){for(m=i.config.removeDialogTabs.split(";"),y=0;y<m.length;y++)if(2==(g=m[y].split(":")).length){var _=g[0];v[_]||(v[_]=[]),v[_].push(g[1])}i._.removeDialogTabs=v}if(i._.removeDialogTabs&&(v=i._.removeDialogTabs[s]))for(y=0;y<v.length;y++)p.removeContents(v[y]);p.onLoad&&this.on("load",p.onLoad),p.onShow&&this.on("show",p.onShow),p.onHide&&this.on("hide",p.onHide),p.onOk&&this.on("ok",(function(e){i.fire("saveSnapshot"),setTimeout((function(){i.fire("saveSnapshot")}),0),!1===p.onOk.call(this,e)&&(e.data.hide=!1)})),this.state=CKEDITOR.DIALOG_STATE_IDLE,p.onCancel&&this.on("cancel",(function(e){!1===p.onCancel.call(this,e)&&(e.data.hide=!1)}));var C=this,w=function(e){var t,i=C._.contents;for(t in i)for(var n in i[t])if(e.call(this,i[t][n]))return};this.on("ok",(function(e){w((function(t){if(t.validate){var i=t.validate(this),o="string"==typeof i||!1===i;return o&&(e.data.hide=!1,e.stop()),n.call(t,!o,"string"==typeof i?i:void 0),o}}))}),this,null,0),this.on("cancel",(function(e){w((function(t){if(t.isChanged())return i.config.dialog_noConfirmCancel||confirm(i.lang.common.confirmCancel)||(e.data.hide=!1),!0}))}),this,null,0),this.parts.close.on("click",(function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()}),this),this.changeFocus=r;var T=this._.element;for(i.focusManager.add(T,1),this.on("show",(function(){T.on("keydown",a,this),CKEDITOR.env.gecko&&T.on("keypress",l,this)})),this.on("hide",(function(){T.removeListener("keydown",a),CKEDITOR.env.gecko&&T.removeListener("keypress",l),w((function(e){o.apply(e)}))})),this.on("iframeAdded",(function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",a,this,null,0)})),this.on("show",(function(){!function(){var e=C._.focusList;e.sort((function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex}));for(var t=e.length,i=0;i<t;i++)e[i].focusIndex=i}();var e=1<C._.pageCount;i.config.dialog_startupFocusTab&&e?(C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus(),C._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,p.onFocus?(e=p.onFocus.call(this))&&e.focus():r(1))}),this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",(function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)}),this),function(e){function t(t){var i=e.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),c=t.data.$.screenX,u=t.data.$.screenY,d=c-n.x,h=u-n.y;n={x:c,y:u},o.x+=d,o.y+=h,e.move(o.x+a[3]<r?-a[3]:o.x-a[1]>l.width-i.width-r?l.width-i.width+("rtl"==s.lang.dir?0:a[1]):o.x,o.y+a[0]<r?-a[0]:o.y-a[2]>l.height-i.height-r?l.height-i.height+a[2]:o.y,1),t.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",i)}}var n=null,o=null,s=e.getParentEditor(),r=s.config.dialog_magnetDistance,a=CKEDITOR.skin.margins||[0,0,0,0];void 0===r&&(r=20),e.parts.title.on("mousedown",(function(s){if(n={x:s.data.$.screenX,y:s.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),o=e.getPosition(),CKEDITOR.env.ie6Compat){var r=b.getChild(0).getFrameDocument();r.on("mousemove",t),r.on("mouseup",i)}s.data.preventDefault()}),e)}(this),function(e){function t(t){var i="rtl"==d.lang.dir,u=c.width,h=c.height,p=u+(t.data.$.screenX-l.x)*(i?-1:1)*(e._.moved?1:2),m=h+(t.data.$.screenY-l.y)*(e._.moved?1:2),g=e._.element.getFirst(),f=(g=i&&g.getComputedStyle("right"),e.getPosition());f.y+m>a.height&&(m=a.height-f.y),(i?g:f.x)+p>a.width&&(p=a.width-(i?g:f.x)),o!=CKEDITOR.DIALOG_RESIZE_WIDTH&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(u=Math.max(n.minWidth||0,p-s)),o!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(h=Math.max(n.minHeight||0,m-r)),e.resize(u,h),e._.moved||e.layout(),t.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",t),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mouseup",i),e.removeListener("mousemove",t)}}var n=e.definition,o=n.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var s,r,a,l,c,u,d=e.getParentEditor(),h=CKEDITOR.tools.addFunction((function(n){c=e.getSize();var o=e.parts.contents;o.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),o.append(u)),r=c.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),s=c.width-e.parts.contents.getSize("width",1),l={x:n.screenX,y:n.screenY},a=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&((o=b.getChild(0).getFrameDocument()).on("mousemove",t),o.on("mouseup",i)),n.preventDefault&&n.preventDefault()}));e.on("load",(function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+d.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(d.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+h+', event )">'+("ltr"==d.lang.dir?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)})),d.on("destroy",(function(){CKEDITOR.tools.removeFunction(h)}))}}(this),new CKEDITOR.dom.text(p.title,CKEDITOR.document).appendTo(this.parts.title),y=0;y<p.contents.length;y++)(v=p.contents[y])&&this.addPage(v);for(this.parts.tabs.on("click",(function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1)),e.data.preventDefault())}),this),y=[],v=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:p.buttons},y).getChild(),this.parts.footer.setHtml(y.join("")),y=0;y<v.length;y++)this._.buttons[v[y].id]=v[y]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})},getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,i){var n=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir,s="fixed"==n.getComputedStyle("position");CKEDITOR.env.ie&&n.setStyle("zoom","100%"),s&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},s||(e+=(s=CKEDITOR.document.getWindow().getScrollPosition()).x,t+=s.y),o&&(s=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-s.width-e),(t={top:(0<t?t:0)+"px"})[o?"right":"left"]=(0<e?e:0)+"px",n.setStyles(t),i&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;for(var i in e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,l(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",C),e.on("keyup",w),this._.hasFocus=!1,t.contents)if(t.contents[i]){e=t.contents[i];var n=this._.tabs[e.id],o=e.requiredContent,s=0;if(n){for(var r in this._.contents[e.id]){var a=this._.contents[e.id][r];"hbox"!=a.type&&"vbox"!=a.type&&a.getInputElement()&&(a.requiredContent&&!this._.editor.activeFilter.check(a.requiredContent)?a.disable():(a.enable(),s++))}!s||o&&!this._.editor.activeFilter.check(o)?n[0].addClass("cke_dialog_tab_disabled"):n[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout(),function(e){function t(){e.layout()}var i=CKEDITOR.document.getWindow();i.on("resize",t),e.on("hide",(function(){i.removeListener("resize",t)}))}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach((function(e){e.setInitValue&&e.setInitValue()}))}),100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),n=(i.width-t.width)/2,o=(i.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<o?o:0)>i.height||t.width+(0<n?n:0)>i.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:n,this._.moved?this._.position.y:o)},foreach:function(e){for(var t in this._.contents)for(var i in this._.contents[t])e.call(this,this._.contents[t][i]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach((function(t){t.setup&&t.setup.apply(t,e)}))},commitContent:function(){var e=arguments;this.foreach((function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)}))},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),E(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else c(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",C),e.removeListener("keyup",w);var i=this._.editor;i.focus(),setTimeout((function(){i.focusManager.unlock(),CKEDITOR.env.iOS&&i.window.focus()}),0)}delete this._.parentDialog,this.foreach((function(e){e.resetInitValue&&e.resetInitValue()})),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],i=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",n=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),o=this._.contents[e.id]={},s=n.getChild(),r=0;n=s.shift();)n.notAllowed||"hbox"==n.type||"vbox"==n.type||r++,o[n.id]=n,"function"==typeof n.getChild&&s.push.apply(s,n.getChild());r||(e.hidden=!0),(t=CKEDITOR.dom.element.createFromHtml(t.join(""))).setAttribute("role","tabpanel"),n=CKEDITOR.env,o="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),i=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",i,e.hidden?' style="display:none"':"",' id="',o,'"',n.gecko&&!n.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",o),this._.tabs[e.id]=[i,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=i,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),i.unselectable(),this.parts.tabs.append(i),e.accessKey&&(T(this,this,"CTRL+"+e.accessKey,x,I),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var n=this._.tabs[t][0],o=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),o.hide()),o.setAttribute("aria-hidden",t!=e)}var s=this._.tabs[e];s[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(i(s[1]),s[1].show(),setTimeout((function(){i(s[1],1)}),0)):s[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var i=this._.tabs[t]&&this._.tabs[t][0];i&&1!=this._.pageCount&&i.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),i.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var i=this._.contents[e];return i&&i[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,i){return this.getContentElement(e,t).setValue(i)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(void 0===t)t=this._.focusList.length,this._.focusList.push(new s(this,e,t));else{this._.focusList.splice(t,0,new s(this,e,t));for(var i=t+1;i<this._.focusList.length;i++)this._.focusList[i].focusIndex++}},setState:function(e){if(this.state!=e){if(this.state=e,e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,i={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==t?"right":"left"}};i.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",i),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,i){return!((e=e.config.removeDialogTabs)&&e.match(new RegExp("(?:^|;)"+t+":"+i+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){!1!==(e=e.data.dialog).fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(i){return e(i,t)}),{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){!1!==(e=e.data.dialog).fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(i){return e(i,t)}),{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var h={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},p=function(e,t,i){for(var n,o=0;n=e[o];o++)if(n.id==t||i&&n[i]&&(n=p(n[i],t,i)))return n;return null},m=function(e,t,i,n,o){if(i){for(var s,r=0;s=e[r];r++){if(s.id==i)return e.splice(r,0,t),t;if(n&&s[n]&&(s=m(s[n],t,i,n,!0)))return s}if(o)return null}return e.push(t),t},g=function(e,t,i){for(var n,o=0;n=e[o];o++){if(n.id==t)return e.splice(o,1);if(i&&n[i]&&(n=g(n[i],t,i)))return n}return null},f=function(e,t){this.dialog=e;for(var i,n=t.contents,o=0;i=n[o];o++)n[o]=i&&new r(e,i);CKEDITOR.tools.extend(this,t)};f.prototype={getContents:function(e){return p(this.contents,e)},getButton:function(e){return p(this.buttons,e)},addContents:function(e,t){return m(this.contents,e,t)},addButton:function(e,t){return m(this.buttons,e,t)},removeContents:function(e){g(this.contents,e)},removeButton:function(e){g(this.buttons,e)}},r.prototype={get:function(e){return p(this.elements,e,"children")},add:function(e,t){return m(this.elements,e,t,"children")},remove:function(e){g(this.elements,e,"children")}};var y,b,v={},_={},C=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=_[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&t.length&&((t=t[t.length-1]).keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},w=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=_[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&t.length&&(t=t[t.length-1]).keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},T=function(e,t,i,n,o){(_[i]||(_[i]=[])).push({uiElement:e,dialog:t,key:i,keyup:o||e.accessKeyUp,keydown:n||e.accessKeyDown})},E=function(e){for(var t in _){for(var i=_[t],n=i.length-1;0<=n;n--)i[n].dialog!=e&&i[n].uiElement!=e||i.splice(n,1);0===i.length&&delete _[t]}},I=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},x=function(){};CKEDITOR.ui.dialog={uiElement:function(e,t,i,n,o,s,r){if(!(4>arguments.length)){var a=(n.call?n(t):n)||"div",l=["<",a," "],c=(o&&o.call?o(t):o)||{},u=(s&&s.call?s(t):s)||{},d=(r&&r.call?r.call(this,e,t):r)||"",h=this.domId=u.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(c.display="none",this.notAllowed=!0),u.id=h;var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);var m=u.class&&u.class.split?u.class.split(" "):[];for(h=0;h<m.length;h++)m[h]&&(p[m[h]]=1);for(h in m=[],p)m.push(h);for(h in u.class=m.join(" "),t.title&&(u.title=t.title),p=(t.style||"").split(";"),t.align&&(m=t.align,c["margin-left"]="left"==m?0:"auto",c["margin-right"]="right"==m?0:"auto"),c)p.push(h+":"+c[h]);for(t.hidden&&p.push("display:none"),h=p.length-1;0<=h;h--)""===p[h]&&p.splice(h,1);for(h in 0<p.length&&(u.style=(u.style?u.style+"; ":"")+p.join("; ")),u)l.push(h+'="'+CKEDITOR.tools.htmlEncode(u[h])+'" ');l.push(">",d,"</",a,">"),i.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,(function(e){return function(i){e.call(this,t.setValue.call(this,i))}}))),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,(function(e){return function(){return t.getValue.call(this,e.call(this))}}))),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&T(this,e,"CTRL+"+t.accessKey);var g=this;e.on("load",(function(){var t=g.getInputElement();if(t){var i=g.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",(function(){e._.tabBarMode=!1,e._.hasFocus=!0,g.fire("focus"),i&&this.addClass(i)})),t.on("blur",(function(){g.fire("blur"),i&&this.removeClass(i)}))}})),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",(function(){e._.currentFocusIndex=g.focusIndex})))}},hbox:function(e,t,i,n,o){if(!(4>arguments.length)){this._||(this._={});var s,r=this._.children=t,a=o&&o.widths||null,l=o&&o.height||null,c={role:"presentation"};o&&o.align&&(c.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"hbox"},n,"table",{},c,(function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(s=0;s<i.length;s++){var t="cke_dialog_ui_hbox_child",n=[];0===s&&(t="cke_dialog_ui_hbox_first"),s==i.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),a?a[s]&&n.push("width:"+u(a[s])):n.push("width:"+Math.floor(100/i.length)+"%"),l&&n.push("height:"+u(l)),o&&void 0!==o.padding&&n.push("padding:"+u(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[s].align&&n.push("text-align:"+r[s].align),0<n.length&&e.push('style="'+n.join("; ")+'" '),e.push(">",i[s],"</td>")}return e.push("</tr></tbody>"),e.join("")}))}},vbox:function(e,t,i,n,o){if(!(3>arguments.length)){this._||(this._={});var s=this._.children=t,r=o&&o.width||null,a=o&&o.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"vbox"},n,"div",null,{role:"presentation"},(function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),o&&o.expand&&t.push("height:100%;"),t.push("width:"+u(r||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(o&&o.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var n=0;n<i.length;n++){var l=[];t.push('<tr><td role="presentation" '),r&&l.push("width:"+u(r||"100%")),a?l.push("height:"+u(a[n])):o&&o.expand&&l.push("height:"+Math.floor(100/i.length)+"%"),o&&void 0!==o.padding&&l.push("padding:"+u(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[n].align&&l.push("text-align:"+s[n].align),0<l.length&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',i[n],"</td></tr>")}return t.push("</tbody></table>"),t.join("")}))}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,o=function(e,t,i,n){t.on("load",(function(){e.getInputElement().on(i,n,e)}))};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):o(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,i){for(var n,o=t.children,s=[],r=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];s.push(l),r.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,r,s,i,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){var t=this.tabId;e.openDialog(this.dialogName,(function(e){t&&e.selectPage(t)}))},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,i=/^\d*(?:\.\d+)?$/,n=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,s=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,i,n=this&&this.getValue?this.getValue():e[0],o=CKEDITOR.VALIDATE_AND,s=[];for(i=0;i<e.length&&"function"==typeof e[i];i++)s.push(e[i]);i<e.length&&"string"==typeof e[i]&&(t=e[i],i++),i<e.length&&"number"==typeof e[i]&&(o=e[i]);var r=o==CKEDITOR.VALIDATE_AND;for(i=0;i<s.length;i++)r=o==CKEDITOR.VALIDATE_AND?r&&s[i](n):r||s[i](n);return!!r||t}},regex:function(e,t){return function(i){return i=this&&this.getValue?this.getValue():i,!!e.test(i)||t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(i,e)},cssLength:function(e){return this.functions((function(e){return o.test(CKEDITOR.tools.trim(e))}),e)},htmlLength:function(e){return this.functions((function(e){return n.test(CKEDITOR.tools.trim(e))}),e)},inlineStyle:function(e){return this.functions((function(e){return s.test(CKEDITOR.tools.trim(e))}),e)},equals:function(e,t){return this.functions((function(t){return t==e}),t)},notEqual:function(e,t){return this.functions((function(t){return t!=e}),t)}},CKEDITOR.on("instanceDestroyed",(function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var i in v)v[i].remove();v={}}for(var n in e=e.editor._.storedDialogs)e[n].destroy()}))}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var i=null,n=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&l(this),"function"==typeof n)i=(i=this._.storedDialogs||(this._.storedDialogs={}))[e]||(i[e]=new CKEDITOR.dialog(this,e)),t&&t.call(i,i),i.show();else{if("failed"==n)throw c(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof n&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)}),this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",(function(t){t.data.dialog&&e.openDialog(t.data.dialog)}),null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var i=e.langCode;i=t.availableLangs[i]?i:t.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+i+".js"),(function(){e.lang.a11yhelp=t.langEntries[i],e.openDialog("a11yHelp")}))},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",(function(t){t.data.label=e.lang.common.editorHelp}))}}),function(){function e(e){var t=this.att;void 0!==(e=e&&e.hasAttribute(t)&&e.getAttribute(t)||"")&&this.setValue(e)}function t(){for(var e,t=0;t<arguments.length;t++)if(arguments[t]instanceof CKEDITOR.dom.element){e=arguments[t];break}if(e){t=this.att;var i=this.getValue();i?e.setAttribute(t,i):e.removeAttribute(t,i)}}var i={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(e){e||(e=i);var t=[];e.id&&t.push("id"),e.dir&&t.push("dir");var n="";return t.length&&(n+="["+t.join(",")+"]"),e.classes&&(n+="(*)"),e.styles&&(n+="{*}"),n},createAdvancedTab:function(n,o,s){o||(o=i);var r=n.lang.common,a={id:"advanced",label:r.advancedTab,title:r.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},l=[];return(o.id||o.dir)&&(o.id&&l.push({id:"advId",att:"id",type:"text",requiredContent:s?s+"[id]":null,label:r.id,setup:e,commit:t}),o.dir&&l.push({id:"advLangDir",att:"dir",type:"select",requiredContent:s?s+"[dir]":null,label:r.langDir,default:"",style:"width:100%",items:[[r.notSet,""],[r.langDirLTR,"ltr"],[r.langDirRTL,"rtl"]],setup:e,commit:t}),a.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)})),(o.styles||o.classes)&&(l=[],o.styles&&l.push({id:"advStyles",att:"style",type:"text",requiredContent:s?s+"{cke-xyz}":null,label:r.styles,default:"",validate:CKEDITOR.dialog.validate.inlineStyle(r.invalidInlineStyle),onChange:function(){},getStyle:function(e,t){var i=this.getValue().match(new RegExp("(?:^|;)\\s*"+e+"\\s*:\\s*([^;]*)","i"));return i?i[1]:t},updateStyle:function(e,t){var i=this.getValue(),o=n.document.createElement("span");o.setAttribute("style",i),o.setStyle(e,t),i=CKEDITOR.tools.normalizeCssText(o.getAttribute("style")),this.setValue(i,1)},setup:e,commit:t}),o.classes&&l.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:s?s+"(cke-xyz)":null,label:r.cssClasses,default:"",setup:e,commit:t}]}),a.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)})),a}})}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,i=function(i,o,s,r){if(r){r=new CKEDITOR.style(r);var a=n[s];a.unshift(r),e.attachStyleStateChange(r,(function(t){!e.readOnly&&e.getCommand(s).setState(t)})),e.addCommand(s,new CKEDITOR.styleCommand(r,{contentForms:a})),e.ui.addButton&&e.ui.addButton(i,{label:o,command:s,toolbar:"basicstyles,"+(t+=10)})}},n={bold:["strong","b",["span",function(e){return"bold"==(e=e.styles["font-weight"])||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},o=e.config,s=e.lang.basicstyles;i("Bold",s.bold,"bold",o.coreStyles_bold),i("Italic",s.italic,"italic",o.coreStyles_italic),i("Underline",s.underline,"underline",o.coreStyles_underline),i("Strike",s.strike,"strike",o.coreStyles_strike),i("Subscript",s.subscript,"subscript",o.coreStyles_subscript),i("Superscript",s.superscript,"superscript",o.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function e(e,t,i,n){if(!e.isReadOnly()&&!e.equals(i.editable())){CKEDITOR.dom.element.setMarker(n,e,"bidi_processed",1),n=e;for(var o=i.editable();(n=n.getParent())&&!n.equals(o);)if(n.getCustomData("bidi_processed"))return e.removeStyle("direction"),void e.removeAttribute("dir");((n="useComputedState"in i.config?i.config.useComputedState:1)?e.getComputedStyle("direction"):e.getStyle("direction")||e.hasAttribute("dir"))!=t&&(e.removeStyle("direction"),n?(e.removeAttribute("dir"),t!=e.getComputedStyle("direction")&&e.setAttribute("dir",t)):e.setAttribute("dir",t),i.forceNextSelectionCheck())}}function t(e,t,i){var n=e.getCommonAncestor(!1,!0);if((e=e.clone()).enlarge(i==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),e.checkBoundaryOfElement(n,CKEDITOR.START)&&e.checkBoundaryOfElement(n,CKEDITOR.END)){for(var o;n&&n.type==CKEDITOR.NODE_ELEMENT&&(o=n.getParent())&&1==o.getChildCount()&&!(n.getName()in t);)n=o;return n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in t&&n}}function i(i){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(e,t){var i,n;if(!(n=void 0===(n=e.config.useComputedState)||n)){i=t.lastElement;for(var o=e.editable();i&&!(i.getName()in r)&&!i.equals(o);){var s=i.getParent();if(!s)break;i=s}}(i=i||t.block||t.blockLimit).equals(e.editable())&&(o=e.getSelection().getRanges()[0].getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&(i=o),i&&(n=n?i.getComputedStyle("direction"):i.getStyle("direction")||i.getAttribute("dir"),e.getCommand("bidirtl").setState("rtl"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.getCommand("bidiltr").setState("ltr"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)),(n=(t.block||t.blockLimit||e.editable()).getDirection(1))!=(e._.selDir||e.lang.dir)&&(e._.selDir=n,e.fire("contentDirChanged",n))},exec:function(n){var r=n.getSelection(),a=n.config.enterMode;if((d=r.getRanges())&&d.length){for(var l,c={},u=r.createBookmarks(),d=d.createIterator(),h=0;l=d.getNextRange(1);){var p=l.getEnclosedNode();p&&(!p||p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in s)||(p=t(l,o,a)),p&&e(p,i,n,c);var m=new CKEDITOR.dom.walker(l),g=u[h].startNode,f=u[h++].endNode;for(m.evaluator=function(e){var t,i=a==CKEDITOR.ENTER_P?"p":"div";return(t=!!e&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in o)&&((i=e.is(i))&&(i=!!(i=e.getParent())&&i.type==CKEDITOR.NODE_ELEMENT),t=!(i&&e.getParent().is("blockquote"))),!!(t&&e.getPosition(g)&CKEDITOR.POSITION_FOLLOWING&&(e.getPosition(f)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};p=m.next();)e(p,i,n,c);for((l=l.createIterator()).enlargeBr=a!=CKEDITOR.ENTER_BR;p=l.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)e(p,i,n,c)}CKEDITOR.dom.element.clearAllMarkers(c),n.forceNextSelectionCheck(),r.selectBookmarks(u),n.focus()}}}}function n(e){var t=e==a.setAttribute,i=e==a.removeAttribute,n=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(o,s){if(!this.isReadOnly()){var r;if(r=o==(t||i?"dir":"direction")||"style"==o&&(i||n.test(s))){e:{for(var a=(r=this).getDocument().getBody().getParent();r;){if(r.equals(a)){r=!1;break e}r=r.getParent()}r=!0}r=!r}if(r&&(r=this.getDirection(1),a=e.apply(this,arguments),r!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),a}return e.apply(this,arguments)}}var o={table:1,ul:1,ol:1,blockquote:1,div:1},s={},r={};CKEDITOR.tools.extend(s,o,{tr:1,p:1,div:1,li:1}),CKEDITOR.tools.extend(r,s,{td:1}),CKEDITOR.plugins.add("bidi",{init:function(e){function t(t,i,n,o,s){e.addCommand(n,new CKEDITOR.command(e,o)),e.ui.addButton&&e.ui.addButton(t,{label:i,command:n,toolbar:"bidi,"+s})}if(!e.blockless){var n=e.lang.bidi;t("BidiLtr",n.ltr,"bidiltr",i("ltr"),10),t("BidiRtl",n.rtl,"bidirtl",i("rtl"),20),e.on("contentDom",(function(){e.document.on("dirChanged",(function(t){e.fire("dirChanged",{node:t.data,dir:t.data.getDirection(1)})}))})),e.on("contentDirChanged",(function(t){t=(e.lang.dir!=t.data?"add":"remove")+"Class";var i=e.ui.space(e.config.toolbarLocation);i&&i[t]("cke_mixed_dir_content")}))}}});for(var a=CKEDITOR.dom.element.prototype,l=["setStyle","removeStyle","setAttribute","removeAttribute"],c=0;c<l.length;c++)a[l[c]]=CKEDITOR.tools.override(a[l[c]],n)}(),u={exec:function(e){var t=e.getCommand("blockquote").state,i=e.getSelection(),n=i&&i.getRanges()[0];if(n){var o=i.createBookmarks();if(CKEDITOR.env.ie){var s,r=o[0].startNode,a=o[0].endNode;if(r&&"blockquote"==r.getParent().getName())for(s=r;s=s.getNext();)if(s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary()){r.move(s,!0);break}if(a&&"blockquote"==a.getParent().getName())for(s=a;s=s.getPrevious();)if(s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary()){a.move(s);break}}if((l=n.createIterator()).enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(r=[];t=l.getNextParagraph();)r.push(t);for(1>r.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=o.shift(),n.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),n.moveToBookmark(a),n.selectNodeContents(t),n.collapse(!0),a=n.createBookmark(),r.push(t),o.unshift(a)),s=r[0].getParent(),n=[],a=0;a<r.length;a++)t=r[a],s=s.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[s.getName()];)s=s.getParent();for(a=null;0<r.length;){for(t=r.shift();!t.getParent().equals(s);)t=t.getParent();t.equals(a)||n.push(t),a=t}for(;0<n.length;)if("blockquote"==(t=n.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)a.append(t.getFirst().remove()),r.push(a.getLast());a.replace(t)}else r.push(t);for((n=e.document.createElement("blockquote")).insertBefore(r[0]);0<r.length;)t=r.shift(),n.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(a=[],s={};t=l.getNextParagraph();){for(r=n=null;t.getParent();){if("blockquote"==t.getParent().getName()){n=t.getParent(),r=t;break}t=t.getParent()}n&&r&&!r.getCustomData("blockquote_moveout")&&(a.push(r),CKEDITOR.dom.element.setMarker(s,r,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(s),t=[],r=[],s={};0<a.length;)n=(l=a.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),r.push(l.getNext())):l.remove().insertAfter(n):l.remove().insertBefore(n),n.getCustomData("blockquote_processed")||(r.push(n),CKEDITOR.dom.element.setMarker(s,n,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(s),a=r.length-1;0<=a;a--){e:{for(var l=0,c=(s=n=r[a]).getChildCount(),u=void 0;l<c&&(u=s.getChild(l));l++)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){s=!1;break e}s=!0}s&&n.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(n=!0;t.length;)if("div"==(l=t.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document),!n||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||a.append(e.document.createElement("br")),n=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);n&&a.append(e.document.createElement("br")),a.replace(l),n=!1}}i.selectBookmarks(o),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"},CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",u),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}}),function(){function e(e,t){CKEDITOR.tools.extend(this,t,{editor:e,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:e._.notificationArea}),t.type||(this.type="info"),this.element=this._createElement(),e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(e){var t=this;this.editor=e,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),e.on("destroy",(function(){t._removeListeners(),t.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(e){e._.notificationArea=new t(e),e.showNotification=function(t,i,n){var o,s;return"progress"==i?o=n:s=n,(t=new CKEDITOR.plugins.notification(e,{message:t,type:i,progress:o,duration:s})).show(),t},e.on("key",(function(t){if(27==t.data.keyCode){var i=e._.notificationArea.notifications;i.length&&(function(e){var t=new CKEDITOR.dom.element("div");t.setStyles({position:"fixed","margin-left":"-9999px"}),t.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),t.setText(e),CKEDITOR.document.getBody().append(t),setTimeout((function(){t.remove()}),100)}(e.lang.notification.closed),i[i.length-1].hide(),t.cancel())}}))}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(e){var t=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:e})&&(t=!1);var i=this.element,n=i.findOne(".cke_notification_message"),o=i.findOne(".cke_notification_progress"),s=e.type;i.removeAttribute("role"),e.progress&&"progress"!=this.type&&(s="progress"),s&&(i.removeClass(this._getClass()),i.removeAttribute("aria-label"),this.type=s,i.addClass(this._getClass()),i.setAttribute("aria-label",this.type),"progress"!=this.type||o?"progress"!=this.type&&o&&o.remove():(o=this._createProgressElement()).insertBefore(n)),void 0!==e.message&&(this.message=e.message,n.setHtml(this.message)),void 0!==e.progress&&(this.progress=e.progress,o&&o.setStyle("width",this._getPercentageProgress())),t&&e.important&&(i.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=e.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,i=this,n=this.editor.lang.common.close;return(e=new CKEDITOR.dom.element("div")).addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),(t=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+n+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",(function(){i.editor.focus(),i.hide()})),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var e=new CKEDITOR.dom.element("span");return e.addClass("cke_notification_progress"),e.setStyle("width",this._getPercentageProgress()),e},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(t._hideTimeoutId=setTimeout((function(){t.hide()}),e))}},t.prototype={add:function(e){this.notifications.push(e),this.element.append(e.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(e){var t=CKEDITOR.tools.indexOf(this.notifications,e);0>t||(this.notifications.splice(t,1),e.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var e=this.editor,t=e.config,i=new CKEDITOR.dom.element("div");return i.addClass("cke_notifications_area"),i.setAttribute("id","cke_notifications_area_"+e.name),i.setStyle("z-index",t.baseFloatZIndex-2),i},_attachListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.on("scroll",this._uiBuffer.input),e.on("resize",this._uiBuffer.input),t.on("change",this._changeBuffer.input),t.on("floatingSpaceLayout",this._layout,this,null,20),t.on("blur",this._layout,this,null,20)},_removeListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.removeListener("scroll",this._uiBuffer.input),e.removeListener("resize",this._uiBuffer.input),t.removeListener("change",this._changeBuffer.input),t.removeListener("floatingSpaceLayout",this._layout),t.removeListener("blur",this._layout)},_layout:function(){function e(){o.setStyle("left",g(f+r.width-c-u))}var t,i,n,o=this.element,s=this.editor,r=s.ui.contentsElement.getClientRect(),a=s.ui.contentsElement.getDocumentPosition(),l=o.getClientRect(),c=this._notificationWidth,u=this._notificationMargin,d=(n=CKEDITOR.document.getWindow()).getScrollPosition(),h=n.getViewPaneSize(),p=CKEDITOR.document.getBody(),m=p.getDocumentPosition(),g=CKEDITOR.tools.cssLength;c&&u||(n=this.element.getChild(0),c=this._notificationWidth=n.getClientRect().width,u=this._notificationMargin=parseInt(n.getComputedStyle("margin-left"),10)+parseInt(n.getComputedStyle("margin-right"),10)),s.toolbar&&(i=(t=s.ui.space("top")).getClientRect()),t&&t.isVisible()&&i.bottom>r.top&&i.bottom<r.bottom-l.height?o.setStyles({position:"fixed",top:g(i.bottom)}):0<r.top?o.setStyles({position:"absolute",top:g(a.y)}):a.y+r.height-l.height>d.y?o.setStyles({position:"fixed",top:0}):o.setStyles({position:"absolute",top:g(a.y+r.height-l.height)});var f="fixed"==o.getStyle("position")?r.left:"static"!=p.getComputedStyle("position")?a.x-m.x:a.x;r.width<c+u?a.x+c+u>d.x+h.width?e():o.setStyle("left",g(f)):a.x+c+u>d.x+h.width?o.setStyle("left",g(f)):a.x+r.width/2+c/2+u>d.x+h.width?o.setStyle("left",g(f-a.x+d.x+h.width-c-u)):0>r.left+r.width-c-u?e():0>r.left+r.width/2-c/2?o.setStyle("left",g(f-a.x+d.x)):o.setStyle("left",g(f+r.width/2-c/2-u/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"'),e=(e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"')+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),i=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,n){function o(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var s,r,a,l=null,c=CKEDITOR.env,u=this._.id=CKEDITOR.tools.getNextId(),d="",h=this.command;this._.editor=e;var p,m={id:u,button:this,editor:e,focus:function(){CKEDITOR.document.getById(u).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},g=CKEDITOR.tools.addFunction((function(e){if(m.onkey)return e=new CKEDITOR.dom.event(e),!1!==m.onkey(m,e.getKeystroke())})),f=CKEDITOR.tools.addFunction((function(e){var t;return m.onfocus&&(t=!1!==m.onfocus(m,new CKEDITOR.dom.event(e))),t})),y=0;m.clickFn=s=CKEDITOR.tools.addFunction((function(){y&&(e.unlockSelection(1),y=0),m.execute(),c.iOS&&e.focus()})),this.modes?(l={},e.on("beforeModeUnload",(function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)}),this),e.on("activeFilterChange",o,this),e.on("mode",o,this),!this.readOnly&&e.on("readOnly",o,this)):h&&(h=e.getCommand(h))&&(h.on("state",(function(){this.setState(h.state)}),this),d+=h.state==CKEDITOR.TRISTATE_ON?"on":h.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&e.on("contentDirChanged",(function(t){var i=CKEDITOR.document.getById(this._.id),n=i.getFirst();(t=t.data)!=e.lang.dir?i.addClass("cke_"+t):i.removeClass("cke_ltr").removeClass("cke_rtl"),n.setAttribute("style",CKEDITOR.skin.getIconStyle(p,"rtl"==t,this.icon,this.iconOffset))}),this),h?(r=e.getCommandKeystroke(h))&&(a=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,r)):d+="off",r=this.name||this.command;var b=null,v=this.icon;return p=r,this.icon&&!/\./.test(this.icon)?(p=this.icon,v=null):(this.icon&&(b=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(b=this.iconHiDpi)),b?(CKEDITOR.skin.addIcon(b,b),v=null):b=p,d={id:u,name:r,iconName:p,label:this.label,cls:this.className||"",state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(a?" ("+a.display+")":""),ariaShortcut:a?e.lang.common.keyboardShortcut+" "+a.aria:"",titleJs:c.gecko&&!c.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:g,focusFn:f,clickFn:s,style:CKEDITOR.skin.getIconStyle(b,"rtl"==e.lang.dir,v,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},i.output(d,n),this.onRender&&this.onRender(),m},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function e(e){function i(t,i){if(i.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var o;o=i.shift();)o="string"==typeof o?o:o.name,n&&-1!=CKEDITOR.tools.indexOf(n,o)||(o=e.ui.create(o))&&e.addFeature(o)&&t.items.push(o)}}var n=(n=e.config.removeButtons)&&n.split(","),o=e.config.toolbar;return"string"==typeof o&&(o=e.config["toolbar_"+o]),e.toolbar=o?function(e){var t,n,o,s=[];for(t=0;t<e.length;++t)o={},"/"==(n=e[t])?s.push(n):CKEDITOR.tools.isArray(n)?(i(o,CKEDITOR.tools.clone(n)),s.push(o)):n.items&&(i(o,CKEDITOR.tools.clone(n.items)),o.name=n.name,s.push(o));return s}(o):function(){for(var n=function(){var t,i,n,o={};for(t in e.ui.items)i=(n=(n=(i=e.ui.items[t]).toolbar||"others").split(","))[0],n=parseInt(n[1]||-1,10),o[i]||(o[i]=[]),o[i].push({name:t,order:n});for(i in o)o[i]=o[i].sort((function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1}));return o}(),o=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),s=0;s<o.length;s++){var r=o[s];if("/"!=r){"string"==typeof r&&(r=o[s]={name:r});var a,l=r.groups;if(l)for(var c=0;c<l.length;c++)(a=n[a=l[c]])&&i(r,a);(a=n[r.name])&&i(r,a)}}return o}()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var i=function(){this.toolbars=[],this.focusCommandExecuted=!1};i.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var i,n=0;i=e.items[n++];)if(i.focus)return void i.focus()};var n={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){e.toolbox.focus()}),100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var o,s=function(e,i){var n,r=(a="rtl"==t.lang.dir)?37:39,a=a?39:37,l=void 0===(l=t.config.toolbarGroupCycling)||l;switch(i){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if((n=9==i?(n?n.next:e.toolbar.next)||t.toolbox.toolbars[0]:(n?n.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1]).items.length)for(e=n.items[o?n.items.length-1:0];e&&!e.focus;)(e=o?e.previous:e.next)||(n=0);return e&&e.focus(),!1;case r:n=e;do{!(n=n.next)&&l&&(n=e.toolbar.items[0])}while(n&&!n.focus);return n?n.focus():s(e,9),!1;case 40:return e.button&&e.button.hasArrow?e.execute():s(e,40==i?r:a),!1;case a:case 38:n=e;do{!(n=n.previous)&&l&&(n=e.toolbar.items[e.toolbar.items.length-1])}while(n&&!n.focus);return n?n.focus():(o=1,s(e,CKEDITOR.SHIFT+9),o=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",(function(n){if(n.data.space==t.config.toolbarLocation){n.removeListener(),t.toolbox=new i;var o,r,a=['<span id="',l=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',l,'" onmousedown="return false;">'],l=!1!==t.config.toolbarStartupExpanded;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&a.push('<span class="cke_toolbox_main"'+(l?">":' style="display:none">'));for(var c=t.toolbox.toolbars,u=e(t),d=u.length,h=0;h<d;h++){var p,m,g,f=0,y=u[h],b="/"!==y&&("/"===u[h+1]||h==d-1);if(y)if(o&&(a.push("</span>"),r=o=0),"/"===y)a.push('<span class="cke_toolbar_break"></span>');else{g=y.items||y;for(var v=0;v<g.length;v++){var _,C=g[v];if(C){var w=function(e){e=e.render(t,a),0<(T=f.items.push(e)-1)&&(e.previous=f.items[T-1],e.previous.next=e),e.toolbar=f,e.onkey=s,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(C.type==CKEDITOR.UI_SEPARATOR)r=o&&C;else{if(_=!1!==C.canGroup,!f){p=CKEDITOR.tools.getNextId(),f={id:p,items:[]},m=y.name&&(t.lang.toolbar.toolbarGroups[y.name]||y.name),a.push('<span id="',p,'" class="cke_toolbar'+(b?' cke_toolbar_last"':'"'),m?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),m&&a.push('<span id="',p,'_label" class="cke_voice_label">',m,"</span>"),a.push('<span class="cke_toolbar_start"></span>');var T=c.push(f)-1;0<T&&(f.previous=c[T-1],f.previous.next=f)}_?o||(a.push('<span class="cke_toolgroup" role="presentation">'),o=1):o&&(a.push("</span>"),o=0),r&&(w(r),r=0),w(C)}}}o&&(a.push("</span>"),r=o=0),f&&a.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&a.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var E=CKEDITOR.tools.addFunction((function(){t.execCommand("toolbarCollapse")}));t.on("destroy",(function(){CKEDITOR.tools.removeFunction(E)})),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),i=t.getPrevious(),n=e.ui.space("contents"),o=i.getParent(),s=parseInt(n.$.style.height,10),r=o.$.offsetHeight,a=t.hasClass("cke_toolbox_collapser_min");a?(i.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(i.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(a?"▲":"◀"),n.setStyle("height",s-(o.$.offsetHeight-r)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:n.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),a.push('<a title="'+(l?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),l||a.push(" cke_toolbox_collapser_min"),a.push('" onclick="CKEDITOR.tools.callFunction('+E+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}a.push("</span>"),n.data.html+=a.join("")}})),t.on("destroy",(function(){if(this.toolbox){var e,t,i,n,o=0;for(e=this.toolbox.toolbars;o<e.length;o++)for(i=e[o].items,t=0;t<i.length;t++)(n=i[t]).clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}})),t.on("uiReady",(function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)})),t.addCommand("toolbarFocus",n),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,i,n){var o=t(this.editor),s=0===i,r={name:e};if(n){if(n=CKEDITOR.tools.search(o,(function(e){return e.name==n})))return!n.groups&&(n.groups=[]),i&&0<=(i=CKEDITOR.tools.indexOf(n.groups,i))?void n.groups.splice(i+1,0,e):void(s?n.groups.splice(0,0,e):n.groups.push(e));i=null}i&&(i=CKEDITOR.tools.indexOf(o,(function(e){return e.name==i}))),s?o.splice(0,0,e):"number"==typeof i?o.splice(i+1,0,r):o.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,i){return t.type||(t.type="auto"),!(i&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",(function(){e.toolbox.focus()})),e.fire("paste",t))}function t(e,t,i){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var n=new CKEDITOR.htmlParser.basicWriter;return i.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(n),n.getHtml()}function i(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}var n;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(i){var n,o=function(){function e(){var e,t={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var t={};return{get:function(i){return"plain-text"==i?t.plainText||(t.plainText=new CKEDITOR.filter("br")):"semantic-content"==i?((i=t.semanticContent)||((i=new CKEDITOR.filter).allow({$1:{elements:e(),attributes:!0,styles:!1,classes:!1}}),i=t.semanticContent=i),i):i?new CKEDITOR.filter(i):null}}}();if(i.config.forcePasteAsPlainText?n="plain-text":i.config.pasteFilter?n=i.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in i.config||(n="semantic-content"),i.pasteFilter=o.get(n),function(t){function i(){var e,i=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var n=function(e){t.getSelection().isCollapsed()||(t.readOnly&&"cut"==e.name||p.initPasteDataTransfer(e,t),e.data.preventDefault())};i.on("copy",n),i.on("cut",n),i.on("cut",(function(){t.readOnly||t.extractSelectedHtml()}),null,null,999)}i.on(p.mainPasteEvent,(function(e){"beforepaste"==p.mainPasteEvent&&m||u(e)})),"beforepaste"==p.mainPasteEvent&&(i.on("paste",(function(e){g||(o(),e.data.preventDefault(),u(e),r("paste"))})),i.on("contextmenu",s,null,null,0),i.on("beforepaste",(function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||s()}),null,null,0)),i.on("beforecut",(function(){!m&&a()})),i.attachListener(CKEDITOR.env.ie?i:t.document.getDocumentElement(),"mouseup",(function(){e=setTimeout((function(){d()}),0)})),t.on("destroy",(function(){clearTimeout(e)})),i.on("keyup",d)}function n(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,fakeKeystroke:"cut"==e?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var e;"cut"==this.type&&a();var i=this.type;if(CKEDITOR.env.ie)e=r(i);else try{e=t.document.$.execCommand(i,!1,null)}catch(t){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function o(){g=1,setTimeout((function(){g=0}),100)}function s(){m=1,setTimeout((function(){m=0}),10)}function r(e){var i=t.document,n=i.getBody(),o=!1,s=function(){o=!0};return n.on(e,s),7<CKEDITOR.env.version?i.$.execCommand(e):i.$.selection.createRange().execCommand(e),n.removeListener(e,s),o}function a(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,i,n,o=t.getSelection();o.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=o.getSelectedElement())&&(i=o.getRanges()[0],(n=t.document.createText("")).insertBefore(e),i.setStartBefore(n),i.setEndAfter(e),o.selectRanges([i]),setTimeout((function(){e.getParent()&&(n.remove(),o.selectElement(e))}),0))}}function l(){if("paste"==p.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),o();var e=t.focusManager;return e.lock(),t.editable().fire(p.mainPasteEvent)&&!r("paste")?(e.unlock(),!1):(e.unlock(),!0)}function c(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),o(),"paste"==p.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout((function(){t.fire("saveSnapshot")}),50)}}function u(i){var n={type:"auto",method:"paste",dataTransfer:p.initPasteDataTransfer(i)};n.dataTransfer.cacheData();var o=!1!==t.fire("beforePaste",n);o&&p.canClipboardApiBeTrusted(n.dataTransfer,t)?(i.data.preventDefault(),setTimeout((function(){e(t,n)}),0)):function(e,i){var n,o=t.document,s=t.editable(),r=function(e){e.cancel()};if(!o.getById("cke_pastebin")){var a=t.getSelection(),l=a.createBookmarks();CKEDITOR.env.ie&&a.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!s.is("body")||CKEDITOR.env.ie?"div":"body",o);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var u=0;o=o.getWindow(),CKEDITOR.env.webkit?(s.append(c),c.addClass("cke_editable"),s.is("body")||(u=(u="static"!=s.getComputedStyle("position")?s:CKEDITOR.dom.element.get(s.$.offsetParent)).getDocumentPosition().y)):s.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:o.getScrollPosition().y-u+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(u=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-10000px"),t.on("selectionChange",r,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=s.once("blur",r,null,null,-100)),u&&c.focus(),(u=new CKEDITOR.dom.range(c)).selectNodeContents(c);var d=u.select();CKEDITOR.env.ie&&(n=s.once("blur",(function(){t.lockSelection(d)})));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){var e;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=h),n&&n.removeListener(),CKEDITOR.env.ie&&s.focus(),a.selectBookmarks(l),c.remove(),CKEDITOR.env.webkit&&(e=c.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(c=e),t.removeListener("selectionChange",r),i(c.getHtml())}),0)}}(0,(function(i){n.dataValue=i.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),o&&e(t,n)}))}function d(){if("wysiwyg"==t.mode){var e=h("paste");t.getCommand("cut").setState(h("cut")),t.getCommand("copy").setState(h("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function h(e){if(f&&e in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==e)return CKEDITOR.TRISTATE_OFF;var i=(e=t.getSelection()).getRanges();return e.getType()==CKEDITOR.SELECTION_NONE||1==i.length&&i[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var p=CKEDITOR.plugins.clipboard,m=0,g=0,f=0;!function(){if(t.on("key",c),t.on("contentDom",i),t.on("selectionChange",(function(e){f=e.data.selection.getRanges()[0].checkReadOnly(),d()})),t.contextMenu){t.contextMenu.addListener((function(e,t){return f=t.getRanges()[0].checkReadOnly(),{cut:h("cut"),copy:h("copy"),paste:h("paste")}}));var e=null;t.on("menuShow",(function(){e&&(e.removeListener(),e=null);var i=t.contextMenu.findItemByCommandName("paste");i&&i.element&&(e=i.element.on("touchend",(function(){t._.forcePasteDialog=!0})))}))}t.ui.addButton&&t.once("instanceReady",(function(){t._.pasteButtons&&CKEDITOR.tools.array.forEach(t._.pasteButtons,(function(e){(e=t.ui.get(e))&&(e=CKEDITOR.document.getById(e._.id))&&e.on("touchend",(function(){t._.forcePasteDialog=!0}))}))}))}(),function(){function i(e,i,n,o,s){var r=t.lang.clipboard[i];t.addCommand(i,n),t.ui.addButton&&t.ui.addButton(e,{label:r,command:i,toolbar:"clipboard,"+o}),t.addMenuItems&&t.addMenuItem(i,{label:r,command:i,group:"clipboard",order:s})}i("Cut","cut",n("cut"),10,1),i("Copy","copy",n("copy"),20,4),i("Paste","paste",{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(t,i){function n(i,n){n=void 0===n||n,i?(i.method="paste",i.dataTransfer||(i.dataTransfer=p.initPasteDataTransfer()),e(t,i,n)):s&&!t._.forcePasteDialog&&t.showNotification(l,"info",t.config.clipboard_notificationDuration),t._.forcePasteDialog=!1,t.fire("afterCommandExec",{name:"paste",command:o,returnValue:!!i})}var o=this,s=void 0===(i=null!=i?i:{}).notification||i.notification,r=i.type,a=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,t.getCommandKeystroke(this)),l="string"==typeof s?s:t.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+a.aria+'">'+a.display+"</kbd>");a="string"==typeof i?i:i.dataValue,r&&!0!==t.config.forcePasteAsPlainText&&"allow-word"!==t.config.forcePasteAsPlainText?t._.nextPasteType=r:delete t._.nextPasteType,"string"==typeof a?n({dataValue:a}):t.getClipboardData(n)}},30,8),t._.pasteButtons||(t._.pasteButtons=[]),t._.pasteButtons.push("Paste")}(),t.getClipboardData=function(e,i){function n(e){e.removeListener(),e.cancel(),i(e.data)}function o(e){e.removeListener(),e.cancel(),i({type:r,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:"paste"})}var s=!1,r="auto";i||(i=e,e=null),t.on("beforePaste",(function(e){e.removeListener(),s=!0,r=e.data.type}),null,null,1e3),t.on("paste",n,null,null,0),!1===l()&&(t.removeListener("paste",n),t._.forcePasteDialog&&s&&t.fire("pasteDialog")?(t.on("pasteDialogCommit",o),t.on("dialogHide",(function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",o),e.data._.committed||i(null)}))):i(null))}}(i),function(t){var i=CKEDITOR.plugins.clipboard;t.on("contentDom",(function(){function n(e,i,n){var o={$:e.data.$,target:e.data.getTarget()};i&&(o.dragRange=i),n&&(o.dropRange=n),!1===t.fire(e.name,o)&&e.data.preventDefault()}function o(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var s=t.editable(),r=CKEDITOR.plugins.clipboard.getDropTarget(t),a=t.ui.space("top"),l=t.ui.space("bottom");i.preventDefaultDropOnElement(a),i.preventDefaultDropOnElement(l),s.attachListener(r,"dragstart",n),s.attachListener(t,"dragstart",i.resetDragDataTransfer,i,null,1),s.attachListener(t,"dragstart",(function(e){i.initDragDataTransfer(e,t)}),null,null,2),s.attachListener(t,"dragstart",(function(){var e=i.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i.dragStartContainerChildCount=e?o(e.startContainer):null,i.dragEndContainerChildCount=e?o(e.endContainer):null)}),null,null,100),s.attachListener(r,"dragend",n),s.attachListener(t,"dragend",i.initDragDataTransfer,i,null,1),s.attachListener(t,"dragend",i.resetDragDataTransfer,i,null,100),s.attachListener(r,"dragover",(function(e){if(CKEDITOR.env.edge)e.data.preventDefault();else{var t=e.data.getTarget();(t&&t.is&&t.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files"))&&e.data.preventDefault()}})),s.attachListener(r,"drop",(function(e){if(!e.data.$.defaultPrevented&&(e.data.preventDefault(),!(o=e.data.getTarget()).isReadOnly()||o.type==CKEDITOR.NODE_ELEMENT&&o.is("html"))){var o=i.getRangeAtDropPosition(e,t),s=i.dragRange;o&&n(e,s,o)}}),null,null,9999),s.attachListener(t,"drop",i.initDragDataTransfer,i,null,1),s.attachListener(t,"drop",(function(n){if(n=n.data){var o=n.dropRange,s=n.dragRange,r=n.dataTransfer;r.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){i.internalDrop(s,o,r,t)}),0):r.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function(i,n,o){n.select(),e(t,{dataTransfer:o,method:"drop"},1),o.sourceEditor.fire("saveSnapshot"),o.sourceEditor.editable().extractHtmlFromRange(i),o.sourceEditor.getSelection().selectRanges([i]),o.sourceEditor.fire("saveSnapshot")}(s,o,r):function(n,o){n.select(),e(t,{dataTransfer:o,method:"drop"},1),i.resetDragDataTransfer()}(o,r)}}),null,null,9999)}))}(i),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var s,r=["image/png","image/jpeg","image/gif"];i.on("paste",(function(e){var t=e.data,n=t.dataTransfer;if(!t.dataValue&&"paste"==t.method&&n&&1==n.getFilesCount()&&s!=n.id&&(n=n.getFile(0),-1!=CKEDITOR.tools.indexOf(r,n.type))){var o=new FileReader;o.addEventListener("load",(function(){e.data.dataValue='<img src="'+o.result+'" />',i.fire("paste",e.data)}),!1),o.addEventListener("abort",(function(){i.fire("paste",e.data)}),!1),o.addEventListener("error",(function(){i.fire("paste",e.data)}),!1),o.readAsDataURL(n),s=t.dataTransfer.id,e.stop()}}),null,null,1)}i.on("paste",(function(e){if(e.data.dataTransfer||(e.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!e.data.dataValue){var t=e.data.dataTransfer,n=t.getData("text/html");n?(e.data.dataValue=n,e.data.type="html"):(n=t.getData("text/plain"))&&(e.data.dataValue=i.editable().transformPlainTextToHtml(n),e.data.type="text")}}),null,null,1),i.on("paste",(function(e){var t=e.data.dataValue,i=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var n,o,s=new CKEDITOR.dom.element("div");for(s.setHtml(t);1==s.getChildCount()&&(n=s.getFirst())&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasClass("cke_editable")||n.hasClass("cke_contents"));)s=o=n;o&&(t=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(t,n){return n.toLowerCase()in i?(e.data.preSniffing="html","<"+n):t})):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,(function(t,n){return n in i?(e.data.endsWithEOL=1,"</"+n+">"):t})):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t}),null,null,3),i.on("paste",(function(e){e=e.data;var n,s=i._.nextPasteType||e.type,r=e.dataValue,a=i.config.clipboard_defaultContentType||"html",l=e.dataTransfer.getTransferType(i)==CKEDITOR.DATA_TRANSFER_EXTERNAL,c=!0===i.config.forcePasteAsPlainText;n="html"==s||"html"==e.preSniffing?"html":function(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(r),delete i._.nextPasteType,"htmlifiedtext"==n&&(r=function(e,t){function i(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return t=(t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,(function(e){return e.toLowerCase()})),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,(function(e){return i(e.split("</div><div>").length+1)}))+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,(function(e){return i(e.length/4)}))+"</p>")),function(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,(function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)})).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}(e,t))}(i.config,r)),"text"==s&&"html"==n?r=t(i,r,o.get("plain-text")):(l&&i.pasteFilter&&!e.dontFilter||c)&&(r=t(i,r,i.pasteFilter)),e.startsWithEOL&&(r='<br data-cke-eol="1">'+r),e.endsWithEOL&&(r+='<br data-cke-eol="1">'),"auto"==s&&(s="html"==n||"html"==a?"html":"text"),e.type=s,e.dataValue=r,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL}),null,null,6),i.on("paste",(function(e){(e=e.data).dataValue&&(i.insertHtml(e.dataValue,e.type,e.range),setTimeout((function(){i.fire("afterPaste")}),0))}),null,null,1e3),i.on("pasteDialog",(function(e){setTimeout((function(){i.openDialog("paste",e.data)}),0)}))}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,i){e.ui.addButton&&(e.ui.addButton(t,i),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,i,n){function o(e,i,n){var o=e;if(o.type==CKEDITOR.NODE_TEXT&&(o=e.getParent()),o.equals(i)&&n!=i.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),i=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&i&&i.type==CKEDITOR.NODE_TEXT&&(n=e.getLength(),e.setText(e.getText()+i.getText()),i.remove(),t.setStart(e,n),t.collapse(!0)),!0}var s=t.startContainer;"number"==typeof n&&"number"==typeof i&&s.type==CKEDITOR.NODE_ELEMENT&&(o(e.startContainer,s,i)||o(e.endContainer,s,n))},isDropRangeAffectedByDragRange:function(e,t){var i=t.startContainer,n=t.endOffset;return!!(e.endContainer.equals(i)&&e.endOffset<=n||e.startContainer.getParent().equals(i)&&e.startContainer.getIndex()<n||e.endContainer.getParent().equals(i)&&e.endContainer.getIndex()<n)},internalDrop:function(t,i,n,o){var s,r,a=CKEDITOR.plugins.clipboard,l=o.editable();o.fire("saveSnapshot"),o.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,i,a.dragStartContainerChildCount,a.dragEndContainerChildCount),(r=this.isDropRangeAffectedByDragRange(t,i))||(s=t.createBookmark(!1)),a=i.clone().createBookmark(!1),r&&(s=t.createBookmark(!1)),t=s.startNode,i=s.endNode,r=a.startNode,i&&t.getPosition(r)&CKEDITOR.POSITION_PRECEDING&&i.getPosition(r)&CKEDITOR.POSITION_FOLLOWING&&r.insertBefore(t),(t=o.createRange()).moveToBookmark(s),l.extractHtmlFromRange(t,1),(i=o.createRange()).moveToBookmark(a),e(o,{dataTransfer:n,method:"drop",range:i},1),o.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var i=e.data.$,n=i.clientX,o=i.clientY,s=t.getSelection(!0).getRanges()[0],r=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(n,o))i=t.document.$.caretRangeFromPoint(n,o),r.setStart(CKEDITOR.dom.node(i.startContainer),i.startOffset),r.collapse(!0);else if(i.rangeParent)r.setStart(CKEDITOR.dom.node(i.rangeParent),i.rangeOffset),r.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&s&&t.editable().hasFocus)return s;if(!document.body.createTextRange)return null;t.focus(),i=t.document.getBody().$.createTextRange();try{for(var a=!1,l=0;20>l&&!a;l++){if(!a)try{i.moveToPoint(n,o-l),a=!0}catch(e){}if(!a)try{i.moveToPoint(n,o+l),a=!0}catch(e){}}if(a){var c="cke-temp-"+(new Date).getTime();i.pasteHTML('<span id="'+c+'">​</span>');var u=t.document.getById(c);r.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var d=t.document.$.elementFromPoint(n,o),h=new CKEDITOR.dom.element(d);if(h.equals(t.editable())||"html"==h.getName())return s&&s.startContainer&&!s.startContainer.equals(t.editable())?s:null;n<h.getClientRect().left?r.setStartAt(h,CKEDITOR.POSITION_AFTER_START):r.setStartAt(h,CKEDITOR.POSITION_BEFORE_END),r.collapse(!0)}}catch(e){return null}}return r},initDragDataTransfer:function(e,t){var i=e.data.$?e.data.$.dataTransfer:null,n=new this.dataTransfer(i,t);"dragstart"===e.name&&n.storeId(),i?this.dragData&&n.id==this.dragData.id?n=this.dragData:this.dragData=n:this.dragData?n=this.dragData:this.dragData=n,e.data.dataTransfer=n},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var i=e.data.$.clipboardData,n=new this.dataTransfer(i,t);return"copy"!==e.name&&"cut"!==e.name||n.storeId(),this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData).$=i:this.copyCutData=n,n}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",i)}},n=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(e){return"text"==(e=e.toLowerCase())||"text/plain"==e?"Text":"url"==e?"URL":e}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(n),this.id||(this.id="Text"==n?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==n||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){if(null==(n="text/html"==(e=this._.normalizeType(e))&&t?this._.nativeHtmlCache:this._.data[e])||""===n){if(this._.fallbackDataTransfer.isRequired())n=this._.fallbackDataTransfer.getData(e,t);else try{n=this.$.getData(e)||""}catch(e){n=""}"text/html"!=e||t||(n=this._stripHtml(n))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==n.substring(0,7)&&(n=""),"string"==typeof n)var i=n.indexOf("</html>"),n=-1!==i?n.substring(0,i+7):n;return n},setData:function(e,t){if("text/html"==(e=this._.normalizeType(e))?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==n&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch(e){}},storeId:function(){"Text"!==n&&this.setData(n,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){e=n._.normalizeType(e);var t=n.getData(e);"text/html"==e&&(n._.nativeHtmlCache=n.getData(e,!0),t=n._stripHtml(t)),t&&(n._.data[e]=t)}if(this.$){var t,i,n=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(t=0;t<this.$.types.length;t++)e(this.$.types[t])}else e("Text"),e("URL");if(i=this._getImageFromClipboard(),this.$&&this.$.files||i){if(this._.files=[],this.$.files&&this.$.files.length)for(t=0;t<this.$.files.length;t++)this._.files.push(this.$.files[t]);0===this._.files.length&&i&&this._.files.push(i)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e,t={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),(function(e){t[e]=1})),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var i=0;i<this.$.types.length;i++)t[this.$.types[i]]=1}else t.Text=1,t.URL=1;for(e in"Text"!=n&&(t[n]=0),t)if(t[e]&&""!==this.getData(e))return!1;return!0},_getImageFromClipboard:function(){var e;if(this.$&&this.$.items&&this.$.items[0])try{if((e=this.$.items[0].getAsFile())&&e.type)return e}catch(e){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(e);t&&t.length&&(e=(e=t[1]).replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(e){}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var i=this._getData(this._customDataFallbackType,!0);if(t)return i;i=this._extractDataComment(i);var n;return null!==(n=e===this._customDataFallbackType?i.content:i.data&&i.data[e]?i.data[e]:this._getData(e,!0))?n:""},setData:function(e,t){(o=e===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var i=t,n=this._dataTransfer.$;try{n.setData(e,i),o&&(this._dataTransfer._.nativeHtmlCache=i)}catch(t){if(this._isUnsupportedMimeTypeError(t)){o=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(o._customTypes,e)&&o._customTypes.push(e);var o=this._getFallbackTypeContent(),s=this._getFallbackTypeData();s[e]=i;try{i=this._applyDataComment(o,s),n.setData(this._customDataFallbackType,i),this._dataTransfer._.nativeHtmlCache=i}catch(e){i=""}}}return i},_getData:function(e,t){var i=this._dataTransfer._.data;if(!t&&i[e])return i[e];try{return this._dataTransfer.$.getData(e)}catch(e){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},i=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,(function(e){void 0!==i[e]?t[e]=i[e]:void 0!==t[e]&&(t[e]=t[e])}),this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var t,i={data:null,content:e||""};return e&&16<e.length&&(t=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&t[1]&&(i.data=JSON.parse(decodeURIComponent(t[1])),i.content=e.replace(t[0],"")),i},_applyDataComment:function(e,t){var i="";return t&&CKEDITOR.tools.objectKeys(t).length&&(i="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),i+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(e){var t=this._;t.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(e),t.on?t.panel.hide():t.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var i=t.panel||{};delete t.panel,this.base(t),this.document=i.parent&&i.parent.getDocument()||CKEDITOR.document,i.block={attributes:i.attributes},this.hasArrow=i.toolbarRelated=!0,this.click=e,this._={panelDefinition:i}},statics:{handler:{create:function(e){return new CKEDITOR.ui.panelButton(e)}}},proto:{createPanel:function(e){var t=this._;if(!t.panel){var i=this._.panelDefinition,n=this._.panelDefinition.block,o=i.parent||CKEDITOR.document.getBody(),s=this._.panel=new CKEDITOR.ui.floatPanel(e,o,i),r=(i=s.addBlock(t.id,n),this);s.onShow=function(){r.className&&this.element.addClass(r.className+"_panel"),r.setState(CKEDITOR.TRISTATE_ON),t.on=1,r.editorFocus&&e.focus(),r.onOpen&&r.onOpen()},s.onHide=function(i){r.className&&this.element.getFirst().removeClass(r.className+"_panel"),r.setState(r.modes&&r.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.on=0,!i&&r.onClose&&r.onClose()},s.onEscape=function(){s.hide(1),r.document.getById(t.id).focus()},this.onBlock&&this.onBlock(s,i),i.onHide=function(){t.on=0,r.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),i=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(n,o){this.getHolderElement=function(){if(!(t=this._.holder)){if(this.isFramed){var e=(t=this.document.getById(this.id+"_frame")).getParent(),t=t.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){this.isLoaded=!0,this.onLoad&&this.onLoad()}),this)),t.write(i.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},s))),t.getWindow().$.CKEDITOR=CKEDITOR,t.on("keydown",(function(e){var t=e.data.getKeystroke(),i=this.document.getById(this.id).getAttribute("dir");(this._.onKeyDown&&!1===this._.onKeyDown(t)||(27==t||t==("rtl"==i?39:37))&&this.onEscape&&!1===this.onEscape(t))&&e.data.preventDefault()}),this),(t=t.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else t=this.document.getById(this.id);this._.holder=t}return t};var s={editorId:n.id,id:this.id,langCode:n.langCode,dir:n.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":n.config.baseFloatZIndex+1};if(this.isFramed){var r=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";s.frame=t.output({id:this.id+"_frame",src:r})}return r=e.output(s),o&&o.push(r),r},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,i=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",i),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))},markFirstDisplayed:function(e){for(var t,i,n=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},o=this._.getItems(),s=o.count()-1;0<=s;s--)if((t=o.getItem(s)).getAscendant(n)||(i=t,this._.focusIndex=s),"true"==t.getAttribute("aria-selected")){i=t,this._.focusIndex=s;break}i&&(e&&e(),CKEDITOR.env.webkit&&i.getDocument().getWindow().focus(),i.focus(),this.onMark&&this.onMark(i))},getItems:function(){return this.element.getElementsByTag("a")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e,t){switch(o=this.keys[e]){case"next":for(var i,n=this._.focusIndex,o=this.element.getElementsByTag("a");i=o.getItem(++n);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=n,i.focus();break}return!i&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(n=this._.focusIndex,o=this.element.getElementsByTag("a");0<n&&(i=o.getItem(--n));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=n,i.focus();break}i=null}return!i&&!t&&(this._.focusIndex=o.count(),this.onKeyDown(e,1));case"click":case"mouseup":return(i=0<=(n=this._.focusIndex)&&this.element.getElementsByTag("a").getItem(n))&&(i.$[o]?i.$[o]():i.$["on"+o]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,i,n,o){function s(){c.hide()}n.forceIFrame=1,n.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(i=CKEDITOR.document.getById("cke_"+t.name));var r=i.getDocument();o=function(t,i,n,o,s){s=CKEDITOR.tools.genKey(i.getUniqueId(),n.getUniqueId(),t.lang.dir,t.uiColor||"",o.css||"",s||"");var r=e[s];return r||((r=e[s]=new CKEDITOR.ui.panel(i,o)).element=n.append(CKEDITOR.dom.element.createFromHtml(r.render(t),i)),r.element.setStyles({display:"none",position:"absolute"})),r}(t,r,i,n,o||0);var a=o.element,l=a.getFirst(),c=this;a.disableContextMenu(),this.element=a,this._={editor:t,panel:o,parentElement:i,definition:n,document:r,iframe:l,children:[],dir:t.lang.dir,showBlockParams:null},t.on("mode",s),t.on("resize",s),r.getWindow().on("resize",(function(){this.reposition()}),this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,i,n,o,s){var r=this._.panel,a=r.showBlock(e);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var c=this.element,u=(l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),c.getDocument()),d=this._.parentElement.getPositionedAncestor(),h=t.getDocumentPosition(u),p=(u=d?d.getDocumentPosition(u):{x:0,y:0},"rtl"==this._.dir),m=h.x+(n||0)-u.x,g=h.y+(o||0)-u.y;!p||1!=i&&4!=i?p||2!=i&&3!=i||(m+=t.$.offsetWidth-1):m+=t.$.offsetWidth,3!=i&&4!=i||(g+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),c.setStyles({top:g+"px",left:0,display:""}),c.setOpacity(0),c.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",(function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))}),this),l.on("focus",(function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)}),this),CKEDITOR.env.iOS&&(l.on("touchstart",(function(){clearTimeout(this._.hideTimeout)}),this),l.on("touchend",(function(){this._.hideTimeout=0,this.focus()}),this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),r.onEscape=CKEDITOR.tools.bind((function(e){if(this.onEscape&&!1===this.onEscape(e))return!1}),this),CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.tools.bind((function(){if((i=c).removeStyle("width"),a.autoSize){var e=a.element.getDocument();e=(CKEDITOR.env.webkit||CKEDITOR.env.edge?a.element:e.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(i.$.offsetWidth||0)-(i.$.clientWidth||0)+3),i.setStyle("width",e+10+"px"),e=a.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(i.$.offsetHeight||0)-(i.$.clientHeight||0)+3),i.setStyle("height",e+"px"),r._.currentBlock.element.setStyle("display","none").removeStyle("display")}else i.removeStyle("height");p&&(m-=c.$.offsetWidth),c.setStyle("left",m+"px"),e=r.element.getWindow();var t,i=c.$.getBoundingClientRect(),n=(e=e.getViewPaneSize(),i.width||i.right-i.left),o=i.height||i.bottom-i.top,l=p?i.right:e.width-i.left,u=p?e.width-i.right:i.left;p?l<n&&(m=u>n?m+n:e.width>n?m-i.left:m-i.right+e.width):l<n&&(m=u>n?m-n:e.width>n?m-i.right+e.width:m-i.left),n=i.top,e.height-i.top<o&&(g=n>o?g-o:e.height>o?g-i.bottom+e.height:g-i.top),CKEDITOR.env.ie&&("html"==(e=i=new CKEDITOR.dom.element(c.$.offsetParent)).getName()&&(e=e.getDocument().getBody()),"rtl"==e.getComputedStyle("direction")&&(m=CKEDITOR.env.ie8Compat?m-2*c.getDocument().getDocumentElement().$.scrollLeft:m-(i.$.scrollWidth-i.$.clientWidth))),(t=(i=c.getFirst()).getCustomData("activePanel"))&&t.onHide&&t.onHide.call(this,1),i.setCustomData("activePanel",this),c.setStyles({top:g+"px",left:m+"px"}),c.setOpacity(1),s&&s()}),this);r.isLoaded?e():r.onLoad=e,CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),a.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){a.markFirstDisplayed?a.markFirstDisplayed():a._.markFirstDisplayed()}),0):a.markFirstDisplayed?a.markFirstDisplayed():a._.markFirstDisplayed(),this._.editor.fire("panelShow",this)}),0,this)}),CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,i,n,o,s){this._.activeChild==e&&e._.panel._.offsetParentId==i.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){this._.focused||this.hide()}),0,this)}),this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,i,n,o,s),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){e.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",(function(){var t,i=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(t in e){var n=e[t];i?n.destroy():n.element.hide()}i&&(e={})}))}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(e){function t(t,r,a,l,c){var u,d=new CKEDITOR.style(o["colorButton_"+r+"Style"]),h=CKEDITOR.tools.getNextId()+"_colorBox";c=c||{},e.ui.add(t,CKEDITOR.UI_PANELBUTTON,{label:a,title:a,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+l,allowedContent:d,requiredContent:d,contentTransformations:c.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":s.panelTitle}},onBlock:function(t,n){u=n,n.autoSize=!0,n.element.addClass("cke_colorblock"),n.element.setHtml(function(t,n,r){t=[];var a=o.colorButton_colors.split(","),l=o.colorButton_colorsPerRow||6,c=e.plugins.colordialog&&!1!==o.colorButton_enableMore,u=a.length+(c?2:1),d=CKEDITOR.tools.addFunction((function(t,n){function s(t){var s=o["colorButton_"+n+"Style"];e.removeStyle(new CKEDITOR.style(s,{color:"inherit"})),s.childRule="back"==n?function(e){return i(e)}:function(e){return!(e.is("a")||e.getElementsByTag("a").count())||i(e)},e.focus(),t&&e.applyStyle(new CKEDITOR.style(s,{color:t})),e.fire("saveSnapshot")}if(e.focus(),e.fire("saveSnapshot"),"?"!=t)return s(t);e.getColorFromDialog((function(e){if(e)return s(e)}))}));for(!1!==o.colorButton_enableAutomatic&&t.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',s.auto,'" onclick="CKEDITOR.tools.callFunction(',d,",null,'",n,"');return false;\" href=\"javascript:void('",s.auto,'\')" role="option" aria-posinset="1" aria-setsize="',u,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td colspan="'+l+'" align="center"><span class="cke_colorbox" id="',r,'"></span>',s.auto,"</td></tr></table></a>"),t.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%">'),r=0;r<a.length;r++){0==r%l&&t.push("</tr><tr>");var h=a[r].split("/"),p=h[0],m=h[1]||p;h[1]?h=p:(p="#"+p.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"),h=e.lang.colorbutton.colors[m]||m),t.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',h,'" onclick="CKEDITOR.tools.callFunction(',d,",'",p,"','",n,"'); return false;\" href=\"javascript:void('",h,'\')" data-value="'+m+'" role="option" aria-posinset="',r+2,'" aria-setsize="',u,'"><span class="cke_colorbox" style="background-color:#',m,'"></span></a></td>')}return c&&t.push('</tr><tr><td colspan="'+l+'" align="center"><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',s.more,'" onclick="CKEDITOR.tools.callFunction(',d,",'?','",n,"');return false;\" href=\"javascript:void('",s.more,"')\"",' role="option" aria-posinset="',u,'" aria-setsize="',u,'">',s.more,"</a></td>"),t.push("</tr></table>"),t.join("")}(t,r,h)),n.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var a=n.keys,l="rtl"==e.lang.dir;a[l?37:39]="next",a[40]="next",a[9]="next",a[l?39:37]="prev",a[38]="prev",a[CKEDITOR.SHIFT+9]="prev",a[32]="click"},refresh:function(){e.activeFilter.check(d)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=(s=e.getSelection())&&s.getStartElement(),i=e.elementPath(t);if(i){t=i.block||i.blockLimit||e.document.getBody();do{i=t&&t.getComputedStyle("back"==r?"background-color":"color")||"transparent"}while("back"==r&&"transparent"==i&&t&&(t=t.getParent()));if(i&&"transparent"!=i||(i="#ffffff"),!1!==o.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(h).setStyle("background-color",i),t=s&&s.getRanges()[0]){var s=new CKEDITOR.dom.walker(t),a=t.collapsed?t.startContainer:s.next();for(t="";a;){if(a.type!==CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),a=n(a.getComputedStyle("back"==r?"background-color":"color")),(t=t||a)!==a){t="";break}a=s.next()}for(s=t,t=u._.getItems(),a=0;a<t.count();a++){var l=t.getItem(a);l.removeAttribute("aria-selected"),s&&s==n(l.getAttribute("data-value"))&&l.setAttribute("aria-selected",!0)}}return i}}})}function i(e){return"false"==e.getAttribute("contentEditable")||e.getAttribute("data-nostyle")}function n(e){return CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(e||"")).replace(/#/g,"")}var o=e.config,s=e.lang.colorbutton;if(!CKEDITOR.env.hc){t("TextColor","fore",s.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(e){return!!e.attributes.color},right:function(e){e.name="span",e.attributes.color&&(e.styles.color=e.attributes.color),delete e.attributes.color}}]]});var r={},a=e.config.colorButton_normalizeBackground;(void 0===a||a)&&(r.contentTransformations=[[{element:"span",left:function(e){var t=CKEDITOR.tools;return!("span"!=e.name||!e.styles||!e.styles.background)&&(e=t.style.parse.background(e.styles.background)).color&&1===t.objectKeys(e).length},right:function(t){var i=new CKEDITOR.style(e.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();return t.name=i.element,t.styles=i.styles,t.attributes=i.attributes||{},t}}]]),t("BGColor","back",s.bgColorTitle,20,r)}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(e){var t=new CKEDITOR.dialogCommand("colordialog");t.editorFocus=!1,e.addCommand("colordialog",t),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),e.getColorFromDialog=function(t,i){var n,o,s;n=function(e){o(this),e="ok"==e.name?this.getValueOf("picker","selectedColor"):null,/^[0-9a-f]{3}([0-9a-f]{3})?$/i.test(e)&&(e="#"+e),t.call(i,e)},o=function(e){e.removeListener("ok",n),e.removeListener("cancel",n)},s=function(e){e.on("ok",n),e.on("cancel",n)},e.execCommand("colordialog"),e._.storedDialogs&&e._.storedDialogs.colordialog?s(e._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",(function(e){if("colordialog"==e.data.name){var t=e.data.definition;e.removeListener(),t.onLoad=CKEDITOR.tools.override(t.onLoad,(function(e){return function(){s(this),t.onLoad=e,"function"==typeof e&&e.call(this)}}))}}))}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(e){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),e.addCommand("templates",new CKEDITOR.dialogCommand("templates")),e.ui.addButton&&e.ui.addButton("Templates",{label:e.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var e={},t={};CKEDITOR.addTemplates=function(t,i){e[t]=i},CKEDITOR.getTemplates=function(t){return e[t]},CKEDITOR.loadTemplates=function(e,i){for(var n=[],o=0,s=e.length;o<s;o++)t[e[o]]||(n.push(e[o]),t[e[o]]=1);n.length?CKEDITOR.scriptLoader.load(n,i):setTimeout(i,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),i=e._.menuGroups={},n=e._.menuItems={},o=0;o<t.length;o++)i[t[o]]=o+1;e.addMenuGroup=function(e,t){i[e]=t||100},e.addMenuItem=function(e,t){i[t.group]&&(n[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return n[e]},e.removeMenuItem=function(e){delete n[e]}}}),function(){var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),e=e+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var t=CKEDITOR.addTemplate("menuItem",e+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),i=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),n=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var i=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),n=i.block.attributes=i.attributes||{};!n.role&&(n.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),i=this.editor.elementPath(),n=this._.listeners;this.removeAll();for(var o=0;o<n.length;o++){var s=n[o](t,e,i);if(s)for(var r in s){var a=this.editor.getMenuItem(r);!a||a.command&&!this.editor.getCommand(a.command).state||(a.state=s[r],this.add(a))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,i=this.items[e];if(i=i.getItems&&i.getItems()){for(var n in t?t.removeAll():((t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),i){var o=this.editor.getMenuItem(n);o&&(o.state=i[n],t.add(o))}var s=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(e));setTimeout((function(){t.show(s,2)}),0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(e,t,i,n){if(this.parent||(this._.onShow(),this.items.length)){t=t||("rtl"==this.editor.lang.dir?2:1);var o=this.items,s=this.editor,r=this._.panel,a=this._.element;r||((r=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind((function(e){if(!1===this._.onEscape(e))return!1}),this),r.onShow=function(){r._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},r.onHide=CKEDITOR.tools.bind((function(){this._.onHide&&this._.onHide()}),this),(a=r.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=a.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==s.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(a=this._.element=a.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction((function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,s.config.menu_subMenuDelay||400,this,[e])}),this),this._.itemOutFn=CKEDITOR.tools.addFunction((function(){clearTimeout(this._.showSubTimeout)}),this),this._.itemClickFn=CKEDITOR.tools.addFunction((function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)}),this)),function(e){e.sort((function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0}))}(o);for(var l=['<div class="cke_menu'+((l=s.elementPath())&&l.direction()!=s.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=o.length,u=c&&o[0].group,d=0;d<c;d++){var h=o[d];u!=h.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),u=h.group),h.render(this,d,l)}l.push("</div>"),a.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(r,this.id,e,t,i,n):r.showBlock(this.id,e,t,i,n),s.fire("menuShow",[r])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)},findItemByCommandName:function(e){var t=CKEDITOR.tools.array.filter(this.items,(function(t){return e===t.command}));return t.length?{item:t=t[0],element:this._.element.findOne("."+t.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,o,s){var r,a,l=e.id+String(o),c=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,u="",d=this.editor,h=c==CKEDITOR.TRISTATE_ON?"on":c==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(c==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var p=this.getItems,m="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=this.icon),this.command&&(r=d.getCommand(this.command),(r=d.getCommandKeystroke(r))&&(a=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,r))),e={id:l,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:h,hasPopup:p?"true":"false",disabled:c==CKEDITOR.TRISTATE_DISABLED,title:this.label+(a?" ("+a.display+")":""),ariaShortcut:a?d.lang.common.keyboardShortcut+" "+a.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:o,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),shortcutHtml:a?n.output({shortcut:a.display}):"",arrowHtml:p?i.output({label:m}):"",role:this.role?this.role:"menuitem",ariaChecked:u},t.output(e,s)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){if(e.on("contextmenu",(function(e){e=e.data;var n=CKEDITOR.env.webkit?i:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!n){if(e.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){n=this.editor;var o=new CKEDITOR.dom.elementPath(e.getTarget(),n.editable()).contains((function(e){return e.hasAttribute("contenteditable")}),!0);o&&"false"==o.getAttribute("contenteditable")&&n.getSelection().fake(o)}o=e.getTarget().getDocument();var s=e.getTarget().getDocument().getDocumentElement(),r=(n=!o.equals(CKEDITOR.document),o=o.getWindow().getScrollPosition(),n?e.$.clientX:e.$.pageX||o.x+e.$.clientX),a=n?e.$.clientY:e.$.pageY||o.y+e.$.clientY;CKEDITOR.tools.setTimeout((function(){this.open(s,null,r,a)}),CKEDITOR.env.ie?200:0,this)}}),this),CKEDITOR.env.webkit){var i,n=function(){i=0};e.on("keydown",(function(e){i=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey})),e.on("keyup",n),e.on("contextmenu",n)}},open:function(e,t,i,n){!1!==this.editor.config.enableContextMenu&&(this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,i,n))}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",(function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)})),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function e(e,t,i,n){var o=new CKEDITOR.dom.walker(e);if(!(e=e.startContainer.getAscendant(t,!0)||e.endContainer.getAscendant(t,!0))||(i(e),!n))for(;(e=o.next())&&(!(e=e.getAscendant(t,!0))||(i(e),!n)););}function t(e,t){var i={ul:"ol",ol:"ul"};return-1!==n(t,(function(t){return t.element===e||t.element===i[e]}))}function i(e){this.styles=null,this.sticky=!1,this.editor=e,this.filter=new CKEDITOR.filter(e.config.copyFormatting_allowRules),!0===e.config.copyFormatting_allowRules&&(this.filter.disabled=!0),e.config.copyFormatting_disallowRules&&this.filter.disallow(e.config.copyFormatting_disallowRules)}var n=CKEDITOR.tools.indexOf,o=CKEDITOR.tools.getMouseButton,s=!1;CKEDITOR.plugins.add("copyformatting",{lang:"az,de,en,it,ja,nb,nl,oc,pl,pt-br,ru,sv,tr,zh,zh-cn",icons:"copyformatting",hidpi:!0,init:function(e){var i=CKEDITOR.plugins.copyformatting;i._addScreenReaderContainer(),s||(CKEDITOR.document.appendStyleSheet(this.path+"styles/copyformatting.css"),s=!0),e.addContentsCss&&e.addContentsCss(this.path+"styles/copyformatting.css"),e.copyFormatting=new i.state(e),e.addCommand("copyFormatting",i.commands.copyFormatting),e.addCommand("applyFormatting",i.commands.applyFormatting),e.ui.addButton("CopyFormatting",{label:e.lang.copyformatting.label,command:"copyFormatting",toolbar:"cleanup,0"}),e.on("contentDom",(function(){var t=e.editable(),i=t.isInline()?t:e.document,n=e.ui.get("CopyFormatting");t.attachListener(i,"mouseup",(function(t){o(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&e.execCommand("applyFormatting")})),t.attachListener(CKEDITOR.document,"mouseup",(function(i){var n=e.getCommand("copyFormatting");o(i)!==CKEDITOR.MOUSE_BUTTON_LEFT||n.state!==CKEDITOR.TRISTATE_ON||t.contains(i.data.getTarget())||e.execCommand("copyFormatting")})),n&&(i=CKEDITOR.document.getById(n._.id),t.attachListener(i,"dblclick",(function(){e.execCommand("copyFormatting",{sticky:!0})})),t.attachListener(i,"mouseup",(function(e){e.data.stopPropagation()})))})),e.config.copyFormatting_keystrokeCopy&&e.setKeystroke(e.config.copyFormatting_keystrokeCopy,"copyFormatting"),e.on("key",(function(t){var i=e.getCommand("copyFormatting");(t=t.data.domEvent).getKeystroke&&27===t.getKeystroke()&&i.state===CKEDITOR.TRISTATE_ON&&e.execCommand("copyFormatting")})),e.copyFormatting.on("extractFormatting",(function(t){var n=t.data.element;return n.contains(e.editable())||n.equals(e.editable())?t.cancel():(n=i._convertElementToStyleDef(n),e.copyFormatting.filter.check(new CKEDITOR.style(n),!0,!0)?void(t.data.styleDef=n):t.cancel())})),e.copyFormatting.on("applyFormatting",(function(o){if(!o.data.preventFormatStripping){var s,r,a=o.data.range,l=i._extractStylesFromRange(e,a),c=i._determineContext(a);if(e.copyFormatting._isContextAllowed(c))for(r=0;r<l.length;r++)c=l[r],s=a.createBookmark(),-1===n(i.preservedElements,c.element)?CKEDITOR.env.webkit&&!CKEDITOR.env.chrome?l[r].removeFromRange(o.data.range,o.editor):l[r].remove(o.editor):t(c.element,o.data.styles)&&i._removeStylesFromElementInRange(a,c.element),a.moveToBookmark(s)}})),e.copyFormatting.on("applyFormatting",(function(t){var i=CKEDITOR.plugins.copyformatting,n=i._determineContext(t.data.range);"list"===n&&e.copyFormatting._isContextAllowed("list")?i._applyStylesToListContext(t.editor,t.data.range,t.data.styles):"table"===n&&e.copyFormatting._isContextAllowed("table")?i._applyStylesToTableContext(t.editor,t.data.range,t.data.styles):e.copyFormatting._isContextAllowed("text")&&i._applyStylesToTextContext(t.editor,t.data.range,t.data.styles)}),null,null,999)}}),i.prototype._isContextAllowed=function(e){var t=this.editor.config.copyFormatting_allowedContexts;return!0===t||-1!==n(t,e)},CKEDITOR.event.implementOn(i.prototype),CKEDITOR.plugins.copyformatting={state:i,inlineBoundary:"h1 h2 h3 h4 h5 h6 p div".split(" "),excludedAttributes:["id","style","href","data-cke-saved-href","dir"],elementsForInlineTransform:["li"],excludedElementsFromInlineTransform:["table","thead","tbody","ul","ol"],excludedAttributesFromInlineTransform:["value","type"],preservedElements:"ul ol li td th tr thead tbody table".split(" "),breakOnElements:["ul","ol","table"],_initialKeystrokePasteCommand:null,commands:{copyFormatting:{exec:function(e,t){var i=CKEDITOR.plugins.copyformatting,n=e.copyFormatting,o=!!t&&"keystrokeHandler"==t.from,s=!!t&&(t.sticky||o),r=i._getCursorContainer(e),a=CKEDITOR.document.getDocumentElement();if(this.state===CKEDITOR.TRISTATE_ON)return n.styles=null,n.sticky=!1,r.removeClass("cke_copyformatting_active"),a.removeClass("cke_copyformatting_disabled"),a.removeClass("cke_copyformatting_tableresize_cursor"),i._putScreenReaderMessage(e,"canceled"),i._detachPasteKeystrokeHandler(e),this.setState(CKEDITOR.TRISTATE_OFF);n.styles=i._extractStylesFromElement(e,e.elementPath().lastElement),this.setState(CKEDITOR.TRISTATE_ON),o||(r.addClass("cke_copyformatting_active"),a.addClass("cke_copyformatting_tableresize_cursor"),e.config.copyFormatting_outerCursor&&a.addClass("cke_copyformatting_disabled")),n.sticky=s,i._putScreenReaderMessage(e,"copied"),i._attachPasteKeystrokeHandler(e)}},applyFormatting:{editorFocus:!(CKEDITOR.env.ie&&!CKEDITOR.env.edge),exec:function(e,t){var i=e.getCommand("copyFormatting"),n=!!t&&"keystrokeHandler"==t.from,o=CKEDITOR.plugins.copyformatting,s=e.copyFormatting,r=o._getCursorContainer(e),a=CKEDITOR.document.getDocumentElement();if(n||i.state===CKEDITOR.TRISTATE_ON){if(n&&!s.styles)return o._putScreenReaderMessage(e,"failed"),o._detachPasteKeystrokeHandler(e),!1;n=o._applyFormat(e,s.styles),s.sticky||(s.styles=null,r.removeClass("cke_copyformatting_active"),a.removeClass("cke_copyformatting_disabled"),a.removeClass("cke_copyformatting_tableresize_cursor"),i.setState(CKEDITOR.TRISTATE_OFF),o._detachPasteKeystrokeHandler(e)),o._putScreenReaderMessage(e,n?"applied":"canceled")}}}},_getCursorContainer:function(e){return e.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?e.editable():e.editable().getParent()},_convertElementToStyleDef:function(e){var t=CKEDITOR.tools,i=e.getAttributes(CKEDITOR.plugins.copyformatting.excludedAttributes);return t=t.parseCssText(e.getAttribute("style"),!0,!0),{element:e.getName(),type:CKEDITOR.STYLE_INLINE,attributes:i,styles:t}},_extractStylesFromElement:function(e,t){var i={},o=[];do{if(t.type===CKEDITOR.NODE_ELEMENT&&!t.hasAttribute("data-cke-bookmark")&&(i.element=t,e.copyFormatting.fire("extractFormatting",i,e)&&i.styleDef&&o.push(new CKEDITOR.style(i.styleDef)),t.getName&&-1!==n(CKEDITOR.plugins.copyformatting.breakOnElements,t.getName())))break}while((t=t.getParent())&&t.type===CKEDITOR.NODE_ELEMENT);return o},_extractStylesFromRange:function(e,t){for(var i,n=[],o=new CKEDITOR.dom.walker(t);i=o.next();)n=n.concat(CKEDITOR.plugins.copyformatting._extractStylesFromElement(e,i));return n},_removeStylesFromElementInRange:function(e,t){for(var i,o=-1!==n(["ol","ul","table"],t),s=new CKEDITOR.dom.walker(e);(i=s.next())&&(!(i=i.getAscendant(t,!0))||(i.removeAttributes(i.getAttributes()),!o)););},_getSelectedWordOffset:function(e){function t(e,t){return e[t?"getPrevious":"getNext"]((function(e){return e.type!==CKEDITOR.NODE_COMMENT}))}function i(e){return e.type==CKEDITOR.NODE_ELEMENT?(e=e.getHtml().replace(/<span.*?>&nbsp;<\/span>/g,"")).replace(/<.*?>/g,""):e.getText()}function o(e,s){var r,a,l=e,c=/\s/g,u="p br ol ul li td th div caption body".split(" "),d=!1,h=!1;do{for(r=t(l,s);!r&&l.getParent();){if(l=l.getParent(),-1!==n(u,l.getName())){h=d=!0;break}r=t(l,s)}if(r&&r.getName&&-1!==n(u,r.getName())){d=!0;break}l=r}while(l&&l.getStyle&&("none"==l.getStyle("display")||!l.getText()));for(l||(l=e);l.type!==CKEDITOR.NODE_TEXT;)l=!d||s||h?l.getChild(0):l.getChild(l.getChildCount()-1);for(u=i(l);null!=(h=c.exec(u))&&(a=h.index,s););if("number"!=typeof a&&!d)return o(l,s);if(d)a=s?0:(h=(c=/([\.\b]*$)/).exec(u))?h.index:u.length;else if(s&&(a+=1)>u.length)return o(l);return{node:l,offset:a}}var s,r,a,l,c,u=/\b\w+\b/gi;for(s=i(a=l=c=e.startContainer);null!=(r=u.exec(s));)if(r.index+r[0].length>=e.startOffset)return e=r.index,u=r.index+r[0].length,0===r.index&&(l=(r=o(a,!0)).node,e=r.offset),u>=s.length&&(c=(s=o(a)).node,u=s.offset),{startNode:l,startOffset:e,endNode:c,endOffset:u};return null},_filterStyles:function(e){var t,i,n=CKEDITOR.tools.isEmpty,o=[];for(i=0;i<e.length;i++)t=e[i]._.definition,-1!==CKEDITOR.tools.indexOf(CKEDITOR.plugins.copyformatting.inlineBoundary,t.element)&&(t.element=e[i].element="span"),"span"===t.element&&n(t.attributes)&&n(t.styles)||o.push(e[i]);return o},_determineContext:function(e){function t(t){var i,n=new CKEDITOR.dom.walker(e);if(e.startContainer.getAscendant(t,!0)||e.endContainer.getAscendant(t,!0))return!0;for(;i=n.next();)if(i.getAscendant(t,!0))return!0}return t({ul:1,ol:1})?"list":t("table")?"table":"text"},_applyStylesToTextContext:function(e,t,i){var o,s,r=CKEDITOR.plugins.copyformatting,a=r.excludedAttributesFromInlineTransform;for(CKEDITOR.env.webkit&&!CKEDITOR.env.chrome&&e.getSelection().selectRanges([t]),o=0;o<i.length;o++)if(t=i[o],-1===n(r.excludedElementsFromInlineTransform,t.element)){if(-1!==n(r.elementsForInlineTransform,t.element))for(t.element=t._.definition.element="span",s=0;s<a.length;s++)t._.definition.attributes[a[s]]&&delete t._.definition.attributes[a[s]];t.apply(e)}},_applyStylesToListContext:function(t,i,n){var o,s,r;for(r=0;r<n.length;r++)o=n[r],s=i.createBookmark(),"ol"===o.element||"ul"===o.element?e(i,{ul:1,ol:1},(function(e){var t=o;e.getName()!==t.element&&e.renameNode(t.element),t.applyToObject(e)}),!0):"li"===o.element?e(i,"li",(function(e){o.applyToObject(e)})):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,i,[o]),i.moveToBookmark(s)},_applyStylesToTableContext:function(t,i,o){function s(e,t){e.getName()!==t.element&&((t=t.getDefinition()).element=e.getName(),t=new CKEDITOR.style(t)),t.applyToObject(e)}var r,a,l;for(l=0;l<o.length;l++)r=o[l],a=i.createBookmark(),-1!==n(["table","tr"],r.element)?e(i,r.element,(function(e){r.applyToObject(e)})):-1!==n(["td","th"],r.element)?e(i,{td:1,th:1},(function(e){s(e,r)})):-1!==n(["thead","tbody"],r.element)?e(i,{thead:1,tbody:1},(function(e){s(e,r)})):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,i,[r]),i.moveToBookmark(a)},_applyFormat:function(e,t){var i,n,o=e.getSelection().getRanges()[0],s=CKEDITOR.plugins.copyformatting;if(!o)return!1;if(o.collapsed){if(n=e.getSelection().createBookmarks(),!(i=s._getSelectedWordOffset(o)))return;(o=e.createRange()).setStart(i.startNode,i.startOffset),o.setEnd(i.endNode,i.endOffset),o.select()}return t=s._filterStyles(t),!!e.copyFormatting.fire("applyFormatting",{styles:t,range:o,preventFormatStripping:!1},e)&&(n&&e.getSelection().selectBookmarks(n),!0)},_putScreenReaderMessage:function(e,t){var i=this._getScreenReaderContainer();i&&i.setText(e.lang.copyformatting.notification[t])},_addScreenReaderContainer:function(){return this._getScreenReaderContainer()?this._getScreenReaderContainer():CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?void 0:CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml('<div class="cke_screen_reader_only cke_copyformatting_notification"><div aria-live="polite"></div></div>')).getChild(0)},_getScreenReaderContainer:function(){if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().findOne(".cke_copyformatting_notification div[aria-live]")},_attachPasteKeystrokeHandler:function(e){var t=e.config.copyFormatting_keystrokePaste;t&&(this._initialKeystrokePasteCommand=e.keystrokeHandler.keystrokes[t],e.setKeystroke(t,"applyFormatting"))},_detachPasteKeystrokeHandler:function(e){var t=e.config.copyFormatting_keystrokePaste;t&&e.setKeystroke(t,this._initialKeystrokePasteCommand||!1)}},CKEDITOR.config.copyFormatting_outerCursor=!0,CKEDITOR.config.copyFormatting_allowRules="b s u i em strong span p div td th ol ul li(*)[*]{*}",CKEDITOR.config.copyFormatting_disallowRules="*[data-cke-widget*,data-widget*,data-cke-realelement](cke_widget*)",CKEDITOR.config.copyFormatting_allowedContexts=!0,CKEDITOR.config.copyFormatting_keystrokeCopy=CKEDITOR.CTRL+CKEDITOR.SHIFT+67,CKEDITOR.config.copyFormatting_keystrokePaste=CKEDITOR.CTRL+CKEDITOR.SHIFT+86}(),CKEDITOR.plugins.add("div",{requires:"dialog",init:function(e){if(!e.blockless){var t=e.lang.div,i="div(*)";CKEDITOR.dialog.isTabEnabled(e,"editdiv","advanced")&&(i+=";div[dir,id,lang,title]{*}"),e.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:i,requiredContent:"div",contextSensitive:!0,contentTransformations:[["div: alignmentToStyle"]],refresh:function(e,t){this.setState("div"in(e.config.div_wrapTable?t.root:t.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),e.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),e.addCommand("removediv",{requiredContent:"div",exec:function(e){function t(t){(t=CKEDITOR.plugins.div.getSurroundDiv(e,t))&&!t.data("cke-div-added")&&(r.push(t),t.data("cke-div-added"))}for(var i,n=e.getSelection(),o=n&&n.getRanges(),s=n.createBookmarks(),r=[],a=0;a<o.length;a++)(i=o[a]).collapsed?t(n.getStartElement()):((i=new CKEDITOR.dom.walker(i)).evaluator=t,i.lastForward());for(a=0;a<r.length;a++)r[a].remove(!0);n.selectBookmarks(s)}}),e.ui.addButton&&e.ui.addButton("CreateDiv",{label:t.toolbar,command:"creatediv",toolbar:"blocks,50"}),e.addMenuItems&&(e.addMenuItems({editdiv:{label:t.edit,command:"editdiv",group:"div",order:1},removediv:{label:t.remove,command:"removediv",group:"div",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(t){return!t||t.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}))),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function(e,t){var i=e.elementPath(t);return e.elementPath(i.blockLimit).contains((function(e){return e.is("div")&&!e.isReadOnly()}),1)}},CKEDITOR.plugins.add("resize",{init:function(e){function t(t){var i=a.width,o=a.height,l=i+(t.data.$.screenX-r.x)*("rtl"==s?-1:1);t=o+(t.data.$.screenY-r.y),c&&(i=Math.max(n.resize_minWidth,Math.min(l,n.resize_maxWidth))),u&&(o=Math.max(n.resize_minHeight,Math.min(t,n.resize_maxHeight))),e.resize(c?i:null,o)}function i(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",i),e.document&&(e.document.removeListener("mousemove",t),e.document.removeListener("mouseup",i))}var n=e.config,o=e.ui.spaceId("resizer"),s=e.element?e.element.getDirection(1):"ltr";if(!n.resize_dir&&(n.resize_dir="vertical"),void 0===n.resize_maxWidth&&(n.resize_maxWidth=3e3),void 0===n.resize_maxHeight&&(n.resize_maxHeight=3e3),void 0===n.resize_minWidth&&(n.resize_minWidth=750),void 0===n.resize_minHeight&&(n.resize_minHeight=250),!1!==n.resize_enabled){var r,a,l=null,c=("both"==n.resize_dir||"horizontal"==n.resize_dir)&&n.resize_minWidth!=n.resize_maxWidth,u=("both"==n.resize_dir||"vertical"==n.resize_dir)&&n.resize_minHeight!=n.resize_maxHeight,d=CKEDITOR.tools.addFunction((function(o){l||(l=e.getResizable()),a={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},r={x:o.screenX,y:o.screenY},n.resize_minWidth>a.width&&(n.resize_minWidth=a.width),n.resize_minHeight>a.height&&(n.resize_minHeight=a.height),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),e.document&&(e.document.on("mousemove",t),e.document.on("mouseup",i)),o.preventDefault&&o.preventDefault()}));e.on("destroy",(function(){CKEDITOR.tools.removeFunction(d)})),e.on("uiSpace",(function(t){if("bottom"==t.data.space){var i="";c&&!u&&(i=" cke_resizer_horizontal"),!c&&u&&(i=" cke_resizer_vertical");var n='<span id="'+o+'" class="cke_resizer'+i+" cke_resizer_"+s+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+d+', event)">'+("ltr"==s?"◢":"◣")+"</span>";"ltr"==s&&"ltr"==i?t.data.html+=n:t.data.html=n+t.data.html}}),e,null,100),e.on("maximize",(function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()}))}}}),function(){var e={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+t+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",(function(n){"bottom"==n.data.space&&function(t,n){function o(e){var i;(e=l.list[e]).equals(t.editable())||"true"==e.getAttribute("contenteditable")?((i=t.createRange()).selectNodeContents(e),i=i.select()):(i=t.getSelection()).selectElement(e),CKEDITOR.env.ie&&t.fire("selectionChange",{selection:i,path:new CKEDITOR.dom.elementPath(e)}),t.focus()}function s(){r&&r.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var r,a=t.ui.spaceId("path"),l=t._.elementsPath,c=l.idBase;n.html+='<span id="'+a+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+a+'" class="cke_path" role="group" aria-labelledby="'+a+'_label"><span class="cke_path_empty">&nbsp;</span></span>',t.on("uiReady",(function(){var e=t.ui.space("path");e&&t.focusManager.add(e,1)})),l.onClick=o;var u=CKEDITOR.tools.addFunction(o),d=CKEDITOR.tools.addFunction((function(e,i){var n,s=l.idBase;switch(i=new CKEDITOR.dom.event(i),n="rtl"==t.lang.dir,i.getKeystroke()){case n?39:37:case 9:return(n=CKEDITOR.document.getById(s+(e+1)))||(n=CKEDITOR.document.getById(s+"0")),n.focus(),!1;case n?37:39:case CKEDITOR.SHIFT+9:return(n=CKEDITOR.document.getById(s+(e-1)))||(n=CKEDITOR.document.getById(s+(l.list.length-1))),n.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return o(e),!1}return!0}));t.on("selectionChange",(function(e){for(var n=[],o=l.list=[],s=[],h=l.filters,p=!0,m=e.data.path.elements,g=m.length;g--;){var f=m[g],y=0;e=f.data("cke-display-name")?f.data("cke-display-name"):f.data("cke-real-element-type")?f.data("cke-real-element-type"):f.getName(),(p=f.hasAttribute("contenteditable")?"true"==f.getAttribute("contenteditable"):p)||f.hasAttribute("contenteditable")||(y=1);for(var b=0;b<h.length;b++){var v=h[b](f,e);if(!1===v){y=1;break}e=v||e}y||(o.unshift(f),s.unshift(e))}for(o=o.length,h=0;h<o;h++)e=s[h],p=t.lang.elementspath.eleTitle.replace(/%1/,e),e=i.output({id:c+h,label:p,text:e,jsTitle:"javascript:void('"+e+"')",index:h,keyDownFn:d,clickFn:u}),n.unshift(e);r||(r=CKEDITOR.document.getById(a)),(s=r).setHtml(n.join("")+'<span class="cke_path_empty">&nbsp;</span>'),t.fire("elementsPathUpdate",{space:s})})),t.on("readOnly",s),t.on("contentDomUnload",s),t.addCommand("elementsPathFocus",e.toolbarFocus),t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}(t,n.data)}))}})}(),function(){function e(e,t,i){if(i=e.config.forceEnterMode||i,"wysiwyg"==e.mode){t||(t=e.activeEnterMode);var s=e.elementPath();s&&!s.isContextFor("p")&&(t=CKEDITOR.ENTER_BR,i=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?n(e,t,null,i):o(e,t,null,i),e.fire("saveSnapshot")}}function t(e){for(var t=(e=e.getSelection().getRanges(!0)).length-1;0<t;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var i,n,o,s,r=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,i,o,l){if(o=o||t(e)){o=function(e){var t=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")}),!0);return e.root.equals(t)?e:((t=new CKEDITOR.dom.range(t)).moveToRange(e),t)}(o);var c,u=o.document,d=o.checkStartOfBlock(),h=o.checkEndOfBlock(),p=e.elementPath(o.startContainer),m=p.block,g=i==CKEDITOR.ENTER_DIV?"div":"p";if(d&&h){if(m&&(m.is("li")||m.getParent().is("li"))){m.is("li")||(m=m.getParent()),c=(o=m.getParent()).getParent(),l=!m.hasPrevious(),h=!m.hasNext(),d=(g=e.getSelection()).createBookmarks();var f=m.getDirection(1),y=m.getAttribute("class"),b=m.getAttribute("style"),v=c.getDirection(1)!=f;if(e=e.enterMode!=CKEDITOR.ENTER_BR||v||b||y,c.is("li"))l||h?(l&&h&&o.remove(),m[h?"insertAfter":"insertBefore"](c)):m.breakParent(c);else{if(e)p.block.is("li")?(c=u.createElement(i==CKEDITOR.ENTER_P?"p":"div"),v&&c.setAttribute("dir",f),b&&c.setAttribute("style",b),y&&c.setAttribute("class",y),m.moveChildren(c)):c=p.block,l||h?c[l?"insertBefore":"insertAfter"](o):(m.breakParent(o),c.insertAfter(o));else if(m.appendBogus(!0),l||h)for(;u=m[l?"getFirst":"getLast"]();)u[l?"insertBefore":"insertAfter"](o);else for(m.breakParent(o);u=m.getLast();)u.insertAfter(o);m.remove()}return void g.selectBookmarks(d)}if(m&&m.getParent().is("blockquote"))return m.breakParent(m.getParent()),m.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getPrevious().remove(),m.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getNext().remove(),o.moveToElementEditStart(m),void o.select()}else if(m&&m.is("pre")&&!h)return void n(e,i,o,l);if(b=o.splitBlock(g)){if(e=b.previousBlock,m=b.nextBlock,d=b.wasStartOfBlock,h=b.wasEndOfBlock,m?(f=m.getParent()).is("li")&&(m.breakParent(f),m.move(m.getNext(),1)):e&&(f=e.getParent())&&f.is("li")&&(e.breakParent(f),f=e.getNext(),o.moveToElementEditStart(f),e.move(e.getPrevious())),d||h)if(function(e){var t;return e!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],p.lastElement.getName())&&1===p.lastElement.getChildCount()&&((t=(e=p.lastElement.getChild(0).clone(!0)).getBogus())&&t.remove(),!e.getText().length)}(i))o.moveToElementEditStart(o.getTouchedStartNode());else{if(e?(e.is("li")||!s.test(e.getName())&&!e.is("pre"))&&(c=e.clone()):m&&(c=m.clone()),c?l&&!c.is("li")&&c.renameNode(g):f&&f.is("li")?c=f:(c=u.createElement(g),e&&(y=e.getDirection())&&c.setAttribute("dir",y)),u=b.elementPath)for(i=0,l=u.elements.length;i<l&&!(g=u.elements[i]).equals(u.block)&&!g.equals(u.blockLimit);i++)CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),c.moveChildren(g),c.append(g));c.appendBogus(),c.getParent()||o.insertNode(c),c.is("li")&&c.removeAttribute("value"),!CKEDITOR.env.ie||!d||h&&e.getChildCount()||(o.moveToElementEditStart(h?e:c),o.select()),o.moveToElementEditStart(d&&!h?m:c)}else m.is("li")&&((c=o.clone()).selectNodeContents(m),(c=new CKEDITOR.dom.walker(c)).evaluator=function(e){return!(a(e)||r(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(f=c.next())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText(" ")).insertBefore(f)),m&&o.moveToElementEditStart(m);o.select(),o.scrollIntoView()}}},enterBr:function(e,i,n,r){if(n=n||t(e)){var a=n.document,l=n.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),u=c.block,d=u&&c.block.getName();r||"li"!=d?(!r&&l&&s.test(d)?(l=u.getDirection())?((a=a.createElement("div")).setAttribute("dir",l),a.insertAfter(u),n.setStart(a,0)):(a.createElement("br").insertAfter(u),CKEDITOR.env.gecko&&a.createText("").insertAfter(u),n.setStartAt(u.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?a.createText("\r"):a.createElement("br"),n.deleteContents(),n.insertNode(e),CKEDITOR.env.needsBrFiller?(a.createText("\ufeff").insertAfter(e),l&&(u||c.blockLimit).appendBogus(),e.getNext().$.nodeValue="",n.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):o(e,i,n,r)}}},i=CKEDITOR.plugins.enterkey,n=i.enterBr,o=i.enterBlock,s=/^h[1-6]$/}(),function(){function e(e,t){var i={},n=[],o={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,(function(e,s){var r=t?"&"+s+";":o[s];return i[r]=t?o[s]:"&"+s+";",n.push(r),""})),!t&&e){e=e.split(",");var s,r=document.createElement("div");for(r.innerHTML="&"+e.join(";&")+";",s=r.innerHTML,r=null,r=0;r<s.length;r++){var a=s.charAt(r);i[a]="&"+e[r]+";",n.push(a)}}return i.regex=n.join(t?"|":""),i}CKEDITOR.plugins.add("entities",{afterInit:function(t){function i(e){return l[e]}function n(e){return"force"!=o.entities_processNumerical&&r[e]?r[e]:"&#"+e.charCodeAt(0)+";"}var o=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var s=[];!1!==o.basicEntities&&s.push("nbsp,gt,lt,amp"),o.entities&&(s.length&&s.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&s.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&s.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&s.push(o.entities_additional));var r=e(s.join(",")),a=r.regex?"["+r.regex+"]":"a^";delete r.regex,o.entities&&o.entities_processNumerical&&(a="[^ -~]|"+a),a=new RegExp(a,"g");var l=e("nbsp,gt,lt,amp,shy",!0),c=new RegExp(l.regex,"g");t.addRules({text:function(e){return e.replace(c,i).replace(a,n)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,i,n){i=i||"70%","string"==typeof(t=t||"80%")&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof i&&1<i.length&&"%"==i.substr(i.length-1,1)&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10)),640>t&&(t=640),420>i&&(i=420);var o=parseInt((window.screen.height-i)/2,10),s=parseInt((window.screen.width-t)/2,10);n=(n||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+i+",top="+o+",left="+s;var r=window.open("",null,n,!0);if(!r)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(r.moveTo(s,o),r.resizeTo(t,i)),r.focus(),r.location.href=e}catch(t){window.open(e,null,n,!0)}return!0}}),function(){function e(e){this.editor=e,this.loaders=[]}function t(e,t,n){var o=e.config.fileTools_defaultFileName;this.editor=e,this.lang=e.lang,"string"==typeof t?(this.data=t,this.file=function(e){var t=e.match(i)[1];e=e.replace(i,""),e=atob(e);var n,o,s,r,a=[];for(n=0;n<e.length;n+=512){for(o=e.slice(n,n+512),s=Array(o.length),r=0;r<o.length;r++)s[r]=o.charCodeAt(r);o=new Uint8Array(s),a.push(o)}return new Blob(a,{type:t})}(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=t,this.total=this.file.size,this.loaded=0),n?this.fileName=n:this.file.name?this.fileName=this.file.name:(e=this.file.type.split("/"),o&&(e[0]=o),this.fileName=e.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}CKEDITOR.plugins.add("filetools",{beforeInit:function(t){t.uploadRepository=new e(t),t.on("fileUploadRequest",(function(e){var t=e.data.fileLoader;t.xhr.open("POST",t.uploadUrl,!0),e.data.requestData.upload={file:t.file,name:t.fileName}}),null,null,5),t.on("fileUploadRequest",(function(e){var i=e.data.fileLoader,n=new FormData;e=e.data.requestData;var o,s,r=t.config.fileTools_requestHeaders;for(s in e){var a=e[s];"object"==typeof a&&a.file?n.append(s,a.file,a.name):n.append(s,a)}if(n.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),r)for(o in r)i.xhr.setRequestHeader(o,r[o]);i.xhr.send(n)}),null,null,999),t.on("fileUploadResponse",(function(e){var t=e.data.fileLoader,i=t.xhr,n=e.data;try{var o=JSON.parse(i.responseText);if(o.error&&o.error.message&&(n.message=o.error.message),o.uploaded)for(var s in o)n[s]=o[s];else e.cancel()}catch(o){n.message=t.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:i.responseText}),e.cancel()}}),null,null,999)}}),e.prototype={create:function(e,i,n){n=n||t;var o=this.loaders.length;return(e=new n(this.editor,e,i)).id=o,this.loaders[o]=e,this.fire("instanceCreated",e),e},isFinished:function(){for(var e=0;e<this.loaders.length;++e)if(!this.loaders[e].isFinished())return!1;return!0}},t.prototype={loadAndUpload:function(e,t){var i=this;this.once("loaded",(function(n){n.cancel(),i.once("update",(function(e){e.cancel()}),null,null,0),i.upload(e,t)}),null,null,0),this.load()},load:function(){var e=this,t=this.reader=new FileReader;e.changeStatus("loading"),this.abort=function(){e.reader.abort()},t.onabort=function(){e.changeStatus("abort")},t.onerror=function(){e.message=e.lang.filetools.loadError,e.changeStatus("error")},t.onprogress=function(t){e.loaded=t.loaded,e.update()},t.onload=function(){e.loaded=e.total,e.data=t.result,e.changeStatus("loaded")},t.readAsDataURL(this.file)},upload:function(e,t){var i=t||{};e?(this.uploadUrl=e,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:i})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function e(){"error"!=i.status&&(i.message=i.lang.filetools.networkError,i.changeStatus("error"))}function t(){"abort"!=i.status&&i.changeStatus("abort")}var i=this,n=this.xhr;i.abort=function(){n.abort(),t()},n.onerror=e,n.onabort=t,n.upload?(n.upload.onprogress=function(e){e.lengthComputable&&(i.uploadTotal||(i.uploadTotal=e.total),i.uploaded=e.loaded,i.update())},n.upload.onerror=e,n.upload.onabort=t):(i.uploadTotal=i.total,i.update()),n.onload=function(){if(i.update(),"abort"!=i.status)if(i.uploaded=i.uploadTotal,200>n.status||299<n.status)i.message=i.lang.filetools["httpError"+n.status],i.message||(i.message=i.lang.filetools.httpError.replace("%1",n.status)),i.changeStatus("error");else{for(var e={fileLoader:i},t=["message","fileName","url"],o=i.editor.fire("fileUploadResponse",e),s=0;s<t.length;s++){var r=t[s];"string"==typeof e[r]&&(i[r]=e[r])}i.responseData=e,delete i.responseData.fileLoader,!1===o?i.changeStatus("error"):i.changeStatus("uploaded")}}},changeStatus:function(e){this.status=e,"error"!=e&&"abort"!=e&&"loaded"!=e&&"uploaded"!=e||(this.abort=function(){}),this.fire(e),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.event.implementOn(t.prototype);var i=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:e,fileLoader:t,getUploadUrl:function(e,t){var i=CKEDITOR.tools.capitalize;return t&&e[t+"UploadUrl"]?e[t+"UploadUrl"]:e.uploadUrl?e.uploadUrl:t&&e["filebrowser"+i(t,1)+"UploadUrl"]?e["filebrowser"+i(t,1)+"UploadUrl"]+"&responseType=json":e.filebrowserUploadUrl?e.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(e,t){return!!e.type.match(t)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function e(e,t){var i=[];if(!t)return e;for(var n in t)i.push(n+"="+encodeURIComponent(t[n]));return e+(-1!=e.indexOf("?")?"&":"?")+i.join("&")}function t(t){return!t.match(/command=QuickUpload/)||t.match(/(\?|&)responseType=json/)?t:e(t,{responseType:"json"})}function i(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function n(){var t=(o=this.getDialog()).getParentEditor();t._.filebrowserSe=this;var n=t.config["filebrowser"+i(o.getName())+"WindowWidth"]||t.config.filebrowserWindowWidth||"80%",o=t.config["filebrowser"+i(o.getName())+"WindowHeight"]||t.config.filebrowserWindowHeight||"70%",s=this.filebrowser.params||{};s.CKEditor=t.name,s.CKEditorFuncNum=t._.filebrowserFn,s.langCode||(s.langCode=t.langCode),s=e(this.filebrowser.url,s),t.popup(s,n,o,t.config.filebrowserWindowFeatures||t.config.fileBrowserWindowFeatures)}function o(e){var t=new CKEDITOR.dom.element(e.$.form);t&&((e=t.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):((e=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),t.append(e)),e.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function s(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!e.getContentElement(this.for[0],this.for[1]).getAction())}function r(t,i,n){var o=n.params||{};o.CKEditor=t.name,o.CKEditorFuncNum=t._.filebrowserFn,o.langCode||(o.langCode=t.langCode),i.action=e(n.url,o),i.filebrowser=n}function a(e,c,d,h){if(h&&h.length)for(var p,m=h.length;m--;)if("hbox"!=(p=h[m]).type&&"vbox"!=p.type&&"fieldset"!=p.type||a(e,c,d,p.children),p.filebrowser)if("string"==typeof p.filebrowser&&(p.filebrowser={action:"fileButton"==p.type?"QuickUpload":"Browse",target:p.filebrowser}),"Browse"==p.filebrowser.action){var g=p.filebrowser.url;void 0===g&&void 0===(g=e.config["filebrowser"+i(c)+"BrowseUrl"])&&(g=e.config.filebrowserBrowseUrl),g&&(p.onClick=n,p.filebrowser.url=g,p.hidden=!1)}else if("QuickUpload"==p.filebrowser.action&&p.for&&(void 0===(g=p.filebrowser.url)&&void 0===(g=e.config["filebrowser"+i(c)+"UploadUrl"])&&(g=e.config.filebrowserUploadUrl),g)){var f=p.onClick;p.onClick=function(i){var n=i.sender,r=n.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),a=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!f||!1!==f.call(n,i))&&!!s.call(n,i)&&("form"!==e.config.filebrowserUploadMethod&&a?((i=e.uploadRepository.create(r.$.files[0])).on("uploaded",(function(e){var t=e.sender.responseData;u.call(e.sender.editor,t.url,t.message)})),i.on("error",l.bind(this)),i.on("abort",l.bind(this)),i.loadAndUpload(t(g)),"xhr"):(o(r),!0))},p.filebrowser.url=g,p.hidden=!1,r(e,d.getContents(p.for[0]).get(p.for[1]),p.filebrowser)}}function l(e){var t={};try{t=JSON.parse(e.sender.xhr.response)||{}}catch(e){}this.enable(),alert(t.error?t.error.message:e.sender.message)}function c(e,t,i){if(-1!==i.indexOf(";")){i=i.split(";");for(var n=0;n<i.length;n++)if(c(e,t,i[n]))return!0;return!1}return(e=e.getContents(t).get(i).filebrowser)&&e.url}function u(e,t){var i=this._.filebrowserSe.getDialog(),n=this._.filebrowserSe.for,o=this._.filebrowserSe.filebrowser.onSelect;n&&i.getContentElement(n[0],n[1]).reset(),"function"==typeof t&&!1===t.call(this._.filebrowserSe)||o&&!1===o.call(this._.filebrowserSe,e,t)||("string"==typeof t&&t&&alert(t),e&&(i=(n=this._.filebrowserSe).getDialog(),n=n.filebrowser.target||null)&&(n=n.split(":"),(o=i.getContentElement(n[0],n[1]))&&(o.setValue(e),i.selectPage(n[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(u,e),e.on("destroy",(function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)}))}}),CKEDITOR.on("dialogDefinition",(function(e){if(e.editor.plugins.filebrowser)for(var t,i=e.data.definition,n=0;n<i.contents.length;++n)(t=i.contents[n])&&(a(e.editor,e.data.name,i,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!c(i,t.id,t.filebrowser)))}))}(),CKEDITOR.plugins.add("find",{requires:"dialog",init:function(e){var t=e.addCommand("find",new CKEDITOR.dialogCommand("find")),i=e.addCommand("replace",new CKEDITOR.dialogCommand("find",{tabId:"replace"}));t.canUndo=!1,t.readOnly=1,i.canUndo=!1,e.ui.addButton&&(e.ui.addButton("Find",{label:e.lang.find.find,command:"find",toolbar:"find,10"}),e.ui.addButton("Replace",{label:e.lang.find.replace,command:"replace",toolbar:"find,20"})),CKEDITOR.dialog.add("find",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function e(e,t){var i=n.exec(e),o=n.exec(t);if(i){if(!i[2]&&"px"==o[2])return o[1];if("px"==i[2]&&!o[2])return o[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,i=CKEDITOR.tools.cssLength,n=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(i){var n=i.attributes;if((n=(n=(n=n&&n["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(n)))&&n.children[0])&&i.attributes["data-cke-resizable"]){var o=new t(i).rules;i=n.attributes;var s=o.width;o=o.height,s&&(i.width=e(i.width,s)),o&&(i.height=e(i.height,o))}return n}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(o,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,n,o,s){var r=(r=this.lang.fakeobjects)[o]||r.unknown;return n={class:n,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:r,title:r,align:e.getAttribute("align")||""},CKEDITOR.env.hc||(n.src=CKEDITOR.tools.transparentImageData),o&&(n["data-cke-real-element-type"]=o),s&&(n["data-cke-resizable"]=s,o=new t,s=e.getAttribute("width"),e=e.getAttribute("height"),s&&(o.rules.width=i(s)),e&&(o.rules.height=i(e)),o.populate(n)),this.document.createElement("img",{attributes:n})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,n,o,s){var r,a=(a=this.lang.fakeobjects)[o]||a.unknown;return r=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(r),r=r.getHtml(),n={class:n,"data-cke-realelement":encodeURIComponent(r),"data-cke-real-node-type":e.type,alt:a,title:a,align:e.attributes.align||""},CKEDITOR.env.hc||(n.src=CKEDITOR.tools.transparentImageData),o&&(n["data-cke-real-element-type"]=o),s&&(n["data-cke-resizable"]=s,s=e.attributes,e=new t,o=s.width,s=s.height,void 0!==o&&(e.rules.width=i(o)),void 0!==s&&(e.rules.height=i(s)),e.populate(n)),new CKEDITOR.htmlParser.element("img",n)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var i=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var n=t.getStyle("width");t=t.getStyle("height"),n&&i.setAttribute("width",e(i.getAttribute("width"),n)),t&&i.setAttribute("height",e(i.getAttribute("height"),t))}return i}}(),function(){function e(e){return"application/x-shockwave-flash"==(e=e.attributes).type||i.test(e.src||"")}function t(e,t){return e.createFakeParserElement(t,"cke_flash","flash",!0)}var i=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(e,"flash","properties")&&(t+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]"),CKEDITOR.dialog.isTabEnabled(e,"flash","advanced")&&(t+=";object[id]{*}; embed[bgcolor]{*}(*)"),e.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:t,requiredContent:"embed"})),e.ui.addButton&&e.ui.addButton("Flash",{label:e.lang.common.flash,command:"flash",toolbar:"insert,20"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),e.addMenuItems&&e.addMenuItems({flash:{label:e.lang.flash.properties,command:"flash",group:"flash"}}),e.on("doubleclick",(function(e){var t=e.data.element;t.is("img")&&"flash"==t.data("cke-real-element-type")&&(e.data.dialog="flash")})),e.contextMenu&&e.contextMenu.addListener((function(e){if(e&&e.is("img")&&!e.isReadOnly()&&"flash"==e.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}}))},afterInit:function(i){var n=i.dataProcessor;(n=n&&n.dataFilter)&&n.addRules({elements:{"cke:object":function(n){var o=n.attributes;if(!(o.classid&&String(o.classid).toLowerCase()||e(n))){for(o=0;o<n.children.length;o++)if("cke:embed"==n.children[o].name){if(!e(n.children[o]))break;return t(i,n)}return null}return t(i,n)},"cke:embed":function(n){return e(n)?t(i,n):null}}},5)}})}(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){var e=CKEDITOR.document.getWindow(),t=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(i){i.on("loaded",(function(){!function(i){var n=i.config,o=i.fire("uiSpace",{space:"top",html:""}).html,s=function(){function o(e,i,n){a.setStyle(i,t(n)),a.setStyle("position",e)}function r(e){var t=c.getDocumentPosition();switch(e){case"top":o("absolute","top",t.y-p-f);break;case"pin":o("fixed","top",b);break;case"bottom":o("absolute","top",t.y+(d.height||d.bottom-d.top)+f)}l=e}var l,c,u,d,h,p,m,g=n.floatSpaceDockedOffsetX||0,f=n.floatSpaceDockedOffsetY||0,y=n.floatSpacePinnedOffsetX||0,b=n.floatSpacePinnedOffsetY||0;return function(o){if(c=i.editable()){var b=o&&"focus"==o.name;b&&a.show(),i.fire("floatingSpaceLayout",{show:b}),a.removeStyle("left"),a.removeStyle("right"),u=a.getClientRect(),d=c.getClientRect(),h=e.getViewPaneSize(),p=u.height,m="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(p+f<=d.top?r("top"):p+f>h.height-d.bottom?r("pin"):r("bottom"),o=h.width/2,o=n.floatSpacePreferRight?"right":0<d.left&&d.right<h.width&&d.width>u.width?"rtl"==n.contentsLangDirection?"right":"left":o-d.left>d.right-o?"left":"right",u.width>h.width?(o="left",b=0):(b="left"==o?0<d.left?d.left:0:d.right<h.width?h.width-d.right:0)+u.width>h.width&&(o="left"==o?"right":"left",b=0),a.setStyle(o,t(("pin"==l?y:g)+b+("pin"==l?0:"left"==o?m:-m)))):(l="pin",r("pin"),s(o))}}}();if(o){var r=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(i.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(i.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),a=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(r.output({content:o,id:i.id,langDir:i.lang.dir,langCode:i.langCode,name:i.name,style:"display:none;z-index:"+(n.baseFloatZIndex-1),topId:i.ui.spaceId("top"),voiceLabel:i.title}))),l=CKEDITOR.tools.eventsBuffer(500,s),c=CKEDITOR.tools.eventsBuffer(100,s);a.unselectable(),a.on("mousedown",(function(e){(e=e.data).getTarget().hasAscendant("a",1)||e.preventDefault()})),i.on("focus",(function(t){s(t),i.on("change",l.input),e.on("scroll",c.input),e.on("resize",c.input)})),i.on("blur",(function(){a.hide(),i.removeListener("change",l.input),e.removeListener("scroll",c.input),e.removeListener("resize",c.input)})),i.on("destroy",(function(){e.removeListener("scroll",c.input),e.removeListener("resize",c.input),a.clearCustomData(),a.remove()})),i.focusManager.hasFocus&&a.show(),i.focusManager.add(a,1)}}(this)}),null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),i=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),n=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var i=(t=t||{}).attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(i["aria-multiselectable"]=!0),!i.role&&(i.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",i.role),(i=this.keys)[40]="next",i[9]="next",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(i[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction((function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)}),this)),this._.click}},proto:{add:function(e,i,o){var s=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=s,e={id:s,val:CKEDITOR.tools.htmlEncodeAttr(e).replace(n,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(o||e),text:i||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(i.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,i=this._.groups,n=this.element.getDocument();for(e in t)n.getById(t[e]).setStyle("display","");for(var o in i)e=(t=n.getById(i[o])).getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll(),e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},markFirstDisplayed:function(){var e=this;this._.markFirstDisplayed((function(){e.multiSelect||e.unmarkAll()}))},unmark:function(e){var t=this.element.getDocument();e=this._.items[e];var i=t.getById(e);i.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(i)},unmarkAll:function(){var e,t=this._.items,i=this.element.getDocument();for(e in t){var n=t[e];i.getById(n).removeClass("cke_selected"),i.getById(n+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,i=this.element.getElementsByTag("a"),n=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=i.getItem(++n);)if(e.equals(t)){this._.focusIndex=n;break}}else this.element.focus();t&&setTimeout((function(){t.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,i){function n(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o=CKEDITOR.env,s="cke_"+this.id,r=CKEDITOR.tools.addFunction((function(t){d&&(e.unlockSelection(1),d=0),l.execute(t)}),this),a=this,l={id:s,combo:this,focus:function(){CKEDITOR.document.getById(s).getChild(1).focus()},execute:function(t){var i=a._;if(i.state!=CKEDITOR.TRISTATE_DISABLED)if(a.createPanel(e),i.on)i.panel.hide();else{a.commit();var n=a.getValue();n?i.list.mark(n):i.list.unmarkAll(),i.panel.showBlock(a.id,new CKEDITOR.dom.element(t),4)}},clickFn:r};e.on("activeFilterChange",n,this),e.on("mode",n,this),e.on("selectionChange",n,this),!this.readOnly&&e.on("readOnly",n,this);var c=CKEDITOR.tools.addFunction((function(e,t){var i=(e=new CKEDITOR.dom.event(e)).getKeystroke();switch(i){case 13:case 32:case 40:CKEDITOR.tools.callFunction(r,t);break;default:l.onkey(l,i)}e.preventDefault()})),u=CKEDITOR.tools.addFunction((function(){l.onfocus&&l.onfocus()})),d=0;return l.keyDownFn=c,o={id:s,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:o.gecko&&!o.hc?"":(this.title||"").replace("'",""),keydownFn:c,focusFn:u,clickFn:r},t.output(o,i),this.onRender&&this.onRender(),l},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,i=this._.panelDefinition.block,n=t.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,s=new CKEDITOR.ui.floatPanel(e,n,t),r=(t=s.addListBlock(this.id,i),this);s.onShow=function(){this.element.addClass(o),r.setState(CKEDITOR.TRISTATE_ON),r._.on=1,r.editorFocus&&!e.focusManager.hasFocus&&e.focus(),r.onOpen&&r.onOpen()},s.onHide=function(t){this.element.removeClass(o),r.setState(r.modes&&r.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r._.on=0,!t&&r.onClose&&r.onClose()},s.onEscape=function(){s.hide(1)},t.onClick=function(e,t){r.onClick&&r.onClick.call(r,e,t),s.hide()},this._.panel=s,this._.list=t,s.getBlock(this.id).onHide=function(){r._.on=0,r.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var i=this.document.getById("cke_"+this.id+"_text");i&&(e||t?i.removeClass("cke_combo_inlinelabel"):(t=this.label,i.addClass("cke_combo_inlinelabel")),i.setText(void 0!==t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,i){this._.items[e]=i||e,this._.list.add(e,t,i)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),function(){function e(e,i,n,o,s,r,a,l){var c=e.config,u=new CKEDITOR.style(a),d=s.split(";");s=[];for(var h={},p=0;p<d.length;p++)if(m=d[p]){var m=m.split("/"),g={},f=d[p]=m[0];g[n]=s[p]=m[1]||f,h[f]=new CKEDITOR.style(a,g),h[f]._.definition.name=f}else d.splice(p--,1);e.ui.addRichCombo(i,{label:o.label,title:o.panelTitle,toolbar:"styles,"+l,defaultValue:"cke-default",allowedContent:u,requiredContent:u,contentTransformations:"span"===a.element?[[{element:"font",check:"span",left:function(e){return!!e.attributes.size||!!e.attributes.align||!!e.attributes.face},right:function(e){var t=" x-small small medium large x-large xx-large 48px".split(" ");e.name="span",e.attributes.size&&(e.styles["font-size"]=t[e.attributes.size],delete e.attributes.size),e.attributes.align&&(e.styles["text-align"]=e.attributes.align,delete e.attributes.align),e.attributes.face&&(e.styles["font-family"]=e.attributes.face,delete e.attributes.face)}}]]:null,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":o.panelTitle}},init:function(){var t;t="("+e.lang.common.optionDefault+")",this.startGroup(o.panelTitle),this.add(this.defaultValue,t,t);for(var i=0;i<d.length;i++)t=d[i],this.add(t,h[t].buildPreview(),t)},onClick:function(i){e.focus(),e.fire("saveSnapshot");var n,o,s,r,a,l=this.getValue(),c=h[i];if(l&&i!=l)if(n=h[l],(l=e.getSelection().getRanges()[0]).collapsed){if(s=(o=e.elementPath()).contains((function(e){return n.checkElementRemovable(e)}))){if(r=l.checkBoundaryOfElement(s,CKEDITOR.START),a=l.checkBoundaryOfElement(s,CKEDITOR.END),r&&a){for(r=l.createBookmark();o=s.getFirst();)o.insertBefore(s);s.remove(),l.moveToBookmark(r)}else r||a?l.moveToPosition(s,r?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(l.splitElement(s),l.moveToPosition(s,CKEDITOR.POSITION_AFTER_END)),t(l,o.elements.slice(),s);e.getSelection().selectRanges([l])}}else e.removeStyle(n);i===this.defaultValue?n&&e.removeStyle(n):e.applyStyle(c),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){var i=this.getValue();t=t.data.path.elements;for(var n,o=0;o<t.length;o++)for(var s in n=t[o],h)if(h[s].checkElementMatch(n,!0,e))return void(s!=i&&this.setValue(s));this.setValue("",r)}),this)},refresh:function(){e.activeFilter.check(u)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function t(e,i,n){var o=i.pop();if(o){if(n)return t(e,i,o.equals(n)?null:n);n=o.clone(),e.insertNode(n),e.moveToPosition(n,CKEDITOR.POSITION_AFTER_START),t(e,i)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(t){var i=t.config;e(t,"Font","family",t.lang.font,i.font_names,i.font_defaultLabel,i.font_style,30),e(t,"FontSize","size",t.lang.font.fontSize,i.fontSize_sizes,i.fontSize_defaultLabel,i.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n"),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(e){var t=e.lang,i=0,n={email:1,password:1,search:1,tel:1,text:1,url:1},o={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},s={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},r=function(n,r,a){var l={allowedContent:o[r],requiredContent:s[r]};"form"==r&&(l.context="form"),e.addCommand(r,new CKEDITOR.dialogCommand(r,l)),e.ui.addButton&&e.ui.addButton(n,{label:t.common[n.charAt(0).toLowerCase()+n.slice(1)],command:r,toolbar:"forms,"+(i+=10)}),CKEDITOR.dialog.add(r,a)},a=this.path+"dialogs/";!e.blockless&&r("Form","form",a+"form.js"),r("Checkbox","checkbox",a+"checkbox.js"),r("Radio","radio",a+"radio.js"),r("TextField","textfield",a+"textfield.js"),r("Textarea","textarea",a+"textarea.js"),r("Select","select",a+"select.js"),r("Button","button",a+"button.js");var l=e.plugins.image;l&&!e.plugins.image2&&r("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),r("HiddenField","hiddenfield",a+"hiddenfield.js"),e.addMenuItems&&(r={checkbox:{label:t.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:t.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:t.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:t.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:t.forms.button.title,command:"button",group:"button"},select:{label:t.forms.select.title,command:"select",group:"select"},textarea:{label:t.forms.textarea.title,command:"textarea",group:"textarea"}},l&&(r.imagebutton={label:t.image.titleButton,command:"imagebutton",group:"imagebutton"}),!e.blockless&&(r.form={label:t.forms.form.menu,command:"form",group:"form"}),e.addMenuItems(r)),e.contextMenu&&(!e.blockless&&e.contextMenu.addListener((function(e,t,i){if((e=i.contains("form",1))&&!e.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}})),e.contextMenu.addListener((function(e){if(e&&!e.isReadOnly()){var t=e.getName();if("select"==t)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==t)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==t){var i=e.getAttribute("type")||"text";switch(i){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return l?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(n[i])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==t&&"hiddenfield"==e.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}))),e.on("doubleclick",(function(t){var i=t.data.element;if(!e.blockless&&i.is("form"))t.data.dialog="form";else if(i.is("select"))t.data.dialog="select";else if(i.is("textarea"))t.data.dialog="textarea";else if(i.is("img")&&"hiddenfield"==i.data("cke-real-element-type"))t.data.dialog="hiddenfield";else if(i.is("input")){switch(i=i.getAttribute("type")||"text"){case"button":case"submit":case"reset":t.data.dialog="button";break;case"checkbox":t.data.dialog="checkbox";break;case"radio":t.data.dialog="radio";break;case"image":t.data.dialog="imagebutton"}n[i]&&(t.data.dialog="textfield")}}))},afterInit:function(e){var t=(i=e.dataProcessor)&&i.htmlFilter,i=i&&i.dataFilter;CKEDITOR.env.ie&&t&&t.addRules({elements:{input:function(e){var t=(e=e.attributes).type;t||(e.type="text"),"checkbox"!=t&&"radio"!=t||"on"!=e.value||delete e.value}}},{applyToAll:!0}),i&&i.addRules({elements:{input:function(t){if("hidden"==t.attributes.type)return e.createFakeParserElement(t,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,i=e.lang.format,n=t.format_tags.split(";"),o={},s=0,r=[],a=0;a<n.length;a++){var l=n[a],c=new CKEDITOR.style(t["format_"+l]);e.filter.customConfig&&!e.filter.check(c)||(s++,o[l]=c,o[l]._.enterMode=e.config.enterMode,r.push(c))}0!==s&&e.ui.addRichCombo("Format",{label:i.label,title:i.panelTitle,toolbar:"styles,20",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){for(var e in this.startGroup(i.panelTitle),o){var t=i["tag_"+e];this.add(e,o[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=o[t];var i=e.elementPath();t.checkActive(i,e)||e.applyStyle(t),setTimeout((function(){e.fire("saveSnapshot")}),0)},onRender:function(){e.on("selectionChange",(function(t){var i=this.getValue();for(var n in t=t.data.path,this.refresh(),o)if(o[n].checkActive(t,e))return void(n!=i&&this.setValue(n,e.lang.format["tag_"+n]));this.setValue("")}),this)},onOpen:function(){for(var t in this.showAll(),o)e.activeFilter.check(o[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var i in o)if(e.activeFilter.check(o[i]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"\t",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var i=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),i&&i.breakAfterClose&&(this._.needsSpace=i.needsSpace)):(this._.output.push(">"),i&&i.indent&&(this._.indentation+=this.indentationChars)),i&&i.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("\x3c!--",e,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(e,t){var i=this._.rules[e];i?CKEDITOR.tools.extend(i,t,!0):this._.rules[e]=t}}}),CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t=e.lang.iframe,i="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";e.plugins.dialogadvtab&&(i+=";iframe"+e.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1})),CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js"),e.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:i,requiredContent:"iframe"})),e.ui.addButton&&e.ui.addButton("Iframe",{label:t.toolbar,command:"iframe",toolbar:"insert,80"}),e.on("doubleclick",(function(e){var t=e.data.element;t.is("img")&&"iframe"==t.data("cke-real-element-type")&&(e.data.dialog="iframe")})),e.addMenuItems&&e.addMenuItems({iframe:{label:t.title,command:"iframe",group:"image"}}),e.contextMenu&&e.contextMenu.addListener((function(e){if(e&&e.is("img")&&"iframe"==e.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}}))},afterInit:function(e){var t=e.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(t){return e.createFakeParserElement(t,"cke_iframe","iframe",!0)}}})}}),function(){function e(e){function t(e){var t=!1;r.attachListener(r,"keydown",(function(){var i=n.getBody().getElementsByTag(e);if(!t){for(var o=0;o<i.count();o++)i.getItem(o).setCustomData("retain",!0);t=!0}}),null,null,1),r.attachListener(r,"keyup",(function(){var i=n.getElementsByTag(e);t&&(1==i.count()&&!i.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(i.getItem(0).getAttributes())&&i.getItem(0).remove(1),t=!1)}))}var i=this.editor,n=e.document,o=n.body,s=n.getElementById("cke_actscrpt");s&&s.parentNode.removeChild(s),(s=n.getElementById("cke_shimscrpt"))&&s.parentNode.removeChild(s),(s=n.getElementById("cke_basetagscrpt"))&&s.parentNode.removeChild(s),o.contentEditable=!0,CKEDITOR.env.ie&&(o.hideFocus=!0,o.disabled=!0,o.removeAttribute("disabled")),delete this._.isLoadingData,this.$=o,n=new CKEDITOR.dom.document(n),this.setup(),this.fixInitialSelection();var r=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&n.getDocumentElement().addClass(n.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.enterMode!=CKEDITOR.ENTER_P?t("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&i.enterMode!=CKEDITOR.ENTER_DIV&&t("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&n.getDocumentElement().on("mousedown",(function(e){e.data.getTarget().is("html")&&setTimeout((function(){i.editable().focus()}))})),function(e){function t(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var i=e.document.$;i.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),i.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&function(){var i;e.editable().attachListener(e,"selectionChange",(function(){var n=e.getSelection().getSelectedElement();n&&(i&&(i.detachEvent("onresizestart",t),i=null),n.$.attachEvent("onresizestart",t),i=n.$)}))}()}(i);try{i.document.$.execCommand("2D-position",!1,!0)}catch(e){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==i.document.$.compatMode)&&this.attachListener(this,"keydown",(function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout((function(){i.getSelection().scrollIntoView()}),0);else if(i.window.$.innerHeight>this.$.offsetHeight){var n=i.createRange();n[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),n.select(),e.data.preventDefault()}})),CKEDITOR.env.ie&&this.attachListener(n,"blur",(function(){try{n.$.selection.empty()}catch(e){}})),CKEDITOR.env.iOS&&this.attachListener(n,"touchend",(function(){e.focus()})),(o=i.document.getElementsByTag("title").getItem(0)).data("cke-title",o.getText()),CKEDITOR.env.ie&&(i.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout((function(){"unloaded"==this.status&&(this.status="ready"),i.fire("contentDom"),this._.isPendingFocus&&(i.focus(),this._.isPendingFocus=!1),setTimeout((function(){i.fire("dataReady")}),0)}),0,this)}var t;CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",(function(i){function n(n){n&&n.removeListener(),e.editable(new t(e,s.$.contentWindow.document.body)),e.setData(e.getData(1),i)}var o="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",s=(o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(o)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+o+'" frameBorder="0"></iframe>'));s.setStyles({width:"100%",height:"100%"}),s.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(o=e.ui.space("contents")).append(s);var r=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;r&&s.on("load",n);var a=e.title,l=e.fire("ariaEditorHelpLabel",{}).label;if(a&&(CKEDITOR.env.ie&&l&&(a+=", "+l),s.setAttribute("title",a)),l){a=CKEDITOR.tools.getNextId();var c=CKEDITOR.dom.element.createFromHtml('<span id="'+a+'" class="cke_voice_label">'+l+"</span>");o.append(c,1),s.setAttribute("aria-describedby",a)}e.on("beforeModeUnload",(function(e){e.removeListener(),c&&c.remove()})),s.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!r&&n(),e.fire("ariaWidget",s)}))}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,i=t.contentsCss;CKEDITOR.tools.isArray(i)||(t.contentsCss=i?[i]:[]),t.contentsCss.push(e)},t=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction((function(t){CKEDITOR.tools.setTimeout(e,0,this,t)}),this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var i=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),i.fire("dataReady");else{this._.isLoadingData=!0,i._.dataStore={id:1};var n=i.config,o=n.fullPage,s=n.docType,r=CKEDITOR.tools.buildStyleHtml(function(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,i=[];for(t in CKEDITOR.dtd.$removeEmpty)i.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(i.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');o||(r+=CKEDITOR.tools.buildStyleHtml(i.config.contentsCss));var a=n.baseHref?'<base href="'+n.baseHref+'" data-cke-temp="1" />':"";o&&(e=e.replace(/<!DOCTYPE[^>]*>/i,(function(e){return i.docType=s=e,""})).replace(/<\?xml\s[^\?]*\?>/i,(function(e){return i.xmlDeclaration=e,""}))),e=i.dataProcessor.toHtml(e),o?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head[^>]*?>/,"$&"+a)),e=e.replace(/<\/head\s*>/,r+"$&"),e=s+e):e=n.docType+'<html dir="'+n.contentsLangDirection+'" lang="'+(n.contentsLanguage||i.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+r+"</head><body"+(n.bodyId?' id="'+n.bodyId+'"':"")+(n.bodyClass?' class="'+n.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),n='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(n+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),a&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,n),this.clearCustomData(),this.clearListeners(),i.fire("contentDomUnload");var l=this.getDocument();try{l.write(e)}catch(t){setTimeout((function(){l.write(e)}),0)}}},getData:function(e){if(e)return this.getHtml();var t=(e=this.editor).config,i=(s=t.fullPage)&&e.docType,n=s&&e.xmlDeclaration,o=this.getDocument(),s=s?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(s=s.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),s=e.dataProcessor.toDataFormat(s),n&&(s=n+"\n"+s),i&&(s=i+"\n"+s),s},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:t.baseProto.focus.call(this)},detach:function(){var e,i=this.editor,n=i.document;try{e=i.window.getFrame()}catch(e){}t.baseProto.detach.call(this),this.clearCustomData(),n.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),e&&e.getParent()?(e.clearCustomData(),(i=e.removeCustomData("onResize"))&&i.removeListener(),e.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,function(){function e(e,t){if(t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");return"inherit"!=t&&"none"!=t||(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var i="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(i="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:i,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",(function(e){var t=e.data.element;!t.is("img")||t.data("cke-realelement")||t.isReadOnly()||(e.data.dialog="image")})),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener((function(i){if(e(t,i))return{image:CKEDITOR.TRISTATE_OFF}}))}},afterInit:function(i){function n(n){var o=i.getCommand("justify"+n);o&&("left"!=n&&"right"!=n||o.on("exec",(function(o){var s=e(i);s&&(t(s)==n?(s.removeStyle("float"),n==t(s)&&s.removeAttribute("align")):s.setStyle("float",n),o.cancel())})),o.on("refresh",(function(o){var s=e(i);s&&(s=t(s),this.setState(s==n?CKEDITOR.TRISTATE_ON:"right"==n||"left"==n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())})))}i.plugins.image2||(n("left"),n("right"),n("center"),n("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,n){var o,s;n.on("refresh",(function(e){var n,o=[t];for(n in e.data.states)o.push(e.data.states[n]);this.setState(CKEDITOR.tools.search(o,i)?i:t)}),n,null,100),n.on("exec",(function(t){o=e.getSelection(),s=o.createBookmarks(1),t.data||(t.data={}),t.data.done=!1}),n,null,0),n.on("exec",(function(){e.forceNextSelectionCheck(),o.selectBookmarks(s)}),n,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,i=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var i=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new i(!0))),e(t,t.addCommand("outdent",new i)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",(function(e){var i=t.createRange(),n=e.data.node;i.setStartBefore(n),i.setEndAfter(n);for(var o,s=new CKEDITOR.dom.walker(i);o=s.next();)if(o.type==CKEDITOR.NODE_ELEMENT)if(!o.equals(n)&&o.getDirection())i.setStartAfter(o),s=new CKEDITOR.dom.walker(i);else{var r=t.config.indentClasses;if(r)for(var a="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<r.length;l++)o.hasClass(r[l]+a[0])&&(o.removeClass(r[l]+a[0]),o.addClass(r[l]+a[1]));r=o.getStyle("margin-right"),a=o.getStyle("margin-left"),r?o.setStyle("margin-left",r):o.removeStyle("margin-left"),a?o.setStyle("margin-right",a):o.removeStyle("margin-right")}}))}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,i){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!i,this.relatedGlobal=i?"indent":"outdent",this.indentKey=i?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",(function(){for(var e in t)!function(e,t){var i,n=e.getCommand(t.relatedGlobal);for(i in t.jobs)n.on("exec",(function(n){n.data.done||(e.fire("lockSnapshot"),t.execJob(e,i)&&(n.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))}),this,null,i),n.on("refresh",(function(n){n.data.states||(n.data.states={}),n.data.states[t.name+"@"+i]=t.refreshJob(e,i,n.data.path)}),this,null,i);e.addFeature(t)}(this,t[e])}))}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,i){var n=this.jobs[i];if(n.state!=t)return n.exec.call(this,e)},refreshJob:function(e,i,n){return i=this.jobs[i],e.activeFilter.checkFeature(this)?i.state=i.refresh.call(this,e,n):i.state=t,i.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e,i,n){if(!e.getCustomData("indent_processed")){var o=this.editor,s=this.isIndent;if(i){if(n=0,(o=e.$.className.match(this.classNameRegex))&&(o=o[1],n=CKEDITOR.tools.indexOf(i,o)+1),0>(n+=s?1:-1))return;n=Math.min(n,i.length),n=Math.max(n,0),e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.classNameRegex,"")),0<n&&e.addClass(i[n-1])}else{i=t(e,n),n=parseInt(e.getStyle(i),10);var r=o.config.indentOffset||40;if(isNaN(n)&&(n=0),0>(n+=(s?1:-1)*r))return;n=Math.max(n,0),n=Math.ceil(n/r)*r,e.setStyle(i,n?n+(o.config.indentUnit||"px"):""),""===e.getAttribute("style")&&e.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,e,"indent_processed",1)}}function t(e,t){return"ltr"==(t||e.getComputedStyle("direction"))?"margin-left":"margin-right"}var i=CKEDITOR.dtd.$listItem,n=CKEDITOR.dtd.$list,o=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(r){function a(){l.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:c?null:"margin-left,margin-right",classes:c||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(c?"("+c.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(e,n){if(!(r=n.block||n.blockLimit).is(i))var r=(a=r.getAscendant(i))&&n.contains(a)||r;if(r.is(i)&&(r=r.getParent()),this.enterBr||this.getContext(n)){if(c){var a=c,l=(r=r.$.className.match(this.classNameRegex),this.isIndent);return(a=r?!l||r[1]!=a.slice(-1):l)?s:o}return this.isIndent?s:r?CKEDITOR[0>=(parseInt(r.getStyle(t(r)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:o}return o},exec:function(t){var i,o=(o=t.getSelection())&&o.getRanges()[0];if(i=t.elementPath().contains(n))e.call(this,i,c);else for(o=o.createIterator(),t=t.config.enterMode,o.enforceRealBlocks=!0,o.enlargeBr=t!=CKEDITOR.ENTER_BR;i=o.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)i.isReadOnly()||e.call(this,i,c);return!0}}}}var l=CKEDITOR.plugins.indent,c=r.config.indentClasses;l.registerCommands(r,{indentblock:new a(r,"indentblock",!0),outdentblock:new a(r,"outdentblock")}),CKEDITOR.tools.extend(a.prototype,l.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:c?new RegExp("(?:^|\\s+)("+c.join("|")+")(?=$|\\s)"):null})}})}(),function(){function e(e){function n(t){for(var n=o.startContainer,l=o.endContainer;n&&!n.getParent().equals(t);)n=n.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!n||!l)return!1;for(var c=[],u=!1;!u;)n.equals(l)&&(u=!0),c.push(n),n=n.getNext();if(1>c.length)return!1;for(n=t.getParents(!0),l=0;l<n.length;l++)if(n[l].getName&&a[n[l].getName()]){t=n[l];break}n=s.isIndent?1:-1,l=c[0],c=c[c.length-1];var d,h=(u=CKEDITOR.plugins.list.listToArray(t,r))[c.getCustomData("listarray_index")].indent;for(l=l.getCustomData("listarray_index");l<=c.getCustomData("listarray_index");l++)if(u[l].indent+=n,0<n){for(var p=u[l].parent,m=l-1;0<=m;m--)if(u[m].indent===n){p=u[m].parent;break}u[l].parent=new CKEDITOR.dom.element(p.getName(),p.getDocument())}for(l=c.getCustomData("listarray_index")+1;l<u.length&&u[l].indent>h;l++)u[l].indent+=n;if(n=CKEDITOR.plugins.list.arrayToList(u,r,null,e.config.enterMode,t.getDirection()),!s.isIndent&&(d=t.getParent())&&d.is("li")){var g,f=[];for(l=(c=n.listNode.getChildren()).count()-1;0<=l;l--)(g=c.getItem(l))&&g.is&&g.is("li")&&f.push(g)}if(n&&n.listNode.replace(t),f&&f.length)for(l=0;l<f.length;l++){for(g=t=f[l];(g=g.getNext())&&g.is&&g.getName()in a;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(i)&&t.append(o.document.createText(" ")),t.append(g);t.insertAfter(d)}return n&&e.fire("contentDomInvalidated"),!0}for(var o,s=this,r=this.database,a=this.context,l=((l=e.getSelection())&&l.getRanges()).createIterator();o=l.getNextRange();){for(var c=o.getCommonAncestor();c&&(c.type!=CKEDITOR.NODE_ELEMENT||!a[c.getName()]);){if(e.editable().equals(c)){c=!1;break}c=c.getParent()}if(c||(c=o.startPath().contains(a))&&o.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),!c){var u=o.getEnclosedNode();u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in a&&(o.setStartAt(u,CKEDITOR.POSITION_AFTER_START),o.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),c=u)}if(c&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in a&&((u=new CKEDITOR.dom.walker(o)).evaluator=t,o.startContainer=u.next()),c&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in a&&((u=new CKEDITOR.dom.walker(o)).evaluator=t,o.endContainer=u.previous()),c)return n(c)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function i(e){return n(e)&&o(e)}var n=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),s=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function i(t){n.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",(function(e){var i=t.elementPath();if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey&&i){var n=this.getContext(i);!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,i,n)||(t.execCommand(this.relatedGlobal),e.cancel())}}),this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var i=this.getContext(t),n=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,i);return i&&this.isIndent&&!n?r:s}:function(e,t){return!this.getContext(t)||this.isIndent?s:r},exec:CKEDITOR.tools.bind(e,this)}}var n=CKEDITOR.plugins.indent;n.registerCommands(t,{indentlist:new i(t,"indentlist",!0),outdentlist:new i(t,"outdentlist")}),CKEDITOR.tools.extend(i.prototype,n.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,i,n){var o=i.contains(t);return n||(n=i.contains(e)),n&&o&&o.equals(n.getFirst(t))}}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(e){e.config.smiley_path=e.config.smiley_path||this.path+"images/",e.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"})),e.ui.addButton&&e.ui.addButton("Smiley",{label:e.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"}),CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){function e(e,t){var i;if(t=void 0===t||t)i=e.getComputedStyle("text-align");else{for(;(!e.hasAttribute||!e.hasAttribute("align")&&!e.getStyle("text-align"))&&(i=e.getParent());)e=i;i=e.getStyle("text-align")||e.getAttribute("align")||""}return i&&(i=i.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!i&&t&&(i="rtl"==e.getComputedStyle("direction")?"right":"left"),i}function t(e,t,i){this.editor=e,this.name=t,this.value=i,this.context="p",t=e.config.justifyClasses;var n=e.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(i){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)"),this.requiredContent=n+"("+this.cssClassName+")"}else this.requiredContent=n+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function i(e){var t=e.editor,i=t.createRange();i.setStartBefore(e.data.node),i.setEndAfter(e.data.node);for(var n,o=new CKEDITOR.dom.walker(i);n=o.next();)if(n.type==CKEDITOR.NODE_ELEMENT)if(!n.equals(e.data.node)&&n.getDirection())i.setStartAfter(n),o=new CKEDITOR.dom.walker(i);else{var s=t.config.justifyClasses;s&&(n.hasClass(s[0])?(n.removeClass(s[0]),n.addClass(s[2])):n.hasClass(s[2])&&(n.removeClass(s[2]),n.addClass(s[0]))),"left"==(s=n.getStyle("text-align"))?n.setStyle("text-align","right"):"right"==s&&n.setStyle("text-align","left")}}t.prototype={exec:function(t){var i=t.getSelection(),n=t.config.enterMode;if(i){for(var o,s,r=i.createBookmarks(),a=i.getRanges(),l=this.cssClassName,c=void 0===(c=t.config.useComputedState)||c,u=a.length-1;0<=u;u--)for((o=a[u].createIterator()).enlargeBr=n!=CKEDITOR.ENTER_BR;s=o.getNextParagraph(n==CKEDITOR.ENTER_P?"p":"div");)if(!s.isReadOnly()){var d,h=s.getName();if(d=t.activeFilter.check(h+"{text-align}"),(h=t.activeFilter.check(h+"("+l+")"))||d){s.removeAttribute("align"),s.removeStyle("text-align");var p=l&&(s.$.className=CKEDITOR.tools.ltrim(s.$.className.replace(this.cssClassRegex,""))),m=this.state==CKEDITOR.TRISTATE_OFF&&(!c||e(s,!0)!=this.value);l&&h?m?s.addClass(l):p||s.removeAttribute("class"):m&&d&&s.setStyle("text-align",this.value)}}t.focus(),t.forceNextSelectionCheck(),i.selectBookmarks(r)}},refresh:function(t,i){var n=i.block||i.blockLimit,o=n.getName(),s=n.equals(t.editable());o=this.cssClassName?t.activeFilter.check(o+"("+this.cssClassName+")"):t.activeFilter.check(o+"{text-align}"),s&&1===i.elements.length?this.setState(CKEDITOR.TRISTATE_OFF):!s&&o?this.setState(e(n,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}},CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var n=new t(e,"justifyleft","left"),o=new t(e,"justifycenter","center"),s=new t(e,"justifyright","right"),r=new t(e,"justifyblock","justify");e.addCommand("justifyleft",n),e.addCommand("justifycenter",o),e.addCommand("justifyright",s),e.addCommand("justifyblock",r),e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.common.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.common.justify,command:"justifyblock",toolbar:"align,40"})),e.on("dirChanged",i)}}})}(),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,i=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&i?i.hide():(t.previousState=t.state,i||((i=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}})).onHide=CKEDITOR.tools.bind((function(){var i=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!i||i[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0}),this),this.onMenu&&i.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout((function(){i.show(CKEDITOR.document.getById(t.id),4)}),0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(e){var t,i,n,o,s=e.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],r=this,a=e.lang.language,l={};for(e.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,t){var i=l["language_"+t];i&&e[i.style.checkActive(e.elementPath(),e)?"removeStyle":"applyStyle"](i.style)},refresh:function(e){this.setState(r.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),o=0;o<s.length;o++)i=(t=s[o].split(":"))[0],l[n="language_"+i]={label:t[1],langId:i,group:"language",order:o,ltr:"rtl"!=(""+t[2]).toLowerCase(),onClick:function(){e.execCommand("language",this.langId)},role:"menuitemcheckbox"},l[n].style=new CKEDITOR.style({element:"span",attributes:{lang:i,dir:l[n].ltr?"ltr":"rtl"}});l.language_remove={label:a.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:l.length,onClick:function(){var t=r.getCurrentLangElement(e);t&&e.execCommand("language",t.getAttribute("lang"))}},e.addMenuGroup("language",1),e.addMenuGroup("language_remove"),e.addMenuItems(l),e.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:a.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var t,i={},n=r.getCurrentLangElement(e);for(t in l)i[t]=CKEDITOR.TRISTATE_OFF;return i.language_remove=n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,n&&(i["language_"+n.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),i}}),e.addRemoveFormatFilter&&e.addRemoveFormatFilter((function(e){return!(e.is("span")&&e.getAttribute("dir")&&e.getAttribute("lang"))}))},getCurrentLangElement:function(e){var t,i=e.elementPath();if(e=i&&i.elements,i)for(var n=0;n<e.length;n++)i=e[n],!t&&"span"==i.getName()&&i.hasAttribute("dir")&&i.hasAttribute("lang")&&(t=i);return t}}),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,i=e.length,n=[],o=0;o<i;o++)t=e.charCodeAt(o),n.push(t);return"String.fromCharCode("+n.join(",")+")"}function i(t,i){var n,o,s=t.plugins.link,r=s.compiledProtectionFunction.params;o=[s.compiledProtectionFunction.name,"("];for(var a=0;a<r.length;a++)n=i[s=r[a].toLowerCase()],0<a&&o.push(","),o.push("'",n?e(encodeURIComponent(i[s])):"","'");return o.push(")"),o.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return i.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",i=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",(function(t){var i=t.data.element.getAscendant({a:1,img:1},!0);i&&!i.isReadOnly()&&(i.is("a")?(t.data.dialog=!i.getAttribute("name")||i.getAttribute("href")&&i.getChildCount()?"link":"anchor",t.data.link=i):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,i)&&(t.data.dialog="anchor"))}),null,null,0),e.on("doubleclick",(function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)}),null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(t){if(!t||t.isReadOnly())return null;if(!(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var i={};return t.getAttribute("href")&&t.getChildCount()&&(i={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(i.anchor=i.removeAnchor=CKEDITOR.TRISTATE_OFF),i})),this.compiledProtectionFunction=function(e){var t;return(e=e.config.emailProtection||"")&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,(function(e,i,n){t.name=i,t.params=[],n.replace(/[^,\s]+/g,(function(e){t.params.push(e)}))}))),t}(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push((function(t,i){if("a"==i&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"}))}});var n=/^javascript:/,o=/^mailto:([^?]+)(?:\?(.+))?$/,s=/subject=([^;?:@&=$,\/]*)/i,r=/body=([^;?:@&=$,\/]*)/i,a=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,c=/^(_(?:self|top|parent|blank))$/,u=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,d=/^javascript:([^(]+)\(([^)]+)\)$/,h=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,p=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e,t){var i,n=e.getSelection(),o=n.getSelectedElement(),s=n.getRanges(),r=[];if(!t&&o&&o.is("a"))return o;for(o=0;o<s.length;o++)if((i=n.getRanges()[o]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(i=e.elementPath(i.getCommonAncestor()).contains("a",1))&&t)r.push(i);else if(i)return i;return t?r:null},getEditorAnchors:function(e){for(var t,i=(n=(i=e.editable()).isInline()&&!e.plugins.divarea?e.document:i).getElementsByTag("a"),n=n.getElementsByTag("img"),o=[],s=0;t=i.getItem(s++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&o.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});for(s=0;t=n.getItem(s++);)(t=this.tryRestoreFakeAnchor(e,t))&&o.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var i=e.restoreRealElement(t);if(i.data("cke-saved-name"))return i}},parseLinkAttributes:function(e,t){var i,g=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",f=e.plugins.link.compiledProtectionFunction,y=e.config.emailProtection,b={};if(g.match(n)&&("encode"==y?g=g.replace(u,(function(e,t,i){return i=i||"","mailto:"+String.fromCharCode.apply(String,t.split(","))+i.replace(/\\'/g,"'")})):y&&g.replace(d,(function(e,t,i){if(t==f.name){b.type="email",e=b.email={},t=/(^')|('$)/g;for(var n,o=(i=i.match(/[^,\s]+/g)).length,s=0;s<o;s++)n=decodeURIComponent(n=i[s].replace(t,"").replace(/\\'/g,"'")),e[f.params[s].toLowerCase()]=n;e.address=[e.name,e.domain].join("@")}}))),!b.type)if(y=g.match(a))b.type="anchor",b.anchor={},b.anchor.name=b.anchor.id=y[1];else if(y=g.match(o)){i=g.match(s),g=g.match(r),b.type="email";var v=b.email={};v.address=y[1],i&&(v.subject=decodeURIComponent(i[1])),g&&(v.body=decodeURIComponent(g[1]))}else g&&(i=g.match(l))&&(b.type="url",b.url={},b.url.protocol=i[1],b.url.url=i[2]);if(t){if(g=t.getAttribute("target"))b.target={type:g.match(c)?g:"frame",name:g};else if(g=(g=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&g.match(h))for(b.target={type:"popup",name:g[1]};y=p.exec(g[2]);)"yes"!=y[2]&&"1"!=y[2]||y[1]in{height:1,width:1,top:1,left:1}?isFinite(y[2])&&(b.target[y[1]]=y[2]):b.target[y[1]]=!0;var _;for(_ in null!==t.getAttribute("download")&&(b.download=!0),g={},m)(y=t.getAttribute(_))&&(g[m[_]]=y);(_=t.data("cke-saved-name")||g.advName)&&(g.advName=_),CKEDITOR.tools.isEmpty(g)||(b.advanced=g)}return b},getLinkAttributes:function(n,o){var s=n.config.emailProtection||"",r={};switch(o.type){case"url":s=o.url&&void 0!==o.url.protocol?o.url.protocol:"http://";var a=o.url&&CKEDITOR.tools.trim(o.url.url)||"";r["data-cke-saved-href"]=0===a.indexOf("/")?a:s+a;break;case"anchor":s=o.anchor&&o.anchor.id,r["data-cke-saved-href"]="#"+(o.anchor&&o.anchor.name||s||"");break;case"email":switch(a=(u=o.email).address,s){case"":case"encode":var l=encodeURIComponent(u.subject||""),c=encodeURIComponent(u.body||""),u=[];l&&u.push("subject="+l),c&&u.push("body="+c),u=u.length?"?"+u.join("&"):"","encode"==s?(s=["javascript:void(location.href='mailto:'+",t(a)],u&&s.push("+'",e(u),"'"),s.push(")")):s=["mailto:",a,u];break;default:s=a.split("@",2),u.name=s[0],u.domain=s[1],s=["javascript:",i(n,u)]}r["data-cke-saved-href"]=s.join("")}if(o.target)if("popup"==o.target.type){s=["window.open(this.href, '",o.target.name||"","', '"];var d="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(a=d.length,l=function(e){o.target[e]&&d.push(e+"="+o.target[e])},u=0;u<a;u++)d[u]+=o.target[d[u]]?"=yes":"=no";l("width"),l("left"),l("height"),l("top"),s.push(d.join(","),"'); return false;"),r["data-cke-pa-onclick"]=s.join("")}else"notSet"!=o.target.type&&o.target.name&&(r.target=o.target.name);if(o.download&&(r.download=""),o.advanced){for(var h in m)(s=o.advanced[m[h]])&&(r[h]=s);r.name&&(r["data-cke-saved-name"]=r.name)}for(var p in r["data-cke-saved-href"]&&(r.href=r["data-cke-saved-href"]),h={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},o.advanced&&CKEDITOR.tools.extend(h,m),r)delete h[p];return{set:r,removed:CKEDITOR.tools.objectKeys(h)}},showDisplayTextForElement:function(e,t){var i=t.getSelection();return!(t.widgets&&t.widgets.focused||i&&1<i.getRanges().length||e&&e.getName&&e.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){if(CKEDITOR.env.ie){var t,i=e.getSelection().getRanges()[0],n=i.getPreviousEditableNode()&&i.getPreviousEditableNode().getAscendant("a",!0)||i.getNextEditableNode()&&i.getNextEditableNode().getAscendant("a",!0);i.collapsed&&n&&(t=i.createBookmark(),i.selectNodeContents(n),i.select())}n=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),e.removeStyle(n),t&&(i.moveToBookmark(t),i.select())},refresh:function(e,t){var i=t.lastElement&&t.lastElement.getAscendant("a",!0);i&&"a"==i.getName()&&i.getAttribute("href")&&i.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,i=e.getSelection(),n=i.createBookmarks();i&&(t=i.getSelectedElement())&&(t.getChildCount()?t.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),i.selectBookmarks(n)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(e,t,i){function n(i){!(l=u[i?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=t.root[i?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[i?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(t.root,i),s=[],r=0;r<t.contents.length;r++){var a=t.contents[r];(a=a.getAscendant("li",!0))&&!a.getCustomData("list_item_processed")&&(s.push(a),CKEDITOR.dom.element.setMarker(i,a,"list_item_processed",!0))}for(a=null,r=0;r<s.length;r++)o[a=s[r].getCustomData("listarray_index")].indent=-1;for(r=a+1;r<o.length;r++)if(o[r].indent>o[r-1].indent+1){for(s=o[r-1].indent+1-o[r].indent,a=o[r].indent;o[r]&&o[r].indent>=a;)o[r].indent+=s,r++;r--}var l,c,u=CKEDITOR.plugins.list.arrayToList(o,i,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;n(!0),n(),u.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function i(e,t,i,n){for(var o,s;o=e[n?"getLast":"getFirst"](p);)(s=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute("dir",s),o.remove(),i?o[n?"insertBefore":"insertAfter"](i):t.append(o,n)}function n(e){function t(t){var n=e[t?"getPrevious":"getNext"](u);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(i(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function o(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,o){e.fire("saveSnapshot"),o.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var s=o.extractContents();t.trim(!1,!0);var a=t.createBookmark(),l=(c=new CKEDITOR.dom.elementPath(t.startContainer)).block,c=c.lastElement.getAscendant("li",1)||l,h=(p=new CKEDITOR.dom.elementPath(o.startContainer)).contains(CKEDITOR.dtd.$listItem),p=p.contains(CKEDITOR.dtd.$list);for(l?(l=l.getBogus())&&l.remove():p&&(l=p.getPrevious(u))&&d(l)&&l.remove(),(l=s.getLast())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br")&&l.remove(),(l=t.startContainer.getChild(t.startOffset))?s.insertBefore(l):t.startContainer.append(s),h&&(s=r(h))&&(c.contains(h)?(i(s,h.getParent(),h),s.remove()):c.append(s));o.checkStartOfBlock()&&o.checkEndOfBlock()&&(s=(p=o.startPath()).block);)s.is("li")&&(c=s.getParent(),s.equals(c.getLast(u))&&s.equals(c.getFirst(u))&&(s=c)),o.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),s.remove();o=o.clone(),s=e.editable(),o.setEndAt(s,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(o)).evaluator=function(e){return u(e)&&!d(e)},(o=o.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in CKEDITOR.dtd.$list&&n(o),t.moveToBookmark(a),t.select(),e.fire("saveSnapshot")}function r(e){return(e=e.getLast(u))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in a?e:null}var a={ol:1,ul:1},l=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(),u=function(e){return!(l(e)||c(e))},d=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,i,n,o){if(!a[e.getName()])return[];n||(n=0),i||(i=[]);for(var s=0,r=e.getChildCount();s<r;s++){var l=e.getChild(s);if(l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(l,t,i,n+1),"li"==l.$.nodeName.toLowerCase()){var c={parent:e,indent:n,element:l,contents:[]};o?c.grandparent=o:(c.grandparent=e.getParent(),c.grandparent&&"li"==c.grandparent.$.nodeName.toLowerCase()&&(c.grandparent=c.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,l,"listarray_index",i.length),i.push(c);for(var u,d=0,h=l.getChildCount();d<h;d++)(u=l.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&a[u.getName()]?CKEDITOR.plugins.list.listToArray(u,t,i,n+1,c.grandparent):c.contents.push(u)}}return i},arrayToList:function(e,t,i,n,o){if(i||(i=0),!e||e.length<i+1)return null;for(var s,r,l,d=e[i].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(d),p=null,m=i,g=Math.max(e[i].indent,0),f=null,y=n==CKEDITOR.ENTER_P?"p":"div";;){var b=e[m];if(s=b.grandparent,r=b.element.getDirection(1),b.indent==g){for(p&&e[m].parent.getName()==p.getName()||(p=e[m].parent.clone(!1,1),o&&p.setAttribute("dir",o),h.append(p)),f=p.append(b.element.clone(0,1)),r!=p.getDirection(1)&&f.setAttribute("dir",r),s=0;s<b.contents.length;s++)f.append(b.contents[s].clone(1,1));m++}else if(b.indent==Math.max(g,0)+1)b=e[m-1].element.getDirection(1),m=CKEDITOR.plugins.list.arrayToList(e,null,m,n,b!=r?r:null),!f.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=d.$.documentMode&&f.append(d.createText(" ")),f.append(m.listNode),m=m.nextIndex;else{if(-1!=b.indent||i||!s)return null;a[s.getName()]?(f=b.element.clone(!1,!0),r!=s.getDirection(1)&&f.setAttribute("dir",r)):f=new CKEDITOR.dom.documentFragment(d),p=s.getDirection(1)!=r;var v,_,C=b.element,w=C.getAttribute("class"),T=C.getAttribute("style"),E=f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(n!=CKEDITOR.ENTER_BR||p||T||w),I=b.contents.length;for(s=0;s<I;s++)if(v=b.contents[s],c(v)&&1<I)E?_=v.clone(1,1):f.append(v.clone(1,1));else if(v.type==CKEDITOR.NODE_ELEMENT&&v.isBlockBoundary()){p&&!v.getDirection()&&v.setAttribute("dir",r),l=v;var x=C.getAttribute("style");x&&l.setAttribute("style",x.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||"")),w&&v.addClass(w),l=null,_&&(f.append(_),_=null),f.append(v.clone(1,1))}else E?(l||(l=d.createElement(y),f.append(l),p&&l.setAttribute("dir",r)),T&&l.setAttribute("style",T),w&&l.setAttribute("class",w),_&&(l.append(_),_=null),l.append(v.clone(1,1))):f.append(v.clone(1,1));_&&((l||f).append(_),_=null),f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&m!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(r=f.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br")&&r.remove(),(r=f.getLast(u))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)||f.append(d.createElement("br"))),"div"!=(r=f.$.nodeName.toLowerCase())&&"p"!=r||f.appendBogus(),h.append(f),p=null,m++}if(l=null,e.length<=m||Math.max(e[m].indent,0)<g)break}if(t)for(e=h.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(d=o=n=void 0,n=(i=e).getDirection()))){for(o=i.getParent();o&&!(d=o.getDirection());)o=o.getParent();n==d&&i.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:h,nextIndex:m}}};var h=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var i=t.config,o=t.getSelection(),s=o&&o.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((l=t.editable()).getFirst(u)){var r=1==s.length&&s[0];(i=r&&r.getEnclosedNode())&&i.is&&this.type==i.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else i.enterMode==CKEDITOR.ENTER_BR?l.appendBogus():s[0].fixBlock(1,i.enterMode==CKEDITOR.ENTER_P?"p":"div"),o.selectRanges(s);i=o.createBookmarks(!0);for(var l=[],c={},d=(s=s.createIterator(),0);(r=s.getNextRange())&&++d;){var p=(_=r.getBoundaryNodes()).startNode,m=_.endNode;for(p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&r.setStartAt(_.startNode,CKEDITOR.POSITION_AFTER_START),m.type==CKEDITOR.NODE_ELEMENT&&"td"==m.getName()&&r.setEndAt(_.endNode,CKEDITOR.POSITION_BEFORE_END),(r=r.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;_=r.getNextParagraph();)if(!_.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(c,_,"list_block",1),p=(f=t.elementPath(_)).elements,m=0;for(var g,f=f.blockLimit,y=p.length-1;0<=y&&(g=p[y]);y--)if(a[g.getName()]&&f.contains(g)){f.removeCustomData("list_group_object_"+d),(p=g.getCustomData("list_group_object"))?p.contents.push(_):(p={root:g,contents:[_]},l.push(p),CKEDITOR.dom.element.setMarker(c,g,"list_group_object",p)),m=1;break}m||((m=f).getCustomData("list_group_object_"+d)?m.getCustomData("list_group_object_"+d).contents.push(_):(p={root:m,contents:[_]},CKEDITOR.dom.element.setMarker(c,m,"list_group_object_"+d,p),l.push(p)))}}for(g=[];0<l.length;)if(p=l.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(a[p.root.getName()]){for(s=t,d=p,p=c,r=g,m=CKEDITOR.plugins.list.listToArray(d.root,p),f=[],_=0;_<d.contents.length;_++)(y=(y=d.contents[_]).getAscendant("li",!0))&&!y.getCustomData("list_item_processed")&&(f.push(y),CKEDITOR.dom.element.setMarker(p,y,"list_item_processed",!0));y=d.root.getDocument();for(var b=void 0,v=void 0,_=0;_<f.length;_++){var C=f[_].getCustomData("listarray_index");(b=m[C].parent).is(this.type)||(v=y.createElement(this.type),b.copyAttributes(v,{start:1,type:1}),v.removeStyle("list-style-type"),m[C].parent=v)}for(p=CKEDITOR.plugins.list.arrayToList(m,p,null,s.config.enterMode),m=void 0,f=p.listNode.getChildCount(),_=0;_<f&&(m=p.listNode.getChild(_));_++)m.getName()==this.type&&r.push(m);p.listNode.replace(d.root),s.fire("contentDomInvalidated")}else{for(m=t,_=g,f=(r=p).contents,s=r.root.getDocument(),d=[],1==f.length&&f[0].equals(r.root)&&(p=s.createElement("div"),f[0].moveChildren&&f[0].moveChildren(p),f[0].append(p),f[0]=p),r=r.contents[0].getParent(),y=0;y<f.length;y++)r=r.getCommonAncestor(f[y].getParent());for(b=m.config.useComputedState,m=p=void 0,b=void 0===b||b,y=0;y<f.length;y++)for(v=f[y];C=v.getParent();){if(C.equals(r)){d.push(v),!m&&v.getDirection()&&(m=1),v=v.getDirection(b),null!==p&&(p=p&&p!=v?null:v);break}v=C}if(!(1>d.length)){for(f=d[d.length-1].getNext(),y=s.createElement(this.type),_.push(y),b=_=void 0;d.length;)_=d.shift(),b=s.createElement("li"),(v=_).is("pre")||h.test(v.getName())||"false"==v.getAttribute("contenteditable")?_.appendTo(b):(_.copyAttributes(b),p&&_.getDirection()&&(b.removeStyle("direction"),b.removeAttribute("dir")),_.moveChildren(b),_.remove()),b.appendTo(y);p&&m&&y.setAttribute("dir",p),f?y.insertBefore(f):y.appendTo(r)}}else this.state==CKEDITOR.TRISTATE_ON&&a[p.root.getName()]&&e.call(this,t,p,c);for(y=0;y<g.length;y++)n(g[y]);CKEDITOR.dom.element.clearAllMarkers(c),o.selectBookmarks(i),t.focus()},refresh:function(e,t){var i=t.contains(a,1),n=t.blockLimit||t.root;i&&n.contains(i)?this.setState(i.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new t("numberedlist","ol")),e.addCommand("bulletedlist",new t("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",(function(t){var i,n=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&n in{8:1,46:1}){var l=e.getSelection().getRanges()[0],c=l&&l.startPath();if(l&&l.collapsed){var h,p=8==n,m=e.editable(),g=new CKEDITOR.dom.walker(l.clone());if(g.evaluator=function(e){return u(e)&&!d(e)},g.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},n=l.clone(),p)if((h=c.contains(a))&&l.checkBoundaryOfElement(h,CKEDITOR.START)&&(h=h.getParent())&&h.is("li")&&(h=r(h))?(i=h,h=h.getPrevious(u),n.moveToPosition(h&&d(h)?h:i,CKEDITOR.POSITION_BEFORE_START)):(g.range.setStartAt(m,CKEDITOR.POSITION_AFTER_START),g.range.setEnd(l.startContainer,l.startOffset),(h=g.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&(h.getName()in a||h.is("li"))&&(h.is("li")||(g.range.selectNodeContents(h),g.reset(),g.evaluator=o,h=g.previous()),i=h,n.moveToElementEditEnd(i),n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END))),i)s(e,n,l),t.cancel();else{var f=c.contains(a);f&&l.checkBoundaryOfElement(f,CKEDITOR.START)&&(i=f.getFirst(u),l.checkBoundaryOfElement(i,CKEDITOR.START)&&(h=f.getPrevious(u),r(i)?h&&(l.moveToElementEditEnd(h),l.select()):e.execCommand("outdent"),t.cancel()))}else if(i=c.contains("li")){if(g.range.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),p=(m=i.getLast(u))&&o(m)?m:i,c=0,(h=g.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in a&&h.equals(m)?(c=1,h=g.next()):l.checkBoundaryOfElement(p,CKEDITOR.END)&&(c=2),c&&h){if((l=l.clone()).moveToElementEditStart(h),1==c&&(n.optimize(),!n.startContainer.equals(i))){for(i=n.startContainer;i.is(CKEDITOR.dtd.$inline);)f=i,i=i.getParent();f&&n.moveToPosition(f,CKEDITOR.POSITION_AFTER_END)}2==c&&(n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END),l.endPath().block&&l.moveToPosition(l.endPath().block,CKEDITOR.POSITION_AFTER_START)),s(e,n,l),t.cancel()}}else g.range.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),(h=g.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is(a)&&(h=h.getFirst(u),c.block&&l.checkStartOfBlock()&&l.checkEndOfBlock()?(c.block.remove(),l.moveToElementEditStart(h),l.select()):r(h)?(l.moveToElementEditStart(h),l.select()):((l=l.clone()).moveToElementEditStart(h),s(e,n,l)),t.cancel());setTimeout((function(){e.selectionChange(1)}))}}})))}})}(),CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(e){var t;e.blockless||(t=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]; li{list-style-type}[value]",contentTransformations:[["ol: listTypeToStyle"]]}),t=e.addCommand("numberedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),t=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}",contentTransformations:[["ul: listTypeToStyle"]]}),t=e.addCommand("bulletedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),e.addMenuGroup("list",108),e.addMenuItems({numberedlist:{label:e.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:e.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),e.contextMenu.addListener((function(e){if(!e||e.isReadOnly())return null;for(;e;){var t=e.getName();if("ol"==t)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==t)return{bulletedlist:CKEDITOR.TRISTATE_OFF};e=e.getParent()}return null})))}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle),function(){function e(e,t,i){return d(t)&&d(i)&&i.equals(t.getNext((function(e){return!(G(e)||$(e)||h(e))})))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function i(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var i=r(t);if("true"==i.getAttribute("contenteditable"))return t;if(i.is(e.triggers))return i}return null}function n(e,t,i){return v(e,t),v(e,i),e=t.size.bottom,i=i.size.top,e&&i?0|(e+i)/2:e||i}function o(e,t,i){return t[i?"getPrevious":"getNext"]((function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!G(t)||d(t)&&!h(t)&&!u(e,t)}))}function s(e,t,i){return e>t&&e<i}function r(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function a(e){var t=e.doc,i=E('<span contenteditable="false" data-cke-magic-line="1" style="'+j+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),n=CKEDITOR.getUrl(this.path+"images/"+(I.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");for(w(i,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[w(E('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:j+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+e.boxColor+";cursor:pointer;"+(I.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(I.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),w(E(z,t),{base:U+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),w(E(z,t),{base:U+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){v(e,this);var t=e.holdDistance,i=this.size;return!!(i&&s(e.mouse.y,i.top-t,i.bottom+t)&&s(e.mouse.x,i.left-t,i.right+t))},place:function(){var t=e.view,i=e.editable,n=e.trigger,o=n.upper,r=n.lower,a=o||r,l=a.getParent(),c={};for(var u in this.trigger=n,o&&v(e,o,!0),r&&v(e,r,!0),v(e,l,!0),e.inInlineMode&&_(e,!0),l.equals(i)?(c.left=t.scroll.x,c.right=-t.scroll.x,c.width=""):(c.left=a.size.left-a.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),c.width=a.size.outerWidth+a.size.margin.left+a.size.margin.right+t.scroll.x,c.right=""),o&&r?c.top=o.size.margin.bottom===r.size.margin.top?0|o.size.bottom+o.size.margin.bottom/2:o.size.margin.bottom<r.size.margin.top?o.size.bottom+o.size.margin.bottom:o.size.bottom+o.size.margin.bottom-r.size.margin.top:o?r||(c.top=o.size.bottom+o.size.margin.bottom):c.top=r.size.top-r.size.margin.top,n.is(L)||s(c.top,t.scroll.y-15,t.scroll.y+5)?(c.top=e.inInlineMode?0:t.scroll.y,this.look(L)):n.is(A)||s(c.top,t.pane.bottom-5,t.pane.bottom+15)?(c.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(A)):(e.inInlineMode&&(c.top-=t.editable.top+t.editable.border.top),this.look(M)),e.inInlineMode&&(c.top--,c.top+=t.editable.scroll.top,c.left+=t.editable.scroll.left),c)c[u]=CKEDITOR.tools.cssLength(c[u]);this.setStyles(c)},look:function(e){if(this.oldLook!=e){for(var t,i=this.lineChildren.length;i--;)(t=this.lineChildren[i]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new T("span",e.doc)}),t=i.lineChildren.length;t--;)i.lineChildren[t].appendTo(i);i.look(M),i.appendTo(i.wrap),i.unselectable(),i.lineChildren[0].on("mouseup",(function(t){i.detach(),l(e,(function(t){var i=e.line.trigger;t[i.is(D)?"insertBefore":"insertAfter"](i.is(D)?i.lower:i.upper)}),!0),e.editor.focus(),I.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),t.data.preventDefault(!0)})),i.on("mousedown",(function(e){e.data.preventDefault(!0)})),e.line=i}function l(e,t,i){var n,o=new CKEDITOR.dom.range(e.doc),s=e.editor;I.ie&&e.enterMode==CKEDITOR.ENTER_BR?n=e.doc.createText(B):(n=(n=r(e.element,!0))&&n.data("cke-enter-mode")||e.enterMode,(n=new T(k[n],e.doc)).is("br")||e.doc.createText(B).appendTo(n)),i&&s.fire("saveSnapshot"),t(n),o.moveToPosition(n,CKEDITOR.POSITION_AFTER_START),s.getSelection().selectRanges([o]),e.hotNode=n,i&&s.fire("saveSnapshot")}function c(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function n(i){var n=I.ie&&9>I.version?" ":B,o=e.hotNode&&e.hotNode.getText()==n&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;l(e,(function(n){o&&e.hotNode&&e.hotNode.remove(),n[t?"insertAfter":"insertBefore"](i),n.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t})),I.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),e.line.detach()}return function(s){var a,l;s=(s=s.getSelection().getStartElement()).getAscendant(V,1),g(e,s)||!s||s.equals(e.editable)||s.contains(e.editable)||((a=r(s))&&"false"==a.getAttribute("contenteditable")&&(s=a),e.element=s,d(a=o(e,s,!t))&&a.is(e.triggers)&&a.is(K)&&(!o(e,a,!t)||(l=o(e,a,!t))&&d(l)&&l.is(e.triggers))?n(a):d(l=i(e))&&(o(e,l,!t)?(s=o(e,l,!t))&&d(s)&&s.is(e.triggers)&&n(l):n(l)))}}()}}function u(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var i=e.line;return i.wrap.equals(t)||i.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function h(e){return!!d(e)&&((t=p(e))||(t=!(!d(e)||!(t={left:1,right:1,center:1})[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])),t);var t}function p(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function m(e,t){return d(t)?t.is(e.triggers):null}function g(e,t){if(!t)return!1;for(var i=t.getParents(1),n=i.length;n--;)for(var o=e.tabuList.length;o--;)if(i[n].hasAttribute(e.tabuList[o]))return!0;return!1}function f(e){var i=e.editable,n=e.mouse,o=e.view,r=e.triggerOffset;_(e);var a=n.y>(e.inInlineMode?o.editable.top+o.editable.height/2:Math.min(o.editable.height,o.pane.height)/2);return i=i[a?"getLast":"getFirst"]((function(e){return!(G(e)||$(e))})),i?(u(e,i)&&(i=e.line.wrap[a?"getPrevious":"getNext"]((function(e){return!(G(e)||$(e))}))),d(i)&&!h(i)&&m(e,i)?(v(e,i),!a&&0<=i.size.top&&s(n.y,0,i.size.top+r)?(e=e.inInlineMode||0===o.scroll.y?L:M,new t([null,i,D,P,e])):a&&i.size.bottom<=o.pane.height&&s(n.y,i.size.bottom-r,o.pane.height)?(e=e.inInlineMode||s(i.size.bottom,o.pane.height-r,o.pane.height)?A:M,new t([i,null,O,P,e])):null):null):null}function y(e){var n=e.mouse,r=e.view,a=e.triggerOffset,l=i(e);if(!l)return null;v(e,l),a=Math.min(a,0|l.size.outerHeight/2);var c,u,p=[];if(s(n.y,l.size.top-1,l.size.top+a))u=!1;else{if(!s(n.y,l.size.bottom-a,l.size.bottom+1))return null;u=!0}if(h(l)||function(e,t,i){return t=t[i?"getLast":"getFirst"]((function(t){return e.isRelevant(t)&&!t.is(F)})),!!t&&(v(e,t),i?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y)}(e,l,u)||l.getParent().is(N))return null;var g=o(e,l,!u);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(d(g)){if(h(g)||!m(e,g)||g.getParent().is(N))return null;p=[g,l][u?"reverse":"concat"]().concat([R,P])}}else l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?(_(e),u&&s(n.y,l.size.bottom-a,r.pane.height)&&s(l.size.bottom,r.pane.height-a,r.pane.height)?c=A:s(n.y,0,l.size.top+a)&&(c=L)):c=M,p=[null,l][u?"reverse":"concat"]().concat([u?O:D,P,c,l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?u?A:L:M]);return 0 in p?new t(p):null}function b(e,t,i,n){for(var o=t.getDocumentPosition(),s={},r={},a={},l={},c=Y.length;c--;)s[Y[c]]=parseInt(t.getComputedStyle.call(t,"border-"+Y[c]+"-width"),10)||0,a[Y[c]]=parseInt(t.getComputedStyle.call(t,"padding-"+Y[c]),10)||0,r[Y[c]]=parseInt(t.getComputedStyle.call(t,"margin-"+Y[c]),10)||0;return i&&!n||C(e,n),l.top=o.y-(i?0:e.view.scroll.y),l.left=o.x-(i?0:e.view.scroll.x),l.outerWidth=t.$.offsetWidth,l.outerHeight=t.$.offsetHeight,l.height=l.outerHeight-(a.top+a.bottom+s.top+s.bottom),l.width=l.outerWidth-(a.left+a.right+s.left+s.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,e.inInlineMode&&(l.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),w({border:s,padding:a,margin:r,ignoreScroll:i},l,!0)}function v(e,t,i){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==i&&t.size.date>new Date-H)return null}else t.size={};return w(t.size,b(e,t,i),{date:+new Date},!0)}function _(e,t){e.view.editable=b(e,e.editable,t,!0)}function C(e,t){e.view||(e.view={});var i=e.view;if(!(!t&&i&&i.date>new Date-H)){i=(n=e.win).getScrollPosition();var n=n.getViewPaneSize();w(e.view,{scroll:{x:i.x,y:i.y,width:e.doc.$.documentElement.scrollWidth-n.width,height:e.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+i.y},date:+new Date},!0)}}CKEDITOR.plugins.add("magicline",{init:function(e){var n,s,r,m=e.config,v=m.magicline_triggerOffset||30,T={editor:e,enterMode:m.enterMode,triggerOffset:v,holdDistance:0|v*(m.magicline_holdDistance||.5),boxColor:m.magicline_color||"#ff0000",rtl:"rtl"==m.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(m.magicline_tabuList||[]),triggers:m.magicline_everywhere?V:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(e){return d(e)&&!u(T,e)&&!h(e)}};e.on("contentDom",(function(){var d=e.editable(),h=e.document,v=e.window;w(T,{editable:d,inInlineMode:d.isInline(),doc:h,win:v,hotNode:null},!0),T.boundary=T.inInlineMode?T.editable:T.doc.getDocumentElement(),d.is(S.$inline)||(T.inInlineMode&&!p(d)&&d.setStyles({position:"relative",top:null,left:null}),a.call(this,T),C(T),d.attachListener(e,"beforeUndoImage",(function(){T.line.detach()})),d.attachListener(e,"beforeGetData",(function(){T.line.wrap.getParent()&&(T.line.detach(),e.once("getData",(function(){T.line.attach()}),null,null,1e3))}),null,null,0),d.attachListener(T.inInlineMode?h:h.getWindow().getFrame(),"mouseout",(function(t){if("wysiwyg"==e.mode)if(T.inInlineMode){var i=t.data.$.clientX;t=t.data.$.clientY,C(T),_(T,!0);var n=T.view.editable,o=T.view.scroll;i>n.left-o.x&&i<n.right-o.x&&t>n.top-o.y&&t<n.bottom-o.y||(clearTimeout(r),r=null,T.line.detach())}else clearTimeout(r),r=null,T.line.detach()})),d.attachListener(d,"keyup",(function(){T.hiddenMode=0})),d.attachListener(d,"keydown",(function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:T.hiddenMode=1,T.line.detach()}})),d.attachListener(T.inInlineMode?d:h,"mousemove",(function(t){if(s=!0,"wysiwyg"==e.mode&&!e.readOnly&&!r){var i={x:t.data.$.clientX,y:t.data.$.clientY};r=setTimeout((function(){T.mouse=i,r=T.trigger=null,C(T),s&&!T.hiddenMode&&e.focusManager.hasFocus&&!T.line.mouseNear()&&(T.element=W(T,!0))&&((T.trigger=f(T)||y(T)||q(T))&&!g(T,T.trigger.upper||T.trigger.lower)?T.line.attach().place():(T.trigger=null,T.line.detach()),s=!1)}),30)}})),d.attachListener(v,"scroll",(function(){"wysiwyg"==e.mode&&(T.line.detach(),I.webkit&&(T.hiddenMode=1,clearTimeout(n),n=setTimeout((function(){T.mouseDown||(T.hiddenMode=0)}),50)))})),d.attachListener(x?h:v,"mousedown",(function(){"wysiwyg"==e.mode&&(T.line.detach(),T.hiddenMode=1,T.mouseDown=1)})),d.attachListener(x?h:v,"mouseup",(function(){T.hiddenMode=0,T.mouseDown=0})),e.addCommand("accessPreviousSpace",c(T)),e.addCommand("accessNextSpace",c(T,!0)),e.setKeystroke([[m.magicline_keystrokePrevious,"accessPreviousSpace"],[m.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",(function(){var t,i,n,o;for(o in{p:1,br:1,div:1})for(n=(t=e.document.getElementsByTag(o)).count();n--;)if((i=t.getItem(n)).data("cke-magicline-hot"))return T.hotNode=i,void(T.lastCmdDirection="true"===i.data("cke-magicline-dir"))})),this.backdoor={accessFocusSpace:l,boxTrigger:t,isLine:u,getAscendantTrigger:i,getNonEmptyNeighbour:o,getSize:b,that:T,triggerEdge:y,triggerEditable:f,triggerExpand:q})}),this)}});var w=CKEDITOR.tools.extend,T=CKEDITOR.dom.element,E=T.createFromHtml,I=CKEDITOR.env,x=CKEDITOR.env.ie&&9>CKEDITOR.env.version,S=CKEDITOR.dtd,k={},D=128,O=64,R=32,P=16,L=4,A=2,M=1,B=" ",N=S.$listItem,F=S.$tableContent,K=w({},S.$nonEditable,S.$empty),V=S.$block,H=100,j="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",U=j+"border-color:transparent;display:block;border-style:solid;",z="<span>"+B+"</span>";k[CKEDITOR.ENTER_BR]="br",k[CKEDITOR.ENTER_P]="p",k[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,i){return this.properties=e+t+(i||M),this},is:function(e){return(this.properties&e)==e}};var W=function(){function e(e,t){var i=e.$.elementFromPoint(t.x,t.y);return i&&i.nodeType?new CKEDITOR.dom.element(i):null}return function(t,i,n){if(!t.mouse)return null;var o=t.doc,s=t.line.wrap,r=e(o,n=n||t.mouse);return i&&u(t,r)&&(s.hide(),r=e(o,n),s.show()),!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||I.ie&&9>I.version&&!t.boundary.equals(r)&&!t.boundary.contains(r)?null:r}}(),G=CKEDITOR.dom.walker.whitespaces(),$=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),q=function(){function i(i){var r,a,l;if(!d(m=i.element)||m.contains(i.editable)||m.isReadOnly())return null;if(l=function(e,i,n,o){for(var s=o,r=o,a=0,l=!1,c=!1,u=e.view.pane.height,d=e.mouse;d.y+a<u&&0<d.y-a&&(l||(l=i(s,o)),c||(c=i(r,o)),!l&&0<d.y-a&&(s=n(e,{x:d.x,y:d.y-a})),!c&&d.y+a<u&&(r=n(e,{x:d.x,y:d.y+a})),!l||!c);)a+=2;return new t([s,r,null,null])}(i,(function(e,t){return!t.equals(e)}),(function(e,t){return W(e,!0,t)}),m),e(0,r=l.upper,a=l.lower))return l.set(R,8);if(r&&m.contains(r))for(;!r.getParent().equals(m);)r=r.getParent();else r=m.getFirst((function(e){return o(i,e)}));if(a&&m.contains(a))for(;!a.getParent().equals(m);)a=a.getParent();else a=m.getLast((function(e){return o(i,e)}));if(!r||!a)return null;if(v(i,r),v(i,a),!s(i.mouse.y,r.size.top,a.size.bottom))return null;for(var c,u,h,p,m=Number.MAX_VALUE;a&&!a.equals(r)&&(u=r.getNext(i.isRelevant));)(c=Math.abs(n(i,r,u)-i.mouse.y))<m&&(m=c,h=r,p=u),v(i,r=u);return h&&p&&s(i.mouse.y,h.size.top,p.size.bottom)?(l.upper=h,l.lower=p,l.set(R,8)):null}function o(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||$(t)||h(t)||u(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(t){var n,o=i(t);if(n=o){n=o.upper;var s=o.lower;n=!(!n||!s||h(s)||h(n)||s.equals(n)||n.equals(s)||s.contains(n)||n.contains(s)||!(m(t,n)&&m(t,s)&&e(0,n,s)))}return n?o:null}}(),Y=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],i=["style","className"],n=0;n<i.length;n++){var o=e.$.elements.namedItem(i[n]);o&&(o=new CKEDITOR.dom.element(o),t.push([o,o.nextSibling]),o.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var i=t.length-1;0<=i;i--){var n=t[i][0],o=t[i][1];o?n.insertBefore(o):n.appendTo(e)}}function i(i,n){var o=e(i),s={},r=i.$;return n||(s.class=r.className||"",r.className=""),s.inline=r.style.cssText||"",n||(r.style.cssText="position: static; overflow: visible"),t(o),s}function n(i,n){var o=e(i),s=i.$;"class"in n&&(s.className=n.class),"inline"in n&&(s.style.cssText=n.inline),t(o)}function o(e){if(!e.editable().isInline()){var t,i=CKEDITOR.instances;for(t in i){var n=i[t];"wysiwyg"!=n.mode||n.readOnly||((n=n.document.getBody()).setAttribute("contentEditable",!1),n.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=u.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s,r,a,l=e.lang,c=CKEDITOR.document,u=c.getWindow(),d=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=e.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})),p=e.ui.space("contents");if("wysiwyg"==e.mode){var m=e.getSelection();s=m&&m.getRanges(),r=u.getScrollPosition()}else{var g=e.editable().$;s=!CKEDITOR.env.ie&&[g.selectionStart,g.selectionEnd],r=[g.scrollLeft,g.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(u.on("resize",t),a=u.getScrollPosition(),m=e.container;m=m.getParent();)m.setCustomData("maximize_saved_styles",i(m)),m.setStyle("z-index",e.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",i(p,!0)),h.setCustomData("maximize_saved_styles",i(h,!0)),p={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},c.getDocumentElement().setStyles(p),!CKEDITOR.env.gecko&&c.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||c.getBody().setStyles(p),CKEDITOR.env.ie?setTimeout((function(){u.$.scrollTo(0,0)}),0):u.$.scrollTo(0,0),h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),h.$.offsetLeft,h.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),h.addClass("cke_maximized"),t(),p=h.getDocumentPosition(),h.setStyles({left:-1*p.x+"px",top:-1*p.y+"px"}),CKEDITOR.env.gecko&&o(e)}else if(this.state==CKEDITOR.TRISTATE_ON){u.removeListener("resize",t),m=[p,h];for(var f=0;f<m.length;f++)n(m[f],m[f].getCustomData("maximize_saved_styles")),m[f].removeCustomData("maximize_saved_styles");for(m=e.container;m=m.getParent();)n(m,m.getCustomData("maximize_saved_styles")),m.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout((function(){u.$.scrollTo(a.x,a.y)}),0):u.$.scrollTo(a.x,a.y),h.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout((function(){h.setStyle("display","block")}),0)),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:p.$.offsetHeight,outerWidth:e.container.$.offsetWidth})}this.toggleState(),(m=this.uiItems[0])&&(p=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,(m=CKEDITOR.document.getById(m._.id)).getChild(1).setHtml(p),m.setAttribute("title",p),m.setAttribute("href",'javascript:void("'+p+'");')),"wysiwyg"==e.mode?s?(CKEDITOR.env.gecko&&o(e),e.getSelection().selectRanges(s),(g=e.getSelection().getStartElement())&&g.scrollIntoView(!0)):u.$.scrollTo(r.x,r.y):(s&&(g.selectionStart=s[0],g.selectionEnd=s[1]),g.scrollLeft=r[0],g.scrollTop=r[1]),s=r=null,d=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",(function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)}),null,null,100)}}})}(),CKEDITOR.plugins.add("newpage",{init:function(e){e.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(e){var t=this;e.setData(e.config.newpage_html||"",(function(){e.focus(),setTimeout((function(){e.fire("afterCommandExec",{name:"newpage",command:t}),e.selectionChange()}),200)}))},async:!0}),e.ui.addButton&&e.ui.addButton("NewPage",{label:e.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}}),function(){function e(e){return{"aria-label":e,class:"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:e}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var e=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+e+"}")},init:function(e){e.blockless||(e.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton("PageBreak",{label:e.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&e.on("contentDom",(function(){e.document.on("click",(function(t){(t=t.data.getTarget()).is("div")&&t.hasClass("cke_pagebreak")&&e.getSelection().selectElement(t)}))})))},afterInit:function(t){function i(i){CKEDITOR.tools.extend(i.attributes,e(t.lang.pagebreak.alt),!0),i.children.length=0}var n=(o=t.dataProcessor)&&o.dataFilter,o=o&&o.htmlFilter,s=/page-break-after\s*:\s*always/i,r=/display\s*:\s*none/i;o&&o.addRules({attributes:{class:function(e,t){var i=e.replace("cke_pagebreak","");if(i!=e){var n=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];t.children.length=0,t.add(n),delete(n=t.attributes)["aria-label"],delete n.contenteditable,delete n.title}return i}}},{applyToAll:!0,priority:5}),n&&n.addRules({elements:{div:function(e){if(e.attributes["data-cke-pagebreak"])i(e);else if(s.test(e.attributes.style)){var t=e.children[0];t&&"span"==t.name&&r.test(t.attributes.style)&&i(e)}}}})}}),CKEDITOR.plugins.pagebreakCmd={exec:function(t){var i=t.document.createElement("div",{attributes:e(t.lang.pagebreak.alt)});t.insertElement(i)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(e){return(e=e.parent)&&"div"==e.name&&e.styles&&e.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}}(),function(){var e={canUndo:!1,async:!0,exec:function(e,t){var i=e.lang,n=CKEDITOR.tools.keystrokeToString(i.common.keyboard,e.getCommandKeystroke(CKEDITOR.env.ie?e.commands.paste:this)),o=t&&void 0!==t.notification?t.notification:!t||!t.from||"keystrokeHandler"===t.from&&CKEDITOR.env.ie;i=o&&"string"==typeof o?o:i.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+n.aria+'">'+n.display+"</kbd>"),e.execCommand("paste",{type:"text",notification:!!o&&i})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){var i=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;t.addCommand("pastetext",e),t.setKeystroke(i,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",(function(e){"html"!=e.data.type&&(e.data.type="text")})),t.on("pasteState",(function(e){t.getCommand("pastetext").setState(e.data)}))}})}(),CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(e){var t=0,i=this.path,n=void 0===e.config.pasteFromWord_inlineImages||e.config.pasteFromWord_inlineImages;e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e,i){t=1,e.execCommand("paste",{type:"html",notification:!i||void 0===i.notification||i.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(e,"PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),e.on("paste",(function(n){var o=n.data,s=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?o.dataTransfer.getData("text/html",!0):null,r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?o.dataTransfer.getData("text/rtf"):null,a={dataValue:s=s||o.dataValue,dataTransfer:{"text/rtf":r}};if(r=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,r=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(s)||r.test(s),s&&(t||r)&&(!1!==e.fire("pasteFromWord",a)||t)){o.dontFilter=!0;var l=function(e,t,i){var n=CKEDITOR.cleanWord;return n?i():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,i,null,!0)),!n}(e,i,(function(){l?e.fire("paste",o):(!e.config.pasteFromWordPromptCleanup||t||confirm(e.lang.pastefromword.confirmCleanup))&&(a.dataValue=CKEDITOR.cleanWord(a.dataValue,e),e.fire("afterPasteFromWord",a),o.dataValue=a.dataValue,!0===e.config.forcePasteAsPlainText?o.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==e.config.forcePasteAsPlainText||(o.type="html")),t=0}));l&&n.cancel()}}),null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&n&&e.on("afterPasteFromWord",(function(e){var t,i=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,n=[];if(i&&e.editor.filter.check("img[src]")&&0!==(t=i.extractTagsFromHtml(e.data.dataValue)).length&&0!==(i=i.extractFromRtf(e.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(i,(function(e){n.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)}),this),t.length===n.length))for(i=0;i<t.length;i++)0===t[i].indexOf("file://")&&n[i]&&(e.data.dataValue=e.data.dataValue.replace(t[i],n[i]))}))}}),function(){var e,t={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(t){var i,n,o=(s=t.config).baseHref?'<base href="'+s.baseHref+'"/>':"";if(s.fullPage)i=t.getData().replace(/<head>/,"$&"+o).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+t.lang.preview.preview);else{var s="<body ";(a=t.document&&t.document.getBody())&&(a.getAttribute("id")&&(s+='id="'+a.getAttribute("id")+'" '),a.getAttribute("class")&&(s+='class="'+a.getAttribute("class")+'" ')),s+=">",i=t.config.docType+'<html dir="'+t.config.contentsLangDirection+'"><head>'+o+"<title>"+t.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(t.config.contentsCss)+"</head>"+s+t.getData()+"</body></html>"}o=640,s=420,a=80;try{var r=window.screen,a=(o=Math.round(.8*r.width),s=Math.round(.7*r.height),Math.round(.1*r.width))}catch(e){}return!1!==t.fire("contentPreview",t={dataValue:i})&&(r="",CKEDITOR.env.ie&&(window._cke_htmlToLoad=t.dataValue,n="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",r=""),CKEDITOR.env.gecko&&(window._cke_htmlToLoad=t.dataValue,r=CKEDITOR.getUrl(e+"preview.html")),r=window.open(r,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+o+",height="+s+",left="+a),CKEDITOR.env.ie&&r&&(r.location=n),CKEDITOR.env.ie||CKEDITOR.env.gecko||((n=r.document).open(),n.write(t.dataValue),n.close()),!0)}};CKEDITOR.plugins.add("preview",{init:function(i){i.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e=this.path,i.addCommand("preview",t),i.ui.addButton&&i.ui.addButton("Preview",{label:i.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})}(),CKEDITOR.plugins.add("print",{init:function(e){e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e.addCommand("print",CKEDITOR.plugins.print),e.ui.addButton&&e.ui.addButton("Print",{label:e.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function(e){CKEDITOR.env.gecko?e.window.$.print():e.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,i=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),o=CKEDITOR.plugins.removeformat.filter,s=e.getSelection().getRanges(),r=s.createIterator(),a=function(e){return e.type==CKEDITOR.NODE_ELEMENT};t=r.getNextRange();){t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=t.createBookmark(),c=l.startNode,u=l.endNode,d=function(t){for(var n,s=e.elementPath(t),r=s.elements,a=1;(n=r[a])&&!n.equals(s.block)&&!n.equals(s.blockLimit);a++)i.test(n.getName())&&o(e,n)&&t.breakParent(n)};if(d(c),u)for(d(u),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(u);)if(c.isReadOnly()){if(c.getPosition(u)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(a)}else d=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!o(e,c)||(i.test(c.getName())?c.remove(1):(c.removeAttributes(n),e.fire("removeFormatCleanup",c))),c=d;t.moveToBookmark(l)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(s)}}},filter:function(e,t){for(var i=e._.removeFormatFilters||[],n=0;n<i.length;n++)if(!1===i[n](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){var e={readOnly:1,modes:{wysiwyg:1,source:1},exec:function(e){if(e.fire("save")&&(e=e.element.$.form))try{e.submit()}catch(t){e.submit.click&&e.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand("save",e).startDisabled=!t.element.$.form,t.ui.addButton&&t.ui.addButton("Save",{label:t.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),CKEDITOR.plugins.add("selectall",{init:function(e){e.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(e){var t=e.editable();if(t.is("textarea"))e=t.$,CKEDITOR.env.ie&&e.createTextRange?e.createTextRange().execCommand("SelectAll"):(e.selectionStart=0,e.selectionEnd=e.value.length),e.focus();else{if(t.is("body"))e.document.$.execCommand("SelectAll",!1,null);else{var i=e.createRange();i.selectNodeContents(t),i.select()}e.forceNextSelectionCheck(),e.selectionChange()}},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SelectAll",{label:e.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}}),function(){var e={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state!=CKEDITOR.TRISTATE_ON||e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!e.focusManager.hasFocus?"removeClass":"attachClass";e.editable()[t]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var e,t,i,n,o,s,r="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),a=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),c=l?":not([contenteditable=false]):not(.cke_show_blocks_off)":"";for(e=t=i=n="";o=r.pop();)e+=".cke_show_blocks "+o+c+(s=r.length?",":""),i+=".cke_show_blocks.cke_contents_ltr "+o+c+s,n+=".cke_show_blocks.cke_contents_rtl "+o+c+s,t+=".cke_show_blocks "+o+c+"{background-image:url("+CKEDITOR.getUrl(a+"images/block_"+o+".png")+")}";CKEDITOR.addCss((e+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(t,i+"{background-position:top left;padding-left:8px}",n+"{background-position:top right;padding-right:8px}")),l||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(t){function i(){n.refresh(t)}if(!t.blockless){var n=t.addCommand("showblocks",e);n.canUndo=!1,t.config.startupOutlineBlocks&&n.setState(CKEDITOR.TRISTATE_ON),t.ui.addButton&&t.ui.addButton("ShowBlocks",{label:t.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"}),t.on("mode",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)})),t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t.on("focus",i),t.on("blur",i)),t.on("contentDom",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)}))}}})}(),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var i=t.addCommand("showborders",e);i.canUndo=!1,!1!==t.config.startupShowBorders&&i.setState(CKEDITOR.TRISTATE_ON),t.on("mode",(function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)}),null,null,100),t.on("contentDom",(function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)})),t.on("removeFormatCleanup",(function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||0>=parseInt(e.getAttribute("border"),10))&&e.addClass("cke_show_border")}))},afterInit:function(e){var t=e.dataProcessor;e=t&&t.dataFilter,t=t&&t.htmlFilter,e&&e.addRules({elements:{table:function(e){var t=(e=e.attributes).class,i=parseInt(e.border,10);i&&!(0>=i)||t&&-1!=t.indexOf("cke_show_border")||(e.class=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){var t=(e=e.attributes).class;t&&(e.class=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;"table"!=t&&"tableProperties"!=t||((t=(e=e.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(t.commit,(function(e){return function(t,i){e.apply(this,arguments);var n=parseInt(this.getValue(),10);i[!n||0>=n?"addClass":"removeClass"]("cke_show_border")}})),(e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))&&(e.setup=CKEDITOR.tools.override(e.setup,(function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}})),e.commit=CKEDITOR.tools.override(e.commit,(function(e){return function(t,i){e.apply(this,arguments),parseInt(i.getAttribute("border"),10)||i.addClass("cke_show_border")}}))))}))}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function i(){var e=o&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var n=CKEDITOR.plugins.sourcearea;t.addMode("source",(function(n){var o=t.ui.space("contents").getDocument().createElement("textarea");o.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),o.setAttribute("dir","ltr"),o.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),t.ui.space("contents").append(o),(o=t.editable(new e(t,o))).setData(t.getData(1)),CKEDITOR.env.ie&&(o.attachListener(t,"resize",i,o),o.attachListener(CKEDITOR.document.getWindow(),"resize",i,o),CKEDITOR.tools.setTimeout(i,0,o)),t.fire("ariaWidget",this),n()})),t.addCommand("source",n.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",(function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}));var o=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var i=e.langCode;i=t.availableLangs[i]?i:t.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+i+".js"),(function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[i]),e.openDialog("specialchar")}))},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(e){CKEDITOR.plugins.scayt.onLoadTimestamp=(new Date).getTime(),"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css"),CKEDITOR.document.appendStyleSheet(this.path+"dialogs/dialog.css")},init:function(e){var t=this,i=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var n=e.lang.scayt,o=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:n.text_title,title:e.plugins.wsc?e.lang.wsc.title:n.text_title,modes:{wysiwyg:!(o.ie&&(8>o.version||o.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=i.state.scayt[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",t)},onRender:function(){var t=this;e.on("scaytButtonState",(function(e){void 0!==typeof e.data&&t.setState(e.data)}))},onMenu:function(){var t=e.scayt;e.getMenuItem("scaytToggle").label=e.lang.scayt[t&&i.state.scayt[e.name]?"btn_disable":"btn_enable"];var n={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return e.config.scayt_uiTabs[0]||delete n.scaytOptions,e.config.scayt_uiTabs[1]||delete n.scaytLangs,e.config.scayt_uiTabs[2]||delete n.scaytDict,t&&!CKEDITOR.plugins.scayt.isNewUdSupported(t)&&(delete n.scaytDict,e.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),n}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener((function(i,n){var o,s,r=e.scayt;return r&&(s=r.getSelectionNode())&&(o=t.menuGenerator(e,s),r.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))),o})),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,(function(t){return function(){var i=e.scayt;return i&&i.hideBanner(),t.apply(this)}})))},addMenuItems:function(e){var t=this,i=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");for(var n=e.config.scayt_contextMenuItemsOrder.split("|"),o=0;o<n.length;o++)n[o]="scayt_"+n[o];if((n=["grayt_description","grayt_suggest","grayt_control"].concat(n))&&n.length)for(o=0;o<n.length;o++)e.addMenuGroup(n[o],o-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;i.state.scayt[e.name]=!i.state.scayt[e.name],!0===i.state.scayt[e.name]?t||i.createScayt(e):t&&i.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",i.openDialog(t.dialogName,e)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",i.openDialog(t.dialogName,e)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",i.openDialog(t.dialogName,e)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",i.openDialog(t.dialogName,e)}}),n={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(n.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,i=e.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(n=n.replace(/\s/g,""))?(i&&t.state.scayt[e.name]&&i.setMarkupPaused&&i.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(n)},bindEvents:function(e){var t=CKEDITOR.plugins.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,n=function(){t.destroy(e)},o=function(){!t.state.scayt[e.name]||e.readOnly||e.scayt||t.createScayt(e)},s=function(){i?e.config.scayt_inlineModeImmediateMarkup?o():(e.on("blur",(function(){setTimeout(n,0)})),e.on("focus",o),e.focusManager.hasFocus&&o()):o(),function(){var t=e.editable();t.attachListener(t,"focus",(function(t){var n,s;if(CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(o,0),t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt,(i||t)&&e._.savedSelection){t=!(t=e._.savedSelection.getSelectedElement())&&e._.savedSelection.getRanges();for(var r=0;r<t.length;r++)"string"==typeof(s=t[r]).startContainer.$.nodeValue&&((n=s.startContainer.getText().length)<s.startOffset||n<s.endOffset)&&e.unlockSelection(!1)}}),this,null,-10)}();var t=e.editable();t.attachListener(t,"mousedown",(function(t){t=t.data.getTarget();var i=e.widgets&&e.widgets.getByElement(t);i&&(i.wrapper=t.getAscendant((function(e){return e.hasAttribute("data-cke-widget-wrapper")}),!0))}),this,null,-10)};e.on("contentDom",s),e.on("beforeCommandExec",(function(i){var n=e.scayt,o=!1,s=!1,r=!0;i.data.name in t.options.disablingCommandExec&&"wysiwyg"==e.mode?n&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==i.data.name&&"italic"!==i.data.name&&"underline"!==i.data.name&&"strike"!==i.data.name&&"subscript"!==i.data.name&&"superscript"!==i.data.name&&"enter"!==i.data.name&&"cut"!==i.data.name&&"language"!==i.data.name||!n||("cut"===i.data.name&&(r=!1,s=!0),"language"===i.data.name&&(s=o=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:r,forceBookmark:s,language:o},timeout:0}))})),e.on("beforeSetMode",(function(i){"source"==i.data&&((i=e.scayt)&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))})),e.on("afterCommandExec",(function(i){"wysiwyg"!=e.mode||"undo"!=i.data.name&&"redo"!=i.data.name||setTimeout((function(){t.reloadMarkup(e.scayt)}),250)})),e.on("readOnly",(function(i){var n;i&&(n=e.scayt,!0===i.editor.readOnly?n&&n.fire("removeMarkupInDocument",{}):n?t.reloadMarkup(n):"wysiwyg"==i.editor.mode&&!0===t.state.scayt[i.editor.name]&&(t.createScayt(e),i.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))})),e.on("beforeDestroy",n),e.on("setData",(function(){n(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&s()}),this,null,50),e.on("reloadMarkupScayt",(function(i){var n=i.data&&i.data.removeOptions,o=i.data&&i.data.timeout,s=i.data&&i.data.language,r=e.scayt;r&&setTimeout((function(){s&&(n.selectionNode=e.plugins.language.getCurrentLangElement(e),n.selectionNode=n.selectionNode&&n.selectionNode.$||null),r.removeMarkupInSelectionNode(n),t.reloadMarkup(r)}),o||0)})),e.on("insertElement",(function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})}),this,null,50),e.on("insertHtml",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("insertText",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("scaytDialogShown",(function(t){t.data.selectPage(e.scayt.tabToOpen)}))},parseConfig:function(e){if((n=CKEDITOR.plugins.scayt).replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),n.state.scayt[e.name]=e.config.scayt_autoStartup,"boolean"!=typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1),"boolean"!=typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1),n.state.grayt[e.name]=e.config.grayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=3),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=3),void 0!==e.config.scayt_customDictionaryIds&&"string"==typeof e.config.scayt_customDictionaryIds||(e.config.scayt_customDictionaryIds=""),void 0!==e.config.scayt_userDictionaryName&&"string"==typeof e.config.scayt_userDictionaryName||(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var t=[],i=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,(function(e){1===Number(e)||0===Number(e)?(i.push(!0),t.push(Number(e))):i.push(!1)})),null===CKEDITOR.tools.search(i,!1)?e.config.scayt_uiTabs=t:e.config.scayt_uiTabs=[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_customPunctuation&&(e.config.scayt_customPunctuation="-"),"string"!=typeof e.config.scayt_srcUrl&&(n=-1!=(n=document.location.protocol).search(/https?:/)?n:"http:",e.config.scayt_srcUrl=n+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof e.config.scayt_multiLanguageMode&&(e.config.scayt_multiLanguageMode=!1),"object"!=typeof e.config.scayt_multiLanguageStyles&&(e.config.scayt_multiLanguageStyles={}),e.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1),e.config.scayt_ignoreDomainNames&&"boolean"!=typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1),e.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1),e.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1),e.config.scayt_disableOptionsStorage){var n=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,o="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),s=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],r=CKEDITOR.tools.search,a=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=!!r(e,"options");if(!r(o,i)||n&&r(s,(function(e){if("lang"===e)return!1})))return;if(r(s,i)&&s.splice(a(s,i),1),"all"===i||n&&r(e,"lang"))return[];"options"===i&&(s=["lang"])}return[].concat(s)}(n)}},addRule:function(e){var t=CKEDITOR.plugins.scayt,i=(o=e.dataProcessor)&&o.htmlFilter,n=e._.elementsPath&&e._.elementsPath.filters,o=o&&o.dataFilter,s=e.addRemoveFormatFilter;n&&n.push((function(i){if(e.scayt&&(i.hasAttribute(t.options.data_attribute_name)||i.hasAttribute(t.options.problem_grammar_data_attribute)))return!1})),o&&o.addRules({elements:{span:function(e){var i=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],n=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(i||n)&&delete e.name,e}}}),i&&i.addRules({elements:{span:function(e){var i=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],n=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(i||n)&&delete e.name,e}}}),s&&s.call(e,(function(i){var n=!0;return e.scayt&&(i.hasAttribute(t.options.data_attribute_name)||i.hasAttribute(t.options.problem_grammar_data_attribute))&&(n=!1),n}))},scaytMenuDefinition:function(e){var t=this,i=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(e=e.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout((function(){t.addWordToUserDictionary()}),10)}},scayt_option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",i.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[0]}},scayt_language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",i.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[1]}},scayt_dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",i.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[2]}},scayt_about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",i.openDialog(t.dialogName,e)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(e){}},grayt_ignore:{label:e.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(e){e.scayt.ignorePhrase()}},grayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(e){e.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(e,t,i){var n={},o={},s=i?"word":"phrase",r=i?"startGrammarCheck":"startSpellCheck",a=e.scayt;if(0<t.length&&"no_any_suggestions"!==t[0])if(i)for(i=0;i<t.length;i++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[i].replace(" ","_");e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[i],s,r)),i<e.config.scayt_maxSuggestions?(e.addMenuItem(l,{label:t[i],command:l,group:"scayt_suggest",order:i+1}),n[l]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(l,{label:t[i],command:l,group:"scayt_moresuggest",order:i+1}),o[l]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:a.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return o}}),n.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(i=0;i<t.length;i++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[i].replace(" ","_"),e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[i],s,r)),e.addMenuItem(l,{label:t[i],command:l,group:"grayt_suggest",order:i+1}),n[l]=CKEDITOR.TRISTATE_OFF;else n.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:a.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return n},menuGenerator:function(e,t){var i,n,o,s,r=e.scayt,a=this.scaytMenuDefinition(e),l={},c=e.config.scayt_contextCommands.split("|"),u=t.getAttribute(r.getLangAttribute())||r.getLang();if(n=r.isScaytNode(t),o=r.isGraytNode(t),n?(a=a.scayt,i=t.getAttribute(r.getScaytNodeAttributeName()),r.fire("getSuggestionsList",{lang:u,word:i}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,n)):o&&(a=a.grayt,l=t.getAttribute(r.getGraytNodeAttributeName()),r.getGraytNodeRuleAttributeName?(i=t.getAttribute(r.getGraytNodeRuleAttributeName()),r.getProblemDescriptionText(l,i,u)):r.getProblemDescriptionText(l,u),s=r.getProblemDescriptionText(l,i,u),a.grayt_problemdescription&&s&&(s=s.replace(/([.!?])\s/g,"$1<br>"),a.grayt_problemdescription.label=s),r.fire("getGrammarSuggestionsList",{lang:u,phrase:l,rule:i}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,n)),n&&"off"==e.config.scayt_contextCommands)return l;for(var d in a)n&&-1==CKEDITOR.tools.indexOf(c,d.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||o&&"grayt_problemdescription"!==d&&-1==CKEDITOR.tools.indexOf(c,d.replace("grayt_",""))&&"all"!=e.config.scayt_contextCommands||(l[d]=void 0!==a[d].state?a[d].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof a[d].verification||a[d].verification(e)||delete l[d],e.addCommand(d,{exec:a[d].exec}),e.addMenuItem(d,{label:e.lang.scayt[a[d].label]||a[d].label,command:d,group:a[d].group,order:a[d].order}));return l},createCommand:function(e,t,i){return{exec:function(n){n=n.scayt;var o={};o[t]=e,n.replaceSelectionNode(o),"startGrammarCheck"===i&&n.removeMarkupInSelectionNode({grammarOnly:!0}),n.fire(i)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var e;if(i=(i=CKEDITOR.version.match(/^\d(\.\d*)*/))&&i[0]){e="4.5.7";var t,i=i.replace(/\./g,"");e=e.replace(/\./g,""),t=0<=(t=i.length-e.length)?t:0,e=parseInt(i)>=parseInt(e)*Math.pow(10,t)}return e?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],onLoadTimestamp:"",state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(e,t){var i=t.scayt;i.isAllModulesReady&&!1===i.isAllModulesReady()||(t.lockSelection(),t.openDialog(e))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(e){return!!e.getUserDictionary},reloadMarkup:function(e){var t;e&&(t=e.getScaytLangList(),e.reloadMarkup?e.reloadMarkup():(this.alarmCompatibilityMessage(),t&&t.ltr&&t.rtl&&e.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this,i=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,(function(e){function n(e){return new SCAYT.CKSCAYT(e,(function(){}),(function(){}))}var o;if(e.window&&(o="BODY"==e.editable().$.nodeName?e.window.getFrame():e.editable()),o){var s;o={lang:e.config.scayt_sLang,container:o.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,customPunctuation:e.config.scayt_customPunctuation,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,problem_grammar_data_attribute:t.options.problem_grammar_data_attribute,problem_grammar_class:t.options.problem_grammar_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:e.config.grayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,multiLanguageMode:e.config.scayt_multiLanguageMode,multiLanguageStyles:e.config.scayt_multiLanguageStyles,graytAutoStartup:e.config.grayt_autoStartup,charsToObserve:i.charsToObserve},e.config.scayt_serviceProtocol&&(o.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(o.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(o.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(o.service_path=e.config.scayt_servicePath),"boolean"==typeof e.config.scayt_ignoreAllCapsWords&&(o["ignore-all-caps-words"]=e.config.scayt_ignoreAllCapsWords),"boolean"==typeof e.config.scayt_ignoreDomainNames&&(o["ignore-domain-names"]=e.config.scayt_ignoreDomainNames),"boolean"==typeof e.config.scayt_ignoreWordsWithMixedCases&&(o["ignore-words-with-mixed-cases"]=e.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof e.config.scayt_ignoreWordsWithNumbers&&(o["ignore-words-with-numbers"]=e.config.scayt_ignoreWordsWithNumbers);try{s=n(o)}catch(e){t.alarmCompatibilityMessage(),delete o.charsToObserve,s=n(o)}s.subscribe("suggestionListSend",(function(e){for(var t={},i=[],n=0;n<e.suggestionList.length;n++)t["word_"+e.suggestionList[n]]||(t["word_"+e.suggestionList[n]]=e.suggestionList[n],i.push(e.suggestionList[n]));CKEDITOR.plugins.scayt.suggestions=i})),s.subscribe("selectionIsChanged",(function(t){e.getSelection().isLocked&&"restoreSelection"!==t.action&&e.lockSelection(),"restoreSelection"===t.action&&e.selectionChange(!0)})),s.subscribe("graytStateChanged",(function(t){i.state.grayt[e.name]=t.state})),s.addMarkupHandler&&s.addMarkupHandler((function(t){var i=e.editable(),n=i.getCustomData(t.charName);n&&(n.$=t.node,i.setCustomData(t.charName,n))})),e.scayt=s,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else i.state.scayt[e.name]=!1}))},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var i,n=function(){CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(i=e.config.scayt_srcUrl+"?"+this.onLoadTimestamp,CKEDITOR.scriptLoader.load(i,(function(e){e&&n()}))):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&n()}},CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;e=e.data.definition.dialog,"scaytDialog"!==t&&"checkspell"!==t&&(e.on("show",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,i=e.scayt;i&&t.state.scayt[e.name]&&i.setMarkupPaused&&i.setMarkupPaused(!0)})),e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,i=e.scayt;i&&t.state.scayt[e.name]&&i.setMarkupPaused&&i.setMarkupPaused(!1)}))),"scaytDialog"===t&&e.on("cancel",(function(e){return!1}),this,null,-1),"checkspell"===t&&e.on("cancel",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,i=e.scayt;i&&t.state.scayt[e.name]&&i.setMarkupPaused&&i.setMarkupPaused(!1),e.unlockSelection()}),this,null,-2),"link"===t&&e.on("ok",(function(e){var t=e.sender&&e.sender.getParentEditor();t&&setTimeout((function(){t.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})}),0)})),"replace"===t&&e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,i=e.scayt;e&&setTimeout((function(){i&&(i.fire("removeMarkupInDocument",{}),t.reloadMarkup(i))}),0)}))})),CKEDITOR.on("scaytReady",(function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((e=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(e.checkDirty,(function(e){return function(){var t=null,i=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status){var n=i.removeMarkupFromString(this.getSnapshot());i=i.removeMarkupFromString(this._.previousValue),t=t&&i!==n}}else t=e.call(this);return t}})),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,(function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}}))),!0===CKEDITOR.config.scayt_handleUndoRedo){var e,t="function"==typeof(e=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],(function(e){return function(t){var i=t.editor.scayt,n=this.contents,o=t.contents,s=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=i.removeMarkupFromString(n)||"",t.contents=i.removeMarkupFromString(o)||""),s=e.apply(this,arguments),this.contents=n,t.contents=o,s}}))}})),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,i=e.lang.stylescombo,n={},o=[],s=[];e.on("stylesSet",(function(i){if(i=i.data.styles){for(var r,a,l,c=0,u=i.length;c<u;c++)r=i[c],e.blockless&&r.element in CKEDITOR.dtd.$block||"string"==typeof r.type&&!CKEDITOR.style.customHandlers[r.type]||(a=r.name,r=new CKEDITOR.style(r),e.filter.customConfig&&!e.filter.check(r))||(r._name=a,r._.enterMode=t.enterMode,r._.type=l=r.assignedTo||r.type,r._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),n[a]=r,o.push(r),s.push(r));o.sort((function(e,t){return e._.weight-t._.weight}))}})),e.ui.addRichCombo("Styles",{label:i.label,title:i.panelTitle,toolbar:"styles,10",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":i.panelTitle}},init:function(){var e,t,n,s,r,a;for(r=0,a=o.length;r<a;r++)t=(e=o[r])._name,(s=e._.type)!=n&&(this.startGroup(i["panelTitle"+String(s)]),n=s),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=n[t];var i=e.elementPath();t.group&&t.removeStylesFromSameGroup(e)?e.applyStyle(t):e[t.checkActive(i,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){for(var i,o=this.getValue(),s=0,r=(t=t.data.path.elements).length;s<r;s++)for(var a in i=t[s],n)if(n[a].checkElementRemovable(i,!0,e))return void(a!=o&&this.setValue(a));this.setValue("")}),this)},onOpen:function(){var t=(t=e.getSelection()).getSelectedElement()||t.getStartElement()||e.editable(),o=(t=e.elementPath(t),[0,0,0,0]);for(var s in this.showAll(),this.unmarkAll(),n){var r=n[s],a=r._.type;r.checkApplicable(t,e,e.activeFilter)?o[a]++:this.hideItem(s),r.checkActive(t,e)&&this.mark(s)}o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),o[CKEDITOR.STYLE_INLINE]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=e.elementPath();if(t){for(var i in n)if(n[i].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){n={},o=[]}})}}),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var i,n=t.getSelection();if(i=new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root).contains({td:1,th:1},1)){if(n=t.createRange(),(s=CKEDITOR.tools.tryThese((function(){var t=i.getParent().$.cells[i.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t}),(function(){var t;return(t=(t=i.getParent()).getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)]).cells[e?t.cells.length-1:0]})))||e){if(!s)return!0;s=new CKEDITOR.dom.element(s),n.moveToElementEditStart(s),n.checkStartOfBlock()&&n.checkEndOfBlock()||n.selectNodeContents(s)}else{for(var o=i.getAscendant("table").$,s=i.getParent().$.cells,r=(o=new CKEDITOR.dom.element(o.insertRow(-1),t.document),0),a=s.length;r<a;r++)o.append(new CKEDITOR.dom.element(s[r],t.document).clone(!1,!1)).appendBogus();n.moveToElementEditStart(o)}return n.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},i={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},n={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(o){for(var s=!1!==o.config.enableTabKeyTools,r=o.config.tabSpaces||0,a="";r--;)a+=" ";a&&o.on("key",(function(e){9==e.data.keyCode&&(o.insertText(a),e.cancel())})),s&&o.on("key",(function(e){(9==e.data.keyCode&&o.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand("selectPreviousCell"))&&e.cancel()})),o.addCommand("blur",CKEDITOR.tools.extend(i,t)),o.addCommand("blurBack",CKEDITOR.tools.extend(n,t)),o.addCommand("selectNextCell",e()),o.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var i,n,o,s,r,a,l=void 0===t?this.getTabIndex():t;if(0>=l)for(r=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);r;){if(r.isVisible()&&0===r.getTabIndex()){o=r;break}r=r.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(r=this.getDocument().getBody().getFirst();r=r.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&r.equals(this)){if(n=!0,e){if(!(r=r.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(r)&&(i=1);if(r.isVisible()&&!(0>(a=r.getTabIndex()))){if(i&&a==l){o=r;break}a>l&&(!o||!s||a<s)?(o=r,s=a):o||0!==a||(o=r,s=a)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var i,n,o,s,r=void 0===t?this.getTabIndex():t,a=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&l.equals(this)){if(n=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(l)&&(i=1);if(l.isVisible()&&!(0>(s=l.getTabIndex())))if(0>=r){if(i&&0===s){o=l;break}s>a&&(o=l,a=s)}else{if(i&&s==r){o=l;break}s<r&&(!o||s>a)&&(o=l,a=s)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var i=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(e){if(e.styles){var t;if(e.styles.border)t=CKEDITOR.tools.style.parse.border(e.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var i=e.styles;i["border-left"]&&i["border-left"]===i["border-right"]&&i["border-right"]===i["border-top"]&&i["border-top"]===i["border-bottom"]&&(t=CKEDITOR.tools.style.parse.border(i["border-top"]))}t&&t.style&&"solid"===t.style&&t.width&&0!==parseFloat(t.width)&&(e.attributes.border=1),"collapse"==e.styles["border-collapse"]&&(e.attributes.cellspacing=0)}}}]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var i=t.getParent(),n=e.editable();1!=i.getChildCount()||i.is("td","th")||i.equals(n)||(t=i),(e=e.createRange()).moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:i.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:i.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:i.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",(function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")})),e.contextMenu&&e.contextMenu.addListener((function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}}))}}}),function(){function e(e,t){function i(e){return!t||t.contains(e)&&e.getAscendant("table",!0).equals(t)}function n(e){0<o.length||e.type!=CKEDITOR.NODE_ELEMENT||!p.test(e.getName())||e.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(s,e,"selected_cell",!0),o.push(e))}var o=[],s={};if(!e)return o;for(var r=e.getRanges(),a=0;a<r.length;a++){var l,c;if((l=r[a]).collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&i(l)&&o.push(l);else for((l=new CKEDITOR.dom.walker(l)).guard=n;c=l.next();)c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.table)||(c=c.getAscendant({td:1,th:1},!0))&&!c.getCustomData("selected_cell")&&i(c)&&(CKEDITOR.dom.element.setMarker(s,c,"selected_cell",!0),o.push(c))}return CKEDITOR.dom.element.clearAllMarkers(s),o}function t(t,i){var n=(o=(a=m(t)?t:e(t))[0]).getAscendant("table"),o=o.getDocument(),s=(l=a[0].getParent()).$.rowIndex,r=(a=a[a.length-1]).getParent().$.rowIndex+a.$.rowSpan-1,a=new CKEDITOR.dom.element(n.$.rows[r]),l=(s=i?s:r,i?l:a);for(n=(a=CKEDITOR.tools.buildTableMap(n))[s],s=i?a[s-1]:a[s+1],a=a[0].length,o=o.createElement("tr"),r=0;n[r]&&r<a;r++){var c;1<n[r].rowSpan&&s&&n[r]==s[r]?(c=n[r]).rowSpan+=1:((c=new CKEDITOR.dom.element(n[r]).clone()).removeAttribute("rowSpan"),c.appendBogus(),o.append(c),c=c.$),r+=c.colSpan-1}return i?o.insertBefore(l):o.insertAfter(l),o}function i(t){if(t instanceof CKEDITOR.dom.selection){var n=t.getRanges(),o=(l=e(t))[0].getAscendant("table"),s=CKEDITOR.tools.buildTableMap(o),r=l[0].getParent().$.rowIndex,a=(l=l[l.length-1]).getParent().$.rowIndex+l.$.rowSpan-1,l=[];for(t.reset(),t=r;t<=a;t++){for(var c=s[t],u=new CKEDITOR.dom.element(o.$.rows[t]),d=0;d<c.length;d++){var h=new CKEDITOR.dom.element(c[d]),p=h.getParent().$.rowIndex;1==h.$.rowSpan?h.remove():(--h.$.rowSpan,p==t&&((p=s[t+1])[d-1]?h.insertAfter(new CKEDITOR.dom.element(p[d-1])):new CKEDITOR.dom.element(o.$.rows[t+1]).append(h,1))),d+=h.$.colSpan-1}l.push(u)}for(s=o.$.rows,n[0].moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),r=new CKEDITOR.dom.element(s[a+1]||(0<r?s[r-1]:null)||o.$.parentNode),t=l.length;0<=t;t--)i(l[t]);return o.$.parentNode?r:(n[0].select(),null)}return t instanceof CKEDITOR.dom.element&&(1==(o=t.getAscendant("table")).$.rows.length?o.remove():t.remove()),null}function n(e){for(var t=e.getParent().$.cells,i=0,n=0;n<t.length;n++){var o=t[n];if(i+=o.colSpan,o==e.$)break}return i-1}function o(e,t){for(var i=t?1/0:0,o=0;o<e.length;o++){var s=n(e[o]);(t?s<i:s>i)&&(i=s)}return i}function s(t,i){for(var n=(r=m(t)?t:e(t))[0].getAscendant("table"),s=o(r,1),r=o(r),a=i?s:r,l=CKEDITOR.tools.buildTableMap(n),c=(n=[],s=[],r=[],l.length),u=0;u<c;u++)n.push(l[u][a]),s.push(i?l[u][a-1]:l[u][a+1]);for(u=0;u<c;u++)n[u]&&(1<n[u].colSpan&&s[u]==n[u]?(l=n[u]).colSpan+=1:((l=(a=new CKEDITOR.dom.element(n[u])).clone()).removeAttribute("colSpan"),l.appendBogus(),l[i?"insertBefore":"insertAfter"].call(l,a),r.push(l),l=l.$),u+=l.rowSpan-1);return r}function r(e,t){var i=e.getStartElement().getAscendant({td:1,th:1},!0);if(i){var n=i.clone();n.appendBogus(),t?n.insertBefore(i):n.insertAfter(i)}}function a(t){if(t instanceof CKEDITOR.dom.selection){var i,n=t.getRanges(),o=e(t),s=o[0]&&o[0].getAscendant("table");e:{var r=0;i=o.length-1;for(var c,u,d={};c=o[r++];)CKEDITOR.dom.element.setMarker(d,c,"delete_cell",!0);for(r=0;c=o[r++];)if((u=c.getPrevious())&&!u.getCustomData("delete_cell")||(u=c.getNext())&&!u.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(d),i=u;break e}CKEDITOR.dom.element.clearAllMarkers(d),i=(r=(r=o[0].getParent()).getPrevious())?r.getLast():(r=(r=o[i].getParent()).getNext())?r.getChild(0):null}for(t.reset(),t=o.length-1;0<=t;t--)a(o[t]);i?l(i,!0):s&&(n[0].moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),n[0].select(),s.remove())}else t instanceof CKEDITOR.dom.element&&(1==(n=t.getParent()).getChildCount()?n.remove():t.remove())}function l(e,t){var i=e.getDocument(),n=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(n.focus(),i.focus()),(i=new CKEDITOR.dom.range(i))["moveToElementEdit"+(t?"End":"Start")](e)||(i.selectNodeContents(e),i.collapse(!t)),i.select(!0)}function c(e,t,i){if(e=e[t],void 0===i)return e;for(t=0;e&&t<e.length;t++){if(i.is&&e[t]==i.$)return t;if(t==i)return new CKEDITOR.dom.element(e[t])}return i.is?-1:null}function u(t,i,n){var o,s,r=e(t);if((i?1!=r.length:2>r.length)||(o=t.getCommonAncestor())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("table"))return!1;o=(t=r[0]).getAscendant("table");var a=CKEDITOR.tools.buildTableMap(o),l=a.length,u=a[0].length,d=t.getParent().$.rowIndex,h=c(a,d,t);if(i){var p;try{var m=parseInt(t.getAttribute("rowspan"),10)||1;s=parseInt(t.getAttribute("colspan"),10)||1,p=a["up"==i?d-m:"down"==i?d+m:d]["left"==i?h-s:"right"==i?h+s:h]}catch(e){return!1}if(!p||t.$==p)return!1;r["up"==i||"left"==i?"unshift":"push"](new CKEDITOR.dom.element(p))}i=t.getDocument();var g=d,f=(m=p=0,!n&&new CKEDITOR.dom.documentFragment(i)),y=0;for(i=0;i<r.length;i++){var b=(s=r[i]).getParent(),v=s.getFirst(),_=s.$.colSpan,C=s.$.rowSpan,w=c(a,b=b.$.rowIndex,s);y+=_*C,m=Math.max(m,w-h+_),p=Math.max(p,b-d+C),n||((C=(_=s).getBogus())&&C.remove(),_.trim(),s.getChildren().count()&&(b==g||!v||v.isBlockBoundary&&v.isBlockBoundary({br:1})||!(g=f.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||g.is&&g.is("br")||f.append("br"),s.moveChildren(f)),i?s.remove():s.setHtml("")),g=b}if(n)return p*m==y;for(f.moveChildren(t),t.appendBogus(),m>=u?t.removeAttribute("rowSpan"):t.$.rowSpan=p,p>=l?t.removeAttribute("colSpan"):t.$.colSpan=m,i=(r=(n=new CKEDITOR.dom.nodeList(o.$.rows)).count())-1;0<=i;i--)(o=n.getItem(i)).$.cells.length||(o.remove(),r++);return t}function d(t,i){if(1<(n=e(t)).length)return!1;if(i)return!0;var n,o,s=(u=(n=n[0]).getParent()).getAscendant("table"),r=c(d=CKEDITOR.tools.buildTableMap(s),h=u.$.rowIndex,n);if(1<(l=n.$.rowSpan)){o=Math.ceil(l/2);for(var a,l=Math.floor(l/2),u=h+o,d=(s=new CKEDITOR.dom.element(s.$.rows[u]),c(d,u)),h=(u=n.clone(),0);h<d.length;h++){if((a=d[h]).parentNode==s.$&&h>r){u.insertBefore(new CKEDITOR.dom.element(a));break}a=null}a||s.append(u)}else for(l=o=1,(s=u.clone()).insertAfter(u),s.append(u=n.clone()),a=c(d,h),r=0;r<a.length;r++)a[r].rowSpan++;return u.appendBogus(),n.$.rowSpan=o,u.$.rowSpan=l,1==o&&n.removeAttribute("rowSpan"),1==l&&u.removeAttribute("rowSpan"),u}function h(t,i){if(1<(n=e(t)).length)return!1;if(i)return!0;var n,o=(n=n[0]).getParent(),s=o.getAscendant("table"),r=c(s=CKEDITOR.tools.buildTableMap(s),o.$.rowIndex,n);if(1<(a=n.$.colSpan))o=Math.ceil(a/2),a=Math.floor(a/2);else{for(var a=o=1,l=[],u=0;u<s.length;u++){var d=s[u];l.push(d[r]),1<d[r].rowSpan&&(u+=d[r].rowSpan-1)}for(s=0;s<l.length;s++)l[s].colSpan++}return(s=n.clone()).insertAfter(n),s.appendBogus(),n.$.colSpan=o,s.$.colSpan=a,1==o&&n.removeAttribute("colSpan"),1==a&&s.removeAttribute("colSpan"),s}var p=/^(?:td|th)$/,m=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(n){function o(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function c(e,t){var i=n.addCommand(e,t);n.addFeature(i)}var p=n.lang.table,m=CKEDITOR.tools.style.parse;c("cellProperties",new CKEDITOR.dialogCommand("cellProperties",o({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table",contentTransformations:[[{element:"td",left:function(e){return e.styles.background&&m.background(e.styles.background).color},right:function(e){e.styles["background-color"]=m.background(e.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(e){return e.attributes&&e.attributes.valign},right:function(e){e.styles["vertical-align"]=e.attributes.valign,delete e.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(e){return e.styles&&e.styles.height},right:function(e){CKEDITOR.tools.array.forEach(e.children,(function(t){t.name in{td:1,th:1}&&(t.attributes["cke-row-height"]=e.styles.height)})),delete e.styles.height}}],[{element:"td",check:"td{height}",left:function(e){return(e=e.attributes)&&e["cke-row-height"]},right:function(e){e.styles.height=e.attributes["cke-row-height"],delete e.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),c("rowDelete",o({requiredContent:"table",exec:function(e){(e=i(e=e.getSelection()))&&l(e)}})),c("rowInsertBefore",o({requiredContent:"table",exec:function(i){t(i=e(i=i.getSelection()),!0)}})),c("rowInsertAfter",o({requiredContent:"table",exec:function(i){t(i=e(i=i.getSelection()))}})),c("columnDelete",o({requiredContent:"table",exec:function(t){(t=function(t){CKEDITOR.env.webkit&&!t.isFake&&(t=function(e){var t,i,n;if(1!==(t=e.getRanges()).length)return e;if((t=t[0]).collapsed||0!==t.endOffset)return e;if("td"!==(n=(i=t.endContainer).getName().toLowerCase())&&"th"!==n)return e;for((n=i.getPrevious())||(n=i.getParent().getPrevious().getLast());n.type!==CKEDITOR.NODE_TEXT&&"br"!==n.getName().toLowerCase();)if(!(n=n.getLast()))return e;return t.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),t.select()}(t));var i,n,o=t.getRanges(),s=(a=e(t))[0],r=a[a.length-1],a=s.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),c=[];t.reset();var u=0;for(t=l.length;u<t;u++)for(var d=0,h=l[u].length;d<h;d++)void 0===i&&l[u][d]==s.$&&(i=d),l[u][d]==r.$&&(n=d);for(u=i;u<=n;u++)for(d=0;d<l.length;d++)r=l[d],s=new CKEDITOR.dom.element(a.$.rows[d]),(r=new CKEDITOR.dom.element(r[u])).$&&(1==r.$.colSpan?r.remove():--r.$.colSpan,d+=r.$.rowSpan-1,s.$.cells.length||c.push(s));return i=l[0].length-1>n?new CKEDITOR.dom.element(l[0][n+1]):i&&-1!==l[0][i-1].cellIndex?new CKEDITOR.dom.element(l[0][i-1]):new CKEDITOR.dom.element(a.$.parentNode),c.length==t&&(o[0].moveToPosition(a,CKEDITOR.POSITION_AFTER_END),o[0].select(),a.remove()),i}(t=t.getSelection()))&&l(t,!0)}})),c("columnInsertBefore",o({requiredContent:"table",exec:function(t){s(t=e(t=t.getSelection()),!0)}})),c("columnInsertAfter",o({requiredContent:"table",exec:function(t){s(t=e(t=t.getSelection()))}})),c("cellDelete",o({requiredContent:"table",exec:function(e){a(e=e.getSelection())}})),c("cellMerge",o({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e,t){t.cell=u(e.getSelection()),l(t.cell,!0)}})),c("cellMergeRight",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e,t){t.cell=u(e.getSelection(),"right"),l(t.cell,!0)}})),c("cellMergeDown",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e,t){t.cell=u(e.getSelection(),"down"),l(t.cell,!0)}})),c("cellVerticalSplit",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){l(h(e.getSelection()))}})),c("cellHorizontalSplit",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){l(d(e.getSelection()))}})),c("cellInsertBefore",o({requiredContent:"table",exec:function(e){r(e=e.getSelection(),!0)}})),c("cellInsertAfter",o({requiredContent:"table",exec:function(e){r(e=e.getSelection())}})),n.addMenuItems&&n.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var t=n.getSelection(),i=e(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:u(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:u(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:u(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:h(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:d(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<i.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),n.contextMenu&&n.contextMenu.addListener((function(e,t,i){return(e=i.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null}))},getCellColIndex:n,insertRow:t,insertColumn:s,getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e,t,i,n,o){e=e.$.rows,i=i||0,n="number"==typeof n?n:e.length-1,o="number"==typeof o?o:-1;var s=-1,r=[];for(t=t||0;t<=n;t++){!r[++s]&&(r[s]=[]);for(var a=-1,l=i;l<=(-1===o?e[t].cells.length-1:o)&&(u=e[t].cells[l]);l++){for(a++;r[s][a];)a++;for(var c=isNaN(u.colSpan)?1:u.colSpan,u=isNaN(u.rowSpan)?1:u.rowSpan,d=0;d<u&&!(t+d>n);d++){r[s+d]||(r[s+d]=[]);for(var h=0;h<c;h++)r[s+d][a+h]=e[t].cells[l]}if(a+=c-1,-1!==o&&a>=o)break}}return r},function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(e,t){var i,n,o=e.getAscendant("table"),r=t.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(o),l=s(e),c=s(t),u=[],d={};for(o.contains(r)&&(c=s(t=t.getAscendant({td:1,th:1}))),l>c&&(o=l,l=c,c=o,o=e,e=t,t=o),o=0;o<a[l].length;o++)if(e.$===a[l][o]){i=o;break}for(o=0;o<a[c].length;o++)if(t.$===a[c][o]){n=o;break}for(i>n&&(o=i,i=n,n=o),o=l;o<=c;o++)for(l=i;l<=n;l++)(r=new CKEDITOR.dom.element(a[o][l])).$&&!r.getCustomData("selected_cell")&&(u.push(r),CKEDITOR.dom.element.setMarker(d,r,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(d),u}function i(e,t){var i,n=e.editable().find(".cke_table-faked-selection");for(e.fire("lockSnapshot"),e.editable().removeClass("cke_table-faked-selection-editor"),i=0;i<n.count();i++)n.getItem(i).removeClass("cke_table-faked-selection");0<n.count()&&n.getItem(0).getAscendant("table").data("cke-table-faked-selection-table",!1),e.fire("unlockSnapshot"),t&&(f={active:!1},e.getSelection().isInTable()&&e.getSelection().reset())}function n(e,t){var i,n,o=[];for(n=0;n<t.length;n++)(i=e.createRange()).setStartBefore(t[n]),i.setEndAfter(t[n]),o.push(i);e.getSelection().selectRanges(o)}function o(e){var t,n=(e=e.editor||e.sender.editor)&&e.getSelection(),o=n&&n.getRanges()||[];if(n&&(i(e),n.isInTable()&&n.isFake)){for(1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table")&&(t=o[0]._getTableElement()),t=h(n,t),e.fire("lockSnapshot"),n=0;n<t.length;n++)t[n].addClass("cke_table-faked-selection");0<t.length&&(e.editable().addClass("cke_table-faked-selection-editor"),t[0].getAscendant("table").data("cke-table-faked-selection-table","")),e.fire("unlockSnapshot")}}function s(e){return e.getAscendant("tr",!0).$.rowIndex}function r(o){function s(e,t){return!(!e||!t)&&(e.equals(t)||e.contains(t)||t.contains(e)||e.getCommonAncestor(t).is(p))}function a(e){return!e.getAscendant("table",!0)&&e.getDocument().equals(l.document)}if(o.data.getTarget().getName&&("mouseup"===o.name||!e(o.data.getTarget()))){var l=o.editor||o.listenerData.editor,c=(l.getSelection(1),function(e){return(e=e.editable().findOne(".cke_table-faked-selection"))&&e.getAscendant("table")}(l)),u=(d=o.data.getTarget())&&d.getAscendant({td:1,th:1},!0),d=d&&d.getAscendant("table",!0),p={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};(function(e,t,i,n){return!("mousedown"!==e.name||CKEDITOR.tools.getMouseButton(e)!==CKEDITOR.MOUSE_BUTTON_LEFT&&n)||"mouseup"===e.name&&!a(e.data.getTarget())&&!s(i,n)})(o,0,c,d)&&i(l,!0),!f.active&&"mousedown"===o.name&&CKEDITOR.tools.getMouseButton(o)===CKEDITOR.MOUSE_BUTTON_LEFT&&d&&(f={active:!0},CKEDITOR.document.on("mouseup",r,null,{editor:l})),(u||d)&&function(o,s,r){var a,l=h(o.getSelection(!0));if(s=s.is("table")?null:s,(a=f.active&&!f.first)&&!(a=s)&&(a=o.getSelection().getRanges(),a=!!(1<l.length||a[0]&&!a[0].collapsed)),a)f.first=s||l[0],f.dirty=!s&&1!==l.length;else if(f.active&&s&&f.first.getAscendant("table").equals(s.getAscendant("table"))){if(l=t(f.first,s),!f.dirty&&1===l.length&&!e(r.data.getTarget()))return i(o,"mouseup"===r.name);f.dirty=!0,f.last=s,n(o,l)}}(l,u||d,o),"mouseup"===o.name&&(CKEDITOR.tools.getMouseButton(o)===CKEDITOR.MOUSE_BUTTON_LEFT&&(a(o.data.getTarget())||s(c,d))&&function(e){var i=e.editable().find(".cke_table-faked-selection");1>i.count()||n(e,i=t(i.getItem(0),i.getItem(i.count()-1)))}(l),f={active:!1},CKEDITOR.document.removeListener("mouseup",r))}}function a(e){var t=e.data.getTarget().getAscendant({td:1,th:1},!0);t&&!t.hasClass("cke_table-faked-selection")&&(e.cancel(),e.data.preventDefault())}function l(e){var t=e.editor||e.sender.editor;t.getSelection().isInTable()&&function(e,t){var i,n,o,s,r=e.getSelection(),a=r.createBookmarks(),l=e.document,c=e.createRange(),u=l.getDocumentElement().$,d=CKEDITOR.env.ie&&9>CKEDITOR.env.version,h=e.blockless||CKEDITOR.env.ie?"span":"div";l.getById("cke_table_copybin")||(i=l.createElement(h),(n=l.createElement(h)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),i.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),i.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),i.setHtml(e.getSelectedHtml(!0)),e.fire("lockSnapshot"),n.append(i),e.editable().append(n),s=e.on("selectionChange",(function(e){e.cancel()}),null,null,0),d&&(o=u.scrollTop),c.selectNodeContents(i),c.select(),d&&(u.scrollTop=o),setTimeout((function(){n.remove(),r.selectBookmarks(a),s.removeListener(),e.fire("unlockSnapshot"),t&&(e.extractSelectedHtml(),e.fire("saveSnapshot"))}),100))}(t,"cut"===e.name)}function c(e){this._reset(),e&&this.setSelectedCells(e)}function u(e,t,i){e.on("beforeCommandExec",(function(i){-1!==CKEDITOR.tools.array.indexOf(t,i.data.name)&&(i.data.selectedCells=h(e.getSelection()))})),e.on("afterCommandExec",(function(n){-1!==CKEDITOR.tools.array.indexOf(t,n.data.name)&&i(e,n.data)}))}var d,h,p,m,g,f={active:!1};c.prototype={},c.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},c.prototype.setSelectedCells=function(e){this._reset(),e=e.slice(0),this._arraySortByDOMOrder(e),this.cells.all=e,this.cells.first=e[0],this.cells.last=e[e.length-1],this.rows.first=e[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},c.prototype.getTableMap=function(){var e,t=p(this.cells.first);e:{var i,n=(e=this.cells.last).getAscendant("table"),o=s(e);for(n=CKEDITOR.tools.buildTableMap(n),i=0;i<n[o].length;i++)if(new CKEDITOR.dom.element(n[o][i]).equals(e)){e=i;break e}e=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),s(this.rows.first),t,s(this.rows.last),e)},c.prototype._getTable=function(){return this.rows.first.getAscendant("table")},c.prototype.insertRow=function(e,t,i){if(void 0===e)e=1;else if(0>=e)return;for(var n,o=this.cells.first.$.cellIndex,s=this.cells.last.$.cellIndex,r=i?[]:this.cells.all,a=0;a<e;a++)n=m(i?this.cells.all:r,t),n=CKEDITOR.tools.array.filter(n.find("td, th").toArray(),(function(e){return!!i||e.$.cellIndex>=o&&e.$.cellIndex<=s})),r=t?n.concat(r):r.concat(n);this.setSelectedCells(r)},c.prototype.insertColumn=function(e){function t(e){return(e=s(e))>=n&&e<=o}if(void 0===e)e=1;else if(0>=e)return;for(var i=(r=this.cells).all,n=s(r.first),o=s(r.last),r=0;r<e;r++)i=i.concat(CKEDITOR.tools.array.filter(g(i),t));this.setSelectedCells(i)},c.prototype.emptyCells=function(e){e=e||this.cells.all;for(var t=0;t<e.length;t++)e[t].setHtml("")},c.prototype._arraySortByDOMOrder=function(e){e.sort((function(e,t){return e.getPosition(t)&CKEDITOR.POSITION_PRECEDING?-1:1}))};var y={onPaste:function(e){function i(e){return Math.max.apply(null,CKEDITOR.tools.array.map(e,(function(e){return e.length}),0))}var o,s,r=e.editor,a=r.getSelection(),l=h(a),u=this.findTableInPastedContent(r,e.data.dataValue),d=a.isInTable(!0)&&this.isBoundarySelection(a);!l.length||1===l.length&&!function(e){if(e)return(e=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(e=e.getEnclosedNode())&&e.is&&e.is(CKEDITOR.dtd.$tableContent)}(a.getRanges()[0])&&!d||d&&!u||(l=l[0].getAscendant("table"),o=new c(h(a,l)),r.once("afterPaste",(function(){var e;if(s){e=new CKEDITOR.dom.element(s[0][0]);var i=s[s.length-1];e=t(e,new CKEDITOR.dom.element(i[i.length-1]))}else e=o.cells.all;n(r,e)})),u?(e.stop(),d?(o.insertRow(1,1===d,!0),a.selectElement(o.rows.first)):(o.emptyCells(),n(r,o.cells.all)),e=o.getTableMap(),s=CKEDITOR.tools.buildTableMap(u),o.insertRow(s.length-e.length),o.insertColumn(i(s)-i(e)),e=o.getTableMap(),this.pasteTable(o,e,s),r.fire("saveSnapshot"),setTimeout((function(){r.fire("afterPaste")}),0)):(function(e){var t=r.createRange();t.selectNodeContents(e),t.select()}(o.cells.first),r.once("afterPaste",(function(){r.fire("lockSnapshot"),o.emptyCells(o.cells.all.slice(1)),n(r,o.cells.all),r.fire("unlockSnapshot")}))))},isBoundarySelection:function(e){var t=(e=e.getRanges()[0]).endContainer.getAscendant("tr",!0);if(t&&e.collapsed){if(e.checkBoundaryOfElement(t,CKEDITOR.START))return 1;if(e.checkBoundaryOfElement(t,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(e,t){var i=e.dataProcessor,n=new CKEDITOR.dom.element("body");return i||(i=new CKEDITOR.htmlDataProcessor(e)),n.setHtml(i.toHtml(t),{fixForBody:!1}),1<n.getChildCount()?null:n.findOne("table")},pasteTable:function(e,t,i){var n,o,s,r,a,l=p(e.cells.first),c=e._getTable(),u={};for(r=0;r<i.length;r++)for(o=new CKEDITOR.dom.element(c.$.rows[e.rows.first.$.rowIndex+r]),a=0;a<i[r].length;a++)s=new CKEDITOR.dom.element(i[r][a]),n=t[r]&&t[r][a]?new CKEDITOR.dom.element(t[r][a]):null,s&&!s.getCustomData("processed")?(n&&n.getParent()?s.replace(n):(0===a||i[r][a-1])&&((n=0!==a?new CKEDITOR.dom.element(i[r][a-1]):null)&&o.equals(n.getParent())?s.insertAfter(n):0<l?o.$.cells[l]?s.insertAfter(new CKEDITOR.dom.element(o.$.cells[l])):o.append(s):o.append(s,!0)),CKEDITOR.dom.element.setMarker(u,s,"processed",!0)):s.getCustomData("processed")&&n&&n.remove();CKEDITOR.dom.element.clearAllMarkers(u)}};CKEDITOR.plugins.tableselection={getCellsBetween:t,keyboardIntegration:function(e){function t(e){var t=e.getEnclosedNode();t&&"function"==typeof t.is&&t.is({td:1,th:1})?t.setText(""):e.deleteContents(),CKEDITOR.tools.array.forEach(e._find("td"),(function(e){e.appendBogus()}))}var i=e.editable();i.attachListener(i,"keydown",function(e){function i(t,i){if(!i.length)return null;var n=e.createRange(),s=CKEDITOR.dom.range.mergeRanges(i);CKEDITOR.tools.array.forEach(s,(function(e){e.enlarge(CKEDITOR.ENLARGE_ELEMENT)}));var r=(a=s[0].getBoundaryNodes()).startNode,a=a.endNode;if(r&&r.is&&r.is(o)){for(var l=r.getAscendant("table",!0),c=r.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l),u=!1,d=function(e){return!r.contains(e)&&e.is&&e.is("td","th")};c&&!d(c);)c=c.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l);return!c&&a&&a.is&&!a.is("table")&&a.getNext()&&(c=a.getNext().findOne("td, th"),u=!0),c?n["moveToElementEdit"+(u?"Start":"End")](c):(n.setStartBefore(r.getAscendant("table",!0)),n.collapse(!0)),s[0].deleteContents(),[n]}return r?(n.moveToElementEditablePosition(r),[n]):void 0}var n={37:1,38:1,39:1,40:1,8:1,46:1,13:1},o=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete o.td,delete o.th,function(o){var s,r,a,l,c=o.data.getKey(),u=o.data.getKeystroke(),d=37===c||38==c;if(n[c]&&(s=e.getSelection())&&s.isInTable()&&s.isFake)if(a=(r=s.getRanges())[0]._getTableElement(),l=r[r.length-1]._getTableElement(),(13!==c||e.plugins.enterkey)&&(o.data.preventDefault(),o.cancel()),36<c&&41>c)r[0].moveToElementEditablePosition(d?a:l,!d),s.selectRanges([r[0]]);else if(13!==c||13===u||u===CKEDITOR.SHIFT+13){for(o=0;o<r.length;o++)t(r[o]);(o=i(0,r))?r=o:r[0].moveToElementEditablePosition(a),s.selectRanges(r),13===c&&e.plugins.enterkey?(e.fire("lockSnapshot"),13===u?e.execCommand("enter"):e.execCommand("shiftEnter"),e.fire("unlockSnapshot"),e.fire("saveSnapshot")):13!==c&&e.fire("saveSnapshot")}}}(e),null,null,-1),i.attachListener(i,"keypress",(function(i){var n,o=e.getSelection(),s=i.data.$.charCode||13===i.data.getKey();if(o&&o.isInTable()&&o.isFake&&s&&!(i.data.getKeystroke()&CKEDITOR.CTRL)){for(s=(i=o.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),n=0;n<i.length;n++)t(i[n]);s&&(i[0].moveToElementEditablePosition(s),o.selectRanges([i[0]]))}}),null,null,-1)},isSupportedEnvironment:!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",onLoad:function(){d=CKEDITOR.plugins.tabletools,h=d.getSelectedCells,p=d.getCellColIndex,m=d.insertRow,g=d.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(e){CKEDITOR.plugins.tableselection.isSupportedEnvironment&&(e.addContentsCss&&e.addContentsCss(this.path+"styles/tableselection.css"),e.on("contentDom",(function(){var t=e.editable(),i=t.isInline()?t:e.document,n={editor:e};t.attachListener(i,"mousedown",r,null,n),t.attachListener(i,"mousemove",r,null,n),t.attachListener(i,"mouseup",r,null,n),t.attachListener(t,"dragstart",a),t.attachListener(e,"selectionCheck",o),CKEDITOR.plugins.tableselection.keyboardIntegration(e),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(t.attachListener(t,"cut",l),t.attachListener(t,"copy",l))})),e.on("paste",y.onPaste,y),u(e,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),(function(e,t){n(e,t.selectedCells)})),u(e,["cellMerge","cellMergeRight","cellMergeDown"],(function(e,t){n(e,[t.commandData.cell])})),u(e,["cellDelete"],(function(e){i(e,!0)})))}})}(),function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function n(e){r.enabled&&!1!==e.data.command.canUndo&&r.save()}function o(){r.enabled=!t.readOnly&&"wysiwyg"==t.mode,r.onChange()}var r=t.undoManager=new i(t),a=r.editingHandler=new s(r),l=t.addCommand("undo",{exec:function(){r.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=t.addCommand("redo",{exec:function(){r.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),r.onChange=function(){l.setState(r.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(r.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",n),t.on("afterCommandExec",n),t.on("saveSnapshot",(function(e){r.save(e.data&&e.data.contentOnly)})),t.on("contentDom",a.attachListeners,a),t.on("instanceReady",(function(){t.fire("saveSnapshot")})),t.on("beforeModeUnload",(function(){"wysiwyg"==t.mode&&r.save(!0)})),t.on("mode",o),t.on("readOnly",o),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){r.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",(function(){r.currentImage&&r.update()})),t.on("lockSnapshot",(function(e){e=e.data,r.lock(e&&e.dontUpdate,e&&e.forceUpdate)})),t.on("unlockSnapshot",r.unlock,r)}}),CKEDITOR.plugins.undo={};var i=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this.editor=e,this.reset()};i.prototype={type:function(e,t){var n=i.getKeyGroup(e),o=this.strokesRecorded[n]+1;t=t||o>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(o=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[n]=o,this.previousKeyGroup=n},keyGroupChanged:function(e){return i.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,i){var o=this.editor;if(this.locked||"ready"!=o.status||"wysiwyg"!=o.mode)return!1;var s=o.editable();if(!s||"ready"!=s.status)return!1;if(s=this.snapshots,t||(t=new n(o)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==i&&o.fire("change");return s.splice(this.index+1,s.length-this.index-1),s.length==this.limit&&s.shift(),this.index=s.push(t)-1,this.currentImage=t,!1!==i&&this.refreshState(),!0},restoreImage:function(e){var t,i=this.editor;e.bookmarks&&(i.focus(),t=i.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&((t=this.editor.document.getBody().$.createTextRange()).collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),i.fire("change")},getNextImage:function(e){var t,i=this.snapshots,n=this.currentImage;if(n)if(e){for(t=this.index-1;0<=t;t--)if(e=i[t],!n.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<i.length;t++)if(e=i[t],!n.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new n(this.editor));for(var t=this.index,i=this.snapshots;0<t&&this.currentImage.equalsContent(i[t-1]);)--t;i.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,i=t[t.length-1];return!(!i.equalsContent(e)||i.equalsSelection(e)||(this.currentImage=t[t.length-1]=e,0))},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var i=null;if(t)i=!0;else{var o=new n(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(i=o)}this.locked={update:i,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,!0===e)this.update();else if(e){var t=new n(this.editor,!0);e.equalsContent(t)||this.update()}}}},i.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},i.keyGroups={PRINTABLE:0,FUNCTIONAL:1},i.isNavigationKey=function(e){return!!i.navigationKeyCodes[e]},i.getKeyGroup=function(e){var n=i.keyGroups;return t[e]?n.FUNCTIONAL:n.PRINTABLE},i.getOppositeKeyGroup=function(e){var t=i.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},i.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&i.getKeyGroup(e)==i.keyGroups.FUNCTIONAL};var n=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var i=e.getSnapshot();CKEDITOR.env.ie&&i&&(i=i.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=i,t||(this.bookmarks=(i=i&&e.getSelection())&&i.createBookmarks2(!0)),e.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;n.prototype={equalsContent:function(e){var t=this.contents;return e=e.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(o,""),e=e.replace(o,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;if(e=e.bookmarks,t||e){if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++){var n=t[i],o=e[i];if(n.startOffset!=o.startOffset||n.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(n.start,o.start)||!CKEDITOR.tools.arrayCompare(n.end,o.end))return!1}}return!0}};var s=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new r,this.lastKeydownImage=null};s.prototype={onKeydown:function(t){var o=t.data.getKey();229!==o&&(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new n(t.editor),(i.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager;e=e.data.getKey();var o=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),i.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new n(t.editor,!0))||(0<o?t.type(e):i.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;!e&&t.save(!0,null,!1)||t.updateSelection(new n(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),n=this;t.attachListener(t,"keydown",(function(e){n.onKeydown(e),i.ieFunctionalKeysBug(e.data.getKey())&&n.onInput()}),null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",n.onInput,n,null,999),t.attachListener(t,"keyup",n.onKeyup,n,null,999),t.attachListener(t,"paste",n.ignoreInputEventListener,n,null,999),t.attachListener(t,"drop",n.ignoreInputEventListener,n,null,999),e.on("afterPaste",n.activateInputEventListener,n,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",(function(){n.onNavigationKey()}),null,null,999),t.attachListener(this.undoManager.editor,"blur",(function(){n.keyEventsStack.remove(9)}),null,null,999)}};var r=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};r.prototype={push:function(e){return e=this.stack.push({keyCode:e,inputs:0}),this.stack[e-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return-1!=(e=this.getLastIndex(e))?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){-1!=(e=this.getLastIndex(e))&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){(e=e.data.$).ctrlKey||e.metaKey||this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function i(e,t){var i=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:i,inline:i.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var n=CKEDITOR.tools.bind(this.queryViewport,this),r=CKEDITOR.tools.bind(this.hideVisible,this),a=CKEDITOR.tools.bind(this.removeAll,this);i.attachListener(this.winTop,"resize",n),i.attachListener(this.winTop,"scroll",n),i.attachListener(this.winTop,"resize",r),i.attachListener(this.win,"scroll",r),i.attachListener(this.inline?i:this.frame,"mouseout",(function(e){var t=e.data.$.clientX;e=e.data.$.clientY,this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()}),this),i.attachListener(e,"resize",n),i.attachListener(e,"mode",a),e.on("destroy",a),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function n(e){var t;return(t=e&&e.type==CKEDITOR.NODE_ELEMENT)&&(t=!(r[e.getComputedStyle("float")]||r[e.getAttribute("align")])),t&&!a[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,i,n,o,s=this,r=this.editor,a=this.doc,l=CKEDITOR.tools.eventsBuffer(50,(function(){r.readOnly||"wysiwyg"!=r.mode||(s.relations={},(i=a.$.elementFromPoint(n,o))&&i.nodeType&&(t=new CKEDITOR.dom.element(i),s.traverseSearch(t),isNaN(n+o)||s.pixelSearch(t,n,o),e&&e(s.relations,n,o)))}));this.listener=this.editable.attachListener(this.target,"mousemove",(function(e){n=e.data.$.clientX,o=e.data.$.clientY,l.input()})),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",(function(){l.reset()}))},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var i=this.editor.createRange();return i.moveToPosition(this.relations[t.uid].element,e[t.type]),i}}(),store:function(){function e(e,t,i){var n=e.getUniqueId();n in i?i[n].type|=t:i[n]={element:e,type:t}}return function(t,i){var o;i&CKEDITOR.LINEUTILS_AFTER&&n(o=t.getNext())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),i^=CKEDITOR.LINEUTILS_AFTER),i&CKEDITOR.LINEUTILS_INSIDE&&n(o=t.getFirst())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),i^=CKEDITOR.LINEUTILS_INSIDE),e(t,i,this.relations)}}(),traverseSearch:function(e){var t,i,o;do{if(!(o=e.$["data-cke-expando"])||!(o in this.relations)){if(e.equals(this.editable))break;if(n(e))for(t in this.lookups)(i=this.lookups[t](e))&&this.store(e,i)}}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,i,o,s,r){for(var a,l=0;r(o)&&(o+=s,25!=++l);)if(a=this.doc.$.elementFromPoint(i,o))if(a==e)l=0;else if(t(e,a)&&(l=0,n(a=new CKEDITOR.dom.element(a))))return a}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,i,o){var s=this.win.getViewPaneSize().height,r=e.call(this,t.$,i,o,-1,(function(e){return 0<e}));if(i=e.call(this,t.$,i,o,1,(function(e){return e<s})),r)for(this.traverseSearch(r);!r.getParent().equals(t);)r=r.getParent();if(i)for(this.traverseSearch(i);!i.getParent().equals(t);)i=i.getParent();for(;(r||i)&&(r&&(r=r.getNext(n)),r&&!r.equals(i))&&(this.traverseSearch(r),i&&(i=i.getPrevious(n)),i&&!i.equals(r));)this.traverseSearch(i)}}(),greedySearch:function(){this.relations={};for(var e,t,i,o=this.editable.getElementsByTag("*"),s=0;e=o.getItem(s++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&n(e)&&e.isVisible())for(i in this.lookups)(t=this.lookups[i](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var i=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return i&&n(i)?(e.siblingRect=i.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var i;for(var n in this.locations={},t)(i=t[n]).elementRect=i.element.getClientRect(),i.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(n,CKEDITOR.LINEUTILS_BEFORE,e(i,CKEDITOR.LINEUTILS_BEFORE)),i.type&CKEDITOR.LINEUTILS_AFTER&&this.store(n,CKEDITOR.LINEUTILS_AFTER,e(i,CKEDITOR.LINEUTILS_AFTER)),i.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(n,CKEDITOR.LINEUTILS_INSIDE,(i.elementRect.top+i.elementRect.bottom)/2);return this.locations}}(),sort:function(){var e,t,i,n;return function(o,s){for(var r in e=this.locations,t=[],e)for(var a in e[r])if(i=Math.abs(o-e[r][a]),t.length){for(n=0;n<t.length;n++)if(i<t[n].dist){t.splice(n,0,{uid:+r,type:a,dist:i});break}n==t.length&&t.push({uid:+r,type:a,dist:i})}else t.push({uid:+r,type:a,dist:i});return void 0!==s?t.slice(0,s):t}}(),store:function(e,t,i){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=i}};var o={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},s={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};i.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var i,n,o;if(i=this.getStyle(e.uid,e.type)){for(o in this.visible)if(this.visible[o].getCustomData("hash")!==this.hash){n=this.visible[o];break}if(!n)for(o in this.hidden)if(this.hidden[o].getCustomData("hash")!==this.hash){this.showLine(n=this.hidden[o]);break}n||this.showLine(n=this.addLine()),n.setCustomData("hash",this.hash),this.visible[n.getUniqueId()]=n,n.setStyles(i),t&&t(n)}},getStyle:function(e,t){var i=this.relations[e],n=this.locations[e][t],o={};if(o.width=i.siblingRect?Math.max(i.siblingRect.width,i.elementRect.width):i.elementRect.width,o.top=this.inline?n+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+n,o.top-this.winTopScroll.y<this.rect.top||o.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var s in this.inline?o.left=i.elementRect.left-this.rect.relativeX:(0<i.elementRect.left?o.left=this.rect.left+i.elementRect.left:(o.width+=i.elementRect.left,o.left=this.rect.left),0<(i=o.left+o.width-(this.rect.left+this.winPane.width))&&(o.width-=i)),o.left+=this.winTopScroll.x,o)o[s]=CKEDITOR.tools.cssLength(o[s]);return o},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)(e=this.visible[t]).getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){e=e.getClientRect();var t=this.container.getDocumentPosition(),i=this.container.getComputedStyle("position");return e.relativeX=e.relativeY=0,"static"!=i&&(e.relativeY=t.y,e.relativeX=t.x,e.top-=e.relativeY,e.bottom-=e.relativeY,e.left-=e.relativeX,e.right-=e.relativeX),e}};var r={left:1,right:1,center:1},a={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:i}}(),function(){function e(e){return e.getName&&!e.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(e){if(CKEDITOR.env.webkit){var t=CKEDITOR.plugins.widgetselection;e.on("contentDom",(function(e){var i=(e=e.editor).editable();i.attachListener(i,"keydown",(function(e){e.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){t.addFillers(i)||t.removeFillers(i)}),0)}),null,null,-1),e.on("selectionCheck",(function(e){t.removeFillers(e.editor.editable())})),e.on("paste",(function(e){e.data.dataValue=t.cleanPasteData(e.data.dataValue)})),"selectall"in e.plugins&&t.addSelectAllIntegration(e)}))}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var i=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var n=t.getFirst(e),o=t.getLast(e);if(n&&n.type==CKEDITOR.NODE_ELEMENT&&!n.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),o&&o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return(i=i.createRange()).selectNodeContents(t),i.select(),!0}return!1},removeFillers:function(e){if(this.hasFiller(e)&&!this.isWholeContentSelected(e)){var t=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),i=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&t&&this.startFiller.equals(t)?this.removeFiller(this.startFiller,e):this.startFiller=t,this.endFiller&&i&&this.endFiller.equals(i)?this.removeFiller(this.endFiller,e):this.endFiller=i}},cleanPasteData:function(e){return e&&e.length&&(e=e.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),e},isWholeContentSelected:function(e){var t=e.editor.getSelection().getRanges()[0];return!(!t||t&&t.collapsed||((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(t&&e&&t.startContainer&&t.endContainer&&0===t.startOffset&&t.endOffset===e.getChildCount()&&t.startContainer.equals(e)&&t.endContainer.equals(e))))},hasFiller:function(e){return 0<e.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(e){var t=new CKEDITOR.dom.element(this.fillerTagName);return t.setHtml(this.fillerContent),t.setAttribute(this.fillerAttribute,e?"end":"start"),t.setAttribute("data-cke-temp",1),t.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),t},removeFiller:function(e,t){if(e){var i,n,o=t.editor,s=t.editor.getSelection().getRanges()[0].startPath(),r=o.createRange();s.contains(e)&&(i=e.getHtml(),n=!0),s="start"==e.getAttribute(this.fillerAttribute),e.remove(),i&&0<i.length&&i!=this.fillerContent?(t.insertHtmlIntoRange(i,o.getSelection().getRanges()[0]),r.setStartAt(t.getChild(t.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),o.getSelection().selectRanges([r])):n&&(s?r.setStartAt(t.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):r.setEndAt(t.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),t.editor.getSelection().selectRanges([r]))}},createFillerRegex:function(e){var t=this.createFiller(e).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((e?"":"^")+t+(e?"$":""))},addSelectAllIntegration:function(e){var t=this;e.editable().attachListener(e,"beforeCommandExec",(function(i){var n=e.editable();"selectAll"==i.data.name&&n&&t.addFillers(n)}),null,null,9999)}}}(),function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(e){var i,n,o=e.editor;o.on("toHtml",(function(n){var o,s=function(e){var i=[],n=e._.upcasts,o=e._.upcastCallbacks;return{toBeWrapped:i,iterator:function(e){var s,r,a,l,c;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(t.isParserWidgetElement))&&i.push([e]),!1;if("data-widget"in e.attributes)return i.push([e]),!1;if(c=n.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(l=0,s=o.length;l<s;++l)if(!1===o[l](e))return;for(l=0;l<c;++l)if(a={},r=(s=n[l])[0](e,a))return r instanceof CKEDITOR.htmlParser.element&&(e=r),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(a)),e.attributes["data-cke-widget-upcasted"]=1,i.push([e,s[1]]),!1}}}}(e);for(n.data.dataValue.forEach(s.iterator,CKEDITOR.NODE_ELEMENT,!0);o=s.toBeWrapped.pop();){var r=o[0],a=r.parent;a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-widget-wrapper"]&&a.replaceWith(r),e.wrapElement(o[0],o[1])}i=n.data.protectedWhitespaces?3==n.data.dataValue.children.length&&t.isParserWidgetWrapper(n.data.dataValue.children[1]):1==n.data.dataValue.children.length&&t.isParserWidgetWrapper(n.data.dataValue.children[0])}),null,null,8),o.on("dataReady",(function(){if(n)for(var i,s,r=o.editable().find(".cke_widget_wrapper"),a=0,l=r.count();a<l;++a)(s=(i=r.getItem(a)).getFirst(t.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&s.data("widget")?(s.replace(i),e.wrapElement(s)):i.remove();n=0,e.destroyAll(!0),e.initOnAll()})),o.on("loadSnapshot",(function(t){/data-cke-widget/.test(t.data)&&(n=1),e.destroyAll(!0)}),null,null,9),o.on("paste",(function(e){(e=e.data).dataValue=e.dataValue.replace(E,m),e.range&&(e=t.getNestedEditable(o.editable(),e.range.startContainer))&&(e=CKEDITOR.filter.instances[e.data("cke-filter")])&&o.setActiveFilter(e)})),o.on("afterInsertHtml",(function(t){t.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(o.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:i}),o.fire("unlockSnapshot"))}))}(this),function(e){var i=e.editor,n={};i.on("toDataFormat",(function(i){var o=CKEDITOR.tools.getNextNumber(),s=[];i.data.downcastingSessionId=o,n[o]=s,i.data.dataValue.forEach((function(i){var n,o=i.attributes;if("data-cke-widget-white-space"in o){n=r(i);var l=a(i);n.parent.attributes["data-cke-white-space-first"]&&(n.value=n.value.replace(/^&nbsp;/g," ")),l.parent.attributes["data-cke-white-space-last"]&&(l.value=l.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in o)(o=e.instances[o["data-cke-widget-id"]])&&(n=i.getFirst(t.isParserWidgetElement),s.push({wrapper:i,element:n,widget:o,editables:{}}),"1"!=n.attributes["data-cke-widget-keep-attr"]&&delete n.attributes["data-widget"]);else if("data-cke-widget-editable"in o)return s[s.length-1].editables[o["data-cke-widget-editable"]]=i,!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8),i.on("toDataFormat",(function(e){if(e.data.downcastingSessionId){e=n[e.data.downcastingSessionId];for(var t,i,o,s,r,a;t=e.shift();){for(a in i=t.widget,o=t.element,s=i._.downcastFn&&i._.downcastFn.call(i,o),t.editables)delete(r=t.editables[a]).attributes.contenteditable,r.setHtml(i.editables[a].getData());s||(s=o),t.wrapper.replaceWith(s)}}}),null,null,13),i.on("contentDomUnload",(function(){e.destroyAll(!0)}))}(this),this.on("checkWidgets",o),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(e){var i=e.editor;i.on("selectionCheck",(function(){e.fire("checkSelection")})),e.on("checkSelection",e.checkSelection,e),i.on("selectionChange",(function(n){var o=(n=t.getNestedEditable(i.editable(),n.data.selection.getStartElement()))&&e.getByElement(n),s=e.widgetHoldingFocusedEditable;s?s===o&&s.focusedEditable.equals(n)||(p(e,s,null),o&&n&&p(e,o,n)):o&&n&&p(e,o,n)})),i.on("dataReady",(function(){g(e).commit()})),i.on("blur",(function(){var t;(t=e.focused)&&n(e,t),(t=e.widgetHoldingFocusedEditable)&&p(e,t,null)}))}(this),function(e){var i=e.editor;i.on("contentDom",(function(){var n,o,s=i.editable(),r=s.isInline()?s:i.document;s.attachListener(r,"mousedown",(function(s){var r=s.data.getTarget();n=r instanceof CKEDITOR.dom.element?e.getByElement(r):null,o=0,n&&(n.inline&&r.type==CKEDITOR.NODE_ELEMENT&&r.hasAttribute("data-cke-widget-drag-handler")?(o=1,e.focused!=n&&i.getSelection().removeAllRanges()):t.getNestedEditable(n.wrapper,r)?n=null:(s.data.preventDefault(),CKEDITOR.env.ie||n.focus()))})),s.attachListener(r,"mouseup",(function(){o&&n&&n.wrapper&&(o=0,n.focus())})),CKEDITOR.env.ie&&s.attachListener(r,"mouseup",(function(){setTimeout((function(){n&&n.wrapper&&s.contains(n.wrapper)&&(n.focus(),n=null)}))}))})),i.on("doubleclick",(function(i){var n=e.getByElement(i.data.element);if(n&&!t.getNestedEditable(n.wrapper,i.data.element))return n.fire("doubleclick",{element:i.data.element})}),null,null,1)}(this),function(e){e.editor.on("key",(function(t){var i,n=e.focused,o=e.widgetHoldingFocusedEditable;return n?i=n.fire("key",{keyCode:t.data.keyCode}):o&&(n=t.data.keyCode,t=o.focusedEditable,n==CKEDITOR.CTRL+65?(n=t.getBogus(),(o=o.editor.createRange()).selectNodeContents(t),n&&o.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),o.select(),i=!1):8==n||46==n?(i=o.editor.getSelection().getRanges(),o=i[0],i=!(1==i.length&&o.collapsed&&o.checkBoundaryOfElement(t,CKEDITOR[8==n?"START":"END"]))):i=void 0),i}),null,null,1)}(this),function(e){var i=e.editor,n=CKEDITOR.plugins.lineutils;i.on("dragstart",(function(n){var o=n.data.target;t.isDomDragHandler(o)&&(o=e.getByElement(o),n.data.dataTransfer.setData("cke/widget-id",o.id),i.focus(),o.focus())})),i.on("drop",(function(t){var n=(s=t.data.dataTransfer).getData("cke/widget-id"),o=s.getTransferType(i),s=i.createRange();""!==n&&o===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t.cancel():""!==n&&o==CKEDITOR.DATA_TRANSFER_INTERNAL&&(n=e.instances[n])&&(s.setStartBefore(n.wrapper),s.setEndAfter(n.wrapper),t.data.dragRange=s,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,t.data.dataTransfer.setData("text/html",i.editable().getHtmlFromRange(s).getHtml()),i.widgets.destroy(n,!0))})),i.on("contentDom",(function(){var o=i.editable();CKEDITOR.tools.extend(e,{finder:new n.finder(i,{lookups:{default:function(i){if(!i.is(CKEDITOR.dtd.$listItem)&&i.is(CKEDITOR.dtd.$block)&&!t.isDomNestedEditable(i)&&!e._.draggedWidget.wrapper.contains(i)){var n=t.getNestedEditable(o,i);if(n){if(i=e._.draggedWidget,e.getByElement(n)==i)return;if(n=CKEDITOR.filter.instances[n.data("cke-filter")],i=i.requiredContent,n&&i&&!n.check(i))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new n.locator(i),liner:new n.liner(i,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}(this),function(e){function t(t){e.focused&&b(e.focused,"cut"==t.name)}var i=e.editor;i.on("contentDom",(function(){var e=i.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)}))}(this)}function t(e,i,n,o,s){var r=e.editor;CKEDITOR.tools.extend(this,o,{editor:r,id:i,inline:"span"==n.getParent().getName(),element:n,data:CKEDITOR.tools.extend({},"function"==typeof o.defaults?o.defaults():o.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:o,repository:e,draggable:!1!==o.draggable,_:{downcastFn:o.downcast&&"string"==typeof o.downcast?o.downcasts[o.downcast]:o.downcast}},!0),e.fire("instanceCreated",this),function(e,i){(function(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)})(e),function(e){if(e.parts){var t,i,n={};for(i in e.parts)t=e.wrapper.findOne(e.parts[i]),n[i]=t;e.parts=n}}(e),function(e){var t,i,n=e.editables;if(e.editables={},e.editables)for(t in n)i=n[t],e.initEditable(t,"string"==typeof i?{selector:i}:i)}(e),function(e){if(e.mask){var t=e.wrapper.findOne(".cke_widget_mask");t||((t=new CKEDITOR.dom.element("img",e.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}}(e),function(e){if(e.draggable){var i,n=e.editor,o=e.wrapper.getLast(t.isDomDragHandlerContainer);o?i=o.findOne("img"):((o=new CKEDITOR.dom.element("span",n.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+n.plugins.widget.path+"images/handle.png)"}),(i=new CKEDITOR.dom.element("img",n.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:n.lang.widget.move,height:15,role:"presentation"}),e.inline&&i.setAttribute("draggable","true"),o.append(i),e.wrapper.append(o)),e.wrapper.on("dragover",(function(e){e.data.preventDefault()})),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout((function(){e.on("data",e.updateDragHandlerPosition,e)}),50),!e.inline&&(i.on("mousedown",w,e),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&i.on("dragstart",(function(e){e.data.preventDefault(!0)})),e.dragHandlerContainer=o}}(e),function(e){var t=null;e.on("data",(function(){var e,i=this.data.classes;if(t!=i){for(e in t)i&&i[e]||this.removeClass(e);for(e in i)this.addClass(e);t=i}}))}(e),function(e){e.on("data",(function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}}),null,null,9999)}(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.wrapper.on("dragstart",(function(i){var n=i.data.getTarget();t.getNestedEditable(e,n)||e.inline&&t.isDomDragHandler(n)||i.data.preventDefault()})),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",(function(t){if(13==(t=t.data.keyCode))e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void b(e,t==CKEDITOR.CTRL+88);if(t in I||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1}),null,null,999),e.on("doubleclick",(function(t){e.edit()&&t.cancel()})),i.data&&e.on("data",i.data),i.edit&&e.on("edit",i.edit)}(this,o),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(e))),s&&this.setData(s),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,T(this),this.fire("data",this.data),this.isInited()&&r.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function i(e,t,i){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={},t=this.filter=i.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function n(e,t){if(e.focused=null,t.isInited()){var i=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!i&&t.editor.resetDirty()}}function o(e){if(e=e.data,"wysiwyg"==this.editor.mode){var i,n,o,s,r=this.editor.editable(),a=this.instances;if(r){for(i in a)a[i].isReady()&&!r.contains(a[i].wrapper)&&this.destroy(a[i],!0);if(e&&e.initOnlyNew)a=this.initOnAll();else{var l=r.find(".cke_widget_wrapper");for(a=[],i=0,n=l.count();i<n;i++){if(o=l.getItem(i),s=!this.getByElement(o,!0)){e:{s=h;for(var c=o;c=c.getParent();)if(s(c)){s=!0;break e}s=!1}s=!s}s&&r.contains(o)&&(o.addClass("cke_widget_new"),a.push(this.initOn(o.getFirst(t.isDomWidgetElement))))}}e&&e.focusInited&&1==a.length&&a[0].focus()}}}function s(e){if(void 0!==e.attributes&&e.attributes["data-widget"]){var t=r(e),i=a(e),n=!1;t&&t.value&&t.value.match(/^\s/g)&&(t.parent.attributes["data-cke-white-space-first"]=1,t.value=t.value.replace(/^\s/g,"&nbsp;"),n=!0),i&&i.value&&i.value.match(/\s$/g)&&(i.parent.attributes["data-cke-white-space-last"]=1,i.value=i.value.replace(/\s$/g,"&nbsp;"),n=!0),n&&(e.attributes["data-cke-widget-white-space"]=1)}}function r(e){return e.find((function(e){return 3===e.type}),!0).shift()}function a(e){return e.find((function(e){return 3===e.type}),!0).pop()}function l(e,t,i){if(!i.allowedContent&&!i.disallowedContent)return null;var n=this._.filters[e];return n||(this._.filters[e]=n={}),(e=n[t])||(e=i.allowedContent?new CKEDITOR.filter(i.allowedContent):this.editor.filter.clone(),n[t]=e,i.disallowedContent&&e.disallow(i.disallowedContent)),e}function c(e,t){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")+(t?" cke_widget_"+t:"")}}function u(e,t,i){if(e.type==CKEDITOR.NODE_ELEMENT&&(n=CKEDITOR.dtd[e.name])&&!n[i.name]){var n=e.split(t),o=e.parent;return t=n.getIndex(),e.children.length||(--t,e.remove()),n.children.length||n.remove(),u(o,t,i)}e.add(i,t)}function d(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function h(e){return e.hasAttribute("data-cke-temp")}function p(e,t,i,n){var o=e.editor;o.fire("lockSnapshot"),i?(n=i.data("cke-widget-editable"),n=t.editables[n],e.widgetHoldingFocusedEditable=t,t.focusedEditable=n,i.addClass("cke_widget_editable_focused"),n.filter&&o.setActiveFilter(n.filter),o.setActiveEnterMode(n.enterMode,n.shiftEnterMode)):(n||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,o.setActiveFilter(null),o.setActiveEnterMode(null,null)),o.fire("unlockSnapshot")}function m(e,t){return CKEDITOR.tools.trim(t)}function g(e){var t=e.selected,i=[],o=t.slice(0),s=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&i.push(e),0<=(e=CKEDITOR.tools.indexOf(o,e))&&o.splice(e,1),this},focus:function(e){return s=e,this},commit:function(){var r,a,l=e.focused!==s;for(e.editor.fire("lockSnapshot"),l&&(r=e.focused)&&n(e,r);r=o.pop();)t.splice(CKEDITOR.tools.indexOf(t,r),1),r.isInited()&&(a=r.editor.checkDirty(),r.setSelected(!1),!a&&r.editor.resetDirty());for(l&&s&&(a=e.editor.checkDirty(),e.focused=s,e.fire("widgetFocused",{widget:s}),s.setFocused(!0),!a&&e.editor.resetDirty());r=i.pop();)t.push(r),r.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function f(e,t,i){var n=0;t=v(t);var o,s=e.data.classes||{};if(t){for(s=CKEDITOR.tools.clone(s);o=t.pop();)i?s[o]||(n=s[o]=1):s[o]&&(delete s[o],n=1);n&&e.setData("classes",s)}}function y(e){e.cancel()}function b(e,t){var i=e.editor,n=i.document,o=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!n.getById("cke_copybin")){var s=!i.blockless&&!CKEDITOR.env.ie||o?"div":"span",r=(o=n.createElement(s),n.createElement(s));s=CKEDITOR.env.ie&&9>CKEDITOR.env.version,r.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),o.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),o.setStyle("ltr"==i.config.contentsLangDirection?"left":"right","-5000px");var a=i.createRange();a.setStartBefore(e.wrapper),a.setEndAfter(e.wrapper),o.setHtml('<span data-cke-copybin-start="1">​</span>'+i.editable().getHtmlFromRange(a).getHtml()+'<span data-cke-copybin-end="1">​</span>'),i.fire("saveSnapshot"),i.fire("lockSnapshot"),r.append(o),i.editable().append(r);var l=i.on("selectionChange",y,null,null,0),c=e.repository.on("checkSelection",y,null,null,0);if(s)var u=n.getDocumentElement().$,d=u.scrollTop;(a=i.createRange()).selectNodeContents(o),a.select(),s&&(u.scrollTop=d),setTimeout((function(){t||e.focus(),r.remove(),l.removeListener(),c.removeListener(),i.fire("unlockSnapshot"),t&&!i.readOnly&&(e.repository.del(e),i.fire("saveSnapshot"))}),100)}}function v(e){return(e=(e=e.getDefinition().attributes)&&e.class)?e.split(/\s+/):null}function _(){var e=CKEDITOR.document.getActive(),t=this.editor,i=t.editable();(i.isInline()?i:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(i)}function C(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function w(e){function t(){var t;for(h.reset();t=c.pop();)t.removeListener();var i=u;t=e.sender;var n=this.repository.finder,o=this.repository.liner,s=this.editor,r=this.editor.editable();CKEDITOR.tools.isEmpty(o.visible)||(i=n.getRange(i[0]),this.focus(),s.fire("drop",{dropRange:i,target:i.startContainer})),r.removeClass("cke_widget_dragging"),o.hideVisible(),s.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(e)===CKEDITOR.MOUSE_BUTTON_LEFT){var i,n,o=this.repository.finder,s=this.repository.locator,r=this.repository.liner,a=this.editor,l=a.editable(),c=[],u=[];this.repository._.draggedWidget=this;var d=o.greedySearch(),h=CKEDITOR.tools.eventsBuffer(50,(function(){i=s.locate(d),(u=s.sort(n,1)).length&&(r.prepare(d,i),r.placeLine(u[0]),r.cleanup())}));l.addClass("cke_widget_dragging"),c.push(l.on("mousemove",(function(e){n=e.data.$.clientY,h.input()}))),a.fire("dragstart",{target:e.sender}),c.push(a.document.once("mouseup",t,this)),l.isInline()||c.push(CKEDITOR.document.once("mouseup",t,this))}}function T(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),function(){function e(){}function i(e,t,i){return!(!i||!this.checkElement(e))&&(e=i.widgets.getByElement(e,!0))&&e.checkStyleActive(this)}var n={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){if(this.widget=e.widget,this.group="string"==typeof e.group?[e.group]:e.group){var t;e=this.widget,n[e]||(n[e]={});for(var i=0,o=this.group.length;i<o;i++)t=this.group[i],n[e][t]||(n[e][t]=[]),n[e][t].push(this)}},apply:function(e){var t;e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&(t=e.widgets.focused,this.group&&this.removeStylesFromSameGroup(e),t.applyStyle(this))},remove:function(e){e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(e){var t,i,o=!1;if(!(e instanceof CKEDITOR.editor))return!1;if(i=e.elementPath(),this.checkApplicable(i,e))for(var s=0,r=this.group.length;s<r;s++){t=n[this.widget][this.group[s]];for(var a=0;a<t.length;a++)t[a]!==this&&t[a].checkActive(i,e)&&(e.widgets.focused.removeStyle(t[a]),o=!0)}return o},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor&&this.checkElement(e.lastElement)},checkElementMatch:i,checkElementRemovable:i,checkElement:function(e){return!!t.isDomWidgetWrapper(e)&&(e=e.getFirst(t.isDomWidgetElement))&&e.data("widget")==this.widget},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;var t,i={};return(e=e.widgets.registered[this.widget])?e.styleableElements?(t=this.getClassesArray())?(i[e.styleableElements]={classes:t,propertiesOnly:!0},i):null:e.styleToAllowedContentRules?e.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes.class;return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:e,removeFromRange:e,applyToObject:e})}())},beforeInit:function(t){void 0!==CKEDITOR.document.$.querySelectorAll&&(t.widgets=new e(t))},afterInit:function(e){if(void 0!==CKEDITOR.document.$.querySelectorAll){var t,i,n,o=e.widgets.registered;for(i in o)(n=(t=o[i]).button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:n,command:t.name,toolbar:"insert,10"});!function(e){e.contextMenu&&e.contextMenu.addListener((function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})}))}(e)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){return(t=CKEDITOR.tools.prototypedCopy(t)).name=e,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),function(e,t){e.addCommand(t.name,{exec:function(e,i){function n(){e.widgets.finalizeCreation(a)}if((s=e.widgets.focused)&&s.name==t.name)s.edit();else if(t.insert)t.insert();else if(t.template){var o,s="function"==typeof t.defaults?t.defaults():t.defaults,r=(s=CKEDITOR.dom.element.createFromHtml(t.template.output(s)),e.widgets.wrapElement(s,t.name)),a=new CKEDITOR.dom.documentFragment(r.getDocument());a.append(r),(o=e.widgets.initOn(s,t,i&&i.startupData))?(s=o.once("edit",(function(t){t.data.dialog?o.once("dialog",(function(t){var i,s;t=t.data,i=t.once("ok",n,null,null,20),s=t.once("cancel",(function(t){t.data&&!1===t.data.hide||e.widgets.destroy(o,!0)})),t.once("hide",(function(){i.removeListener(),s.removeListener()}))})):n()}),null,null,999),o.edit(),s.removeListener()):n()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}(this.editor,t),function(e,t){var i=t.upcast,n=t.upcastPriority||10;i&&function(t,i,n){var o=CKEDITOR.tools.getIndex(e._.upcasts,(function(e){return e[2]>n}));0>o&&(o=e._.upcasts.length),e._.upcasts.splice(o,0,[CKEDITOR.tools.bind(t,i),i.name,n])}("string"==typeof i?function(e,i){var n,o,s=t.upcast.split(",");for(o=0;o<s.length;o++)if((n=s[o])===e.name)return t.upcasts[n].call(this,e,i);return!1}:i,t,n)}(this,t),this.registered[e]=t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e,i=this.editor.getSelection(),n=i.getSelectedElement(),o=g(this);if(n&&(e=this.getByElement(n,!0)))return o.focus(e).select(e).commit();if(!(i=i.getRanges()[0])||i.collapsed)return o.commit();for((i=new CKEDITOR.dom.walker(i)).evaluator=t.isDomWidgetWrapper;n=i.next();)o.select(this.getByElement(n));o.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,i=e.editor,n=i.createRange();(t=n.moveToClosestEditablePosition(e.wrapper,!0))||(t=n.moveToClosestEditablePosition(e.wrapper,!1)),t&&i.getSelection().selectRanges([n])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&p(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var i,n,o=this.instances;if(t&&!e){o=(n=t.find(".cke_widget_wrapper")).count();for(var s=0;s<o;++s)(i=this.getByElement(n.getItem(s),!0))&&this.destroy(i)}else for(n in o)i=o[n],this.destroy(i,e)},finalizeCreation:function(e){(e=e.getFirst())&&t.isDomWidgetWrapper(e)&&(this.editor.insertElement(e),(e=this.getByElement(e)).ready=!0,e.fire("ready"),e.focus())},getByElement:function(){function e(e){return e.is(t)&&e.data("cke-widget-id")}var t={div:1,span:1};return function(t,i){if(!t)return null;var n=e(t);if(!i&&!n){var o=this.editor.editable();do{t=t.getParent()}while(t&&!t.equals(o)&&!(n=e(t)))}return this.instances[n]||null}}(),initOn:function(e,i,n){if(i?"string"==typeof i&&(i=this.registered[i]):i=this.registered[e.data("widget")],!i)return null;var o=this.wrapElement(e,i.name);return o?o.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,i,n)).isInited()?this.instances[e.id]=e:null:this.getByElement(e):null},initOnAll:function(e){for(var i,n=[],o=(e=(e||this.editor.editable()).find(".cke_widget_new")).count();o--;)(i=this.initOn(e.getItem(o).getFirst(t.isDomWidgetElement)))&&n.push(i);return n},onWidget:function(e){var t=Array.prototype.slice.call(arguments);for(var i in t.shift(),this.instances){var n=this.instances[i];n.name==e&&n.on.apply(n,t)}this.on("instanceCreated",(function(i){(i=i.data).name==e&&i.on.apply(i,t)}))},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);for(var t,i={},n=0;t=e.pop();)-1==t.indexOf("cke_")&&(i[t]=n=1);return n?i:null},wrapElement:function(e,t){var i,n,o=null;if(e instanceof CKEDITOR.dom.element){if(t=t||e.data("widget"),!(i=this.registered[t]))return null;if((o=e.getParent())&&o.type==CKEDITOR.NODE_ELEMENT&&o.data("cke-widget-wrapper"))return o;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),e.data("widget",t),(n=d(i,e.getName()))&&s(e),(o=new CKEDITOR.dom.element(n?"span":"div")).setAttributes(c(n,t)),o.data("cke-display-name",i.pathName?i.pathName:e.getName()),e.getParent(!0)&&o.replace(e),e.appendTo(o)}else if(e instanceof CKEDITOR.htmlParser.element){if(t=t||e.attributes["data-widget"],!(i=this.registered[t]))return null;if((o=e.parent)&&o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"])return o;var r;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),(n=d(i,e.name))&&s(e),(o=new CKEDITOR.htmlParser.element(n?"span":"div",c(n,t))).attributes["data-cke-display-name"]=i.pathName?i.pathName:e.name,(i=e.parent)&&(r=e.getIndex(),e.remove()),o.add(e),i&&u(i,r,o)}return o},_tests_createEditableFilter:l},CKEDITOR.event.implementOn(e.prototype),t.prototype={addClass:function(e){this.element.addClass(e),this.wrapper.addClass(t.WRAPPER_CLASS_PREFIX+e)},applyStyle:function(e){f(this,e,1)},checkStyleActive:function(e){var t;if(!(e=v(e)))return!1;for(;t=e.pop();)if(!this.hasClass(t))return!1;return!0},destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var i=this.editables[e];i.removeListener("focus",C),i.removeListener("blur",_),this.editor.focusManager.remove(i),t||(this.repository.destroyAll(!1,i),i.removeClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),i.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return!(!1===this.fire("edit",e)||!e.dialog||(this.editor.openDialog(e.dialog,(function(e){var i,n;!1!==t.fire("dialog",e)&&(i=e.on("show",(function(){e.setupContent(t)})),n=e.on("ok",(function(){var i,n=t.on("data",(function(e){i=1,e.cancel()}),null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),n.removeListener(),i&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))})),e.once("hide",(function(){i.removeListener(),n.removeListener()})))})),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var n=this._findOneNotNested(t.selector);return!(!n||!n.is(CKEDITOR.dtd.$editable)||(n=new i(this.editor,n,{filter:l.call(this.repository,this.name,e,t)}),this.editables[e]=n,n.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":n.enterMode}),n.filter&&n.data("cke-filter",n.filter.id),n.addClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),t.pathName&&n.data("cke-display-name",t.pathName),this.editor.focusManager.add(n),n.on("focus",C,this),CKEDITOR.env.ie&&n.on("blur",_,this),n._.initialSetData=!0,n.setData(n.getHtml()),0))},_findOneNotNested:function(e){e=this.wrapper.find(e);for(var i,n,o=0;o<e.count();o++)if(n=(i=e.getItem(o)).getAscendant(t.isDomWidgetWrapper),this.wrapper.equals(n))return i;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(e){this.element.removeClass(e),this.wrapper.removeClass(t.WRAPPER_CLASS_PREFIX+e)},removeStyle:function(e){f(this,e,0)},setData:function(e,t){var i=this.data,n=0;if("string"==typeof e)i[e]!==t&&(i[e]=t,n=1);else{var o=e;for(e in o)i[e]!==o[e]&&(n=1,i[e]=o[e])}return n&&this.dataReady&&(T(this),this.fire("data",i)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var e=this.editor,t=this.element.$,i=this._.dragHandlerOffset;t={x:t.offsetLeft,y:t.offsetTop-15},i&&t.x==i.x&&t.y==i.y||(i=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:t.y+"px",left:t.x+"px",display:"block"}),e.fire("unlockSnapshot"),!i&&e.resetDirty(),this._.dragHandlerOffset=t)}},CKEDITOR.event.implementOn(t.prototype),t.getNestedEditable=function(e,i){return!i||i.equals(e)?null:t.isDomNestedEditable(i)?i:t.getNestedEditable(e,i.getParent())},t.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},t.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},t.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},t.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},t.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},t.isDomWidget=function(e){return!!e&&(this.isDomWidgetWrapper(e)||this.isDomWidgetElement(e))},t.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},t.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},t.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",i.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var E=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,I={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=i}(),function(){function e(e,t,i){this.editor=e,this.notification=null,this._message=new CKEDITOR.template(t),this._singularMessage=i?new CKEDITOR.template(i):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function t(e){this._weight=e||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),e.prototype={createTask:function(e){e=e||{};var t,i=!this.notification;return i&&(this.notification=this._createNotification()),(t=this._addTask(e)).on("updated",this._onTaskUpdate,this),t.on("done",this._onTaskDone,this),t.on("canceled",(function(){this._removeTask(t)}),this),this.update(),i&&this.notification.show(),t},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var e=this.getTaskCount(),t={current:this.getDoneTaskCount(),max:e,percentage:Math.round(100*this.getPercentage())};return(1==e&&this._singularMessage?this._singularMessage:this._message).output(t)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(e){return e=new t(e.weight),this._tasks.push(e),this._totalWeights+=e._weight,e},_removeTask:function(e){var t=CKEDITOR.tools.indexOf(this._tasks,e);-1!==t&&(e._doneWeight&&(this._doneWeights-=e._doneWeight),this._totalWeights-=e._weight,this._tasks.splice(t,1),this.update())},_onTaskUpdate:function(e){this._doneWeights+=e.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(e.prototype),t.prototype={done:function(){this.update(this._weight)},update:function(e){if(!this.isDone()&&!this.isCanceled()){var t=(e=Math.min(this._weight,e))-this._doneWeight;this._doneWeight=e,this.fire("updated",t),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.plugins.notificationAggregator=e,CKEDITOR.plugins.notificationAggregator.task=t}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(e){e.filter.allow("*[!data-widget,!data-cke-upload-id]")}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(e,t,i){var n=CKEDITOR.fileTools,o=e.uploadRepository,s=i.supportedTypes?10:20;i.fileToElement&&e.on("paste",(function(i){i=i.data;var s,r,a=e.widgets.registered[t],l=i.dataTransfer,c=l.getFilesCount(),u=a.loadMethod||"loadAndUpload";if(!i.dataValue&&c)for(r=0;r<c;r++)if(s=l.getFile(r),!a.supportedTypes||n.isTypeSupported(s,a.supportedTypes)){var d=a.fileToElement(s);s=o.create(s,void 0,a.loaderType),d&&(s[u](a.uploadUrl,a.additionalRequestParameters),CKEDITOR.fileTools.markElement(d,t,s.id),"loadAndUpload"!=u&&"upload"!=u||a.skipNotifications||CKEDITOR.fileTools.bindNotifications(e,s),i.dataValue+=d.getOuterHtml())}}),null,null,s),CKEDITOR.tools.extend(i,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var t,i,n=this,s=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=o.loaders[s],a=CKEDITOR.tools.capitalize;r.on("update",(function(o){n.wrapper&&n.wrapper.getParent()?(e.fire("lockSnapshot"),o="on"+a(r.status),"function"==typeof n[o]&&!1===n[o](r)||(i="cke_upload_"+r.status,n.wrapper&&i!=t&&(t&&n.wrapper.removeClass(t),n.wrapper.addClass(i),t=i),"error"!=r.status&&"abort"!=r.status||e.widgets.del(n)),e.fire("unlockSnapshot")):(CKEDITOR.instances[e.name]&&e.editable().find('[data-cke-upload-id="'+s+'"]').count()||r.abort(),o.removeListener())})),r.update()},replaceWith:function(t,i){if(""===t.trim())e.widgets.del(this);else{var n,o,s=this==e.widgets.focused,r=e.editable(),a=e.createRange();s||(o=e.getSelection().createBookmarks()),a.setStartBefore(this.wrapper),a.setEndAfter(this.wrapper),s&&(n=a.createBookmark()),r.insertHtmlIntoRange(t,a,i),e.widgets.checkWidgets({initOnlyNew:!0}),e.widgets.destroy(this,!0),s?(a.moveToBookmark(n),a.select()):e.getSelection().selectBookmarks(o)}},_getLoader:function(){var e=this.wrapper.findOne("[data-cke-upload-id]");return e?this.editor.uploadRepository.loaders[e.data("cke-upload-id")]:null}}),e.widgets.add(t,i)},markElement:function(e,t,i){e.setAttributes({"data-cke-upload-id":i,"data-widget":t})},bindNotifications:function(e,t){var i,n=null;t.on("update",(function(){!n&&t.uploadTotal&&((i=e._.uploadWidgetNotificaionAggregator)&&!i.isFinished()||(i=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne)).once("finished",(function(){var t=i.getTaskCount();0===t?i.notification.hide():i.notification.update({message:1==t?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",t),type:"success",important:1})})),n=i.createTask({weight:t.uploadTotal})),n&&"uploading"==t.status&&n.update(t.uploaded)})),t.on("uploaded",(function(){n&&n.done()})),t.on("error",(function(){n&&n.cancel(),e.showNotification(t.message,"warning")})),t.on("abort",(function(){n&&n.cancel(),CKEDITOR.instances[e.name]&&e.showNotification(e.lang.uploadwidget.abort,"info")}))}}),function(){function e(e){return 9>=e&&(e="0"+e),String(e)}function t(t){var n=[(n=new Date).getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()];return i+=1,"image-"+CKEDITOR.tools.array.map(n,e).join("")+"-"+i+"."+t}var i=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(e){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var i=CKEDITOR.fileTools,n=i.getUploadUrl(e.config,"image");n&&(i.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:n,fileToElement:function(){var e=new CKEDITOR.dom.element("img");return e.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),e},parts:{img:"img"},onUploading:function(e){this.parts.img.setAttribute("src",e.data)},onUploaded:function(e){var t=this.parts.img.$;this.replaceWith('<img src="'+e.url+'" width="'+(e.responseData.width||t.naturalWidth)+'" height="'+(e.responseData.height||t.naturalHeight)+'">')}}),e.on("paste",(function(o){if(o.data.dataValue.match(/<img[\s\S]+data:/i)){o=o.data;var s,r,a,l=document.implementation.createHTMLDocument("");for((l=new CKEDITOR.dom.element(l.body)).data("cke-editable",1),l.appendHtml(o.dataValue),s=l.find("img"),a=0;a<s.count();a++){var c=(r=s.getItem(a)).getAttribute("src"),u=c&&"data:"==c.substring(0,5),d=null===r.data("cke-realelement");u&&d&&!r.data("cke-upload-id")&&!r.isReadOnly(1)&&(u=(u=c.match(/image\/([a-z]+?);/i))&&u[1]||"jpg",(c=e.uploadRepository.create(c,t(u))).upload(n),i.markElement(r,"uploadimage",c.id),i.bindNotifications(e,c))}o.dataValue=l.getHtml()}})))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,e.config.wsc_interfaceLang=e.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css")},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||t.ie&&(8>t.version||t.quirks))},void 0===e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,notification,button,toolbar,clipboard,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,copyformatting,div,resize,elementspath,enterkey,entities,popup,filetools,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc",CKEDITOR.config.skin="moono-lisa",d=function(e,t){var i=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var n=0;n<e.length;n++)CKEDITOR.skin.icons[e[n]]={path:i,offset:-e[++n],bgsize:e[++n]}},CKEDITOR.env.hidpi?d("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,copyformatting,480,,creatediv,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,smiley,1080,,justifyblock,1104,,justifycenter,1128,,justifyleft,1152,,justifyright,1176,,language,1200,,anchor-rtl,1224,,anchor,1248,,link,1272,,unlink,1296,,bulletedlist-rtl,1320,,bulletedlist,1344,,numberedlist-rtl,1368,,numberedlist,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastetext-rtl,1536,,pastetext,1560,,pastefromword-rtl,1584,,pastefromword,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,selectall,1752,,showblocks-rtl,1776,,showblocks,1800,,source-rtl,1824,,source,1848,,specialchar,1872,,scayt,1896,,table,1920,,redo-rtl,1944,,redo,1968,,undo-rtl,1992,,undo,2016,,spellchecker,2040,","icons_hidpi.png"):d("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,copyformatting,480,auto,creatediv,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,smiley,1080,auto,justifyblock,1104,auto,justifycenter,1128,auto,justifyleft,1152,auto,justifyright,1176,auto,language,1200,auto,anchor-rtl,1224,auto,anchor,1248,auto,link,1272,auto,unlink,1296,auto,bulletedlist-rtl,1320,auto,bulletedlist,1344,auto,numberedlist-rtl,1368,auto,numberedlist,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastetext-rtl,1536,auto,pastetext,1560,auto,pastefromword-rtl,1584,auto,pastefromword,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,selectall,1752,auto,showblocks-rtl,1776,auto,showblocks,1800,auto,source-rtl,1824,auto,source,1848,auto,specialchar,1872,auto,scayt,1896,auto,table,1920,auto,redo-rtl,1944,auto,redo,1968,auto,undo-rtl,1992,auto,undo,2016,auto,spellchecker,2040,auto","icons.png"),CKEDITOR.lang.languages={af:1,sq:1,ar:1,az:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,"de-ch":1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,oc:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,"es-mx":1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}),e.exports={CKEDITOR:CKEDITOR}},"./lib/bootstrap/js/bootstrap.min.js":function(e,t,i){"use strict";i.r(t);var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o);if(void 0===s())throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(s()),function(e){var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){r.detach().trigger("closed.bs.alert").remove()}var o=e(this),s=o.attr("data-target");s||(s=(s=o.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,""));var r=e(s);t&&t.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=e.fn.alert;e.fn.alert=function(t){return this.each((function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)}))},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(s()),function(e){function t(t){return this.each((function(){var n=e(this),o=n.data("bs.button"),s="object"==typeof t&&t;o||n.data("bs.button",o=new i(this,s)),"toggle"==t?o.toggle():t&&o.setState(t)}))}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.6",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();t+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(e.proxy((function(){n[o](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))}),this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),e(i.target).is('input[type="radio"]')||e(i.target).is('input[type="checkbox"]')||i.preventDefault()})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))}))}(s()),function(e){function t(t){return this.each((function(){var n=e(this),o=n.data("bs.carousel"),s=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),r="string"==typeof t?t:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof t?o.to(t):r?o[r]():s.interval&&o.pause().cycle()}))}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",(function(){t.to(e)})):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(t,o),r=this.interval,a="next"==t?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",(function(){s.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(h)}),0)})).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var o=function(i){var n,o=e(this),s=e(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=e.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),t.call(s,r),a&&s.data("bs.carousel").to(a),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",(function(){e('[data-ride="carousel"]').each((function(){var i=e(this);t.call(i,i.data())}))}))}(s()),function(e){function t(t){var i=t.attr("data-target");i||(i=(i=t.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(n).remove(),e(o).each((function(){var n=e(this),o=t(n),s={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(o[0],i.target)||(o.trigger(i=e.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(e.Event("hidden.bs.dropdown",s)))))})))}var n=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.6",s.prototype.toggle=function(n){var o=e(this);if(!o.is(".disabled, :disabled")){var s=t(o),r=s.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var a={relatedTarget:this};if(s.trigger(n=e.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(e.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var s=t(n),r=s.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&s.find(o).trigger("focus"),n.trigger("click");var a=s.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)}))},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(s()),function(e){function t(t,n){return this.each((function(){var o=e(this),s=o.data("bs.modal"),r=e.extend({},i.DEFAULTS,o.data(),"object"==typeof t&&t);s||o.data("bs.modal",s=new i(this,r)),"string"==typeof t?s[t](n):r.show&&s.show(n)}))}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});o?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(s)})).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)})))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")}))},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy((function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))}),this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(i){var n=e(this),o=n.attr("href"),s=e(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",(function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),t.call(s,r,this)}))}(s()),function(e){var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,(function(e,n){i[e]!=n&&(t[e]=n)})),t},t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)):i.show())},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)):i.hide())},t.prototype.show=function(){var i=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=s[0].offsetWidth,h=s[0].offsetHeight;if(c){var p=a,m=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+h>m.bottom?"top":"top"==a&&u.top-h<m.top?"bottom":"right"==a&&u.right+d>m.width?"left":"left"==a&&u.left-d<m.left?"right":a,s.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,u,d,h);this.applyPlacement(g,a);var f=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",f).emulateTransitionEnd(t.TRANSITION_DURATION):f()}},t.prototype.applyPlacement=function(t,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top+=r,t.left+=a,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=s&&(t.top=t.top+s-c);var u=this.getViewportAdjustedDelta(i,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(i),h=d?2*u.left-o+l:2*u.top-s+c,p=d?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][p],d)},t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(i){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),i&&i()}var o=this,s=e(this.$tip),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(t.TRANSITION_DURATION):n(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var i=(t=t||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,r,a,s)},t.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-s-r.scroll,l=t.top+s-r.scroll+n;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=t.left-s,u=t.left+s+i;c<r.left?o.left=r.left-c:u>r.right&&(o.left=r.left+r.width-u)}return o},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide((function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null}))};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each((function(){var n=e(this),o=n.data("bs.tooltip"),s="object"==typeof i&&i;(o||!/destroy|hide/.test(i))&&(o||n.data("bs.tooltip",o=new t(this,s)),"string"==typeof i&&o[i]())}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(s()),function(e){var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=function(i){return this.each((function(){var n=e(this),o=n.data("bs.popover"),s="object"==typeof i&&i;(o||!/destroy|hide/.test(i))&&(o||n.data("bs.popover",o=new t(this,s)),"string"==typeof i&&o[i]())}))},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(s()),function(e){function t(t){return this.each((function(){var n=e(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof t&&o[t]()}))}var i=function(t){this.element=e(t)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),r=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),t.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=e(n);this.activate(t.closest("li"),i),this.activate(a,a.parent(),(function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})}))}}},i.prototype.activate=function(t,n,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),a=o&&e.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),r.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var o=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(s()),function(e){function t(t){return this.each((function(){var n=e(this),o=n.data("bs.affix"),s="object"==typeof t&&t;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof t&&o[t]()}))}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.6",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=s.top)&&"bottom":!(e-n>=o+r)&&"bottom";var a=null==this.affixed,l=a?o:s.top;return null!=i&&i>=o?"top":null!=n&&l+(a?r:t)>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,r=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(r,t,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-t-s})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)}))}))}(s()),function(e){function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each((function(){var i=e(this),o=i.data("bs.collapse"),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!o&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof t&&o[t]()}))}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.6",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),t||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy((function(i,n){var o=e(n);this.addAriaAndCollapsedClass(t(o),o)}),this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(n){var o=e(this);o.attr("data-target")||n.preventDefault();var s=t(o),r=s.data("bs.collapse")?"toggle":o.data();i.call(s,r)}))}(s()),function(e){function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each((function(){var n=e(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new t(this,s)),"string"==typeof i&&o[i]()}))}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var t=e(this),o=t.data("target")||t.attr("href"),s=/^#./.test(o)&&e(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null})).sort((function(e,t){return e[0]-t[0]})).each((function(){t.offsets.push(this[0]),t.targets.push(this[1])}))},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return r!=(e=s[s.length-1])&&this.activate(e);if(r&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)r!=s[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",(function(){e('[data-spy="scroll"]').each((function(){var t=e(this);i.call(t,t.data())}))}))}(s()),(n=s()).fn.emulateTransitionEnd=function(e){var t=!1,i=this;return n(this).one("bsTransitionEnd",(function(){t=!0})),setTimeout((function(){t||n(i).trigger(n.support.transition.end)}),e),this},n((function(){n.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){return n(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})}))},"./lib/colorpicker/jquery.colorpicker.js":function(e,t,i){"use strict";i.r(t);var n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_,C,w,T,E,I,x,S,k,D,O,R,P,L,A,M,B,N,F,K,V,H,j,U,z,W,G,$,q,Y,Z=i("./lib/jquery-1.11.3.min.js");n=i.n(Z)(),s=!1,r='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_alpha"><div class="cp-oo"></div><div class="cp-vi"></div></div><div class="colorpicker_color1 colorpicker_new_color"><div></div></div><div class="colorpicker_color1 colorpicker_current_color"><div></div></div><div class="colorpicker_favorite_btn"><span class="fa fa-star-o"></span></div><div class="prep">#</div><div class="colorpicker_hex input-group input-group-sm"><input class="cpc-hex form-control" type="text" maxlength="6" size="6" /><span class="input-group-btn"><button tabindex="-1" data-toggle="dropdown" class="more_controls btn btn-default dropdown-toggle"><span class="caret"></span></button></span></div><div class="colorpicker_palettes"></div><div class="colorpicker_rgb_a colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">A</span><input class="cpc-rgb-a form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_rgb"><div class="colorpicker_rgb_r colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">R</span><input class="cpc-rgb-r form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_rgb_g colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">G</span><input class="cpc-rgb-g form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_rgb_b colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">B</span><input class="cpc-rgb-b form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_hsb_h colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">H</span><input class="cpc-hsb-h form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_hsb_s colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">S</span><input class="cpc-hsb-s form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div><div class="colorpicker_hsb_b colorpicker_field hide input-group input-group-sm"><span class="letter input-group-addon">B</span><input class="cpc-hsb-b form-control" type="text" maxlength="3" size="3" /><span class="buttons input-group-btn"></span></div></div><div class="colorpicker_buttons"><button class="btn btn-default btn-sm colorpicker_cancel">'+__("Cancel")+'</button> <button class="btn btn-default btn-sm colorpicker_transparent">'+__("Transparent")+'</button> <button class="btn btn-default btn-sm colorpicker_automatic hide2">'+__("Automatic")+'</button> <button class="btn btn-success btn-sm colorpicker_submit">'+__("Apply")+"</button></div></div>",a={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",trans:!1,allowAlpha:!0,auto:!1,livePreview:!0,flat:!1},l=function(e,t){var i=W(e);n(t).data("colorpicker").fields.filter(".cpc-rgb-r").val(i.r).end().filter(".cpc-rgb-g").val(i.g).end().filter(".cpc-rgb-b").val(i.b).end().filter(".cpc-rgb-a").val(Math.round(100*i.a)).end()},c=function(e,t){n(t).data("colorpicker").fields.filter(".cpc-hsb-h").val(e.h).end().filter(".cpc-hsb-s").val(e.s).end().filter(".cpc-hsb-b").val(e.b).end()},u=function(e,t){n(t).data("colorpicker").fields.filter(".cpc-hex").val(G(e)).end()},d=function(e,t){n(t).data("colorpicker").selector.css("backgroundColor","#"+G({h:e.h,s:100,b:100})),n(t).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},h=function(e,t){n(t).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},p=function(e,t){n(t).data("colorpicker").alpha.css("background-color","#"+G(e)),n(t).data("colorpicker").alphaIndic.css("left",parseInt(150*(1-e.a),10))},m=function(e,t){n(t).data("colorpicker").currentColor.css("backgroundColor","#"+G(e)).children().css("opacity",1-e.a)},g=function(e,t){n(t).data("colorpicker").newColor.css("backgroundColor","#"+G(e)).children().css("opacity",1-e.a);var i=o.getColorPalettes(),s=o.colorObjectToText(W(e));i&&i.custom&&(i.custom.indexOf(s.toLowerCase())>=0||i.custom.indexOf(s.toUpperCase())>=0)?n(t).find(".colorpicker_favorite_btn .fa").removeClass("fa-star-o").addClass("fa-star"):n(t).find(".colorpicker_favorite_btn .fa").removeClass("fa-star").addClass("fa-star-o")},f=function(e){var t=!1;if(!e.ctrlKey||67!==e.keyCode&&86!==e.keyCode||(t=!0),(!e.charCode&&e.keyCode>=48&&e.keyCode<=57||!e.charCode&&e.keyCode>=96&&e.keyCode<=105||e.charCode>=48&&e.charCode<=57)&&(t=!0),(e.keyCode>=35&&e.keyCode<=40||45===e.keyCode||46===e.keyCode||17===e.keyCode||13===e.keyCode)&&(t=!0),s&&(!e.charCode&&e.keyCode>=65&&e.keyCode<=70||e.charCode>=65&&e.charCode<=70||e.charCode>=97&&e.charCode<=102)&&(t=!0),!t)return!1;!0===n(this).parents(".colorpicker").data("colorpicker").livePreview&&y.apply(this)},y=function(e){var t,i=n(this),o=i.parents(".colorpicker"),s=o.data("colorpicker"),r=s.fields,a=parseInt(r.filter(".cpc-rgb-a").val(),10)/100;!i.is(".cpc-rgb-a")&&(isNaN(a)||a<.00390625)&&(a=1),this.parentNode.className.indexOf("_hex")>0?((t=U(j(this.value))).a=a,o.data("colorpicker").color=t):this.parentNode.className.indexOf("_hsb")>0?o.data("colorpicker").color=t=V({h:parseInt(r.filter(".cpc-hsb-h").val(),10),s:parseInt(r.filter(".cpc-hsb-s").val(),10),b:parseInt(r.filter(".cpc-hsb-b").val(),10),a:a}):o.data("colorpicker").color=t=z(H({r:parseInt(r.filter(".cpc-rgb-r").val(),10),g:parseInt(r.filter(".cpc-rgb-g").val(),10),b:parseInt(r.filter(".cpc-rgb-b").val(),10),a:a})),e&&(l(t,o.get(0)),u(t,o.get(0)),c(t,o.get(0))),d(t,o.get(0)),h(t,o.get(0)),p(t,o.get(0)),g(t,o.get(0)),s.onChange.apply(o,[t,G(t),W(t)])},b=function(e){n(this).parents(".colorpicker").data("colorpicker").fields.parent().removeClass("colorpicker_focus")},v=function(){var e=n(this).parents(".colorpicker");this.parentNode.className.indexOf("_hex"),s=this.parentNode.className.indexOf("_hex")>0,e.data("colorpicker").fields.parent().removeClass("colorpicker_focus"),n(this).parent().addClass("colorpicker_focus")},_=function(e){var t=n(this).parent().find("input").focus(),i={el:n(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:t,val:parseInt(t.val(),10),preview:n(this).closest(".colorpicker").data("colorpicker").livePreview};n(document).bind("mouseup",i,w),n(document).bind("mousemove",i,C)},C=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&y.apply(e.data.field.get(0),[!0]),!1},w=function(e){return y.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),n(document).unbind("mouseup",w),n(document).unbind("mousemove",C),!1},T=function(e){var t={cal:n(this).parent(),y:n(this).offset().top};t.preview=t.cal.data("colorpicker").livePreview,n(document).bind("mouseup",t,I),n(document).bind("mousemove",t,E)},E=function(e){return y.apply(e.data.cal.data("colorpicker").fields.filter(".cpc-hsb-h").val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},I=function(e){return l(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),u(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),E(e),n(document).unbind("mouseup",I),n(document).unbind("mousemove",E),!1},x=function(e){var t={cal:n(this).parent(),x:n(this).offset().left};t.preview=t.cal.data("colorpicker").livePreview,n(document).bind("mouseup",t,k),n(document).bind("mousemove",t,S)},S=function(e){return y.apply(e.data.cal.data("colorpicker").fields.filter(".cpc-rgb-a").val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageX-e.data.x)))/150,10)).get(0),[e.data.preview]),!1},k=function(e){return l(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),u(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),S(e),n(document).unbind("mouseup",k),n(document).unbind("mousemove",S),!1},D=function(e){var t={cal:n(this).parent(),pos:n(this).offset()};t.preview=t.cal.data("colorpicker").livePreview,n(document).bind("mouseup",t,R),n(document).bind("mousemove",t,O)},O=function(e){return y.apply(e.data.cal.data("colorpicker").fields.filter(".cpc-hsb-b").val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().filter(".cpc-hsb-s").val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},R=function(e){return l(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),u(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),O(e),n(document).unbind("mouseup",R),n(document).unbind("mousemove",O),!1},P=function(e){n(this).addClass("colorpicker_focus")},L=function(e){n(this).removeClass("colorpicker_focus")},A=function(e){var t=n(this).parents(".colorpicker"),i=t.data("colorpicker").color;t.data("colorpicker").origColor=i,m(i,t.get(0)),i.a>0&&o.prependColor("recent",o.colorObjectToText(W(i)),M.bind(t.data("colorpicker").el)),t.data("colorpicker").onSubmit(i,G(i),W(i),t.data("colorpicker").el)},M=function(){var e=n("#"+n(this).data("colorpickerId")).find(".colorpicker_palettes"),t=o.getColorPalettes(),i=function(i,o){var s=n('<div class="colorpicker_palette" data-id="'+i+'"/>').appendTo(e);n('<div class="colorpicker_palette_name"/>').appendTo(s).text(o);for(var r=n('<div class="colorpicker_palette_colors"/>').appendTo(s),a=t[i]||[],m=0;m<17;m++){var f=a.length>m?a[m]:null,y=n('<div class="colorpicker_palette_color"/>').appendTo(r).data("color",f).attr("title",f);null===f?y.addClass("empty_color"):(n('<div class="colorpicker_palette_color_overlay"/>').appendTo(y).css({backgroundColor:f}),y.on("click touchstart",(function(){var e=n(this),t=e.data("color"),i=e.closest(".colorpicker");t=U(t),i.is(".allow-alpha")||(t.a=1),i.data("colorpicker").color=t,l(t,i.get(0)),c(t,i.get(0)),u(t,i.get(0)),h(t,i.get(0)),d(t,i.get(0)),p(t,i.get(0)),g(t,i.get(0))})))}n('<div class="clearfix"/>').appendTo(r)};e.empty(),i("recent",__("Recent")),i("custom",__("Favorite"))},B=function(e){var t=n("#"+n(this).data("colorpickerId"));t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)]);var i=n(this).offset(),o=K(),s=i.top+this.offsetHeight,r=i.left;return s+176>o.t+o.h&&(s-=this.offsetHeight+176),r+356>o.l+o.w&&(r-=356),r=Math.max(0,r),t.css({left:r+"px",top:s+"px"}),M.apply(this),0!=t.data("colorpicker").onShow.apply(this,[t.get(0)])&&t.show(),n(document).bind("mousedown",{cal:t},N),!1},N=function(e,t){F(e.data.cal.get(0),e.target,e.data.cal.get(0))?t&&(e.data.cal.data("colorpicker").onHide(e.data.cal,e),n(document).unbind("mousedown",N)):(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),n(document).unbind("mousedown",N))},F=function(e,t,i){if(e==t)return!0;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));for(var n=t.parentNode;n&&n!=i;){if(n==e)return!0;n=n.parentNode}return!1},K=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},V=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b)),a:Math.min(1,Math.max(0,"a"in e?e.a:1))}},H=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b)),a:Math.min(1,Math.max(0,"a"in e?e.a:1))}},j=function(e){var t=6-e.length;if(t>0){for(var i=[],n=0;n<t;n++)i.push("0");i.push(e),e=i.join("")}return e},U=function(e){return z((t=e)&&"object"==typeof t?n.extend(!0,{},t):t&&"transparent"!==t?(i=(t=t.trim()).match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i))?{r:parseInt(i[1]+i[1],16),g:parseInt(i[2]+i[2],16),b:parseInt(i[3]+i[3],16),a:1}:(i=t.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i))?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:1}:(i=t.match(/^rgb\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i))?{r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:1}:(i=t.match(/^rgba\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i))?{r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:parseFloat(i[4])}:(i=t.match(/^hsl\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*\)$/i))?o.HSL2RGB({h:parseFloat(i[1])/360,s:parseFloat(i[2])/100,l:parseFloat(i[3])/100,a:1}):(i=t.match(/^hsla\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)\s*\)$/i))?o.HSL2RGB({h:parseFloat(i[1])/360,s:parseFloat(i[2])/100,l:parseFloat(i[3])/100,a:parseFloat(i[4])}):{r:255,g:255,b:255,a:1}:{r:255,g:255,b:255,a:0});var t,i},z=function(e){var t={h:0,s:0,b:0,a:"a"in e?e.a:1},i=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),o=n-i;return t.b=n,t.s=0!=n?255*o/n:0,0!=t.s?e.r==n?t.h=(e.g-e.b)/o:e.g==n?t.h=2+(e.b-e.r)/o:t.h=4+(e.r-e.g)/o:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},W=function(e){var t,i,n,o=e.h/360,s=e.s/100,r=e.b/100,a=Math.floor(6*o),l=6*o-a,c=r*(1-s),u=r*(1-l*s),d=r*(1-(1-l)*s);switch(a%6){case 0:t=r,i=d,n=c;break;case 1:t=u,i=r,n=c;break;case 2:t=c,i=r,n=d;break;case 3:t=c,i=u,n=r;break;case 4:t=d,i=c,n=r;break;case 5:t=r,i=c,n=u}return{r:Math.round(255*t),g:Math.round(255*i),b:Math.round(255*n),a:"a"in e?Math.round(100*e.a)/100:1}},G=function(e){return t=W(e),i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)],n.each(i,(function(e,t){1==t.length&&(i[e]="0"+t)})),i.join("");var t,i},$=function(){var e=n(this).parent(),t=e.data("colorpicker").origColor;e.data("colorpicker").color=t,l(t,e.get(0)),u(t,e.get(0)),c(t,e.get(0)),d(t,e.get(0)),p(t,e.get(0)),h(t,e.get(0)),g(t,e.get(0))},q={},Y={init:function(e){if(o||(o=e.WB_ColorPicker),"string"==typeof(e=n.extend({},a,e||{})).color)e.color=U(e.color);else if(null!=e.color.r&&null!=e.color.g&&null!=e.color.b)e.color=z(H(e.color));else{if(null==e.color.h||null==e.color.s||null==e.color.b)return this;e.color=V(e.color)}return this.each((function(){if(!n(this).data("colorpickerId")){var t=n.extend({},e);t.origColor=e.color;var i="collorpicker_"+function(){var e;do{e=parseInt(1e6*Math.random())}while("_"+e in q);return q["_"+e]=!0,e}();n(this).data("colorpickerId",i);var s=n(r).attr("id",i);t.flat?s.appendTo(this).show():s.appendTo(document.body),t.fields=s.find("input").bind("keyup",f).bind("change",y).bind("blur",b).bind("focus",v),s.find("span.buttons").bind("mousedown",_).end().find(">div.colorpicker_current_color").bind("click",$),t.allowAlpha&&s.addClass("allow-alpha"),t.selector=s.find("div.colorpicker_color").bind("mousedown",D),t.selectorIndic=t.selector.find("div div"),t.el=this,t.hue=s.find("div.colorpicker_hue div"),t.alpha=s.find("div.colorpicker_alpha .cp-oo"),t.alphaIndic=s.find("div.colorpicker_alpha .cp-vi"),s.find("div.colorpicker_hue").bind("mousedown",T),s.find("div.colorpicker_alpha").bind("mousedown",x),t.newColor=s.find("div.colorpicker_new_color"),t.currentColor=s.find("div.colorpicker_current_color"),s.data("colorpicker",t),s.find("button.colorpicker_submit").bind("mouseenter",P).bind("mouseleave",L).bind("click",A),s.find("button.colorpicker_cancel").bind("click",(function(e){e.data={cal:s},N(e,!0)})),s.find("button.colorpicker_transparent").bind("click",(function(e){s.data("colorpicker").onSubmit(null,"transparent",null,s.data("colorpicker").el)})),s.find("button.colorpicker_automatic").bind("click",(function(e){s.data("colorpicker").onSubmit(null,"inherit",null,s.data("colorpicker").el)})),t.auto&&s.find("button.colorpicker_automatic").removeClass("hide2"),s.find("button.more_controls").bind("click",(function(e){s.css("height",s.hasClass("allow-alpha")?"390px":"347px"),s.find(".colorpicker_field").removeClass("hide"),n(this).attr("disabled","disabled")})),s.find(".colorpicker_field span.buttons").each((function(e,t){n(t).html('<button class="btn btn-default btn-arrow arrow-up"><span class="caret"></span></button><button class="btn btn-default btn-arrow arrow-down"><span class="caret"></span></button>'),n(t).find("button").click((function(){var e=!!n(this).hasClass("arrow-up"),t=n(this).parents(".colorpicker_field").find("input").focus(),i=n(this).parents(".colorpicker_field").attr("class").indexOf("_hsb_h")>0?360:n(this).parents(".colorpicker_field").attr("class").indexOf("_hsb")>0?100:255,o=parseInt(t.val());e?o++:o--,o<0?o=0:o>i&&(o=i),t.val(o),t.change()}))})),s.find(".colorpicker_favorite_btn").on("click touchstart",(function(){var e=n(this).closest(".colorpicker"),t=o.colorObjectToText(W(e.data("colorpicker").color)),i=o.getColorPalettes();i&&i.custom&&(i.custom.indexOf(t.toLowerCase())>=0||i.custom.indexOf(t.toUpperCase())>=0)?(o.removeColor("custom",t,M.bind(e.data("colorpicker").el)),n(e).find(".colorpicker_favorite_btn .fa").removeClass("fa-star").addClass("fa-star-o")):(o.appendColor("custom",t,M.bind(e.data("colorpicker").el)),n(e).find(".colorpicker_favorite_btn .fa").removeClass("fa-star-o").addClass("fa-star"))})),l(t.color,s.get(0)),c(t.color,s.get(0)),u(t.color,s.get(0)),h(t.color,s.get(0)),d(t.color,s.get(0)),p(t.color,s.get(0)),m(t.color,s.get(0)),g(t.color,s.get(0)),t.flat?s.css({position:"relative",display:"block"}):n(this).bind(t.eventName,B)}}))},destroy:function(){return this.each((function(){var e=n(this),t=e.data("colorpickerId");t&&(e.data("colorpickerId",null),n(document).unbind("mousedown",N),n("#"+t).remove())}))},showPicker:function(){return this.each((function(){n(this).data("colorpickerId")&&B.apply(this)}))},hidePicker:function(){return this.each((function(){n(this).data("colorpickerId")&&n("#"+n(this).data("colorpickerId")).hide()}))},setColor:function(e){if("string"==typeof e)e=U(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=z(H(e));else{if(null==e.h||null==e.s||null==e.b)return this;e=V(e)}return this.each((function(){if(n(this).data("colorpickerId")){var t=n("#"+n(this).data("colorpickerId"));t.data("colorpicker").color=e,t.data("colorpicker").origColor=e,l(e,t.get(0)),c(e,t.get(0)),u(e,t.get(0)),h(e,t.get(0)),d(e,t.get(0)),p(e,t.get(0)),m(e,t.get(0)),g(e,t.get(0))}}))}},n.fn.extend({ColorPicker:Y.init,ColorPickerHide:Y.hidePicker,ColorPickerShow:Y.showPicker,ColorPickerSetColor:Y.setColor,ColorPickerDestroy:Y.destroy})},"./lib/fancybox/jquery.fancybox-1.3.4.pack.js":function(e,t,i){"use strict";i.r(t);var n,o,s,r,a,l,c,u,d,h,p,m,g,f,y,b,v,_,C,w,T,E,I,x,S,k,D,O,R,P,L,A,M,B,N,F,K,V,H,j,U,z=i("./lib/jquery-1.11.3.min.js"),W=i.n(z);n=W(),y=0,b={},v=[],_=0,C={},w=[],T=null,E=new Image,I=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,x=/[^\.]\.(swf)\s*$/i,S=1,k=0,D="",O=!1,R=n.extend(n("<div/>")[0],{prop:0}),P=n.browser.msie&&n.browser.version<7&&!window.XMLHttpRequest,L=function(){s.hide(),E.onerror=E.onload=null,T&&T.abort(),o.empty()},A=function(){!1===b.onError(v,y,b)?(s.hide(),O=!1):(b.titleShow=!1,b.width="auto",b.height="auto",o.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),B())},M=function(){var e,t,i,r,a,l,u=v[y];if(L(),b=n.extend({},n.fn.fancybox.defaults,void 0===n(u).data("fancybox")?b:n(u).data("fancybox")),!1===(l=b.onStart(v,y,b)))O=!1;else if("object"==typeof l&&(b=n.extend(b,l)),i=b.title||(u.nodeName?n(u).attr("title"):u.title)||"",u.nodeName&&!b.orig&&(b.orig=n(u).children("img:first").length?n(u).children("img:first"):n(u)),""===i&&b.orig&&b.titleFromAlt&&(i=b.orig.attr("alt")),e=b.href||(u.nodeName?n(u).attr("href"):u.href)||null,(/^(?:javascript)/i.test(e)||"#"==e)&&(e=null),b.type?(t=b.type,e||(e=b.content)):b.content?t="html":e&&(t=e.match(I)?"image":e.match(x)?"swf":n(u).hasClass("iframe")?"iframe":0===e.indexOf("#")?"inline":"ajax"),t)switch("inline"==t&&(u=e.substr(e.indexOf("#")),t=n(u).length>0?"inline":"ajax"),b.type=t,b.href=e,b.title=i,b.autoDimensions&&("html"==b.type||"inline"==b.type||"ajax"==b.type?(b.width="auto",b.height="auto"):b.autoDimensions=!1),b.modal&&(b.overlayShow=!0,b.hideOnOverlayClick=!1,b.hideOnContentClick=!1,b.enableEscapeButton=!1,b.showCloseButton=!1),b.padding=parseInt(b.padding,10),b.margin=parseInt(b.margin,10),o.css("padding",b.padding+b.margin),n(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",(function(){n(this).replaceWith(c.children())})),t){case"html":o.html(b.content),B();break;case"inline":if(!0===n(u).parent().is("#fancybox-content")){O=!1;break}n('<div class="fancybox-inline-tmp" />').hide().insertBefore(n(u)).bind("fancybox-cleanup",(function(){n(this).replaceWith(c.children())})).bind("fancybox-cancel",(function(){n(this).replaceWith(o.children())})),n(u).appendTo(o),B();break;case"image":O=!1,n.fancybox.showActivity(),(E=new Image).onerror=function(){A()},E.onload=function(){O=!0,E.onerror=E.onload=null,b.width=E.width,b.height=E.height,n("<img />").attr({id:"fancybox-img",src:E.src,alt:b.title}).appendTo(o),N()},E.src=e;break;case"swf":b.scrolling="no",r='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+b.width+'" height="'+b.height+'"><param name="movie" value="'+e+'"></param>',a="",n.each(b.swf,(function(e,t){r+='<param name="'+e+'" value="'+t+'"></param>',a+=" "+e+'="'+t+'"'})),r+='<embed src="'+e+'" type="application/x-shockwave-flash" width="'+b.width+'" height="'+b.height+'"'+a+"></embed></object>",o.html(r),B();break;case"ajax":O=!1,n.fancybox.showActivity(),b.ajax.win=b.ajax.success,T=n.ajax(n.extend({},b.ajax,{url:e,data:b.ajax.data||{},error:function(e){e.status>0&&A()},success:function(t,i,n){if(200==("object"==typeof n?n:T).status){if("function"==typeof b.ajax.win){if(!1===(l=b.ajax.win(e,t,i,n)))return void s.hide();"string"!=typeof l&&"object"!=typeof l||(t=l)}o.html(t),B()}}}));break;case"iframe":N()}else A()},B=function(){var e=b.width,t=b.height;e=e.toString().indexOf("%")>-1?parseInt((n(window).width()-2*b.margin)*parseFloat(e)/100,10)+"px":"auto"==e?"auto":e+"px",t=t.toString().indexOf("%")>-1?parseInt((n(window).height()-2*b.margin)*parseFloat(t)/100,10)+"px":"auto"==t?"auto":t+"px",o.wrapInner('<div style="width:'+e+";height:"+t+";overflow: "+("auto"==b.scrolling?"auto":"yes"==b.scrolling?"scroll":"hidden")+';position:relative;"></div>'),b.width=o.width(),b.height=o.height(),N()},N=function(){var e,t;if(s.hide(),a.is(":visible")&&!1===C.onCleanup(w,_,C))n.event.trigger("fancybox-cancel"),O=!1;else{if(O=!0,n(c.add(r)).unbind(),n(window).unbind("resize.fb scroll.fb"),n(document).unbind("keydown.fb"),a.is(":visible")&&"outside"!==C.titlePosition&&a.css("height",a.height()),w=v,_=y,(C=b).overlayShow?(r.css({"background-color":C.overlayColor,opacity:C.overlayOpacity,cursor:C.hideOnOverlayClick?"pointer":"auto",height:n(document).height()}),r.is(":visible")||(P&&n("select:not(#fancybox-tmp select)").filter((function(){return"hidden"!==this.style.visibility})).css({visibility:"hidden"}).one("fancybox-cleanup",(function(){this.style.visibility="inherit"})),r.show())):r.hide(),f=H(),D=C.title||"",k=0,d.empty().removeAttr("style").removeClass(),!1!==C.titleShow&&(e=n.isFunction(C.titleFormat)?C.titleFormat(D,w,_,C):!(!D||!D.length)&&("float"==C.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+D+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+C.titlePosition+'">'+D+"</div>"),(D=e)&&""!==D))switch(d.addClass("fancybox-title-"+C.titlePosition).html(D).appendTo("body").show(),C.titlePosition){case"inside":d.css({width:f.width-2*C.padding,marginLeft:C.padding,marginRight:C.padding}),k=d.outerHeight(!0),d.appendTo(l),f.height+=k;break;case"over":d.css({marginLeft:C.padding,width:f.width-2*C.padding,bottom:C.padding}).appendTo(l);break;case"float":d.css("left",-1*parseInt((d.width()-f.width-40)/2,10)).appendTo(a);break;default:d.css({width:f.width-2*C.padding,paddingLeft:C.padding,paddingRight:C.padding}).appendTo(a)}d.hide(),a.is(":visible")?(n(u.add(h).add(p)).hide(),e=a.position(),g={top:e.top,left:e.left,width:a.width(),height:a.height()},t=g.width==f.width&&g.height==f.height,c.fadeTo(C.changeFade,.3,(function(){var e=function(){c.html(o.contents()).fadeTo(C.changeFade,1,F)};n.event.trigger("fancybox-change"),c.empty().removeAttr("filter").css({"border-width":C.padding,width:f.width-2*C.padding,height:b.autoDimensions?"auto":f.height-k-2*C.padding}),t?e():(R.prop=0,n(R).animate({prop:1},{duration:C.changeSpeed,easing:C.easingChange,step:K,complete:e}))}))):(a.removeAttr("style"),c.css("border-width",C.padding),"elastic"==C.transitionIn?(g=j(),c.html(o.contents()),a.show(),C.opacity&&(f.opacity=0),R.prop=0,n(R).animate({prop:1},{duration:C.speedIn,easing:C.easingIn,step:K,complete:F})):("inside"==C.titlePosition&&k>0&&d.show(),c.css({width:f.width-2*C.padding,height:b.autoDimensions?"auto":f.height-k-2*C.padding}).html(o.contents()),a.css(f).fadeIn("none"==C.transitionIn?0:C.speedIn,F)))}},F=function(){var e;n.support.opacity||(c.get(0).style.removeAttribute("filter"),a.get(0).style.removeAttribute("filter")),b.autoDimensions&&c.css("height","auto"),a.css("height","auto"),D&&D.length&&d.show(),C.showCloseButton&&u.show(),(C.enableEscapeButton||C.enableKeyboardNav)&&n(document).bind("keydown.fb",(function(e){27==e.keyCode&&C.enableEscapeButton?(e.preventDefault(),n.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!C.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),n.fancybox[37==e.keyCode?"prev":"next"]())})),C.showNavArrows?((C.cyclic&&w.length>1||0!==_)&&h.show(),(C.cyclic&&w.length>1||_!=w.length-1)&&p.show()):(h.hide(),p.hide()),C.hideOnContentClick&&c.bind("click",n.fancybox.close),C.hideOnOverlayClick&&r.bind("click",n.fancybox.close),n(window).bind("resize.fb",n.fancybox.resize),C.centerOnScroll&&n(window).bind("scroll.fb",n.fancybox.center),"iframe"==C.type&&n('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(n.browser.msie?'allowtransparency="true""':"")+' scrolling="'+b.scrolling+'" src="'+C.href+'"></iframe>').appendTo(c),a.show(),O=!1,n.fancybox.center(),C.onComplete(w,_,C),w.length-1>_&&void 0!==(e=w[_+1].href)&&e.match(I)&&((new Image).src=e),_>0&&void 0!==(e=w[_-1].href)&&e.match(I)&&((new Image).src=e)},K=function(e){var t={width:parseInt(g.width+(f.width-g.width)*e,10),height:parseInt(g.height+(f.height-g.height)*e,10),top:parseInt(g.top+(f.top-g.top)*e,10),left:parseInt(g.left+(f.left-g.left)*e,10)};void 0!==f.opacity&&(t.opacity=e<.5?.5:e),a.css(t),c.css({width:t.width-2*C.padding,height:t.height-k*e-2*C.padding})},V=function(){return[n(window).width()-2*C.margin,n(window).height()-2*C.margin,n(document).scrollLeft()+C.margin,n(document).scrollTop()+C.margin]},H=function(){var e=V(),t={},i=C.autoScale,n=2*C.padding;return t.width=C.width.toString().indexOf("%")>-1?parseInt(e[0]*parseFloat(C.width)/100,10):C.width+n,t.height=C.height.toString().indexOf("%")>-1?parseInt(e[1]*parseFloat(C.height)/100,10):C.height+n,i&&(t.width>e[0]||t.height>e[1])&&("image"==b.type||"swf"==b.type?(i=C.width/C.height,t.width>e[0]&&(t.width=e[0],t.height=parseInt((t.width-n)/i+n,10)),t.height>e[1]&&(t.height=e[1],t.width=parseInt((t.height-n)*i+n,10))):(t.width=Math.min(t.width,e[0]),t.height=Math.min(t.height,e[1]))),t.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-t.height-40)),10),t.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-t.width-40)),10),t},j=function(){var e=!!b.orig&&n(b.orig),t={};return e&&e.length?((t=e.offset()).top+=parseInt(e.css("paddingTop"),10)||0,t.left+=parseInt(e.css("paddingLeft"),10)||0,t.top+=parseInt(e.css("border-top-width"),10)||0,t.left+=parseInt(e.css("border-left-width"),10)||0,t.width=e.width(),t.height=e.height(),t={width:t.width+2*C.padding,height:t.height+2*C.padding,top:t.top-C.padding-20,left:t.left-C.padding-20}):(e=V(),t={width:2*C.padding,height:2*C.padding,top:parseInt(e[3]+.5*e[1],10),left:parseInt(e[2]+.5*e[0],10)}),t},U=function(){s.is(":visible")?(n("div",s).css("top",-40*S+"px"),S=(S+1)%12):clearInterval(m)},n.fn.fancybox=function(e){return n(this).length?(n(this).data("fancybox",n.extend({},e,n.metadata?n(this).metadata():{})).unbind("click.fb").bind("click.fb",(function(e){e.preventDefault(),O||(O=!0,n(this).blur(),v=[],y=0,(e=n(this).attr("rel")||"")&&""!=e&&"nofollow"!==e?(v=n("a[rel="+e+"], area[rel="+e+"]"),y=v.index(this)):v.push(this),M())})),this):this},n.fancybox=function(e,t){var i;if(!O){if(O=!0,i=void 0!==t?t:{},v=[],y=parseInt(i.index,10)||0,n.isArray(e)){for(var o=0,s=e.length;o<s;o++)"object"==typeof e[o]?n(e[o]).data("fancybox",n.extend({},i,e[o])):e[o]=n({}).data("fancybox",n.extend({content:e[o]},i));v=W().merge(v,e)}else"object"==typeof e?n(e).data("fancybox",n.extend({},i,e)):e=n({}).data("fancybox",n.extend({content:e},i)),v.push(e);(y>v.length||y<0)&&(y=0),M()}},n.fancybox.showActivity=function(){clearInterval(m),s.show(),m=setInterval(U,66)},n.fancybox.hideActivity=function(){s.hide()},n.fancybox.next=function(){return n.fancybox.pos(_+1)},n.fancybox.prev=function(){return n.fancybox.pos(_-1)},n.fancybox.pos=function(e){O||(e=parseInt(e),v=w,e>-1&&e<w.length?(y=e,M()):C.cyclic&&w.length>1&&(y=e>=w.length?0:w.length-1,M()))},n.fancybox.cancel=function(){O||(O=!0,n.event.trigger("fancybox-cancel"),L(),b.onCancel(v,y,b),O=!1)},n.fancybox.close=function(){function e(){r.fadeOut("fast"),d.empty().hide(),a.hide(),n.event.trigger("fancybox-cleanup"),c.empty(),C.onClosed(w,_,C),w=b=[],_=y=0,C=b={},O=!1}if(!O&&!a.is(":hidden"))if(O=!0,C&&!1===C.onCleanup(w,_,C))O=!1;else if(L(),n(u.add(h).add(p)).hide(),n(c.add(r)).unbind(),n(window).unbind("resize.fb scroll.fb"),n(document).unbind("keydown.fb"),c.find("iframe").attr("src",P&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==C.titlePosition&&d.empty(),a.stop(),"elastic"==C.transitionOut){g=j();var t=a.position();f={top:t.top,left:t.left,width:a.width(),height:a.height()},C.opacity&&(f.opacity=1),d.empty().hide(),R.prop=1,n(R).animate({prop:0},{duration:C.speedOut,easing:C.easingOut,step:K,complete:e})}else a.fadeOut("none"==C.transitionOut?0:C.speedOut,e)},n.fancybox.resize=function(){r.is(":visible")&&r.css("height",n(document).height()),n.fancybox.center(!0)},n.fancybox.center=function(e){var t,i;O||(i=!0===e?1:0,t=V(),!i&&(a.width()>t[0]||a.height()>t[1])||a.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-c.height()-40)-C.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-c.width()-40)-C.padding))},"number"==typeof e?e:200))},n.fancybox.init=function(){n("#fancybox-wrap").length||(n("body").append(o=n('<div id="fancybox-tmp"></div>'),s=n('<div id="fancybox-loading"><div></div></div>'),r=n('<div id="fancybox-overlay"></div>'),a=n('<div id="fancybox-wrap"></div>')),(l=n('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(a)).append(c=n('<div id="fancybox-content"></div>'),u=n('<a id="fancybox-close"></a>'),d=n('<div id="fancybox-title"></div>'),h=n('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),p=n('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),u.click(n.fancybox.close),s.click(n.fancybox.cancel),h.click((function(e){e.preventDefault(),n.fancybox.prev()})),p.click((function(e){e.preventDefault(),n.fancybox.next()})),n.fn.mousewheel&&a.bind("mousewheel.fb",(function(e,t){O?e.preventDefault():0!=n(e.target).get(0).clientHeight&&n(e.target).get(0).scrollHeight!==n(e.target).get(0).clientHeight||(e.preventDefault(),n.fancybox[t>0?"prev":"next"]())})),n.support.opacity||a.addClass("fancybox-ie"),P&&(s.addClass("fancybox-ie6"),a.addClass("fancybox-ie6"),n('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(l)))},n.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},n(document).ready((function(){n.fancybox.init()}))},"./lib/jquery-ui/jquery-ui-1.9.2.custom.min.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./lib/jquery-1.11.3.min.js"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),e,t,n,r,i;!function(e,t){function i(t,i){var o,s,r,a=t.nodeName.toLowerCase();return"area"===a?(s=(o=t.parentNode).name,!(!t.href||!s||"map"!==o.nodeName.toLowerCase())&&!!(r=e("img[usemap=#"+s+"]")[0])&&n(r)):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a&&t.href||i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var o=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each((function(){var n=this;setTimeout((function(){e(n).focus(),i&&i.call(n)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(n=s.css("position"))||"relative"===n||"fixed"===n)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++o)}))},removeUniqueId:function(){return this.each((function(){s.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e((function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"})),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(i,n){function o(t,i,n,o){return e.each(s,(function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)})),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each((function(){e(this).css(r,o(this,i)+"px")}))},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each((function(){e(this).css(r,o(this,t,!0,i)+"px")}))}})),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var o,s=e.ui[t].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0||(t[n]=1,o=t[n]>0,t[n]=0,o)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,n,o,s,r){return e.ui.isOverAxis(t,n,s)&&e.ui.isOverAxis(i,o,r)}}))}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),e=jquery__WEBPACK_IMPORTED_MODULE_0___default(),n=0,r=Array.prototype.slice,i=e.cleanData,e.cleanData=function(t){for(var n,o=0;null!=(n=t[o]);o++)try{e(n).triggerHandler("remove")}catch(e){}i(t)},e.widget=function(t,i,n){var o,s,r,a,l=t.split(".")[0];t=t.split(".")[1],o=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[l]=e[l]||{},s=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(a=new i).options=e.widget.extend({},a.options),e.each(n,(function(t,o){e.isFunction(o)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=o.apply(this,arguments),this._super=i,this._superApply=s,t}}())})),r.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:t},n,{constructor:r,namespace:l,widgetName:t,widgetBaseClass:o,widgetFullName:o}),s?(e.each(s._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)})),delete s._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var n,o,s=r.call(arguments,1),a=0,l=s.length;a<l;a++)for(n in s[a])o=s[a][n],s[a].hasOwnProperty(n)&&o!==t&&(e.isPlainObject(o)?i[n]=e.isPlainObject(i[n])?e.widget.extend({},i[n],o):e.widget.extend({},o):i[n]=o);return i},e.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=r.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each((function(){var n,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(n=r[s].apply(r,l))!==r&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")})):this.each((function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new n(s,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,s,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(s=a[i]=e.widget.extend({},this.options[i]),r=0;r<o.length-1;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(i=o.pop(),n===t)return s[i]===t?null:s[i];s[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,r){function a(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&(e.effects.effect[a]||!1!==e.uiBackCompat&&e.effects[a])?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue((function(i){e(this)[t](),s&&s.call(n[0]),i()}))}})),!1!==e.uiBackCompat&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]}),function(e,t){var i=!1;e(document).mouseup((function(e){i=!1})),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,o=1===t.which,s=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(o&&!s&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,0)))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(h.test(e[0])?t/100:1),parseInt(e[1],10)*(h.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var o,s=Math.max,r=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,h=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return e("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),i===(n=r.offsetWidth)&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var o,h,m,g,f,y=e(t.of),b=e.position.getWithinInfo(t.within),v=e.position.getScrollInfo(b),_=y[0],C=(t.collision||"flip").split(" "),w={};return 9===_.nodeType?(h=y.width(),m=y.height(),g={top:0,left:0}):e.isWindow(_)?(h=y.width(),m=y.height(),g={top:y.scrollTop(),left:y.scrollLeft()}):_.preventDefault?(t.at="left top",h=m=0,g={top:_.pageY,left:_.pageX}):(h=y.outerWidth(),m=y.outerHeight(),g=y.offset()),f=e.extend({},g),e.each(["my","at"],(function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),w[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]})),1===C.length&&(C[1]=C[0]),"right"===t.at[0]?f.left+=h:"center"===t.at[0]&&(f.left+=h/2),"bottom"===t.at[1]?f.top+=m:"center"===t.at[1]&&(f.top+=m/2),o=i(w.at,h,m),f.left+=o[0],f.top+=o[1],this.each((function(){var l,c,u=e(this),d=u.outerWidth(),p=u.outerHeight(),_=n(this,"marginLeft"),T=n(this,"marginTop"),E=d+_+n(this,"marginRight")+v.width,I=p+T+n(this,"marginBottom")+v.height,x=e.extend({},f),S=i(w.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?x.left-=d:"center"===t.my[0]&&(x.left-=d/2),"bottom"===t.my[1]?x.top-=p:"center"===t.my[1]&&(x.top-=p/2),x.left+=S[0],x.top+=S[1],e.support.offsetFractions||(x.left=a(x.left),x.top=a(x.top)),l={marginLeft:_,marginTop:T},e.each(["left","top"],(function(i,n){e.ui.position[C[i]]&&e.ui.position[C[i]][n](x,{targetWidth:h,targetHeight:m,elemWidth:d,elemHeight:p,collisionPosition:l,collisionWidth:E,collisionHeight:I,offset:[o[0]+S[0],o[1]+S[1]],my:t.my,at:t.at,within:b,elem:u})})),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var i=g.left-x.left,n=i+h-d,o=g.top-x.top,a=o+m-p,l={target:{element:y,left:g.left,top:g.top,width:h,height:m},element:{element:u,left:x.left,top:x.top,width:d,height:p},horizontal:n<0?"left":i>0?"right":"center",vertical:a<0?"top":o>0?"bottom":"middle"};h<d&&r(i+n)<h&&(l.horizontal="center"),m<p&&r(o+a)<m&&(l.vertical="middle"),s(r(i),r(n))>s(r(o),r(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),u.offset(e.extend(x,{using:c}))}))},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&c<=0?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):e.left=c>0&&l<=0?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&c<=0?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):e.top=c>0&&l<=0?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];u<0?((i=e.left+h+p+m+t.collisionWidth-a-s)<0||i<r(u))&&(e.left+=h+p+m):d>0&&((n=e.left-t.collisionPosition.marginLeft+h+p+m-l)>0||r(n)<d)&&(e.left+=h+p+m)},top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];u<0?(n=e.top+h+p+m+t.collisionHeight-a-s,e.top+h+p+m>u&&(n<0||n<r(u))&&(e.top+=h+p+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+h+p+m-l,e.top+h+p+m>d&&(i>0||r(i)<d)&&(e.top+=h+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");for(s in t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[s]=n[s];t.appendChild(a),(i=r||document.documentElement).insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&o<11,t.innerHTML="",i.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var o=n.offset.split(" "),s=n.at.split(" ");return 1===o.length&&(o[1]=o[0]),/^\d/.test(o[0])&&(o[0]="+"+o[0]),/^\d/.test(o[1])&&(o[1]="+"+o[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),i.call(this,e.extend(n,{at:s[0]+o[0]+" "+s[1]+o[1],offset:t}))}}(jquery__WEBPACK_IMPORTED_MODULE_0___default())}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")||(this.handle=this._getHandle(t),!this.handle||(e(!0===i.iframeFix?"iframe":i.iframeFix).each((function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})),0)))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],o=!1;n&&(n=n.parentNode);)n==document&&(o=!0);if(!o&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==s._trigger("stop",t)&&s._clear()}))}else!1!==this._trigger("stop",t)&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each((function(){this==t.target&&(i=!0)})),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;i.offset();var o="hidden"!=e(n).css("overflow");this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(o?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName),s=t.pageX,r=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(s=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(r=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(s=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(r=a[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;r=a&&(c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3])?c-this.offset.click.top<a[1]?c+i.grid[1]:c-i.grid[1]:c;var u=i.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;s=a&&(u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2])?u-this.offset.click.left<a[0]?u+i.grid[0]:u-i.grid[0]:u}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),o=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each((function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))}))},stop:function(t,i){var n=e(this).data("draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))}))},drag:function(t,i){var n=e(this).data("draggable"),o=this;e.each(n.sortables,(function(s){var r=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(n.sortables,(function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(a.instance.element[0],this.instance.element[0])&&(r=!1),r}))),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var n=e("body"),o=e(this).data("draggable").options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(t,i){var n=e(this).data("draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var n=e(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(t,i){var n=e(this).data("draggable"),o=n.options,s=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(o.axis&&"x"==o.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"==o.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"==o.axis||(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"==o.axis||(t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var n=e(this).data("draggable"),o=n.options;n.snapElements=[],e(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each((function(){var t=e(this),i=t.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,i){for(var n=e(this).data("draggable"),o=n.options,s=o.snapTolerance,r=i.offset.left,a=r+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var d=n.snapElements[u].left,h=d+n.snapElements[u].width,p=n.snapElements[u].top,m=p+n.snapElements[u].height;if(d-s<r&&r<h+s&&p-s<l&&l<m+s||d-s<r&&r<h+s&&p-s<c&&c<m+s||d-s<a&&a<h+s&&p-s<l&&l<m+s||d-s<a&&a<h+s&&p-s<c&&c<m+s){if("inner"!=o.snapMode){var g=Math.abs(p-c)<=s,f=Math.abs(m-l)<=s,y=Math.abs(d-a)<=s,b=Math.abs(h-r)<=s;g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),f&&(i.position.top=n._convertPositionTo("relative",{top:m,left:0}).top-n.margins.top),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var v=g||f||y||b;"outer"!=o.snapMode&&(g=Math.abs(p-l)<=s,f=Math.abs(m-c)<=s,y=Math.abs(d-r)<=s,b=Math.abs(h-a)<=s,g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),f&&(i.position.top=n._convertPositionTo("relative",{top:m-n.helperProportions.height,left:0}).top-n.margins.top),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[u].snapping&&(g||f||y||b||v)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=g||f||y||b||v}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var n=e(this).data("draggable").options,o=e.makeArray(e(n.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));if(o.length){var s=parseInt(o[0].style.zIndex)||0;e(o).each((function(e){this.style.zIndex=s+e})),this[0].style.zIndex=s+o.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each((function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return o=!0,!1})),!o&&!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,s=o+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,a=r+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,u=i.offset.top,d=u+i.proportions.height;switch(n){case"fit":return l<=o&&s<=c&&u<=r&&a<=d;case"intersect":return l<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&u<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top;return e.ui.isOver(p,h,u,l,i.proportions.height,i.proportions.width);case"touch":return(r>=u&&r<=d||a>=u&&a<=d||r<u&&a>d)&&(o>=l&&o<=c||s>=l&&s<=c||o<l&&s>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var r=0;r<n.length;r++)if(!(n[r].options.disabled||t&&!n[r].accept.call(n[r].element[0],t.currentItem||t.element))){for(var a=0;a<s.length;a++)if(s[a]==n[r].element[0]){n[r].proportions.height=0;continue e}n[r].visible="none"!=n[r].element.css("display"),n[r].visible&&("mousedown"==o&&n[r]._activate.call(n[r],i),n[r].offset=n[r].element.offset(),n[r].proportions={width:n[r].element[0].offsetWidth,height:n[r].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))})),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}))},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),o=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(o){var s;if(this.options.greedy){var r=this.options.scope,a=this.element.parents(":data(droppable)").filter((function(){return e.data(this,"droppable").options.scope===r}));a.length&&((s=e.data(a[0],"droppable")).greedyChild="isover"==o?1:0)}s&&"isover"==o&&(s.isover=0,s.isout=1,s._out.call(s,i)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,i),s&&"isout"==o&&(s.isout=0,s.isover=1,s._over.call(s,i))}}}))},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var o=0;o<n.length;o++){var s=e.trim(n[o]),r=e('<div class="ui-resizable-handle ui-resizable-'+s+'"></div>');r.css({zIndex:i.zIndex}),"se"==s&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(r)}}this._renderAxis=function(t){for(var i in t=t||this.element,this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n,o=e(this.handles[i],this.element);n=/sw|ne|nw|se|n|s/.test(i)?o.outerHeight():o.outerWidth();var s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(s,n),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}})),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter((function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())})).mouseleave((function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n=this.options,o=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy();var r=i(this.helper.css("left")),a=i(this.helper.css("top"));n.containment&&(r+=e(n.containment).scrollLeft()||0,a+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:a},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:r,top:a},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,o=e.pageX-i.left||0,s=e.pageY-i.top||0,r=this._change[n];if(!r)return!1;var a=r.apply(this,[e,o,s]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(a=this._updateRatio(a,e)),a=this._respectSize(a,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var o=this._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-r},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:u,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,o,s,r,a=this.options;r={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),o>r.minHeight&&(r.minHeight=o),i<r.maxWidth&&(r.maxWidth=i),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(e){this.options,this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){this.options;var i=this.position,o=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==s&&(e.left=i.left+(o.width-e.width),e.top=null),"nw"==s&&(e.top=i.top+(o.height-e.height),e.left=i.left+(o.width-e.width)),e},_respectSize:function(e,t){this.helper;var i=this._vBoundaries,o=(this._aspectRatio||t.shiftKey,this.axis),s=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,r=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,a=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;a&&(e.width=i.minWidth),l&&(e.height=i.minHeight),s&&(e.width=i.maxWidth),r&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(o),h=/nw|ne|n/.test(o);a&&d&&(e.left=c-i.minWidth),s&&d&&(e.left=c-i.maxWidth),l&&h&&(e.top=u-i.minHeight),r&&h&&(e.top=u-i.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var o=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(o,(function(e,t){return(parseInt(e,10)||0)+(parseInt(s[t],10)||0)}))}n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.ui.ie6?1:0,o=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){this.options;var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,i){this.options;var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,i){var n=e(this).data("resizable").options,o=function(t){e(t).each((function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})}))};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?o(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],o(n.alsoResize)):e.each(n.alsoResize,(function(e){o(e)}))},resize:function(t,i){var n=e(this).data("resizable"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each((function(){var t=e(this),o=e(this).data("resizable-alsoresize"),s={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,(function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(s[t]=i||null)})),t.css(s)}))};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,(function(e,t){l(e,t)}))},stop:function(t,i){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,i){var n=e(this).data("resizable"),o=n.options,s=n._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),a=r&&e.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,l=r?0:n.sizeDiff.width,c={width:n.size.width-l,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(c,d&&u?{top:d,left:u}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,n){var o=e(this).data("resizable"),s=o.options,r=o.element,a=s.containment,l=a instanceof e?a.get(0):/parent/.test(a)?r.parent().get(0):a;if(l)if(o.containerElement=e(l),/document/.test(a)||a==document)o.containerOffset={left:0,top:0},o.containerPosition={left:0,top:0},o.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var c=e(l),u=[];e(["Top","Right","Left","Bottom"]).each((function(e,t){u[e]=i(c.css("padding"+t))})),o.containerOffset=c.offset(),o.containerPosition=c.position(),o.containerSize={height:c.innerHeight()-u[3],width:c.innerWidth()-u[1]};var d=o.containerOffset,h=o.containerSize.height,p=o.containerSize.width,m=e.ui.hasScroll(l,"left")?l.scrollWidth:p,g=e.ui.hasScroll(l)?l.scrollHeight:h;o.parentData={element:l,left:d.left,top:d.top,width:m,height:g}}},resize:function(t,i){var n=e(this).data("resizable"),o=n.options,s=(n.containerSize,n.containerOffset),r=(n.size,n.position),a=n._aspectRatio||t.shiftKey,l={top:0,left:0},c=n.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=s),r.left<(n._helper?s.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-s.left:n.position.left-l.left),a&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=o.helper?s.left:0),r.top<(n._helper?s.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-s.top:n.position.top),a&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?s.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var u=Math.abs((n._helper,n.offset.left-l.left+n.sizeDiff.width)),d=Math.abs((n._helper?n.offset.top-l.top:n.offset.top-s.top)+n.sizeDiff.height),h=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));h&&p&&(u-=n.parentData.left),u+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-u,a&&(n.size.height=n.size.width/n.aspectRatio)),d+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-d,a&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(t,i){var n=e(this).data("resizable"),o=n.options,s=(n.position,n.containerOffset),r=n.containerPosition,a=n.containerElement,l=e(n.helper),c=l.offset(),u=l.outerWidth()-n.sizeDiff.width,d=l.outerHeight()-n.sizeDiff.height;n._helper&&!o.animate&&/relative/.test(a.css("position"))&&e(this).css({left:c.left-r.left-s.left,width:u,height:d}),n._helper&&!o.animate&&/static/.test(a.css("position"))&&e(this).css({left:c.left-r.left-s.left,width:u,height:d})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,i){var n=e(this).data("resizable"),o=n.options,s=n.size;n.ghost=n.originalElement.clone(),n.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),n.ghost.appendTo(n.helper)},resize:function(t,i){var n=e(this).data("resizable");n.options,n.ghost&&n.ghost.css({position:"relative",height:n.size.height,width:n.size.width})},stop:function(t,i){var n=e(this).data("resizable");n.options,n.ghost&&n.helper&&n.helper.get(0).removeChild(n.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,i){var n=e(this).data("resizable"),o=n.options,s=n.size,r=n.originalSize,a=n.originalPosition,l=n.axis;o._aspectRatio||t.shiftKey,o.grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid;var c=Math.round((s.width-r.width)/(o.grid[0]||1))*(o.grid[0]||1),u=Math.round((s.height-r.height)/(o.grid[1]||1))*(o.grid[1]||1);/^(se|s|e)$/.test(l)?(n.size.width=r.width+c,n.size.height=r.height+u):/^(ne)$/.test(l)?(n.size.width=r.width+c,n.size.height=r.height+u,n.position.top=a.top-u):/^(sw)$/.test(l)?(n.size.width=r.width+c,n.size.height=r.height+u,n.position.left=a.left-c):(n.size.width=r.width+c,n.size.height=r.height+u,n.position.top=a.top-u,n.position.left=a.left-c)}});var i=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).addClass("ui-selectee"),t.each((function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})}))},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))})),e(t.target).parents().andSelf().each((function(){var n=e.data(this,"selectable-item");if(n){var o=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(o?"ui-unselecting":"ui-selected").addClass(o?"ui-selecting":"ui-unselecting"),n.unselecting=!o,n.selecting=o,n.selected=o,o?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}}))}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,o=this.opos[0],s=this.opos[1],r=t.pageX,a=t.pageY;if(o>r){var l=r;r=o,o=l}return s>a&&(l=a,a=s,s=l),this.helper.css({left:o,top:s,width:r-o,height:a-s}),this.selectees.each((function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>r||l.right<o||l.top>a||l.bottom<s):"fit"==n.tolerance&&(c=l.left>o&&l.right<r&&l.top>s&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element})))}})),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})})),e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})})),this._trigger("stop",t),this.helper.remove(),!1}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var o=null;if(e(t.target).parents().each((function(){if(e.data(this,n.widgetName+"-item")==n)return o=e(this),!1})),e.data(t.target,n.widgetName+"-item")==n&&(o=e(t.target)),!o)return!1;if(this.options.handle&&!i){var s=!1;if(e(this.options.handle,o).find("*").andSelf().each((function(){this==t.target&&(s=!0)})),!s)return!1}return this.currentItem=o,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),!1!==n&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var o=this.items.length-1;o>=0;o--){var s=this.items[o],r=s.item[0],a=this._intersectsWithPointer(s);if(a&&s.instance===this.currentContainer&&!(r==this.currentItem[0]||this.placeholder[1==a?"next":"prev"]()[0]==r||e.contains(this.placeholder[0],r)||"semi-dynamic"==this.options.type&&e.contains(this.element[0],r))){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))})),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")})),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=n+c>a&&n+c<l&&t+u>s&&t+u<r;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!o&&(this.floating?r&&"right"==r||"down"==s?2:1:s&&("down"==s?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&n||"left"==s&&!n:o&&("down"==o&&i||"up"==o&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],o=this._connectWith();if(o&&t)for(var s=o.length-1;s>=0;s--)for(var r=e(o[s]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}for(n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=n.length-1;s>=0;s--)n[s][0].each((function(){i.push(this)}));return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;i<t.length;i++)if(t[i]==e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],o=this._connectWith();if(o&&this.ready)for(var s=o.length-1;s>=0;s--)for(var r=e(o[s]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(s=n.length-1;s>=0;s--)for(var c=n[s][1],u=n[s][0],d=(a=0,u.length);a<d;a++){var h=e(u[a]);h.data(this.widgetName+"-item",c),i.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=o.outerWidth(),n.height=o.outerHeight());var s=o.offset();n.left=s.left,n.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i=(t=t||this).options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(i&&e.contains(this.containers[o].element[0],i.element[0]))continue;i=this.containers[o],n=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",t,this._uiHash(this)),this.containers[o].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var s=1e4,r=null,a=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(e.contains(this.containers[n].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var d=this.items[u].item.offset()[a],h=!1;Math.abs(d-c)>Math.abs(d+this.items[u][l]-c)&&(h=!0,d+=this.items[u][l]),Math.abs(d-c)<s&&(s=Math.abs(d-c),r=this.items[u],this.direction=h?"up":"down")}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),o="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,r=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=this.containment&&(a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3])?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a;var l=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0];s=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay((function(){o==this.counter&&this.refreshPositions(!n)}))},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)"auto"!=this._storedCSS[o]&&"static"!=this._storedCSS[o]||(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!i&&n.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&n.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(i||(n.push((function(e){this._trigger("remove",e,this._uiHash())})),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),o=this.containers.length-1;o>=0;o--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),o=0;o<n.length;o++)n[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(o=0;o<n.length;o++)n[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i=0,n={},o={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",o.height=o.paddingTop=o.paddingBottom=o.borderTopWidth=o.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i),n=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!n.collapsible&&(!1===n.active||null==n.active)&&(n.active=0),n.active<0&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each((function(i){var n=e(this),o=n.attr("id"),s=n.next(),r=s.attr("id");o||(o=t+"-header-"+i,n.attr("id",o)),r||(r=t+"-panel-"+i,s.attr("id",r)),n.attr("aria-controls",r),s.attr("aria-labelledby",o)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"===e&&!t&&!1===this.options.active&&this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)):this._activate(t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,i,n=this.options.heightStyle,o=this.element.parent();"fill"===n?(e.support.minHeight||(i=o.css("overflow"),o.css("overflow","hidden")),t=o.height(),this.element.siblings(":visible").each((function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))})),i&&o.css("overflow",i),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each((function(){t=Math.max(t,e(this).css("height","").height())})).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={};t&&(e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),s=o[0]===n[0],r=s&&i.collapsible,a=r?e():o.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?e():o,newPanel:a};t.preventDefault(),s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!r&&this.headers.index(o),this.active=s?e():o,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var s,r,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},h=u&&d.down||d,p=function(){l._toggleComplete(i)};return"number"==typeof h&&(a=h),"string"==typeof h&&(r=h),r=r||h.easing||d.easing,a=a||h.duration||d.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(n,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(o,{duration:a,easing:r,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-c),c=0)}})):t.animate(n,a,r,p):e.animate(o,a,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),!1!==e.uiBackCompat&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var t=this,n=this.element.find(this.options.header),o=n.next(),s=n.add(o).find("a").filter(this.options.navigationFilter)[0];s&&n.add(o).each((function(i){if(e.contains(this,s))return t.options.active=Math.floor(i/2),!1}))}i.call(this)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,n=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(e){"autoHeight"!==e&&"clearStyle"!==e&&"fillSpace"!==e||(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&-1===(e=this.headers.index(this.headers.filter(e)))&&(e=!1),i.call(this,e)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype.resize=jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(e,t,n){var o=i.apply(this,arguments);return!!o&&("beforeActivate"===e?o=i.call(this,"changestart",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===e&&(o=i.call(this,"change",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),o)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animated?"slide"===e.animated?e.animate=300:"bounceslide"===e.animated?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),i.call(this)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default(),jquery__WEBPACK_IMPORTED_MODULE_0___default().ui.accordion.prototype))}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(n){n.target!==t.element[0]&&n.target!==i&&!e.contains(i,n.target)&&t.close()}))}))},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=i}))),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i,n,o,s,r="ui-button ui-widget ui-state-default ui-corner-all",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},c=function(t){var i=t.name,n=t.form,o=e([]);return i&&(o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter((function(){return!this.form}))),o};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){a.disabled||this===i&&e(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){a.disabled||e(this).removeClass(d)})).bind("click"+this.eventNamespace,(function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(h)})),u&&(this.element.bind("change"+this.eventNamespace,(function(){s||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){a.disabled||(s=!1,n=e.pageX,o=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){a.disabled||n===e.pageX&&o===e.pageY||(s=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(a.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(a.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];c(i).not(i).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(a.disabled)return!1;e(this).addClass("ui-state-active"),i=this,t.document.one("mouseup",(function(){i=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(a.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(a.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" ui-state-hover ui-state-active  "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",(function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")})).delegate(t,"mouseover",(function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}))}function extendRemove(e,t){for(var i in $.extend(e,t),t)null!=t[i]&&t[i]!=undefined||(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",(function(e,i,n){t.settings[i]=n})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var o=this._get(t,"showOn");if(("focus"==o||"both"==o)&&e.focus(this._showDatepicker),"button"==o||"both"==o){var s=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?s:$("<img/>").attr({src:r,alt:s,title:s}))),e[n?"before":"after"](t.trigger),t.trigger.click((function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1}))}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",(function(e,i,n){t.settings[i]=n})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,o){var s=this._dialogInst;if(!s){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(s=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var o=t.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,(function(t){return t==e?null:t}))}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var o=t.children("."+this._inlineClass);o.children().addClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,(function(t){return t==e?null:t})),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var o=t||{};if("string"==typeof t&&((o={})[t]=i),n){this._curInst==n&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,o),null!==r&&o.dateFormat!==undefined&&o.minDate===undefined&&(n.settings.minDate=this._formatDate(n,r)),null!==a&&o.dateFormat!==undefined&&o.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,s),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var o=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);o[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,o[0]);var s=$.datepicker._get(t,"onSelect");if(s){var r=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[r,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t))&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){if("input"!=(e=e.target||e).nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(!1!==n){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var o=!1;$(e).parents().each((function(){return!(o|="fixed"==$(this).css("position"))}));var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,o),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var r=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[r]||$.effects[r])?t.dpDiv.show(r,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[r||"show"](r?a:null,l),(!r||!a)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");!i.length||i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),o=n[1];if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var s=e.yearshtml;setTimeout((function(){s===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),s=e.yearshtml=null}),0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-s:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&a>n?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+o>l&&l>o?Math.abs(o+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),o=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,o):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,t+("M"==i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),o=this._getInst(n[0]);o["selected"+("M"==i?"Month":"Year")]=o["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,t,i,n){var o=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(o[0])){var s=this._getInst(o[0]);s.selectedDay=s.currentDay=$("a",n).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var o=this._get(n,"onSelect");o?o.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e));$(t).each((function(){$(this).val(o)}))}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(""==(t="object"==typeof t?t.toString():t+""))return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,h=!1,p=function(t){var i=b+1<e.length&&e.charAt(b+1)==t;return i&&b++,i},m=function(e){var i=p(e),n=new RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2)+"}"),o=t.substring(y).match(n);if(!o)throw"Missing number at position "+y;return y+=o[0].length,parseInt(o[0],10)},g=function(e,i,n){var o=$.map(p(e)?n:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)})),s=-1;if($.each(o,(function(e,i){var n=i[1];if(t.substr(y,n.length).toLowerCase()==n.toLowerCase())return s=i[0],y+=n.length,!1})),-1!=s)return s+1;throw"Unknown name at position "+y},f=function(){if(t.charAt(y)!=e.charAt(b))throw"Unexpected literal at position "+y;y++},y=0,b=0;b<e.length;b++)if(h)"'"!=e.charAt(b)||p("'")?f():h=!1;else switch(e.charAt(b)){case"d":u=m("d");break;case"D":g("D",o,s);break;case"o":d=m("o");break;case"m":c=m("m");break;case"M":c=g("M",r,a);break;case"y":l=m("y");break;case"@":l=(v=new Date(m("@"))).getFullYear(),c=v.getMonth()+1,u=v.getDate();break;case"!":var v;l=(v=new Date((m("!")-this._ticksTo1970)/1e4)).getFullYear(),c=v.getMonth()+1,u=v.getDate();break;case"'":p("'")?f():h=!0;break;default:f()}if(y<t.length){var _=t.substr(y);if(!/^\s+/.test(_))throw"Extra/unparsed characters found in date: "+_}if(-1==l?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=n?0:-100)),d>-1)for(c=1,u=d;;){var C=this._getDaysInMonth(l,c-1);if(u<=C)break;c++,u-=C}if((v=this._daylightSavingAdjust(new Date(l,c-1,u))).getFullYear()!=l||v.getMonth()+1!=c||v.getDate()!=u)throw"Invalid date";return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,a=function(t){var i=h+1<e.length&&e.charAt(h+1)==t;return i&&h++,i},l=function(e,t,i){var n=""+t;if(a(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return a(e)?n[t]:i[t]},u="",d=!1;if(t)for(var h=0;h<e.length;h++)if(d)"'"!=e.charAt(h)||a("'")?u+=e.charAt(h):d=!1;else switch(e.charAt(h)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),s,r);break;case"y":u+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":d=!0;break;default:u+=e.charAt(h)}return u},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=o+1<e.length&&e.charAt(o+1)==t;return i&&o++,i},o=0;o<e.length;o++)if(i)"'"!=e.charAt(o)||n("'")?t+=e.charAt(o):i=!1;else switch(e.charAt(o)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(o)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,o=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{i=this.parseDate(o,s,r)||n}catch(e){this.log(e),s=t?"":s}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=s?i.getDate():0,e.currentMonth=s?i.getMonth():0,e.currentYear=s?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=null==t||""===t?i:"string"==typeof t?function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(e){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,n=i.getFullYear(),o=i.getMonth(),s=i.getDate(),r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=r.exec(t);a;){switch(a[2]||"d"){case"d":case"D":s+=parseInt(a[1],10);break;case"w":case"W":s+=7*parseInt(a[1],10);break;case"m":case"M":o+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(n,o))}a=r.exec(t)}return new Date(n,o,s)}(t):"number"==typeof t?isNaN(t)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(t):new Date(t.getTime());return(n=n&&"Invalid Date"==n.toString()?i:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),(o!=e.selectedMonth||s!=e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),o=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=r[0]||1!=r[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-a,m=e.drawYear;if(p<0&&(p+=12,m--),h){var g=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-r[0]*r[1]+1,h.getDate()));for(g=d&&g<d?d:g;this._daylightSavingAdjust(new Date(m,p,1))>g;)--p<0&&(p=11,m--)}e.drawMonth=p,e.drawYear=m;var f=this._get(e,"prevText");f=s?this.formatDate(f,this._daylightSavingAdjust(new Date(m,p-l,1)),this._getFormatConfig(e)):f;var y=this._canAdjustMonth(e,-1,m,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+f+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+f+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+f+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+f+"</span></a>",b=this._get(e,"nextText");b=s?this.formatDate(b,this._daylightSavingAdjust(new Date(m,p+l,1)),this._getFormatConfig(e)):b;var v=this._canAdjustMonth(e,1,m,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",_=this._get(e,"currentText"),C=this._get(e,"gotoCurrent")&&e.currentDay?u:t;_=s?this.formatDate(_,C,this._getFormatConfig(e)):_;var w=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",T=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?w:"")+(this._isInRange(e,C)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+_+"</button>":"")+(i?"":w)+"</div>":"",E=parseInt(this._get(e,"firstDay"),10);E=isNaN(E)?0:E;for(var I=this._get(e,"showWeek"),x=this._get(e,"dayNames"),S=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),k=this._get(e,"monthNames"),D=this._get(e,"monthNamesShort"),O=this._get(e,"beforeShowDay"),R=this._get(e,"showOtherMonths"),P=this._get(e,"selectOtherMonths"),L=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),A="",M=0;M<r[0];M++){var B="";this.maxRows=4;for(var N=0;N<r[1];N++){var F=this._daylightSavingAdjust(new Date(m,p,e.selectedDay)),K=" ui-corner-all",V="";if(c){if(V+='<div class="ui-datepicker-group',r[1]>1)switch(N){case 0:V+=" ui-datepicker-group-first",K=" ui-corner-"+(i?"right":"left");break;case r[1]-1:V+=" ui-datepicker-group-last",K=" ui-corner-"+(i?"left":"right");break;default:V+=" ui-datepicker-group-middle",K=""}V+='">'}V+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+K+'">'+(/all|left/.test(K)&&0==M?i?v:y:"")+(/all|right/.test(K)&&0==M?i?y:v:"")+this._generateMonthYearHeader(e,p,m,d,h,M>0||N>0,k,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var H=I?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",j=0;j<7;j++){var U=(j+E)%7;H+="<th"+((j+E+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+x[U]+'">'+S[U]+"</span></th>"}V+=H+"</tr></thead><tbody>";var z=this._getDaysInMonth(m,p);m==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,z));var W=(this._getFirstDayOfMonth(m,p)-E+7)%7,G=Math.ceil((W+z)/7),q=c&&this.maxRows>G?this.maxRows:G;this.maxRows=q;for(var Y=this._daylightSavingAdjust(new Date(m,p,1-W)),Z=0;Z<q;Z++){V+="<tr>";var X=I?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Y)+"</td>":"";for(j=0;j<7;j++){var J=O?O.apply(e.input?e.input[0]:null,[Y]):[!0,""],Q=Y.getMonth()!=p,ee=Q&&!P||!J[0]||d&&Y<d||h&&Y>h;X+='<td class="'+((j+E+6)%7>=5?" ui-datepicker-week-end":"")+(Q?" ui-datepicker-other-month":"")+(Y.getTime()==F.getTime()&&p==e.selectedMonth&&e._keyEvent||L.getTime()==Y.getTime()&&L.getTime()==F.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(Q&&!R?"":" "+J[1]+(Y.getTime()==u.getTime()?" "+this._currentClass:"")+(Y.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Q&&!R||!J[2]?"":' title="'+J[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(Q&&!R?"&#xa0;":ee?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==t.getTime()?" ui-state-highlight":"")+(Y.getTime()==u.getTime()?" ui-state-active":"")+(Q?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}V+=X+"</tr>"}++p>11&&(p=0,m++),B+=V+="</tbody></table>"+(c?"</div>"+(r[0]>0&&N==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}A+=B}return A+=T+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,A},_generateMonthYearHeader:function(e,t,i,n,o,s,r,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',h="";if(s||!l)h+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var p=n&&n.getFullYear()==i,m=o&&o.getFullYear()==i;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;g<12;g++)(!p||g>=n.getMonth())&&(!m||g<=o.getMonth())&&(h+='<option value="'+g+'"'+(g==t?' selected="selected"':"")+">"+a[g]+"</option>");h+="</select>"}if(u||(d+=h+(!s&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!c)d+='<span class="ui-datepicker-year">'+i+"</span>";else{var f=this._get(e,"yearRange").split(":"),y=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?y+parseInt(e,10):parseInt(e,10);return isNaN(t)?y:t},v=b(f[0]),_=Math.max(v,b(f[1]||""));for(v=n?Math.max(v,n.getFullYear()):v,_=o?Math.min(_,o.getFullYear()):_,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';v<=_;v++)e.yearshtml+='<option value="'+v+'"'+(v==i?' selected="selected"':"")+">"+v+"</option>";e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}return d+=this._get(e,"yearSuffix"),u&&(d+=(!s&&l&&c?"":"&#xa0;")+h),d+"</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),o=e.drawMonth+("M"==i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&t<i?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(t<0?t:o[0]*o[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each((function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)})):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,n,o,s,r,a=this,l=this.options,c=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown((function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(a.close(t),t.preventDefault())})).mousedown((function(e){a.moveToTop(!1,e)})).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),n=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",(function(){t.focus()})).prependTo(t),o=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click((function(e){e.preventDefault(),a.close(e)})).appendTo(n),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(o),s=e("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),r=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(r),t.attr({role:"dialog","aria-labelledby":s.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(o),this._focusable(o),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(i){if(l.modal&&i.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",t),o=n.filter(":first"),s=n.filter(":last");return i.target!==s[0]||i.shiftKey?i.target===o[0]&&i.shiftKey?(s.focus(1),!1):void 0:(o.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var i,n,o=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,(function(){o._trigger("close",t)})):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(i=0,e(".ui-dialog").each((function(){this!==o.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))})),e.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,o=this.options;return o.modal&&!t||!o.stack&&!o.modal?this._trigger("focus",i):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),(t=this.element.find(":tabbable")).length||(t=this.uiDialogButtonPane.find(":tabbable")).length||(t=n),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,(function(){return!(n=!0)})),n?(e.each(t,(function(t,n){var o,s;n=e.isFunction(n)?{click:n,text:t}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(i.element[0],arguments)},o=e("<button></button>",n).appendTo(i.uiButtonSet),e.fn.button&&o.button()})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",o,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}t=void 0===t?this.options.resizable:t;var n=this,o=this.options,s=this.uiDialog.css("position"),r="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:r,start:function(t,o){e(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",t,i(o))},resize:function(e,t){n._trigger("resize",e,i(t))},stop:function(t,s){e(this).removeClass("ui-dialog-resizing"),o.height=e(this).height(),o.width=e(this).width(),n._trigger("resizeStop",t,i(s)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],o=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(1===(n=t.split?t.split(" "):[t[0],t[1]]).length&&(n[1]=n[0]),e.each(["left","top"],(function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)})),t={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,(i=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,s={},r=!1;e.each(t,(function(e,t){i._setOption(e,t),e in n&&(r=!0),e in o&&(s[e]=t)})),r&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,n){var o,s,r=this.uiDialog;switch(t){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":r.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?r.addClass("ui-dialog-disabled"):r.removeClass("ui-dialog-disabled");break;case"draggable":(o=r.is(":data(draggable)"))&&!n&&r.draggable("destroy"),!o&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":(s=r.is(":data(resizable)"))&&!n&&r.resizable("destroy"),s&&"string"==typeof n&&r.resizable("option","handles",n),!s&&!1!==n&&this._makeResizable(n);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(t,n)},_size:function(){var t,i,n,o=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),t=this.uiDialog.css({height:"auto",width:o.width}).outerHeight(),i=Math.max(0,o.minHeight-t),"auto"===o.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(o.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),(function(e){return e+".dialog-overlay"})).join(" "),create:function(t){0===this.instances.length&&(setTimeout((function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,(function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1}))}),1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",(function(n){var o=e.ui.dialog.overlay.instances;0!==o.length&&o[o.length-1]===i&&t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())})),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,(function(){n=Math.max(n,this.css("z-index"))})),this.maxZ=n},height:function(){var t;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?e(window).height()+"px":t+"px":e(document).height()+"px"},width:function(){var t;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?e(window).width()+"px":t+"px":e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,(function(){t=t.add(this)})),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!i&&n.not(".ui-state-disabled").length&&(i=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),i=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,s,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())})),(n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(s=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())}))),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",n.attr("id"))})),(t=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,s,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),o<0?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n-o<0})),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,n,o;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n+o>0})),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),i=n.values&&n.values.length||1,t=o.length;t<i;t++)s.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=o.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){n.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var i,n,o,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,s)))return}switch(o=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-o)}this._slide(t,s,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,s,r,a,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var i=Math.abs(n-c.values(t));o>i&&(o=i,s=e(this),r=t)})),!0===u.range&&this.values(1)===u.min&&(r+=1,s=e(this.handles[r])),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),a=s.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),s=this._valueMin()+n*o,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&((o=this.values())[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),!1!==s&&this.values(t,i,!0))):i!==this.value()&&!1!==(s=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,o,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<o;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,s,r=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this.options.values&&this.options.values.length?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i})):(n=this.value(),o=this._valueMin(),s=this._valueMax(),i=s!==o?(n-o)/(s-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],(function(e,n){var o=i.attr(n);void 0!==o&&o.length&&(t[n]=o)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t)return!(!this.spinning&&!this._start(e))&&(this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),void e.preventDefault())},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay((function(){this.previous=n})))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,i.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,i)}),e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t((function(e){this._super(e),this._value(this.element.val())})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t((function(e){this._stepUp(e)})),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t((function(e){this._stepDown(e)})),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:t((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){function i(){return++o}function n(e){return e.hash.length>1&&e.href.replace(s,"")===location.href.replace(s,"").replace(/\s/g,"%20")}var o=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options,n=i.active,o=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this._processTabs(),null===n&&(o&&this.tabs.each((function(t,i){if(e(i).attr("aria-controls")===o)return n=t,!1})),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!i.collapsible&&0),i.active=n,!i.collapsible&&!1===i.active&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray((t>n&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){"active"!==e?"disabled"!==e?(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&!1===this.options.active&&this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._setupDisabled(t):this._activate(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each((function(i,o){var s,r,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),u=c.attr("aria-controls");n(o)?(s=o.hash,r=t.element.find(t._sanitizeSelector(s))):(s="#"+(a=t._tabId(c)),(r=t.element.find(s)).length||(r=t._createPanel(a)).insertAfter(t.panels[i-1]||t.tablist),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)})),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n,o=this.element.parent();"fill"===t?(e.support.minHeight||(n=o.css("overflow"),o.css("overflow","hidden")),i=o.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))})),n&&o.css("overflow",n),this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget).closest("li"),s=o[0]===n[0],r=s&&i.collapsible,a=r?e():this._getPanelForTab(o),l=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:l,newTab:r?e():o,newPanel:a};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!r&&this.tabs.index(o),this.active=s?e():o,this.xhr&&this.xhr.abort(),!l.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,n):(r.show(),n())}var s=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,(function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()})):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")})),this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,(function(e){return e!==i?e:null})):e.map(this.tabs,(function(e,t){return t!==i?t:null}))),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var o=this,s=this.tabs.eq(t),r=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};n(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success((function(e){setTimeout((function(){a.html(e),o._trigger("load",i,l)}),1)})).complete((function(e,t){setTimeout((function(){"abort"===t&&o.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr}),1)}))))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,s){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==e.uiBackCompat&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,n){e.data(n.tab[0],"cache.tabs")?i.preventDefault():n.jqXHR.success((function(){t.options.cache&&e.data(n.tab[0],"cache.tabs",!0)}))}})},_ajaxSettings:function(t,i,n){var o=this.options.ajaxOptions;return e.extend({},o,{error:function(e,t){try{o.error(e,t,n.tab.closest("li").index(),n.tab[0])}catch(e){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&!1===t&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),n=i.html();i.html(this.options.spinner),t.jqXHR.complete((function(){i.html(n)}))}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i,n=this.options;(t&&!0===n.disabled||e.isArray(n.disabled)&&-1!==e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i,n=this.options;(t&&!1===n.disabled||e.isArray(n.disabled)&&-1===e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,o){o===t&&(o=this.anchors.length);var s,r,a=this.options,l=e(a.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),c=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),s=o>=this.tabs.length,(r=this.element.find("#"+c)).length||(r=this._createPanel(c),s?o>0?r.insertAfter(this.panels.eq(-1)):r.appendTo(this.element):r.insertBefore(this.panels[o])),r.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?l.appendTo(this.tablist):l.insertBefore(this.tabs[o]),a.disabled=e.map(a.disabled,(function(e){return e>=o?++e:e})),this.refresh(),1===this.tabs.length&&!1===a.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[o],this.panels[o])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.tabs.eq(t).remove(),o=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,(function(e){return e!==t})),(function(e){return e>=t?--e:e})),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],o[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1!==e.selected&&e.selected),this._super(),e.selected=e.active,!1===e.selected&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var i=this.options;this._super("active",-1!==t&&t),i.selected=i.active,!1===i.selected&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,!1===this.options.selected&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,i){var n,o,s=this._superApply(arguments);return!!s&&("beforeActivate"===e?(n=i.newTab.length?i.newTab:i.oldTab,o=i.newPanel.length?i.newPanel:i.oldPanel,s=this._super("select",t,{tab:n.find(".ui-tabs-anchor")[0],panel:o[0],index:n.closest("li").index()})):"activate"===e&&i.newTab.length&&(s=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),s)}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(-1===(e=this._getIndex(e))){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(-1===(e=parseInt(this._cookie(),10))&&(e=!1),t.active=e),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(n.push(!1===i?-1:i),n.push(this.options.cookie)),e.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,i,n){var o=e.extend({},n);return"load"===t&&(o.panel=o.panel[0],o.tab=o.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,o)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,i,n=this.options.fx;return n&&(e.isArray(n)?(t=n[0],i=n[1]):t=i=n),n?{show:i,hide:t}:null},_toggle:function(e,t){function i(){o.running=!1,o._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&a.show?s.animate(a.show,a.show.duration,(function(){i()})):(s.show(),i())}var o=this,s=t.newPanel,r=t.oldPanel,a=this._getFx();if(!a)return this._super(e,t);o.running=!0,r.length&&a.hide?r.animate(a.hide,a.hide.duration,(function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()})):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n())}}))}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),jquery__WEBPACK_IMPORTED_MODULE_0___default().effects||function(e,t){var i=!1!==e.uiBackCompat,n="ui-effects-";e.effects={effect:{}},function(t,i){function n(e,t,i){var n=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function o(e){var i=u(),n=i._rgba=[];return e=e.toLowerCase(),g(c,(function(t,o){var s,r=o.re.exec(e),a=r&&o.parse(r),l=o.space||"rgba";if(a)return s=i[l](a),i[d[l].cache]=s[d[l].cache],n=i._rgba=s._rgba,!1})),n.length?("0,0,0,0"===n.join()&&t.extend(n,r.transparent),i):r[e]}function s(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var r,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},m=t("<p>")[0],g=t.each;m.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=m.style.backgroundColor.indexOf("rgba")>-1,g(d,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),u.fn=t.extend(u.prototype,{parse:function(s,a,l,c){if(s===i)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(a),a=i);var h=this,p=t.type(s),m=this._rgba=[];return a!==i&&(s=[s,a,l,c],p="array"),"string"===p?this.parse(o(s)||r._default):"array"===p?(g(d.rgba.props,(function(e,t){m[t.idx]=n(s[t.idx],t)})),this):"object"===p?(g(d,s instanceof u?function(e,t){s[t.cache]&&(h[t.cache]=s[t.cache].slice())}:function(t,i){var o=i.cache;g(i.props,(function(e,t){if(!h[o]&&i.to){if("alpha"===e||null==s[e])return;h[o]=i.to(h._rgba)}h[o][t.idx]=n(s[e],t,!0)})),h[o]&&e.inArray(null,h[o].slice(0,3))<0&&(h[o][3]=1,i.from&&(h._rgba=i.from(h[o])))}),this):void 0},is:function(e){var t=u(e),i=!0,n=this;return g(d,(function(e,o){var s,r=t[o.cache];return r&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],g(o.props,(function(e,t){if(null!=r[t.idx])return i=r[t.idx]===s[t.idx]}))),i})),i},_space:function(){var e=[],t=this;return g(d,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var i=u(e),o=i._space(),s=d[o],r=0===this.alpha()?u("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return i=i[s.cache],g(s.props,(function(e,o){var s=o.idx,r=a[s],c=i[s],u=h[o.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=n((c-r)*t+r,o)))})),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=u(e)._rgba;return u(t.map(i,(function(e,t){return(1-n)*o[t]+n*e})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,s=e[2]/255,r=e[3],a=Math.max(n,o,s),l=Math.min(n,o,s),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-s)/c+360:o===a?60*(s-n)/c+120:60*(n-o)/c+240,i=0===d||1===d?d:d<=.5?c/u:c/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],r=n<=.5?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,t+1/3)),Math.round(255*s(a,r,t)),Math.round(255*s(a,r,t-1/3)),o]},g(d,(function(e,o){var s=o.props,r=o.cache,a=o.to,c=o.from;u.fn[e]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),e===i)return this[r].slice();var o,l=t.type(e),d="array"===l||"object"===l?e:arguments,h=this[r].slice();return g(s,(function(e,t){var i=d["object"===l?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)})),c?((o=u(c(h)))[r]=h,o):u(h)},g(s,(function(i,n){u.fn[i]||(u.fn[i]=function(o){var s,r=t.type(o),a="alpha"===i?this._hsla?"hsla":"rgba":e,c=this[a](),u=c[n.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=t.type(o)),null==o&&n.empty?this:("string"===r&&(s=l.exec(o))&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1)),c[n.idx]=o,this[a](c)))})}))})),g(a,(function(e,i){t.cssHooks[i]={set:function(e,n){var s,r,a="";if("string"!==t.type(n)||(s=o(n))){if(n=u(s||n),!p.rgba&&1!==n._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(e){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(e){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})),t.cssHooks.borderColor={expand:function(e){var t={};return g(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(){function i(){var t,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[t=n[i]]&&(o[e.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(o[t]=n[t]);return o}function n(t,i){var n,o,r={};for(n in i)o=i[n],t[n]!==o&&!s[n]&&(e.fx.step[n]||!isNaN(parseFloat(o)))&&(r[n]=o);return r}var o=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jquery__WEBPACK_IMPORTED_MODULE_0___default().style(e.elem,i,e.end),e.setAttr=!0)}})),e.effects.animateClass=function(t,s,r,a){var l=e.speed(s,r,a);return this.queue((function(){var s,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").andSelf():r;c=c.map((function(){return{el:e(this),start:i.call(this)}})),s=function(){e.each(o,(function(e,i){t[i]&&r[i+"Class"](t[i])}))},s(),c=c.map((function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this})),r.attr("class",a),c=c.map((function(){var t=this,i=e.Deferred(),n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,c.get()).done((function(){s(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(r[0])}))}))},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,o){return i?e.effects.animateClass.call(this,{add:t},i,n,o):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,o){return i?e.effects.animateClass.call(this,{remove:t},i,n,o):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,o,s,r){return"boolean"==typeof n||n===t?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,s,r):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,o,s)},switchClass:function(t,i,n,o,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,s)}})}(),function(){function o(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function s(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t]&&("string"!=typeof t||e.effects.effect[t]||i&&e.effects[t]))}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var o,s;for(s=0;s<i.length;s++)null!==i[s]&&((o=e.data(n+i[s]))===t&&(o=""),e.css(i[s],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(e){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,(function(e,i){var s=t.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])})),o}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(s)&&s.call(o[0]),e.isFunction(t)&&t()}var o=e(this),s=n.complete,r=n.mode;(o.is(":hidden")?"hide"===r:"show"===r)?i():a.call(o[0],n,i)}var n=o.apply(this,arguments),s=n.mode,r=n.queue,a=e.effects.effect[n.effect],l=!a&&i&&e.effects[n.effect];return e.fx.off||!a&&!l?s?this[s](n.duration,n.complete):this.each((function(){n.complete&&n.complete.call(this)})):a?!1===r?this.each(t):this.queue(r||"fx",t):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=o.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}}))}()}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,o){var s,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,t.mode||"hide"),d=t.direction||"up",h=i.test(d),p=h?"height":"width",m=h?"top":"left",g=n.test(d),f={},y="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),r=(s=e.effects.createWrapper(l).css({overflow:"hidden"}))[p](),a=parseFloat(s.css(m))||0,f[p]=y?r:0,g||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),f[m]=y?a:r+a),y&&(s.css(p,0),g||s.css(m,a+r)),s.animate(f,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.bounce=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,p=t.times||5,m=2*p+(u||c?1:0),g=t.duration/m,f=t.easing,y="up"===d||"down"===d?"top":"left",b="up"===d||"left"===d,v=r.queue(),_=v.length;for((u||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),h||(h=r["top"===y?"outerHeight":"outerWidth"]()/3),u&&((s={opacity:1})[y]=0,r.css("opacity",0).css(y,b?2*-h:2*h).animate(s,g,f)),c&&(h/=Math.pow(2,p-1)),(s={})[y]=0,n=0;n<p;n++)(o={})[y]=(b?"-=":"+=")+h,r.animate(o,g,f).animate(s,g,f),h=c?2*h:h/2;c&&((o={opacity:0})[y]=(b?"-=":"+=")+h,r.animate(o,g,f)),r.queue((function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()})),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,m+1))),r.dequeue()}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.clip=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(r,t.mode||"hide"),c="vertical"===(t.direction||"vertical"),u=c?"height":"width",d=c?"top":"left",h={};e.effects.save(r,a),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),s=(o="IMG"===r[0].tagName?n:r)[u](),l&&(o.css(u,0),o.css(d,s/2)),h[u]=l?s:0,h[d]=l?0:s/2,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.drop=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(o,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,s),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===u*d&&(h.css({visibility:"visible"}),e(y).remove(),p||h.hide(),i())}var o,s,r,a,l,c,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=u,h=e(this),p="show"===e.effects.setMode(h,t.mode||"hide"),m=h.show().css("visibility","hidden").offset(),g=Math.ceil(h.outerWidth()/d),f=Math.ceil(h.outerHeight()/u),y=[];for(o=0;o<u;o++)for(a=m.top+o*f,c=o-(u-1)/2,s=0;s<d;s++)r=m.left+s*g,l=s-(d-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*g,top:-o*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:f,left:r+(p?l*g:0),top:a+(p?c*f:0),opacity:p?0:1}).animate({left:r+(p?0:l*g),top:a+(p?0:c*f),opacity:p?1:0},t.duration||500,t.easing,n)}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.fold=function(t,i){var n,o,s=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,p=l!==h,m=p?["width","height"]:["height","width"],g=t.duration/2,f={},y={};e.effects.save(s,r),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o=p?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),f[m[0]]=l?o[0]:u,y[m[1]]=l?o[1]:0,n.animate(f,g,t.easing).animate(y,g,t.easing,(function(){c&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}))}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&n.hide(),e.effects.restore(n,o),i()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.pulsate=function(t,i){var n,o=e(this),s=e.effects.setMode(o,t.mode||"show"),r="show"===s,a="hide"===s,l=r||"hide"===s,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=o.queue(),p=h.length;for(!r&&o.is(":visible")||(o.css("opacity",0).show(),d=1),n=1;n<c;n++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue((function(){a&&o.hide(),i()})),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),o.dequeue()}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"hide"),s="hide"===o,r=parseInt(t.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:i,percent:s?r:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),s=e.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"hide"===s?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u="horizontal"!==a?r/100:1,d="vertical"!==a?r/100:1;o.effect="size",o.queue=!1,o.complete=i,"effect"!==s&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u,width:c.width*d,outerHeight:c.outerHeight*u,outerWidth:c.outerWidth*d},o.fade&&("show"===s&&(o.from.opacity=0,o.to.opacity=1),"hide"===s&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.size=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=e.effects.setMode(r,t.mode||"effect"),p=t.restore||"effect"!==h,m=t.scale||"both",g=t.origin||["middle","center"],f=r.css("position"),y=p?a:["position","top","bottom","left","right","overflow","opacity"],b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===h?(r.from=t.to||b,r.to=t.from||n):(r.from=t.from||("show"===h?b:n),r.to=t.to||("hide"===h?b:n)),s={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},"box"!==m&&"both"!==m||(s.from.y!==s.to.y&&(y=y.concat(u),r.from=e.effects.setTransition(r,u,s.from.y,r.from),r.to=e.effects.setTransition(r,u,s.to.y,r.to)),s.from.x!==s.to.x&&(y=y.concat(d),r.from=e.effects.setTransition(r,d,s.from.x,r.from),r.to=e.effects.setTransition(r,d,s.to.x,r.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(y=y.concat(c).concat(l),r.from=e.effects.setTransition(r,c,s.from.y,r.from),r.to=e.effects.setTransition(r,c,s.to.y,r.to)),e.effects.save(r,y),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(o=e.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*o.y,r.from.left=(n.outerWidth-r.outerWidth())*o.x,r.to.top=(n.outerHeight-r.to.outerHeight)*o.y,r.to.left=(n.outerWidth-r.to.outerWidth)*o.x),r.css(r.from),"content"!==m&&"both"!==m||(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=a.concat(u).concat(d),r.find("*[width]").each((function(){var i=e(this),n=i.height(),o=i.width(),r=i.outerHeight(),a=i.outerWidth();p&&e.effects.save(i,l),i.from={height:n*s.from.y,width:o*s.from.x,outerHeight:r*s.from.y,outerWidth:a*s.from.x},i.to={height:n*s.to.y,width:o*s.to.x,outerHeight:n*s.to.y,outerWidth:o*s.to.x},s.from.y!==s.to.y&&(i.from=e.effects.setTransition(i,u,s.from.y,i.from),i.to=e.effects.setTransition(i,u,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=e.effects.setTransition(i,d,s.from.x,i.from),i.to=e.effects.setTransition(i,d,s.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,(function(){p&&e.effects.restore(i,l)}))}))),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===h&&r.hide(),e.effects.restore(r,y),p||("static"===f?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],(function(e,t){r.css(t,(function(t,i){var n=parseInt(i,10),o=e?r.to.left:r.to.top;return"auto"===i?o+"px":n+o+"px"}))}))),e.effects.removeWrapper(r),i()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.shake=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,m={},g={},f={},y=o.queue(),b=y.length;for(e.effects.save(o,s),o.show(),e.effects.createWrapper(o),m[h]=(p?"-=":"+=")+l,g[h]=(p?"+=":"-=")+2*l,f[h]=(p?"-=":"+=")+2*l,o.animate(m,d,t.easing),n=1;n<c;n++)o.animate(g,d,t.easing).animate(f,d,t.easing);o.animate(g,d,t.easing).animate(m,d/2,t.easing).queue((function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()})),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,u+1))),o.dequeue()}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.slide=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(o,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,s),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jquery__WEBPACK_IMPORTED_MODULE_0___default()),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),s="fixed"===o.css("position"),r=e("body"),a=s?r.scrollTop():0,l=s?r.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(u,t.duration,t.easing,(function(){h.remove(),i()}))}}(jquery__WEBPACK_IMPORTED_MODULE_0___default())},"./lib/jquery.json.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./lib/jquery-1.11.3.min.js"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);jquery__WEBPACK_IMPORTED_MODULE_0___default().JSON={useHasOwn:!!{}.hasOwnProperty,pad:function(e){return e<10?"0"+e:e},m:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString:function(e){if(/["\\\x00-\x1f]/.test(e)){var t=this.m;return'"'+e.replace(/([\x00-\x1f\\"])/g,(function(e,i){var n=t[i];return n||(n=i.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))}))+'"'}return'"'+e+'"'},encodeArray:function(e){var t,i,n,o=["["],s=e.length;for(i=0;i<s;i+=1)switch(typeof(n=e[i])){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(null===n?"null":this.encode(n)),t=!0}return o.push("]"),o.join("")},encodeDate:function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},encode:function(e){if(null==e)return"null";if(e instanceof Array)return this.encodeArray(e);if(e instanceof Date)return this.encodeDate(e);if("string"==typeof e)return this.encodeString(e);if("number"==typeof e)return isFinite(e)?String(e):"null";if("boolean"==typeof e)return String(e);var t,i,n,o=["{"];for(i in e)if(!this.useHasOwn||e.hasOwnProperty(i))switch(typeof(n=e[i])){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(this.encode(i),":",null===n?"null":this.encode(n)),t=!0}return o.push("}"),o.join("")},decode:function(json){return eval("("+json+")")}}},"./lib/jstree/jquery.jstree.js":function(e,t,i){"use strict";i.r(t);var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);!function(){if(!o()||!o().jstree){var e,t,i,n,s=!1,r=!1,a=!1;!function(e){e.vakata={},e.vakata.css={get_css:function(e,t,i){e=e.toLowerCase();var n=i.cssRules||i.rules,o=0;do{if(n.length&&o>n.length+5)return!1;if(n[o].selectorText&&n[o].selectorText.toLowerCase()==e)return!0===t?(i.removeRule&&i.removeRule(o),i.deleteRule&&i.deleteRule(o),!0):n[o]}while(n[++o]);return!1},add_css:function(t,i){return!e.jstree.css.get_css(t,!1,i)&&(i.insertRule?i.insertRule(t+" { }",0):i.addRule(t,null,0),e.vakata.css.get_css(t))},remove_css:function(t,i){return e.vakata.css.get_css(t,!0,i)},add_sheet:function(t){var i=!1,n=!0;if(t.str)return t.title&&(i=e("style[id='"+t.title+"-stylesheet']")[0]),i?n=!1:((i=document.createElement("style")).setAttribute("type","text/css"),t.title&&i.setAttribute("id",t.title+"-stylesheet")),i.styleSheet?n?(document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet.cssText=t.str):i.styleSheet.cssText=i.styleSheet.cssText+" "+t.str:(i.appendChild(document.createTextNode(t.str)),document.getElementsByTagName("head")[0].appendChild(i)),i.sheet||i.styleSheet;if(t.url){if(!document.createStyleSheet)return(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.media="all",i.href=t.url,document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet;try{i=document.createStyleSheet(t.url)}catch(e){}}}};var t=[],i=-1,n={},o={};e.fn.jstree=function(i){var o="string"==typeof i,s=Array.prototype.slice.call(arguments,1),r=this;if(o){if("_"==i.substring(0,1))return r;this.each((function(){var n=t[e.data(this,"jstree_instance_id")],o=n&&e.isFunction(n[i])?n[i].apply(n,s):n;if(void 0!==o&&(0===i.indexOf("is_")||!0!==o&&!1!==o))return r=o,!1}))}else this.each((function(){var o=e.data(this,"jstree_instance_id"),r=[],a=i?e.extend({},!0,i):{},l=e(this),c=!1,u=[];r=r.concat(s),l.data("jstree")&&r.push(l.data("jstree")),a=r.length?e.extend.apply(null,[!0,a].concat(r)):a,void 0!==o&&t[o]&&t[o].destroy(),o=parseInt(t.push({}),10)-1,e.data(this,"jstree_instance_id",o),a.plugins=e.isArray(a.plugins)?a.plugins:e.jstree.defaults.plugins.slice(),a.plugins.unshift("core"),a.plugins=a.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),(c=e.extend(!0,{},e.jstree.defaults,a)).plugins=a.plugins,e.each(n,(function(t,i){-1===e.inArray(t,c.plugins)?(c[t]=null,delete c[t]):u.push(t)})),c.plugins=u,t[o]=new e.jstree._instance(o,e(this).addClass("jstree jstree-"+o),c),e.each(t[o]._get_settings().plugins,(function(e,i){t[o].data[i]={}})),e.each(t[o]._get_settings().plugins,(function(e,i){n[i]&&n[i].__init.apply(t[o])})),setTimeout((function(){t[o]&&t[o].init()}),0)}));return r},e.jstree={defaults:{plugins:[]},_focused:function(){return t[i]||null},_reference:function(i){if(t[i])return t[i];var n=e(i);return n.length||"string"!=typeof i||(n=e("#"+i)),n.length&&t[n.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(t,i,n){this.data={core:{}},this.get_settings=function(){return e.extend(!0,{},n)},this._get_settings=function(){return n},this.get_index=function(){return t},this.get_container=function(){return i},this.get_container_ul=function(){return i.children("ul:eq(0)")},this._set_settings=function(t){n=e.extend(!0,{},n,t)}},_fn:{},plugin:function(t,i){i=e.extend({},{__init:e.noop,__destroy:e.noop,_fn:{},defaults:!1},i),n[t]=i,e.jstree.defaults[t]=i.defaults,e.each(i._fn,(function(i,n){n.plugin=t,n.old=e.jstree._fn[i],e.jstree._fn[i]=function(){var t,o=n,s=Array.prototype.slice.call(arguments),r=new e.Event("before.jstree"),a=!1;if(!0!==this.data.core.locked||"unlock"===i||"is_locked"===i){do{if(o&&o.plugin&&-1!==e.inArray(o.plugin,this._get_settings().plugins))break;o=o.old}while(o);if(o){if(0===i.indexOf("_"))t=o.apply(this,s);else{if(!1===(t=this.get_container().triggerHandler(r,{func:i,inst:this,args:s,plugin:o.plugin})))return;void 0!==t&&(s=t),t=o.apply(e.extend({},this,{__callback:function(e){this.get_container().triggerHandler(i+".jstree",{inst:this,args:s,rslt:e,rlbk:a})},__rollback:function(){return a=this.get_rollback()},__call_old:function(e){return o.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return t}}},e.jstree._fn[i].old=n.old,e.jstree._fn[i].plugin=t}))},rollback:function(i){i&&(e.isArray(i)||(i=[i]),e.each(i,(function(e,i){t[i.i].set_rollback(i.h,i.d)})))}},e.jstree._fn=e.jstree._instance.prototype={},e((function(){var t=navigator.userAgent.toLowerCase(),i=(t.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],n=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:24px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(t)&&6==parseInt(i,10)){s=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}n+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(t)&&7==parseInt(i,10)&&(r=!0,n+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(t)&&/mozilla/.test(t)&&parseFloat(i,10)<1.9&&(a=!0,n+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),e.vakata.css.add_sheet({str:n,title:"jstree"})})),e.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",e.proxy((function(t){var i=e(t.target);this.toggle_node(i)}),this)).bind("mousedown.jstree",e.proxy((function(){this.set_focus()}),this)).bind("dblclick.jstree",(function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}})),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",e.proxy((function(t,i){var n=this._get_node(i.rslt.obj),o=this;-1===n&&(n=this.get_container_ul()),n.length&&n.find("li").each((function(){var t=e(this);t.data("jstree")&&e.each(t.data("jstree"),(function(i,n){o.data[i]&&e.isFunction(o["_"+i+"_notify"])&&o["_"+i+"_notify"].call(o,t,n)}))}))}),this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",e.proxy((function(t,i){var n=this._get_node(i.rslt.obj),o=this;-1===n&&(n=this.get_container_ul()),n.length&&n.find("li.jstree-open:not(:has(ul))").each((function(){o.load_node(this,e.noop,e.noop)}))}),this)),this.__callback(),this.load_node(-1,(function(){this.loaded(),this.reload_nodes()}))},destroy:function(){var o,s=this.get_index(),r=this._get_settings(),a=this;if(e.each(r.plugins,(function(e,t){try{n[t].__destroy.apply(a)}catch(e){}})),this.__callback(),this.is_focused())for(o in t)if(t.hasOwnProperty(o)&&o!=s){t[o].set_focus();break}s===i&&(i=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",(function(){return this.className.replace(/jstree[^ ]*|$/gi,"")})),e(document).unbind(".jstree-"+s).undelegate(".jstree-"+s),t[s]=null,delete t[s]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each((function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(t){var i=this,n=!0,o=[],s=[];t||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=e.map(e.makeArray(this.data.core.to_open),(function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.data.core.to_load=e.map(e.makeArray(this.data.core.to_load),(function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(e.each(this.data.core.to_load,(function(t,i){if("#"==i)return!0;e(i).length?o.push(i):s.push(i)})),o.length&&(this.data.core.to_load=s,e.each(o,(function(e,t){i._is_loaded(t)||(i.load_node(t,(function(){i.reload_nodes(!0)}),(function(){i.reload_nodes(!0)})),n=!1)})))),this.data.core.to_open.length&&e.each(this.data.core.to_open,(function(e,t){i.open_node(t,!1,!0)})),n&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout((function(){i.__callback({},i)}),50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var t=this;this.data.core.to_open.length&&e.each(this.data.core.to_open,(function(e,i){t.open_node(i,!1,!0)})),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),(e=this._get_node(e))||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,(function(){t.__callback({obj:e}),t.reload_nodes()}))},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var t=e.jstree._focused();t&&t.unset_focus(),this.get_container().addClass("jstree-focused"),i=this.get_index(),this.__callback()}},is_focused:function(){return i==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),i=-1),this.__callback()},_get_node:function(t){var i=e(t,this.get_container());return i.is(".jstree")||-1==t?-1:!!(i=i.closest("li",this.get_container())).length&&i},_get_next:function(e,t){return-1===(e=this._get_node(e))?this.get_container().find("> ul > li:first-child"):!!e.length&&(t?e.nextAll("li").size()>0&&e.nextAll("li:eq(0)"):e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0))},_get_prev:function(e,t){if(-1===(e=this._get_node(e)))return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".jstree","li:eq(0)");return!!i.length&&i},_get_parent:function(e){if(-1==(e=this._get_node(e))||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return-1===(e=this._get_node(e))?this.get_container().children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},get_path:function(e,t){var i=[],n=this;return!(-1===(e=this._get_node(e))||!e||!e.length)&&(e.parentsUntil(".jstree","li").each((function(){i.push(t?this.id:n.get_text(this))})),i.reverse(),i.push(t?e.attr("id"):this.get_text(e)),i)},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){if(!(e=this._get_node(e))||-1===e)return!1;e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},open_node:function(e,t,i){if(!(e=this._get_node(e)).length)return!1;if(!e.hasClass("jstree-closed"))return t&&t.call(),!1;var n=i||s?0:this._get_settings().core.animation,o=this;this._is_loaded(e)?(this._get_settings().core.open_parents&&e.parentsUntil(".jstree",".jstree-closed").each((function(){o.open_node(this,!1,!0)})),n&&e.children("ul").css("display","none"),e.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),n?e.children("ul").stop(!0,!0).slideDown(n,(function(){this.style.display="",o.after_open(e)})):o.after_open(e),this.__callback({obj:e}),t&&t.call()):(e.children("a").addClass("jstree-loading"),this.load_node(e,(function(){o.open_node(e,t,i)}),t))},after_open:function(e){this.__callback({obj:e})},close_node:function(e,t){e=this._get_node(e);var i=t||s?0:this._get_settings().core.animation,n=this;if(!e.length||!e.hasClass("jstree-open"))return!1;i&&e.children("ul").attr("style","display:block !important"),e.removeClass("jstree-open").addClass("jstree-closed"),i?e.children("ul").stop(!0,!0).slideUp(i,(function(){this.style.display="",n.after_close(e)})):n.after_close(e),this.__callback({obj:e})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return(e=this._get_node(e)).hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,i){(e=e?this._get_node(e):-1)&&-1!==e||(e=this.get_container_ul()),i?e=e.find("li.jstree-closed"):(i=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").andSelf():e.find("li.jstree-closed"));var n=this;e.each((function(){var e=this;n._is_loaded(this)?n.open_node(this,!1,!t):n.open_node(this,(function(){n.open_all(e,t,i)}),!t)})),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(e,t){var i=this;(e=e?this._get_node(e):this.get_container())&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").andSelf().each((function(){i.close_node(this,!t)})),this.__callback({obj:e})},clean_node:function(t){(t=(t=t&&-1!=t?e(t):this.get_container_ul()).is("li")?t.find("li").andSelf():t.find("li")).removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),t.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:t})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e,t,i){this.__callback({obj:e})},_is_loaded:function(e){return!0},create_node:function(t,i,n,o,s){t=this._get_node(t),i=void 0===i?"last":i;var r,a=e("<li />"),l=this._get_settings().core;if(-1!==t&&!t.length)return!1;if(!s&&!this._is_loaded(t))return this.load_node(t,(function(){this.create_node(t,i,n,o,!0)})),!1;switch(this.__rollback(),"string"==typeof n&&(n={data:n}),n||(n={}),n.attr&&a.attr(n.attr),n.metadata&&a.data(n.metadata),n.state&&a.addClass("jstree-"+n.state),n.data||(n.data=this._get_string("new_node")),e.isArray(n.data)||(r=n.data,n.data=[],n.data.push(r)),e.each(n.data,(function(t,i){r=e("<a />"),e.isFunction(i)&&(i=i.call(this,n)),"string"==typeof i?r.attr("href","#")[l.html_titles?"html":"text"](i):(i.attr||(i.attr={}),i.attr.href||(i.attr.href="#"),r.attr(i.attr)[l.html_titles?"html":"text"](i.title),i.language&&r.addClass(i.language)),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),!i.icon&&n.icon&&(i.icon=n.icon),i.icon&&(-1===i.icon.indexOf("/")?r.children("ins").addClass(i.icon):r.children("ins").css("background","url('"+i.icon+"') center center no-repeat")),a.append(r)})),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===t&&(t=this.get_container(),"before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":t.before(a),r=this._get_parent(t);break;case"after":t.after(a),r=this._get_parent(t);break;case"inside":case"first":t.children("ul").length||t.append("<ul />"),t.children("ul").prepend(a),r=t;break;case"last":t.children("ul").length||t.append("<ul />"),t.children("ul").append(a),r=t;break;default:t.children("ul").length||t.append("<ul />"),i||(i=0),(r=t.children("ul").children("li").eq(i)).length?r.before(a):t.children("ul").append(a),r=t}return-1!==r&&r.get(0)!==this.get_container().get(0)||(r=-1),this.clean_node(r),this.__callback({obj:a,parent:r}),o&&o.call(this,a),a},get_text:function(e){if(!(e=this._get_node(e)).length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?((e=e.clone()).children("INS").remove(),e.html()):(e=e.contents().filter((function(){return 3==this.nodeType}))[0]).nodeValue},set_text:function(e,t){if(!(e=this._get_node(e)).length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var i=e.children("INS").clone();return e.html(t).prepend(i),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter((function(){return 3==this.nodeType}))[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(t){if(!(t=this._get_node(t)).length)return!1;this.__rollback();var i=this._get_parent(t),n=e([]),o=this;return t.each((function(){n=n.add(o._get_prev(this))})),t=t.detach(),-1!==i&&0===i.find("> ul > li").length&&i.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(i),this.__callback({obj:t,prev:n,parent:i}),t},prepare_move:function(t,i,n,s,r){var a={};if(a.ot=e.jstree._reference(t)||this,a.o=a.ot._get_node(t),a.r=-1===i?-1:this._get_node(i),a.p=void 0===n||!1===n?"last":n,!r&&o.o&&o.o[0]===a.o[0]&&o.r[0]===a.r[0]&&o.p===a.p)return this.__callback(o),void(s&&s.call(this,o));if(a.ot=e.jstree._reference(a.o)||this,a.rt=e.jstree._reference(a.r)||this,-1!==a.r&&a.r){if(!/^(before|after)$/.test(a.p)&&!this._is_loaded(a.r))return this.load_node(a.r,(function(){this.prepare_move(t,i,n,s,!0)}));switch(a.p){case"before":a.cp=a.r.index(),a.cr=a.rt._get_parent(a.r);break;case"after":a.cp=a.r.index()+1,a.cr=a.rt._get_parent(a.r);break;case"inside":case"first":a.cp=0,a.cr=a.r;break;case"last":a.cp=a.r.find(" > ul > li").length,a.cr=a.r;break;default:a.cp=a.p,a.cr=a.r}}else switch(a.cr=-1,a.p){case"first":case"before":case"inside":a.cp=0;break;case"after":case"last":a.cp=a.rt.get_container().find(" > ul > li").length;break;default:a.cp=a.p}a.np=-1==a.cr?a.rt.get_container():a.cr,a.op=a.ot._get_parent(a.o),a.cop=a.o.index(),-1===a.op&&(a.op=a.ot?a.ot.get_container():this.get_container()),!/^(before|after)$/.test(a.p)&&a.op&&a.np&&a.op[0]===a.np[0]&&a.o.index()<a.cp&&a.cp++,a.or=a.np.find(" > ul > li:nth-child("+(a.cp+1)+")"),o=a,this.__callback(o),s&&s.call(this,o)},check_move:function(){var e=o,t=!0,i=-1===e.r?this.get_container():e.r;return!(!e||!e.o||e.or[0]===e.o[0])&&(!e.op||!e.np||e.op[0]!==e.np[0]||e.cp-1!==e.o.index())&&(e.o.each((function(){if(-1!==i.parentsUntil(".jstree","li").andSelf().index(this))return t=!1,!1})),t)},move_node:function(t,i,n,s,r,a){if(!r)return this.prepare_move(t,i,n,(function(e){this.move_node(e,!1,!1,s,!0,a)}));if(s&&(o.cy=!0),!a&&!this.check_move())return!1;this.__rollback();var l=!1;s?(l=t.o.clone(!0)).find("*[id]").andSelf().each((function(){this.id&&(this.id="copy_"+this.id)})):l=t.o,t.or.length?t.or.before(l):(t.np.children("ul").length||e("<ul />").appendTo(t.np),t.np.children("ul:eq(0)").append(l));try{t.ot.clean_node(t.op),t.rt.clean_node(t.np),t.op.find("> ul > li").length||t.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}return s&&(o.cy=!0,o.oc=l),this.__callback(o),o},_get_move:function(){return o}}})}(o()),(e=o())((function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),n=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=i.width()-n.width(),i.add(n).remove()):(i=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-i.width(),i.parent().remove())})),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy((function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)}),this)).delegate("a","mouseenter.jstree",e.proxy((function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)}),this)).delegate("a","mouseleave.jstree",e.proxy((function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)}),this)).bind("reopen.jstree",e.proxy((function(){this.reselect()}),this)).bind("get_rollback.jstree",e.proxy((function(){this.dehover_node(),this.save_selected()}),this)).bind("set_rollback.jstree",e.proxy((function(){this.reselect()}),this)).bind("close_node.jstree",e.proxy((function(t,i){var n=this._get_settings().ui,o=this._get_node(i.rslt.obj),s=o&&o.length?o.children("ul").find("a.jstree-clicked"):e(),r=this;!1!==n.selected_parent_close&&s.length&&s.each((function(){r.deselect_node(this),"select_parent"===n.selected_parent_close&&r.select_node(o)}))}),this)).bind("delete_node.jstree",e.proxy((function(e,t){var i=this._get_settings().ui.select_prev_on_delete,n=this._get_node(t.rslt.obj),o=n&&n.length?n.find("a.jstree-clicked"):[],s=this;o.each((function(){s.deselect_node(this)})),i&&o.length&&t.rslt.prev.each((function(){if(this.parentNode)return s.select_node(this),!1}))}),this)).bind("move_node.jstree",e.proxy((function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")}),this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,i){if(null==t)return i?this.data.ui.selected:this.data.ui.last_selected;var n=e(t,this.get_container());return n.is(".jstree")||-1==t?-1:!!(n=n.closest("li",this.get_container())).length&&n},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each((function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),(function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),e.each(i,(function(e,i){i&&"#"!==i&&t.select_node(i)})),this.data.ui.selected=this.data.ui.selected.filter((function(){return this.parentNode})),this.__callback()},refresh:function(e){return this.save_selected(),this.__call_old()},hover_node:function(e){if(!(e=this._get_node(e)).length)return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e})},dehover_node:function(){var e,t=this.data.ui.hovered;if(!t||!t.length)return!1;e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),this.__callback({obj:t})},select_node:function(e,t,i){if(-1==(e=this._get_node(e))||!e||!e.length)return!1;var n=this._get_settings().ui,o="on"==n.select_multiple_modifier||!1!==n.select_multiple_modifier&&i&&i[n.select_multiple_modifier+"Key"],s=!1!==n.select_range_modifier&&i&&i[n.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),a=!0,l=this;if(t){if(n.disable_selecting_children&&o&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(a=!1,!0){case s:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),-1==n.select_limit||e.length<n.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each((function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)})),r=!1,a=!0):a=!1;break;case r&&!o:this.deselect_all(),r=!1,a=!0;break;case!r&&!o:(-1==n.select_limit||n.select_limit>0)&&(this.deselect_all(),a=!0);break;case r&&o:this.deselect_node(e);break;case!r&&o:(-1==n.select_limit||this.data.ui.selected.length+1<=n.select_limit)&&(a=!0)}}a&&!r&&(s||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),n.selected_parent_open&&e.parents(".jstree-closed").each((function(){l.open_node(this,!1,!0)})),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:i}))},_fix_scroll:function(e){var i,n=this.get_container()[0];if(n.scrollHeight>n.offsetHeight){if(!(e=this._get_node(e))||-1===e||!e.length||!e.is(":visible"))return;(i=e.offset().top-this.get_container().offset().top)<0&&(n.scrollTop=n.scrollTop+i-1),i+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?t:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(i-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?t:0)))}},deselect_node:function(e){if(!(e=this._get_node(e)).length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},toggle_select:function(e){if(!(e=this._get_node(e)).length)return!1;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var i=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),e.jstree.defaults.plugins.push("ui"),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy((function(e,t){if(this._get_settings().crrm.move.open_onmove){var i=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each((function(){i.open_node(this,!1,!0)}))}}),this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(e){return!0}}},_fn:{_show_input:function(t,i){t=this._get_node(t);var n=this._get_settings().core.rtl,o=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),r=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,a=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t.css("position","relative").append(e("<input />",{value:a,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:n?"auto":s+r+4+"px",right:n?s+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy((function(){var e=t.children(".jstree-rename-input"),n=e.val();""===n&&(n=a),l.remove(),e.remove(),this.set_text(t,a),this.rename_node(t,n),i.call(this,t,n,a),t.css("position","")}),this),keyup:function(e){var t=e.keyCode||e.which;if(27==t)return this.value=a,void this.blur();13!=t?c.width(Math.min(l.text("pW"+this.value).width(),o)):this.blur()},keypress:function(e){if(13==(e.keyCode||e.which))return!1}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:c.css("fontFamily")||"",fontSize:c.css("fontSize")||"",fontWeight:c.css("fontWeight")||"",fontStyle:c.css("fontStyle")||"",fontStretch:c.css("fontStretch")||"",fontVariant:c.css("fontVariant")||"",letterSpacing:c.css("letterSpacing")||"",wordSpacing:c.css("wordSpacing")||""}),c.width(Math.min(l.text("pW"+c[0].value).width(),o))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,(function(e,i,n){t.call(this,{obj:e,new_name:i,old_name:n})}))},create:function(t,i,n,o,s){var r,a=this;return(t=this._get_node(t))||(t=-1),this.__rollback(),r=this.create_node(t,i,n,(function(t){var i=this._get_parent(t),n=e(t).index();o&&o.call(this,t),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),s?a.__callback({obj:t,name:this.get_text(t),parent:i,position:n}):this._show_input(t,(function(e,t,o){a.__callback({obj:e,name:t,parent:i,position:n})}))})),r},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),i=this._get_prev(e);this.__rollback(),!1!==(e=this.delete_node(e))&&this.__callback({obj:e,prev:i,parent:t})},check_move:function(){return!!this.__call_old()&&!!this._get_settings().crrm.move.check_move.call(this,this._get_move())},move_node:function(e,t,i,n,o,s){var r=this._get_settings().crrm.move;if(!o)return void 0===i&&(i=r.default_position),"inside"!==i||r.default_position.match(/^(before|after)$/)||(i=r.default_position),this.__call_old(!0,e,t,i,n,!1,s);(!0===r.always_copy||"multitree"===r.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(n=!0),this.__call_old(!0,e,t,i,n,!0,s)},cut:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e})},copy:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e})},paste:function(e){if(!(e=this._get_node(e))||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t})}}})}(o()),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy((function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)}),this)).bind("loaded.jstree",e.proxy((function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()}),this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(i,n){if(!i)return!1;n||(n=e.jstree._themes+i+"/style.css"),-1==e.inArray(n,t)&&(e.vakata.css.add_sheet({url:n}),t.push(n)),this.data.themes.theme!=i&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=i),this.get_container().addClass("jstree-"+i),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e((function(){!1===e.jstree._themes&&e("script").each((function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1})),!1===e.jstree._themes&&(e.jstree._themes="themes/")})),e.jstree.defaults.plugins.push("themes")}(o()),function(e){var t=[];e.jstree.plugin("hotkeys",{__init:function(){if(void 0===e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,(function(i,n){!1!==n&&-1==e.inArray(i,t)&&(e(document).bind("keydown",i,(function(t){return function(t,i){var n,o=e.jstree._focused();if(o&&o.data&&o.data.hotkeys&&o.data.hotkeys.enabled&&(n=o._get_settings().hotkeys[t]))return n.call(o,i)}(i,t)})),t.push(i))})),this.get_container().bind("lock.jstree",e.proxy((function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)}),this)).bind("unlock.jstree",e.proxy((function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)}),this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(o()),function(e){e.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",(function(e,t){t.rslt.obj.children("ul").remove()}))},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,i){var n=this;this.load_node_json(e,(function(){n.__callback({obj:n._get_node(e)}),t.call(this)}),i)},_is_loaded:function(t){var i=this._get_settings().json_data;return-1==(t=this._get_node(t))||!t||!i.ajax&&!i.progressive_render&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var i=this._get_settings().json_data;return t&&-1!==t&&i.progressive_unload&&(e.isFunction(i.data)||i.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,i,n){var o,s=this.get_settings().json_data,r=function(){},a=function(){};if((t=this._get_node(t))&&-1!==t&&(s.progressive_render||s.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return(o=this._parse_json(t.data("jstree_children"),t))&&(t.append(o),s.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),void(i&&i.call(this));if(t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(s.data):s.data.call(this,t,e.proxy((function(e){(e=this._parse_json(e,t))?(-1!==t&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),i&&i.call(this)):(-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&this.correct_state(t)):s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this))}),this));break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||((o=this._parse_json(s.data,t))?(this.get_container().children("ul").empty().append(o.children()),this.clean_node()):s.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:r=function(e,i,o){var r=this.get_settings().json_data.ajax.error;r&&r.call(this,e,i,o),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&s.correct_state&&this.correct_state(t)):"success"===i&&s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,o,a){var l=this.get_settings().json_data.ajax.success;if(l&&(n=l.call(this,n,o,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")||!e.isArray(n)&&!e.isPlainObject(n))return r.call(this,a,o,"");(n=this._parse_json(n,t))?(-1!==t&&t?(t.append(n).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),this.clean_node(t),i&&i.call(this)):-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},s.ajax.context=this,s.ajax.error=r,s.ajax.success=a,s.ajax.dataType||(s.ajax.dataType="json"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}},_parse_json:function(t,i,n){var o,s,r,a,l,c=!1,u=this._get_settings(),d=u.json_data,h=u.core.html_titles;if(!t)return c;if(d.progressive_unload&&i&&-1!==i&&i.data("jstree_children",c),e.isArray(t)){if(c=e(),!t.length)return!1;for(s=0,r=t.length;s<r;s++)(o=this._parse_json(t[s],i,!0)).length&&(c=c.add(o))}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return c;c=e("<li />"),t.attr&&c.attr(t.attr),t.metadata&&c.data(t.metadata),t.state&&c.addClass("jstree-"+t.state),e.isArray(t.data)||(o=t.data,t.data=[],t.data.push(o)),e.each(t.data,(function(i,n){o=e("<a />"),e.isFunction(n)&&(n=n.call(this,t)),"string"==typeof n?o.attr("href","#")[h?"html":"text"](n):(n.attr||(n.attr={}),n.attr.href||(n.attr.href="#"),o.attr(n.attr)[h?"html":"text"](n.title),n.language&&o.addClass(n.language)),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),!n.icon&&t.icon&&(n.icon=t.icon),n.icon&&(-1===n.icon.indexOf("/")?o.children("ins").addClass(n.icon):o.children("ins").css("background","url('"+n.icon+"') center center no-repeat")),c.append(o)})),c.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(d.progressive_render&&"open"!==t.state?c.addClass("jstree-closed").data("jstree_children",t.children):(d.progressive_unload&&c.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(o=this._parse_json(t.children,i,!0)).length&&((l=e("<ul />")).append(o),c.append(l))))}return n||((a=e("<ul />")).append(c),c=a),c},get_json:function(t,i,n,o){var s,r,a,l,c,u,d=[],h=this._get_settings(),p=this;return(t=this._get_node(t))&&-1!==t||(t=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!o&&this.data.types&&i.push(h.types.type_attr),n=e.isArray(n)?n:[],t.each((function(){a=e(this),s={data:[]},i.length&&(s.attr={}),e.each(i,(function(e,t){(r=a.attr(t))&&r.length&&r.replace(/jstree[^ ]*/gi,"").length&&(s.attr[t]=(" "+r).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))})),a.hasClass("jstree-open")&&(s.state="open"),a.hasClass("jstree-closed")&&(s.state="closed"),a.data()&&(s.metadata=a.data()),(l=a.children("a")).each((function(){c=e(this),n.length||-1!==e.inArray("languages",h.plugins)||c.children("ins").get(0).style.backgroundImage.length||c.children("ins").get(0).className&&c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(u=!1,-1!==e.inArray("languages",h.plugins)&&e.isArray(h.languages)&&h.languages.length&&e.each(h.languages,(function(e,t){if(c.hasClass(t))return u=t,!1})),r={attr:{},title:p.get_text(c,u)},e.each(n,(function(e,t){r.attr[t]=(" "+(c.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")})),-1!==e.inArray("languages",h.plugins)&&e.isArray(h.languages)&&h.languages.length&&e.each(h.languages,(function(e,t){if(c.hasClass(t))return r.language=t,!0})),c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(r.icon=c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),c.children("ins").get(0).style.backgroundImage.length&&(r.icon=c.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=p.get_text(c),l.length>1?s.data.push(r):s.data=r})),(a=a.find("> ul > li")).length&&(s.children=p.get_json(a,i,n,!0)),d.push(s)})),d}}})}(o()),function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var i=this._get_settings().languages,n=!1,o=".jstree-"+this.get_index()+" a";if(!e.isArray(i)||0===i.length)return!1;if(-1==e.inArray(t,i)){if(!i[t])return!1;t=i[t]}return t==this.data.languages.current_language||(!1!==(n=e.vakata.css.get_css(o+"."+this.data.languages.current_language,!1,this.data.languages.language_css))&&(n.style.display="none"),!1!==(n=e.vakata.css.get_css(o+"."+t,!1,this.data.languages.language_css))&&(n.style.display=""),this.data.languages.current_language=t,this.__callback(t)),!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,i){var n=this._get_settings().languages,o=this._get_settings().core.strings;return e.isArray(n)&&n.length&&(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language),o[i]&&o[i][t]?o[i][t]:o[t]?o[t]:t},get_text:function(t,i){if(!(t=this._get_node(t)||this.data.ui.last_selected).size())return!1;var n=this._get_settings().languages,o=this._get_settings().core.html_titles;return e.isArray(n)&&n.length?(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language,t=t.children("a."+i)):t=t.children("a:eq(0)"),o?((t=t.clone()).children("INS").remove(),t.html()):(t=t.contents().filter((function(){return 3==this.nodeType}))[0]).nodeValue},set_text:function(t,i,n){if(!(t=this._get_node(t)||this.data.ui.last_selected).size())return!1;var o,s=this._get_settings().languages,r=this._get_settings().core.html_titles;return e.isArray(s)&&s.length?(n=n&&-1!=e.inArray(n,s)?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),r?(o=t.children("INS").clone(),t.html(i).prepend(o),this.__callback({obj:t,name:i,lang:n}),!0):(t=t.contents().filter((function(){return 3==this.nodeType}))[0],this.__callback({obj:t,name:i,lang:n}),t.nodeValue=i)},_load_css:function(){var t,i=this._get_settings().languages,n="/* languages css */",o=".jstree-"+this.get_index()+" a";if(e.isArray(i)&&i.length){for(this.data.languages.current_language=i[0],t=0;t<i.length;t++)n+=o+"."+i[t]+" {",i[t]!=this.data.languages.current_language&&(n+=" display:none; "),n+=" } ";this.data.languages.language_css=e.vakata.css.add_sheet({str:n,title:"jstree-languages"})}},create_node:function(t,i,n,o){return this.__call_old(!0,t,i,n,(function(t){var i,n=this._get_settings().languages,s=t.children("a");if(e.isArray(n)&&n.length){for(i=0;i<n.length;i++)s.is("."+n[i])||t.append(s.eq(0).clone().removeClass(n.join(" ")).addClass(n[i]));s.not("."+n.join(", .")).remove()}o&&o.call(this,t)}))}}})}(o()),function(e){e.jstree.plugin("cookies",{__init:function(){if(void 0===e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,i=this._get_settings().cookies;i.save_loaded&&(t=e.cookie(i.save_loaded))&&t.length&&(this.data.core.to_load=t.split(",")),i.save_opened&&(t=e.cookie(i.save_opened))&&t.length&&(this.data.core.to_open=t.split(",")),i.save_selected&&(t=e.cookie(i.save_selected))&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(",")),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy((function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy((function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))}),this))}),this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var i=this._get_settings().cookies;if(!t)return i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options)),i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),void(i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options)));switch(t){case"open_node":case"close_node":i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options));break;case"select_node":case"deselect_node":i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options))}}}}})}(o()),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy((function(e,t){var i=this._get_node(t.rslt.obj);i=-1===i?this.get_container().children("ul"):i.children("ul"),this.sort(i)}),this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy((function(e,t){this.sort(t.rslt.obj.parent())}),this)).bind("move_node.jstree",e.proxy((function(e,t){var i=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(i.children("ul"))}),this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var i=this._get_settings().sort,n=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(i,n))),t.find("> li > ul").each((function(){n.sort(e(this))})),this.clean_node(t)}}})}(o()),function(e){var t=!1,i=!1,n=!1,o=!1,s=!1,r=!1,a=!1,l=!1,c=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,i,n){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(e){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=i,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(n),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var i=e(document),n=i.scrollTop(),o=i.scrollLeft();t.pageY-n<20?(r&&"down"===a&&(clearInterval(r),r=!1),r||(a="up",r=setInterval((function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)}),150))):r&&"up"===a&&(clearInterval(r),r=!1),e(window).height()-(t.pageY-n)<20?(r&&"up"===a&&(clearInterval(r),r=!1),r||(a="down",r=setInterval((function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)}),150))):r&&"down"===a&&(clearInterval(r),r=!1),t.pageX-o<20?(s&&"right"===l&&(clearInterval(s),s=!1),s||(l="left",s=setInterval((function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)}),150))):s&&"left"===l&&(clearInterval(s),s=!1),e(window).width()-(t.pageX-o)<20?(s&&"left"===l&&(clearInterval(s),s=!1),s||(l="right",s=setInterval((function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)}),150))):s&&"right"===l&&(clearInterval(s),s=!1)}var c="rtl"===e("html").eq(0).attr("dir");e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left-(c?e.vakata.dnd.helper.outerWidth():0)+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){s&&clearInterval(s),r&&clearInterval(r),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e((function(){e.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } html[dir=rtl] #vakata-dragged { padding:4px 24px 4px 4px; }",title:"vakata"})})),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy((function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target)){var s,r=e.jstree._reference(i.target);r.data.dnd.foreign?!0!==(s=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:!0}))&&!0!==s.inside&&!0!==s.before&&!0!==s.after||e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"):(r.prepare_move(t,r.get_container(),"last"),r.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}}),this)).bind("mouseup.jstree",e.proxy((function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target){var n,o=e.jstree._reference(i.currentTarget);o.data.dnd.foreign?!0!==(n=o._get_settings().dnd.drag_check.call(this,{o:t,r:o.get_container(),is_root:!0}))&&!0!==n.inside&&!0!==n.before&&!0!==n.after||o._get_settings().dnd.drag_finish.call(this,{o:t,r:o.get_container(),is_root:!0}):o.move_node(t,o.get_container(),"last",i[o._get_settings().dnd.copy_modifier+"Key"])}}),this)).bind("mouseleave.jstree",e.proxy((function(t){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))}),this)).bind("mousemove.jstree",e.proxy((function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var i=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy((function(){this.scrollLeft+=e.vakata.dnd.scroll_spd}),i),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy((function(){this.scrollLeft-=e.vakata.dnd.scroll_spd}),i),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy((function(){this.scrollTop+=e.vakata.dnd.scroll_spd}),i),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy((function(){this.scrollTop-=e.vakata.dnd.scroll_spd}),i),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}}),this)).bind("scroll.jstree",e.proxy((function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n&&o&&(n.hide(),o.hide())}),this)).delegate("a","mousedown.jstree",e.proxy((function(e){if(1===e.which)return this.start_drag(e.currentTarget,e),!1}),this)).delegate("a","mouseenter.jstree",e.proxy((function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)}),this)).delegate("a","mousemove.jstree",e.proxy((function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(i&&i.length&&i.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),void 0===this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())}),this)).delegate("a","mouseleave.jstree",e.proxy((function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;n&&n.hide(),o&&o.hide(),this.data.dnd.mto=setTimeout((i=this,function(){i.dnd_leave(t)}),0)}var i}),this)).delegate("a","mouseup.jstree",e.proxy((function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)}),this)),e(document).bind("drag_stop.vakata",e.proxy((function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,n&&n.css({top:"-2000px"}),o&&o.css({top:"-2000px"})}),this)).bind("drag_start.vakata",e.proxy((function(t,i){if(i.data.jstree){var n=e(i.event.target);n.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(n)}}),this));var s=this._get_settings().dnd;s.drag_target&&e(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy((function(i){t=i.target,e.vakata.dnd.drag_start(i,{jstree:!0,obj:i.target},"<ins class='jstree-icon'></ins>"+e(i.target).text()),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var s=this.get_container();this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.foreign=!0,i.preventDefault()}),this)),s.drop_target&&e(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy((function(i){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(i.target),e:i})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}),this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy((function(t){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}),this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy((function(i){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(i.target),e:i})}),this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(e){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(i&&i.length){if(this.data.dnd.off=i.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+i.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:i});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,i,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,i,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(i)?(this.prepare_move(t,i,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,i,s=!1,r=this._get_settings().core.rtl;switch(i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(i,e.proxy((function(t,i){if(this.data.dnd[i])return e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),s=i,!1}),this)),!1===s&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=r?this.data.dnd.off.right-18:this.data.dnd.off.left+10,s){case"before":n.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),o&&o.css({left:t+(r?-o.width()-8:8)+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":n.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),o&&o.css({left:t+(r?-o.width()-8:8)+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":n.css({left:t+(r?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),o&&o.hide();break;default:n.hide(),o&&o.hide()}return c=s,s}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(i,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:i,p:c}):(this.dnd_prepare(),this.move_node(t,i,c,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,i=!1,n.hide(),o&&o.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var n=this._get_settings().dnd;this.data.dnd.prepared=!1,i=this._get_node(t),n.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),n.check_timeout)):this.dnd_prepare(),n.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),i&&i.length&&i.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),n.open_timeout))):i&&i.length&&i.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),n.hide(),o&&o.hide(),i&&i[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(i,s){t=this._get_node(i),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var r=t.length>1?this._get_string("multiple_selection"):this.get_text(t),a=this.get_container();this._get_settings().core.html_titles||(r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(s,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+r),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=a.offset(),this.data.dnd.cw=parseInt(a.width(),10),this.data.dnd.ch=parseInt(a.height(),10),this.data.dnd.active=!0}}}),e((function(){e.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } html[dir=rtl] #vakata-dragged ins { left:auto; right:4px; }#vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",title:"jstree"}),n=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",(function(e){return n.hide(),o.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1})).appendTo("body"),o=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",(function(e){if(i&&i.length){var t=i.children("a");return t.trigger("mouseup.jstree"),t.trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1}})).bind("mouseleave",(function(t){var s=e(t.relatedTarget);if((s.is(".jstree")||0===s.closest(".jstree").length)&&i&&i.length)return i.children("a").trigger(t),n.hide(),o.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1})).appendTo("body"),e(document).bind("drag_start.vakata",(function(e,t){t.data.jstree&&(n.show(),o&&o.show())})),e(document).bind("drag_stop.vakata",(function(e,t){t.data.jstree&&(n.hide(),o&&o.hide())}))}))}(o()),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy((function(e,t){this._prepare_checkboxes(t.rslt.obj)}),this)).bind("loaded.jstree",e.proxy((function(e){this._prepare_checkboxes()}),this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy((function(e){if(e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),!this.data.ui||!this.data.checkbox.noui)return e.stopImmediatePropagation(),!1;this.save_selected(),this.data.cookies&&this.save_cookie("select_node")}),this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(!1!==(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"))){var i,n,o=this,s=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,a=this._get_settings().checkbox.real_checkboxes_names;t.each((function(){n=e(this),i=n.is("li")&&(n.hasClass("jstree-checked")||r&&n.children(":checked").length)?"jstree-checked":"jstree-unchecked",n.find("li").andSelf().each((function(){var t,n=e(this);n.children("a"+(o.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(s?"jstree-unchecked":i),r&&(n.children(":checkbox").length?n.children(":checkbox").addClass("jstree-real-checkbox"):(t=a.call(o,n),n.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),s?(n.hasClass("jstree-checked")||n.children(":checked").length)&&n.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===i||n.hasClass("jstree-checked")||n.children(":checked").length)&&n.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)}))})),s||t.find(".jstree-checked").parent().parent().each((function(){o._repair_state(this)}))}},change_state:function(t,i){t=this._get_node(t);var n=!1,o=this._get_settings().checkbox.real_checkboxes;if(!t||-1===t)return!1;if(i=!1===i||!0===i?i:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)i?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),o&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),o&&t.children(":checkbox").prop("checked",!0));else{if(i){if(!(n=t.find("li").andSelf()).filter(".jstree-checked, .jstree-undetermined").length)return!1;n.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),o&&n.children(":checkbox").prop("checked",!1)}else{if(!(n=t.find("li").andSelf()).filter(".jstree-unchecked, .jstree-undetermined").length)return!1;n.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),o&&n.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each((function(){var t=e(this);if(i){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),o&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),o&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),o&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),o&&t.children(":checkbox").prop("checked",!0)}}))}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each((function(){t.open_node(this,!1,!0)}))}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each((function(){e.change_state(this,!1)})),this.__callback()},uncheck_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each((function(){e.change_state(this,!0)})),this.__callback()},is_checked:function(e){return!!(e=this._get_node(e)).length&&e.is(".jstree-checked")},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if((e=this._get_node(e)).length)if(this._get_settings().checkbox.two_state)e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var t=this._get_settings().checkbox.real_checkboxes,i=e.find("> ul > .jstree-checked").length,n=e.find("> ul > .jstree-undetermined").length,o=e.find("> ul > li").length;0===o?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===i&&0===n?this.change_state(e,!0):i===o?this.change_state(e,!1):(e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),(function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.deselect_all(),e.each(i,(function(e,i){t.check_node(i)})),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each((function(){this.id&&e.data.core.to_load.push("#"+this.id)}))}}}),e((function(){e.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})}))}(o()),function(e){e.vakata.xslt=function(t,i,n){var o,s,r,a="";return document.recalc?(o=document.createElement("xml"),s=document.createElement("xml"),o.innerHTML=t,s.innerHTML=i,e("body").append(o).append(s),setTimeout(function(t,i,n){return function(){n.call(null,t.transformNode(i.XMLDocument)),setTimeout(function(t,i){return function(){e(t).remove(),e(i).remove()}}(t,i),200)}}(o,s,n),100),!0):(void 0!==window.DOMParser&&void 0!==window.XMLHttpRequest&&void 0===window.XSLTProcessor&&(t=(new DOMParser).parseFromString(t,"text/xml"),i=(new DOMParser).parseFromString(i,"text/xml")),void 0!==window.DOMParser&&void 0!==window.XMLHttpRequest&&void 0!==window.XSLTProcessor&&(r=new XSLTProcessor,!(e.isFunction(r.transformDocument)&&void 0===window.XMLSerializer||(t=(new DOMParser).parseFromString(t,"text/xml"),i=(new DOMParser).parseFromString(i,"text/xml"),e.isFunction(r.transformDocument)?(a=document.implementation.createDocument("","",null),r.transformDocument(t,i,a,null),n.call(null,(new XMLSerializer).serializeToString(a)),0):(r.importStylesheet(i),a=r.transformToFragment(t,document),n.call(null,e("<div />").append(a).html()),0)))))};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},i=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_xml(e,(function(){n.__callback({obj:n._get_node(e)}),t.call(this)}),i)},_is_loaded:function(t){var i=this._get_settings().xml_data;return-1==(t=this._get_node(t))||!t||!i.ajax&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,i,n){var o=this.get_settings().xml_data,s=function(){},r=function(){};if((t=this._get_node(t))&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!o.data&&!o.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(o.data):o.data.call(this,t,e.proxy((function(n){this.parse_xml(n,e.proxy((function(n){n&&((n=n.replace(/ ?xmlns="[^"]*"/gi,"")).length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))}),this))}),this));break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!t||-1===t):t&&-1!=t||this.parse_xml(o.data,e.proxy((function(n){n?(n=n.replace(/ ?xmlns="[^"]*"/gi,"")).length>10&&(n=e(n),this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this)):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))}),this));break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&t&&-1!==t:s=function(e,i,s){var r=this.get_settings().xml_data.ajax.error;r&&r.call(this,e,i,s),-1!==t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&o.correct_state&&this.correct_state(t)):"success"===i&&o.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},r=function(n,r,a){n=a.responseText;var l=this.get_settings().xml_data.ajax.success;if(l&&(n=l.call(this,n,r,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,""))return s.call(this,a,r,"");this.parse_xml(n,e.proxy((function(n){n&&((n=n.replace(/ ?xmlns="[^"]*"/gi,"")).length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))}),this))},o.ajax.context=this,o.ajax.error=s,o.ajax.success=r,o.ajax.dataType||(o.ajax.dataType="xml"),e.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,t)),e.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,t)),e.ajax(o.ajax)}},parse_xml:function(i,n){var o=this._get_settings().xml_data;e.vakata.xslt(i,t[o.xsl],n)},get_xml:function(t,n,o,s,r){var a,l,c,u,d="",h=this._get_settings(),p=this;return t||(t="flat"),r||(r=0),(n=this._get_node(n))&&-1!==n||(n=this.get_container().find("> ul > li")),o=e.isArray(o)?o:["id","class"],!r&&this.data.types&&-1===e.inArray(h.types.type_attr,o)&&o.push(h.types.type_attr),s=e.isArray(s)?s:[],r||(h.xml_data.get_include_preamble&&(d+='<?xml version="1.0" encoding="UTF-8"?>'),d+="<root>"),n.each((function(){d+="<item",c=e(this),e.each(o,(function(e,t){var n=c.attr(t);h.xml_data.get_skip_empty&&void 0===n||(d+=" "+t+'="'+i((" "+(n||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')})),c.hasClass("jstree-open")&&(d+=' state="open"'),c.hasClass("jstree-closed")&&(d+=' state="closed"'),"flat"===t&&(d+=' parent_id="'+i(r)+'"'),d+=">",d+="<content>",c.children("a").each((function(){a=e(this),u=!1,d+="<name",-1!==e.inArray("languages",h.plugins)&&e.each(h.languages,(function(e,t){if(a.hasClass(t))return d+=' lang="'+i(t)+'"',u=t,!1})),s.length&&e.each(s,(function(e,t){var n=a.attr(t);h.xml_data.get_skip_empty&&void 0===n||(d+=" "+t+'="'+i((" "+n||0).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')})),a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(d+=' icon="'+i(a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),a.children("ins").get(0).style.backgroundImage.length&&(d+=' icon="'+i(a.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),d+=">",d+="<![CDATA["+p.get_text(a,u)+"]]>",d+="</name>"})),d+="</content>",l=c[0].id||!0,c=c.find("> ul > li"),l=c.length?p.get_xml(t,c,o,s,l):"","nest"==t&&(d+=l),d+="</item>","flat"==t&&(d+=l)})),r||(d+="</root>"),d}}})}(o()),function(e){e.expr[":"].jstree_contains=function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,i){return(e.getAttribute("title")||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",(function(t,i){e(this).children("ul").find("li").hide().removeClass("jstree-last"),i.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each((function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")}))})).bind("clear_search.jstree",(function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)}))},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,i){if(""!==e.trim(t)){var n=this.get_settings().search,o=this,s=function(){},r=function(){};if(this.data.search.str=t,!i&&!1!==n.ajax&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0)return this.search.supress_callback=!0,s=function(){},r=function(e,t,i){var n=this.get_settings().search.ajax.success;n&&(e=n.call(this,e,t,i)||e),this.data.search.to_open=e,this._search_open()},n.ajax.context=this,n.ajax.error=s,n.ajax.success=r,e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),n.ajax.data||(n.ajax.data={search_string:t}),n.ajax.dataType&&!/^json/.exec(n.ajax.dataType)||(n.ajax.dataType="json"),void e.ajax(n.ajax);this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+n.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each((function(){o.open_node(this,!1,!0)})),this.__callback({nodes:this.data.search.result,str:t})}else this.clear_search()},clear_search:function(t){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(t){var i=this,n=!0,o=[],s=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,(function(t,i){if("#"==i)return!0;e(i).length&&e(i).is(".jstree-closed")?o.push(i):s.push(i)})),o.length&&(this.data.search.to_open=s,e.each(o,(function(e,t){i.open_node(t,(function(){i._search_open(!0)}))})),n=!1)),n&&this.search(this.data.search.str,!0)}}})}(o()),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,i,n,o,s,r,a){e.vakata.context.rtl=!!a;var l,c,u=e.vakata.context.parse(t);u&&(e.vakata.context.vis=!0,e.vakata.context.tgt=i,e.vakata.context.par=r||i||null,e.vakata.context.data=s||null,e.vakata.context.cnt.html(u).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",(function(t){e.vakata.context.hide()})),l=e.vakata.context.cnt.height(),n+(c=e.vakata.context.cnt.width())>e(document).width()&&(n=e(document).width()-(c+5),e.vakata.context.cnt.find("li > ul").addClass("right")),o+l>e(document).height()&&(o-=l+i[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:n,top:o}).find("li:has(ul)").bind("mouseenter",(function(t){var i=e(document).width(),n=e(document).height(),o=e(this).children("ul").show();i!==e(document).width()&&o.toggleClass("right"),n!==e(document).height()&&o.toggleClass("bottom")})).bind("mouseleave",(function(t){e(this).children("ul").hide()})).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,i){if(!t)return!1;var n="",o=!1,s=!0;return i||(e.vakata.context.func={}),n+="<ul>",e.each(t,(function(t,i){if(!i)return!0;e.vakata.context.func[t]=i.action,!s&&i.separator_before&&(n+="<li class='vakata-separator vakata-separator-before'></li>"),s=!1,n+="<li class='"+(i._class||"")+(i._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",i.icon&&-1===i.icon.indexOf("/")&&(n+=" class='"+i.icon+"' "),i.icon&&-1!==i.icon.indexOf("/")&&(n+=" style='background:url("+i.icon+") center center no-repeat;' "),n+=">&#160;</ins><a href='#' rel='"+t+"'>",i.submenu&&(n+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),n+=i.label+"</a>",i.submenu&&(o=e.vakata.context.parse(i.submenu,!0))&&(n+=o),n+="</li>",i.separator_after&&(n+="<li class='vakata-separator vakata-separator-after'></li>",s=!0)})),n=n.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),n+="</ul>",e(document).triggerHandler("context_parse.vakata"),n.length>10&&n},exec:function(t){return!!e.isFunction(e.vakata.context.func[t])&&(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0)}},e((function(){e.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",title:"vakata"}),e.vakata.context.cnt.delegate("a","click",(function(e){e.preventDefault()})).delegate("a","mouseup",(function(t){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()})).delegate("a","mouseover",(function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")})).appendTo("body"),e(document).bind("mousedown",(function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()})),void 0!==e.hotkeys&&e(document).bind("keydown","up",(function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}})).bind("keydown","down",(function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}})).bind("keydown","right",(function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())})).bind("keydown","left",(function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())})).bind("keydown","esc",(function(t){e.vakata.context.hide(),t.preventDefault()})).bind("keydown","space",(function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault()}))})),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy((function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)}),this)).delegate("a","click.jstree",e.proxy((function(t){this.data.contextmenu&&e.vakata.context.hide()}),this)).bind("destroy.jstree",e.proxy((function(){this.data.contextmenu&&e.vakata.context.hide()}),this)),e(document).bind("context_hide.vakata",e.proxy((function(){this.data.contextmenu=!1}),this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,i,n){t=this._get_node(t);var o=this.get_settings().contextmenu,s=t.children("a:visible:eq(0)"),r=!1,a=!1;o.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(o.show_at_node||void 0===i||void 0===n)&&(i=(r=s.offset()).left,n=r.top+this.data.core.li_height),a=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:o.items,e.isFunction(a)&&(a=a.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(a,s,i,n,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(o()),function(e){e.jstree.plugin("types",{__init:function(){var t=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",e.proxy((function(){var i=t.types,n=t.type_attr,o="",s=this;e.each(i,(function(t,i){if(e.each(i,(function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||s.data.types.attach_to.push(e)})),!i.icon)return!0;(i.icon.image||i.icon.position)&&(o+="default"==t?".jstree-"+s.get_index()+" a > .jstree-icon { ":".jstree-"+s.get_index()+" li["+n+'="'+t+'"] > a > .jstree-icon { ',i.icon.image&&(o+=" background-image:url("+i.icon.image+"); "),i.icon.position?o+=" background-position:"+i.icon.position+"; ":o+=" background-position:0 0; ",o+="} ")})),""!==o&&e.vakata.css.add_sheet({str:o,title:"jstree-types"})}),this)).bind("before.jstree",e.proxy((function(t,i){var n,o,s=!!this._get_settings().types.use_data&&this._get_node(i.args[0]),r=!(!s||-1===s||!s.length)&&s.data("jstree");if(r&&r.types&&!1===r.types[i.func])return t.stopImmediatePropagation(),!1;if(-1!==e.inArray(i.func,this.data.types.attach_to)){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;if(((n=this._get_settings().types.types)[o=this._get_type(i.args[0])]&&void 0!==n[o][i.func]||n.default&&void 0!==n.default[i.func])&&!1===this._check(i.func,i.args[0]))return t.stopImmediatePropagation(),!1}}),this)),s&&this.get_container().bind("load_node.jstree set_type.jstree",e.proxy((function(t,i){var n=i&&i.rslt&&i.rslt.obj&&-1!==i.rslt.obj?this._get_node(i.rslt.obj).parent():this.get_container_ul(),o=!1,s=this._get_settings().types;e.each(s.types,(function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(o="default"===e?n.find("li > a > .jstree-icon"):n.find("li["+s.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&o.css("backgroundImage","url("+t.icon.image+")"),o.css("backgroundPosition",t.icon.position||"0 0"))}))}),this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{default:{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return!(!(e=this._get_node(e))||!e.length)&&(e.attr(this._get_settings().types.type_attr)||"default")},set_type:function(e,t){var i=!(!(t=this._get_node(t)).length||!e)&&t.attr(this._get_settings().types.type_attr,e);return i&&this.__callback({obj:t,type:e}),i},_check:function(t,i,n){i=this._get_node(i);var o=!1,s=this._get_type(i),r=0,a=this,l=this._get_settings().types,c=!1;if(-1===i){if(!l[t])return;o=l[t]}else{if(!1===s)return;(c=!!l.use_data&&i.data("jstree"))&&c.types&&void 0!==c.types[t]?o=c.types[t]:l.types[s]&&void 0!==l.types[s][t]?o=l.types[s][t]:l.types.default&&void 0!==l.types.default[t]&&(o=l.types.default[t])}return e.isFunction(o)&&(o=o.call(this,i)),"max_depth"===t&&-1!==i&&!1!==n&&-2!==l.max_depth&&0!==o&&i.children("a:eq(0)").parentsUntil(".jstree","li").each((function(e){return-1!==l.max_depth&&l.max_depth-(e+1)<=0||-1!==(r=0===e?o:a._check(t,this,!1))&&r-(e+1)<=0?(o=0,!1):(r>=0&&(r-(e+1)<o||o<0)&&(o=r-(e+1)),void(l.max_depth>=0&&(l.max_depth-(e+1)<o||o<0)&&(o=l.max_depth-(e+1))))})),o},check_move:function(){if(!this.__call_old())return!1;var t,i=this._get_move(),n=i.rt._get_settings().types,o=i.rt._check("max_children",i.cr),s=i.rt._check("max_depth",i.cr),r=i.rt._check("valid_children",i.cr),a=1;if("none"===r)return!1;if(e.isArray(r)&&i.ot&&i.ot._get_type&&(i.o.each((function(){if(-1===e.inArray(i.ot._get_type(this),r))return a=!1,!1})),!1===a))return!1;if(-2!==n.max_children&&-1!==o&&(-1===i.cr?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length)+i.o.length>o)return!1;if(-2!==n.max_depth&&-1!==s){if(a=0,0===s)return!1;if(void 0===i.o.d){for(t=i.o;t.length>0;)t=t.find("> ul > li"),a++;i.o.d=a}if(s-i.o.d<0)return!1}return!0},create_node:function(t,i,n,o,s,r){if(!r&&(s||this._is_loaded(t))){var a="string"==typeof i&&i.match(/^before|after$/i)&&-1!==t?this._get_parent(t):this._get_node(t),l=this._get_settings().types,c=this._check("max_children",a),u=this._check("max_depth",a),d=this._check("valid_children",a);if("string"==typeof n&&(n={data:n}),n||(n={}),"none"===d)return!1;if(e.isArray(d))if(n.attr&&n.attr[l.type_attr]){if(-1===e.inArray(n.attr[l.type_attr],d))return!1}else n.attr||(n.attr={}),n.attr[l.type_attr]=d[0];if(-2!==l.max_children&&-1!==c&&(-1===a?this.get_container().find("> ul > li").length:a.find("> ul > li").length)+1>c)return!1;if(-2!==l.max_depth&&-1!==u&&u-1<0)return!1}return this.__call_old(!0,t,i,n,o,s,r)}}})}(o()),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter((function(){return 3==this.nodeType})).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_html(e,(function(){n.__callback({obj:n._get_node(e)}),t.call(this)}),i)},_is_loaded:function(t){return-1==(t=this._get_node(t))||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,i,n){var o,s=this.get_settings().html_data,r=function(){},a=function(){};if((t=this._get_node(t))&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(s.data):s.data.call(this,t,e.proxy((function(n){n&&""!==n&&n.toString&&""!==n.toString().replace(/^[\s\n]+$/,"")?((n=e(n)).is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))}),this));break;case!s.data&&!s.ajax:t&&-1!=t||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||((o=e(s.data)).is("ul")||(o=e("<ul />").append(o)),this.get_container().children("ul").empty().append(o.children()).find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:t=this._get_node(t),r=function(e,i,o){var r=this.get_settings().html_data.ajax.error;r&&r.call(this,e,i,o),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&s.correct_state&&this.correct_state(t)):"success"===i&&s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,o,a){var l=this.get_settings().html_data.ajax.success;if(l&&(n=l.call(this,n,o,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,""))return r.call(this,a,o,"");n?((n=e(n)).is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter((function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName})).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},s.ajax.context=this,s.ajax.error=r,s.ajax.success=a,s.ajax.dataType||(s.ajax.dataType="html"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(o()),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",(function(i){e(i.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)})).delegate("a","mouseleave.jstree",(function(){e(this).removeClass(t.item_h)})).bind("init.jstree",e.proxy((function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))}),this)).bind("open_node.jstree create_node.jstree",e.proxy((function(e,t){this._themeroller(t.rslt.obj)}),this)).bind("loaded.jstree refresh.jstree",e.proxy((function(e){this._themeroller()}),this)).bind("close_node.jstree",e.proxy((function(e,t){this._themeroller(t.rslt.obj)}),this)).bind("delete_node.jstree",e.proxy((function(e,t){this._themeroller(t.rslt.parent)}),this)).bind("correct_state.jstree",e.proxy((function(e,i){i.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter((function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")})).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")}),this)).bind("select_node.jstree",e.proxy((function(e,i){i.rslt.obj.children("a").addClass(t.item_a)}),this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy((function(e,i){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)}),this)).bind("dehover_node.jstree",e.proxy((function(e,i){i.rslt.obj.children("a").removeClass(t.item_h)}),this)).bind("hover_node.jstree",e.proxy((function(e,i){this.get_container().find("a."+t.item_h).not(i.rslt.obj).removeClass(t.item_h),i.rslt.obj.children("a").addClass(t.item_h)}),this)).bind("move_node.jstree",e.proxy((function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)}),this))},__destroy:function(){var t=this._get_settings().themeroller,i=["ui-icon"];e.each(t,(function(e,t){(t=t.split(" ")).length&&(i=i.concat(t))})),this.get_container().removeClass("ui-widget-content").find("."+i.join(", .")).removeClass(i.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;(e=e&&-1!=e?this._get_node(e).parent():this.get_container_ul()).find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter((function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")})).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter((function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")})).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter((function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")})).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e((function(){e.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})}))}(o()),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy((function(t,i){var n,o,s=[],r=!0;if("move_node"==i.func&&!0===i.args[4]&&i.args[0].o&&i.args[0].o.length&&(i.args[0].o.children("a").each((function(){s.push(e(this).text().replace(/^\s+/g,""))})),r=this._check_unique(s,i.args[0].np.find("> ul > li").not(i.args[0].o),"move_node")),"create_node"==i.func&&(i.args[4]||this._is_loaded(i.args[0]))&&(n=this._get_node(i.args[0]),!i.args[1]||"before"!==i.args[1]&&"after"!==i.args[1]||(n=this._get_parent(i.args[0]))&&-1!==n||(n=this.get_container()),"string"==typeof i.args[2]?s.push(i.args[2]):i.args[2]&&i.args[2].data?s.push(i.args[2].data):s.push(this._get_string("new_node")),r=this._check_unique(s,n.find("> ul > li"),"create_node")),"rename_node"==i.func&&(s.push(i.args[1]),o=this._get_node(i.args[0]),(n=this._get_parent(o))&&-1!==n||(n=this.get_container()),r=this._check_unique(s,n.find("> ul > li").not(o),"rename_node")),!r)return t.stopPropagation(),!1}),this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,i,n){var o=[];return i.children("a").each((function(){o.push(e(this).text().replace(/^\s+/g,""))})),!o.length||!t.length||(o=o.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",")).length+t.length==o.concat(t).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length||(this._get_settings().unique.error_callback.call(null,t,i,n),!1)},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),i=[];return!t.o||!t.o.length||(t.o.children("a").each((function(){i.push(e(this).text().replace(/^\s+/g,""))})),this._check_unique(i,t.np.find("> ul > li").not(t.o),"check_move"))}}})}(o()),function(e){e.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",e.proxy((function(e,t){this._get_settings().core.animation=0}),this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",e.proxy((function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)}),this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",e.proxy((function(e,t){var i,n;this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout((i=this,n=t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1,function(){i._prepare_wholerow_ul(n)}),0)}),this)).bind("deselect_all.jstree",e.proxy((function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))}),this)).bind("select_node.jstree deselect_node.jstree ",e.proxy((function(t,i){i.rslt.obj.each((function(){i.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((e(this).offset().top-i.inst.get_container().offset().top+i.inst.get_container()[0].scrollTop)/i.inst.data.core.li_height,10)+")").children("a").attr("class",i.rslt.obj.children("a").attr("class"))}))}),this)).bind("hover_node.jstree dehover_node.jstree",e.proxy((function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}),this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",(function(t){var i=e(t.currentTarget);"A"===t.target.tagName||"INS"===t.target.tagName&&i.closest("li").is(".jstree-open, .jstree-closed")||(i.closest("li").children("a:visible:eq(0)").click(),t.stopImmediatePropagation())})).delegate("li","mouseover.jstree",e.proxy((function(t){return t.stopImmediatePropagation(),e(t.currentTarget).children(".jstree-hovered, .jstree-clicked").length||this.hover_node(t.currentTarget),!1}),this)).delegate("li","mouseleave.jstree",e.proxy((function(t){e(t.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(t.currentTarget)}),this)),(r||s)&&e.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(t){!1!==(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"))&&t.each((function(){e(this).find("li").andSelf().each((function(){var t=e(this);if(t.children(".jstree-wholerow-span").length)return!0;t.prepend("<span class='jstree-wholerow-span' style='width:"+18*t.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")}))}))},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),t=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==t&&(this.data.wholerow.last_html=t,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(r?5:0))).find("li[id]").each((function(){this.removeAttribute("id")})).end()))}}}),e((function(){var t=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";a&&(t+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(r||s)&&(t+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),e.vakata.css.add_sheet({str:t,title:"jstree"})}))}(o()),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"];e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(i,n){var o=-1==i?this._get_settings().model.object:i.data("jstree_model");if(!function(t,i){var n=!0;return t=t||{},i=[].concat(i),e.each(i,(function(i,o){if(!e.isFunction(t[o]))return n=!1,!1})),n}(o,t))return n.call(null,!1);this._get_settings().model.async?o.getChildren(e.proxy((function(e){this.model_done(e,n)}),this)):this.model_done(o.getChildren(),n)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,i){var n=[],o=this._get_settings(),s=this;e.isArray(t)||(t=[t]),e.each(t,(function(t,i){var r=i.getProps()||{};r.attr=i.getAttr()||{},i.getChildrenCount()&&(r.state="closed"),r.data=i.getName(),e.isArray(r.data)||(r.data=[r.data]),s.data.types&&e.isFunction(i.getType)&&(r.attr[o.types.type_attr]=i.getType()),r.attr.id&&o.model.id_prefix&&(r.attr.id=o.model.id_prefix+r.attr.id),r.metadata||(r.metadata={}),r.metadata.jstree_model=i,n.push(r)})),i.call(null,n)}}})}(o())}}()},"./lib/ckeditor/config_manual.js":function(e,t,i){"use strict";i.r(t);var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./lib/ckeditor/ckeditor.js");s.CKEDITOR.advBar=!1,s.CKEDITOR.editorConfig=function(e){e.stylesSet=[],e.toolbar=[["Styles","Bold","Italic","Underline","Strike","Subscript","Superscript","Wbcolor","Wbbgcolor","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","WBLink","Unlink","Anchor"],["ShowBlocks","|","More","Less"],["Languages"],["CloseBtn"]],e.floatSpacePinnedOffsetY=130,e.baseFloatZIndex=10,e.forcePasteAsPlainText=s.CKEDITOR.DATA_TRANSFER_CROSS_EDITORS,e.allowedContent=!0,e.removePlugins="link",e.extraPlugins="wbcolor,wbbgcolor,morebuttons,lessbuttons,editstyles,wblink,closebtn,languages,wbsourcedialog,wbimage",e.keystrokes||(e.keystrokes=[]),e.keystrokes.push([s.CKEDITOR.CTRL+76,"wblink"]),e.keystrokes.push([s.CKEDITOR.CTRL+75,"wblink"])},s.CKEDITOR.on("instanceReady",(function(e){s.CKEDITOR.advBar?e.editor.ui.instances.hasOwnProperty("More")&&o()("#"+e.editor.ui.instances.More._.id).hide():(e.editor.ui.instances.hasOwnProperty("Wbbgcolor")&&o()("#"+e.editor.ui.instances.Wbbgcolor._.id).hide(),e.editor.ui.instances.hasOwnProperty("Strike")&&o()("#"+e.editor.ui.instances.Strike._.id).hide(),e.editor.ui.instances.hasOwnProperty("Subscript")&&o()("#"+e.editor.ui.instances.Subscript._.id).hide(),e.editor.ui.instances.hasOwnProperty("Superscript")&&o()("#"+e.editor.ui.instances.Superscript._.id).hide(),e.editor.ui.instances.hasOwnProperty("ShowBlocks")&&o()("#"+e.editor.ui.instances.ShowBlocks._.id).hide(),e.editor.ui.instances.hasOwnProperty("WBSourcedialog")&&o()("#"+e.editor.ui.instances.WBSourcedialog._.id).hide(),e.editor.ui.instances.hasOwnProperty("Less")&&o()("#"+e.editor.ui.instances.Less._.id).hide()),o()(".cke_combo_button").click((function(){o()(".cke_combo_button").data("set")||(setTimeout((function(){wb_builder.site.reloadCkIframeStyles()}),100),o()(".cke_combo_button").data("set",!0))}));var t={unlink:"fa-chain-broken",link:"fa-link",less:"fa-angle-double-left",more:"fa-angle-double-right",bulletedlist:"fa-list-ul",numberedlist:"fa-list-ol",justifyblock:"fa-align-justify",justifyright:"fa-align-right",justifyleft:"fa-align-left",justifycenter:"fa-align-center",bold:"fa-bold",italic:"fa-italic",underline:"fa-underline",strike:"fa-strikethrough",subscript:"fa-subscript",superscript:"fa-superscript",closebtn:"fa-check-square-o",anchor:"fa-flag",wbsourcedialog:"fa-file-code-o",wbimage:"fa-picture-o"},i={textcolor:"icon-text-color",bgcolor:"icon-text-background-color",removeformat:"icon-text-clear-format",showblocks:"icon-text-show-blocks"};for(var n in t)(r=document.getElementById(e.editor.id+"_toolbox").querySelector(".cke_button__"+n+"_icon"))&&(r.setAttribute("style","background: none !important"),r.style.textAlign="center",r.innerHTML='<i class="fa '+t[n]+'" style="font: normal normal normal 14px FontAwesome;vertical-align: middle;"></i>');for(var n in i){var r;if(r=document.getElementById(e.editor.id+"_toolbox").querySelector(".cke_button__"+n+"_icon")){r.setAttribute("style","background: none !important"),r.style.textAlign="center",r.innerHTML='<i class="icomoon '+i[n]+'" style="font: 14px; vertical-align: middle;"></i>';var a=r.parentElement.querySelector(".cke_button_arrow");a&&(a.style.display="none")}}}))},"./AlignSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{AlignSelector:function(){return u},HorizontalAlignment:function(){return s},VerticalAlignment:function(){return o}});var n,o,s,r=i("./UIComponent.ts"),a=i("./lib/jquery-1.11.3.min.js"),l=i.n(a),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e.TOP="top",e.MIDDLE="center",e.BOTTOM="bottom"}(o||(o={})),function(e){e.LEFT="left",e.CENTER="center",e.RIGHT="right"}(s||(s={}));var u=function(e){function t(i){void 0===i&&(i="");var n=e.call(this,"%inherit%"===i?i:void 0)||this;n.hAlign=s.LEFT,n.vAlign=o.TOP,t.index++,i&&"%inherit%"!==i&&n.setValue(i);var r=n,a=n._elem.find(".wb-cell-ctrl");return a.bind("click",(function(){var e=l()(this);if(!e.is(".disabled")){a.removeClass("active"),e.addClass("active");var t=1*e.index(),i=1*e.parent().data("row");r.hAlign=t>0?1===t?s.CENTER:s.RIGHT:s.LEFT,r.vAlign=i>0?1===i?o.MIDDLE:o.BOTTOM:o.TOP,r.trigger("change"),r.onValueChanged()}})),n}return c(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.on("change",(function(){n.call(i,t)})))},t.prototype.setOnChange=function(e){var t=this;return this.on("change",(function(){return e(t.getValue())})),this},t.prototype._createElem=function(){return l()("<div>").addClass("wb-align-controll").append(l()("<div>").data("row",0).append(l()("<div>").addClass("wb-cell-ctrl").data("value","left top")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","center top")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","right top"))).append(l()("<div>").data("row",1).append(l()("<div>").addClass("wb-cell-ctrl").data("value","left center")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","center center")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","right center"))).append(l()("<div>").data("row",2).append(l()("<div>").addClass("wb-cell-ctrl").data("value","left bottom")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","center bottom")).append(l()("<div>").addClass("wb-cell-ctrl").data("value","right bottom")))},t.prototype.update=function(){var e=this.hAlign===s.RIGHT?2:this.hAlign===s.CENTER?1:0,t=this.vAlign===o.BOTTOM?2:this.vAlign===o.MIDDLE?1:0,i=this._elem.find(".wb-cell-ctrl");if(i.removeClass("active"),i.eq(3*t+e).addClass("active"),i.removeClass("highlight"),this.highlight)for(var n in this.highlight)i.eq(this.highlight[parseInt(n)]).addClass("highlight")},t.prototype.getVerticalAlignment=function(){return this.vAlign},t.prototype.getHorizontalAlignment=function(){return this.hAlign},t.prototype.setVerticalAlignment=function(e){this.vAlign=e,this.update()},t.prototype.setHorizontalAlignment=function(e){this.hAlign=e,this.update()},t.prototype.getValue=function(){return this.hAlign+" "+this.vAlign},t.prototype.setValue=function(e){var t=(e+"").split(" ");this.hAlign=t[0]&&[s.LEFT,s.CENTER,s.RIGHT].indexOf(t[0])>-1?t[0]:s.LEFT,this.vAlign=t.length>1&&t[1]&&[o.TOP,o.MIDDLE,o.BOTTOM].indexOf(t[1])>-1?t[1]:o.TOP,this.update()},t.prototype.getAlign=function(){return this.getValue()},t.prototype.setAlign=function(e){this.setValue(e)},t.prototype.setHightlight=function(e){this.highlight=e,this.update()},t.prototype.getHightlight=function(){return this.highlight},t.prototype.setDisabledOptions=function(e){return this._elem.find(".wb-cell-ctrl").each((function(){var t=l()(this);e.indexOf(t.data("value"))>=0?t.addClass("disabled"):t.removeClass("disabled")})),this},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"disableOptions"in t&&this.setDisabledOptions(t.disableOptions)},t.index=0,t}(r.UIComponent)},"./AutoScaleUploadedImage.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{prepareAutoScaleOptions:function(){return l}});var n=i("./lib/JavaScript-Load-Image-2.10.1/js/load-image.js"),o=i.n(n),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=o().scale;function l(e,t){var i=0,n=t.files[0].type;r().each(t.processQueue,(function(e,t){return!("saveImage"==t.action&&!t.action.disabled&&(i=t.quality,n=t.type||n,1))})),r().each(t.processQueue,(function(e,t){return!("resizeImage"==t.action&&!t.action.disabled&&(t.imageType=n,t.imageQuality=i,1))}))}o().scale=function(e,t){if("action"in t&&"imageType"in t&&wb_builder.maxUploadImageSize&&wb_builder.maxUploadImageFileSize&&"resizeImage"==t.action){if("image/gif"==t.imageType||"image/svg"==t.imageType||"image/svg+xml"==t.imageType)return e;var i=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(i&&n){t.imageQuality||(t.imageQuality=100);for(var o=wb_builder.maxUploadImageSize,s=void 0,r=void 0,l=void 0,c=0;c<5;c++){s=i*(r=Math.sqrt(n*o/i))/n,t.maxWidth=Math.floor(s),t.maxHeight=Math.floor(r),t.cover=i>t.maxWidth||n>t.maxHeight,(t.maxWidth>=i||t.maxHeight>=n)&&(t.maxWidth=i,t.maxHeight=n);var u=void 0;if("function"!=typeof(l=a.apply(this,arguments)).toDataURL)break;if(u=.75*l.toDataURL(t.imageType,t.imageQuality).length,(u*=1.1)<=wb_builder.maxUploadImageFileSize)break;o*=wb_builder.maxUploadImageFileSize/u}return l}t.maxWidth=1920,t.maxHeight=1080,t.cover=!1}return a.apply(this,arguments)}},"./BackgroundControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundControl:function(){return m},extractYoutubeId:function(){return f},isSet:function(){return g},runVideoByBackground:function(){return y}});var n,o=i("./UIComponent.ts"),s=i("./ui/ThumbEditorControl.ts"),r=i("./ui/BackgroundPopover.ts"),a=i("./util/VideoThumbGenerator.ts"),l=i("./util/TextUtil.ts"),c=i("./lib/jquery-1.11.3.min.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(){return h=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},p={useColor:!0,useImage:!0,usePosition:!0,useRepeat:!0,useAttachment:!1,useSize:!1,useFullWidth:!1,useOpacity:!1,allowVideo:!1},m=function(e){function t(t){var i=e.call(this)||this;return i.onChange=null,i.value={},i.popover=null,i.options=u().extend(!0,{},p,t),i.thumbCtrl=(new s.ThumbEditorControl).onEdit((function(){return i.edit()})).onRemove((function(){return i.clear()})),i.thumbCtrl.getPreviewElem().append(u()("<div>").addClass("wb-color-ctrl").append(i.colorElem=u()("<span>"))).append(i.emptyIconElem=u()("<span>").addClass("fa fa-image")),i._elem.addClass("wb-bgcontrol-ctrl").append(i.thumbCtrl.getElem()),i}return d(t,e),t.prototype.buildInit=function(e,t){var i,n;this.setOptions(e),e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,i.onChange=function(){n.call(i,t)})},t.prototype.setOptions=function(e){"useColor"in e&&(this.options.useColor=!!e.useColor),"useImage"in e&&(this.options.useImage=!!e.useImage),"usePosition"in e&&(this.options.usePosition=!!e.usePosition),"useRepeat"in e&&(this.options.useRepeat=!!e.useRepeat),"useAttachment"in e&&(this.options.useAttachment=!!e.useAttachment),"useSize"in e&&(this.options.useSize=!!e.useSize),"useOpacity"in e&&(this.options.useOpacity=!!e.useOpacity),"useFullWidth"in e&&(this.options.useFullWidth=!!e.useFullWidth),"allowVideo"in e&&(this.options.allowVideo=!!e.allowVideo)},t.prototype.destroy=function(){this.popover&&this.popover.dispose(),e.prototype.destroy.call(this)},t.prototype.clear=function(){this.setValue(null),this.handleChange()},t.prototype.edit=function(){var e=this;this.popover&&this.popover.isVisible()?this.popover.setVisible(!1):(this.popover||(this.popover=new r.BackgroundPopover(this.thumbCtrl.getElem(),(function(t){e.value=t,e.handleChange()}))),this.popover.edit(this.value,this.options))},t.prototype.updatePreview=function(){var e=this.value&&this.value.image||"none",t=!(!this.value||!this.value.isVideo||"none"===e),i=this.thumbCtrl.getPreviewElem();t?(0,a.lookupThumb)(e,i).done((function(e){e&&(i[0].style.backgroundImage="url('"+(0,l.urlEncode)(e,!0)+"')")})):i[0].style.backgroundImage="none"!==e?"url('".concat((0,l.urlEncode)(wb_builder.makeLocalUrl(e),!0),"')"):"none",this.emptyIconElem[0].style.display="none"!==e?"none":"block",this.colorElem[0].style.backgroundColor=this.value&&this.value.color?this.value.color:"transparent"},t.prototype.handleChange=function(){this.updatePreview(),this.onChange&&"function"==typeof this.onChange&&this.onChange.call(this,{}),this.onValueChanged()},t.prototype.triggerChange=function(){this.handleChange()},t.prototype.updatePosition=function(){this.popover&&this.popover.updatePosition()},t.prototype.getValue=function(){var e=this.options,t=h({},this.value),i=t.image||"none",n=t.css={background:((e.useColor?t.color+" ":"")+(e.useImage?("none"===i?i:"url('"+(0,l.urlEncode)(wb_builder.makeRelUrl(i),!0)+"')")+" ":"")+(e.useRepeat?t.repeat+" ":"")+(e.useAttachment?t.attachment+" ":"")+(e.usePosition?t.position+" ":"")).trim()};return e.useSize&&(n["background-size"]=t.size),e.useOpacity&&(n.opacity=t.opacity/100),t},t.prototype.setValue=function(e){e||(e={}),"string"==typeof e&&(e={color:e}),void 0===e.color&&(e.color="transparent"),void 0===e.image&&(e.image="none"),void 0===e.position&&(e.position="left top"),void 0===e.attachment&&(e.attachment="scroll"),void 0===e.repeat&&(e.repeat="repeat"),void 0===e.size&&(e.size="auto auto"),void 0===e.fullWidth&&(e.fullWidth=!1),void 0===e.opacity&&(e.opacity=100),void 0===e.isVideo&&(e.isVideo=!1),void 0===e.timeStartAt&&(e.timeStartAt=null),void 0===e.timeEndAt&&(e.timeEndAt=null),this.value=e,this.updatePreview()},t.prototype.isSet=function(){return g(this.getValue())},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(e){this.setOptions(e)},t}(o.UIComponent);function g(e){if(null===e||"object"!=typeof e)return!1;var t=e.image;t&&"null"!==t&&"none"!==t||(t=null);var i=e.color;return i&&"transparent"!==i||(i=null),t||i}function f(e){var t=null;if(/youtube/i.test(e)){var i=e.split("?");if(i.length>1)for(var n=i[1].split("&"),o=0;o<n.length;o++){var s=n[o].split("=");if(s.length>1&&"v"===s[0]&&s[1]){t=s[1];break}}}else/^(?:https?:\/\/|)youtu\.be\/(.+)$/i.test(e)&&(t=RegExp.$1);return t&&(t=t.replace(/[^a-zA-Z0-9\_\-]/,"")),t}function y(e,t,i,n){if(void 0===n&&(n=!1),t)if(e&&"object"==typeof e&&e.image){var o=f(e.image);o?(b(null,t),n&&v(null,t,void 0,void 0,void 0,!0),v(o,t,e.timeStartAt,e.timeEndAt,i)):(v(null,t),b(wb_builder.makeLocalUrl(e.image),t,e.timeStartAt,e.timeEndAt,i))}else v(null,t,null,null,i),b(null,t,null,null,i)}function b(e,t,i,n,o){void 0===o&&(o=null);var s,r,a,l=t.children("video");if(e){if(l.length){if(l.get(0).src===e&&l.data("startAt")===i&&l.data("endAt")===n)return}else l=u()('<video class="wb-video" muted playsinline>'),t.append(l);l.data("startAt",i),l.data("endAt",n),l.removeClass("visible"),l.css({width:"",height:"",left:"",top:""});var c,d,h=l.get(0),p=l.data("timer");clearInterval(p),o=o||null,l.data("element",o),(y=l.data("resizer"))&&(o?o.elem.off("elementresize",y):u()(window).off("resize",y)),y=function(){setTimeout((function(){var e=l.data("ratio");if(e){var i=t.width(),n=t.height();if(c!==i||d!==n){c=i,d=n;var o=0,s=0,r=0,a=0;e>i/n?r=((o=(s=n)*e)-i)/2:e<n?a=((s=(o=i)/e)-n)/2:(o=i,s=n),l.css({width:o,height:s,left:-r,top:-a})}}}),500)},l.data("resizer",y),o?o.elem.on("elementresize",y):u()(window).on("resize",y);var m=!1;s=i,r=n,a=function(){if(!m){m=!0;var e=l.data("timer");clearInterval(e),e=setInterval((function(){h.currentTime=s,h.paused&&h.play()}),1e3*((r||h.duration)-s)),h.currentTime=s,h.play(),l.data("timer",e),l.data("ratio",l.width()/l.height());var t=l.data("resizer");t&&t()}},h.autoplay=!0,l.data("loaded",a),l.on("loadeddata",a),l.data("resizer",y),h.src=e,l.show().addClass("visible")}else{var g=l.get(0);if(l.length&&g){var f=l.data("loaded");f&&l.off("loadeddata",f),p=l.data("timer"),clearInterval(p);var y,b=l.data("element");b&&(y=l.data("resizer"))&&b.elem.off("elementresize",y),g.pause(),l.attr("src",""),l.removeClass("visible").hide()}}}function v(e,t,i,n,o,s){void 0===o&&(o=null),void 0===s&&(s=!1),wb_builder.addYoutubeAPIListener((function(){var r=t.children(".wb-youtube-video");if(e){var a=(t.attr("id")||(""+Math.random()).substring(2))+"_youtube_container";if(r.length){if(r.data("videoId")===e&&r.data("startAt")===i&&r.data("endAt")===n)return}else r=u()('<div class="wb-youtube-video"><div class="youtube" id="'+a+'"></div></div>'),t.append(r);r.removeClass("visible").show(),r.data("videoId",e),r.data("startAt",i),r.data("endAt",n),r.data("inited",!1);var l,c=r.data("timer");if(clearInterval(c),o=o||null,r.data("element",o),!r.data("resizer")){var d,h,p=o?o.elem:u()(window),m=null,g=function(){setTimeout((function(){if(m||(m=r.children("iframe.youtube")),m.length){var e=r.data("youtube");if(e){var t=p.width(),i=p.height();d===t&&h===i||(d=t,h=i,t/i>16/9?(e.setSize(t,t/16*9),m.css("left",0)):(e.setSize(i/9*16,i),m.css("left",-(m.outerWidth()-t)/2)))}}}),500)};r.data("resizer",g),o?o.elem.on("elementresize",g):u()(window).on("resize",g)}var f=function(e){r.data("ready")?e():(clearTimeout(l),l=setTimeout((function(){f(e)}),200))},y=function(e,t){void 0===t&&(t=!1);var i=e.data("startAt"),n=e.data("endAt"),o=e.data("timer"),s=e.data("youtube");i||(i=0),n||(n=null),clearInterval(o),o=setInterval((function(){s.seekTo(i),s.getPlayerState()!==YT.PlayerState.PLAYING&&s.playVideo()}),1e3*((n||s.getDuration()-.5)-i)),t&&(s.seekTo(i),s.getPlayerState()!==YT.PlayerState.PLAYING&&s.playVideo()),e.data("timer",o),e.addClass("visible")};r.data("youtube")||r.data("youtube",new YT.Player(a,{events:{playerVars:{autoplay:0,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3},onReady:function(){r.data("ready",!0)},onStateChange:function(e){e.data===YT.PlayerState.PLAYING?r.data("inited")||(y(r),r.data("inited",!0)):e.data===YT.PlayerState.ENDED&&y(r,!0)}}})),f((function(){var t=r.data("youtube"),n=r.data("resizer");t.loadVideoById({videoId:e,startSeconds:i}),t.mute(),n&&n()}))}else if(r.length){var b=r.data("timer");clearInterval(b);var v=r.data("youtube");v&&"function"==typeof v.pauseVideo&&v.pauseVideo();var _=r.data("resizer");if(_){var C=r.data("element");C?C.elem.off("elementresize",_):u()(window).off("resize",_)}r.data("inited",!1),r.data("videoId",null),r.data("startAt",null),r.data("endAt",null),r.hide(),s&&r.remove()}}))}},"./BackgroundDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundDialog:function(){return v}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./Service.ts"),a=i("./List.ts"),l=i("./BackgroundControl.ts"),c=i("./UIButton.ts"),u=i("./util/MenuList.ts"),d=i("./lib/jquery-1.11.3.min.js"),h=i.n(d),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){function e(e){this.mis={},this.id=e.id}return e.prototype.addMi=function(e){this.mis["#"+e.id]=e},e.prototype.getMis=function(){var e=[];for(var t in this.mis)e.push(this.mis[t]);return e},e}(),g=function(){function e(){this.pages={}}return e.prototype.addPage=function(e){this.pages["#"+e.id]=e},e.prototype.removeAllPages=function(){this.pages={}},e.prototype.getPage=function(e){return this.pages["#"+e]?this.pages["#"+e]:null},e}(),f=function(){this.pages=new g},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.buildInit=function(t,i){var n=this;t.itemType=r.Service.menu.MenuItem,t.editable=!1,t.select=function(e,t,i){return n.onSelect(e,t,i)},t.add=function(e,t,i){return n.onAdd(e,t,i)},e.prototype.buildInit.call(this,t,i),this._control.setHeight(300)},t.prototype.updateListIcon=function(e,t,i){var n=!1,o="external"!==t.type&&t.targetId?e.data.pages[t.targetId]:e.data.defBlock;for(var s in o)if(o.hasOwnProperty(s)&&"object"==typeof o[s]&&null!==o[s]){var r=o[s];if((0,l.isSet)(r.background)||(0,l.isSet)(r.background2)){n=!0;break}}this.setItemIcon(i,"internal"===t.type||"external"===t.type||"anchor"===t.type||"empty"===t.type?"glyphicon glyphicon-share-alt":"popup"===t.subType?"glyphicon glyphicon-modal-window":"glyphicon glyphicon-folder"+(n?"-close":"-open"))},t.prototype.onSelect=function(e,t,i){var n=this.getLastSelected(),o=this.getLastSelectedLi();n&&o&&this.updateListIcon(e,n,o),this.updateListIcon(e,t,i),e.data.page="external"!==t.type&&t.targetId?t.targetId:null;var s=e.data.getCurrent();e.bgPage.setValue(s.template.background),e.bg2Page.setValue(s.template.background2),e.bg2Page.isSet()?(e.moreLine.setVisible(!1),e.moreInfo.setVisible(!0)):(e.moreLine.setVisible(!0),e.moreInfo.setVisible(!1))},t.prototype.onAdd=function(e,t,i){this.updateListIcon(e,t,h()(i))},t}(a.List),b=function(){function e(e,t){for(var i in this.page=null,this.pages={},this.defBlock={template:{background:e.bgSite,background2:e.bg2Site},popupMode:!1,popupWidth:null,popupHeight:null},t){var n=t[i];this.pages[n.id]={template:{background:n.background,background2:n.background2},popupMode:n.popupMode,popupWidth:n.popupWidth,popupHeight:n.popupHeight}}}return e.prototype.getCurrent=function(){return this.page?this.pages[this.page]:this.defBlock},e}(),v=function(e){function t(){var t=e.call(this,__("Background"),!0,null,!0)||this;return t.dialog.addClass("wb-modal-settings"),t.setMinBodyHeight(300),t.fields=new f,t.setContent(t.buildUI(),!0),t.addButton(__("Cancel")),t.addButton(__("Apply"),(function(){return t.applyChanges()}),!0),t.onShown=function(){t.fields.bgPage&&t.fields.bgPage.updatePosition(),t.fields.bg2Page&&t.fields.bg2Page.updatePosition()},t}return p(t,e),t.prototype.buildUI=function(){var e=this,t=this.fields,i=0,n=0;return new r.Service.UIBuilder({type:"HorizontalLayout",columnWeights:[4,8],children:[{type:y,id:"list"},{type:"VerticalLayout",children:[{type:"FlowLayout",children:[{type:"VerticalLayout",css:{maxWidth:360},children:[{type:"Label",id:"mainTitle",text:__("Site Background")},{type:l.BackgroundControl,id:"bgPage",useAttachment:!0,useSize:!0,useFullWidth:!1,useOpacity:!0,allowVideo:!0,change:function(t){i&&clearTimeout(i),i=setTimeout((function(){t.data.getCurrent().template.background=t.bgPage.getValue()}),50),r.Service.HelpSystemPlayer.notify("config-background-prop-bgPage-change",e)}}]}]},{type:"Button",id:"moreLine",buttonStyle:c.UIButton.STYLE_LINK,styleClass:"more-line",text:__("Add other Background over this?"),click:function(){return this.setVisible(!1),t.moreInfo.setVisible(!0),!1}},{type:"VerticalLayout",id:"moreInfo",css:{marginTop:15},children:[{type:"Label",text:__("Secondary background")},{type:l.BackgroundControl,id:"bg2Page",change:function(e){n&&clearTimeout(n),n=setTimeout((function(){e.data.getCurrent().template.background2=e.bg2Page.getValue()}),50)}}]}]}]},this.fields)},t.prototype.applyChanges=function(){this.hide();var e=this.fields;wb_builder.bodyInstance.bgSite=e.data.defBlock.template.background,wb_builder.bodyInstance.bg2Site=e.data.defBlock.template.background2;var t=wb_builder.bodyInstance,i=wb_builder.site;for(var n in e.data.pages){var o=parseInt(n,10),s=e.data.pages[o],a=i.getPage(o);a&&(a.background=s.template.background,a.background2=s.template.background2)}t.updateStyle(),wb_builder.showLayout&&wb_builder.highlightLayout(wb_builder.showLayout),wb_builder.setPageModified(!0),r.Service.HelpSystemPlayer.notify("config-background-apply",this)},t.prototype.loadData=function(){var e=this.fields,t=wb_builder.site.pages,i=wb_builder.bodyInstance;e.data=new b(i,t);var n,o=!1,s=!0;e.list.removeAllItems(),e.list.addItem(e.defaultInf={id:-1,type:"default",name:__("Default (for all pages)"),serialize:function(){return this}},!1,"glyphicon glyphicon-folder-open");for(var r=u.buildMenuStruct(!1,!0),a=!0,l=0;l<r.length;l++){var c=r[l];a?a=!1:e.list.addSeparator();for(var d=0;d<c.items.length;d++){var h=c.items[d];if(h.miElem&&"internal"!==h.type){s=!1;for(var p=e.list.addItem(h.miElem,!1,h.isLink()?"glyphicon glyphicon-share-alt":null,h.isLink()),g=20,f=h.lvl;f>0;)f--,g+=20;p.css({marginLeft:g+"px"}),o||"external"===h.type||h.pageId!=wb_builder.pageId||(o=!0,p.trigger("click"))}}}for(n in e.pages.removeAllPages(),t)e.pages.addPage(new m(t[n].serialize()));!s&&o||e.list.selectFirst()},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t&&!i&&(n||this.loadData(),r.Service.HelpSystemPlayer.notify("config-background-open",this)),e.prototype.setVisible.call(this,t,i,n)},t}(s())},"./BigList.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BigList:function(){return c},BigListItem:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(){function e(e,t){void 0===t&&(t=!1),this.title="",this.description="",this.thumbnail="",this.altText="",this.selected=!1,this.data=null,this.populate(e),this.createElem(t)}return e.prototype.isSelected=function(){return this.selected},e.prototype.serialize=function(){return{title:this.title,description:this.description,thumbnail:this.thumbnail,altText:this.altText,selected:this.isSelected(),data:this.data}},e.prototype.populate=function(e){e.title&&(this.title=e.title),e.description&&(this.description=e.description),e.thumbnail&&(this.thumbnail=e.thumbnail),e.altText&&(this.altText=e.altText),e.data&&(this.data=e.data)},e.prototype.createElem=function(e){var t=this;this.elem=s()('<div class="wb-big-list-item"><div class="wrapper"><div class="col col-left">'+(e?'<div class="check"><input type="checkbox" /></div>':"")+'<div class="thumbnail"></div></div><div class="col col-middle"><div class="title">'+this.title+(this.description?'<small class="description">'+this.description+"</small>":"")+"</div>"+(this.altText?'<div class="alt-text">'+this.altText+"</div>":"")+'</div><div class="col col-right"><button class="btn btn-default"><span class="fa fa-pencil"></span></button></div></div></div>'),this.thumbnail?this.elem.find(".thumbnail").css("background-image",'url("'+this.thumbnail+'")'):this.elem.find(".thumbnail").append(s()('<span class="glyphicon glyphicon-picture">')),e&&(this.input=this.elem.find("input"),this.input.on("change",(function(e){t.selected=t.input.is(":checked")})))},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=[],t.checkable=!0,t}return a(t,e),t.prototype.buildInit=function(e,t){this._elem.addClass("wb-big-list"),this.listElem=s()('<div class="list">'),this.noItemsElem=s()('<div class="no-items-msg">').hide(),e.noItemsMessage&&this.noItemsElem.html(e.noItemsMessage),e.click&&"function"==typeof e.click&&(this.onClick=e.click),e.select&&"function"==typeof e.select&&(this.onSelect=e.select),this.checkable=!!e.checkable,this.checkable&&this._elem.addClass("wb-big-list-checkable"),this._elem.append(this.listElem),this._elem.append(this.noItemsElem),this.list=[]},t.prototype.setValue=function(e){this.removeAllItems();for(var t=0;t<e.length;t++)this.addItem(e[t])},t.prototype.getSelected=function(){for(var e=[],t=0,i=this.list;t<i.length;t++){var n=i[t];n.isSelected()&&e.push(n.serialize())}return e},t.prototype.getSelectedCount=function(){for(var e=0,t=0,i=this.list;t<i.length;t++)i[t].isSelected()&&e++;return e},t.prototype.addItem=function(e){var t=this,i=new l(e,this.checkable);i.elem.on("click",(function(e){e.stopImmediatePropagation(),s()(e.target).is("input")||"function"==typeof t.onClick&&t.onClick.call(t,i.serialize())})),i.elem.find("input").on("change",(function(e){e.stopImmediatePropagation(),"function"==typeof t.onSelect&&t.onSelect.call(t,i.serialize())})),this.noItemsElem.hide(),this.listElem.append(i.elem),this.list.push(i)},t.prototype.removeItem=function(e){for(var t=0;t<this.list.length;t++)t===e&&(this.list[t].elem.detach(),this.list[t].elem.remove(),this.list.splice(t,1));this.list.length||this.noItemsElem.show()},t.prototype.getValue=function(){for(var e=[],t=0,i=this.list;t<i.length;t++){var n=i[t];e.push(n.serialize())}return e},t.prototype.removeAllItems=function(){for(var e=0,t=this.list;e<t.length;e++){var i=t[e];i.elem.detach(),i.elem.remove()}this.list=[],this.listElem.empty(),this.noItemsElem.show()},t}(r.UIComponent)},"./Body.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Body:function(){return b}});var n=i("./jquery-builder.ts"),o=i("./core/BuilderConfig.ts"),s=i("./Service.ts"),r=i("./Element.ts"),a=i("./ContextMenu.ts"),l=i("./BuilderEvent.ts"),c=i("./CommonTypes.ts"),u=i("./CanvasGrid.ts"),d=i("./LayoutElement.ts"),h=i("./util/WindowAutoScrollUtil.ts"),p=i("./BackgroundControl.ts"),m=i("./element/Controls.ts"),g=i("./element/ZIndexHandle.ts"),f=i("./UserInput.ts");function y(e,t,i){void 0===i&&(i=!1);for(var n=0,o=e.getChildren();n<o.length;n++){var s=o[n];t.push(s),i&&"LayoutElement"==s.getClassType()&&y(s,t,i)}}var b=function(){function e(e,t){var i=this;this.elem=t,this.blocks={},this.children=[],this.menu=null,this.pagesMenu=null,this.noBackground=!1,this.cssRuleIndexes={a:-1,b:-1,c:-1},this.mouseUpEventHandler=null,this.clickEventHandler=null,this.locTip=null,this.zIndexHandle=new g.ZIndexHandle(this,1e3),this.stickyElements=[],this.stickyInvalid=!1,this.stickyUpdateCallback=null;var o=wb_builder.site.getPage(wb_builder.pageId),r=o&&o.popupMode;this.site=(0,n.default)('<div id="site">').addClass("wb-site").appendTo(t),this.updateLanguageDirection(),this.siteCover=(0,n.default)("<div>").addClass("site_cover").appendTo(this.site),this.siteRoot=(0,n.default)("<div>").addClass("root wb-layout-vertical").appendTo(this.site),this.secBg=(0,n.default)('<div class="wb_sbg"></div>'),this.siteRoot.append(this.secBg),r&&(this.noBackground=!0,this.site.addClass("wb-center-content wb-pp-mode")),this.bgSite=e.content.bgSite?e.content.bgSite:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this.bg2Site=e.content.bg2Site?e.content.bg2Site:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this.blocksData=e.content.blocksData?e.content.blocksData:{},this.grid=new u.CanvasGrid(this),this.grid.fromCookie(wb_builder.getCookie("wb_showgrid"));var c="",d=0;this.elem.on("mouseup",this.mouseUpEventHandler=function(e){(0,m.isDoingResize)()&&(c=e.type,d=Date.now())}).on("click",this.clickEventHandler=function(e){"click"==e.type&&("mouseup"==c||"touchend"==c)&&Date.now()-d<100||(s.Service.group.groupEdit(null),f.UserInput.blockNextMouseUpDeselect||s.Service.element.unselectAll(),f.UserInput.blockNextMouseUpDeselect=!1,(0,a.hideAllContextMenus)(),e.stopPropagation())}),l.GlobalEvents.on("block.main.updatesize",(function(){var e;(e=i.getContentBlock("wb_main"))&&e.updateSize()})),this.initContextMenu(),this.updateStyle(),this.stickyInit()}return e.prototype.cleanup=function(){this.elem&&(this.mouseUpEventHandler&&this.elem.off("mouseup",this.mouseUpEventHandler),this.clickEventHandler&&this.elem.off("click",this.clickEventHandler))},e.prototype.showInfoTip=function(e,t,i,o,s){var r=this;if(void 0===o&&(o="right"),void 0===s&&(s="down"),!this.locTip){this.locTip=(0,n.default)('<div class="wb_loctip wb-ethereal"></div>');var a=(0,n.default)(document.body);a.ready((function(){r.locTip&&a.append(r.locTip)}))}if(this.locTip.html(e).css({display:"block",left:t,top:i}),"right"!==o||"down"!==s){var l=this.locTip[0].getBoundingClientRect();"left"===o?t-=l.width:"center"===o&&(t-=l.width/2),"up"===s?i-=l.height:"center"===s&&(i-=l.height/2),this.locTip.css({left:t,top:i})}h.WindowAutoScrollUtil.fitHtmlElementIntoWindow(this.locTip)},e.prototype.hideInfoTip=function(){this.locTip&&this.locTip.css("display","none")},e.prototype.getCanvasClientRect=function(){return this.site[0].getBoundingClientRect()},e.prototype.setDebugLinesVisible=function(e){for(var t in this.blocks)this.blocks[t].setDebugLinesVisible(e)},e.prototype.getSiteTreeNodeProperties=function(){return{icon:null,name:"Page"}},e.prototype.getSiteTreeNodeChildren=function(){return this.getChildren()},e.prototype.getSiteTreeNodeMenu=function(){return this.menu},e.prototype.isSelected=function(){return!1},e.prototype.setSelected=function(e){},e.prototype.setLandingLock=function(e){for(var t in this.blocks)"wb_header"!==this.blocks[t].id&&"wb_footer"!==this.blocks[t].id||this.blocks[t].setLocked(e)},e.prototype.enableDropZones=function(e){for(var t in this.blocks)this.blocks[t].enableDropZone(e)},e.prototype.switchMode=function(e,t,i){for(var n in void 0===i&&(i=!1),this.blocks)this.blocks[n].switchMode(e,t,i)},e.prototype.getBlockData=function(e){return this.blocksData&&this.blocksData[e]?this.blocksData[e]:null},e.prototype.useBlockDataByDefault=function(e){return this.blocksData&&this.blocksData[e]&&this.blocksData[e].useDefault},e.prototype.onBeforeSwitchLanguage=function(){for(var e in this.blocks)"function"==typeof this.blocks[e].onBeforeSwitchLanguage&&this.blocks[e].onBeforeSwitchLanguage()},e.prototype.onSwitchLanguage=function(e){for(var t in this.updateLanguageDirection(e),this.blocks)"function"==typeof this.blocks[t].onSwitchLanguage&&this.blocks[t].onSwitchLanguage(e)},e.prototype.updateLanguageDirection=function(e){var t,i=wb_builder.site.rtl;e&&(t=o.wbConfig.getLanguageByCode(e))&&(i=t.rtl),this.site.attr({dir:i?"rtl":"ltr"})},e.prototype.__destruct=function(){var e;for(var t in this.stickyDeInit(),this.blocks)"function"==typeof this.blocks[t].__destruct&&this.blocks[t].__destruct(!0);this.siteCover.detach(),this.site.empty().append(this.siteCover),this.site.detach(),null===(e=this.menu)||void 0===e||e.dispose()},e.prototype.serialize=function(){return{class:"Body",content:{blocksData:Object.assign({},this.blocksData),bgSite:this.bgSite,bg2Site:this.bg2Site}}},e.prototype.addElement=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),t instanceof d.LayoutElement&&!e)this.blocks[t.id]=t,this.children.push(t),t.setLayoutConstraints(c.ChildrenLayoutType.Vertical,n),t.updateStyle(n),this.siteRoot.append(t.elem),t instanceof d.LayoutElement&&t.updateHierarchyLevel(!0,n);else{var o=e;if(this.blocks[o]||"wb_left"!==o||(o="wb_right"),this.blocks[o]||"wb_right"!==o||(o="wb_left"),this.blocks[o]||(o="wb_main"),this.blocks[o]||(o="wb_content"),!this.blocks[o])for(var s in this.isEmpty()&&this.iniDefaultBlock(),this.blocks){o=s;break}this.blocks[o]&&this.blocks[o].addChild(t,i,n)}},e.prototype.addChild=function(e,t,i,n,o){var s=n instanceof r.Element&&n?this.children.indexOf(n):-1;if(n&&s<0)return!1;if(this.children.indexOf(e)>=0&&(!n||n===e))return!1;var a=e.getParent();return!!(a||n&&n!==e)&&(a?a.removeChild(e):e instanceof d.LayoutElement&&(this.removeChild(e),s=n instanceof r.Element&&n?this.children.indexOf(n):-1),n?o?n.elem.after(e.elem):n.elem.before(e.elem):this.siteRoot.append(e.elem),this.blocks[e.id]=e,e.setParent(null),s>=0?this.children.splice(s+(o?1:0),0,e):this.children.push(e),e.setLayoutConstraints(c.ChildrenLayoutType.Vertical),i||e.updateStyle(),i||l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent),!0)},e.prototype.removeChild=function(e,t){void 0===t&&(t=!1);var i=this.children.indexOf(e);i>=0&&(this.children.splice(i,1),delete this.blocks[e.id],e.elem.detach()),t||l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent)},e.prototype.iniDefaultBlock=function(){var e=new d.LayoutElement({class:"LayoutElement",id:"wb_main"});e.setLayoutConstraints(c.ChildrenLayoutType.Vertical),this.addElement("",e,!0,!0)},e.prototype.isEmpty=function(){for(var e in this.blocks)return!1;return!0},e.prototype.zReset=function(){for(var e in this.zIndexHandle.changeLayer(),this.blocks)this.blocks[e].zReset()},e.prototype.getContentBlock=function(e){return this.blocks[e]?this.blocks[e]:null},e.prototype.getContentBlocks=function(){var e=[];for(var t in this.blocks)this.blocks.hasOwnProperty(t)&&e.push(this.blocks[t]);return e},e.prototype.getContentElements=function(e){void 0===e&&(e=!1);var t=[];for(var i in this.blocks)y(this.blocks[i],t,e);return t},e.prototype.getChildren=function(){return function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],this.children,!0)},e.prototype.traverseElements=function(e){this.traverseElementsInternal(this.children,!0,!1,"",e)},e.prototype.traverseElementsInternal=function(e,t,i,n,o){for(var s=0,r=e;s<r.length;s++){var a=r[s];t&&(n=a.id);var l=o(a,t,i,n);if(l===c.TraverseControl.Break)return!1;if(l!==c.TraverseControl.SkipChildren){if(a instanceof d.LayoutElement){var u=a.backgroundElement;if(u&&!this.traverseElementsInternal([u],!1,!0,n,o))return!1}if("getChildren"in a&&!this.traverseElementsInternal(a.getChildren(),!1,!1,n,o))return!1}}return!0},e.prototype.updateSize=function(e){console.warn("Body.updateSize() is deprecated.");for(var t=e.elem;t.length&&"site"!==t.attr("id")&&(t=t.parent());){var i=0;t.children(".hbox").css("height",""),t.children().each((function(){if(!((0,n.default)(this).hasClass("site_cover")||(0,n.default)(this).hasClass("wb-active-zone")||(0,n.default)(this).hasClass("wb_sbg")||(0,n.default)(this).hasClass("wb_site_background"))){var e=1*((0,n.default)(this).css("minHeight")+"").replace("px",""),t=(0,n.default)(this).outerHeight(!0),o=(0,n.default)(this).position().top+(e&&e>t?e:t);o>i&&(i=o)}})),t.css("height",i+"px"),t.children(".hbox").css("height",i+"px")}for(var o in this.blocks){var s=this.blocks[o];s.setSize(null,s.elem.height())}},e.prototype.applySiteBackground=function(e){if(e&&"object"==typeof e){var t=this.site.children(".wb_site_background"),i=this.site.children(".wb_site_video_background");if(e.isVideo&&e.image)t.hide(),i.length||(i=(0,n.default)('<div class="wb_site_video_background wb_video_background" id="wb_site_video_background">'),this.site.prepend(i)),i.show(),(0,p.runVideoByBackground)(e,i),this.site.css("background-color",""+e.color),"number"==typeof e.opacity&&i.css("opacity",e.opacity/100);else if(e.css&&"object"==typeof e.css){(0,p.runVideoByBackground)(null,i),i.hide(),t.length||(t=(0,n.default)('<div class="wb_site_background">').css({position:"absolute",width:"100%",height:"100%",top:0,left:0}),this.site.prepend(t)),t.show();var o=n.default.extend(!0,{},e.css);o.background=o.background.replace(e.color,"transparent"),t.css(o),this.site.css("background-color",""+e.color)}}},e.prototype.updateStyle=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.noBackground)this.applySiteBackground({color:"transparent",css:{background:"transparent"}}),this.secBg.css({background:"transparent"});else{var i,o,r=wb_builder.site.getPage(wb_builder.pageId),a=r&&r.background&&(r.background.image&&"none"!==r.background.image||r.background.color&&"transparent"!==r.background.color)?n.default.extend(!0,{},r.background):n.default.extend(!0,{},this.bgSite),l=a.css;l.background&&a.image&&"none"!==a.image&&(l.background=l.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(a.image,!0)+'")')),l.background&&"fixed"===a.attachment&&(o=a.position.split(" "))&&2===o.length&&"top"===o[1]&&(i=o[0]+" "+wb_builder.body.offset().top+"px",l.background=l.background.replace(a.position,i),a.position=i),this.applySiteBackground(a);var c=r&&r.background2&&(r.background2.image&&"none"!==r.background2.image||r.background2.color&&"transparent"!==r.background2.color)?n.default.extend(!0,{},r.background2):n.default.extend(!0,{},this.bg2Site);(l=c.css).background&&c.image&&"none"!==c.image&&(l.background=l.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(c.image,!0)+'")')),l.background&&"fixed"===c.attachment&&(o=c.position.split(" "))&&2===o.length&&"top"===o[1]&&(i=o[0]+" "+wb_builder.body.offset().top+"px",l.background=l.background.replace(c.position,i)),this.secBg.css(l)}if(this.site.css("min-width",s.Service.modeManager.getMinWidth()),e)for(var u in this.blocks)this.blocks[u].updateStyle(!0)},e.prototype.cacheBounds=function(){for(var e in this.blocks)this.blocks[e].cacheBounds()},e.prototype.initContextMenu=function(){var e=this;this.menu=new a.ContextMenu("wb_body_contextmenu"),this.pagesMenu=new a.ContextMenu,wb_builder.isComposer||this.menu.addItem("comConfig",__("Background"),(function(){wb_builder.site.changeBackground()}),!1,!1,null,"glyphicon glyphicon-cog"),this.menu.onShow=function(t,i){var n=new l.ContextMenuEvent(t,i?i.pageX:0,i?i.pageY:0,e);l.GlobalEvents.triggerEvent("contextmenu.show",n)}},e.prototype.stickyInit=function(){var e=this;if(!this.stickyUpdateCallback){var t,i=0,o=0,s=function(){var n=e.stickyUpdate();n!==t?(o=0,i=requestAnimationFrame(s)):i=++o<=2?requestAnimationFrame(s):0,t=n};this.stickyUpdateCallback=function(){i&&cancelAnimationFrame(i),t="",o=0,i=requestAnimationFrame(s)},(0,n.default)(window).on("orientationchange resize scroll",this.stickyUpdateCallback),l.GlobalEvents.on("modes.changed",this.stickyUpdateCallback),l.GlobalEvents.on("site.structure.changed",this.stickyUpdateCallback),l.GlobalEvents.on("modal.show",this.stickyUpdateCallback),l.GlobalEvents.on("modal.hide",this.stickyUpdateCallback);for(var r=250;r<5e3;r+=250)setTimeout(this.stickyUpdateCallback,r)}},e.prototype.stickyDeInit=function(){this.stickyUpdateCallback&&((0,n.default)(window).off("orientationchange resize scroll",this.stickyUpdateCallback),l.GlobalEvents.off("modes.changed",this.stickyUpdateCallback),l.GlobalEvents.off("site.structure.changed",this.stickyUpdateCallback),l.GlobalEvents.off("modal.show",this.stickyUpdateCallback),l.GlobalEvents.off("modal.hide",this.stickyUpdateCallback),this.stickyUpdateCallback=null,this.siteRoot.css({paddingLeft:"",paddingTop:"",paddingRight:"",paddingBottom:""}))},e.prototype.registerStickyElement=function(e){this.stickyElements.push(e),this.stickyInvalidate()},e.prototype.unregisterStickyElement=function(e){var t=this.stickyElements.indexOf(e);t>=0&&(this.stickyElements.splice(t,1),this.stickyInvalidate())},e.prototype.stickyInvalidate=function(){var e=this;this.stickyInvalid||(this.stickyInvalid=!0,requestAnimationFrame((function(){return e.stickyUpdate()})))},e.prototype.stickyUpdate=function(){this.stickyInvalid=!1;var e=wb_builder.getViewportRect();if(!e||e.width<=0||e.height<=0)return"";e.right=e.left+e.width,e.bottom=e.top+e.height;for(var t={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},i=0,n=this.stickyElements;i<n.length;i++){var o=n[i],s=(o.stickyAlign||"center top").split(" "),r=s[0],a=s[1],l=o.getBoundingClientRect();l.top<=e.top&&l.bottom>=e.bottom?"left"===r?t.paddingLeft=Math.max(t.paddingLeft,Math.round(l.right-e.left)):"right"===r&&(t.paddingRight=Math.max(t.paddingRight,Math.round(e.right-l.left))):l.left<=e.left&&l.right>=e.right&&("top"===a?t.paddingTop=Math.max(t.paddingTop,Math.round(l.bottom-e.top)):"bottom"===a&&(t.paddingBottom=Math.max(t.paddingBottom,Math.round(e.bottom-l.top))))}this.siteRoot.css(t);var c=this.getContentBlock("wb_main");if(c){var u=e.height-t.paddingTop-t.paddingBottom;for(var d in this.blocks)if(this.blocks.hasOwnProperty(d)){var h=this.blocks[d];if(!h.isSticky){var p=h.individualMargin;u-=("wb_main"===d?0:h.getHeightInPixels())+(p?p.marginTop+p.marginBottom:0)}}c.forceMinHeightCss(Math.max(0,u))}return"".concat(e.left,"|").concat(e.top,"|").concat(e.right,"|").concat(e.bottom,"|").concat(e.width,"|").concat(e.height)},e.prototype.getCurrentPaddingTop=function(){return parseInt(this.siteRoot.css("padding-top"))||0},e}()},"./BorderControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BorderControl:function(){return E},applyRadiusValue:function(){return L},buildCss:function(){return w},getBorderWidth:function(){return T},toRadiusValue:function(){return P}});var n,o=i("./UIComponent.ts"),s=i("./SizeSelector.ts"),r=i("./ColorPicker.ts"),a=i("./Label.ts"),l=i("./VerticalLayout.ts"),c=i("./ui/ThumbEditorControl.ts"),u=i("./ui/Popover.ts"),d=i("./FlowLayout.ts"),h=i("./ui/LineStyleControl.ts"),p=i("./CheckBox.js"),m=i.n(p),g=i("./util/ChangeUpdateUtil.ts"),f=i("./lib/jquery-1.11.3.min.js"),y=i.n(f),b=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),v=function(){return v=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)};function _(e){var t="";for(var i in e)t+=i+": "+e[i]+"; ";return t.substring(0,t.length-1)}function C(e,t){return null==e?[t,t,t,t]:"object"!=typeof e?[e,e,e,e]:"length"in e?0===e.length?[t,t,t,t]:1===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[0],e[1],e[0],e[1]]:3===e.length?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]:[e.top,e.right,e.bottom,e.left]}function w(e,t,i,n,o,s){var r=e||{},a={differ:!!r.differ&&r.differ,differRadius:void 0!==r.differRadius?!!r.differRadius:!!r.differ,color:r.color?C(r.color,null):"#000000",style:r.style?C(r.style,"none;"):"none",weight:r.weight?C(r.weight,0):0,radius:void 0===r.radius||null===r.radius?null:r.radius?C(r.radius,0):0,css:{}};return t&&(a.differ=t.getValue()),i&&(a.color=[i[0].getValue(),i[1].getValue(),i[2].getValue(),i[3].getValue()]),n&&(a.style=[n[0].getValue(),n[1].getValue(),n[2].getValue(),n[3].getValue()]),o&&(a.weight=[o[0].getValue(),o[1].getValue(),o[2].getValue(),o[3].getValue()]),s&&(a.radius=[s[0].getValue(),s[1].getValue(),s[2].getValue(),s[3].getValue()]),a.differ?(a.css["border-top"]=O(a.weight||0,0)+"px "+O(a.style||"none",0)+" "+O(a.color||"#000",0),a.css["border-right"]=O(a.weight||0,1)+"px "+O(a.style||"none",1)+" "+O(a.color||"#000",1),a.css["border-bottom"]=O(a.weight||0,2)+"px "+O(a.style||"none",2)+" "+O(a.color||"#000",2),a.css["border-left"]=O(a.weight||0,3)+"px "+O(a.style||"none",3)+" "+O(a.color||"#000",3)):a.css.border=O(a.weight||0,-1)+"px "+O(a.style||"none",-1)+" "+O(a.color||"#000",-1),a.differRadius?void 0!==a.radius&&null!==a.radius&&(a.css["border-radius"]=a.css["-webkit-border-radius"]=a.css["-moz-border-radius"]=O(a.radius||0,0)+"px "+O(a.radius||0,1)+"px "+O(a.radius||0,2)+"px "+O(a.radius||0,3)+"px"):void 0!==a.radius&&null!==a.radius&&(a.css["border-radius"]=a.css["-webkit-border-radius"]=a.css["-moz-border-radius"]=O(a.radius||0,-1)+"px"),a.cssRaw=_(a.css),y().extend(!0,{},a)}function T(e,t){return"none"===("object"==typeof e.style?e.differ?e.style[t]:e.style[0]:e.style)?0:1*("object"==typeof e.weight?e.differ?e.weight[t]:e.weight[0]:e.weight)}var E=function(e){function t(t,i,n){void 0===t&&(t="bottom"),void 0===i&&(i=!1),void 0===n&&(n=!0);var o=e.call(this)||this;return o.absPopover=!1,o.placement="bottom",o.showRadius=!1,o.noTransparent=!0,o.onChange=null,o.popover=null,o.value=w(null),o.configSuplier=null,o.thumbCtrl=(new c.ThumbEditorControl).onEdit((function(){return o.edit()})).onRemove((function(){return o.clear()})),o._elem.addClass("wb-border-controll").append(o.thumbCtrl.getElem()),o.showRadius=i||o.showRadius,o.noTransparent=null!==n?n:o.noTransparent,o.setPlacement(t||o.placement,!0),o}return b(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),e.placement&&this.setPlacement(e.placement),"showRadius"in e&&this.setShowRadius(!!e.showRadius),"noTransparent"in e&&this.setNoTransparent(!!e.noTransparent),"absPopover"in e&&this.setAbsPopover(!!e.absPopover),this.configSuplier="function"==typeof e.configSuplier?e.configSuplier:null,"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)})},t.prototype.destroy=function(){this.popover&&this.popover.dispose(),e.prototype.destroy.call(this)},t.prototype.edit=function(){var e=this;if(this.popover||(this.popover=new I(this.thumbCtrl.getElem(),(function(t){e.value=w(y().extend({},t)),e.updatePreview(),e._triggerOnChange()})),this.popover.setNoRadius(!this.showRadius),this.popover.setNoTransparent(this.noTransparent)),this.popover.isVisible())this.popover.setVisible(!1);else{var t="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;this.popover.edit(this.value,t||{width:200,height:200})}},t.prototype.clear=function(){this.value=w({weight:0,style:"none",color:"#000000"}),this.updatePreview(),this._triggerOnChange()},t.prototype._triggerOnChange=function(){"function"==typeof this.onChange&&this.onChange.call(this),this.onValueChanged()},t.prototype.setOnChange=function(e){this.onChange=e},t.prototype.setPlacement=function(e,t){void 0===t&&(t=!1),(this.placement==e||t)&&(this.placement=e)},t.prototype.setNoTransparent=function(e){this.noTransparent=e,this.popover&&this.popover.setNoTransparent(e)},t.prototype.setShowRadius=function(e){this.showRadius=e,this.popover&&this.popover.setNoRadius(!e)},t.prototype.setAbsPopover=function(e){this.absPopover=e},t.prototype.getValue=function(){return w(y().extend({},this.value))},t.prototype.setValue=function(e){this.value=w(y().extend({},e)),this.updatePreview()},t.prototype.updatePreview=function(){R(this.value,this.thumbCtrl.getPreviewElem())},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(e){"noTransparent"in e&&this.setNoTransparent(!!e.noTransparent),"showRadius"in e&&this.setShowRadius(!!e.showRadius),"absPopover"in e&&this.setAbsPopover(!!e.absPopover),this.configSuplier="function"==typeof e.configSuplier?e.configSuplier:null},t}(o.UIComponent),I=function(e){function t(t,i){var n=e.call(this,t,__("Border"))||this;n.onChange=i,n.value=null,n.config={width:200,height:200},n.selector=new x((function(e,t,i){return n.selectComponent(e,t,i)})),n.color=(new r.ColorPicker).setNoTransparent(!0).setOnChange((function(){return n.onChangeColor()})),n.width=(new s.SizeSelector).setMinValue(0).setUnits("px").setUnitsVisible(!0).setSpinnerVisible(!1).setNoRepeat(!0).on("change keyup",(function(e){return n.onChangeWidth(!(!e||"keyup"!=e.type))})),n.radius=(new s.SizeSelector).setMinValue(0).setUnits("px").setUnitsVisible(!0).setSpinnerVisible(!1).setNoRepeat(!0).on("change keyup",(function(e){return n.onChangeRadius(!(!e||"keyup"!=e.type))})),n.style=new h.LineStyleControl((function(){return n.onChangeStyle()})).setUseNone(!0),n.borderStuff=new l.VerticalLayout,n.radiusStuff=new l.VerticalLayout,n.diffBorders=new(m())(__("Use different borders")).on("change",(function(){return n.onChangeDiffBorders()})),n.diffCorners=new(m())(__("Use different corners")).on("change",(function(){return n.onChangeDiffCorners()})),n.presets=new S((function(e){if(n.value){var t="function"==typeof e?e(n.config):e,i=n.diffCorners.getValue()?n.idxCorner:-1;n.value.radius=D(n.value.radius||0,i,t),n.radius.setValue(O(n.value.radius,i)),n.handleChange()}})),n.idxBorder=-1,n.idxCorner=-1,n.waitToUpdateWidth=new g.ChangeUpdateState((function(){return n.onChangeWidth(!1)}),void 0,500),n.waitToUpdateRadius=new g.ChangeUpdateState((function(){return n.onChangeRadius(!1)}),void 0,500);var o=(new l.VerticalLayout).setSpacing(12).addAllChildren([(new d.FlowLayout).setSpacing("full").addAllChildren([n.selector,(new l.VerticalLayout).css({minWidth:166}).addAllChildren([n.borderStuff.setSpacing(11).addAllChildren([(new d.FlowLayout).setSpacing("full").addAllChildren([k(__("Width"),n.width),k(__("Color"),n.color)]),k(__("Style"),n.style)]),n.radiusStuff.setSpacing(11).addAllChildren([k(__("Radius"),n.radius),k(__("Style"),n.presets)])])]),(new l.VerticalLayout).setSpacing(10).addAllChildren([n.diffBorders,n.diffCorners])]);return n.setContent(o.getElem()),n}return b(t,e),t.prototype.dispose=function(){this.selector.destroy(),this.color.destroy(),this.width.destroy(),this.radius.destroy(),this.style.destroy(),e.prototype.dispose.call(this)},t.prototype.setVisible=function(t){t||this.color.hidePicker(),e.prototype.setVisible.call(this,t)},t.prototype.onBodyClick=function(){this.color.hidePicker()},t.prototype.updatePreview=function(){this.value&&R(this.value,this.selector.getPreviewElem())},t.prototype.edit=function(e,t){this.value=e,t&&(this.config=t),this.selectComponent(0,-1),this.diffBorders.setValue(e.differ||!1),this.diffCorners.setValue(void 0!==e.differRadius?e.differRadius||!1:e.differ||!1),this.selector.select(0,-1),this.selector.setDiffBorders(this.diffBorders.getValue()),this.selector.setDiffCorners(this.diffCorners.getValue()),this.setVisible(!0),this.updatePreview()},t.prototype.handleChange=function(){this.value&&(this.value.differ=this.diffBorders.getValue(),this.value.differRadius=this.diffCorners.getValue()),this.onChange.call(this,this.value),this.updatePreview()},t.prototype.onChangeColor=function(){this.value&&(this.value.color=D(this.value.color,this.diffBorders.getValue()?this.idxBorder:-1,this.color.getValue()),this.handleChange())},t.prototype.onChangeWidth=function(e){if(this.value){var t=this.diffBorders.getValue()?this.idxBorder:-1,i=this.width.getValue(),n=O(this.value.weight,t);if(e){if(n==i)return;(0,g.waitForChangeEndToUpdate)(this.waitToUpdateWidth)}else{this.value.weight=D(this.value.weight,t,i);var o=O(this.value.style,t);O(this.value.weight,t)>0&&"none"==o&&(this.value.style=D(this.value.style,t,"solid"),this.selectComponent(this.idxBorder,this.idxCorner)),this.handleChange()}}},t.prototype.onChangeRadius=function(e){if(this.value){var t=this.diffCorners.getValue()?this.idxCorner:-1,i=this.radius.getValue(),n=O(this.value.radius,t);if(e){if(n==i)return;(0,g.waitForChangeEndToUpdate)(this.waitToUpdateRadius)}else this.value.radius=D(this.value.radius||0,t,i),this.handleChange()}},t.prototype.onChangeStyle=function(){if(this.value){var e=this.diffBorders.getValue()?this.idxBorder:-1;this.value.style=D(this.value.style,e,this.style.getValue());var t=O(this.value.style,e),i=O(this.value.weight,e);"double"==t&&i<3?(this.value.weight=D(this.value.weight,e,3),this.selectComponent(this.idxBorder,this.idxCorner)):"none"!=t&&0==i&&(this.value.weight=D(this.value.weight,e,1),this.selectComponent(this.idxBorder,this.idxCorner)),this.handleChange()}},t.prototype.onChangeDiffBorders=function(){if(this.value){var e=this.diffBorders.getValue();this.selector.setDiffBorders(e),this.selectComponent(this.idxBorder,this.idxCorner),this.handleChange()}},t.prototype.onChangeDiffCorners=function(){if(this.value){var e=this.diffCorners.getValue();this.selector.setDiffCorners(e),this.selectComponent(this.idxBorder,this.idxCorner),this.handleChange()}},t.prototype.selectComponent=function(e,t,i){if(void 0===i&&(i=!1),i&&(e>=0?(this.diffBorders.setValue(!this.diffBorders.getValue()),this.onChangeDiffBorders()):t>=0&&(this.diffCorners.setValue(!this.diffCorners.getValue()),this.onChangeDiffCorners())),this.idxBorder=e,this.idxCorner=t,this.value){if(e>=0){var n=this.diffBorders.getValue();this.width.setValue(O(this.value.weight,n?e:-1)),this.style.setValue(O(this.value.style,n?e:-1)),this.color.setValue(O(this.value.color,n?e:-1))}if(t>=0){var o=this.diffCorners.getValue();this.radius.setValue(O(this.value.radius,o?t:-1))}}this.borderStuff.setVisible(e>=0),this.radiusStuff.setVisible(t>=0)},t.prototype.setNoRadius=function(e){this.selector.setNoRadius(e),this.diffCorners.setVisible(!e)},t.prototype.setNoTransparent=function(e){this.color.setNoTransparent(e)},t.prototype.getMouseDowned=function(){var t=this.color.getPopover();return t?t.getMouseDowned():e.prototype.getMouseDowned.call(this)},t}(u.Popover),x=function(e){function t(t){var i=e.call(this)||this;i.onChange=t,i.cells=[],i.noRadius=!1,i.diffBorders=!1,i.diffCorners=!1,i.idxBorder=-1,i.idxCorner=-1,i._elem.addClass("wb-border-part-ctrl");for(var n=function(e){for(var t=y()("<div>"),n=function(n){var s=y()("<span>").addClass("wb-cell-ctrl").on("click dblclick",(function(t){return i.onClick(3*e+n,"dblclick"==t.type)}));1==n&&1==e&&s.addClass("wb-cell-na-ctrl"),o.cells.push(s),t.append(s)},s=0;s<3;s++)n(s);o._elem.append(t)},o=this,s=0;s<3;s++)n(s);return i._elem.append((i.previewElem=y()("<span>")).addClass("wb-brd-ctrl wb-ethereal")),i}return b(t,e),t.prototype.getPreviewElem=function(){return this.previewElem},t.prototype.select=function(e,t){this.idxBorder=e,this.idxCorner=t,this.updateSelection()},t.prototype.setNoRadius=function(e){this.noRadius!=e&&(this.noRadius=e,e?(this.cells[0].addClass("wb-cell-na-ctrl"),this.cells[2].addClass("wb-cell-na-ctrl"),this.cells[6].addClass("wb-cell-na-ctrl"),this.cells[8].addClass("wb-cell-na-ctrl")):(this.cells[0].removeClass("wb-cell-na-ctrl"),this.cells[2].removeClass("wb-cell-na-ctrl"),this.cells[6].removeClass("wb-cell-na-ctrl"),this.cells[8].removeClass("wb-cell-na-ctrl")))},t.prototype.setDiffBorders=function(e){this.diffBorders!=e&&(this.diffBorders=e,this.updateSelection())},t.prototype.setDiffCorners=function(e){this.diffCorners!=e&&(this.diffCorners=e,this.updateSelection())},t.prototype.updateSelection=function(){this.setCell(1,!this.diffBorders&&this.idxBorder>=0||0==this.idxBorder),this.setCell(3,!this.diffBorders&&this.idxBorder>=0||3==this.idxBorder),this.setCell(5,!this.diffBorders&&this.idxBorder>=0||1==this.idxBorder),this.setCell(7,!this.diffBorders&&this.idxBorder>=0||2==this.idxBorder),this.setCell(0,!this.diffCorners&&this.idxCorner>=0||0==this.idxCorner),this.setCell(2,!this.diffCorners&&this.idxCorner>=0||1==this.idxCorner),this.setCell(6,!this.diffCorners&&this.idxCorner>=0||3==this.idxCorner),this.setCell(8,!this.diffCorners&&this.idxCorner>=0||2==this.idxCorner)},t.prototype.setCell=function(e,t){this.cells[e].hasClass("active")!=t&&(t?this.cells[e].addClass("active"):this.cells[e].removeClass("active"))},t.prototype.onClick=function(e,t){(!this.noRadius||0!=e&&2!=e&&6!=e&&8!=e)&&(1==e?(this.idxBorder=0,this.idxCorner=-1):3==e?(this.idxBorder=3,this.idxCorner=-1):5==e?(this.idxBorder=1,this.idxCorner=-1):7==e?(this.idxBorder=2,this.idxCorner=-1):0==e?(this.idxBorder=-1,this.idxCorner=0):2==e?(this.idxBorder=-1,this.idxCorner=1):6==e?(this.idxBorder=-1,this.idxCorner=3):8==e&&(this.idxBorder=-1,this.idxCorner=2),this.onChange.call(this,this.idxBorder,this.idxCorner,t),this.updateSelection())},t}(o.UIComponent),S=function(e){function t(t){var i=e.call(this)||this;i.onSelect=t,i._elem.addClass("btn-group wb-border-preset-ctrl");for(var n=0,o=[{preview:0,value:0},{preview:4,value:3},{preview:8,value:10},{preview:10,value:function(e){return Math.min(e.width,e.height)/4}},{preview:100,value:function(e){return Math.min(e.width,e.height)/2}}];n<o.length;n++){var s=o[n];i._elem.append(i.buildButton(w({differ:!0,weight:[2,2,0,0],style:"solid",color:"#333",differRadius:!0,radius:[0,s.preview,0,0]}),s.value))}return i}return b(t,e),t.prototype.buildButton=function(e,t){var i=this,n=v({},e.css);return"none"!=e.style&&"none"!=e.style[0]||(n.border="1px dashed #cccccc"),y()("<button>").addClass("btn btn-default").append(y()("<span>").css(n)).on("click",(function(){return i.onSelect.call(i,t)}))},t}(o.UIComponent);function k(e,t){return(new l.VerticalLayout).addAllChildren([new a.Label(e),t])}function D(e,t,i){return e instanceof Array||(e=[e,e,e,e]),e.length<2&&(e=[e[0],e[0],e[0],e[0]]),t<0?e=[i,i,i,i]:e[t]=i,e}function O(e,t){return e instanceof Array?e.length<2?e[0]:e[e.length>t&&t>=0?t:0]:e}function R(e,t){var i=y().extend(!0,{},e);i.weight instanceof Array&&(i.weight=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],i.weight,!0));for(var n=0;n<4;n++)i.weight=D(i.weight,n,Math.min(O(i.weight,n),10));var o=(i=w(i)).differ||!1,s=v({},i.css);0!=O(i.weight,o?0:-1)&&"none"!=O(i.style,o?0:-1)||(s["border-top"]="1px dashed #cccccc"),0!=O(i.weight,o?1:-1)&&"none"!=O(i.style,o?1:-1)||(s["border-right"]="1px dashed #cccccc"),0!=O(i.weight,o?2:-1)&&"none"!=O(i.style,o?2:-1)||(s["border-bottom"]="1px dashed #cccccc"),0!=O(i.weight,o?3:-1)&&"none"!=O(i.style,o?3:-1)||(s["border-left"]="1px dashed #cccccc"),t.css(s)}function P(e){var t=!!e&&(void 0!==e.differRadius?e.differRadius:e.differ),i=e&&void 0!==e.radius?e.radius:0,n=t?"".concat(O(i,0),"px")+" ".concat(O(i,1),"px")+" ".concat(O(i,2),"px")+" ".concat(O(i,3),"px"):"".concat(O(i,-1),"px"),o={"border-radius":n,"-moz-border-radius":n,"-webkit-border-radius":n};return{lt:O(i,0),rt:O(i,1),rb:O(i,2),lb:O(i,3),differ:t,css:o,cssRaw:_(o)}}function L(e,t){var i=t||P();e.differRadius=!!i.differ,e.radius=[i.lt||0,i.rt||0,i.rb||0,i.lb||0]}},"./BuilderEvent.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlocksResizeBuilderEvent:function(){return f},BooleanValueChangedBuilderEvent:function(){return l},BuilderEvent:function(){return a},BuilderEventListener:function(){return r},BuilderInitBuilderEvent:function(){return y},ContextMenuEvent:function(){return h},FontsChangedBuilderEvent:function(){return T},GlobalEvents:function(){return o},HistoryChangedBuilderEvent:function(){return E},InPlaceEditorStateChangedEvent:function(){return k},LandingChangedBuilderEvent:function(){return I},LanguagesUpdateBuilderEvent:function(){return m},MediaLibraryMetaChangedBuilderEvent:function(){return w},ModesChangeBuilderEvent:function(){return g},NotificationEvent:function(){return u},PageLoadBuilderEvent:function(){return b},PagesChangedBuilderEvent:function(){return v},PagesChangedEvent:function(){return p},PreviewSizeChangedEvent:function(){return c},SaveEvent:function(){return d},SelectionChangedBuilderEvent:function(){return S},SiteStructureChangedBuilderEvent:function(){return x},SiteStructureCollapseExpandBuilderEvent:function(){return D},StoreCategoriesChangedBuilderEvent:function(){return C},VisibilityChangedBuilderEvent:function(){return _}});var n,o,s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){var t={};e.triggerEvent=function(e,i){if(i.eventType=e.toLowerCase(),i.defaultPrevented=!1,i.propagationStopped=!1,e in t)for(var n=t[e].slice(),o=n.length-1;o>=0&&!i.propagationStopped;o--)n[o](i)},e.on=function(e,i){for(var n=0,o=e.toLowerCase().split(" ");n<o.length;n++){var s=o[n];""!==s&&(s in t||(t[s]=[]),t[s].unshift(i))}},e.off=function(e,i){for(var n=0,o=e.toLowerCase().split(" ");n<o.length;n++){var s=o[n];if(""!==s&&s in t)if(i)for(var r=t[s],a=r.length-1;a>=0;a--)r[a]===i&&r.splice(a,1);else delete t[s]}}}(o||(o={}));var r=function(){function e(e,t){this.thisBinding=e,this.callback=t}return e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.callback.apply(this.thisBinding,e)},e}(),a=function(){function e(){this.defaultPrevented=!1,this.propagationStopped=!1}return e.prototype.preventDefault=function(){return this.defaultPrevented=!0,this},e.prototype.stopPropagation=function(){return this.propagationStopped=!0,this},e.prototype.stopImmediatePropagation=function(){return this.propagationStopped=!0,this},e}(),l=function(e){function t(t){var i=e.call(this)||this;return i.value=t,i}return s(t,e),t}(a),c=function(e){function t(t){var i=e.call(this)||this;return i.width=t,i}return s(t,e),t}(a),u=function(e){function t(t,i){void 0===t&&(t=""),void 0===i&&(i=!1);var n=e.call(this)||this;return n.message=t,n.isHtml=i,n}return s(t,e),t}(a),d=function(e){function t(){return e.call(this)||this}return s(t,e),t}(a),h=function(e){function t(t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null);var s=e.call(this)||this;return s.menu=t,s.x=i,s.y=n,s.target=o,s}return s(t,e),t}(a),p=function(e){function t(){return e.call(this)||this}return s(t,e),t}(a),m=function(e){function t(t){var i=e.call(this)||this;return i.initial=t,i}return s(t,e),t}(a),g=function(e){function t(t,i,n,o){void 0===o&&(o=!1);var s=e.call(this)||this;return s.isTriggered=o,s.previousMode=t,s.mode=i,s.manual=n,s}return s(t,e),t}(a),f=function(e){function t(t,i,n,o){var s=e.call(this)||this;return s.contentBlock=t,s.width=i||0===i?i:t.getWidthInPixels(),s.height=n||0===n?n:t.getHeightInPixels(),s.noSave=!!o,s}return s(t,e),t}(a),y=function(e){function t(){return e.call(this)||this}return s(t,e),t}(a),b=function(e){function t(t,i){var n=e.call(this)||this;return n.pageId=t,n.pageData=i,n}return s(t,e),t}(a),v=function(e){function t(){return e.call(this)||this}return s(t,e),t}(a),_=function(e){function t(t){var i=e.call(this)||this;return i.visible=t,i}return s(t,e),t}(a),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(a),w=function(e){function t(t,i){var n=e.call(this)||this;return n.path=t,n.meta=i,n}return s(t,e),t}(a),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(a),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(a),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(l),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(a),S=function(e){function t(t,i){var n=e.call(this)||this;return n.item=t,n.op=i,n}return s(t,e),t}(a),k=function(e){function t(t){var i=e.call(this)||this;return i.active=t,i}return s(t,e),t}(a),D=function(e){function t(t,i){var n=e.call(this)||this;return n.item=t,n.collapse=i,n}return s(t,e),t}(a)},"./ButtonGroup.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ButtonGroup:function(){return r}});var n,o=i("./UIContainer.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(){var t=e.call(this)||this;return t.addClass("btn-group"),t._elem.attr({role:"group"}),t}return s(t,e),t.prototype.buildInit=function(e,t){},t}(o.UIContainer)},"./CanvasGrid.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CanvasGrid:function(){return n}});var n=function(){function e(e){this.body=e,this.gridRenderState=null,this.showGrid=!1,this.gridSize=10,this.gridColor="rgba(0, 0, 0, 0.3)"}return e.prototype.render=function(e){void 0===e&&(e=!1);var t=this.gridSize+"|"+this.gridColor;if(e||this.gridRenderState!==t){this.gridRenderState=t;var i=document.createElement("canvas");i.width=i.height=this.gridSize;var n=i.getContext("2d");n&&(n.strokeStyle=this.gridColor,n.lineWidth=1,n.beginPath(),n.moveTo(.5,this.gridSize-.5),n.lineTo(this.gridSize-.5,this.gridSize-.5),n.lineTo(this.gridSize-.5,.5),n.stroke());for(var o=i.toDataURL("image/png"),s=0,r=this.body.getChildren();s<r.length;s++){var a=r[s];a.grid&&a.grid.css({opacity:1,"background-image":"url("+o+")"})}}},e.prototype.fromCookie=function(e){if(e){var t=e.split("/");if(this.showGrid=t.length>0&&"Y"===t[0],t.length>1){var i=parseInt(t[1]);isNaN(i)||(this.gridSize=i)}t.length>2&&(this.gridColor=t[2])}},e.prototype.getSize=function(){return this.gridSize},e.prototype.setSize=function(e){"string"==typeof e&&(e=parseInt(e,10),isNaN(e))||(this.gridSize=Math.min(Math.max(e,5),100),this.render())},e.prototype.getColor=function(){return this.gridColor},e.prototype.setColor=function(e){this.gridColor=e,this.render()},e.prototype.isVisible=function(){return this.showGrid},e.prototype.setVisible=function(e,t){void 0===t&&(t=!1),this.showGrid=e,this.render(t);for(var i=0,n=this.body.getChildren();i<n.length;i++){var o=n[i];o.grid&&o.grid.css("display",e?"block":"none")}},e}()},"./CheckBoxControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CheckBoxControl:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(e,t,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=!1),this.elem=o()('<div class="checkbox"></div>');var n=o()("<label>").appendTo(this.elem);this.input=o()('<input type="checkbox" />').appendTo(n),e&&n.append(e),t&&this.input.attr("name",t),i&&this.setValue(i)}return e.prototype.getValue=function(){return!!this.input.get(0).checked},e.prototype.setValue=function(e){this.input.get(0).checked=!!e},e}()},"./ColorPicker.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ColorPicker:function(){return c}});var n,o=i("./jquery-builder.ts"),s=i("./ui/ThumbEditorControl.ts"),r=i("./UIComponent.ts"),a=i("./ui/ColorPickerPopover.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.noTransparent=t,r.noAlpha=i,r.color=null,r.onChange=null,r.colorSelectorClass=null,r.popover=null,r.isBig=!0,r.inPlace=!1,r.thumbCtrl=(new s.ThumbEditorControl).onEdit((function(){return r.onEdit()})).onRemove((function(){return r.onClear()})),r._elem.addClass("wb-colorpicker-controll").append(r.thumbCtrl.getElem()),r.alphaOverlay=(0,o.default)("<span>").addClass("bg-transparent"),r.thumbCtrl.getPreviewElem().append(r.alphaOverlay),(r.noTransparent||r.noAlpha)&&r.alphaOverlay.css("opacity",0),r.setBig(n),r}return l(t,e),t.readableColor=function(e){var i=t.colorTextToObject(e);"h"in i&&(i="b"in i?t.HSB2RGB(i):t.HSL2RGB(i));var n=void 0!==i.a?i.a:1,o=1-n;return i.r=i.r*n+127.5*o,i.g=i.g*n+127.5*o,i.b=i.b*n+127.5*o,.2126*Math.pow(i.r/255,2.2)+.7151*Math.pow(i.g/255,2.2)+.0721*Math.pow(i.b/255,2.2)>.5?"#000000":"#ffffff"},t.colorTextToObject=function(e){var i;return e&&"object"==typeof e?o.default.extend(!0,{r:0,g:0,b:0,a:1},e):e&&"transparent"!==e?(i=(e=e.trim()).match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i))?{r:parseInt(i[1]+i[1],16),g:parseInt(i[2]+i[2],16),b:parseInt(i[3]+i[3],16),a:1}:(i=e.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i))?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:1}:(i=e.match(/^rgb\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i))?{r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:1}:(i=e.match(/^rgba\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i))?{r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:parseFloat(i[4])}:(i=e.match(/^hsl\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*\)$/i))?t.HSL2RGB({h:parseFloat(i[1])/360,s:parseFloat(i[2])/100,l:parseFloat(i[3])/100,a:1}):(i=e.match(/^hsla\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)\s*\)$/i))?t.HSL2RGB({h:parseFloat(i[1])/360,s:parseFloat(i[2])/100,l:parseFloat(i[3])/100,a:parseFloat(i[4])}):{r:255,g:255,b:255,a:1}:{r:255,g:255,b:255,a:0}},t.HSB2RGB=function(e){var t={r:0,g:0,b:0},i=Math.round(e.h),n=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0===n)t.r=t.g=t.b=o;else{var s=o,r=(255-n)*o/255,a=i%60*(s-r)/60;360===i&&(i=0),i<60?(t.r=s,t.b=r,t.g=r+a):i<120?(t.g=s,t.b=r,t.r=s-a):i<180?(t.g=s,t.r=r,t.b=r+a):i<240?(t.b=s,t.r=r,t.g=s-a):i<300?(t.b=s,t.g=r,t.r=r+a):i<360?(t.r=s,t.g=r,t.b=s-a):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b),a:void 0!==e.a?Math.round(100*e.a)/100:1}},t.HSL2RGB=function(e){var t={r:0,g:0,b:0,a:void 0!==e.a?Math.round(100*e.a)/100:1};if(0===e.s)t.r=t.g=t.b=e.l;else{var i=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},n=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,o=2*e.l-n;t.r=i(o,n,e.h+1/3),t.g=i(o,n,e.h),t.b=i(o,n,e.h-1/3)}return t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t},t.colorObjectToText=function(e,i){if(void 0===i&&(i=!1),!i&&void 0!==e.a&&e.a<.998047)return e.a<.001953&&(e.a=0),0===e.a?"transparent":("h"in e&&(e="b"in e?t.HSB2RGB(e):t.HSL2RGB(e)),"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")");if("h"in e)return"hsb("+e.h+", "+e.s+", "+e.b+")";var n=Math.round(e.r).toString(16),o=Math.round(e.g).toString(16),s=Math.round(e.b).toString(16);return 1===n.length&&(n="0"+n),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),"#"+n+o+s},t.getColorPalettes=function(){return wb_builder.getColorPalettes()},t.prependColor=function(e,t,i){wb_builder.prependColor(e,t,i)},t.appendColor=function(e,t,i){wb_builder.appendColor(e,t,i)},t.removeColor=function(e,t,i){wb_builder.removeColor(e,t,i)},t.prototype.buildInit=function(e,t){var i,n;void 0!==e.noTransparant&&this.setNoTransparent(!!e.noTransparant),void 0!==e.noAlpha&&this.setNoAlpha(!!e.noAlpha),void 0!==e.big&&this.setBig(!!e.big),void 0!==e.inPlace&&this.setInPlace(!!e.inPlace),void 0!==e.enabled&&this.setEnabled(!!e.enabled),e.value&&this.setValue(e.value),e.colorSelectorClass&&this.setColorSelectorClass(e.colorSelectorClass),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,i.onChange=function(){n.call(i,t)})},t.prototype.onEdit=function(e){var t=this;if(void 0===e&&(e=!1),!e){if(!this._enabled||!this.color)return;if(this.popover&&this.popover.isVisible())return void this.popover.setVisible(!1)}this.popover||(this.popover=new a.ColorPickerPopover(this.thumbCtrl.getPreviewElem(),(function(e){t.applyValue(e,!0),t.onValueChanged()}))),this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha),!e&&this.color&&this.popover.edit(this.color)},t.prototype.onClear=function(){var e={r:255,g:255,b:255,a:this.noTransparent||this.noAlpha?1:0};this.applyValue(e,!0),this.onValueChanged()},t.prototype.setOnChange=function(e){return this.onChange=e,this},t.prototype.setInPlace=function(e){return this.inPlace==e||(this.inPlace=e,e?(this.onEdit(!0),this.thumbCtrl.getElem().detach(),this.popover&&this.popover.setContentDetached(!0,this._elem)):(this.popover&&this.popover.setContentDetached(!1,this._elem),this._elem.append(this.thumbCtrl.getElem()))),this},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),t?this._elem.removeClass("disabled"):this._elem.addClass("disabled")},t.prototype.setNoTransparent=function(e){return this.noTransparent===e||(this.noTransparent=e,this.alphaOverlay.css("opacity",this.noTransparent||this.noAlpha?0:1),this.inPlace&&this.popover&&this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha)),this},t.prototype.setNoAlpha=function(e){this.noAlpha!==e&&(this.noAlpha=e,this.alphaOverlay.css("opacity",this.noTransparent||this.noAlpha?0:1),this.inPlace&&this.popover&&this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha))},t.prototype.setBig=function(e){this.isBig!=e&&(this.isBig=e,this.thumbCtrl.setSize(e?s.ThumbSize.Normal:s.ThumbSize.Small),this.thumbCtrl.setRemoveControlVisible(e))},t.prototype.getValue=function(){return t.colorObjectToText(this.color||{r:0,g:0,b:0},this.noTransparent)},t.prototype.setValue=function(e){this.applyValue(e,!1),this.inPlace&&this.onEdit()},t.prototype.applyValue=function(e,i){var n=t.colorTextToObject(e);(this.noAlpha||this.noTransparent)&&(n.a=1),"h"in n&&(n="b"in n?t.HSB2RGB(n):t.HSL2RGB(n)),this.color=n,void 0!==n.a&&n.a>=.001953?(this.alphaOverlay.css("opacity",1-n.a),this.thumbCtrl.getPreviewElem().css({backgroundColor:t.colorObjectToText(n,!0),color:t.readableColor(n)})):(this.alphaOverlay.css("opacity",1),this.thumbCtrl.getPreviewElem().css({backgroundColor:"",color:""})),i&&"function"==typeof this.onChange&&this.onChange.call(this)},t.prototype.getColor=function(){return this.getValue()},t.prototype.setColor=function(e){this.setValue(e)},t.prototype.showPicker=function(){this.inPlace||this.onEdit()},t.prototype.hidePicker=function(){this.popover&&!this.inPlace&&this.popover.setVisible(!1)},t.prototype.setColorSelectorClass=function(e){this.colorSelectorClass=e},t.prototype.destroy=function(){this.popover&&this.popover.dispose(),e.prototype.destroy.call(this)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){"noTransparent"in t&&this.setNoTransparent(!!t.noTransparent),"noAlpha"in t&&this.setNoAlpha(!!t.noAlpha),e.prototype.setComponentOptions.call(this,t)},t.prototype.triggerOnDom=function(){this.popover&&this.popover.triggerOnDom()},t.prototype.getPopover=function(){return this.popover},t.prototype.triggerOnClose=function(){this.popover&&this.popover.triggerOnClose()},t}(r.UIComponent)},"./CommonTypes.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Alignment:function(){return n},ChildrenLayoutType:function(){return s},ContentBlockId:function(){return o},FlexAlignContent:function(){return l},FlexAlignItems:function(){return a},FlexWrap:function(){return r},HistoryGroupState:function(){return u},TraverseControl:function(){return c},Vector2:function(){return m},convertToPixels:function(){return p},delayPromise:function(){return g},waitForModalToFullyHide:function(){return f}});var n,o,s,r,a,l,c,u,d=i("./lib/jquery-1.11.3.min.js"),h=i.n(d);function p(e,t){if("number"==typeof e)return e;var i=parseFloat(e);if(isNaN(i))return 0;if(/px$/.test(e))t=1;else if(/%$/.test(e))i/=100;else if(/vw$/.test(e))if(/vh$/.test(e)){if(!/em$/.test(e))return 0}else i/=100,t=h()(window).height();else i/=100,t=h()(window).width();return Math.round(i*t)}!function(e){e.Left="left",e.Center="center",e.Right="right"}(n||(n={})),function(e){e.Header="wb_header",e.Main="wb_main",e.Footer="wb_footer"}(o||(o={})),function(e){e.Absolute="absolute",e.Horizontal="horizontal",e.Vertical="vertical"}(s||(s={})),function(e){e.NoWrap="nowrap",e.Wrap="wrap",e.WrapReverse="wrap-reverse"}(r||(r={})),function(e){e.Start="flex-start",e.Center="center",e.End="flex-end",e.Stretch="stretch"}(a||(a={})),function(e){e.Start="flex-start",e.Center="center",e.End="flex-end",e.Stretch="stretch",e.SpaceBetween="space-between",e.SpaceEvenly="space-evenly",e.SpaceAround="space-around"}(l||(l={})),function(e){e[e.Continue=0]="Continue",e[e.Break=1]="Break",e[e.SkipChildren=2]="SkipChildren"}(c||(c={})),function(e){e[e.NotRecording=0]="NotRecording",e[e.GroupStart=1]="GroupStart",e[e.Chaining=2]="Chaining"}(u||(u={}));var m=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.set(e,t)}return e.prototype.clone=function(){return new e(this)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e&&"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t),this},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.scale=function(t){return new e(this.x*t,this.y*t)},e.prototype.scale2=function(t,i){return new e(this.x*t,this.y*i)},e.prototype.normalize=function(){var e=this.length();return e&&(this.x/=e,this.y/=e),this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.lengthSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e}();function g(e){var t=h().Deferred();return setTimeout((function(){t.resolve()}),e),t.promise()}function f(e){void 0===e&&(e=0);var t=h().Deferred(),i=0,n=function(){i&&clearTimeout(i),t.resolve()};return e>0&&(i=setTimeout((function(){h()(document).off("hidden.bs.modal",n),t.reject()}),e)),h()(document).one("hidden.bs.modal",n),t.promise()}},"./Confirm.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Confirm:function(){return l}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./WB_Dialog.class.js"),r=i.n(s),a=i("./UserInput.ts"),l=function(){function e(){}return e.showPopover=function(t,i,n,s,r,l){void 0===l&&(l=""),e.hasHotkey||(e.hasHotkey=function(){e.popover&&(e.popover.popover("hide"),e.popover.popover("destroy"))},a.UserInput.addHotKey("esc",e.hasHotkey)),e.popover&&(e.popover.popover("hide"),e.popover.popover("destroy")),n||(n=[{title:__("OK")}]),l||(l="bottom");var c=o()("<div>");c.css({textAlign:"center"});var u=null;c.append(u=o()("<div>").css({textAlign:"left",marginBottom:"20px"})),u.html(i.split("\n").join("<br />"));var d=o()("<div>").addClass("clearfix");c.append(d);for(var h=function(t){var i,s,r=n[t],a=o()("<button>").addClass("btn");r.cssClass&&a.addClass(r.cssClass),a.html(r.title?r.title:__("Untitled")),t>0&&a.css({marginLeft:"10px"}),i=r.func,s=r.validateFunc,a.on("click",(function(){("function"!=typeof s||s())&&(e.popover&&e.popover.popover("hide"),"function"==typeof i&&i(),c.empty(),e.popover&&e.popover.popover("destroy"),e.popover=null)})),d.append(a)},p=0;p<n.length;p++)h(p);e.popover=r,e.popover.popover({html:!0,title:t,content:function(){return c},trigger:"manual",placement:l}),e.popover.popover("show"),s&&!isNaN(1*s)&&r.next(".popover").width(1*s)},e.showDialog=function(t,i,n,s,l){var c=!1;e.hasHotkey||(e.hasHotkey=function(){e.dialog&&e.dialog.hide()},a.UserInput.addHotKey("esc",e.hasHotkey)),e.dialog?e.dialog.hide():(e.dialog=new(r()),e.dialog.fields.panel=o()("<div></div>"),e.dialog.setContent(e.dialog.fields.panel)),e.dialog.setCenterButtons(!1),n||(n=[{title:__("OK")}]),e.dialog.setTitle(t),e.dialog.fields.panel.empty();var u="string"==typeof i?i.split("\n").join("<br />"):i;e.dialog.fields.panel.append(u),e.dialog.removeAllButtons();for(var d=function(t){var i,o,s=n[t];i=s.func,o=s.validateFunc,e.dialog.addButton(s.title?s.title:__("Untitled"),(function(){("function"!=typeof o||o())&&(e.dialog&&e.dialog.hide(),"function"==typeof i&&(c=!1,i()))}),void 0,s.cssClass)},h=0;h<n.length;h++)d(h);if(s&&!isNaN(1*s)&&e.dialog.setSize(1*s),"function"==typeof l){var p=l;e.dialog.setOnClose((function(){c=!0,setTimeout((function(){c&&"function"==typeof p&&p()}),0)}))}e.dialog.show()},e.popover=null,e.dialog=null,e.hasHotkey=null,e}()},"./CongratsDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CongratsDialog:function(){return p}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./WB_Dialog.class.js"),a=i.n(r),l=i("./VerticalLayout.ts"),c=i("./Label.ts"),u=i("./UIButton.ts"),d=i("./Service.ts"),h=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),p=function(e){function t(){var t=e.call(this,"",!1)||this;return t.content.css({padding:"20px"}),t.setTitleVisible(!1),t.setFooterVisible(!1),t.setSize(500,null),t.setTitle("Congrats Stuff"),t.setContent(new d.Service.UIBuilder({type:l.VerticalLayout,css:{textAlign:"center",marginBottom:"10px"},children:[{type:c.Label,text:__("Congratulations, your website is live!"),css:{fontSize:"25px",lineHeight:"27px",overflow:"visible",margin:"20px 0px 30px 0px",textAlign:"center",cursor:"default"}},{type:c.Label,text:"",id:"msgLabel",css:{textAlign:"center",marginBottom:"30px",color:"#666666",cursor:"default"}},{type:u.UIButton,text:__("View Site"),buttonStyle:u.UIButton.STYLE_SUCCESS,click:function(){window.open("http://"+wb_builder.siteDomain,"wb_builder_prewiew_published")}}]},t.fields),!0),t.content.prepend(s()("<button>").attr("type","button").css({position:"absolute",zIndex:999,top:"12px",right:"20px"}).addClass("close").html("&times;").on("click",(function(){t.setVisible(!1)}))),t}return h(t,e),t.prototype.setVisible=function(t,i,n){if(t){var o="http://"+wb_builder.siteDomain,s='<a href="'+o+'" target="_blank">'+o+"</a>";this.fields.msgLabel.setHtml(String(__("Here is your website address: %s")).replace("%s",s))}e.prototype.setVisible.call(this,t,i,n)},t}(a())},"./ContactFormControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ContactFormControl:function(){return c}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./UIComponent.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(){var t=e.call(this)||this;t.form=null;var i=s()("<div>").addClass("input-group");t.inputElem=s()("<input>").addClass("form-control").attr({type:"text",disabled:"disabled",placeholder:__("E-mail is required")}).appendTo(i);var n=s()("<button>").addClass("btn btn-default").attr({type:"button"}).append(s()("<span>").addClass("fa fa-pencil")).on("click",(function(){t.form&&t.form.comProperties()}));return s()("<div>").addClass("input-group-btn").append(n).appendTo(i),t._elem.append(i),t.setValue(null),t}return l(t,e),t.prototype.buildInit=function(e,t){},t.prototype.getValue=function(){return this.form?this.form.serialize():null},t.prototype.setValue=function(e){var t=this,i=new r.Service.forms.Form(e&&"object"==typeof e?e:{content:{}},!0,!0);i.onApplyCallback=function(){return t.onValueChanged()},i.onUpdateStyle=function(){t.inputElem.val(i.serialize().content.email||"")},i.updateStyle(),this.form=i},t.supportsMultipleObjectBindings=function(){return!1},t}(a.UIComponent)},"./ContextMenu.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ContextMenu:function(){return h},hideAllContextMenus:function(){return d}});var n=i("./jquery-builder.ts"),o=i("./Service.ts"),s=i("./MobileToolbar.js"),r=i("./util/EventUtil.ts");(0,n.default)((function(){(0,n.default)("#site").on("mouseup touchstart",(function(e){2!==e.button&&d()})),(0,n.default)(window).on("scroll",(function(){(0,n.default)(window).width()>u&&d()}))})),o.Service.contextMenu={hideAll:function(){d()},cleanup:function(){for(var e=0,t=l;e<t.length;e++)t[e].dispose();l=[]}};var a=null,l=[],c=0,u=485;function d(){s.Drawer.open(null,null,!0);for(var e=0,t=l;e<t.length;e++)t[e].hide()}var h=function(){function e(e){this.parentMenu=null,this.bindBtn=null,this.passiveBindElements=[],this.onShow=null,this.pageX=0,this.pageY=0,this.mobileDrawer=null,this.isVisible=!1,this.id="wb_context_menu_"+c++,e&&(this.id=e),this.menu=(0,n.default)("<ul></ul>").attr("id",e||null),this.menu.addClass("dropdown-menu wb-contextmenu"),this.menu.wbSetClassInstance(this),this.items=[],l.push(this)}return e.prototype.dispose=function(){this.hide(),this.menu.remove(),this.onShow=null;for(var e=0,t=this.passiveBindElements;e<t.length;e++)t[e].oncontextmenu=null;this.passiveBindElements=[],this.unbind();var i=l.indexOf(this);i>=0&&l.splice(i,1)},e.prototype.show=function(e,t){var i;if(void 0===t&&(t=!1),(0,n.default)(window).width()<=u){if(d(),"function"==typeof this.onShow&&this.onShow(this,e),!this.mobileDrawer){for(this.mobileDrawer=new s.Drawer("list"),i=0;i<this.items.length;i++)this.mobileDrawer.addItem(s.Toolbar.buildDrawerItem(this.items[i],this.mobileDrawer));this.mobileDrawer.addItem(s.Toolbar.buildDrawerItem({type:"-"},this.mobileDrawer)),this.mobileDrawer.addItem(s.Toolbar.buildDrawerItem({name:__("Properties"),icon:"fa fa-gears",click:function(e){wb_builder.sidebarPanel.setVisible(!0)}},this.mobileDrawer)),(0,n.default)(document.body).append(this.mobileDrawer.getElem())}return wb_builder.sidebarPanel.setVisible(!1),void s.Drawer.open(this.mobileDrawer,null,!0)}if(e)for(var o=0,c=l;o<c.length;o++){var h=c[o];this.id!==h.id&&h.hide()}if(a||(a=(0,n.default)("<div>").addClass("dropdown-btn-body").appendTo(document.body)),"function"==typeof this.onShow&&this.onShow(this,e),0!=this.items.length){this.isVisible||(this.isVisible=!0,this.parentMenu?this.menu.parent().addClass("open"):a.addClass("open").append(this.menu));var p=(0,n.default)(window).width(),m=(0,n.default)(window).height(),g=this.menu.outerWidth(!0),f=this.menu.outerHeight(!0),y=0,b=0,v=this.menu.parent();if(e){var _=r.posFromEvent(e);this.pageX=_.left,this.pageY=_.top,y=_.left+10,b=_.top+10,wb_builder.rtl?y-g<0&&(y=_.left+10+g):y+g>p&&(y=_.left-10-g),b+f>m&&(b=_.top-10-f)<window.scrollY&&(b=window.scrollY),v.css({left:y+"px",top:b+"px"})}else if(t){var C=v.offset(),w=v.width();y=90,b=0,C.left+Math.ceil(.9*w)+g>p&&(y=-90),C.top+f>m&&(b=10-f),this.menu.css({left:y+"%",top:b+"px"})}}},e.prototype.hide=function(){this.isVisible&&(this.isVisible=!1,this.parentMenu?this.menu.parent().removeClass("open"):(this.menu.detach(),a&&a.removeClass("open")))},e.prototype.linkDrawer=function(e){this.mobileDrawer=e},e.prototype.bind=function(e,t){var i=this;void 0===t&&(t=!1);var o=(0,n.default)("<span>").addClass("dropdown-toggle-body").appendTo(e);t||o.on("click",(function(e){return i.show(e),e.stopPropagation(),!1})),this.pasiveBind(o),this.bindBtn=o},e.prototype.unbind=function(){if(this.bindBtn){var e=this.bindBtn;e.off("click"),this.pasiveUnbind(e),e.remove(),this.bindBtn=null}a&&(a.remove(),a=null),this.menu.detach()},e.prototype.pasiveBind=function(e){var t=this,i=e.get(0);this.passiveBindElements.push(i),i.oncontextmenu=function(e){e||(e=window.event);var i=wb_builder.normalizeEvent(e);return i.type="click",t.show(i),e.stopPropagation(),!1}},e.prototype.pasiveUnbind=function(e){var t=e.get(0);t.oncontextmenu=null;var i=this.passiveBindElements.indexOf(t);i>=0&&this.passiveBindElements.splice(i,1)},e.prototype.setHeight=function(e){var t=e?parseInt(""+e):0;t?this.menu.css({maxHeight:t+"px",overflow:"hidden",overflowY:"auto"}):this.menu.css({maxHeight:"",overflow:"",overflowY:""})},e.prototype.removeAllItems=function(){this.items.splice(0,this.items.length),this.menu.children().each((function(){(0,n.default)(this).remove()}))},e.prototype.insertItemAt=function(t,i,o,s,r,a,l,c,u,d){var h=this;void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===c&&(c=""),void 0===u&&(u=!1),void 0===d&&(d=0);var p={id:i,name:o,checked:!!r,disabled:!!r,visible:!0,icon:c};s instanceof e?p.drawer={type:"list",items:s.items,linkTo:s}:"function"==typeof s&&function(e,t,i){p.click=function(n){t.call(e,n,i)}}(this,s,l),t>=0&&t<this.items.length?this.items.splice(t,0,p):this.items.push(p);var m=(0,n.default)('<li><a href="javascript:void(0)"></a></li>');if(m.attr("iid",i),u&&(m.addClass("wb-multi-mi"),"only"===u&&m.addClass("wb-multi-mi-only")),o||(o="---"),void 0===r&&(r=!1),void 0===a&&(a=!1),c&&m.children("a").append('<i class="'+c+'"></i>'),m.children("a").append("<span>"+o+"</span>"),d>0&&m.children("a").children("i").css({paddingLeft:d+"em"}),r&&m.addClass("active"),a&&m.addClass("disabled"),s instanceof e&&this.initItemSubmenuOnHover(m,s),"function"==typeof s){var g=s,f=l||null;m.data("__WB_MI_DATA__",f),m.children("a").bind("click",(function(e,t){!1!==g(e,void 0===t?f:t)&&(h.hide(),h.parentMenu&&(h.parentMenu.hide(),h.parentMenu.parentMenu&&h.parentMenu.parentMenu.hide()))}))}return t>=0&&t<this.menu.children("li").length?this.menu.children("li").eq(t).before(m):this.menu.append(m),m},e.prototype.getIndexById=function(e){var t=this.menu.children("[iid],.divider"),i=0;return n.default.each(t,(function(t,o){(0,n.default)(o).attr("iid")!==e||(i=parseInt(t,10))})),++i},e.prototype.addItem=function(e,t,i,n,o,s,r,a){return this.insertItemAt(-1,e,t,i,n,o,s,r,a)},e.prototype.removeItem=function(e){for(var t=this.items.length-1;t>=0;t--)if("id"in this.items[t]&&this.items[t].id===e){this.items.splice(t,1);break}var i=this.getItem(e);i&&i.remove()},e.prototype.addSeparator=function(e){void 0===e&&(e=-1);var t={type:"-"};e>=0&&e<this.items.length?this.items.splice(e,0,t):this.items.push(t);var i=(0,n.default)('<li class="divider"></li>');!isNaN(1*e)&&e>=0&&e<this.menu.children("li").length?this.menu.children("li").eq(e).before(i):this.menu.append(i)},e.prototype.fixSeparators=function(){for(var e=this.menu.children("li"),t=!1,i=null,n=0,o=e.length;n<o;n++){var s=e.eq(n);s.hasClass("divider")?t?(t=!1,i=s,s.show()):s.hide():"none"!==s.get(0).style.display&&(t=!0)}!t&&i&&i.hide()},e.prototype.getSize=function(){return this.menu.children("li").length},e.prototype.getItem=function(e){var t=this.menu.children("[iid="+e+"]");return 0==t.length?null:t.eq(0)},e.prototype.getItems=function(){var e=[];return this.menu.children("[iid]").each((function(){e.push({id:(0,n.default)(this).attr("iid"),elem:(0,n.default)(this)})})),e},e.prototype.setName=function(e,t,i){for(var o=null,s=this.items.length-1;s>=0;s--)if("id"in this.items[s]&&this.items[s].id===e){o=this.items[s];break}if(o){o.name=t;var r=this.getItem(e);if((r=r?(0,n.default)(r).children("a"):null)&&0!==r.length){var a=r.children("i");if(a.length>0&&a.detach(),"string"==typeof i&&(o.icon=i,""===i?(a.remove(),a=null):(a.length||(a=(0,n.default)("<i>")),a.attr("class",i))),r.empty(),a&&a.length>0&&r.append(a),r.append("<span>"+t+"</span>"),this.mobileDrawer){var l=this.mobileDrawer.getItemById(e);l&&l.setTitle(t,i)}}}},e.prototype.setAction=function(t,i,n){var o=this;void 0===n&&(n=!1);var s=this.getItem(t);if(s&&0!==s.length&&(i instanceof e&&s.append(i.menu),"function"==typeof i)){var r=s.data("__WB_MI_DATA__");n&&(s.children("a").unbind("click"),s.children("a").bind("click",(function(){o.hide(),o.parentMenu&&o.parentMenu.hide()})));var a=function(e,t){i(e,void 0===t?r:t)};s.children("a").bind("click",a),this.items.forEach((function(e){e.id===t&&(e.click=a)}))}},e.prototype.hasSubmenu=function(e){var t=this.getItem(e);return!(!t||0===t.length)&&(0,n.default)(t).find("ul").length>0},e.prototype.getSubmenu=function(e){var t=this.getItem(e);if(!t||0===t.length)return null;var i=(0,n.default)(t).find("ul");return i.length?i.wbGetClassInstance():null},e.prototype.setSubmenu=function(t,i){var n=this.getItem(t);n&&0!==n.length&&i instanceof e&&(this.removeSubmenu(t),i.parentMenu=this,n.addClass("dropdown-submenu"),n.append(i.menu),this.initItemSubmenuOnHover(n,i))},e.prototype.removeSubmenu=function(e){var t=this.getItem(e);t&&0!==t.length&&(0,n.default)(t).find(".icon-chevron-right, ul").remove()},e.prototype.getLocation=function(){return this.menu.parent().is("li")?this.menu.position():this.menu.parent().position()},e.prototype.setSelected=function(e,t){var i=this.getItem(e);i&&0!==i.length&&(t?i.addClass("active"):i.removeClass("active"))},e.prototype.setDisabled=function(e,t){var i=this.getItem(e);i&&0!==i.length&&(t?0===i.children(".cover").length&&(i.css({position:"relative"}),i.prepend((0,n.default)("<div>").addClass("cover cover-disabler").on("mousedown mouseup",(function(e){return e.stopPropagation(),e.preventDefault(),!1})))):i.children(".cover").remove())},e.prototype.setVisible=function(e,t){var i=this.getItem(e);if(i&&0!==i.length){i.css("display",t?"block":"none");for(var n=0,o=this.items;n<o.length;n++)(s=o[n])&&"id"in s&&s.id===e&&(s.visible=t);var s;this.mobileDrawer&&(s=this.mobileDrawer.getItemById(e))&&s.setVisible(t)}},e.prototype.trigger=function(e,t){var i=this.getItem(e);i&&0!==i.length&&i.trigger("click",[t])},e.prototype.setMultiMode=function(e){e?(this.menu.children("li").hide(),this.menu.children(".wb-multi-mi").show()):(this.menu.children("li").show(),this.menu.children(".wb-multi-mi-only").hide())},e.prototype.initItemSubmenuOnHover=function(e,t){t.parentMenu=this,e.addClass("dropdown-submenu"),e.append(t.menu),e.hover((function(){var i=(0,n.default)(window).width(),o=t.menu.outerWidth(!0),s=e.offset(),r=e.width(),a=e.children("ul.dropdown-menu");s.left+r+o>i?e.addClass("pull-left"):e.removeClass("pull-left"),a.children("li").each((function(e){if((0,n.default)(this).hasClass("active")){var t=(0,n.default)(this).outerHeight(!0),i=a.height();return a.scrollTop(t*e-i/2+t/2),!1}}))}),(function(){})),e.children("a").on("click",(function(e){e.stopPropagation()}))},e}();!function(){function e(e,t,i,o){var s=this;this._selected=!1,this._disabled=!1,this._multiSomething=!1,this._metaData=null,this._onClick=null,this.id=i,this.name=e,this.elem=(0,n.default)("<li>"),this.elemA=(0,n.default)("<a>").appendTo(this.elem),this._elemIcon=(0,n.default)("<i>").attr("href","javascript:void(0)"),this._elemText=(0,n.default)(document.createTextNode(e)).appendTo(this.elemA),this._elemSubmenu=(0,n.default)("<ul>").addClass("dropdown-menu"),t&&this.setIcon(t),this._items=[],this._onClick="function"==typeof o?o:null,this._onClick&&this.elemA.on("click",(function(e){return!s._disabled&&(s._onClick&&s._onClick.call(s,e),!0)}))}e.prototype.removeAllItems=function(){for(var e=0,t=this._items.splice(0,this._items.length);e<t.length;e++)t[e].elem.detach();this._elemSubmenu.detach()},e.prototype.removeItem=function(t){if(t instanceof e){var i=this._items.indexOf(t);i>=0&&(this._items.splice(i,1),t.elem.detach(),this._items.length<=0&&this._elemSubmenu.detach())}},e.prototype.setItems=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.addItem(n)}},e.prototype.addItem=function(e){this.insertItemAt(-1,e)},e.prototype.insertItemAt=function(t,i){var o=this;i instanceof e&&(this._items.push(i),this._items.length>0&&this._elemSubmenu.appendTo(this.elem),this.elem.hover((function(){if(o._disabled)return!1;var e=(0,n.default)(window).width(),t=o._elemSubmenu.outerWidth(!0),i=o.elem.offset(),s=o.elem.width();return i.left+s+t>e?(o.elem.addClass("pull-left"),o._elemSubmenu.css({left:-o._elemSubmenu.width()+"px"})):o.elem.removeClass("pull-left"),!0}),(function(){return!o._disabled})),t>=0&&t<this._elemSubmenu.children("li").length?this._elemSubmenu.children("li").eq(t).before(i.elem):this._elemSubmenu.append(i.elem))},e.prototype.setMetaData=function(e){this._metaData=e},e.prototype.setMultiSomethind=function(e){this._multiSomething=e,e?this.elem.addClass("wb-multi-mi"):this.elem.removeClass("wb-multi-mi")},e.prototype.setEnabled=function(e){this._disabled=!e,e?this.elem.removeClass("disabled"):this.elem.addClass("disabled")},e.prototype.setSelected=function(e){this._selected=e,e?this.elem.addClass("active"):this.elem.removeClass("active")},e.prototype.setIcon=function(e){this.icon=e,this._elemIcon.addClass(e),e?this._elemIcon.detach():this._elemIcon.prependTo(this.elemA)},e.prototype.setName=function(e){this.name=e,this._elemText.text(e)}}()},"./CustomContainer.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CustomContainer:function(){return r}});var n,o=i("./UIContainer.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){return e.call(this,"%inherit%"!==t?t:"div")||this}return s(t,e),t.prototype.buildInit=function(e,t){e.tag&&this.tagType!==e.tag&&(this.tagType=e.tag,this._elem=this._createElem()),e.content&&this._elem.append(e.content)},t.prototype.setContent=function(e){this._elem.empty().append(e)},t}(o.UIContainer)},"./DefaultUI/AdminOptions.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{buildAdminModeMarkers:function(){return s},buildAdminModeMenu:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);function s(e){var t=o()("<div>").css({fontSize:"12px",lineHeight:"14px",margin:"26px 0 0 0",opacity:.3,position:"absolute",textTransform:"uppercase",fontWeight:"bold"}).text("— "+__("Admin mode")+" —"),i=t.clone();e.prepend(t.css({left:-240})),e.append(i.css({right:-240})),setTimeout((function(){var e=t.outerWidth(),n=i.outerWidth();e>0&&t.css({left:-(e+50)}),n>0&&i.css({right:-(n+50)})}),40)}function r(e,t){e.isTemplateSavingAvailable()&&t.push({name:__("Save As..."),click:function(t){return t.stopPropagation(),e.showSaveAsTemplateDialog(),!1},active:e.isTemplateSavingEnabled(),featureMessage:e.isTemplateSavingEnabled()?"":"Please switch builder to English language"})}},"./DefaultUI/DefaultUI.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{DefaultUI:function(){return h}});var n,o=i("./PluginApi/UIManager.ts"),s=i("./DefaultUI/Toolbar.ts"),r=i("./BuilderEvent.ts"),a=i("./HelpSystem/Tooltip.ts"),l=i("./Service.ts"),c=i("./lib/jquery-1.11.3.min.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(t){var i=e.call(this,t)||this;i.toolbarHeight=0;var n=u()(document.body),o=new s.Toolbar(t,i);return i.toolbar=o,r.GlobalEvents.on("preview.show preview.hide",(function(e){e.visible?(o.elem.hide(),i.editor.css({paddingTop:i.toolbarHeight})):(o.elem.show(),i.editor.css({paddingTop:0}))})),r.GlobalEvents.on("contextmenu.show",(function(){return i.closeAll()})),i.editor=u()('<div id="body">').on("click",(function(){o.closeAll(),l.Service.contextMenu.hideAll()})),n.prepend(i.editor).prepend(o.elem),setTimeout((function(){t.init(i.editor),o.adjustSize(),o.onAdjustReady(),u()(window).on("resize",(function(){return i.handleResize()})),i.handleResize()}),0),r.GlobalEvents.on("notification.changed",(function(){setTimeout((function(){return i.handleResize()}),100)})),i}return d(t,e),t.prototype.handleResize=function(){var e=this.toolbar.elem.height();e&&(this.toolbarHeight=e,this.editor.css({paddingTop:this.toolbarHeight}))},t.prototype.lookupUIElement=function(e,t){if("control"==e){var i;if("config"==t)return new a.ScenarioStepSubject(u()("#wb_config_btn").eq(0),"left");if(i=t.match(/^config-(.+)$/)){var n=u()("#wb_config_btn").eq(0).find(".ico-tb-"+i[1]);if(n.length>0)return new a.ScenarioStepSubject(n.eq(0).parent().parent(),"left")}for(var o=0,s=this.toolbar.controlToolbar.tbItems;o<s.length;o++)if((p=(h=s[o]).getId())&&(p=p.replace(/^wb_fn_/i,"")),t===p)return new a.ScenarioStepSubject(h.elem,"left")}else{if("plugin"===e){for(var r=0,l=this.toolbar.widgetToolbar.tbItems;r<l.length;r++)if((p=(h=l[r]).getId())&&(p=p.replace(/^wb__/i,"")),t===p||t===h.name||("Layout"===h.name||h.name===__("Layout"))&&"LayoutElement"===t||("Text"===h.name||h.name===__("Text"))&&"TextArea"===t||("Media"===h.name||h.name===__("Media"))&&"Youtube"===t||("Maps"===h.name||h.name===__("Maps"))&&"GoogleMaps"===t||h.name===__("Picture")&&"Picture"===t||h.name===__("Gallery")&&"Gallery"===t||h.name===__("Shape")&&"Shape"===t||h.name===__("Line")&&"Line"===t||h.name===__("Button")&&"Button"===t||h.name===__("Form")&&"Form"===t||h.name===__("Menu")&&"Menu"===t||h.name===__("Commerce")&&"StoreCart"===t||h.name===__("Commerce")&&"Store"===t||h.name===__("Languages")&&"Languages"===t)return new a.ScenarioStepSubject(h.elem,null,10);for(var c=0,d=this.toolbar.widgetToolbar.collapsableGroups;c<d.length;c++){var h,p;if((p=(h=d[c]).getId())&&(p=p.replace(/^wb-group-/i,"")),t===p)return new a.ScenarioStepSubject(h.expander.elem,"left",0,0,!0)}return new a.ScenarioStepSubject(this.toolbar.widgetToolbar.elem,null,10)}if("preview"===e&&"close"===t&&this.toolbar.previewToolbar)return new a.ScenarioStepSubject(this.toolbar.previewToolbar.getCloseButton().getElem())}return null},t.prototype.closeAll=function(){this.toolbar.widgetToolbar.closeAllGroups(),this.toolbar.closeAll()},t.prototype.getToolbarHeight=function(){return this.toolbar.getHeight()},t.prototype.getWidgetToolbar=function(){return this.toolbar.getWidgetToolbar()},t.prototype.getControlToolbar=function(){return this.toolbar.getControlToolbar()},t}(o.UIManager);(0,o.registerUI)("default",h)},"./DefaultUI/HelpButton.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HelpButton:function(){return a}});var n=i("./MobileToolbar.js"),o=i("./BuilderEvent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=function(){function e(e,t){var i=this;this.elem=r()("<div>").addClass("wb_toolbar_help");var s=r()("<a>").addClass("wb_item");s.attr("title",__("Help")),s.append('<i class="ico-tb-help"></i>'),s.on("click",(function(){return e.showHelp(),e.forwardFlowStep(6,!0),!1})),this.elem.append(s),o.GlobalEvents.on("help.show help.hide help.playershow help.playerhide preview.show preview.hide",(function(e){i.setVisible(!e.visible)})),t&&t.addItem(n.Toolbar.buildItem({name:__("Help"),icon:"icon-wb-help",click:function(){e.showHelp()}}))}return e.prototype.setVisible=function(e){this.elem&&(e?this.elem.show():this.elem.hide())},e}()},"./DefaultUI/LanguageSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{LanguageSelector:function(){return r},flagFromLangCode:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);function s(e){var t,i=e?e.countryCode:"",n=e?e.code:"";switch(i){case"us":t="gb";break;case"cs":t="rs";break;case"ct":t="es-ct";break;case"gb":t="gb-wls";break;case"gl":t="gal";break;case"ae":t="eg";break;default:t=i}return"myv"===n&&(t="ru-mo"),"flag-icon-"+t}var r=function(){function e(e,t){var i=this;this.isOpen=!1;for(var n=e.getLanguage(),r=e.getLanguages(),a=0,l=0,c=r;l<c.length;l++)c[l].hidden||a++;var u=o()('<div class="lang-selector btn-group langs li">').append('<button type="button" class="btn"><i class="'+s(n)+'"></i></button>').append('\n\t\t\t\t<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">\n\t\t\t\t\t<span class="caret"></span>\n\t\t\t\t</button>\n\t\t\t'),d="lang-col-1";a>=4&&(d="lang-col-2"),a>=9&&(d="lang-col-3"),a>=16&&(d="lang-col-4");for(var h=o()('<ul class="dropdown-menu">').addClass(d).appendTo(u),p=e.getBaseUrl(),m=0,g=r;m<g.length;m++){var f=g[m];if(!f.hidden){var y=o()("<li>").appendTo(h);n&&f.id==n.id&&y.addClass("active"),o()("<a>").attr({href:p+f.code+"/"}).append('<i class="'+s(f)+'">').append(" "+f.name).appendTo(y)}}var b=this;u.find("a").on("click",(function(){return b.setOpen(!0),e.goToPage(null,o()(this).attr("href")),!1})),u.find("button").on("click touchend",(function(e){return"function"==typeof t&&t(),i.setOpen(!i.isOpen),e.stopPropagation(),e.preventDefault(),!1})),this.elem=u}return e.prototype.setOpen=function(e){e?(this.isOpen=!0,this.elem.addClass("open")):(this.isOpen=!1,this.elem.removeClass("open"))},e}()},"./DefaultUI/NotificationRibbon.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationRibbon:function(){return c}});var n,o=i("./UIComponent.ts"),s=i("./BuilderEvent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i){var n=e.call(this)||this;return n.onVisibilityChange=i,n.text="",n._elem.addClass("weeemsg alert alert-warning"),n.xElem=a()("<button>").addClass("close").attr({type:"button",dataDismiss:"alert"}).html("&times;").appendTo(n._elem),n.xElem.on("click",(function(){n.setVisible(!1),n.onVisibilityChange(!1)})),n.setVisible(!1),s.GlobalEvents.on("notification.changed",(function(e){n.setText(e.message,e.isHtml),e.message?(n.setVisible(!0),n.onVisibilityChange(!0)):(n.setVisible(!1),n.onVisibilityChange(!1))})),s.GlobalEvents.on("help.show help.hide help.playershow help.playerhide preview.show preview.hide",(function(e){var t=!(!n.text||e.visible);n.setVisible(t),n.onVisibilityChange(t)})),n}return l(t,e),t.prototype.setText=function(e,t){void 0===t&&(t=!1),this.xElem&&this.xElem.detach(),this._elem.empty(),this.text=e,"string"!=typeof e?this._elem.append(e):t?this._elem.html(e):this._elem.text(e),this.xElem&&this._elem.prepend(this.xElem)},t}(o.UIComponent)},"./DefaultUI/PageSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PageSelector:function(){return d}});var n=i("./MenuListControl.ts"),o=i("./MobileToolbar.js"),s=i("./WB_ComboBox.class.js"),r=i.n(s),a=i("./BuilderEvent.ts"),l=i("./Service.ts"),c=i("./lib/jquery-1.11.3.min.js"),u=i.n(c),d=function(){function e(e,t){var i=this;this.builder=e,this.mobileItem=null,this.isVisible=!0,this.elem=u()('<div id="page_selector" class="li">'),this.control=new n.MenuListControl(!1,!1,{onBeforeChange:function(e,t){return i.onBeforeChange(e,t)},onChange:function(e){return i.onChange(e)}}),this.control.elem.css({width:"110px"}).appendTo(this.elem),this.setVisible(!1),t&&(t.addItem(o.Toolbar.buildItem({name:__("Menu"),icon:"icon-wb-page-selector",drawer:{id:"mobile-menu",type:"list",items:[]}}),2),this.mobileItem=o.Drawer.get("mobile-menu")),a.GlobalEvents.on("page.load pages.changed",(function(){i.reloadPages(),i.setVisible(i.control.getItems().length>0)}))}return e.prototype.setVisible=function(e){e!=this.isVisible&&(this.isVisible=e,e?this.elem.show():this.elem.hide())},e.prototype.reloadPages=function(){if(this.control.reloadMenuList(),this.mobileItem){var e=this.control.getItems(),t=this.mobileItem;t.removeAllItems();for(var i=0;i<e.length;i++){var n=e[i].data;n&&"menuUID"in n&&function(e,i){t.addItem(o.Toolbar.buildDrawerItem({name:e.name,icon:"icon-wb-page-selector",click:function(){i.onChange(null,e.data)}}))}(e[i],this)}t.addItem(o.Toolbar.buildDrawerItem({name:__("Edit Menu"),icon:"icon-wb-edit",click:function(e){return r().closeAll(),l.Service.menu.editMenu(),e.stopPropagation(),!1}}))}},e.prototype.onBeforeChange=function(e,t){var i;return!((i="object"==typeof t&&t?t:this.control.getExtendedValue())&&("empty"===i.type||"anchor"===i.type))},e.prototype.onChange=function(e,t){var i;(i="object"==typeof t&&t?t:this.control.getExtendedValue())&&(i.navigate(),this.reloadPages())},e.prototype.setOpen=function(e){e?this.control.open():this.control.close()},e}()},"./DefaultUI/PluginToolbar.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{constructPluginToolbar:function(){return a}});var n=i("./WidgetToolbar.js"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./core/BuilderConfig.ts");function a(e,t,i){void 0===i&&(i=null);var o,a=[];i&&"object"==typeof i||(i={type:"widget",click:function(){if(this.id){var t=s()(window).width()/2,i=s()(window).height()/2;return e.addElementAt(this.id,t,i),!1}}});for(var l=0,c=e.getCompositionCollections();l<c.length;l++){var u=c[l];if("-"!=u.name){o="function"==typeof i.icon&&(o=i.icon(u.id))?o:null;var d={type:i.type,id:u.id,icon:o||u.icon,iconImage:!1,name:u.name,active:"function"==typeof i.isActive?i.isActive(u):r.wbConfig.isB2C&&u.inactive?n.TOOLBAR_ITEM_STATE_ACTIVE_BUT_GRAY:!u.inactive,click:i.click,noDraggable:!0};a.push(d)}else a.push({type:"-"})}return a}},"./DefaultUI/PreviewToolbar.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PreviewToolbar:function(){return g}});var n,o=i("./jquery-builder.ts"),s=i("./UIComponent.ts"),r=i("./Service.ts"),a=i("./DropdownBox.ts"),l=i("./WidgetToolbar.js"),c=i.n(l),u=i("./ModeManager.js"),d=i.n(u),h=i("./BuilderEvent.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){},g=function(e){function t(t){var i=e.call(this)||this;i.builder=t,i.customItem=new a.Item("","_",{id:"",name:"",size:0}),i.modeButtons={},i._elem.addClass("wb-preview-toolbar wb_toolbar"),wb_builder.addCSSRule(".wb-preview-body","top: 65px;");var n=Object.create(c().ToolbarItemGroup).init(),s=Object.create(c().ToolbarItemSeparator).init();s.elem.addClass("hidden-xs"),n.addItem(s);var l=r.Service.modeManager,u=l.getModes(),p=function(e){var t=u[e],o=Object.create(l.ToolbarItem).init("ico-tb ico-tb-mode-"+t,l.getModeName(t,!0));o.elem.tooltip({placement:"bottom",title:l.getModeName(t,!0)}),o.elem.addClass("wb-preview-mode-btn"),o.mode=t,o.setEnabled(!0),o.elem.on("click touchstart",(function(){i.selectSize(d().getModeWidth(t),!0)})),n.addItem(o),g.modeButtons[t]=o},g=this;for(var f in u)p(f);var y="ftp.marius.dev"===t.getSiteDomain()||"test.realmdev.lt"===t.getSiteDomain();i.fields=new m;for(var b={},v=[{id:"320",name:"Phone (320)",size:320},{id:"360",name:"U Phone (360)",size:360},{id:"768",name:"Tablet (768)",size:768},{id:"992",name:"Desktop (992)",size:992},{id:"1200",name:"Wide (1200)",size:1200},{id:"1920",name:"U Wide (1920)",size:1920}],_=0,C=v;_<C.length;_++){var w=C[_];b["#"+w.id]=w.size}r.Service.UIBuilder.buildLayout({type:"FlowLayout",align:"center",styleClass:"wb-preview-toolbar-items",css:{width:y?760:720,margin:"0 auto"},children:[{type:"Button",id:"closeBtn",styleClass:"hidden-xs",css:{margin:"4px 0 0 0"},text:__("Close"),click:function(){return t.hidePreview()}},{type:"DropdownBox",id:"res",styleClass:"hidden-xs",css:{width:200,margin:"4px 0 0 0"},change:function(e){var i=e.res.getSelectedItem(),n=i?i.getOriginal():null;t.setPreviewWidth(n?n.size:100)},options:v},{type:"Button",text:__("Reload"),css:{marginTop:4},click:function(){return t.reloadPreview()},ignore:!y},{type:"CustomContainer",content:n.elem}]},i._elem,i.fields);var T=(0,o.default)('<div style="position: absolute; right: 15px; top: 15px; font-weight: bold; font-size: 24px; color: #AAA; cursor: pointer; text-align: center; width: 34px; line-height: 34px;">&times;</div>');return T.on("click touchstart",(function(){return t.hidePreview()})),i._elem.append(T),h.GlobalEvents.on("preview.show preview.hide",(function(e){i.setVisible(e.visible)})),h.GlobalEvents.on("preview.size.changed",(function(e){"#"+e.width in b?(i.updateModeButtons(!1,e.width),i.selectSize(e.width)):i.setCustom(e.width)})),i}return p(t,e),t.prototype.updateModeButtons=function(e,t){var i=d().getModes(),n=d().MODE_PHONE,o=0;for(var s in i){var r=i[s],a=this.modeButtons[r];a.elem.attr("data-original-title",e?d().getModeName(r,!0):d().getModeName(r,!0,!0)),a.setActive(!1),a.setEnabled(!0),t>o&&t>=d().getModeWidth(r)&&(o=t,n=r)}this.modeButtons[n].setActive(!0)},t.prototype.setCustom=function(e){var t=this.fields.res;this.customItem.setTitle("Custom ("+e+")");var i=this.customItem.getOriginal();i&&(i.size=e),t.addItem(this.customItem),t.selectItem(this.customItem)},t.prototype.selectSize=function(e,t){void 0===t&&(t=!1);for(var i,n=this.fields.res,o=n.getItems(),s=-1,r=null,a=0;a<o.length;a++)i=parseInt(o[a].getId().split("x")[0],10),(Math.abs(e-i)<s||s<0)&&(s=Math.abs(e-i),r=o[a]);r&&(n.selectItem(r),t&&n.trigger("change"))},t.prototype.getCloseButton=function(){return this.fields.closeBtn},t}(s.UIComponent)},"./DefaultUI/SettingsBox.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SettingsBox:function(){return a}});var n=i("./jquery-builder.ts"),o=i("./Service.ts"),s=i("./MobileToolbar.js"),r=i("./BuilderEvent.ts"),a=function(){function e(e,t,i){var s=this;this._isOpen=!1,this._opts||(this._opts={}),i&&i instanceof Object&&(this._opts=n.default.extend({},!0,i));var r="function"==typeof this._opts.onOpen?this._opts.onOpen:null,a=function(e){return r&&r(e),s.setOpen(!s.isOpen()),e.stopPropagation(),e.preventDefault(),s._isOpen&&o.Service.HelpSystemPlayer.notify("toolbar-ctrl-config-click"),!0};(0,n.default)(document.body).on("click",(function(){s.setOpen(!1)})),this._elem=(0,n.default)("<div>").addClass("btn-group li wb-config").attr({id:"wb_config_btn"}),this._btn=(0,n.default)("<button>").attr({type:"button"}).addClass("btn").append((0,n.default)("<i>").addClass("icon-cog-big")).appendTo(this._elem).on("click",a),this._btnDrop=(0,n.default)("<button>").attr({type:"button"}).addClass("btn dropdown-toggle").append((0,n.default)("<span>").addClass("caret")).appendTo(this._elem).on("click",a),this._submenu=(0,n.default)("<ul>").addClass("dropdown-menu").appendTo(this._elem),this._items=[],this.addDefaultItems(e,t),this._elem.insertAfter((0,n.default)("#settings-toolbar-cont").children().eq(0))}return e.prototype.setOpen=function(e){e?this._elem.hasClass("open")||this._elem.addClass("open"):this._elem.hasClass("open")&&this._elem.removeClass("open"),this._isOpen=!!e},e.prototype.isOpen=function(){return this._isOpen},e.prototype.getElem=function(){return this._elem},e.prototype.addItem=function(e,t,i,n,o,s){var r=new l(e,this,t,i,n,s);return this._submenu.append(r.getElem()),o&&"function"==typeof o&&o.call(r),this._items.push(r),r},e.prototype.setSeparatorForItemVisible=function(e,t){var i=this._items.indexOf(t),n=this._items.length;if(!(i<0)){var o=null;0==i&&n>1&&this._items[i+1].isSeparator()?o=t.getElem().next():i>0&&this._items[i-1].isSeparator()&&(n<=i+1||this._items[i+1].isSeparator())&&(o=t.getElem().prev()),o&&(e?o.show():o.hide())}},e.prototype.getItem=function(e){for(var t=0,i=this._items;t<i.length;t++){var n=i[t];if(n.id==e)return n}return null},e.prototype.addDefaultItems=function(e,t){var i=[];if(e.isComposerMode()||(i.push({name:__("SEO"),icon:"ico-tb-seo",click:function(){return e.showSiteSEODialog()}}),i.push({name:__("Background"),icon:"ico-tb-background",click:function(){return e.showSiteBackgroundDialog()}})),i.push({name:__("Styles"),icon:"ico-tb-styles",click:function(){return e.showSiteStylesDialog()}}),e.isComposerMode()||(i.push({name:__("Favicon"),icon:"ico-tb-favicon",click:function(){return e.showSiteFaviconDialog()}}),i.push({name:__("Settings"),icon:"ico-tb-settings",click:function(){return e.showSitePropertiesDialog()}})),i.push("-"),!e.isComposerMode()&&!e.isLayoutPopupMode()){var n=this;i.push({name:__("Landing"),icon:"ico-tb-landing",click:function(){this.isChecked()?(this.setChecked(!1),e.setSiteLanding(!1)):(this.setChecked(!0),e.setSiteLanding(!0))},tooltip:{title:__("If checked then pages of main site menu will be published as one page with common header and footer of homepage"),placement:"left"},init:function(){var e=this;r.GlobalEvents.on("landing.changed",(function(t){e.setChecked(t.value),e.setVisible(t.value),n.setSeparatorForItemVisible(t.value,e)}))},checked:e.getSiteLanding()})}var o={items:i};e.isFullScreenSupported()&&(o.items.push("-"),o.items.push({name:__("Full Screen"),icon:"ico-tb-fullscreen",click:function(){return e.toggleFullScreen()}})),o.items.push("-"),o.items.push({name:__("Log Out"),icon:"ico-tb-logout",click:function(){return e.logout()}}),this.buildFromDefinition(o),t&&t.addItem(s.Toolbar.buildItem({name:__("Settings"),icon:"icon-cog-big",drawer:{type:"list",items:o.items}}),2)},e.prototype.buildFromDefinition=function(e){var t,i,n;if("items"in e&&e.items.length>0)for(t=0;t<e.items.length;t++)"string"!=typeof(n=e.items[t])||"-"!==n?"object"==typeof n&&null!==n&&(i=this.addItem(n.name,n.icon,n.click,n.id,n.init,n.tooltip),"checked"in n&&i.setChecked(!!n.checked)):this.addItem("-")},e}(),l=function(){function e(e,t,i,o,s,r){this._checked=!1,this._isSeparator=!1,this._visible=!0,this.id=s,this._elem=(0,n.default)("<li>"),this._parent=t,"-"===e?(this._isSeparator=!0,this._elem.addClass("divider")):(this._aElem=(0,n.default)("<a>").attr({href:"javascript:void(0)",title:e}).appendTo(this._elem),i&&this._aElem.append((0,n.default)("<i>").addClass("ico-tb "+i)),e&&this._aElem.append((0,n.default)("<span>").html(e)),"function"==typeof o&&function(e,t){t._aElem.on("click",(function(i){t._parent&&"function"==typeof t._parent.setOpen&&t._parent.setOpen(!1),e.call(t,i)}))}(o,this),s&&this._aElem.attr({id:s}),r&&this._elem.tooltip(r))}return e.prototype.getElem=function(){return this._elem},e.prototype.isSeparator=function(){return this._isSeparator},e.prototype.setChecked=function(e){e?this._aElem.hasClass("checked")||this._aElem.addClass("checked"):this._aElem.hasClass("checked")&&this._aElem.removeClass("checked"),this._checked=!!e},e.prototype.isChecked=function(){return this._checked},e.prototype.setVisible=function(e){this._visible!=e&&(this._visible=e,e?this._elem.show():this._elem.hide())},e}()},"./DefaultUI/Toolbar.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Toolbar:function(){return E}});var n=i("./jquery-builder.ts"),o=i("./core/BuilderConfig.ts"),s=i("./DefaultUI/PageSelector.ts"),r=i("./DefaultUI/LanguageSelector.ts"),a=i("./WidgetToolbar.js"),l=i.n(a),c=i("./Service.ts"),u=i("./HelpSystem/HelpSystemPlayer.ts"),d=i("./RemoteLoginDialog.ts"),h=i("./WebsiteImporter.ts"),p=i("./MobileToolbar.js"),m=i.n(p),g=i("./DefaultUI/AdminOptions.ts"),f=i("./DefaultUI/PluginToolbar.ts"),y=i("./BuilderEvent.ts"),b=i("./DefaultUI/SettingsBox.ts"),v=i("./DefaultUI/HelpButton.ts"),_=i("./DefaultUI/NotificationRibbon.ts"),C=i("./DefaultUI/PreviewToolbar.ts"),w=i("./WB_Dialog.class.js"),T=i.n(w),E=function(){function e(e,t){var i=(0,n.default)('<div class="wrp">'),o=e.getLanguage(),s=(0,n.default)('<div id="head" class="'+(o?"lang-"+o.code:"")+'" data-spy="affix">');s.append(this.buildToolbarControl(e,s,i)).append((0,n.default)('<div id="head-tools">').append(i)).append('<div class="sh">').append(new _.NotificationRibbon(e,(function(){return t.handleResize()})).getElem()),this.elem=s}return e.prototype.adjustSize=function(){this.controlToolbar.ajustSize()},e.prototype.closeAll=function(){this.pageSelector.setOpen(!1),this.languageSelector.setOpen(!1),this.settingsSelector.setOpen(!1)},e.prototype.getHeight=function(){return this.elem.outerHeight()},e.prototype.getWidgetToolbar=function(){return this.widgetToolbar},e.prototype.getControlToolbar=function(){return this.controlToolbar},e.prototype.buildUIItems=function(e,t,i){var n,o,s,r,a,l=0;for(var c in e)if((o=e[c]).order||0===o.order){a=!1;for(var u=0,d=0;d<t.length;d++)if(r=!0,"items"in(s=t[d])&&s.items instanceof Array){for(var h=0;h<s.items.length;h++)if((!("id"in(n=s.items[h]))||!/^wb_ui_item_/.test(n.id))&&(u+=20,o.order<u)){t[d].items.splice(h,0,{type:"item",id:"wb_ui_item_"+l++,icon:o.img,iconImage:!0,name:o.name,url:o.url?o.url.replace("{{siteDomain}}",i.getSiteDomain()):"javascript:void(0)"}),a=!0,r=!1;break}if(!r)break}a||t.push({type:"item",id:"wb_ui_item_"+l++,icon:o.img,iconImage:!0,name:o.name,url:o.url?o.url.replace("{{siteDomain}}",i.getSiteDomain()):"javascript:void(0)"})}},e.prototype.buildToolbarControl=function(e,t,i){var a,p,_=(0,n.default)('<div id="head-control">'),w=(0,n.default)('<div class="wrp">').appendTo(_),E=(0,n.default)('<div class="logo">').appendTo(w),I=e.getLogoUrl();I&&E.css({backgroundImage:"url('"+I+"')",backgroundPosition:(e.isRtl()?"right":"left")+" center"}),e.isAdminMode()&&(0,g.buildAdminModeMarkers)(w);var x=new r.LanguageSelector(e,(function(){p.setOpen(!1),a.setOpen(!1),c.Service.contextMenu.hideAll()})),S=(0,n.default)('<div class="wrp2 ctrl-right" id="settings-toolbar-cont">').appendTo(w),k=e.getSignUpInfo();if(k){var D=(0,n.default)('<button type="button" class="btn btn-default" id="test-sign-up-btn"></button>').css({position:"absolute",right:-100,opacity:0}).text(k.title).append('<span class="icon-wb-play-green" style="margin-left: 10px;"></span>').on("click",(function(){k&&window.open(k.url)})).appendTo(S);setTimeout((function(){return D.css({right:-(D.outerWidth(!0)+10),opacity:1})}),50)}var O,R,P,L=(0,n.default)('<div class="wrp2 ctrl-left" id="control-toolbar-cont">').appendTo(w),A=e.isPublishAvailable(),M=function(t){return u.HelpSystemPlayer.notify("toolbar-ctrl-save-click"),e.publish(),t.stopPropagation(),!1},B=function(t){var i=this,n=this.getIcon();return this.setIcon("fa fa-spinner fa-pulse"),u.HelpSystemPlayer.notify("toolbar-ctrl-preview-click"),e.preview().always((function(){return i.setIcon(n)})),t.stopPropagation(),!1},N=function(t){return u.HelpSystemPlayer.notify("toolbar-ctrl-change-click"),e.showTemplateChooser(),t.stopPropagation(),!1},F=function(t){return e.resetSite(!0),t.stopPropagation(),!1},K=function(e,t){},V=[];d.RemoteLoginDialog.isPlainPublish()||e.isComposerMode()||(V=[{id:"wb_fn_save_publish",name:__("Save and publish"),active:!!A,help:A?__("Save site and Publish it to the internet"):__("Unavailable in test mode"),helpPlacement:"right",click:M},{type:"-"},{id:"wb_fn_save_save",name:__("Save"),help:__("Save site without Publishing it"),helpPlacement:"right",click:O=function(t){return u.HelpSystemPlayer.notify("toolbar-ctrl-save-click"),e.save(!0),t.stopPropagation(),!1}},{id:"wb_fn_save_backup",name:__("Backup/Restore"),click:R=function(t){return e.showBackupRestoreDialog(),t.stopPropagation(),!1}}],e.isAdminMode()&&(0,g.buildAdminModeMenu)(e,V));var H,j=[];e.isComposerMode()?j.push({id:"wb_fn_save",icon:"ico-tb ico-tb-save",name:__("Save"),click:function(){return e.saveElementComposition()}}):(j.push({id:"wb_fn_save",icon:"ico-tb ico-tb-save",name:__("Save and publish"),submenu:V,click:e.isTouchDevice()?null:M}),j.push({id:"wb_fn_preview",icon:"ico-tb ico-tb-preview",name:__("Preview"),title:__("Preview site"),submenu:e.getPanelUrl()?[{id:"wb_fn_preview_preview",name:__("Preview"),click:B},{id:"wb_fn_preview_website",name:__("Go to my website"),click:function(t){window.open(e.getSiteUrl()),t.stopPropagation()}}]:[],click:B})),!o.wbConfig.testMode&&o.wbConfig.isB2C&&/\.site\.pro$/.test(wb_builder.siteDomain)&&j.push({id:"wb_fn_domain",icon:"ico-tb ico-tb-domains",name:__("Domains"),title:__("Buy domain"),click:function(){if(!H){(H=new(T())).setTitleVisible(!1),H.addButton(__("Close"));var e=(0,n.default)('<iframe src="'+o.wbConfig.b2cDomainsUrl+'" style="width: 100%; height: 130px; border: none;">');(0,n.default)(window).on("message",(function(t){t.originalEvent.data&&"resize"===t.originalEvent.data.action&&t.originalEvent.data.value&&e.css("height",t.originalEvent.data.value+35+"px")})),H.setContent(e)}H.show()}}),j.push({type:"-"}),j.push({id:"wb_fn_undo",icon:"ico-tb ico-tb-undo",name:__("Undo"),click:function(){return e.historyUndo(),!1}}),j.push({id:"wb_fn_redo",icon:"ico-tb ico-tb-redo",name:__("Redo"),click:function(){return e.historyRedo(),!1}}),e.isComposerMode()||e.isLayoutPopupMode()||(j.push({type:"-"}),j.push({id:"wb_fn_change",icon:"ico-tb ico-tb-reset",name:__("New/Reset"),submenu:[{id:"wb_fn_change_new",name:__("Change template"),click:N,hidden:!e.isTemplateSelectorVisible()},{id:"wb_fn_change_reset",name:__("Reset"),click:F,hidden:!e.isResetTemplateButtonVisible()},{id:"wb_fn_change_import",name:__("Import"),active:e.isImportAvailable(),hidden:!e.isImportVisible(),beta:!0,featureMessage:o.wbConfig.isB2C?__("Available in Premium version"):__("Ask administrator to enable this feature"),click:P=function(e){return h.WebsiteImporter.showImportDialog(),e.stopPropagation(),!1}}],click:e.isTouchDevice()?null:N}));var U=[{type:"group",id:"wb_save_group",collapsable:!0,collapseCallback:K,icon:"ico-tb ico-tb-save",borderless:!1,name:__("Save"),items:j}],z=[];wb_builder.uiDef&&"object"==typeof wb_builder.uiDef&&wb_builder.uiDef.toolbars&&"object"==typeof wb_builder.uiDef.toolbars&&wb_builder.uiDef.toolbars["control-toolbar-cont"]&&"object"==typeof wb_builder.uiDef.toolbars["control-toolbar-cont"]&&wb_builder.uiDef.toolbars["control-toolbar-cont"].items&&(wb_builder.uiDef.toolbars["control-toolbar-cont"].items,1)&&(z=wb_builder.uiDef.toolbars["control-toolbar-cont"].items),this.buildUIItems(z,U,e);var W=Object.create(l()).init(U);W.setId("wb_toolbar_ext"),W.elem.css("margin-right","6px").appendTo(L);var G=W.getItemByIdRe("wb_fn_undo"),$=W.getItemByIdRe("wb_fn_redo");y.GlobalEvents.on("history.changed",(function(){e.isHistoryUndoAvailable()?G&&G.elem.css({opacity:1}):G&&G.elem.css({opacity:.3}),e.isHistoryRedoAvailable()?$&&$.elem.css({opacity:1}):$&&$.elem.css({opacity:.3})})),W.elem.css({visibility:"hidden"}),W.ajustSize(),this.controlToolbar=W;var q=(0,f.constructPluginToolbar)(e,K),Y=Object.create(l()).init(q,"wb_toolbar_all");Y.setId("wb_toolbar"),i.append(Y.elem),Y.ajustSize();for(var Z=0,X=Y.tbItems;Z<X.length;Z++){var J=X[Z];J.setVisuallyDragable(J.enabled),e.bindCompositionButton({id:J.id,name:J.name,icon:J.iconVal,elem:J.elem})}var Q=Y.getToolbarItem(0);Q&&(0,n.default)(window).width()>485&&(setTimeout((function(){Q.elem.tooltip("show")}),5e3),e.isTouchDevice()&&setTimeout((function(){Q.elem.tooltip("hide")}),1e4),Q.elem.one("hover touchstart",(function(){Q.elem.tooltip("hide")})),(0,n.default)(document.body).on("show.bs.modal",(function(){Q.elem.tooltip("hide")}))),(0,n.default)(window).on("scroll resize orientationchange",(function(){(0,n.default)(".tooltip").each((function(){var e=(0,n.default)(this).data("bs.tooltip");e&&e.show()}))})),this.widgetToolbar=Y;var ee=[{name:__("Publish"),icon:"ico-tb-save",click:M},{name:__("Save"),icon:"ico-tb-savedraft",click:O},{name:__("Preview"),icon:"ico-tb-preview",click:B},{name:__("Backup"),icon:"ico-tb-backup",click:R},{name:__("Change template"),icon:"ico-tb-changetpl",click:N},{name:__("Reset"),icon:"ico-tb-resettpl",click:F}];e.isImportAvailable()&&ee.push({name:__("Import"),icon:"ico-tb-import",click:P});var te={items:[{name:__("Publish"),icon:"ico-tb-save",drawer:{type:"list",items:ee}},{name:__("Language"),icon:(0,r.flagFromLangCode)(e.getLanguage()),drawer:{type:"lang-grid",items:function(){for(var t=e.getLanguages(),i=e.getBaseUrl(),n=[],o=function(e){if(!e.active||e.hidden)return"continue";n.push({name:e.name,icon:(0,r.flagFromLangCode)(e),click:function(t){t.stopPropagation(),location.href=i+e.code}})},s=0,a=t;s<a.length;s++)o(a[s]);return n}()}},{name:__("Add"),icon:"icon-wb-add",drawer:{id:"compositions",type:"list",items:q}}]},ie=new(m().Toolbar)(te);return t.append(ie.getElem()),a=new s.PageSelector(e,ie),p=new b.SettingsBox(e,ie,{onOpen:function(){x.setOpen(!1),a.setOpen(!1),c.Service.contextMenu.hideAll()}}),e.isComposerMode()||S.append(a.elem),S.append(p.getElem()).append(x.elem),e.isComposerMode()||new v.HelpButton(e,ie).elem.appendTo(document.body),(this.previewToolbar=new C.PreviewToolbar(e)).getElem().appendTo(document.body),this.pageSelector=a,this.languageSelector=x,this.settingsSelector=p,_},e.prototype.onAdjustReady=function(){this.controlToolbar.elem.css({visibility:""})},e}()},"./DragNDropZone.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{init:function(){return _}});var n,o,s=i("./ElementRegister.ts"),r=i("./Service.ts"),a=i("./WB_Preloader.class.js"),l=i.n(a),c=i("./WB_MsgDialog.class.js"),u=i.n(c),d=i("./CommonTypes.ts"),h=i("./tools/CropTool.ts"),p=i("./util/DropZoneCalculator.ts"),m=i("./util/HistoryUtil.ts"),g=i("./util/WindowAutoScrollUtil.ts"),f=i("./lib/jquery-1.11.3.min.js"),y=i.n(f),b=new g.WindowAutoScrollUtil,v=function(){function e(e){var t=this;this.elem=e,this.hover=!1,this.hoverTimeout=0,this.cleaned=!0,this.preloader=null,this.alertDlg=null,this.uploadingBackup=!1,this.uploadFileCount=0,this.uploadedFiles=0,this.rFiles=[],this.errors=[],this.dropPosition=null,this.dropAreas=null,this.droppedOnDropAreas=null,this.placeholder=null,this.elem.on("drop",(function(e){return t.drop(e)})),this.elem.on("dragover dragenter",(function(e){return t.dragOver(e)})),this.elem.on("dragend dragleave",(function(e){return t.dragEnd(e)})),this.form=y()("<form>").attr({action:o.getUrl("upload")+"?mode=all&return=1",method:"post",enctype:"multipart/form-data"}).hide().appendTo(this.elem),this.form.fileupload({dataType:"json",fileInput:null,dropZone:null,pasteZone:null,sequentialUploads:!0,autoUpload:!0,disableImagePreview:!0,disableImageResize:!1,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!0,loadImageMaxFileSize:5e7,maxFileSize:n.maxUploadFileSize}).on("fileuploadprocess",window.prepareAutoScaleOptions).on("fileuploadprocessfail fileuploadfail",(function(e){t.uploadedFiles++,t.preloader&&t.preloader.setProgress(100*t.uploadedFiles/t.uploadFileCount),t.uploadingBackup||t.errors.push(__("Unknown error")),t.uploadedFiles>=t.uploadFileCount&&(t.preloader&&t.preloader.setVisible(!1),!t.uploadingBackup&&t.rFiles.length&&t.createElements(e,t.rFiles),t.errors.length>0&&t.showError(t.errors),t.dropPosition=null,t.droppedOnDropAreas=null)})).on("fileuploadalways fileuploadprocessfail",(function(){t.uploadingBackup&&(location.href=""+location.href)})).on("fileuploadprogressall",(function(e,i){t.preloader&&t.preloader.setProgress(100*(t.uploadedFiles+(i.total?i.loaded/i.total:0))/t.uploadFileCount)})).on("fileuploaddone",(function(e,i){t.uploadedFiles++;var n=i.result;n.error?t.errors.push("string"==typeof n.error?n.error:n.error.message):t.rFiles.push(n),t.preloader&&t.preloader.setProgress(100*t.uploadedFiles/t.uploadFileCount),t.uploadedFiles>=t.uploadFileCount&&(t.preloader&&t.preloader.setVisible(!1),!t.uploadingBackup&&t.rFiles.length&&t.createElements(e,t.rFiles),t.errors.length>0&&t.showError(t.errors),t.dropPosition=null,t.droppedOnDropAreas=null)}))}return e.getDialogTitle=function(){var e=__("uploading...");return(e=e.replace("...","").replace("…","")).substring(0,1).toUpperCase()+e.substring(1)},e.prototype.createElement=function(e,t){var i={class:t,content:null};i.content={},"Picture"===t?i.content.src=e:"Gallery"===t?i.content.images=e.slice():"TextArea"===t&&(i.content.text=e);var o=null;return s.ElementRegister.createElement(t,i,!0,!1,(function(i){if(o=i,r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-edit-start",i),"Picture"===t){var s=i;s.setSrc(e,(function(){s.resetImageSize(),s.getWidth()>400&&(s.setSize(400,400*s.getHeight()/s.getWidth()),s.crop||(s.crop=new h.CropRectangle),s.crop.width=s.getWidth(),s.crop.height=s.getHeight(),s.crop.x=0,s.crop.y=0,s.updateImageSize()),s.getLayoutConstraints()!=d.ChildrenLayoutType.Absolute&&(s.minWidth=s.width,s.useMinWidth=!0,s.minHeight=s.height,s.useMinHeight=!0,s.maxWidth=s.width,s.useMaxWidth=!0,s.maxHeight=s.height,s.useMaxHeight=!0,s.updateStyle())}))}else if("Gallery"===t);else if("TextArea"===t){var a=i;a.setValue(e),a.setHtml(e),a.onResize()}r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-edit-end",i),n.setPageModified(!0)})),o},e.prototype.createElements=function(e,t){if(!t||t.length<=0)return!1;var i,o,s,a,l=[],c=[],u=y()(window),d=this.dropPosition?this.dropPosition.left:u.width()/2+window.scrollX,h=this.dropPosition?this.dropPosition.top:u.height()/2+window.scrollY;r.Service.element.unselectAll();var p=[];for(i=0;i<t.length;i++)"image"===t[i].dataType?l.push(n.makeRelUrl(t[i].data)):"text"===t[i].dataType?p.push(this.createElement(t[i].data.replace(/[\n\r]+/gi,"<br/>"),"TextArea")):c.push(t[i].data);if(l.length>3)p.push(this.createElement(l,"Gallery"));else if(l.length>0)for(i=0;i<l.length;i++)p.push(this.createElement(l[i],"Picture"));if(c.length>0){for(o="",i=0;i<c.length;i++)o+='<p><a data-type="file" data-url="'+(s=n.makeRelUrl(c[i]))+'" href="'+s+'">'+((a=s.match(/^.*\/([^\/]+)$/))?a[1]:s)+"</a></p>";p.push(this.createElement(o,"TextArea"))}return this.droppedOnDropAreas&&(this.droppedOnDropAreas.dropElementsAt(p,d,h,window.scrollX,window.scrollY,!0),(0,m.createAddElementsHistoryRecord)(p)),!0},e.prototype.showError=function(t){this.alertDlg||(this.alertDlg=new(u())(void 0,void 0,null,null,!0),this.alertDlg.setTitle(e.getDialogTitle()));var i,n="";if(t instanceof Array)for(i=0;i<t.length;i++)n+=__pr(t[i]);else n=__pr(t);this.alertDlg.setMessage(n),this.alertDlg.setVisible(!0)},e.prototype.handleUpload=function(t,i){if(this.uploadingBackup||!t||t.length<=0)return!1;var s;for(this.preloader||(this.preloader=new(l())(e.getDialogTitle())),this.uploadedFiles===this.uploadFileCount&&(this.preloader.reset(),this.preloader.setVisible(!0),this.preloader.setProgress(100),this.uploadFileCount=0,this.uploadedFiles=0,this.rFiles=[],this.errors=[]),s=0;s<t.length;s++)if((t[s].name+"").match(/^.+\.sitebuilder$/i))return n.maxUploadBackupFileSizeInt&&t[s].size>n.maxUploadBackupFileSizeInt?(this.form.trigger("fileuploaddone",[{result:{error:{message:__("File size is larger than allowed")+" ("+__("max")+": "+n.maxUploadBackupFileSize+")"}}}]),this.uploadFileCount=this.uploadedFiles,!1):(this.uploadFileCount++,this.uploadingBackup=!0,this.form.fileupload("add",{paramName:"pro_upl",files:[t[s]],url:o.getUrl("restore_project"),formData:{backup_type:"file"}}),!0);for(s=0;s<t.length;s++){if(n.maxUploadBackupFileSizeInt&&t[s].size>n.maxUploadBackupFileSizeInt&&"image/jpeg"!=t[s].type&&"image/jpg"!=t[s].type&&"image/png"!=t[s].type&&"image/gif"!=t[s].type)return this.form.trigger("fileuploaddone",[{result:{error:{message:__("File size is larger than allowed")+" ("+__("max")+": "+n.maxUploadBackupFileSize+")"}}}]),this.uploadFileCount=this.uploadedFiles,!1;this.uploadFileCount++,this.form.fileupload("add",{paramName:"file",files:[t[s]],url:this.form.attr("action"),formData:{backup_type:"file"}})}return!1},e.prototype.drop=function(e){this.cleaned=!1,e.preventDefault(),e.stopPropagation();try{this.droppedOnDropAreas=this.dropAreas,this.dropPosition={left:e.originalEvent.clientX+window.scrollX,top:e.originalEvent.clientY+window.scrollY};var t=void 0,i=[],n=e.originalEvent.dataTransfer;if(n&&n.items){for(t=0;t<n.items.length;t++)if("file"===n.items[t].kind){var o=n.items[t].getAsFile();o&&i.push(o)}this.handleUpload(i,e)}else if(n){for(t=0;t<n.files.length;t++)i.push(n.files[t]);this.handleUpload(i,e)}}catch(t){throw this.dragEnd(e),t}this.dragEnd(e)},e.prototype.dragOver=function(e){var t=this;if(!r.Service.textArea.isMousedowned()){this.hover=!0,e.preventDefault(),e.stopPropagation(),this.dropAreas||(this.dropAreas=new p.DropZoneCalculator(wb_builder.bodyInstance.getChildren(),null,{left:-50,top:-50},{width:100,height:100})),this.placeholder||(this.placeholder=y()('<div class="wb-drag-placeholder hidden">').appendTo(document.body));var i=e.originalEvent.clientX+window.scrollX,n=e.originalEvent.clientY+window.scrollY;b.start({left:e.originalEvent.clientX,top:e.originalEvent.clientY},(function(e,o){if(t.dropAreas&&t.placeholder){var s=t.dropAreas.findAreaAt(o.left,o.top,window.scrollX,window.scrollY);if(s){t.placeholder.removeClass("hidden").css({left:s.type===p.DropZoneAreaType.IntoAbsolute?o.left+s.helperPosition.left:s.helperPosition.left,top:s.type===p.DropZoneAreaType.IntoAbsolute?o.top+s.helperPosition.top:s.helperPosition.top,width:s.helperSize.width,height:s.helperSize.height});var r="";switch(s.type){case p.DropZoneAreaType.Before:r=__("Insert before")+" "+s.targetA.getName()+s.targetA.index;break;case p.DropZoneAreaType.After:r=__("Insert after")+" "+s.targetA.getName()+s.targetA.index;break;case p.DropZoneAreaType.Between:r=__("Insert between")+" "+s.targetA.getName()+s.targetA.index+" "+__("and")+" "+s.targetB.getName()+s.targetB.index;break;case p.DropZoneAreaType.IntoResponsive:case p.DropZoneAreaType.IntoAbsolute:r=__("Insert into")+" "+s.targetA.getName()+s.targetA.index}""!==r?wb_builder.bodyInstance.showInfoTip(r,i,n+32,"center"):wb_builder.bodyInstance.hideInfoTip()}else t.placeholder.addClass("hidden"),wb_builder.bodyInstance.hideInfoTip()}else b.stop()}))}},e.prototype.dragEnd=function(e){e.preventDefault(),e.stopPropagation(),"dragleave"===e.type&&this.elem[0].contains(e.relatedTarget)||(b.stop(),this.hover=!1,this.dropAreas&&(this.dropAreas=null),this.placeholder&&(this.placeholder.addClass("hidden"),wb_builder.bodyInstance.hideInfoTip()))},e}();function _(e,t){n=e,o=t,("DataTransfer"in window||"DataTransferItemList"in window)&&"FormData"in window&&new v(n.body)}},"./DropdownBox.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{DropdownBox:function(){return h},Item:function(){return p}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./util/ComparisonUtil.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=null,u=null,d=-1,h=function(e){function t(t){var i=e.call(this)||this;if(i._open=!1,i._items=[],i._itemsIndex={},i._selectedItem=null,i._itemMouseEnterFunc=null,i._itemMouseLeaveFunc=null,i.fields={},i.onSelect=null,i.editItem=null,i.optionsSource=null,i.multiselect=!1,i.addSelectAll=!1,i.multilevel=!1,i.parentMustBeSelected=!1,i.noSearch=!1,i.useHtmlInput=!1,i.onEditFunc=null,i.selectAllItems={},i.alignment="left",i.isSmall=!1,i.isMenuRel=!1,i._dropdown=s()("<div/>").addClass("input-group wb-combobox-controll").on("keydown",(function(e){if(i._open&&(!i._searchInput||!i._searchInput.is(":focus"))){var t,n,o,s=i._menu.scrollTop(),r=i._menu.outerHeight(),a=p.fromElem(i._menu.children("li.hover").eq(0));if(!a&&i._selectedItem)a=i._selectedItem;else if(!a&&i._items.length>0)a=i._items[0];else if(!a)return;return 13===e.which?(i.setOpen(!1),i.selectItem(a),i.onValueChanged(),e.preventDefault(),e.stopPropagation(),!1):27===e.which?(i.setOpen(!1),e.preventDefault(),e.stopPropagation(),!1):38===e.which?((t=p.fromElem(a._elem.prev("li")))&&(a._elem.removeClass("hover"),t._elem.addClass("hover"),(n=t._elem.get(0).offsetTop)<=s&&i._menu.scrollTop(n)),e.preventDefault(),e.stopPropagation(),!1):40===e.which?((t=p.fromElem(a._elem.next("li")))&&(a._elem.removeClass("hover"),t._elem.addClass("hover"),(n=t._elem.get(0).offsetTop)+(o=t._elem.outerHeight())>=s+r&&i._menu.scrollTop(n-r+o)),e.preventDefault(),e.stopPropagation(),!1):void 0}})).on("keypress",(function(e){if(i._open&&(!i._searchInput||!i._searchInput.is(":focus"))){var t,n,o,s=d>=0?d:0,r=String.fromCharCode(e.which).toLowerCase(),a=i._menu.scrollTop(),l=i._menu.outerHeight();for(t=0;t<i._items.length;t++){var c=i._items[s].getTitle();if(c&&c.toLowerCase().charAt(0)===r&&d!==s){i._items[s]._elem.parent().children("li").removeClass("hover"),i._items[s]._elem.addClass("hover"),n=i._items[s]._elem.get(0).offsetTop,o=i._items[s]._elem.outerHeight(),n<=a?i._menu.scrollTop(n):n+o>=a+l&&i._menu.scrollTop(n-l+o),d=s;break}++s>=i._items.length&&(s=0)}return e.preventDefault(),e.stopPropagation(),!1}})),i._group=s()("<div>").addClass("input-group-btn").appendTo(i._dropdown),i._btn=s()("<button>").addClass("btn btn-default dropdown-toggle").attr({type:"button"}).append(s()("<span>").addClass("caret")).appendTo(i._group).on("click",(function(e){return i.onOpen(),e.stopPropagation(),!1})),i._menuWrapper=s()("<div>").addClass("dropdown-menu-wrapper").appendTo(i._group),!i.noSearch){var n=i;i._searchInputBlock=s()("<div>").appendTo(i._menuWrapper),i._searchInput=s()("<input>").addClass("form-control input-sm input-search").attr("placeholder",__("Search")).on("change keyup",(function(e){27===e.keyCode&&(this.value="");for(var t=this.value.toLowerCase(),i=0,o=n._items;i<o.length;i++){var s=o[i];if(s.getTitle()){var r=s.getTitle().toLowerCase().indexOf(t)>=0;s.getElem().css({display:r?"block":"none"})}}})).on("click",(function(e){e.stopPropagation()})).appendTo(i._searchInputBlock)}if(i._menu=s()("<ul>").addClass("dropdown-menu").appendTo(i._menuWrapper),i._itemMouseEnterFunc=function(){var e=s()(this);e.parent().children("li").removeClass("hover"),e.addClass("hover")},i._itemMouseLeaveFunc=function(){s()(this).removeClass("hover")},u||s()(document.body).on("click",u=function(){c&&c.setOpen(!1)}),t&&t.length)for(var o=0;o<t.length;o++)i.addItem(t[o]);return i._elem.append(i._dropdown),i._dropdown.on("change",(function(){i.multilevel&&i.parentMustBeSelected&&i.setMultilevel(i.multilevel),i.onValueChanged()})),i.buildInput(),i}return l(t,e),t.prototype.setOnSelect=function(e){return this.onSelect=function(t){return e(t)},this},t.prototype.buildInit=function(e,t){var i,n;this.fields=t,e.css&&"object"==typeof e.css&&e.css.width&&(this.inputWidth=e.css.width),"editable"in e&&this.setEditable(!!e.editable),"alignment"in e&&e.alignment&&this.setAlignment(e.alignment),"small"in e&&this.setSmall(!!e.small),"menuRel"in e&&this.setMenuRel(!!e.menuRel),"edit"in e&&"function"==typeof e.edit&&(this.onEditFunc=e.edit),"multiselect"in e&&(this.multiselect=!!e.multiselect),"addSelectAll"in e&&(this.addSelectAll=!!e.addSelectAll),"parentMustBeSelected"in e&&(this.parentMustBeSelected=!!e.parentMustBeSelected),this.useHtmlInput=!this.multiselect&&"useHtmlInput"in e&&e.useHtmlInput,this.buildInput(),e.options&&e.options instanceof Array&&(this.optionsSource=e.options),this.reload(),"multilevel"in e&&this.setMultilevel(!!e.multilevel),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,i.on("change",(function(){n.call(i,t)}))),"select"in e&&"function"==typeof e.select&&function(e,i){e.onSelect=function(n){i.call(e,n,t)}}(this,e.select),"noSearch"in e&&(this.noSearch=!!e.noSearch),e.value&&this.setValue(e.value)},t.prototype.getValue=function(e){if(void 0===e&&(e=!1),e){var t=void 0,i=[],n=this.getSelectedItems();for(t=0;t<n.length;t++)i.push(n[t].getId());return i}var o=this.getSelectedItem();return o?o.getId():null},t.prototype.setValue=function(e,t){var i,n;if(void 0===t&&(t=!1),t){for(this.selectItem(null,!1,!1),i=0;i<e.length;i++)(n=this.getItemById(e[i]))&&this.selectItem(n,!0,!1);this.updateValueText(),this.setMultilevel(this.multilevel)}else(n=this.getItemById(e))||(n=this.getItem(0)),this.selectItem(n)},t.prototype.buildInput=function(){var e=this;this._input&&(this._input.detach(),this._input.remove()),this.useHtmlInput?this._input=s()("<div>").css({height:34,border:"1px solid #ccc",padding:"6px 12px",cursor:"hover"}).on("click",(function(t){return e.onOpen(),t.stopPropagation(),!1})):this._input=s()("<input>").addClass("form-control").attr({type:"text",readonly:"readonly"}).on("click",(function(t){return e.onOpen(),t.stopPropagation(),!1})),this._input.insertBefore(this._group),this.inputWidth&&this._input.css({width:this.inputWidth-23})},t.prototype.setEditable=function(e){var t=this;e&&!this.editItem?(this.editItem=new p(__("Edit"),"__eidt__",{},"","fa fa-pencil",!1,"",!0),this.editItem.on("click",(function(){return t.onEdit(t.fields),!1}))):!e&&this.editItem&&(this.removeItem(this.editItem),this.editItem=null)},t.prototype.setAlignment=function(e){this.alignment=e,"right"==e?this._menu.addClass("dropdown-menu-right"):this._menu.removeClass("dropdown-menu-right")},t.prototype.setSmall=function(e){this.isSmall=e,e?this._dropdown.addClass("input-group-sm"):this._dropdown.removeClass("input-group-sm")},t.prototype.setMenuRel=function(e){this.isMenuRel!=e&&(this.isMenuRel=e,e?this._menu.addClass("rel"):this._menu.removeClass("rel"))},t.prototype.onSelectAllClick=function(e){e.stopImmediatePropagation(),e.preventDefault();var t=e.target?s()(e.target).data():null;if(t&&t.hasOwnProperty("action")&&t.hasOwnProperty("parentId")){for(var i=0,n=this._items;i<n.length;i++){var o=n[i];if(o.multiSelect&&!o.nonSelectable){var r=o.getOriginal();r&&this.isItemChildOf(r,t.parentId)&&o.setChecked("select"===t.action)}}this.parentMustBeSelected&&this.setMultilevel(this.multilevel),this.updateValueText()}},t.prototype.reload=function(e){void 0===e&&(e=null);var t,i,n=this.getValue(this.multiselect);if(this.removeAllItems(),e instanceof Array&&(this.optionsSource=e),this.optionsSource instanceof Array)for(var o=0;o<this.optionsSource.length;o++)if("object"==typeof this.optionsSource[o]&&this.optionsSource[o]){if(this.multiselect&&this.addSelectAll){var s=this.optionsSource[o].hasOwnProperty("parentId")?this.optionsSource[o].parentId:0,r="#"+s;this.selectAllItems.hasOwnProperty(r)||((i=new p("Select All / Deselect All","__select_all__"+s,{parentId:s},'<small><a data-action="select" data-parent-id="'+s+'">Select All</a> / <a data-action="deselect" data-parent-id="'+s+'">Deselect All</a></small>',"",!1,"",!0)).on("click",this.onSelectAllClick.bind(this)),this.selectAllItems[r]=i,this.addItem(i))}t=new p(__tr(this.optionsSource[o].name),this.optionsSource[o].id,this.optionsSource[o],this.optionsSource[o].html,"",this.multiselect,this.optionsSource[o].backgroundColor),this.addItem(t)}this.editItem&&this.addItem(this.editItem),this.multilevel&&this.setMultilevel(this.multilevel),this.setValue(n,this.multiselect)},t.prototype.isItemChildOf=function(e,t){if(!t)return!0;if(!e||!e.hasOwnProperty("parentId"))return null;if(""+e.parentId==""+t)return!0;if(!e.parentId)return!1;var i=this.getItemById(e.parentId);return i?this.isItemChildOf(i.getOriginal(),t):null},t.prototype.getLevel=function(e,t){if(!e)return t;var i="#"+e.parentId;return e.parentId&&i in this._itemsIndex?this.getLevel(this._itemsIndex[i].getOriginal(),t+1):t},t.prototype.setMultilevel=function(e){if(this.multilevel=e,e)for(var t=0,i=this._items;t<i.length;t++){var n=(a=i[t]).getOriginal(),o=this.parentMustBeSelected&&n&&n.parentId?this.getItemById(n.parentId):null;!o||o.getChecked()?a.getElem().css({display:"",paddingLeft:20*this.getLevel(n,0)}):a.getElem().css({display:"none"})}else for(var s=0,r=this._items;s<r.length;s++){var a;(a=r[s]).getElem().css({paddingLeft:0})}},t.prototype.onEdit=function(e){"function"==typeof this.onEditFunc&&this.onEditFunc.call(this,e)},t.prototype.onOpen=function(){this._enabled&&this.setOpen(!this._open)},t.prototype.getItems=function(){return this._items},t.prototype.getItemById=function(e){var t="#"+e;return t in this._itemsIndex?this._itemsIndex[t]:null},t.prototype.getItem=function(e){return e>=0&&e<this._items.length?this._items[e]:null},t.prototype.selectItem=function(e,t,i){var n;if(void 0===t&&(t=!1),void 0===i&&(i=!0),e)e.nonSelectable||(e.multiSelect?(this._selectedItem=null,this._items.indexOf(e)>=0&&e.setChecked(t||null==t),i&&this.updateValueText(),"function"==typeof this.onSelect&&this.onSelect(this._selectedItem)):this._items.indexOf(e)>=0&&(this._selectedItem=e,i&&this.updateValueText(),"function"==typeof this.onSelect&&this.onSelect(this._selectedItem)));else{if(this._selectedItem=null,i&&(this.useHtmlInput?this._input.html(""):this._input.val("")),!1===t)for(n=0;n<this._items.length;n++)this._items[n].multiSelect&&this._items[n].setChecked(!1);"function"==typeof this.onSelect&&this.onSelect(this._selectedItem)}i&&this.multilevel&&this.parentMustBeSelected&&this.setMultilevel(this.multilevel)},t.prototype.updateValueText=function(){var e,t="";if(this.multiselect){for(e=0;e<this._items.length;e++)if(this._items[e].getChecked()){if(this.parentMustBeSelected){var i=this._items[e].getOriginal();if(i&&i.parentId){var n=this.getItemById(i.parentId);if(n&&!n.getChecked())continue}}t+=(t.length?"; ":"")+this._items[e].getTitle()}this._input.val(t)}else{var o=this.getSelectedItem();this.useHtmlInput?this._input.html(o?o.getHtmlTitle()?o.getHtmlTitle():o.getTitle():""):this._input.val(o?o.getTitle():"")}},t.prototype.getSelectedItem=function(){return this._selectedItem},t.prototype.getSelectedItems=function(){var e,t=[];for(e=0;e<this._items.length;e++)this._items[e].getChecked()&&t.push(this._items[e]);return t},t.prototype.addItem=function(e){var i=this;this._items.indexOf(e)<0&&(this._items.push(e),e._id&&(this._itemsIndex["#"+e._id]=e),this._menu.append(e._elem),e._selectFunc=function(){if(e.multiSelect?i.selectItem(e,!e.getChecked()):i.selectItem(e),e.multiSelect||i.setOpen(!1),i.trigger("change"),e.multiSelect)return!1},e.on("click",e._selectFunc),e.on("mouseenter",this._itemMouseEnterFunc),e.on("mouseleave",this._itemMouseLeaveFunc),1===this._items.length&&this.selectItem(e),this._searchInputBlock&&this._searchInputBlock.css("display",this._items.length>=t.minOptionsNumberForSearchShowing?"block":"none"))},t.prototype.removeItem=function(e){var t=this._items.indexOf(e);t>=0&&(this._items.splice(t,1),e._id&&delete this._itemsIndex["#"+e._id],e._elem.detach(),e._selectFunc&&(e.off("click",e._selectFunc),e.off("mouseenter",this._itemMouseEnterFunc),e.off("mouseleave",this._itemMouseLeaveFunc)))},t.prototype.removeAllItem=function(){this.removeAllItems()},t.prototype.removeAllItems=function(){for(var e=0;e<this._items.length;e++)this._items[e]._elem.detach(),this._items[e]._selectFunc&&(this._items[e].off("click",this._items[e]._selectFunc),this._items[e].off("mouseenter",this._itemMouseEnterFunc),this._items[e].off("mouseleave",this._itemMouseLeaveFunc));this._items.splice(0,this._items.length),this._itemsIndex={},this.selectAllItems={},this.selectItem(null)},t.prototype.setOpen=function(e){if(this._open=!!e,this._open){c&&c!==this&&c.setOpen(!1),c=this;var t=this._input.outerWidth(!1),i={width:this._input.outerWidth(!1)+this._group.outerWidth(!1)+"px"};wb_builder.rtl?"right"==this.alignment?(i.left="inherit",i.right="0px"):(i.left="",i.right="-"+t+"px"):"right"==this.alignment?(i.left="",i.right="0px"):(i.left="-"+t+"px",i.right=""),this._menuWrapper.css(i);var n=this._menuWrapper.get(0);if(this._group.addClass("open"),this._selectedItem){var o=this._selectedItem._elem;o.addClass("hover"),n.scrollHeight>n.clientHeight&&o.get(0).scrollIntoView(!1),d=this._items.indexOf(this._selectedItem)}else d=-1;this._searchInput&&(this._searchInput.val(""),this._searchInput.trigger("change"),this._searchInput.trigger("focus"));var s=this._elem.parents(".wb-sidebar-item-content"),r=s.height(),a=s.scrollTop(),l=0,u=this._menuWrapper;do{l+=u.position().top,u=u.offsetParent()}while("HTML"!==u.get(0).tagName&&!u.hasClass("wb-properties-panel"));l<a?s.scrollTop(l-20):l+this._menuWrapper.height()>a+r&&s.scrollTop(l+this._menuWrapper.height()+this._dropdown.height()-r)}else this._group.removeClass("open"),c===this&&(c=null)},t.prototype.getOpen=function(){return this._open},t.prototype.addMenuStyleClass=function(e){this._menu.addClass(e)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._enabled?(this._btn.removeClass("disabled"),this._input.removeClass("disabled"),this._dropdown.removeClass("disabled").css({cursor:""})):(this.setOpen(!1),this._btn.addClass("disabled"),this._input.addClass("disabled"),this._dropdown.addClass("disabled").css({cursor:"not-allowed"}))},t.prototype.on=function(t,i){return"change"===t?this._input.on(t,i):e.prototype.on.call(this,t,i),this},t.prototype.off=function(t,i){return"change"===t?this._input.off(t,i):e.prototype.off.call(this,t,i),this},t.prototype.trigger=function(t,i){return"change"===t?this._input.trigger(t,i):e.prototype.trigger.call(this,t,i),this},t.prototype.setMultiselect=function(e){this.multiselect!==e&&(this.multiselect=e,this.reload())},t.prototype.setAddSelectAll=function(e){this.addSelectAll!==e&&(this.addSelectAll=e,this.reload())},t.prototype.setParentMustBeSelected=function(e){this.parentMustBeSelected!==e&&(this.parentMustBeSelected=e)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"editable"in t&&this.setEditable(!!t.editable),"alignment"in t&&t.alignment&&this.setAlignment(t.alignment),"small"in t&&this.setSmall(!!t.small),"menuRel"in t&&this.setMenuRel(!!t.menuRel),"multiselect"in t&&this.setMultiselect(!!t.multiselect),"addSelectAll"in t&&this.setAddSelectAll(!!t.addSelectAll),"parentMustBeSelected"in t&&this.setParentMustBeSelected(!!t.parentMustBeSelected),"multilevel"in t&&this.setMultilevel(!!t.multilevel),"options"in t&&(a.ComparisonUtil.checkEqualsRecursive(t.options,this.optionsSource)||this.reload(t.options))},t.minOptionsNumberForSearchShowing=8,t}(r.UIComponent),p=function(){function e(e,t,i,n,o,r,a,l){void 0===i&&(i=null),void 0===n&&(n=""),void 0===o&&(o=""),void 0===r&&(r=!1),void 0===a&&(a=""),void 0===l&&(l=!1),this._original=null,this._cbwElem=null,this._cbElem=null,this._iconElem=null,this._selectFunc=null,this._selected=!1,this._checked=!1,this.multiSelect=!1,this.nonSelectable=!1,this._id=t,this._elem=s()("<li>"),this._elem.data("__META_INST__",this),r&&(this.multiSelect=!0,this._cbElem=s()("<input>").attr({type:"checkbox"}),this._cbwElem=s()("<div>").addClass("wb-combobox-controll-cb").append(this._cbElem).appendTo(this._elem)),o&&(this._iconElem=s()("<span>").addClass("wb-combobox-controll-icon").addClass(o)),this.nonSelectable=!!l,this._aElem=s()("<a>").attr({href:"javascript:void(0)"}).appendTo(this._elem),this.setTitle(e),n&&this.setHtmlTitle(n),this._original=i,a&&this._elem.css("background-color",a+"!important")}return e.fromElem=function(e){return e.data("__META_INST__")},e.prototype.getElem=function(){return this._elem},e.prototype.getId=function(){return this._id},e.prototype.getOriginal=function(){return this._original},e.prototype.setSelected=function(e){this._selected=!!e,this._selected?this._elem.addClass("active"):this._elem.removeClass("active")},e.prototype.getSelected=function(){return this._selected},e.prototype.setChecked=function(e){this._checked=!!e,this._cbElem&&(this._cbElem.get(0).checked=this._checked)},e.prototype.getChecked=function(){return this._checked},e.prototype.setTitle=function(e){this._title=e,this._iconElem&&this._iconElem.detach(),this._aElem.text(this._title||0===this._id?this._title?this._title:" ":"["+__("no name")+"]"),this._iconElem&&this._aElem.prepend(this._iconElem)},e.prototype.setHtmlTitle=function(e){this._iconElem&&this._iconElem.detach(),this._aElem.html(e||""),this._iconElem&&this._aElem.prepend(this._iconElem)},e.prototype.getTitle=function(){return this._title},e.prototype.getHtmlTitle=function(){return this._aElem.html()},e.prototype.on=function(e,t){return"click"===e?(this._aElem.on(e,t),this._cbwElem&&this._cbwElem.on(e,t)):this._elem.on(e,t),this},e.prototype.off=function(e,t){return"click"===e?this._aElem.off(e,t):this._elem.off(e,t),this},e}();h.Item=p},"./EditFontsDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{EditFontsDialog:function(){return g},EditFontsErrorDialog:function(){return m}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./Service.ts"),a=i("./FontManager.ts"),l=i("./DropdownBox.ts"),c=i("./BuilderEvent.ts"),u=i("./lib/jquery-1.11.3.min.js"),d=i.n(u),h=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),p=function(){function e(e){e&&(this.name=e.name,this.title=e.title,this.fontId=e.fontId,this.usage=a.GoogleFontUsage.fromJson(e.usage))}return e.prototype.serialize=function(){return{name:this.name,title:this.title,fontId:this.fontId,usage:this.usage.serialize()}},e}(),m=function(e){function t(t){var i=e.call(this,t)||this;return i.content.empty(),r.Service.UIBuilder.buildLayout({type:"CustomContainer",init:function(){this.getElem().append('<div class="alert alert-danger">'+a.FontManager.error+"</div>")}},i.content,{}),i}return h(t,e),t}(s()),g=function(e){function t(t){var i=e.call(this,t)||this;i.variants={},i.subsets={},i.selectedFont=null;var n,o,s={},l=[],u=[];for(n in a.FontManager.availableFonts){for(var h=a.FontManager.availableFonts[n],m=0,g=h.variants;m<g.length;m++)o=g[m],l.indexOf(o)<0&&l.push(o);for(var f=0,y=h.subsets;f<y.length;f++)o=y[f],u.indexOf(o)<0&&u.push(o)}for(n in wb_builder.site.usedCustomFonts){for(var b=wb_builder.site.usedCustomFonts[n].font,v=0,_=b.variants;v<_.length;v++)o=_[v],l.indexOf(o)<0&&l.push(o);for(var C=0,w=b.subsets;C<w.length;C++)o=w[C],u.indexOf(o)<0&&u.push(o)}l.sort(),u.sort();for(var T=[{type:"Label",text:__("Style")}],E=0,I=l;E<I.length;E++)n=I[E],T.push({type:"CheckBox",id:"variant_"+n,label:a.GoogleFont.getVariantName(n),value:n,change:i.updateItemOptions.bind(i)});for(var x=[{type:"Label",text:__("Languages")}],S=0,k=u;S<k.length;S++)n=k[S],x.push({type:"CheckBox",id:"subset_"+n,label:a.GoogleFont.getSubsetName(n),value:n,change:i.updateItemOptions.bind(i)});i.content.empty(),r.Service.UIBuilder.buildLayout({type:"VerticalLayout",children:[{type:"CustomContainer",id:"loader",visible:!0,content:'<div class="text-center"><i class="fa fa-spinner fa-spin" style="font-size: 50px;"></i></div>'},{type:"HorizontalLayout",id:"interface",visible:!1,columnWeightsSmall:[4,8],columnWeights:[4,8],children:[{type:"VerticalLayout",children:[{type:"List",id:"fonts",newItemButtonText:__("Add font"),editable:!0,sortable:!1,listHeight:200,itemType:p,select:i.onSelectFont.bind(i),remove:i.onRemoveFont.bind(i),css:{height:"auto"}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"preview",styleClass:"panel panel-default",css:{"margin-bottom":"15px",padding:"5px",fontFamily:"Arial",fontStyle:"italic",fontSize:"14px",color:"#AAA"},content:__("Select and add a font")},{type:"HorizontalLayout",id:"rightPane",visible:!1,children:[{type:"VerticalLayout",children:T},{type:"VerticalLayout",children:x}]}]}]}]},i.content,s),i.rightPane=s.rightPane,i.fonts=s.fonts._control,i.preview=s.preview;for(var D=0,O=l;D<O.length;D++){n=O[D];var R=a.GoogleFont.parseVariantCode(n);i.variants[n]=s["variant_"+n],i.variants[n].setLabelStyle({"font-weight":R.weight,"font-style":R.italic?"italic":"none"})}for(var P=0,L=u;P<L.length;P++)n=L[P],i.subsets[n]=s["subset_"+n];return"latin"in i.subsets&&i.subsets.latin.setEnabled(!1),i.fonts.addBtn.unbind("click").bind("click",i.onAddFont.bind(i)),i.addFontForm=d()('<div class="hidden" />'),i.fonts.addBtn.after(i.addFontForm),r.Service.UIBuilder.buildLayout({type:"VerticalLayout",children:[{type:"DropdownBox",id:"newFontList"},{type:"FlowLayout",spacing:0,children:[{type:"Button",text:__("Cancel"),click:i.cancelAddFont.bind(i),styleClass:"btn btn-link"},{type:"Button",text:__("Add"),click:i.addFont.bind(i),styleClass:"btn btn-link"}]}]},i.addFontForm,s),i.newFontList=s.newFontList,i.dialog.children(".modal-dialog").addClass("modal-lg"),i.addButton(__("Cancel"),i.onCancelButtonClick.bind(i),!1),setTimeout((function(){a.FontManager.loadFontThumbs((function(){i.addButton(__("Apply"),i.onApplyButtonClick.bind(i),!0),i.updateList(),s.loader.setVisible(!1),s.interface.setVisible(!0)}))}),10),c.GlobalEvents.on("fonts.changed",(function(){console.log("change2"),i.updateList()})),i}return h(t,e),t.prototype.addFontToList=function(e,t,i){return this.fonts.addItem(new p({name:"<span style=\"font: 20px '"+t.font.family+"';\">"+t.font.family+"</span>",title:t.font.family,fontId:e,usage:t.serialize()}),i," ")},t.prototype.updateList=function(){if(a.FontManager.ready&&a.FontManager.fontThumbs){this.rightPane.setVisible(!1),this.fonts.removeAllItems();for(var e={},t=0,i=a.FontManagerModule.getForcedCustomFonts();t<i.length;t++)e[o=i[t]]=!0;var n=!0;for(var o in wb_builder.site.usedCustomFonts){var s=wb_builder.site.usedCustomFonts[o];e.hasOwnProperty(s.font.family)||(n=!1,this.addFontToList(o,s,!0))}this.fonts.updateStyle(),this.onSelectFont(null,null),this.fonts.selectFirst(),n&&this.onAddFont()}},t.prototype.onAddFont=function(){var e;this.newFontList.removeAllItems();for(var t={},i=0,n=this.fonts.getValue();i<n.length;i++)t[n[i].fontId]=!0;for(var o=0,s=a.FontManagerModule.getHardcodedFontList();o<s.length;o++)t[e=s[o]]=!0;for(var r=0,c=a.FontManagerModule.getForcedCustomFonts();r<c.length;r++)t[e=c[r]]=!0;for(e in a.FontManager.availableFonts)if(!t.hasOwnProperty(e)){var u=a.FontManager.availableFonts[e];this.newFontList.addItem(new l.Item(u.family,e,null,a.FontManager.getFontThumbnail(u).get(0).outerHTML))}this.fonts.addBtn.addClass("hidden"),this.addFontForm.removeClass("hidden")},t.prototype.cancelAddFont=function(){this.fonts.addBtn.removeClass("hidden"),this.addFontForm.addClass("hidden")},t.prototype.addFont=function(){var e=this.newFontList.getSelectedItem(),t=e?e.getId():"";if(t){this.cancelAddFont();var i=new a.GoogleFontUsage;i.font=a.FontManager.availableFonts[t].clone(),i.font.variants.indexOf("400")>=0?i.variants=["400"]:i.font.variants.indexOf("400i")>=0?i.variants=["400i"]:i.variants=[i.font.variants[0]],i.font.subsets.indexOf("latin")>=0?i.subsets=["latin"]:i.font.subsets.indexOf("latin-ext")>=0?i.subsets=["latin-ext"]:i.subsets=[i.font.subsets[0]],a.FontManager.createFontLinkElement(t),this.fonts.selectItemLi(this.addFontToList(t,i,!1))}else alert(__("Please select a font to add"))},t.prototype.onSelectFont=function(e,t){var i,n=t?t.usage:null;if(t){var o={fontFamily:n?n.font.getCssFontFamily():"Arial",fontStyle:""};for(i in this.rightPane.setVisible(!0),this.preview.setContent("ABCDEFGHIJKLMNOPQRSTUVWXYZ<br />abcdefghijklmnopqrstuvwxyz<br />0123456789 !@#$%^&amp;*()"),this.preview.css(d().extend({fontSize:"16px",color:""},o)),a.FontManager.createFontLinkElement(t.fontId),this.variants)this.variants[i].setVisible(null!=n&&n.font.variants.indexOf(i)>=0).setValue(null!=n&&n.variants.indexOf(i)>=0),this.variants[i].getElem().css(o);for(i in this.subsets)this.subsets[i].setVisible(null!=n&&n.font.subsets.indexOf(i)>=0).setValue(null!=n&&n.subsets.indexOf(i)>=0)}else this.preview.setContent(__("Select and add a font")),this.preview.css({fontFamily:"Arial",fontStyle:"italic",fontSize:"14px",color:"#AAA"});this.selectedFont=t},t.prototype.onRemoveFont=function(e,t){1==this.fonts.getValue().length?(this.preview.setContent(__("Select and add a font")),this.preview.css({fontFamily:"Arial",fontStyle:"italic",fontSize:"14px",color:"#AAA"}),this.rightPane.setVisible(!1),this.onAddFont()):this.fonts.lastSelected===t&&this.fonts.selectFirst()},t.prototype.updateItemOptions=function(){if(this.selectedFont){var e,t=this.selectedFont.usage;t.variants=[];for(var i=0,n=t.font.variants;i<n.length;i++)e=n[i],this.variants[e].getValue()&&t.variants.push(e);t.subsets=[];for(var o=0,s=t.font.subsets;o<s.length;o++)e=s[o],this.subsets[e].getValue()&&t.subsets.push(e)}},t.prototype.onCancelButtonClick=function(){this.setVisible(!1)},t.prototype.onApplyButtonClick=function(){wb_builder.site.usedCustomFonts={},a.FontManager.forceCustomFontsUsage();for(var e=0,t=this.fonts.getValue();e<t.length;e++){var i=t[e];wb_builder.site.usedCustomFonts[i.fontId]=i.usage.clone()}this.fontsControl.updateOptions(),this.selectedFont&&this.fontsControl.setValueAndTriggerEvents(this.selectedFont.usage.font.family),this.setVisible(!1)},t}(s())},"./Element.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Element:function(){return K},Mode:function(){return V}});var n,o=i("./jquery-builder.ts"),s=i("./core/BuilderConfig.ts"),r=i("./ElementRegister.ts"),a=i("./Service.ts"),l=i("./UserInput.ts"),c=i("./ModeManager.js"),u=i.n(c),d=i("./ContextMenu.ts"),h=i("./WB_Dialog.class.js"),p=i.n(h),m=i("./WB_PropertyDialog.class.js"),g=i.n(m),f=i("./BuilderEvent.ts"),y=i("./element/Controls.ts"),b=i("./element/ControlsButton.ts"),v=i("./element/MoveRelativeHandle.ts"),_=i("./element/MovePushHandle.ts"),C=i("./CommonTypes.ts"),w=i("./SizeSelector.ts"),T=i("./element/SnapHandle.ts"),E=i("./SpacingSelector.ts"),I=i("./util/HistoryUtil.ts"),x=i("./util/ExtendedResizable.ts"),S=i("./element/ControlsSelectionBorder.ts"),k=i("./ui/SelectParentMenu.ts"),D=i("./util/EventUtil.ts"),O=i("./element/Properties.ts"),R=i("./element/PropertyType.ts"),P=i("./ui/CommonalitySelectorControl.ts"),L=i("./util/ChangeUpdateUtil.ts"),A=i("./util/ElementUtil.ts"),M=i("./ui/AnimationControl.ts"),B=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),N=function(){return N=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)},F=new L.ChangeUpdateState((function(){f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent)})),K=function(e){function t(i,n,r,c,h){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===c&&(c=!0);var p=e.call(this)||this;p.isEditable=c,p.parent=null,p.referenceTo=null,p.isControlsVisible=!0,p.debug=!1,p.excluded=!1,p.zIndex=0,p.cachedWidth=0,p.cachedHeight=0,p._width=0,p._height=0,p.groupPath=null,p.groupId=null,p.oPos=null,p.comDialog=null,p.helpText=null,p.langLabel=null,p.forceCompactControls=!1,p.hidden=!1,p.hiddenResp=!1,p.index=0,p.menu=null,p.menuInitialized=!1,p._menu=null,p.isCommon=!1,p.isCommonInherited=!1,p.selection=null,p.isResizable=!0,p.isMovable=!0,p.isEditableStrict=!0,p.isRemovable=!0,p.hideBorder=!1,p.ctrlOpacity=1,p.comDlg=null,p.noPhotoText=__("Double click to change properties"),p.noPhotoBg="ico-tb-picture",p.contextMenuFirstIndex=0,p.isLocked=!1,p.isLockedOpts=null,p.noOptionsTab=!1,p.hideNavigation=!1,p.classNamePropEnabled=!0,p._isBackgroundElement=!1,p.translations=null,p.dropAccepted=!0,p.dragStartPos=null,p.virtualElement=!1,p.isElementPreview=!1,p.ignoreParentBounds=!1,p.modes={},p.respBackup=null,p.modeContextOk={comConfig:!0,hideElem:!0,lock:!0,order:!0,resetSize:!1},p._anchor=null,p._elemClassName=null,p.waitToUpdateAnchor=new L.ChangeUpdateState((function(e){wb_builder.site&&e&&(wb_builder.site.removeAnchor(e.elem,e.anchor),e.anchor=e.elem._anchor,wb_builder.site.addAnchor(e.elem))}),{elem:p,anchor:p._anchor}),p._referenceId=null,p._isAdminLocked=!1,p.debugInfo=null,p.removed=!1,p._left=0,p._top=0,p.offsetTop=0,p.offsetLeft=0,p.pageTop=0,p.pageLeft=0,p.selected=!1,p.resizing=!1,p.resizeHOrigin=0,p.resizeVOrigin=0,p.sysMinWidth=64,p.sysMinHeight=64,p._individualMargin=null,p.flexGrow=0,p.flexShrink=0,p._minWidth=0,p._maxWidth=1200,p._forcedMinHeight=0,p._minHeight=0,p._maxHeight=600,p._useMinWidth=!1,p._useMaxWidth=!1,p._useMinHeight=!1,p._useMaxHeight=!1,p.staticPos=null,p._layoutConstraints=C.ChildrenLayoutType.Absolute,p._layoutConstraintsIsSet=!1,p.moveRelativeHandle=null,p.hierarchyLevel=0,p._invalid=!1,"function"==typeof h&&h.call(p),p.virtualElement=!!r,p.system=wb_builder;var m=p.fillDataWithDefaults(i&&"object"==typeof i?i:{});if(m.srcCompositionId&&(p.srcCompositionId=m.srcCompositionId),m.referenceTo&&(p.referenceTo=m.referenceTo),m.isAdminLocked&&!s.wbConfig.adminMode&&(p.isEditableStrict=!1),m.isElementPreview&&(p.isElementPreview=!0),m.previewCompositionId&&(p.previewCompositionId=m.previewCompositionId),m.isBackgroundElement&&(p.isBackgroundElement=m.isBackgroundElement),m.sortOrder&&(p.sortOrder=m.sortOrder),"isMovable"in m&&(p.isMovable=!!m.isMovable),"respBackup"in m&&m.respBackup&&(p.respBackup=m.respBackup),s.wbConfig.devDebugMode&&(p.debugData=o.default.extend(!0,{},m),p.debugData.hasOwnProperty("debugInfo")&&(p.debugInfo=p.debugData.debugInfo,delete p.debugData.debugInfo)),t.hotKeysInitiated||p.isElementPreview||(t.hotKeysInitiated=!0,l.UserInput.addHotKey("left",t.hotKeysCallback,!0),l.UserInput.addHotKey("right",t.hotKeysCallback,!0),l.UserInput.addHotKey("up",t.hotKeysCallback,!0),l.UserInput.addHotKey("down",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift+left",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift+right",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift+up",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift+down",t.hotKeysCallback,!0),l.UserInput.addHotKey("del",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift++",t.hotKeysCallback,!0),l.UserInput.addHotKey("shift+-",t.hotKeysCallback,!0)),p.includePages=m.includePages&&"object"==typeof m.includePages?m.includePages:{},m.element&&"object"==typeof m.element?p.elem=m.element:p.elem=(0,o.default)("<div></div>"),p.rawElem=p.elem.get(0),p.elem.wbSetClassInstance(p),i&&"_restoreId"in i&&i._restoreId&&void 0!==i._restoreIndex?(p.id=i._restoreId,p.index=i._restoreIndex,delete i._restoreId,delete i._restoreIndex):(p.index=t.lastIndex,p.id="string"==typeof m.id&&m.id&&0!=m.id.indexOf("wb_element_instance")?m.id:"wb_element_instance"+t.lastIndex++),p.name=m.name&&"string"==typeof m.name?m.name:"",p.elem.attr("data-id",p.id),p.elem.addClass("wb_element"),p.isElementPreview&&p.elem.addClass("wb-element-preview"),m.groupPath?p.groupPath=m.groupPath:p.groupPath=m.groupId?"string"==typeof m.groupId?[m.groupId]:m.groupId:null,p.moveBtn=new b.ControlsButton("wb_move_btn","fa fa-arrows",b.ControlsButtonAlign.LEFT_TOP),p.movePushBtn=new b.ControlsButton("wb_move_push_btn","fa fa-sort",b.ControlsButtonAlign.CENTER_TOP),p.controls=new y.Controls(!0,!p.isAcceptingChildren(),(function(e,t,i){return p.handleValueChange(e,t,i)}),(function(e){var t=p.elem.resizableExt("instance");t&&(e?(t.attachHandles(e.getResizeHandles()),p.elem.find(".wb-ext-resizable-handle").each((function(e,t){p.menu instanceof d.ContextMenu&&p.menu.pasiveBind((0,o.default)(t))}))):t.detachHandles())})),p.isMovable&&(p.controls.addButton(p.moveBtn).addButton(p.movePushBtn),new _.MovePushHandle([p],!0,wb_builder).bindToElement(p.movePushBtn.elem)),p.parentLinkBtn=new b.ControlsButton("wb_parent_link_btn","fa fa-link",b.ControlsButtonAlign.LEFT_TOP),p.parentLinkBtn.setAdditionalVisibilityTestCallback((function(){return!!p.getParentWithActiveLink()})),p.parentLinkBtn.elem.on("click",(function(e){e.stopImmediatePropagation(),e.preventDefault();var t=p.getParentWithActiveLink();if(t){a.Service.element.unselectAll(),t.setSelected(!0,!0,!0);var i=t.getProperty("link");i&&p.system.propertiesPanel.scrollPropertyIntoView(i,!0)}})),p.controls.addButton(p.parentLinkBtn),p.controls.addButton(p.editBtn=new b.ControlsButton("wb_edit_btn","fa fa-pencil",b.ControlsButtonAlign.RIGHT_TOP)).layout(),p.snapHandle=new T.SnapHandle(p),p.cover=p.controls.cover,p.helpText){var g=new b.ControlsButton("wb_help_btn","?",b.ControlsButtonAlign.LEFT_BOTTOM);p.controls.addButton(g),g.elem.tooltip({trigger:"hover",placement:"top",html:!0,title:p.helpText})}if(s.wbConfig.devDebugMode){var f=new b.ControlsButton("wb_debug_btn","fa fa-info",b.ControlsButtonAlign.NONE);if(p.controls.addButton(f),f.elem.tooltip({trigger:"manual",placement:"bottom",container:"body",html:!1,title:JSON.stringify(p.debugData,null,2),template:'<div class="tooltip debug-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}).on("click touchend",(function(){(0,o.default)(this).tooltip("toggle")})),null!==p.debugInfo){var w=new b.ControlsButton("wb_debug_btn","fa fa-info",b.ControlsButtonAlign.NONE);p.controls.addButton(w),w.elem.tooltip({trigger:"manual",placement:"bottom",container:"body",html:!1,title:JSON.stringify(p.debugInfo,null,2),template:'<div class="tooltip debug-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}).on("click touchend",(function(){(0,o.default)(this).tooltip("toggle")}))}}p.controls.attach(p.elem),p.container=(0,o.default)('<div class="wb_content"></div>'),p.elem.append(p.container),p.isEditable&&p.isEditableStrict||p.editBtn.setActive(!1);var E="minWidth"in m&&void 0!==m.minWidth&&!!(m.minWidth+"").match(/^[0-9]+$/),O="maxWidth"in m&&void 0!==m.maxWidth&&!!(m.maxWidth+"").match(/^[0-9]+$/),R="minHeight"in m&&void 0!==m.minHeight&&!!(m.minHeight+"").match(/^[0-9]+$/),P="maxHeight"in m&&void 0!==m.maxHeight&&!!(m.maxHeight+"").match(/^[0-9]+$/);if(p._individualMargin="individualMargin"in m&&void 0!==m.individualMargin?m.individualMargin:p._individualMargin,p._minWidth=E&&"minWidth"in m&&void 0!==m.minWidth?m.minWidth:p._minWidth,p._maxWidth=O&&"maxWidth"in m&&void 0!==m.maxWidth?m.maxWidth:p._maxWidth,p._minHeight=R&&"minHeight"in m&&void 0!==m.minHeight?m.minHeight:p._minHeight,p._maxHeight=P&&"minHeight"in m&&void 0!==m.maxHeight?m.maxHeight:p._maxHeight,p._useMinWidth=E&&"useMinWidth"in m&&!!m.useMinWidth,p._useMaxWidth=O&&"useMaxWidth"in m&&!!m.useMaxWidth,p._useMinHeight=R&&"useMinHeight"in m&&!!m.useMinHeight,p._useMaxHeight=P&&"useMaxHeight"in m&&!!m.useMaxHeight,p.flexGrow=p.flexShrink=m.flexGrow||m.flexShrink||p.flexGrow&&p.flexShrink?1:0,p.controls.updateMargin(p.getActualMargins()),p.updateResizeMode(),p.isElementPreview)p.isResizable=!1,p.isEditable=!1,p.isMovable=!1,p.isLocked=!0;else{var A,M;p.updateCtrlBtnsPos=function(e,t){e=e||this.getWidthInPixels(),t=t||this.getHeightInPixels(),e<74||t<36||this.forceCompactControls?this.controls.setButtonsCompact(!0):this.controls.setButtonsCompact(!1)};var B=new(function(){function e(){this.min={width:0,height:0},this.max={width:0,height:0},this.height=0}return e.prototype.begin=function(e,t){this.min.width=e.minWidth,this.min.height=e.minHeight,this.max.width=e.maxWidth,this.max.height=e.maxHeight,this.height=e._height,this.update(e,t)},e.prototype.update=function(e,t){if(e.controls){e.controls.minMax.setVisible(!0);var i=e._useMinWidth?e._minWidth:0,n=e._useMinHeight?e._minHeight:0;e.controls.minMax.applyMinValue(i>0||n>0?i||t.width:0,i>0||n>0?n||t.height:0);var o=e._useMaxWidth?e._maxWidth:0,s=e._useMaxHeight?e._maxHeight:0;e.controls.minMax.applyMaxValue(o>0||s>0?o||t.width:0,o>0||s>0?s||t.height:0)}},e.prototype.end=function(e){e.controls&&e.controls.minMax.setVisible(!1)},e}());p.elem.resizableExt({handles:"n, e, s, w, ne, se, sw, nw",extHandles:!0,minWidth:1,minHeight:1,allowPercentageWidth:!0,allowPercentageHeight:!1,start:function(e,t){e.preventDefault(),p.resizing=!0;var i=[p];p.elem[0].style.position="",B.begin(p,t.size),p.updateSizeLimits(),p.onStartResize(t),p.controls.handleResize(!0,t.axis),(0,d.hideAllContextMenus)(),t.data={affectedElements:i},A=N({},p.individualMargin),M="LayoutElement"==p.getClassType()?p.getChildrenLayout():null,p.snapHandle.handleResizableStart(e,t)&&(t.data.affectedElements=i.concat(p.snapHandle.getAdditionalAffectedElements()))},resize:function(e,t){t.data.affectedElements&&((0,I.createMoveElementsHistoryRecord)(t.data.affectedElements),delete t.data.affectedElements);var i=!1;p.useMinWidth&&t.size.width<B.min.width&&(p.minWidth=t.size.width,i=!0),p.useMinHeight&&t.size.height<B.min.height&&(p.minHeight=t.size.height,i=!0),p.useMaxWidth&&t.size.width>B.max.width&&(p.maxWidth=t.size.width,i=!0),p.useMaxHeight&&t.size.height>B.max.height&&(p.maxHeight=t.size.height,i=!0),i&&(p.updateSizeLimits(),t.clearCache()),p.snapHandle.handleResizableResize(e,t)},afterResize:function(e,t){var i="target size: "+t.size.width+" &times; "+t.size.height;i+="<br />setting size: "+("number"==typeof t.dynamicSize.width?t.dynamicSize.width+"px":t.dynamicSize.width)+" &times; "+("number"==typeof t.dynamicSize.height?t.dynamicSize.height+"px":t.dynamicSize.height);var n=t.element.outerWidth(),o=t.element.outerHeight();i+="<br />real size: "+n+" &times; "+o,wb_builder.bodyInstance.showInfoTip(i,e.pageX-90,e.pageY);var s=!1;if(M==C.ChildrenLayoutType.Horizontal)"n"!=t.axis&&"s"!=t.axis||(p.useMinHeight=!0,p.minHeight=t.size.height,p.setSize(null,"auto")||p.updateContentSize(),s=!0);else if(M==C.ChildrenLayoutType.Vertical)if("n"==t.axis)p.handleValueChange(S.SelectionBorderType.TOP,Math.max(((null==A?void 0:A.paddingTop)||0)+t.delta.top,0),S.ValueType.PADDING),s=!0;else if("s"==t.axis){"number"==typeof p._height&&p.setSize(null,"auto");var r=0;p.isEmpty()&&"number"==typeof B.height&&(r=B.height),p.handleValueChange(S.SelectionBorderType.BOTTOM,Math.max(((null==A?void 0:A.paddingBottom)||0)+t.delta.top+r,0),S.ValueType.PADDING),s=!0}if(!s){t.size.width=n,t.size.height=o;var a=t.dynamicSize.width!=p._width||t.dynamicSize.height!=p._height;p.isAutoSizeEnabled&&a&&(p.isAutoSizeEnabled=!1,p.updateFlex()),p.setSize(t.dynamicSize.width,t.dynamicSize.height)}B.update(p,t.size),p.updateContentSize(t),p.updateCtrlBtnsPos(t.size.width,t.size.height),p.onLiveResize(t.size.width,t.size.height),p.onResize()},stop:function(e,t){e.preventDefault(),p.resizing=!1,p.onStopResize(t),p.controls.handleResize(!1,t.axis),B.end(p),wb_builder.bodyInstance.hideInfoTip(),e.skipStopEvent||(p.onResize(),p.snapHandle.handleResizableStop(e,t))}}),p.updateResizeLimits(),setTimeout((function(){return p.updateCtrlBtnsPos()}),1e3),p.isMovable&&(p.moveRelativeHandle=new v.MoveRelativeHandle([p],wb_builder),p.moveRelativeHandle.setEnabled(!0)),p.elem.hover((function(){p.snapHandle.handleHover(!0)}),(function(){p.snapHandle.handleHover(!1)}));var F=!1,K=!1;p.controls.setInteractHandler((function(e,t){if(t)F="touchstart"==e.type,K=!1,p.moveRelativeHandle&&p.canBeMoved()&&p.moveRelativeHandle.triggerDown(e);else if("touchmove"==e.type)K=!0;else if("touchend"==e.type){if(x.ExtendedResizable.isResizing())return;if(p.moveRelativeHandle){var i=p.moveRelativeHandle.moveStarted;if(p.moveRelativeHandle.triggerUp(e),i)return;e.stopPropagation(),e.stopImmediatePropagation(),K||(0,D.triggerEvent)(p.elem,"click",e)}}else if("click"==e.type){var n=p.isSelected();p.cachedWidth=p.getWidthInPixels(),p.cachedHeight=p.getHeightInPixels(),p.onClick(e),F&&n&&p.isEditableStrict&&p.menu&&p.menu.show(e),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}}),!0)}p.isCommon=!!m.isCommon,p.isLocked=!!m.isLocked,p.commonalityBackup=m.commonalityBackup||null;var V=m.x?1*m.x:0,H=m.y?1*m.y:0;p.setLocation(V,H,!1,!0);var j=m.width||200,U=m.height||200;if(p.setSize(j,U,!0),p._isBackgroundElement||p.setZIndex(m.zIndex?1*m.zIndex:1),p.hiddenResp=!!m.hiddenResp,p.selectParentMenu=new k.SelectParentMenu,!p.isElementPreview&&p.isEditableStrict&&p.setupContextMenu(),p.updateContentSize(),p.elem.trigger("mouseout"),p.noPhotoMsg=(0,o.default)('<div class="wb_caption">').append((0,o.default)("<div>").append((0,o.default)("<i>").addClass(p.noPhotoBg)).append((0,o.default)("<span>").text(p.noPhotoText))).hide(),p.elem.append(p.noPhotoMsg),p.isLocked&&p.setLocked(p.isLocked,!0),p._anchor=i&&i.anchor?i.anchor:null,p._elemClassName=i&&i.elemClassName?i.elemClassName:null,p._referenceId=i&&i.referenceId?i.referenceId:null,p._isAdminLocked=i&&i.isAdminLocked?i.isAdminLocked:null,wb_builder.site&&wb_builder.site.addAnchor(p),p._animationEffect=i&&i.animationEffect?i.animationEffect:null,p.onLiveResize(j,U),p.isEditableStrict||(p.isEditableStrict=!0,p.setDraggingEnabled(!1),p.setResizingEnabled(!1,!0),p.setControlsVisible(!1),p.setControlsEnabled(!1),p.isEditableStrict=!1,p.elem.css({cursor:"default"}).on("mousedown",(function(e){return e.stopPropagation(),!1})).get(0).oncontextmenu=function(e){return e.stopPropagation(),!1}),p.updateShow(!0),i&&i.modes){for(var z in i.modes)p.modes[z]=p.modeClass(i.modes[z]);p.switchMode(u().getMode(),u().getMode(),!0,!1)}return p}return B(t,e),t.hotKeysCallback=function(e){if(!t.hotKeysDisabled&&!((0,o.default)(e.target).is("input")||(0,o.default)(e.target).is("textarea")||(0,o.default)(e.target).closest(".modal").length)){var i,n,s=null,r=null;if("up"===e.data.hotKey)s={left:0,top:-1};else if("down"===e.data.hotKey)s={left:0,top:1};else if("left"===e.data.hotKey)s={left:-1,top:0};else if("right"===e.data.hotKey)s={left:1,top:0};else if("shift+up"===e.data.hotKey)s={left:0,top:-10};else if("shift+down"===e.data.hotKey)s={left:0,top:10};else if("shift+left"===e.data.hotKey)s={left:-10,top:0};else if("shift+right"===e.data.hotKey)s={left:10,top:0};else if("del"===e.data.hotKey)a.Service.element.removeOrHideElementsWithUserInteraction(t.selected,wb_builder.pageId,wb_builder.site.currSelLang);else if("shift++"===e.data.hotKey||"shift+-"===e.data.hotKey)for(i in t.selected)(n=t.selected[i]).isEditableStrict&&(n.isLocked||n.parent&&(wb_builder.setPageModified(!0),n.parent.zIndexHandle.changeLayer(n,"shift++"===e.data.hotKey?"up":"down")));if(s){for(i in t.selected)if((n=t.selected[i]).isEditableStrict&&!n.isLocked){r||(r=n.getParent());var l=n.getLocation();n.setLocation(l.left+s.left,l.top+s.top)}for(i in r&&r.updateSize(),t.selected)(n=t.selected[i]).isEditableStrict&&n.isLocked;a.Service.group.updateGroupBounds(),e.preventDefault(),e.stopPropagation()}}},t.unselectAll=function(){for(var e in a.Service.group.unselectGroups(),t.selected)t.selected[e].setSelected(!1);t.selected={}},Object.defineProperty(t.prototype,"nameProp",{get:function(){return this.name},set:function(e){this.name!=e&&(this.name=e,(0,L.waitForChangeEndToUpdate)(F))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commonality",{get:function(){return{isCommon:this.isCommon,includePages:this.includePages}},set:function(e){var t=this.isCommon!==e.isCommon;this.isCommon=e.isCommon,this.includePages=o.default.extend(!0,{},e.includePages),this.updateShow(),t&&this.updateHierarchyLevel(),f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBackgroundElement",{get:function(){return this._isBackgroundElement},set:function(e){this._isBackgroundElement=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchorProp",{get:function(){return this._anchor},set:function(e){this._anchor!=e&&(this._anchor=e,(0,L.waitForChangeEndToUpdate)(F),(0,L.waitForChangeEndToUpdate)(this.waitToUpdateAnchor))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elemClassNameProp",{get:function(){return this._elemClassName},set:function(e){this._elemClassName=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationEffect",{get:function(){return this._animationEffect},set:function(e){e&&"_preview"in e&&e._preview?(e._preview in e?this.playAnimation(e[e._preview]):this.playAnimation(null),delete e._preview):e||this.playAnimation(null),this._animationEffect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"referenceId",{get:function(){return this._referenceId},set:function(e){this._referenceId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAdminLocked",{get:function(){return this._isAdminLocked},set:function(e){this._isAdminLocked=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(e){this._left=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._top},set:function(e){this._top=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"individualMargin",{get:function(){return this._individualMargin},set:function(e){this._individualMargin=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutConstraints",{get:function(){return this._layoutConstraints},set:function(e){this._layoutConstraints=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoSizeEnabled",{get:function(){return!(!this.flexGrow||!this.flexShrink)},set:function(e){this.flexGrow=this.flexShrink=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useMinWidth",{get:function(){return this._useMinWidth},set:function(e){this._useMinWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useMinHeight",{get:function(){return this._useMinHeight},set:function(e){this._useMinHeight=e,setTimeout((function(){return wb_builder.bodyInstance.stickyInvalidate()}),0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useMaxWidth",{get:function(){return this._useMaxWidth},set:function(e){this._useMaxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useMaxHeight",{get:function(){return this._useMaxHeight},set:function(e){this._useMaxHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this._minHeight},set:function(e){this._minHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(e){this._maxHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOnPhone",{get:function(){return!this.getHiddenInMode(u().MODE_PHONE)},set:function(e){this.setHiddenInMode(u().MODE_PHONE,!e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOnTablet",{get:function(){return!this.getHiddenInMode(u().MODE_TABLET)},set:function(e){this.setHiddenInMode(u().MODE_TABLET,!e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOnDesktop",{get:function(){return!this.getHiddenInMode(u().MODE_DESKTOP)},set:function(e){this.setHiddenInMode(u().MODE_DESKTOP,!e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOnTv",{get:function(){return!this.getHiddenInMode(u().MODE_TV)},set:function(e){this.setHiddenInMode(u().MODE_TV,!e)},enumerable:!1,configurable:!0}),t.prototype.handleValueChange=function(e,t,i){var n=this.getProperty("individualMargin");if(i==S.ValueType.MARGIN){null==n||n.triggerBeforeChange(this,!0),this.individualMargin||(this.individualMargin={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});var o=this.individualMargin;e==S.SelectionBorderType.TOP?o.marginTop=t:e==S.SelectionBorderType.RIGHT?o.marginRight=t:e==S.SelectionBorderType.BOTTOM?o.marginBottom=t:e==S.SelectionBorderType.LEFT&&(o.marginLeft=t),null==n||n.triggerChange(this,!0),this.updateStyle(),wb_builder.setPageModified(!0)}else i==S.ValueType.PADDING&&this.supportsPadding()&&(null==n||n.triggerBeforeChange(this,!0),this.individualMargin||(this.individualMargin={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}),o=this.individualMargin,e==S.SelectionBorderType.TOP?o.paddingTop=t:e==S.SelectionBorderType.RIGHT?o.paddingRight=t:e==S.SelectionBorderType.BOTTOM?o.paddingBottom=t:e==S.SelectionBorderType.LEFT&&(o.paddingLeft=t),null==n||n.triggerChange(this,!0),this.updateResizeLimits(),this.updateStyle(),wb_builder.setPageModified(!0))},t.prototype.getDataDefaults=function(){return{x:0,y:0,width:this.supportsAutoWidth()?"auto":200,height:this.supportsAutoHeight()?"auto":200,minWidth:this.sysMinWidth,minHeight:this.sysMinHeight,maxWidth:1200,maxHeight:600,useMinWidth:!0,useMinHeight:!0,useMaxWidth:!1,useMaxHeight:!1,content:{}}},t.prototype.fillDataWithDefaults=function(e){var t=this.getDataDefaults();return this.sysMinWidth=t.minWidth||this.sysMinWidth,this.sysMinHeight=t.minHeight||this.sysMinWidth,o.default.extend(!0,t,e)},t.prototype.__destruct=function(e){void 0===e&&(e=!1),this.remove({noHistory:!0,batch:e})},t.prototype.getRootGroupId=function(){return this.groupId?a.Service.group.getRootGroupId(this.groupId):null},t.prototype.canBeMoved=function(){return!0},t.prototype.updateResizeLimits=function(){if(this.supportsPadding()&&this.individualMargin){var e=this.individualMargin;this.elem.resizableExt("option","minWidth",e.paddingLeft+e.paddingRight),this.elem.resizableExt("option","minHeight",e.paddingTop+e.paddingBottom)}},t.prototype.supportsAutoWidth=function(){return!1},t.prototype.supportsAutoHeight=function(){return!1},t.prototype.supportsPadding=function(){return!1},t.prototype.modeClass=function(e){return new V(e)},t.prototype.switchMode=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),t){var o=!1;e in this.modes||(o=!0,this.modes[e]=this.modeClass()),i&&!o||this.modes[e].store(this),t in this.modes||(this.modes[t]=this.modeClass()),(i||e!==t)&&this.modes[t].applyTo(this),this.controls.updateMargin(this.getActualMargins()),this.updateAlignment()}},t.prototype.getUsedMediaGalleryItems=function(){return[]},t.prototype.getUsedSiteStyles=function(){return[]},t.prototype.getUsedFonts=function(){return[]},t.prototype.backupResponsiveData=function(){this.respBackup||(this.respBackup={width:this.width,height:this.height,useMinWidth:this.useMinWidth,useMaxWidth:this.useMaxWidth,useMinHeight:this.useMinHeight,useMaxHeight:this.useMaxHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,minHeight:this.minHeight,maxHeight:this.maxHeight,isAutoSizeEnabled:this.isAutoSizeEnabled})},t.prototype.restoreResponsiveData=function(){this.respBackup&&(this.width=this.respBackup.width,this.height=this.respBackup.height,this.useMinWidth=this.respBackup.useMinWidth,this.useMaxWidth=this.respBackup.useMaxWidth,this.useMinHeight=this.respBackup.useMinHeight,this.useMaxHeight=this.respBackup.useMaxHeight,this.minWidth=this.respBackup.minWidth,this.maxWidth=this.respBackup.maxWidth,this.minHeight=this.respBackup.minHeight,this.maxHeight=this.respBackup.maxHeight,this.isAutoSizeEnabled=!!(this.respBackup.flexGrow||this.respBackup.flexShrink||this.respBackup.isAutoSizeEnabled),this.respBackup=null)},t.prototype.serialize=function(){this.switchMode(u().getMode(),u().getMode(),!1,!1);var e={class:this.getClassType(),id:this.id,parentId:this.parent?this.parent.id:null,referenceTo:this.referenceTo?this.referenceTo:null,sortOrder:this.sortOrder,x:this.left,y:this.top,width:this.width,height:this.height,individualMargin:this.individualMargin?N({},this.individualMargin):null,minWidth:this.minWidth,maxWidth:this.maxWidth,minHeight:this.minHeight,maxHeight:this.maxHeight,useMinWidth:this.useMinWidth,useMaxWidth:this.useMaxWidth,useMinHeight:this.useMinHeight,useMaxHeight:this.useMaxHeight,flexGrow:this.flexGrow,flexShrink:this.flexShrink,anchor:this._anchor,elemClassName:this._elemClassName,animationEffect:this._animationEffect,referenceId:this.referenceId,isAdminLocked:this.isAdminLocked,zIndex:this.getZIndex(),content:null,isCommon:!!this.isCommon,includePages:this.includePages,commonalityBackup:this.commonalityBackup,isLocked:this.isLocked,hiddenResp:this.hiddenResp,modes:this.modes,respBackup:this.respBackup};this.srcCompositionId&&(e.srcCompositionId=this.srcCompositionId),this.name&&(e.name=this.name);var t=this.groupPath?this.groupPath:this.groupId?a.Service.group.resolveGroupPath(this.groupId):null;return t&&(e.groupPath=t),e},t.prototype.appendRestorationData=function(e){e._restoreId=this.id,e._restoreIndex=this.index},t.prototype.getClassType=function(){return this.className},t.prototype.getClassName=function(){return"WB_"+this.className},t.prototype.onClick=function(e){a.Service.textArea.isMousedowned()?a.Service.textArea.resetMousedowned():(p().hideEditors=!0,a.Service.textArea.hideEditors(),(0,d.hideAllContextMenus)(),a.Service.uiManager.getManager().closeAll(),this.isEditableStrict&&(l.UserInput.hotKeysMod.ctrl?this.setSelected(!this.isSelected()):(3==e.which&&this.selected||t.unselectAll(),a.Service.group.handleInteract(this)||this.setSelected(!0,!0))))},t.prototype.onStartResize=function(e){a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-resize-start",this)},t.prototype.onStopResize=function(e){a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-resize-end",this)},t.prototype.onLiveResize=function(e,t){"number"!=typeof e&&(e=this.getWidthInPixels()),"number"!=typeof t&&(t=this.getHeightInPixels()),this.noPhotoMsg.find("i").css("display",e*t>=22500&&e>=140&&t>=100?"block":"none"),this.resizeErrorMessage(e,t)},t.prototype.onResize=function(e){if(void 0===e&&(e=!1),!this.isHidden()){var t=this.getParent();t&&t.updateSize(),e||wb_builder.setPageModified(!0),this.elem.trigger("elementresize",[this])}},t.prototype.onLoaded=function(){return o.default.when()},t.prototype.updateStyle=function(e,t){void 0===e&&(e=!1);var i={};if(this.supportsAutoWidth()&&!this.isBackgroundElement||this.container.css("width","100%"),this.supportsAutoHeight()&&!this.isBackgroundElement||this.container.css("height","100%"),this.isBackgroundElement)i={left:"",top:"",width:"100%",height:"100%",margin:"",flex:"",minWidth:"",minHeight:"",maxWidth:"",maxHeight:""};else if(this.layoutConstraints===C.ChildrenLayoutType.Absolute)i={left:this.left,top:this.top,width:this.width,height:this.height,margin:""},this.updateSizeLimits();else{i.left=i.top="";var n=this.isParentRowAsColumn();this.resizing||(n&&"number"!=typeof this._width?this.supportsAutoWidth()&&this.parent&&this.parent.getChildrenHorizontalAlign()!==C.FlexAlignItems.Stretch?i.width="auto":i.width="100%":i.width=this.width,i.height=this.height,this.updateFlex(i),this.updateSizeLimits()),this.updateAlignment();var o=this.getActualMargins();o&&(o.marginLeft||o.marginRight||o.marginTop||o.marginBottom)?i.margin=o.marginTop+"px "+o.marginRight+"px "+o.marginBottom+"px "+o.marginLeft+"px":i.margin=""}this.elem.css(i),this.resizeErrorMessage()},t.prototype.updateFlex=function(e){(e||this.elem[0].style).flex=this.flexGrow+" "+this.flexShrink+" auto"},t.prototype.updateSizeLimits=function(e){void 0===e&&(e=!1);var t=this.elem[0].style;if(e)t.minWidth="",t.minHeight="",t.maxWidth="",t.maxHeight="";else{var i=this.flexGrow>0||this.flexShrink>0||!(this.width+"").match(/^[0-9]+$/),n=this.flexGrow>0||this.flexShrink>0||!(this.height+"").match(/^[0-9]+$/),o="",s="";this.layoutConstraints==C.ChildrenLayoutType.Absolute?(o=this.sysMinWidth+"px",s=Math.max(this._forcedMinHeight,this.sysMinHeight)+"px",i=n=!0):this._forcedMinHeight>0&&(s=this._forcedMinHeight+"px"),t.minWidth=this.useMinWidth&&i?this.minWidth+"px":o,t.minHeight=this.useMinHeight&&n?Math.max(this._forcedMinHeight,this.minHeight)+"px":s,t.maxWidth=this.useMaxWidth&&i?this.maxWidth+"px":"100%",t.maxHeight=this.useMaxHeight&&n?this.maxHeight+"px":""}},t.prototype.updateAlignment=function(){if(this.parent){var e,t,i=this.parent,n=i.getChildIndex(this),o=i.getChildren().length,s=o%2!=0&&(o-1)/2==n?C.FlexAlignItems.Center:n<o/2?C.FlexAlignItems.Start:C.FlexAlignItems.End;if(this.isParentRowAsColumn())e=i.getHorizontalAlignment(),t=C.FlexAlignItems.Start;else{var r=i.getHorizontalSpacing();e=r==C.FlexAlignContent.Center?C.FlexAlignItems.Center:r==C.FlexAlignContent.Stretch?C.FlexAlignItems.Stretch:r==C.FlexAlignContent.SpaceBetween||r==C.FlexAlignContent.SpaceAround||r==C.FlexAlignContent.SpaceEvenly?s:r==C.FlexAlignContent.End?C.FlexAlignItems.End:C.FlexAlignItems.Start,t=i.getVerticalAlignment()}this.controls.setAlignment(e,t)}},t.prototype.playAnimation=function(e){var t=this;this.container.css((0,M.buildAnimCss)()),this.container.removeClass("loop"),e&&window.requestAnimationFrame((function(){t.container.css((0,M.buildAnimCss)(e)),e.loop?t.container.addClass("loop"):t.container.removeClass("loop")}))},t.prototype.getLayoutConstraints=function(){return this.layoutConstraints},t.prototype.setLayoutConstraints=function(e,t){void 0===t&&(t=!1),this._layoutConstraints===e&&this._layoutConstraintsIsSet||(t?this._layoutConstraints=e:this.layoutConstraints=e,this._layoutConstraintsIsSet=!0,e===C.ChildrenLayoutType.Absolute?this.movePushBtn.setActive(!0):(this.movePushBtn.setActive(!1),a.Service.group.ungroupElement(this)),this.parent&&this.parent.controls&&this.setDebugLinesVisible(this.parent.controls.isDebugLinesVisible()),this.controls.updateDebugLines(this.hierarchyLevel,this._layoutConstraints==C.ChildrenLayoutType.Absolute))},t.prototype.isParentRowAsColumn=function(){return!!this.parent&&this.parent.getChildrenLayout()===C.ChildrenLayoutType.Horizontal&&!this.parent.isChildrenLayoutHorizontalNow()},t.prototype.getActualMargins=function(){var e=this.individualMargin?N({},this.individualMargin):null;return e&&this.isParentRowAsColumn()&&(e.marginLeft=e.marginRight=0),e},t.prototype.getActualPadding=function(){var e=N({},this._individualMargin);return e.paddingTop=Math.round(e.paddingTop||0),e.paddingRight=Math.round(e.paddingRight||0),e.paddingBottom=Math.round(e.paddingBottom||0),e.paddingLeft=Math.round(e.paddingLeft||0),e},t.prototype.setLocked=function(e,t){var i=this;void 0===t&&(t=!1),this.isEditableStrict&&(e?(this.isLocked=!0,t||this.setSelected(!1),this.moveRelativeHandle&&this.moveRelativeHandle.setEnabled(!1),this.isResizable&&this.elem.resizableExt("disable"),this.controls.setLocked(!0,(function(){return i.setLocked(!1)})),this.elem.css("opacity",1),this.elem.addClass("wb_element_locked")):(this.isLocked=!1,t||this.setSelected(this.isSelected()),this.moveRelativeHandle&&this.moveRelativeHandle.setEnabled(!0),this.isResizable&&this.elem.resizableExt("enable"),this.controls.setLocked(!1),this.elem.css("opacity",""),this.elem.removeClass("wb_element_locked")))},t.prototype.updateResizeMode=function(){this.controls.setResizeMode(this.isEditableStrict?this.getDefaultResizeMode():y.ControlsResizeMode.NONE)},t.prototype.getDefaultResizeMode=function(){return y.ControlsResizeMode.LOWER_RIGHT},t.prototype.updateContentSize=function(e){},t.prototype.updateContainment=function(){},t.prototype.getName=function(e){return void 0===e&&(e=!1),this.name&&!e?this.name:this.getClassType()},t.prototype.getIcon=function(){return null},t.prototype.getEmtyMessageText=function(){return this.noPhotoText},t.prototype.getEmtyMessageImage=function(){return this.noPhotoBg},t.prototype.setEmptyMessageText=function(e){this.noPhotoText=e,this.noPhotoMsg.find("span").html(e)},t.prototype.setEmptyMessageImage=function(e){this.noPhotoBg=e,this.noPhotoMsg.find("i").attr("class",e)},t.prototype.displayEmptyMessage=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e?(this.noPhotoMsg.css("display",t?"none":"block"),i&&this.noPhotoMsg.find("i").css("display","block")):this.noPhotoMsg.css("display","none")},t.prototype.setErrorMessage=function(e){this.errorMessageText=e,this.displayErrorMessage(!0),this.errorMessage.find(".wb_caption_error_text").text(e)},t.prototype.displayErrorMessage=function(e){e?(this.errorMessage||(this.errorMessage=(0,o.default)('<div class="wb_caption_error">').append((0,o.default)('<div class="caption_error">').append((0,o.default)("<i>").addClass(this.getIcon()||"")).append("<br />").append((0,o.default)("<span>").addClass("wb_caption_error_name").text(this.getClassType())).append("<br />").append((0,o.default)("<span>").addClass("wb_caption_error_text").text(this.errorMessageText))).hide(),this.elem.append(this.errorMessage)),this.errorMessage.css("display","block")):this.errorMessage&&this.errorMessage.css("display","none")},t.prototype.resizeErrorMessage=function(e,t){var i=this;if(this.errorMessage){"number"!=typeof e&&(e=this.getWidthInPixels()),"number"!=typeof t&&(t=this.getHeightInPixels());var n=this.errorMessage.find("i"),o=this.errorMessage.find(".wb_caption_error_name"),s=this.errorMessage.find(".wb_caption_error_text");if(this.elem.parents("body").length){var r=0;e>=90&&t>=60?(r=.9*Math.min(t-o.height()-s.height(),e,70),o.css({display:"inline-block"}),s.css({display:"inline-block"})):(r=Math.min(t,e,70),o.css({display:"none"}),s.css({display:"none"})),n.css({lineHeight:r+"px",width:r+"px",fontSize:.8*r+"px"})}else setTimeout((function(){i.resizeErrorMessage(e,t)}),100)}},t.prototype.onContextMenu=function(){this.menu&&a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-context-menu",this)},t.prototype.setResizingEnabled=function(e,t){void 0===t&&(t=!1),this.isElementPreview||this.isEditableStrict&&(e?this.elem.resizableExt("enable"):(this.elem.resizableExt("disable"),this.elem.css("opacity",1),t&&(this.isResizable=!1,this.elem.resizableExt("destroy"))))},t.prototype.setDraggingEnabled=function(e){!this.isElementPreview&&this.isMovable&&this.moveRelativeHandle&&this.isEditableStrict&&!this.isLocked&&this.layoutConstraints==C.ChildrenLayoutType.Absolute&&this.moveRelativeHandle.setEnabled(e)},t.prototype.setControlsEnabled=function(e){this.isEditableStrict&&(e?this.controls.setVisible(!0):this.controls.setVisible(!1))},t.prototype.setControlsVisible=function(e){this.isEditableStrict&&(e&&!this.isElementPreview?(this.isControlsVisible=!0,this.controls.setHover(!0)):(this.isControlsVisible=!1,this.controls.setHover(!1)))},t.prototype.canUseAsBackground=function(){return!1},t.prototype.getSupportedSizeUnits=function(){var e=[{suffix:"",label:"px"},{suffix:"%",min:1,max:100,precision:2,step:1}],t=[{suffix:"",label:"px"}];return this.supportsAutoWidth()&&e.push({fixedValue:"auto",label:__("auto")}),this.supportsAutoHeight()&&t.push({fixedValue:"auto",label:__("auto")}),{sizeW:e,sizeH:t}},t.prototype.comProperties=function(e){var i=this;if(!this.isEditableStrict)return{};var n,r=this;if(!this.comDialog){var l,c,u=this.getSupportedSizeUnits(),d={size:{minBodyHeight:this.isResizable?330:220},noScroll:!0,tabs:[{name:__("Options"),options:!0,priority:100,children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"VerticalLayout",id:"individualMarginBlock",css:{marginBottom:15},children:[{type:"Label",text:__("Margin")+(this.supportsPadding()?"/".concat(__("Padding")):"")},{type:E.SpacingSelector,id:"individualMargin",noPadding:!this.supportsPadding(),allowNegativeMargin:!0}]},{type:"VerticalLayout",id:"sizeBlock",visible:this.isResizable,children:[{type:"Label",text:__("Size")},{type:"FlowLayout",verticalAlign:"middle",id:"sizeWCont",children:[{type:"Label",text:__("Width"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"sizeW",min:1,precision:0,step:1,noFixedWidth:!0,small:!0,css:{width:140},unitsWidth:50,units:u.sizeW,unitConverter:function(e,t,n){var o=0;"fixedValue"in t?(e=i.getWidthInPixels(),"suffix"in n&&""===n.suffix&&(o=-1)):"suffix"in n&&""===n.suffix&&(o=1);var s=i.getParent();if(s){var r=s.getWidthInPixels();r&&(0===o?e=100*e/r:1===o&&(e=e*r/100))}return e},init:function(){if(r.elem.hasClass("wb-ext-resizable")&&!r.elem.resizableExt("option","disabled")){var e=r.elem.resizableExt("option","handles").split(/,\ ?/),t=!0;for(var i in e){var n=e[i];"e"!==n&&"se"!==n&&"sw"!==n&&"w"!==n&&"ne"!==n&&"nw"!==n||(t=!1)}t&&this.setEnabled(!1)}},change:function(){i.updateComPropertiesInterface(),a.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-sizeW-change",i)}}],css:wb_builder.rtl?{marginLeft:"30px",textAlign:"left"}:{marginRight:"0",textAlign:"right"}},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"Label",text:__("Height"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"sizeH",min:1,precision:0,step:1,noFixedWidth:!0,small:!0,css:{width:140},unitsWidth:50,units:u.sizeH,unitConverter:function(e,t,n){var o=0;"fixedValue"in t?(e=i.getHeightInPixels(),"suffix"in n&&""===n.suffix&&(o=-1)):"suffix"in n&&""===n.suffix&&(o=1);var s=i.getParent();if(s){var r=s.getHeightInPixels();r&&(0===o?e=100*e/r:1===o&&(e=e*r/100))}return e},init:function(){if(r.elem.hasClass("wb-ext-resizable")&&!r.elem.resizableExt("option","disabled")){var e=r.elem.resizableExt("option","handles").split(/,\ ?/),t=!0;for(var i in e){var n=e[i];"s"!==n&&"se"!==n&&"sw"!==n&&"n"!==n&&"ne"!==n&&"nw"!==n||(t=!1)}t&&this.setEnabled(!1)}},change:function(){i.updateComPropertiesInterface(),a.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-sizeH-change",i)}}],css:wb_builder.rtl?{marginLeft:"30px",marginTop:7,textAlign:"left"}:{marginRight:"0",marginTop:7,textAlign:"right"}},{type:"FlowLayout",id:"flexBlock",verticalAlign:"middle",children:[{type:"CheckBox",id:"flexResize",label:__("Allow to adjust size automatically"),change:this.updateComPropertiesInterface.bind(this)}],css:wb_builder.rtl?{textAlign:"left",marginTop:this.isResizable?15:0}:{textAlign:"right",marginTop:this.isResizable?15:0}}]},{type:"VerticalLayout",id:"positionBlock",css:{marginTop:this.isResizable?15:0},children:[{type:"Label",text:__("Position")},{type:"FlowLayout",verticalAlign:"middle",id:"locXCont",children:[{type:"Label",text:__("From Left"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:"TextField",id:"locX",css:{width:60},styleClass:"input-sm",change:function(){a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-locX-change",r)}},{type:"Label",text:" px",css:{marginBottom:"0px",fontWeight:"normal"}}],css:wb_builder.rtl?{marginLeft:"30px",textAlign:"left"}:{marginRight:"30px",textAlign:"right"}},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"Label",text:__("From Top"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:"TextField",id:"locY",css:{width:60},styleClass:"input-sm",change:function(){a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-locY-change",r)}},{type:"Label",text:" px",css:{marginBottom:"0px",fontWeight:"normal"}}],css:wb_builder.rtl?{marginLeft:"30px",marginTop:7,textAlign:"left"}:{marginRight:"30px",marginTop:7,textAlign:"right"}}]},{type:"VerticalLayout",id:"minSizeBlock",css:{marginTop:this.isResizable?15:0},children:[{type:"Label",text:__("Minimum size")},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"CheckBox",id:"useMinWidth",change:this.updateComPropertiesInterface.bind(this)},{type:"Label",text:__("Width"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"minWidth",min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:wb_builder.rtl?{marginLeft:"30px",textAlign:"left"}:{marginRight:"30px",textAlign:"right"}},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"CheckBox",id:"useMinHeight",change:this.updateComPropertiesInterface.bind(this)},{type:"Label",text:__("Height"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"minHeight",min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:wb_builder.rtl?{marginLeft:"30px",marginTop:7,textAlign:"left"}:{marginRight:"30px",marginTop:7,textAlign:"right"}}]},{type:"VerticalLayout",id:"maxSizeBlock",css:{marginTop:this.isResizable?15:0},children:[{type:"Label",text:__("Maximum size")},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"CheckBox",id:"useMaxWidth",change:this.updateComPropertiesInterface.bind(this)},{type:"Label",text:__("Width"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"maxWidth",min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:wb_builder.rtl?{marginLeft:"30px",textAlign:"left"}:{marginRight:"30px",textAlign:"right"}},{type:"FlowLayout",verticalAlign:"middle",children:[{type:"CheckBox",id:"useMaxHeight",change:this.updateComPropertiesInterface.bind(this)},{type:"Label",text:__("Height"),css:{marginBottom:"0px",fontWeight:"normal"}},{type:w.SizeSelector,id:"maxHeight",min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:wb_builder.rtl?{marginLeft:"30px",marginTop:7,textAlign:"left"}:{marginRight:"30px",marginTop:7,textAlign:"right"}}]},{type:"VerticalLayout",id:"anchorBlock",css:{marginTop:15},children:[{type:"Label",text:__("Anchor name"),helpText:__('Specify anchor name if you want to create a link to this element. For example if you specify value "apple" then you will be able to access this element with URL "yourwebsite.com/page-alias/#apple".')},{type:"TextField",id:"anchorName",change:function(){var e=this.getValue();e=e.replace(/^\s*(.+?)\s*$/i,"$1"),this.setValue(e)}}]},{type:"VerticalLayout",id:"classNameBlock",css:{marginTop:15},children:[{type:"Label",text:__("Class name"),helpText:__("Specify class name only if you need to access this element per your custom %s code.").replace("%s","CSS/JavaScript")},{type:"TextField",id:"elemClassName",change:function(){var e=this.getValue();e=e.replace(/^\s*(.+?)\s*$/i,"$1"),this.setValue(e)}}]},{type:"VerticalLayout",id:"referenceIdBlock",ignore:!s.wbConfig.adminMode,css:{marginTop:15},children:[{type:"Label",text:__("Reference ID"),helpText:__("Element ID for use with website creation %sAPIs%s").replace("%s",'<a href="https://site.pro/docs/api/#websites/create" target="_blank" style="text-decoration: underline;">').replace("%s","</a>")},{type:"TextField",id:"referenceId",change:function(){var e=this.getValue();e=e.replace(/^\s*(.+?)\s*$/i,"$1"),this.setValue(e)}}]},{type:"FlowLayout",id:"isAdminLockedBlock",ignore:!s.wbConfig.adminMode,css:{marginTop:15},children:[{type:"CheckBox",id:"isAdminLocked",label:__("Locked by admin"),helpText:'<div style="min-width: 180px;">'+__("If enabled, it will block element editing and deleting for clients who chooses this template.")+"<br />"+__("Be careful with this option. Enable it only if you 100% sure you want this element stay forever on all your clients' websites.")+"</div>"}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Show object")},{type:"CheckBox",id:"showOnPhone",label:__("Show on phone")},{type:"CheckBox",id:"showOnTablet",label:__("Show on tablet")},{type:"CheckBox",id:"showOnDesktop",label:__("Show on desktop")},{type:"CheckBox",id:"showOnTv",label:__("Show on wide screen"),css:{marginBottom:15}},{type:P.CommonalitySelectorControl,id:"commonality"}]}]}]}],buttons:[{name:__("Cancel"),click:c=function(){"cancelFunc"in d&&"function"==typeof d.cancelFunc&&d.cancelFunc.call(this,n),r.comDialog&&r.comDialog.hide()}},{name:__("Apply"),primary:!0,click:l=function(){wb_builder.setPageModified(!0),O.Property.beginUserInteraction(),wb_builder.site.removeAnchor(r),r._anchor=n.anchorName.getValue(),r._elemClassName=n.elemClassName.getValue(),n.referenceId&&(r.referenceId=n.referenceId.getValue()),n.isAdminLocked&&(r.isAdminLocked=n.isAdminLocked.getValue());var e=r.isCommon;r.commonality=n.commonality.getValue(),wb_builder.site.addAnchor(r);var i=n.individualMargin.getValue();r.individualMargin=r.supportsPadding()?i:{marginTop:i.marginTop,marginRight:i.marginRight,marginBottom:i.marginBottom,marginLeft:i.marginLeft},r.updateResizeLimits(),r.controls.updateMargin(r.getActualMargins()),r.supportsPadding()&&r.controls.updatePadding(r.getActualPadding()),r.isAutoSizeEnabled=n.flexResize.getValue(),r.useMinWidth=!!n.useMinWidth.getValue(),r.useMinHeight=!!n.useMinHeight.getValue(),r.useMaxWidth=!!n.useMaxWidth.getValue(),r.useMaxHeight=!!n.useMaxHeight.getValue(),r.minWidth=n.minWidth.getValue(),r.minHeight=n.minHeight.getValue(),r.maxWidth=n.maxWidth.getValue(),r.maxHeight=n.maxHeight.getValue(),r.updateSizeLimits(),r.setLocation(parseInt(n.locX.getValue(),10),parseInt(n.locY.getValue(),10)),r.isResizable&&r.setSize(n.sizeW.getValue(),n.sizeH.getValue()),r.onResize(),r.updateResizeMode(),"callbackFunc"in d&&"function"==typeof d.callbackFunc&&d.callbackFunc.call(this,n),r.updateShow(),r.comDialog&&r.comDialog.hide(),r.isCommon!==e&&r.menu&&r.menuInitialized&&t.updateContextMenuRemove(r.menu,r),r.showOnPhone=n.showOnPhone.getValue(),r.showOnTablet=n.showOnTablet.getValue(),r.showOnDesktop=n.showOnDesktop.getValue(),r.showOnTv=n.showOnTv.getValue(),r.onLiveResize(),O.Property.endUserInteraction(),f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent),a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-apply",r),a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-close",r)}}]},h=null;"object"==typeof e&&e&&"init"in e&&"function"==typeof e.init&&(h=e.init,e.init=null);var p=null;"object"==typeof e&&e&&"close"in e&&"function"==typeof e.close&&(p=e.close,e.close=null),this.comDialog=new(g())(__("Properties"),a.Service.UIBuilder.extendDefinition(d,e||{})),h&&h.call(this,this.comDialog.fields),this.comDialog.onClose=function(){p&&r.comDialog&&p.call(r.comDialog,r.comDialog.fields),a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-edit-end",r),a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-close",r)},this.comDialog._cancelFunc=c,this.comDialog._applyFunc=l,this.comDialog.tabbedPane.onChange=function(e,t,i){i&&i.type&&a.Service.HelpSystemPlayer.notify("item-plugin-"+r.getClassType()+"-prop-tab-"+i.type,r)}}if((n=this.comDialog.fields).anchorName.setText(this._anchor||""),n.elemClassName.setText(this._elemClassName||""),n.referenceId&&n.referenceId.setText(this.referenceId||""),n.isAdminLocked&&n.isAdminLocked.setValue(this.isAdminLocked||!1),n.commonality.setValue(this.commonality),n.sizeBlock.setVisible(!this.isBackgroundElement),this.layoutConstraints==C.ChildrenLayoutType.Absolute)n.positionBlock.setVisible(!this.isBackgroundElement),n.individualMarginBlock.setVisible(!1),n.minSizeBlock.setVisible(!1),n.maxSizeBlock.setVisible(!1),n.flexBlock.setVisible(!1);else{n.positionBlock.setVisible(!1),n.individualMarginBlock.setVisible(!this.isBackgroundElement);var m=this.isSizeDynamic();n.minSizeBlock.setVisible(!this.isBackgroundElement&&m),n.maxSizeBlock.setVisible(!this.isBackgroundElement&&m),n.flexBlock.setVisible(!this.isBackgroundElement)}n.individualMargin.setValue(o.default.extend({},this.individualMargin)),n.flexResize.setValue(this.isAutoSizeEnabled),n.useMinWidth.setValue(this.useMinWidth),n.minWidth.setEnabled(this.useMinWidth),n.minWidth.setValue(this.minWidth),n.useMinHeight.setValue(this.useMinHeight),n.minHeight.setEnabled(this.useMinHeight),n.minHeight.setValue(this.minHeight),n.useMaxWidth.setValue(this.useMaxWidth),n.maxWidth.setEnabled(this.useMaxWidth),n.maxWidth.setValue(this.maxWidth),n.useMaxHeight.setValue(this.useMaxHeight),n.maxHeight.setEnabled(this.useMaxHeight),n.maxHeight.setValue(this.maxHeight),n.showOnPhone.setValue(this.showOnPhone),n.showOnTablet.setValue(this.showOnTablet),n.showOnDesktop.setValue(this.showOnDesktop),n.showOnTv.setValue(this.showOnTv);var y=this.getLocation();if(n.locX.setValue(Math.round(y.left)),n.locY.setValue(Math.round(y.top)),this.isResizable){var b=this.getSize();n.sizeW.setValue(b.width),n.sizeH.setValue(b.height)}return this.comDialog.tabbedPane.setLocked(!1),this.comDialog.setTabbedPaneVisible(!0),(this.virtualElement&&this.comDialog.optionsTab||this.noOptionsTab)&&this.comDialog.tabbedPane.setTabVisible(this.comDialog.optionsTab,!1),a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-start",this),a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-prop-open",this),this.comDialog.show(),n},t.prototype.updateComPropertiesInterface=function(){if(this.comDialog){var e=this.comDialog.fields,t=this.layoutConstraints!==C.ChildrenLayoutType.Absolute&&e.flexResize.getValue()||"number"!=typeof e.sizeW.getValue()||"number"!=typeof e.sizeH.getValue();e.minSizeBlock.setVisible(!this.isBackgroundElement&&t),e.maxSizeBlock.setVisible(!this.isBackgroundElement&&t),e.minWidth.setEnabled(e.useMinWidth.getValue()),e.minHeight.setEnabled(e.useMinHeight.getValue()),e.maxWidth.setEnabled(e.useMaxWidth.getValue()),e.maxHeight.setEnabled(e.useMaxHeight.getValue())}},t.prototype.comPropertiesField=function(e){if(!this.comDialog){var t=this.getProperty(e);return t?this.system.propertiesPanel.getComponentForProperty(t):null}return this.comDialog.propertyDialogField(e)},t.prototype.closeComProperties=function(){this.comDialog&&this.comDialog.propertyDialogClose()},t.prototype.applyComProperties=function(e){this.comDialog&&this.comDialog.propertyDialogApply()},t.prototype.duplicateElement=function(e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1);var o={},s=[],a=function(e,t){var i=e.getParent();if(i&&"LayoutElement"===i.getClassType()){var n=i.id;o.hasOwnProperty(n)||(o[n]={parent:i,indexes:{},elements:[],data:[]}),o[n].elements.push(e);var s=e.serialize();t&&s.content&&"children"in s.content&&(s.content.children=[]),o[n].data.push(s),o[n].indexes[e.id]=i.getChildIndex(e)}},l=function(e,t){var i=[];e.elements=e.elements.sort((function(t,i){return e.indexes[t.id]<e.indexes[i.id]?-1:1})),e.data=e.data.sort((function(t,i){return e.indexes[t.id]<e.indexes[i.id]?-1:1}));for(var n=0,o=e.data;n<o.length;n++){var a=o[n];delete a.id,a._copy=!0,a.referenceTo=void 0,a.anchor=null,r.ElementRegister.createElement(a.class,a,!1,!1,(function(e){i.push(e)}))}for(var l=e.elements[e.elements.length-1],c=0,u=i;c<u.length;c++){var d=u[c];e.parent.addChild(d,!1,!1,l,!t),d.onResize(!0),d.updateStyle(!0),s.push(d),l=d}};if(!i&&this.isSelected())for(var c in t.selected){var u=t.selected[c];if(u){for(var d=!1,h=u.getParent();h;h=h.getParent())if(h instanceof t&&h.isSelected()){d=!0;break}d||a(t.selected[c],n)}}else a(this,n);for(var p in o)o.hasOwnProperty(p)&&l(o[p],e);s.length&&(0,I.createAddElementsHistoryRecord)(s)},t.prototype.setAsBackground=function(){var e=this.parent;if(e&&"backgroundElement"in e){var t=e.backgroundElement;wb_builder.historyAdd("setAsBackground",{element:this.id,index:e.getChildIndex(this),parent:e.id,bgElement:t?new r.ElementRestorationData(t):null},(function(e){var t=window.getElementById(e.element),i=window.getElementById(e.parent);if(t&&i){if(t.setParent(null),i.addChild(t,!1,!1,i.getChildAt(e.index)),e.bgElement){var n=e.bgElement.restore();n&&(n.setParent(null),i.backgroundElement=n,n.updateStyle(),f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent))}else i.backgroundElement=null,f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent);i.updateStyle(),e.bgElement=null}else console.error("Unable to undo 'setAsBackground': related elements not found.")}),(function(e){var t=window.getElementById(e.element),i=window.getElementById(e.parent);if(t&&i){var n=i.backgroundElement;e.bgElement=n?new r.ElementRestorationData(n):null,e.index=i.getChildIndex(t),t.setSelected(!1),i.removeChild(t),i.backgroundElement=t,i.updateStyle(),f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent)}else console.error("Unable to redo 'setAsBackground': related elements not found.")})),this.setSelected(!1),e.removeChild(this),e.backgroundElement=this,e.updateStyle(),f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent),a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-setAsBg",this)}},t.prototype.setupContextMenu=function(){var e=this;this.menuInitialized=!1,this.menu=new d.ContextMenu("wb_element_contextmenu"+this.index),this.menu.bind(this.editBtn.elem),this.menu.pasiveBind(this.controls.elem),this.menu.onShow=function(i,n){e.menuInitialized||(e.menuInitialized=!0,e.initContextMenu(),t.updateContextMenuRemove(i,e)),e.isSelected()||(t.unselectAll(),a.Service.textArea.hideEditors(),e.setSelected(!0)),e.updateContextMenu(n&&n.currentTarget&&(0,o.default)(n.currentTarget).hasClass("wb-site-tree-item-content"));var s=new f.ContextMenuEvent(i,n?n.pageX:0,n?n.pageY:0,e);f.GlobalEvents.triggerEvent("contextmenu.show",s)}},t.prototype.initContextMenu=function(){var e=this;if(this.menu){var i=this.menu,n=this;i.addItem("selectParentMenu",__("Select parent"),this.selectParentMenu,!1,!1,null,"fa fa-sitemap"),wb_builder.isTouchDevice&&i.addItem("deselect",__("Deselect all"),(function(){a.Service.element.unselectAll()}),!1,!1,null,"fa fa-mouse-pointer"),i.addSeparator(),i.addItem("duplicateElements",__("Duplicate"),(function(){e.duplicateElement()}),!1,!1,null,"glyphicon glyphicon-list-alt",!0),i.addItem("copy",__("Copy"),(function(){var e;if(n.isSelected()){var i,o=n.getParent();if(!o)return;for(var s in e=[],t.selected){var r=t.selected[s];r&&(i=r.getParent())&&i.id===o.id&&e.push(r.serialize())}wb_builder.setClipboard(e)}else e=n.serialize(),wb_builder.setClipboard([e])}),!1,!1,null,"glyphicon glyphicon-list-alt",!0),i.addItem("paste",__("Paste"),null,!1,!1,null,"glyphicon glyphicon-download-alt"),i.addSeparator(),i.addItem("lock",__("Lock"),(function(){wb_builder.setPageModified(!0);var i=!e.isLocked,o=[];if(n.isSelected())for(var s in t.selected)(l=t.selected[s])&&o.push(l);else o.push(e);(0,I.createLockingChangeHistoryRecord)(o);for(var r=0,a=o;r<a.length;r++){var l;(l=a[r]).setLocked(i)}}),!1,!1,null,"glyphicon glyphicon-lock",!0);var o=function(){var e,i,n=[];for(e in t.selected)(i=t.selected[e]).isLocked||n.push(i);(0,I.createMoveElementsHistoryRecord)(n)},s=new d.ContextMenu;s.addItem("alignLeft",__("Left"),(function(){wb_builder.setPageModified(!0),o();var e=null;a.Service.element.eachSelected((function(){var t=this.getLocation().left;e=null===e?t:Math.min(t,e)})).eachSelected((function(){this.isLocked||(this.setLocation(e,null),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-left"),s.addItem("alignVertical",__("Middle (vertical)"),(function(){wb_builder.setPageModified(!0),o();var e=null,t=null;a.Service.element.eachSelected((function(){var i=this.getWidthInPixels(),n=this.getLocation().left,o=i+n;(null===t||t<o)&&(t=o),(null===e||e>n)&&(e=n)})).eachSelected((function(){this.isLocked||(this.setLocation(e+(t-e-this.getWidthInPixels())/2,null),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-vertical"),s.addItem("alignRight",__("Right"),(function(){wb_builder.setPageModified(!0),o();var e=null;a.Service.element.eachSelected((function(){var t=this.getLocation().left+this.getWidthInPixels();e=null===e?t:Math.max(t,e)})).eachSelected((function(){this.isLocked||(this.setLocation(e-this.getWidthInPixels(),null),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-right"),s.addItem("alignTop",__("Top"),(function(){wb_builder.setPageModified(!0),o();var e=null;a.Service.element.eachSelected((function(){var t=this.getLocation().top;e=null===e?t:Math.min(t,e)})).eachSelected((function(){this.isLocked||(this.setLocation(null,e),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-top"),s.addItem("alignHorizontal",__("Middle (horizontal)"),(function(){wb_builder.setPageModified(!0),o();var e=0,t=null;a.Service.element.eachSelected((function(){var i=this.getHeightInPixels();(null===t||t<i)&&(t=i,e=this.getLocation().top+i/2)})).eachSelected((function(){this.isLocked||(this.setLocation(null,Math.floor(e-this.getHeightInPixels()/2)),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-horizontal"),s.addItem("alignBottom",__("Bottom"),(function(){wb_builder.setPageModified(!0),o();var e=null;a.Service.element.eachSelected((function(){var t=this.getLocation().top+this.getHeightInPixels();e=null===e?t:Math.max(t,e)})).eachSelected((function(){this.isLocked||(this.setLocation(null,e-this.getHeightInPixels()),this.onResize())}))}),!1,!1,null,"glyphicon glyphicon-object-align-bottom"),i.addItem("align",__("Align"),s,!1,!1,null,"glyphicon glyphicon-object-align-left","only");var r=new d.ContextMenu;if(r.addItem("distributeHorizontal",__("Horizontally"),(function(){wb_builder.setPageModified(!0),o();var e=null,t=null,i=0,n=[];if(a.Service.element.eachSelected((function(){if(!this.isLocked){var o=this.getLocation(),s=this.getWidthInPixels();i+=s,e=null===e?o.left:Math.min(o.left,e),t=null===t?o.left+s:Math.max(o.left+s,t),n.push({elem:this,pos:o})}})),n.length>2){var s=Math.floor((t-e-i)/(n.length-1));n.sort((function(e,t){return e.pos.left===t.pos.left?e.pos.top===t.pos.top?0:e.pos.top<t.pos.top?-1:1:e.pos.left<t.pos.left?-1:1}));for(var r,l=0,c=0;c<n.length;c++)c>0?(r=l+s,n[c].elem.setLocation(r,null)):r=n[c].pos.left,l=r+n[c].elem.getWidthInPixels()}}),!1,!1,null,"glyphicon glyphicon-option-horizontal"),r.addItem("distributeVertical",__("Vertically"),(function(){wb_builder.setPageModified(!0),o();var e=null,t=null,i=0,n=[];if(a.Service.element.eachSelected((function(){if(!this.isLocked){var o=this.getLocation(),s=this.getHeight();i+=s,e=null===e?o.top:Math.min(o.top,e),t=null===t?o.top+s:Math.max(o.top+s,t),n.push({elem:this,pos:o})}})),n.length>2){var s=Math.floor((t-e-i)/(n.length-1));n.sort((function(e,t){return e.pos.top===t.pos.top?e.pos.left===t.pos.left?0:e.pos.left<t.pos.left?-1:1:e.pos.top<t.pos.top?-1:1}));for(var r,l=0,c=0;c<n.length;c++)c>0?(r=l+s,n[c].elem.setLocation(null,r)):r=n[c].pos.top,l=r+n[c].elem.getHeightInPixels()}}),!1,!1,null,"glyphicon glyphicon-option-vertical"),i.addItem("distribute",__("Distribute"),r,!1,!1,null,"glyphicon glyphicon-option-horizontal","only"),i.addItem("group",__("Group"),(function(){wb_builder.setPageModified(!0);var e=[];for(var i in t.selected)e.push(t.selected[i]);a.Service.group.groupElements(e)}),!1,!1,null,"fa fa-object-group","only"),this.isMovable||!this.parent){var l=new d.ContextMenu;l.addItem("indexMax",__("Bring to front"),(function(){var e;wb_builder.setPageModified(!0),n.parent?n.parent.zIndexHandle.changeLayer(n,"top"):null===(e=wb_builder.getCurrentContextCanvas())||void 0===e||e.zIndexHandle.changeLayer(n,"top")}),!1,!1,null,"glyphicon glyphicon-arrow-up"),l.addItem("indexMin",__("Send to back"),(function(){var e;wb_builder.setPageModified(!0),n.parent?n.parent.zIndexHandle.changeLayer(n,"bottom"):null===(e=wb_builder.getCurrentContextCanvas())||void 0===e||e.zIndexHandle.changeLayer(n,"bottom")}),!1,!1,null,"glyphicon glyphicon-arrow-down"),l.addItem("indexUp",__("Bring forward"),(function(){var e;wb_builder.setPageModified(!0),n.parent?n.parent.zIndexHandle.changeLayer(n,"up"):null===(e=wb_builder.getCurrentContextCanvas())||void 0===e||e.zIndexHandle.changeLayer(n,"up")}),!1,!1,null,"glyphicon glyphicon-arrow-up"),l.addItem("indexDown",__("Send backwards"),(function(){var e;wb_builder.setPageModified(!0),n.parent?n.parent.zIndexHandle.changeLayer(n,"down"):null===(e=wb_builder.getCurrentContextCanvas())||void 0===e||e.zIndexHandle.changeLayer(n,"down")}),!1,!1,null,"glyphicon glyphicon-arrow-down"),i.addItem("order",__("Order"),l,!1,!1,null,"glyphicon glyphicon-list")}i.addItem("remove",__("Remove"),null,!1,!1,null,"glyphicon glyphicon-remove",!0),i.addSeparator(),i.addItem("setAsBackground",__("Set as background"),(function(){return e.setAsBackground()}),!1,!1,null,"fa fa-link"),i.setVisible("setAsBackground",!1)}},t.updateContextMenuRemove=function(e,i){if(e&&wb_builder.site){var n=null,o=null;e.removeItem("remove");var r=function(e,n){a.Service.element.removeOrHideElementsWithUserInteraction(i.isSelected()?t.selected:[i],n?wb_builder.pageId:null,null)},l=function(e){var t=Object.keys(wb_builder.site.pages).length;r(0,t>1)},c=Object.keys(wb_builder.site.pages).length,u=i.isCommon&&c>1;if(wb_builder.site.languages.length>0){(n=new d.ContextMenu).addItem("lang_all",__("From all languages"),l),u&&((o=new d.ContextMenu).addItem("page_single_lang_all",__("From this page"),l),o.addItem("page_all_lang_all",__("From all pages"),r),n.setSubmenu("lang_all",o));for(var h,p=0;h=wb_builder.site.languages[p];p++){var m=function(e,n,o){void 0===o&&(o=!1),a.Service.element.removeOrHideElementsWithUserInteraction(i.isSelected()?t.selected:[i],o?wb_builder.pageId:null,n.code)};n.addItem("lang_"+h.code,'<i class="wb-multi-mi-remove-flag flag-icon-'+s.wbConfig.getCountryCode(h.code)+'"></i>'+h.name,m,!1,!1,h),u&&((o=new d.ContextMenu).addItem("page_single_lang_"+h.code,__("From this page"),(function(e,t){m(0,t,!0)}),!1,!1,h),o.addItem("page_all_lang_"+h.code,__("From all pages"),m,!1,!1,h),n.setSubmenu("lang_"+h.code,o))}}else u&&((n=new d.ContextMenu).addItem("page_single",__("From this page"),l),n.addItem("page_all",__("From all pages"),r));e.insertItemAt(e.getIndexById("order"),"remove",__("Remove"),l,!1,!1,null,"glyphicon glyphicon-remove",!0),n&&e.setSubmenu("remove",n)}},t.prototype.updateContextMenu=function(e){if(void 0===e&&(e=!1),this.menu){this.menu.setName("lock",this.isLocked?__("Unlock"):__("Lock"));var i=0;for(var n in t.selected)if(++i>=2)break;i>=2?this.menu.setMultiMode(!0):this.menu.setMultiMode(!1);var o=wb_builder.site.getPage(wb_builder.pageId);this.selectParentMenu.update(this),this.menu.setVisible("selectParentMenu",!(!this.parent||e)),this.menu.setVisible("setAsBackground",this.canUseAsBackground()),this.menu.setVisible("modeVisibility",!o||!o.popupMode||!o.popupWidth),this.menu.setVisible("order",this.isZIndexEnabled()),"LayoutElement"==this.getClassType()?a.Service.paste.addPaste(this.menu,this,this,!0):this.parent?a.Service.paste.addPaste(this.menu,this.parent,this,!0):this.menu.setVisible("paste",!1),this.layoutConstraints==C.ChildrenLayoutType.Absolute?(this.menu.setVisible("group",!0),this.menu.setVisible("distribute",!0),this.menu.setVisible("align",!0)):(this.menu.setVisible("group",!1),this.menu.setVisible("distribute",!1),this.menu.setVisible("align",!1));var s=this.parent,r=!!(s&&s instanceof t&&"LayoutElement"==s.getClassType())&&"Menu"!=this.getClassType();this.menu.setVisible("copy",r),this.menu.setVisible("duplicateElements",r),this.menu.setVisible("remove",!!this.parent),this.menu.setVisible("lock",!!this.parent),this.menu.fixSeparators()}},t.prototype.setSelected=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),!i&&a.Service.group.handleSelect(this)||(this.controls.setSelected(e),e?(this.elem.addClass("wb-selected"),n||this.controls.setHover(!0),t.selected[this.id]=this,a.Service.HelpSystemPlayer&&a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-select")):(this.elem.removeClass("wb-selected"),this.controls.setHover(!1),delete t.selected[this.id]),this.selected=e,f.GlobalEvents.triggerEvent("selection.changed",new f.SelectionChangedBuilderEvent(this,e?"select":"deselect")))},t.prototype.isSelected=function(){return this.selected},t.prototype.show=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1);var n=this.hiddenResp||this.hidden;e?(this.hiddenResp=!1,i&&wb_builder.setPageModified(!0)):this.hidden=!1,this.updateVisibility(),n&&wb_builder.invalidateSiteStructure()},t.prototype.blink=function(e){void 0===e&&(e=!1),this.elem&&this.controls&&(e&&window.scrollTo(window.scrollX,this.elem.offset().top-a.Service.uiManager.getManager().getToolbarHeight()-50),this.controls.blink())},t.prototype.hide=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1);var n=!(this.hiddenResp||this.hidden);e?(this.hiddenResp=!0,i&&wb_builder.setPageModified(!0)):this.hidden=!0,this.updateVisibility(t),n&&wb_builder.invalidateSiteStructure()},t.prototype.setHiddenInMode=function(e,t){u().getMode()===e?t?this.hide(!0):this.show(!0):(this.modes.hasOwnProperty(e)||(this.modes[e]=this.modeClass()),this.modes[e].hidden=t)},t.prototype.getHiddenInMode=function(e){return u().getMode()===e?this.hiddenResp:e in this.modes&&this.modes[e].hidden},t.prototype.updateVisibility=function(e){void 0===e&&(e=!1),this.hiddenResp||this.hidden?this.elem.addClass("hidden"):this.elem.removeClass("hidden"),e&&this.parent&&this.parent.updateSize()},t.prototype.isHidden=function(e){return void 0===e&&(e=!1),e?!!this.hiddenResp:!!this.hidden},t.prototype.updateShow=function(e){if(void 0===e&&(e=!1),wb_builder.site){var t=wb_builder.site.languages.length>0&&!this.isIncludedOnPage(wb_builder.pageId,wb_builder.site.currSelLang);t&&!this.isHidden()?(this.hide(),!e&&this.parent&&this.parent.updateSize()):!t&&this.isHidden()&&(this.show(),!e&&this.parent&&this.parent.updateSize())}},t.prototype.onBeforeRemove=function(e){this.isEditableStrict||(e.preventRemoval=!0)},t.prototype.remove=function(e){e&&"object"==typeof e?(this.isElementPreview&&!e.noHistory&&(e=o.default.extend({},e,{noHistory:!0})),this.referenceTo&&(wb_builder.excludedElements.push(this.serialize()),this.excluded=!0),(0,d.hideAllContextMenus)(),e.noHistory||e.isRecursive||(0,I.createRemoveElementsHistoryRecord)([this],e),this.releaseResources(e),this.snapHandle.handleStop(),this.excluded||this.isElementPreview||wb_builder.site.removeAnchor(this),t.selected[this.id]&&(delete t.selected[this.id],e.batch||f.GlobalEvents.triggerEvent("selection.changed",new f.SelectionChangedBuilderEvent(this,"deselect"))),this.parent&&(this.parent.zIndexHandle.remove(this),this.parent.removeChild(this,e.batch)),a.Service.group.ungroupElement(this,e.batch),this.menu&&this.menu.dispose(),this.removed=!0,this.elem.wbUnsetClassInstance()):console.error("Element.remove() is called with invalid parameters")},t.prototype.releaseResources=function(e){},t.prototype.setPageInclusion=function(e,i,n,s){void 0===s&&(s=!1);var r,a=this.isCommon,l=o.default.extend(!0,{},this.includePages),c=Object.keys(l).length>0,u=o.default.extend(!0,{},this.commonality),d=!1,h=function(e){if(!a){a=!0;var t=l;l={},"object"==typeof e&&(e=o.default.extend({},e)),l[""+wb_builder.pageId]=Object.keys(t).length?t:e}},p=function(e){if(a&&!Object.keys(l).length)for(var t in wb_builder.site.pages)wb_builder.site.pages.hasOwnProperty(t)&&("object"==typeof e&&(e=o.default.extend({},e)),l[""+wb_builder.site.pages[t].id]=e)};if(wb_builder.site.languages.length>0){var m={},g={};o.default.each(wb_builder.site.languages,(function(){m[this.code]=!1,g[this.code]=!0}));var f=function(e,t,i){var n=""+e;if(l.hasOwnProperty(n))"object"!=typeof l[n]&&(l[n]=o.default.extend({},l[n]?g:m));else{if(!i)return;l[n]=o.default.extend({},m)}l[n][t]=i};if(n){if(!c)return;if(null===e)if(null===i)a=!0,l={};else for(r in h(g),wb_builder.site.pages)wb_builder.site.pages.hasOwnProperty(r)&&f(wb_builder.site.pages[r].id,i,!0);else a||e!==wb_builder.pageId?(h(g),null===i?l[""+e]=o.default.extend({},g):f(e,i,!0)):null===i?l={}:l[i]=!0}else if(a)if(p(g),null===e)if(null===i)d=!0;else for(r in wb_builder.site.pages)wb_builder.site.pages.hasOwnProperty(r)&&f(wb_builder.site.pages[r].id,i,!1);else null===i?(delete l[""+e],Object.keys(l).length||(d=!0)):f(e,i,!1);else{if(e!==wb_builder.pageId)return;null===i?d=!0:(c||(l=g),l[i]=!1)}}else if(n)null===e?(a=!0,l={}):(h(!0),l[""+e]=!0);else if(null===e)d=!0;else if(a)p(!0),delete l[""+e],Object.keys(l).length||(d=!0);else{if(e!==wb_builder.pageId)return;d=!0}if(d&&(a=!1,l={dummy:!1}),!s){var y=function(e,t){var i=window.getElementById(e.index);i?(this.data={index:e.index,commonality:o.default.extend(!0,{},i.commonality)},i.commonality=e.commonality):console.error("Unable to "+t+" 'hideElementInLang': can't find element "+e.index)};wb_builder.historyAdd("hideElementInLang",{index:this.id,commonality:u},(function(e){y.call(this,e,"undo")}),(function(e){y.call(this,e,"redo")}))}this.isCommon=a,this.includePages=l,a!==this.isCommon&&this.menu&&this.menuInitialized&&t.updateContextMenuRemove(this.menu,this),this.updateShow()},t.prototype.isIncludedOnPage=function(e,t,i,n){return i=void 0!==i?i:this.isCommon,n=void 0!==n?n:this.includePages,P.CommonalitySelectorControl.isElementVisible(i,n,t,e)},t.prototype.getInheritedLanguageVisibility=function(){var e={};if(this.system.site.languages.length>0){for(var t,i=void 0,n=0,o=this.system.site.languages;n<o.length;n++)e[(i=o[n]).code]=!0;for(t=this.getParent();t&&!t.isCommon;t=t.getParent())if(t.includePages&&Object.keys(t.includePages).length)for(var s=0,r=this.system.site.languages;s<r.length;s++)i=r[s],t.includePages.hasOwnProperty(i.code)&&t.includePages[i.code]||(e[i.code]=!1)}return e},t.prototype.setParent=function(e,t){void 0===t&&(t=!1),this.parent=e||null,this.updateHierarchyLevel(!1,t)},t.prototype.getParent=function(){return this.parent},t.prototype.getParentWithActiveLink=function(){var e;for(e=this.getParent();e&&"function"==typeof e.getParent;e=e.getParent())if("function"==typeof e.hasActiveLink&&e.hasActiveLink())return e;return null},t.prototype.getCommonParent=function(){var e;for(e=this.getParent();e&&"function"==typeof e.getParent;e=e.getParent())if("boolean"==typeof e.isCommon&&e.isCommon)return e;return null},t.prototype.forceMinHeightCss=function(e){this._forcedMinHeight=e,this.updateSizeLimits()},t.prototype.setSize=function(e,t,i){if(void 0===i&&(i=!1),null===e&&null===t)return!1;var n=!1;return e&&this._width!==e&&(n=!0,i?this._width=e:this.width=e,this.elem.css({width:e,right:""})),t&&this._height!==t&&(n=!0,i?this._height=t:this.height=t,this.elem.css("height",t)),n&&this.updateContentSize(),n},t.prototype.setLocation=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var o=!1;return!1!==e&&null!=e&&this._left!==e&&(o=!0,n?this._left=e:this.left=e,this.elem.css("left",e+"px")),!1!==t&&null!=t&&this._top!==t&&(o=!0,n?this._top=t:this.top=t,this.elem.css("top",t+"px")),o&&this.snapHandle.handleUpdate(i),o},t.prototype.getLocation=function(e){return void 0===e&&(e=!1),{left:this.left,top:this.top}},t.prototype.getAbsoluteLocation=function(e){void 0===e&&(e=!1);var t=this.getLocation(e);return this.parent&&(this.parent.cacheBounds(),t.left+=this.parent.offsetLeft,t.top+=this.parent.top),t},t.prototype.getSize=function(){return{width:this.width,height:this.height}},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getSizeInPixels=function(){return{width:"number"==typeof this.width?this.width:this.elem.outerWidth(),height:"number"==typeof this.height?this.height:this.elem.outerHeight()}},t.prototype.getWidthInPixels=function(){return"number"==typeof this.width?this.width:this.elem.outerWidth()},t.prototype.getHeightInPixels=function(){return"number"==typeof this.height?this.height:this.elem.outerHeight()},t.prototype.isSizeDynamic=function(){return this.layoutConstraints!==C.ChildrenLayoutType.Absolute&&this.isAutoSizeEnabled||"number"!=typeof this._width||"number"!=typeof this._height},t.prototype.cacheBounds=function(){var e,t=this.elem.position();this._left=t.left,this._top=t.top,this.offsetLeft=t.left+(this.parent?this.parent.offsetLeft:0),this.offsetTop=t.top+(this.parent?this.parent.offsetTop:0),e=this.elem.offset(),this.pageLeft=e.left,this.pageTop=e.top},t.prototype.getBounds=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=this.left,n=this.top,o=this.getSizeInPixels();if(e)return[i,n,i+o.width,n+o.height];var s=this.getParent();return{left:i,top:n,width:o.width,height:o.height,left1:i,top1:n,left2:i+o.width,top2:n+o.height,pageLeft:(s?s.pageLeft:this.pageLeft-i)+i,pageTop:(s?s.pageTop:this.pageTop-n)+n}},t.prototype.getBoundingRect=function(e){return void 0===e&&(e=!1),t.getElementBoundingRect(this.rawElem,e)},t.prototype.getContentRect=function(e){void 0===e&&(e=!1);var i=t.getElementBoundingRect(this.container[0],e),n=this.getContentPadding();return n?{x:i.left+n.paddingLeft,y:i.top+n.paddingTop,left:i.left+n.paddingLeft,top:i.top+n.paddingTop,right:i.right-n.paddingRight,bottom:i.bottom-n.paddingBottom,width:i.width-n.paddingLeft-n.paddingRight,height:i.height-n.paddingTop-n.paddingBottom,toJSON:function(){}}:i},t.getElementBoundingRect=function(e,t){void 0===t&&(t=!1);var i=e.getBoundingClientRect(),n={x:i.left,y:i.top,left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height,toJSON:function(){}};return t&&(n.x+=window.scrollX,n.y+=window.scrollY,n.left+=window.scrollX,n.top+=window.scrollY,n.right+=window.scrollX,n.bottom+=window.scrollY),n},t.prototype.isZIndexEnabled=function(){return this.layoutConstraints==C.ChildrenLayoutType.Absolute},t.prototype.isGlobalZIndex=function(){return!1},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.setZIndex=function(e){var t=0;t="string"==typeof e?parseInt(e,10):e,isNaN(t)&&(t=0);var i=this.zIndex!==t;this.zIndex=t,this.elem.css("zIndex",t>0?t:""),i&&f.GlobalEvents.triggerEvent("site.structure.changed",new f.SiteStructureChangedBuilderEvent)},t.prototype.makeLocalUrl=function(e){return wb_builder.makeLocalUrl(e)},t.prototype.makeRelUrl=function(e){return wb_builder.makeRelUrl(e)},t.truncate=function(e,t,i){if(null==e)return"";"object"==typeof e&&(e=__tr(e)),void 0===t&&(t=20),void 0===i&&(i="...");var n=e.substring(0,t);return n!==e&&(n+=i),n},t.prototype.onReloadTextTags=function(){},t.prototype.onBeforeSwitchLanguage=function(){},t.prototype.onSwitchLanguage=function(e){this.updateShow(),this.updateLangLabel()},t.prototype.onUpdateLanguages=function(){this.menu&&this.menuInitialized&&t.updateContextMenuRemove(this.menu,this),this.updateLangLabel()},t.prototype.addLangLabel=function(){this.langLabel||(this.controls.addButton(this.langLabel=new b.ControlsButton("wb_lang_label",null,b.ControlsButtonAlign.RIGHT_TOP)),this.langLabel.setActive(!1)),this.updateLangLabel()},t.prototype.updateLangLabel=function(){this.langLabel&&(wb_builder.site.languages.length?this.langLabel.setActive(!0):this.langLabel.setActive(!1),wb_builder.site.currSelLang&&this.langLabel.setLabel(wb_builder.site.currSelLang))},t.prototype.setDebugLinesVisible=function(e){this.controls.setDebugLinesVisible(e)},t.prototype.updateHierarchyLevel=function(e,t){var i,n;if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.hierarchyLevel=this.parent?this.parent.getHierarchyLevel()+1:0,this.controls.updateDebugLines(this.hierarchyLevel,this.layoutConstraints==C.ChildrenLayoutType.Absolute),this.parent&&(this.parent.isCommon||this.parent.isCommonInherited)){if(!this.isCommonInherited)if(this.isCommon){this.commonalityBackup=o.default.extend(!0,{},this.commonality);var s={isCommon:!1,includePages:{}},r=""+wb_builder.pageId;if(this.includePages&&this.includePages.hasOwnProperty(""+wb_builder.pageId))if("object"==typeof this.includePages[r])s.includePages=this.includePages[r];else if(!1===this.includePages[r]&&wb_builder.site.languages.length)for(var a=0,l=wb_builder.site.languages;a<l.length;a++){var c=l[a];s.includePages[c.code]=!1}this.isCommonInherited=!0,this.commonality=s}else null===(i=this.getProperty("commonality"))||void 0===i||i.triggerChange(this,!1);this.isCommonInherited=!0}else this.isCommonInherited&&(this.commonalityBackup?(this.isCommonInherited=!1,this.commonality=this.commonalityBackup,this.commonalityBackup=null):null===(n=this.getProperty("commonality"))||void 0===n||n.triggerChange(this,!1)),this.isCommonInherited=!1},t.prototype.getHierarchyLevel=function(){return this.hierarchyLevel},t.prototype.getChildrenLayout=function(){return C.ChildrenLayoutType.Absolute},t.prototype.isChildrenLayoutHorizontalNow=function(){return!1},t.prototype.getContentPadding=function(){return null},t.prototype.scrollIntoView=function(e){void 0===e&&(e=!1);var t=this.elem.get(0);if(e)try{t.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}catch(e){try{t.scrollIntoView({block:"center",inline:"center"})}catch(e){t.scrollIntoView(!1)}}else{var i=t.getBoundingClientRect();i.top<0?t.scrollIntoView():i.bottom>(0,o.default)(window).height()&&t.scrollIntoView(!1)}},t.prototype.getSiteTreeNodeProperties=function(){return{icon:this.getIcon(),name:this.getName(),title:this.getName(!0),color:this.hiddenResp||this.hidden?"#AAA":null,meta:this._anchor?" #"+this._anchor:"",isGrouped:!!this.groupId,isHidden:!(!this.hiddenResp&&!this.hidden),isCommon:this.isCommon,isCommonInherited:this.isCommonInherited}},t.prototype.getSiteTreeNodeChildren=function(){return[]},t.prototype.isAcceptingChildren=function(){return!1},t.prototype.updateElementContainer=function(){},t.prototype.getSiteTreeNodeMenu=function(){return this.menu},t.prototype.revalidate=function(){var t=e.prototype.revalidate.call(this);return t.elem&&t.updateStyle(),this},t.prototype.onBeforePropertyChange=function(e,t){this.system&&this.system.historyBeforeElementPropertyChange(this,e,t)},t.prototype.onPropertyChanged=function(e,t){this.invalidate(),this.system&&this.system.historyAfterElementPropertyChange(this,e,t),a.Service.HelpSystemPlayer&&a.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-prop-"+e.name+"-change",this)},t.prototype.registerProperties=function(){this.registerProperty({name:"isBackgroundElement"}),this.registerProperty({name:"layoutConstraints"}),this.registerProperty({name:"referenceId",type:R.PropertyType.ReferenceId}),this.registerProperty({name:"isAdminLocked",type:R.PropertyType.IsAdminLocked}),this.registerProperty({name:"left",type:R.PropertyType.ElementPositionLeft,dependencies:["isBackgroundElement","layoutConstraints"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints===C.ChildrenLayoutType.Absolute}}}),this.registerProperty({name:"top",type:R.PropertyType.ElementPositionTop,dependencies:["isBackgroundElement","layoutConstraints"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints===C.ChildrenLayoutType.Absolute}}});var e=function(e,t,i){var n=0;"fixedValue"in t?(e=this.getWidthInPixels(),"suffix"in i&&""===i.suffix&&(n=-1)):"suffix"in i&&""===i.suffix&&(n=1);var o=this.getParent();if(o){var s=o.getWidthInPixels();s&&(0===n?e=100*e/s:1===n&&(e=e*s/100))}return e},t=function(e,t,i){var n=0;"fixedValue"in t?(e=this.getHeightInPixels(),"suffix"in i&&""===i.suffix&&(n=-1)):"suffix"in i&&""===i.suffix&&(n=1);var o=this.getParent();if(o){var s=o.getHeightInPixels();s&&(0===n?e=100*e/s:1===n&&(e=e*s/100))}return e},i=function(e,t){void 0===t&&(t="other");var i=!0;return"minWidth"!=t||this.useMinWidth||(i=!1),"maxWidth"!=t||this.useMaxWidth||(i=!1),"minHeight"!=t||this.useMinHeight||(i=!1),"maxHeight"!=t||this.useMaxHeight||(i=!1),!this.isBackgroundElement&&i&&(this.isAutoSizeEnabled&&this.layoutConstraints!==C.ChildrenLayoutType.Absolute||"number"!=typeof e)};this.registerProperty({name:"width",type:R.PropertyType.ElementWidth,dependencies:["isAutoSizeEnabled"],uiComponentOptions:function(){var t=!0;if(this.elem.hasClass("wb-ext-resizable")&&!this.elem.resizableExt("option","disabled")){var i=this.elem.resizableExt("option","handles").split(/,\ ?/);for(var n in i){var o=i[n];"e"!==o&&"se"!==o&&"sw"!==o&&"w"!==o&&"ne"!==o&&"nw"!==o||(t=!1)}}var s=this.getSupportedSizeUnits();return{enabled:!t,helpText:this.isAutoSizeEnabled&&"auto"!=this.width?"warn:"+__("Allow to adjust size automatically")+": "+__("Active"):"",min:1,precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:s.sizeW,unitConverter:e.bind(this),unitsDropdownAlignment:"right"}}}),this.registerProperty({name:"height",type:R.PropertyType.ElementHeight,uiComponentOptions:function(){var e=!0;if(this.elem.hasClass("wb-ext-resizable")&&!this.elem.resizableExt("option","disabled")){var i=this.elem.resizableExt("option","handles").split(/,\ ?/);for(var n in i){var o=i[n];"s"!==o&&"se"!==o&&"sw"!==o&&"n"!==o&&"ne"!==o&&"nw"!==o||(e=!1)}}return{enabled:!e,min:1,precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:this.getSupportedSizeUnits().sizeH,unitConverter:t.bind(this),unitsDropdownAlignment:"right"}}}),this.registerProperty({name:"isAutoSizeEnabled",type:R.PropertyType.IsAutoSizeEnabled,dependencies:["isBackgroundElement","layoutConstraints","width","height"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints!==C.ChildrenLayoutType.Absolute}}}),this.registerProperty({name:"useMinWidth",type:R.PropertyType.UseMinWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:i.call(this,this.width)}}}),this.registerProperty({name:"useMinHeight",type:R.PropertyType.UseMinHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:i.call(this,this.height)}}}),this.registerProperty({name:"useMaxWidth",type:R.PropertyType.UseMaxWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:i.call(this,this.width)}}}),this.registerProperty({name:"useMaxHeight",type:R.PropertyType.UseMaxHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:i.call(this,this.height)}}}),this.registerProperty({name:"minWidth",type:R.PropertyType.MinWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMinWidth"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:"px",visible:i.call(this,this.width,"minWidth"),enabled:this.useMinWidth}}}),this.registerProperty({name:"minHeight",type:R.PropertyType.MinHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMinHeight"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:"px",visible:i.call(this,this.height,"minHeight"),enabled:this.useMinHeight}}}),this.registerProperty({name:"maxWidth",type:R.PropertyType.MaxWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMaxWidth"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:"px",visible:i.call(this,this.width,"maxWidth"),enabled:this.useMaxWidth}}}),this.registerProperty({name:"maxHeight",type:R.PropertyType.MaxHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMaxHeight"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:"px",visible:i.call(this,this.height,"maxHeight"),enabled:this.useMaxHeight}}}),this.registerProperty({name:"individualMargin",type:R.PropertyType.IndividualMargin,uiComponentOptions:{usePadding:this.supportsPadding()},onChange:function(e,t){t.elem&&t.controls&&t.elem.data("resizableExt")&&(t.updateResizeLimits(),t.controls.updateMargin(t.getActualMargins()),t.supportsPadding()&&t.controls.updatePadding(t.getActualPadding()))}}),this.registerProperty({name:"showOnPhone",type:R.PropertyType.VisibilityShowOnPhone}),this.registerProperty({name:"showOnTablet",type:R.PropertyType.VisibilityShowOnTablet}),this.registerProperty({name:"showOnDesktop",type:R.PropertyType.VisibilityShowOnDesktop}),this.registerProperty({name:"showOnTv",type:R.PropertyType.VisibilityShowOnTv}),this.registerProperty({name:"commonality",type:R.PropertyType.Commonality,uiComponentOptions:function(){var e=this.getInheritedLanguageVisibility();for(var t in e)e.hasOwnProperty(t)&&e[t]&&delete e[t];return{lockedLanguageValues:e,isInherited:this.isCommonInherited}}}),this.registerProperty({name:"anchorProp",type:R.PropertyType.Anchor}),this.registerProperty({name:"elemClassNameProp",type:R.PropertyType.ElemClassName,uiComponentOptions:function(){return{enabled:this.classNamePropEnabled}}}),this.registerProperty({name:"nameProp",type:R.PropertyType.Name}),this.registerProperty({name:"animationEffect",type:R.PropertyType.Animation})},t.lastIndex=0,t.hotKeysInitiated=!1,t.hotKeysDisabled=!1,t.selected={},t}(O.BaseObject);r.ElementRegister.registerClass("Element",K),a.Service.element={unselectAll:K.unselectAll,truncate:K.truncate,updateContextMenuRemove:K.updateContextMenuRemove,Element:K,getSelected:function(){return K.selected},getSelectedCount:function(){var e=0;for(var t in K.selected)K.selected.hasOwnProperty(t)&&e++;return e},eachSelected:function(e){for(var t in K.selected)K.selected.hasOwnProperty(t)&&e.call(K.selected[t]);return a.Service.element},getUsedMediaGalleryItems:function(e){e||(e=wb_builder.bodyInstance.getContentElements()),e=e.slice();for(var t,i,n,o={};e.length;){if((n=e.pop())instanceof K)for(t=n.getUsedMediaGalleryItems(),i=0;i<t.length;i++)t[i]&&(o[t[i]]=!0);if("backgroundElement"in n){var s=n.backgroundElement;s&&e.push(s)}"getChildren"in n&&(e=e.concat(n.getChildren()))}return Object.keys(o)},getUsedSiteStyles:function(e){e||(e=wb_builder.bodyInstance.getContentElements()),e=e.slice();for(var t,i,n,o={};e.length;){if((n=e.pop())instanceof K)for(t=n.getUsedSiteStyles(),i=0;i<t.length;i++)t[i]&&(o[t[i]]=!0);if("backgroundElement"in n){var s=n.backgroundElement;s&&e.push(s)}"getChildren"in n&&(e=e.concat(n.getChildren()))}return Object.keys(o)},getUsedFonts:function(e){e||(e=wb_builder.bodyInstance.getContentElements()),e=e.slice();for(var t,i,n,o={};e.length;){if((n=e.pop())instanceof K)for(t=n.getUsedFonts(),i=0;i<t.length;i++)t[i]&&(o[t[i]]=!0);if("backgroundElement"in n){var s=n.backgroundElement;s&&e.push(s)}"getChildren"in n&&(e=e.concat(n.getChildren()))}return Object.keys(o)},resetIdentifierIndex:function(){K.lastIndex=0},buildDummy:function(e,t,i,n,o){void 0===i&&(i=100),void 0===n&&(n=100),void 0===o&&(o=!1);var s=new K({class:"Element",id:"new",name:t,content:{},width:i,height:n,isMovable:!1});return e&&s.setEmptyMessageImage(e),t&&s.setEmptyMessageText(t),s.displayEmptyMessage(!0,!1,!0),s.controls.setOutlineActive(!0),s.controls.setResizeHandlesVisible(!1),s.controls.setButtonsVisible(!1),s.elem.addClass("wb-drag-helper"),o&&s.elem.css({width:i,height:n}),s},replaceDummy:function(e,t){var i=e.getParent();if(i){var n=function(t){if(wb_builder.historyBeginGroup(),i){for(var n=0,o=t;n<o.length;n++){var s=o[n];i.addChild(s,!1,!1,e,!1),i.getChildrenLayout()==C.ChildrenLayoutType.Absolute&&s.setLocation(e.left,e.top),s.updateStyle()}if(e.remove({noHistory:!0}),!t.length){var r=wb_builder.historyGetLatestRecord();r&&"wrapElement"===r.type&&wb_builder.historyUndo()}(0,I.createAddElementsHistoryRecord)(t),wb_builder.historyEndGroup()}};(0,A.tryWrapElements)(t,i).done((function(e){e&&n([e])})).fail((function(){return n(t)}))}},prepareElementsForRemovalWithUserInteraction:function(e,t){var i=o.default.Deferred(),n={noHistory:t,requiredConfirmations:{}};if(!e.length)return i.resolve(n),i.promise();for(var s=0,r=e;s<r.length;s++)r[s].onBeforeRemove(n);if(n.preventRemoval)return i.reject(),i.promise();var a=o.default.Deferred(),l=a.promise();if(n.requiredConfirmations&&Object.keys(n.requiredConfirmations).length){var c=!0,u=function(e){if(!n.requiredConfirmations.hasOwnProperty(e))return"continue";var t=n.requiredConfirmations[e];c?c=!1:l=l.then((function(){return(0,C.waitForModalToFullyHide)(500)})),l=l.then((function(){return t()}))};for(var d in n.requiredConfirmations)u(d)}return l.then((function(){n.preventRemoval?i.reject():i.resolve(n)})).fail((function(){i.reject()})),a.resolve(),i.promise()},removeElementsWithUserInteraction:function(e,t){void 0===t&&(t=!1);var i=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0);return a.Service.element.prepareElementsForRemovalWithUserInteraction(i,t).then((function(e){!e.noHistory&&i.length>1&&wb_builder.historyBeginGroup();for(var t=0,n=i;t<n.length;t++)n[t].remove(e);!e.noHistory&&i.length>1&&wb_builder.historyEndGroup()}))},removeOrHideElementsWithUserInteraction:function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1);var o=[],s=[];if(wb_builder.site.languages.length>0||(i=null),!Array.isArray(e)){var r=[];for(var l in e)e.hasOwnProperty(l)&&r.push(e[l]);e=r}for(var c=0,u=e;c<u.length;c++){var d=u[c];if(d.isEditableStrict&&d.parent&&!d.isLocked){var h=d.system||wb_builder,p=""+h.pageId,m=!0;if(t&&t!==h.pageId){if(!d.isCommon)continue;m=!1}else if(i){var g=d.includePages,f=null;if(d.isCommon){var y=!g||!Object.keys(g).length;f=g&&g.hasOwnProperty(p)?g[p]:y}else f=g;if("number"==typeof f&&(f=!!f),!1!==f)for(var b=null===f||!0===f||"number"==typeof f&&f||"object"==typeof f&&!Object.keys(g).length,v=0,_=h.site.languages;v<_.length;v++){var C=_[v];if(C.code!==i&&(!f||b||f.hasOwnProperty(C.code)&&f[C.code])){m=!1;break}}}m?(d.isCommon&&o.push(d),s.push(d)):o.push(d),d.setSelected(!0)}}return a.Service.element.prepareElementsForRemovalWithUserInteraction(s,n).then((function(e){var n=e.noHistory;n||wb_builder.historyBeginGroup(),wb_builder.setPageModified(!0);for(var r=0,a=o;r<a.length;r++)(u=a[r]).setPageInclusion(t,i,!1,n);for(var l=0,c=s;l<c.length;l++){var u;(u=c[l]).setSelected(!1),u.remove(e)}n||wb_builder.historyEndGroup()}))}};var V=function(){function e(e){this.hidden=!1,e&&this.applyData(this,e)}return e.prototype.applyData=function(e,t){e.hidden=t.hidden},e.prototype.copy=function(e){this.applyData(this,e)},e.prototype.store=function(e){e.getBounds();var t={hidden:e.isHidden(!0)};this.applyData(this,t)},e.prototype.applyTo=function(e){this.hidden?e.hide(!0):e.show(!0)},e.prototype.serialize=function(){return{hidden:this.hidden}},e}();window.wbs=function(e){for(var t in void 0===e&&(e=0),K.selected)if(K.selected.hasOwnProperty(t)&&--e<0)return K.selected[t];return null}},"./ElementComposition.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{DisplayCompositionAs:function(){return n},ElementComposition:function(){return m},ElementCompositionCollection:function(){return f},ElementCompositionCreationData:function(){return p},ElementCompositionGroup:function(){return g}});var n,o=i("./CommonTypes.ts"),s=i("./WB_Site.class.js"),r=i("./core/SitePage.ts"),a=i("./Service.ts"),l=i("./ColorPicker.ts"),c=i("./BorderControl.ts"),u=i("./lib/jquery-1.11.3.min.js"),d=i.n(u),h=i("./util/HistoryUtil.ts");!function(e){e.Icon="icon",e.IconAndText="icon_and_text",e.Render="render",e.RenderAndText="render_and_text",e.Image="image",e.ImageAndText="image_and_text"}(n||(n={}));var p=function(){function e(e,t,i,n){this.composition=e,this.elementData=d().extend(!0,[],t),this.fonts=i,this.styles=[];for(var o=0,r=n;o<r.length;o++){var a=r[o],l=new s.Style(a);l.ident=0,this.styles.push(l)}}return e.prototype.replaceStrings=function(t,i,n){e.replaceDataStringsInternal(t,i,this.elementData),n&&e.replaceDataStringsInternal(t,i,this.styles)},e.replaceDataStringsInternal=function(e,t,i){for(var n in i)i.hasOwnProperty(n)&&("string"==typeof i[n]?i[n]="string"==typeof e?i[n].split(e).join(t):i[n].replace(e,t):"object"==typeof i&&this.replaceDataStringsInternal(e,t,i[n]))},e.prototype.replaceStyles=function(e,t,i,n){for(var o={},s=0,r=0,a=this.styles;r<a.length;r++){var l=(C=a[r]).selector.replace(/^\./,""),c=t+e,u="wb-tmp-stl-id-"+s++,d=!1;if(n)for(var h=0,p=n;h<p.length;h++){var m=p[h];if(m.equals(C)){d=!0,c=m.selector.replace(/^\./,"");break}}if(o[u]=c,c!=l){if(!d){for(var g=0,f=C.ruleSets;g<f.length;g++)for(var y=0,b=f[g].rules;y<b.length;y++)(x=b[y]).selector=x.selector.replace(C.selector,"."+u);C.name=i+e,e++}C.selector="."+c,this.replaceStrings(l,u,!1)}else e++}for(var u in o)if(o.hasOwnProperty(u)){c=o[u];for(var v=0,_=this.styles;v<_.length;v++)for(var C,w=0,T=(C=_[v]).ruleSets;w<T.length;w++)for(var E=0,I=T[w].rules;E<I.length;E++){var x;(x=I[E]).selector=x.selector.replace(u,c)}this.replaceStrings(u,c,!1)}return e},e.prototype.cleanupElementData=function(){for(var e=0,t=this.elementData;e<t.length;e++){var i=t[e];if(i.class&&i.content)switch(i.class){case"Menu":var n=wb_builder.site.getPage(wb_builder.pageId);if(n){var s=null;for(var a in wb_builder.site.pages){var l=wb_builder.site.pages[a];if(l.isSingle){s=l;break}}wb_builder.historyGroupState===o.HistoryGroupState.NotRecording&&console.error("History is not recording a group. Pages snapshot will be as a separate undo/redo action, which will cause inconsistencies."),(0,h.createSitePagesSnapshotHistoryRecord)();for(var c=0,u=i.content.tree;c<u.length;c++){var d=u[c],p=void 0;s?((p=s).isSingle=!1,!p.title&&d.name&&(p.title=d.name),s=null):(p=new r.Page({id:wb_builder.site.getFreeId(),title:d.name,copyFrom:n.id,copyClearHeader:!1,copyClearBody:!0,copyClearFooter:!1}),wb_builder.site.addPage(p)),d.targetId=p.id}}else i.content.tree=null;break;case"Picture":1==this.elementData.length&&i.content.src&&"object"!=typeof i.content.src&&(i.content.src=null)}}},e}(),m=function(){function e(e){this.minWidth=null,this.previewCreationData=null,this.id=e.id,this.name=e.name,this.url=e.url,this.width=e.width,this.height=e.height,this.displayAs=e.displayAs,this.iconClass=e.iconClass,this.iconUrl=e.iconUrl,this.thumbUrl=e.thumbUrl,this.hasGallery=e.hasGallery,this.fonts=e.fonts,this.styles=e.styles,this.data=e.data}return e.prototype.getCreationData=function(t){if(t){if(null===this.previewCreationData){this.previewCreationData=new p(this,this.data,this.fonts,this.styles),this.ensurePreviewIsVisible(),this.limitCompositionMaxWidth(),this.previewCreationData.replaceStrings("{{compositionUrl}}",this.url+"/",!0);for(var i=0,n=this.previewCreationData.elementData;i<n.length;i++){var o=n[i];o.isElementPreview=!0,o.previewCompositionId=this.id}e.nextUniquePreviewStyleId=this.previewCreationData.replaceStyles(e.nextUniquePreviewStyleId,"wb-stl-eci-preview-","Composition Preview ")}return this.previewCreationData}var s=new p(this,this.data,this.fonts,this.styles);return s.replaceStrings("{{compositionUrl}}","",!0),s.cleanupElementData(),s},e.prototype.limitCompositionMaxWidth=function(){var e=this.previewCreationData;if(e&&1==e.elementData.length)for(var t=0,i=e.elementData;t<i.length;t++){var n=i[t];"TextArea"===n.class?"auto"!==n.width&&"100%"!==n.width||n.useMaxWidth&&n.maxWidth||(n.width="auto",n.useMaxWidth=!0,n.maxWidth=540):"Gallery"===n.class&&"number"!=typeof n.width&&(n.width=1200)}},e.prototype.ensurePreviewIsVisible=function(){var e=this.previewCreationData;(null==e?void 0:e.elementData.length)&&a.Service.elementRegister.traverseSerializedElementData(e.elementData,(function(e){if("LayoutElement"!=e.class)return o.TraverseControl.Break;var t=e;if(t.content.backgroundElement)return o.TraverseControl.Break;if(t.content.background){if(t.content.background.image&&t.content.background.opacity)return o.TraverseControl.Break;if(t.content.background.color&&l.ColorPicker.colorTextToObject(t.content.background.color).a)return o.TraverseControl.Break}if(t.content.border)for(var i=0;i<4;i++)if((0,c.getBorderWidth)(t.content.border,i))return o.TraverseControl.Break;return o.TraverseControl.Continue}))!==o.TraverseControl.Break&&a.Service.elementRegister.traverseSerializedElementData(e.elementData,(function(e,t){var i,n=e,s=!n.content.children||!n.content.children.length;if(s&&(n.content.background={attachment:"scroll",color:"#707070",fullWidth:!1,image:null,isVideo:!1,opacity:100,position:"left top",repeat:"repeat",size:"auto auto",timeEndAt:null,timeStartAt:null,css:{background:"#707070 none repeat scroll left top"}}),0==t.length)n.width=600,n.height=600,n.useMinWidth=!1,n.useMaxWidth=!1,n.useMinHeight=!1,n.useMaxHeight=!1,n.flexGrow=0,n.flexShrink=0;else if(s&&n.content.children&&n.content.children.length){var r=void 0,a=void 0;(n.content.type||(null===(i=n.content.layout)||void 0===i?void 0:i.type))==o.ChildrenLayoutType.Vertical?(r="width",a=600):(r="height",a=600);for(var l=0,c=0,u=void 0,d=0,h=n.content.children;d<h.length;d++)"number"==typeof(y=h[d])[r]&&!isNaN(y[r])&&y[r]>0?l+=Math.min(a,y[r])/a:"string"==typeof y[r]&&"auto"!==y[r]&&!isNaN(u=parseFloat(y[r]))&&u>0?l+=u/100:c++;var p=1,m=1/n.content.children.length;l&&(c&&(l>=1?l+=(m=l/(n.content.children.length-c))*c:(m=(1-l)/c,l=1)),p=1/l);for(var g=0,f=n.content.children;g<f.length;g++){var y;"number"==typeof(y=f[g])[r]&&!isNaN(y[r])&&y[r]>0?y[r]=Math.floor(100*p*Math.min(a,y[r])/a)+"%":"string"==typeof y[r]&&"auto"!==y[r]&&!isNaN(u=parseFloat(y[r]))&&u>0?y[r]=Math.floor(u*p)+"%":y[r]=Math.floor(m*p)+"%"}}}))},e.prototype.shouldMergeGallery=function(){return!(!this.hasGallery||0==this.data.length||1==this.data.length&&"Picture"===this.data[0].class)},e.prototype.getMinWidth=function(){if(null===this.minWidth){var e=function(t,i){for(var n=0,s=0,r=t;s<r.length;s++){var a=r[s],l="number"!=typeof a.width||"number"==typeof a.flexGrow&&0!==a.flexGrow?0:a.width,c="number"==typeof a.minWidth&&"boolean"==typeof a.useMinWidth&&a.useMinWidth?a.minWidth:0,u="number"==typeof a.maxWidth&&"boolean"==typeof a.useMaxWidth&&a.useMaxWidth?a.maxWidth:0;l&&u?u=Math.min(l,u):u||(u=l),c&&(u=Math.max(c,u)),!u&&"LayoutElement"===a.class&&"content"in a&&a.content&&"children"in a.content&&a.content.children&&(u=e(a.content.children,a.content.layoutType||o.ChildrenLayoutType.Absolute)),i===o.ChildrenLayoutType.Horizontal?n+=u:n=Math.max(n,u)}return n};this.minWidth=1.1*e(this.data,o.ChildrenLayoutType.Vertical),null===this.minWidth&&(this.minWidth=0)}return this.minWidth},e.prototype.getRawData=function(){return this.data},e.nextUniquePreviewStyleId=1,e}(),g=function(e){if(this.compositions=[],this.name=e.name,this.width=e.width,e.compositions)for(var t=0,i=e.compositions;t<i.length;t++){var n=i[t];this.compositions.push(new m(n))}},f=function(){function e(e){this.numCompos=0,this.groupsLoaded=!1,this.groups=[],this.availableInPlans=[],this.id=e.id,this.name=e.name,this.inactive=e.inactive,"numCompos"in e&&"number"==typeof e.numCompos&&(this.numCompos=e.numCompos),e.groups&&this.applyGroups(e.groups),e.availableInPlans&&(this.availableInPlans=e.availableInPlans)}return e.prototype.applyGroups=function(e){this.groupsLoaded=!0;for(var t=0,i=e;t<i.length;t++){var n=i[t];this.groups.push(new g(n))}},e}()},"./ElementCompositionAdmin.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ElementCompositionAdminModule:function(){return p},openDialog:function(){return g}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./WB_Dialog.class.js"),l=i.n(a),c=i("./WB_MsgDialog.class.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=null,p=function(){function e(){}return e.saveComposition=function(){if(wb_builder.bodyInstance){var e=wb_builder.bodyInstance.getContentElements();h||(h=new(u())(__("Save Element Composition"))),r.Service.ElementComposition.saveComposition("",e,(function(){h&&(h.setMessage(__("Element composition saved successfully"),"","success"),h.show())}),(function(e){h&&(h.setMessage(e,"Error","error"),h.show())}))}},e.openDialog=function(){e.dialog||(e.dialog=new m),e.dialog.setVisible(!0)},e}(),m=function(e){function t(){var t=e.call(this,__("Save Element Composition"),!1)||this;return t.setContent(new r.Service.UIBuilder([{type:"VerticalLayout",id:"container"}],t.fields)),t.addButton(__("Cancel"),(function(){t.setVisible(!1)})),t.addButton(__("Save"),(function(){t.msgDialog||(t.msgDialog=new(u())(__("Save Element Composition"))),t.getSelectedElements(),r.Service.ElementComposition.saveComposition(t.fields.compositionId.getValue(),t.getSelectedElements(),(function(){t.setVisible(!1),t.msgDialog.setMessage(__("Element composition saved successfully"),"","success"),t.msgDialog.show()}),(function(e){t.msgDialog.setMessage(e,"Error","error"),t.msgDialog.show()}))}),!0),t}return d(t,e),t.prototype.onShow=function(){this.getSelectedElements().length?this.showSavingBlock():this.showEmptyBlock()},t.prototype.showSavingBlock=function(){this.savingBlock||(this.savingBlock=new r.Service.UIBuilder([{type:"VerticalLayout",children:[{type:"Label",text:"Composition ID",helpText:__("ID of the new element composition. If field is left blank then next available number will be used automatically. Otherwise if composition with specified ID already exists it will be overwritten.")},{type:"TextField",id:"compositionId"}]}],this.fields).getElem(),this.fields.container.getElem().append(this.savingBlock)),this.emptyBlock&&this.emptyBlock.hide(),this.savingBlock.show()},t.prototype.showEmptyBlock=function(){this.emptyBlock||(this.emptyBlock=s()("<div>").addClass("alert alert-info").html(__("At least one element must be selected")),this.fields.container.getElem().append(this.emptyBlock)),this.savingBlock&&this.savingBlock.hide(),this.emptyBlock.show()},t.prototype.getSelectedElements=function(){var e=r.Service.element.getSelected(),t=[];for(var i in e)t.push(e[i]);return t},t}(l());function g(){p.openDialog()}},"./ElementCompositionService.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ElementCompositionService:function(){return O}});var n,o=i("./Service.ts"),s=i("./ElementRegister.ts"),r=i("./WB_Dialog.class.js"),a=i.n(r),l=i("./UIComponent.ts"),c=i("./ColorPicker.ts"),u=i("./util/BlockPacker.ts"),d=i("./CommonTypes.ts"),h=i("./ElementComposition.ts"),p=i("./FontManager.ts"),m=i("./SiteStylesElement.ts"),g=i("./FlowLayout.ts"),f=i("./DropdownBox.ts"),y=i("./Label.ts"),b=i("./ui/FullPreloaderOverlay.ts"),v=i("./lib/jquery-1.11.3.min.js"),_=i.n(v),C=i("./core/BuilderConfig.ts"),w=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),T=function(e,t){void 0===t&&(t=0),this.curGridWidth=0,this.curGridHeight=0,this.thumbWidth=0,this.thumbHeight=0,this.shouldScale=!0,this.rendered=!1,this.composition=e,this.sortOrder=t},E=function(e,t){void 0===t&&(t=0),this.items=[],this.compositionGroup=e,this.sortOrder=t},I=function(e){function t(){var t=e.call(this)||this;t._options=null,t._value=null,t.dataDefaults=null,t.parentIsVisible=!0,t.lastClickTime=[0,0],t.itemRenderTimer=0,t.isDialogShown=!1,t.previewStylesElement=null,t.layoutUpdateTimeout=0,t._container=_()("<div>").css({position:"relative"}),t._elem.append(t._container);var i=0,n=t;return t._container.on("elementviewchange",".wb-element-composition-item",(function(){n.updateItemSize(_()(this).data("item"),!1)})),t._container.on("elementresize load error",(function(){i||(i=setTimeout((function(){i=0,t.updateLayout()}),0))})),t}return w(t,e),t.itemUnitsToGridUnits=function(e){return e*(t.itemUnitInGridUnits+t.itemSpacing)-t.itemSpacing},t.itemUnitsToPixels=function(e){return t.gridUnitSize*this.itemUnitsToGridUnits(e)},t.pixelsToItemUnits=function(e,i){var n,o;return void 0===i&&(i=!1),i?(n=Math.ceil(e/t.gridUnitSize),o=Math.ceil((n+t.itemSpacing)/(t.itemUnitInGridUnits+t.itemSpacing))):(n=Math.floor(e/t.gridUnitSize),o=Math.floor((n+t.itemSpacing)/(t.itemUnitInGridUnits+t.itemSpacing))),o},t.prototype.buildInit=function(e,t){var i=this;_()(window).on("resize orientationchange",this.updateLayout.bind(this)),this.onChange=function(){var n=i.getElem();i.trigger("change"),"function"==typeof e.change&&e.change.call(i,n,t)}},t.prototype.setDialogShown=function(e){this.isDialogShown=e},t.prototype.clearOptions=function(){var e;if(this.itemRenderTimer&&(clearTimeout(this.itemRenderTimer),this.itemRenderTimer=0),this._options){for(var t=0,i=this._options;t<i.length;t++)for(var n=0,o=i[t].items;n<o.length;n++){var s=o[n];if(s.builderElements)for(var r=s.builderElements.length-1;r>=0;r--)s.builderElements[r].__destruct()}this._options=null}this._container.empty(),null===(e=this.previewStylesElement)||void 0===e||e.clearRules(),this.setValue(null)},t.prototype.setOptions=function(e){var t=this,i=this.getValue();if(this.clearOptions(),null===this.previewStylesElement&&(this.previewStylesElement=new m.SiteStylesElement),"options"in e&&e.options)this._options=e.options;else{this._options=[];for(var n=0,o=0,s=e.groups;o<s.length;o++){var r=s[o];if(r.compositions.length){var a=new E(r,n++);this._options.push(a);for(var l=0,c=0,u=r.compositions;c<u.length;c++){var d=u[c],h=new T(d,l++);a.items.push(h)}}}"options"in e&&(e.options=this._options)}if(this._options){var p=this._elem.closest(".modal");this.isDialogShown?window.requestAnimationFrame((function(){return t.renderNextItem()})):p.one("shown.bs.modal",(function(){return t.renderNextItem()})),p.one("hide.bs.modal",(function(){t.itemRenderTimer&&clearTimeout(t.itemRenderTimer),t.itemRenderTimer=0}));for(var g=0,f=this._options;g<f.length;g++)a=f[g],this.addGroupToList(a);this.setValue(null),this.updateLayout()}if(i)for(var y=0,b=this._options;y<b.length;y++)for(var v=0,_=(a=b[y]).items;v<_.length;v++)if((h=_[v]).composition.id==i.composition.id){this.setValue(h);break}},t.prototype.getValue=function(){return this._value},t.prototype.addGroupToList=function(e){if(e.elem=_()('<div class="wb-element-composition-group">'),""!==e.compositionGroup.name){var t=this.replacePluginNames(e.compositionGroup.name);e.elem.append(_()('<div class="wb-ecg-title">').attr("title",t).text(t))}e.elem.append(e.itemContainer=_()('<div class="wb-ecg-items">')),this._container.append(e.elem);for(var i=0,n=e.items;i<n.length;i++){var o=n[i];this.addItemToGroup(e,o)}},t.prototype.addItemToGroup=function(e,i){var n=this,o=t.itemUnitsToPixels(i.composition.width),s=t.itemUnitsToPixels(i.composition.height);if(i.thumbWidth=o-t.itemPaddings,i.thumbHeight=s-t.itemPaddings,i.curGridWidth=i.composition.width||1,i.curGridHeight=i.composition.height||1,i.elem=_()('<div class="wb-element-composition-item">').data("item",i).css({width:o,height:s,opacity:0}),e.itemContainer.append(i.elem),i.itemThumb=_()('<div class="wb-eci-thumb"/>'),i.elem.append(i.itemThumb),!i.composition.name||""===i.composition.name||i.composition.displayAs!==h.DisplayCompositionAs.IconAndText&&i.composition.displayAs!==h.DisplayCompositionAs.RenderAndText&&i.composition.displayAs!==h.DisplayCompositionAs.ImageAndText||(i.itemName=_()('<div class="wb-eci-name"/>').text(this.replacePluginNames(i.composition.name)),i.elem.addClass("wb-eci-has-name").append(i.itemName)),i.builderElementContainer=_()('<div class="wb-eci-inner">'),i.itemThumb.append(i.builderElementContainer),i.elem.attr("title",this.replacePluginNames(i.composition.name)+(C.wbConfig.adminMode?" ("+i.composition.id+")":"")),i.elem.on("click",(function(e){n.setValue(i),i.elem.trigger("dblclickitem")})),i.composition.displayAs===h.DisplayCompositionAs.Icon||i.composition.displayAs===h.DisplayCompositionAs.IconAndText){var r=Math.min(i.curGridWidth,i.curGridHeight);i.builderElementContainer.css({"line-height":"1px"}).append(_()('<i class="ico-tb"/>').addClass(i.composition.iconClass||"").addClass("wb-eci-icon wb-eci-icon-"+r+" fa comp-default-icon"))}else i.composition.displayAs===h.DisplayCompositionAs.Image||i.composition.displayAs===h.DisplayCompositionAs.ImageAndText?i.composition.thumbUrl&&i.builderElementContainer.append(_()('<img src=""/>').attr("src",i.composition.thumbUrl)):i.composition.displayAs!==h.DisplayCompositionAs.Render&&i.composition.displayAs!==h.DisplayCompositionAs.RenderAndText||(i.rendered=!1,i.builderElementContainer.append('<i class="fa fa-spinner fa-pulse" style="font-size: 30px; color: #CCC;"></i>'));i.elem.css("opacity",""),i.builderElementContainer.css({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"})},t.prototype.renderNextItem=function(){var e=this;if(this.itemRenderTimer&&clearTimeout(this.itemRenderTimer),this.itemRenderTimer=0,this._options){for(var i=3,n=0,o=this._options;n<o.length;n++){for(var r=o[n],a=function(t){if(t.rendered||t.composition.displayAs!==h.DisplayCompositionAs.Render&&t.composition.displayAs!==h.DisplayCompositionAs.RenderAndText)return"continue";if(--i<0)return"break";t.rendered=!0;var n=t;t.builderElementContainer.empty(),t.elem.css("opacity","1"),t.builderElementContainer.css({textAlign:""});var o=t.composition.getCreationData(!0),r=o.elementData;t.shouldScale=1!==r.length||l.shouldScale(r[0]);for(var a=0,c=o.fonts;a<c.length;a++){var u=c[a];p.FontManager.addCustomFontUsage(u,!0)}l.previewStylesElement&&l.previewStylesElement.addStyles(o.styles),s.ElementRegister.createElementComposition(t.composition,l.dataDefaults,!0,(function(t){n.builderElements=t;for(var i=0,o=t;i<o.length;i++)(a=o[i]).elem.find(".wb_controls").children(":not(.wb_cover)").remove(),a.getLocation(),a.elem.off("mousedown mouseup mouseover mouseout hover out focus blur click dblclick contextmenu touchstart touchend touchcancel keydown keyup keypress"),a.elem.find(".wb_controls").off("mousedown mouseup mouseover mouseout hover out focus blur click dblclick contextmenu touchstart touchend touchcancel keydown keyup keypress"),a.setLayoutConstraints(d.ChildrenLayoutType.Vertical),a.updateStyle(),n.builderElementContainer.append(a.elem);for(var s=0,r=t;s<r.length;s++){var a;(a=r[s]).onResize()}e.updateItemSize(n,!0).then((function(e){return e.elem.css("opacity","")}))}))},l=this,c=0,u=r.items;c<u.length&&"break"!==a(u[c]);c++);if(i<0)break}i<0&&(this.itemRenderTimer=setTimeout((function(){return e.renderNextItem()}),t.itemRenderDelay))}},t.prototype.updateItemSize=function(e,t){var i=this,n=_().Deferred();if(e.builderElements&&e.builderElements.length>0)e.shouldScale||e.builderElements.length>1?(this.updateScalableItem(e,n),t&&e.elem.on("elementresize",(function(){return i.updateScalableItem(e)}))):(e.builderElementContainer.css({width:e.thumbWidth,height:e.thumbHeight}),e.builderElements[0].setSize(e.thumbWidth,e.thumbHeight),n.resolve(e));else{var o=e.builderElementContainer.find(".wb-eci-icon");if(o.length){var s=Math.min(e.curGridWidth,e.curGridHeight);o.removeClass("wb-eci-icon-1 wb-eci-icon-2 wb-eci-icon-3 wb-eci-icon-4 wb-eci-icon-5 wb-eci-icon-6 wb-eci-icon-7 wb-eci-icon-8 wb-eci-icon-9 wb-eci-icon-10 wb-eci-icon-11 wb-eci-icon-12").addClass("wb-eci-icon-"+s)}n.resolve(e)}return n},t.prototype.updateScalableItem=function(e,t){if(e.builderElements.length){var i=e.builderElementContainer.parent();e.builderElementContainer.css({position:"fixed",left:0,top:0,width:"auto",height:"auto",display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyItems:"center",justifyContent:"center",flexWrap:"nowrap",visibility:"hidden",transform:""}),_()(document.body).append(e.builderElementContainer);var n=_().Deferred();setTimeout((function(){return n.resolve()}),1e3);for(var o=[n],s=0,r=e.builderElements;s<r.length;s++){var a=r[s];o.push(a.onLoaded())}_().when.apply(_(),o).then((function(){var n=e.builderElementContainer.outerWidth()+1,o=e.builderElementContainer.outerHeight()+1,s=o*(e.thumbWidth/e.thumbHeight),r=(n=Math.max(n,s,e.composition.getMinWidth()))/e.thumbWidth,a=o/e.thumbHeight,l=Math.min(1,1/Math.max(r,a));i.length?i.append(e.builderElementContainer):e.builderElementContainer.detach(),e.builderElementContainer.css({position:"absolute",left:"50%",top:"50%",width:n,height:o,visibility:"",transform:"translate(-50%, -50%) scale("+l.toFixed(6)+")"}),t&&t.resolve(e)}))}else t&&t.resolve(e)},t.prototype.getPreviewBackgroundColor=function(e){var t=null;switch(e.getClassType()){case"TextArea":var i=e.getHtml().match(/class="[^"]*\b(wb-stl-[^"\s]+)/);i&&(t=i[1]);break;case"Form":t=e.labelStyle}if(null===t)return null;for(var n=0,o=wb_builder.site.styles;n<o.length;n++){var s=o[n];if(s.selector==="."+t)return s.sys.text&&s.sys.text.color?c.ColorPicker.readableColor(s.sys.text.color):null}return null},t.prototype.setValue=function(e){e&&(this._elem.find(".active").removeClass("active"),e.elem.addClass("active"));var t=this._value;this._value=e,t!==e&&this.onChange()},t.prototype.setDataDefaults=function(e){this.dataDefaults=e},t.prototype.setParentVisible=function(e){this.parentIsVisible=e,this.updateLayout()},t.prototype.updateLayout=function(){var e=this;if(this._options&&this._options.length&&this.parentIsVisible){this.layoutUpdateTimeout&&clearTimeout(this.layoutUpdateTimeout);var i=this._container.closest(".modal-body").outerWidth()-30;if(!document.body.contains(this._container[0])||!this._container.is(":visible")||i<=0)setTimeout((function(){e.layoutUpdateTimeout=0,e.updateLayout()}),10);else{var n,o,s=Math.max(1,t.pixelsToItemUnits(i));this._container.css({width:t.itemUnitsToPixels(s)});for(var r=new u.BlockPacker(t.itemUnitsToPixels(s),null,t.itemSpacing*t.gridUnitSize),a=function(e){if(!e.itemContainer||!e.elem)return"continue";for(var i=Math.min(e.compositionGroup.width?e.compositionGroup.width:s,s),a=t.itemUnitsToPixels(i),c=new u.BlockPacker(a,null,t.itemSpacing*t.gridUnitSize),d=0,h=e.items;d<h.length;d++){var p=h[d],m=p.composition.width||1,g=p.composition.height||1;p.curGridWidth=Math.min(m,i),p.curGridHeight=g;var f=t.itemUnitsToPixels(p.curGridWidth),y=t.itemUnitsToPixels(p.curGridHeight),b=f-t.itemPaddings,v=y-t.itemPaddings;p.thumbWidth==b&&p.thumbHeight==v||(p.thumbWidth=b,p.thumbHeight=v,p.elem.css({width:f,height:y}),l.updateItemSize(p,!1)),c.addBlock(p,f,y)}var _=c.pack((function(e,t){var i=c.defaultSortFunc(e,t);return 0===i?e.data.sortOrder<t.data.sortOrder?-1:1:i}));n=o=0;for(var C=0,w=_;C<w.length;C++){var T=w[C];T.data.elem&&"number"==typeof T.left&&"number"==typeof T.top&&(T.data.elem.css({display:"",left:T.left,top:T.top}),n=Math.max(n,T.top+T.height),o=Math.max(o,T.left+T.width))}var E=n+(""!==e.compositionGroup.name?t.gridUnitSize*t.groupTitleSize:0);e.elem.css({width:o,height:E}),e.itemContainer.css({width:o,height:n}),r.addBlock(e,o,E)},l=this,c=0,d=this._options;c<d.length;c++)a(d[c]);var h=r.pack((function(e,t){return e.data.sortOrder<t.data.sortOrder?-1:1}));n=o=0;for(var p=0,m=h;p<m.length;p++){var g=m[p];g.data.elem&&"number"==typeof g.left&&"number"==typeof g.top&&(g.data.elem.css({position:"absolute",display:"",left:g.left,top:g.top}),n=Math.max(n,g.top+g.height),o=Math.max(o,g.left+g.width))}this._container.css({height:n})}}},t.prototype.shouldScale=function(e){return!e.class||t.notScalableClassNames.indexOf(e.class)<0},t.prototype.replacePluginNames=function(e){return/\{\{(.*?)\}\}/g.test(e)?s.ElementRegister.getPluginNameByClassName(RegExp.$1)||e:s.ElementRegister.getPluginNameByClassName(e)||e},t.itemRenderDelay=20,t.gridUnitSize=10,t.itemSpacing=1,t.groupTitleSize=4,t.itemUnitInGridUnits=6,t.itemPaddings=30,t.notScalableClassNames=["Shape","Line","MusicPlayer","Table","bing_maps","GoogleMaps","baidu_maps","naver_maps","daum_maps","yandex_maps"],t}(l.UIComponent),x=function(e){function t(t,i){var n=e.call(this,{id:i.id,name:i.name})||this;return n.options=null,n.groups=[t],n}return w(t,e),t}(h.ElementCompositionCollection),S=function(e,t){this.group=e,this.id=e.name,this.name=e.name+" ("+e.compositions.length+")",this.collection=new x(e,t)},k=function(e){function t(){var t=e.call(this,"div")||this;return t._elem.addClass("wb-full-preloader-overlay-block"),t.spinnerBlock=_()("<div>").addClass("wb-full-preloader-overlay-icon").append(_()("<span>").addClass("fa fa-spinner fa-pulse fa-3x")).appendTo(t._elem),t.errorBlock=_()("<div>").addClass("text-danger").appendTo(t._elem),t.setError(""),t}return w(t,e),t.prototype.buildInit=function(e,t){},t.prototype.setError=function(e){this.errorBlock.text(e?__("Error")+": "+e:""),this.spinnerBlock[0].style.display=e?"none":"",this.errorBlock[0].style.display=e?"":"none"},t}(l.UIComponent),D=function(e){function t(){var t=e.call(this,__("Add item"),!1)||this;return t.applyCallback=null,t.cancelCallback=null,t.setSizeClass("modal-ec"),t.setContent(new o.Service.UIBuilder({type:"VerticalLayout",children:[{type:k,id:"preloader"},{type:g.FlowLayout,id:"groupSelectorBlock",align:"right",verticalAlign:"middle",children:[{type:y.Label,value:__("Choose category"),css:{margin:0,fontWeight:"normal"}},{type:f.DropdownBox,id:"groupSelector",change:function(){return t.onGroupChange()}}]},{type:I,id:"styles",change:function(){t.updateButtons()},on:{dblclickitem:function(){var e=t.fields.styles.getValue();e&&(t.onApply(e),setTimeout((function(){return t.setVisible(!1)}),100))}}}]},t.fields),!0),t.addButton(__("Cancel"),(function(){t.onCancel(),t.setVisible(!1)})),t.addButton(__("Add"),(function(){var e=t.fields.styles.getValue();e?t.onApply(e):t.onCancel(),t.setVisible(!1)}),!0,"wb-es-apply"),t.updateButtons(),t.onShown=function(){return t.fields.styles.setDialogShown(!0)},t}return w(t,e),t.prototype.setPreloaderVisible=function(e){this.fields.preloader.setError(""),this.fields.preloader.setVisible(e),this.setFooterVisible(!e),this.fields.styles.setVisible(!e),e&&this.fields.groupSelectorBlock.setVisible(!1)},t.prototype.setPreloaderError=function(e){this.fields.preloader.setError(e)},t.prototype.updateButtons=function(){var e=this.buttons.find(".wb-es-apply");this.fields.styles.getValue()?e.removeAttr("disabled"):e.attr("disabled","disabled")},t.prototype.onShow=function(){this.fields.styles.setParentVisible(!0)},t.prototype.onClose=function(){this.onCancel(),this.fields.styles.setDialogShown(!1)},t.prototype.onClosed=function(){this.fields.styles.clearOptions(),this.fields.styles.setDialogShown(!1)},t.prototype.onApply=function(e){this.fields.styles.setParentVisible(!1),"function"==typeof this.applyCallback&&this.applyCallback(e.composition),this.applyCallback=null,this.cancelCallback=null,this.setVisible(!1,!1)},t.prototype.onCancel=function(){this.fields.styles.setParentVisible(!1),"function"==typeof this.cancelCallback&&this.cancelCallback(),this.applyCallback=null,this.cancelCallback=null},t.prototype.setCallbacks=function(e,t){this.applyCallback=e,this.cancelCallback=t},t.prototype.onGroupChange=function(){var e,t=null===(e=this.fields.groupSelector.getSelectedItem())||void 0===e?void 0:e.getOriginal();t&&(this.fields.styles.setOptions(t.collection),this.fields.styles.renderNextItem())},t.prototype.setCompositionCollection=function(e,t){var i=this;this.elementDataDefaults=t,this.fields.styles.setDataDefaults(t),o.Service.ElementComposition.requireCollectionGroups(e).then((function(e){if(e){for(var t=0,n=0,o=0,s=e.groups;o<s.length;o++){for(var r=s[o],a=0,l=0,c=0,u=r.compositions;c<u.length;c++){var d=u[c];a+=d.width,l<d.height&&(l=d.height)}var h=Math.ceil(a/Math.max(r.width,1))*l;n+=h,t<h&&(t=h)}e.groups.length>1&&n>70?(i.fields.groupSelectorBlock.setVisible(e.groups.length>1),i.fields.groupSelector.reload(e.groups.map((function(t){return new S(t,e)}))),e.groups.length>0&&i.onGroupChange()):(i.fields.groupSelectorBlock.setVisible(!1),i.fields.styles.setOptions(e))}}))},t.prototype.setAvailableInPremium=function(e,t,i){if(e){this.unavailableOverlay||(this.unavailableOverlay=_()("<div>").css("display","none").addClass("wb-composition-collection-overlay").appendTo(this.content));var n="";if(i)if(C.wbConfig.isB2C)n=i.map((function(e){return"<a"+(t?' href="'+t+'"':"")+' target="_blank">'+__(e.name)+"</a>"})).join(", ");else{for(var o=[],s=0,r=i;s<r.length;s++){var a=r[s];o=o.concat(a.hostingPlanNames)}n=_().trim(o.map((function(e){return"<a"+(t?' href="'+t+'"':"")+' target="_blank">'+e+"</a>"})).join(", "))}this.unavailableOverlay.html("<div>"+(n?"":"<span>"+__("Need more builder features?")+"</span><br />")+'<a class="btn btn-lg btn-success btn-raised"'+(t?' href="'+t+'"':"")+' target="_blank">'+__("Upgrade")+"</a>"+(n?"<br /><span>"+__("Available in %s").replace("%s",n)+"</span>":"")+"</div>"),this.unavailableOverlay.show()}else this.unavailableOverlay&&this.unavailableOverlay.hide()},t}(a()),O=function(){function e(){this.dialog=null,this.collections={},this.lazyCompositionIndex={},this.compositionIcons={}}return e.prototype.init=function(e,t){if(this.collections={},this.lazyCompositionIndex={},t&&(this.compositionIcons=t),e&&"object"==typeof e)for(var i in e)if(e.hasOwnProperty(i)){var n=new h.ElementCompositionCollection(e[i]);n.id&&(this.collections[n.id]=n)}},e.prototype.open=function(e,t,i,n){void 0===n&&(n=null),this.dialog||(this.dialog=new D),this.dialog.setCallbacks(i,n),this.dialog.setCompositionCollection(e,t),this.dialog.setAvailableInPremium(e.inactive,C.wbConfig.upgradeUrl,e.availableInPlans),this.dialog.setVisible(!0)},e.prototype.getCompositionCollection=function(e){return this.collections.hasOwnProperty(e)?this.collections[e]:null},e.prototype.getLazyComposition=function(e){return e in this.lazyCompositionIndex?this.lazyCompositionIndex[e]:null},e.prototype.lookupPluginIcon=function(e){return e in this.compositionIcons?this.compositionIcons[e]:null},e.prototype.addToLazyIndex=function(e){for(var t=0,i=e;t<i.length;t++)for(var n=0,o=i[t].compositions;n<o.length;n++){var s=o[n];this.lazyCompositionIndex[s.id]=s}},e.prototype.requireCollectionGroups=function(e){var t=this,i=_().Deferred();return e.groupsLoaded?i.resolve(e):(this.dialog?this.dialog.setPreloaderVisible(!0):(0,b.setPreloaderVisible)(!0),_().post(C.wbConfig.lnBaseUrl+"element-compositions/load-groups",JSON.stringify({id:e.id})).done((function(n){if(n&&n.ok)e.applyGroups(n.data||[]),t.addToLazyIndex(n.data||[]),t.dialog&&t.dialog.setPreloaderVisible(!1),i.resolve(e);else{var o=(null==n?void 0:n.error)||"Unknown error";t.dialog&&t.dialog.setPreloaderError(o),i.reject(o)}})).fail((function(){var e="Request failed";t.dialog&&t.dialog.setPreloaderError(e),i.reject(e)})).always((function(){t.dialog||(0,b.setPreloaderVisible)(!1)}))),i.promise()},e.prototype.mergeResources=function(e,t){for(var i=0,n=e.fonts;i<n.length;i++){var o=n[i];p.FontManager.addCustomFontUsage(o,!1)}for(var s=4,r=/^.wb-stl-custom([0-9]+)$/,a=-1,l=0,c=0,u=wb_builder.site.styles;c<u.length;c++){l++;var d=(v=u[c]).selector.match(r);if(d){a=l;var h=parseInt(d[1]);h>=s&&(s=h+1)}}if(e.styles.length){e.replaceStyles(s,"wb-stl-custom","Custom ",wb_builder.site.styles);for(var m={},g=0,f=wb_builder.site.styles;g<f.length;g++)m[(v=f[g]).selector]=v;for(var y=0,b=e.styles;y<b.length;y++){var v=b[y];m.hasOwnProperty(v.selector)||(a<0?wb_builder.site.styles.push(v):wb_builder.site.styles.splice(a++,0,v))}wb_builder.site.updateStyle()}e.composition.shouldMergeGallery()?_().ajax({url:C.wbConfig.lnBaseUrl+"element-compositions/merge-gallery",type:"post",data:{id:e.composition.id},complete:t}):"function"==typeof t&&t()},e.prototype.saveComposition=function(t,i,n,s){var r=e.getUsedSiteStyles(i);_().post(C.wbConfig.lnBaseUrl+"element-compositions/save",{id:t,sess:C.wbConfig.sessUniqKey,styles:JSON.stringify(e.serializeStyles(r)),gallery:JSON.stringify(e.getUsedMediaGalleryItems(i,r)),fonts:JSON.stringify(e.getUsedFonts(i,r)),data:JSON.stringify(e.getElementData(i))},(function(e){e.success?(e.compositions&&o.Service.ElementComposition.init(e.compositions),"function"==typeof n&&n()):"function"==typeof s&&s(e.error.message)})).error((function(){"function"==typeof s&&s(__("Connection error"))}))},e.getUsedSiteStyles=function(e){for(var t=[],i=0,n=o.Service.element.getUsedSiteStyles(e);i<n.length;i++)for(var s=n[i],r=0,a=wb_builder.site.styles;r<a.length;r++){var l=a[r];if(l.selector===s){t.push(l);break}}return t},e.getUsedMediaGalleryItems=function(e,t){for(var i={},n=0,s=o.Service.element.getUsedMediaGalleryItems(e);n<s.length;n++)i[s[n]]=!0;for(var r=0,a=t;r<a.length;r++)for(var l=0,c=a[r].getUsedMediaGalleryItems();l<c.length;l++)i[c[l]]=!0;return Object.keys(i)},e.serializeStyles=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i];t.push(o.serialize())}return t},e.getUsedFonts=function(e,t){for(var i={},n=0,s=o.Service.element.getUsedFonts(e);n<s.length;n++)i[s[n]]=!0;for(var r=0,a=t;r<a.length;r++)for(var l=0,c=a[r].getUsedFonts();l<c.length;l++)i[c[l]]=!0;return Object.keys(i)},e.processElementData=function(e){if("Languages"===e.class&&(e.previewLanguages=wb_builder.site.languages,e.previewSelectedLanguage=wb_builder.site.currSelLang),"LayoutElement"===e.class&&"content"in e&&e.content&&("backgroundElement"in e.content&&e.content.backgroundElement&&this.processElementData(e.content.backgroundElement),"children"in e.content&&e.content.children))for(var t=0,i=e.content.children;t<i.length;t++){var n=i[t];this.processElementData(n)}},e.getElementData=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i].serialize();this.processElementData(o),t.push(o)}return t.sort((function(e,t){var i=e.zIndex||0,n=t.zIndex||0;return i===n?0:i<n?-1:1})),t},e}();o.Service.ElementComposition=new O,window.WB_Service=o.Service},"./ElementMeasurementHelpers.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ElementMeasurementHelpers:function(){return a},MeasurableElement:function(){return r}});var n=i("./RangeList.ts"),o=i("./Rulers.ts"),s=i("./CommonTypes.ts"),r=function(){function e(e){this.element=e}return e.prototype.getBounds=function(e){void 0===e&&(e=!1);var t=this.element.elem[0].getBoundingClientRect(),i=0,n=0;if(e){var o=this.element.getParent();if(o){var s=o.elem[0].getBoundingClientRect();i=t.left-s.left,n=t.top-s.top}}return{left:i,top:n,pageLeft:t.left,pageTop:t.top,width:t.width,height:t.height}},e.prototype.getParentWidth=function(){var e=this.element.getParent();return e?e.getWidthInPixels():0},e.prototype.getParentHeight=function(){var e=this.element.getParent();return e?e.getHeightInPixels():0},e.prototype.getAffectingElements=function(){for(var t=this.element.getParent(),i=[],n=0,o=t?t.getChildren():[];n<o.length;n++){var s=o[n];s===this.element||s.isHidden()||s.isHidden(!0)||i.push(new e(s))}return i},e}(),a=function(){function e(e){this.timeout=0,this.rulers=[],this.element=e}return e.fromElement=function(t){return new e(new r(t))},e.prototype.show=function(){e.disabled||(this.timeout&&this.hide(),this.timeout=setTimeout(this.render.bind(this),500))},e.prototype.hide=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.rulers.length&&o.RulerManagerInstance.clear()},e.prototype.update=function(t){void 0===t&&(t=!1),e.disabled||this.timeout||this.render(t)},e.prototype.render=function(t){if(void 0===t&&(t=!1),wb_builder.bodyInstance){var i,s,r,a,l;wb_builder.bodyInstance.cacheBounds(),this.timeout=0;var c,u=new n.RangeList,d=new n.RangeList,h=new n.RangeList,p=new n.RangeList,m=this.element.getBounds(!0),g=Math.floor(m.pageLeft),f=Math.floor(m.pageTop),y=g+Math.floor(m.width),b=f+Math.floor(m.height),v=g-m.left,_=f-m.top,C=g+(this.element.getParentWidth(t)-m.left),w=f+(this.element.getParentHeight(t)-m.top);g>v&&g-v<=e.MAX_HORIZONTAL_DISTANCE&&u.add({from:Math.max(f,_),to:Math.min(b,w),offset:v,distance:g-v},!0,e.checkRangePriority),f>_&&f-_<=e.MAX_VERTICAL_DISTANCE&&d.add({from:Math.max(g,v),to:Math.min(y,C),offset:_,distance:f-_},!0,e.checkRangePriority),y<C&&C-y<=e.MAX_HORIZONTAL_DISTANCE&&h.add({from:Math.max(f,_),to:Math.min(b,w),offset:C,distance:C-y},!0,e.checkRangePriority),b<w&&w-b<=e.MAX_VERTICAL_DISTANCE&&p.add({from:Math.max(g,v),to:Math.min(y,C),offset:w,distance:w-b},!0,e.checkRangePriority);for(var T=0,E=this.element.getAffectingElements();T<E.length;T++)c=E[T].getBounds(!0),i=Math.floor(c.pageLeft),s=Math.floor(c.pageTop),r=i+Math.floor(c.width),a=s+Math.floor(c.height),r<g&&s<b&&a>f&&(l=g-r)<=e.MAX_HORIZONTAL_DISTANCE&&u.add({from:Math.max(f,s),to:Math.min(b,a),offset:r,distance:l},!0,e.checkRangePriority),a<f&&i<y&&r>g&&(l=f-a)<=e.MAX_VERTICAL_DISTANCE&&d.add({from:Math.max(g,i),to:Math.min(y,r),offset:a,distance:l},!0,e.checkRangePriority),i>y&&s<b&&a>f&&(l=i-y)<=e.MAX_HORIZONTAL_DISTANCE&&h.add({from:Math.max(f,s),to:Math.min(b,a),offset:i,distance:l},!0,e.checkRangePriority),s>b&&i<y&&r>g&&(l=s-b)<=e.MAX_VERTICAL_DISTANCE&&p.add({from:Math.max(g,i),to:Math.min(y,r),offset:s,distance:l},!0,e.checkRangePriority);e.normalizeRangeList(u),e.normalizeRangeList(d),e.normalizeRangeList(h),e.normalizeRangeList(p),o.RulerManagerInstance.clear(),this.renderRangeList("horizontal",g,u,t),this.renderRangeList("vertical",f,d,t),this.renderRangeList("horizontal",y,h,t),this.renderRangeList("vertical",b,p,t)}},e.checkRangePriority=function(e,t){return t.distance<=e.distance?t:e},e.normalizeRangeList=function(e){e.ranges.sort((function(e,t){return e.from<t.from?-1:1}));for(var t=e.ranges.length-1;t>0;t--)e.ranges[t-1].to===e.ranges[t].from&&e.ranges[t-1].distance===e.ranges[t].distance&&(e.ranges[t-1].to=e.ranges[t].to,e.ranges.splice(t,1));var i={};e.ranges=e.ranges.filter((function(e){var t=""+e.distance;return!i.hasOwnProperty(t)&&(i[t]=1,!0)}))},e.prototype.renderRangeList=function(e,t,i,n){if(void 0===n&&(n=!1),wb_builder.bodyInstance){var r,a,l=0,c=0,u=wb_builder.bodyInstance.getContentBlock(s.ContentBlockId.Header),d=u?u.elem[0].getBoundingClientRect():wb_builder.body?wb_builder.body[0].getBoundingClientRect():null;d&&(l=d.left,c=d.top);for(var h=0,p=i.ranges;h<p.length;h++){var m=p[h];r=Math.floor((m.from+m.to)/2),a="vertical"===e?o.RulerManagerInstance.addRuler({x:r-l,y:t-c},{x:r-l,y:m.offset-c}):o.RulerManagerInstance.addRuler({x:t-l,y:r-c},{x:m.offset-l,y:r-c}),this.rulers.push(a)}}},e.MAX_HORIZONTAL_DISTANCE=1e4,e.MAX_VERTICAL_DISTANCE=500,e.disabled=!1,e}()},"./ElementRegister.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ElementRegister:function(){return l},ElementRestorationData:function(){return a},registerClass:function(){return c},registerPaymentGateway:function(){return u}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./Service.ts"),r=i("./CommonTypes.ts"),a=function(){function e(e){this.data=e.serialize(),e.appendRestorationData(this.data)}return e.prototype.restore=function(){var e=null;return l.restoreElement(this.data,(function(t){e=t})),e},e}(),l=new(function(){function e(){this.classList={},this.pluginRegistry={},this.paymentGateways=[]}return e.prototype.registerClass=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),t.prototype.className=e,this.classList[e]=t,window["WB_"+e]=t,i){var o=t._metaData_,s={id:e,textId:o.id?o.id:null,icon:(o.icon?o.icon:"ico-tb ico-tb-no-bg")+" #ico-pl-"+e,iconImage:!!o.icon,name:o.name?o.name:e,borderless:!!o.isBorderless,active:!!n};this.pluginRegistry[e]=s,s.textId&&(this.classList[s.textId]=t)}},e.prototype.getClassByName=function(e){return this.classList[e]},e.prototype.getPluginNameByClassName=function(e){if(this.classList.hasOwnProperty(e)){var t=this.classList[e];if(t.hasOwnProperty("_metaData_"))return t._metaData_.name}return null},e.prototype.isClassEnabled=function(e){var t=this.pluginRegistry[e];return!!t&&t.active},e.prototype.registerPaymentGateway=function(e){e&&"object"==typeof e&&"id"in e&&this.paymentGateways.push(e)},e.prototype.getPaymentGateways=function(){var e,t,i=[];for(e=0;e<this.paymentGateways.length;e++){var n="className"in(t=this.paymentGateways[e])&&t.className?t.className:t.id;("forceActive"in t&&t.forceActive||"object"==typeof this.pluginRegistry[n]&&this.pluginRegistry[n].active)&&i.push(t)}return i.sort((function(e,t){var i="priority"in e?e.priority:0,n="priority"in t?t.priority:0;if(i==n){var o=e.name.toLowerCase(),s=t.name.toLowerCase();return o==s?0:o>s?1:-1}return i>n?-1:1})),i},e.prototype.registerClassAll=function(e){for(var t in e)this.pluginRegistry[t]=e[t]},e.prototype.getPluginRegistry=function(){return this.pluginRegistry},e.prototype.getPluginNameById=function(e){return e in this.pluginRegistry&&this.pluginRegistry[e]?this.pluginRegistry[e].name:e},e.prototype.mergeElementDataArrays=function(e,t){var i=[];if(t&&"function"!=typeof t){for(var n=t.slice(),s=void 0,r=0,a=e;r<a.length;r++)if((m=a[r]).hasOwnProperty("class")&&m.class){s=-1;for(var l=0,c=n.length;l<c;l++)if(n[l].hasOwnProperty("class")&&n[l].class===m.class){s=l;break}if(s<0)for(l=0,c=n.length;l<c;l++)if(!n[l].hasOwnProperty("class")){s=l;break}s>=0?(i.push(o().extend(!0,{},m,n[s])),n.splice(s,1)):i.push(o().extend(!0,{},m))}}else for(var u=void 0,d=0,h=0,p=e;h<p.length;h++){var m;(m=p[h]).hasOwnProperty("class")&&m.class&&(u=t?t(m.class,d++):null,i.push(o().extend(!0,{},m,u)))}return i},e.prototype.createElementComposition=function(e,t,i,n,o){var r=this,a=n,l=o,c=t,u=i,d=e.getCreationData(i),h=function(){for(var e=r.mergeElementDataArrays(d.elementData,c),t=[],i=e.length,n=!1,o=function(e){e&&t.push(e),--i<=0&&(n?"function"==typeof l&&l():a(t))},s=function(){n=!0,--i<=0&&"function"==typeof l&&l()},h=0,p=e;h<p.length;h++){var m=p[h];m.class&&r.createElement(m.class,m,u,u,o,s)}};i?h():s.Service.ElementComposition.mergeResources(d,h)},e.prototype.restoreElement=function(e,t,i){if(!e.hasOwnProperty("class")||!e.hasOwnProperty("_restoreId")||!e.hasOwnProperty("_restoreIndex"))return console.error("ElementRegister.restoreElement() called without minimum required data"),void("function"==typeof i&&i());this.createElement(e.class,e,!1,!1,t,i)},e.prototype.createElement=function(e,t,i,n,o,s){var r=this.getClassByName(e);if(r)try{var a=new r(t,i,n);"function"==typeof o&&o(a)}catch(e){console.error(e),"function"==typeof s&&s()}else"function"==typeof s&&s()},e.prototype.createElementOrComposition=function(e,t,i,n){var o=this,r=s.Service.ElementComposition,a=r.getCompositionCollection(e);if(a||(a=r.getCompositionCollection("virtual-"+e)),a||(a=r.getCompositionCollection("auto-"+e)),a){var l=function(e){wb_builder.historyBeginGroup(),o.createElementComposition(e,t,!1,(function(t){i(t,e),wb_builder.historyEndGroup()}),(function(){null==n||n(),wb_builder.historyEndGroup()}))};1==a.numCompos?r.requireCollectionGroups(a).done((function(e){e&&l(e.groups[0].compositions[0])})).fail((function(e){console.error(e),"function"==typeof n&&n()})):r.open(a,t,l,n)}else if(this.getClassByName(e)){var c=i,u="function"==typeof t?t(e,0):t&&t.length?t[0]:null;this.createElement(e,u,!1,!1,(function(e){e.getLocation(),c([e],null)}),n)}else console.error("No composition collection or plugin with such id: ",e),"function"==typeof n&&n()},e.prototype.traverseSerializedElementData=function(e,t,i){var n;void 0===i&&(i=[]);for(var o=0,s=e;o<s.length;o++){var a=s[o];if("class"in a&&a.content){if((n=t(a,i))===r.TraverseControl.Break)return n;if(n!==r.TraverseControl.SkipChildren&&"LayoutElement"===a.class){var l=a;if(i.push(a),l.content.backgroundElement&&r.TraverseControl.Break===this.traverseSerializedElementData([l.content.backgroundElement],t,i))return i.pop(),r.TraverseControl.Break;if(l.content.children&&l.content.children.length&&r.TraverseControl.Break===this.traverseSerializedElementData(l.content.children,t,i))return i.pop(),r.TraverseControl.Break;i.pop()}}}return r.TraverseControl.Continue},e}());function c(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),l.registerClass(e,t,i,n)}function u(e){l.registerPaymentGateway(e)}s.Service.elementRegister=l},"./FileField.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FileField:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t,i){var n=e.call(this,"div")||this;n.onChange=null,n._elem.addClass("wb-upload-field-control"),n._elemSub=r()("<div>").addClass("input-group").appendTo(n._elem),n.input=r()('<input type="text" readonly="readonly" class="form-control" />');var o=r()('<input type="file" size="1" />');return n.file=o[0],n.setName(t||"fileupload"),i&&n.setAccept(i),o.on("change",(function(){var e=(n.file.value+"").split(/[\\/]/);n.input.val(e[e.length-1]),"function"==typeof n.onChange&&n.onChange.call(n)})),n._elemSub.append(n.input),n._elemSub.append(o),n._elemSub.append(r()("<span>").addClass("input-group-btn").append(n.button=r()('<button class="btn btn-default" type="button"></button>'))),n.button.html(__("Browse...")),n._elem.on("mousemove",(function(e){var t=e.pageX-n._elem.offset().left,i=e.pageY-n._elem.offset().top;return o.css({left:t-o.width()/2+"px",top:i-o.height()/2+"px"}),!1})),n}return a(t,e),t.prototype.buildInit=function(e,t){var i,n=this;"name"in e&&e.name&&this.setName(e.name),"accept"in e&&e.accept&&this.setAccept(e.accept),"change"in e&&"function"==typeof e.change&&(this.onChange=(i=e.change,function(){return i.call(n)}))},t.prototype.setName=function(e){this.file.name=e},t.prototype.setAccept=function(e){this.file.accept=e},t.prototype.getValue=function(){return this.input.val()},t.prototype.setValue=function(e){this.input.val(e),this.file.value=e},t}(o.UIComponent)},"./FlowLayout.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FlowLayout:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIContainer.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t){var i=e.call(this,"%inherit%"===t?t:"div")||this;return i.spacing="default",i.horizontalAlign="left",i.verticalAlign="bottom","%inherit%"===t||i._elem.addClass("wb-flow-layout-ctrl"),i}return a(t,e),t.prototype.buildInit=function(e,t){void 0!==e.spacing?this.setSpacing(e.spacing):this.setSpacing("default"),e.align&&this.setHorizontalAlign(e.align),e.verticalAlign?this.setVerticalAlign(e.verticalAlign):this.setVerticalAlign("top")},t.prototype._appendChild=function(e){this._elem.append(e.getElem()),this.updateSpacing(this.spacing)},t.prototype._detachChild=function(e){e.getElem().detach()},t.prototype.applyLayoutCellCss=function(e,t){return this._elem.children().eq(e).css(t),this},t.prototype.setSpacing=function(e){return this.spacing==e||(this.spacing=e,this.updateSpacing(e)),this},t.prototype.updateSpacing=function(e){var t={};"rtl"===s()("html").eq(0).attr("dir")?t.marginLeft="number"!=typeof e?"":e+"px":t.marginRight="number"!=typeof e?"":e+"px","full"===e?this._elem.addClass("wb-spfull-ctrl"):this._elem.removeClass("wb-spfull-ctrl"),this._elem.children(":not(:last-child)").css(t)},t.prototype.setHorizontalAlign=function(e){if(this.horizontalAlign!=e){var t=this.horizontalAlign;this.horizontalAlign=e,t&&this._elem.removeClass("wb-ctrl-"+t),this._elem.addClass("wb-ctrl-"+this.horizontalAlign)}},t.prototype.setVerticalAlign=function(e){if(this.verticalAlign!=e){var t=this.verticalAlign;this.verticalAlign=e,t&&this._elem.removeClass("wb-ctrl-"+t),this._elem.addClass("wb-ctrl-"+this.verticalAlign)}},t}(r.UIContainer)},"./FontManager.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FontManager:function(){return u},FontManagerModule:function(){return c},GoogleFont:function(){return a},GoogleFontUsage:function(){return l},GoogleFontVariantData:function(){return r}});var n=i("./BuilderEvent.ts"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=function(e,t){this.weight=e,this.italic=t},a=function(){function e(t){if(this.earlyAccessUrl=null,t){this.family=t.family,this.category=t.category,this.variants=[];for(var i=0;i<t.variants.length;i++)this.variants.push(e.getVariantUrlValue(t.variants[i]));this.variants.sort(),this.subsets=t.subsets.slice(),this.subsets.sort(),this.earlyAccessUrl=t.hasOwnProperty("earlyAccessUrl")?t.earlyAccessUrl:null}}return e.getVariantUrlValue=function(e){return"regular"===e?"400":"italic"===e?"400i":/^[0-9]{3}italic$/.test(e)?e.substr(0,3)+"i":e},e.parseVariantCode=function(e){return/^[0-9]+i$/.test(e)?new r(e.substr(0,e.length-1),!0):new r(e,!1)},e.getVariantName=function(t){var i=e.parseVariantCode(t);switch(i.weight){case"100":i.weight=__("Thin")+" "+i.weight;break;case"200":i.weight=__("Extra-Light")+" "+i.weight;break;case"300":i.weight=__("Light")+" "+i.weight;break;case"400":i.weight=__("Regular")+" "+i.weight;break;case"500":i.weight=__("Medium")+" "+i.weight;break;case"600":i.weight=__("Semi-Bold")+" "+i.weight;break;case"700":i.weight=__("Bold")+" "+i.weight;break;case"800":i.weight=__("Extra-Bold")+" "+i.weight;break;case"900":i.weight=__("Black")+" "+i.weight}return i.weight+(i.italic?" "+__("Italic"):"")},e.getSubsetName=function(e){switch(e){case"arabic":return __("Arabic");case"bengali":return __("Bengali");case"cyrillic":return __("Cyrillic");case"cyrillic-ext":return __("Cyrillic Extended");case"devanagari":return __("Devanagari");case"greek":return __("Greek");case"greek-ext":return __("Greek Extended");case"gujarati":return __("Gujarati");case"gurmukhi":return __("Gurmukhi");case"hebrew":return __("Hebrew");case"kannada":return __("Kannada");case"khmer":return __("Khmer");case"latin":return __("Latin");case"latin-ext":return __("Latin Extended");case"malayalam":return __("Malayalam");case"myanmar":return __("Myanmar");case"oriya":return __("Oriya");case"sinhala":return __("Sinhala");case"tamil":return __("Tamil");case"telugu":return __("Telugu");case"thai":return __("Thai");case"vietnamese":return __("Vietnamese")}return e},e.prototype.getUrl=function(e,t){return this.earlyAccessUrl?"https://"+this.earlyAccessUrl:"https://fonts.googleapis.com/css?family="+this.family+":"+e.join(",")+(t.length?"&subset="+t.join(","):"")},e.prototype.getCssFontFamily=function(){var e="'"+this.family+"'";switch(this.category){case"sans-serif":e+=",Arial,sans-serif";break;case"serif":e+=",Arial,serif";break;case"monospace":e+=",Arial,monospace";break;case"handwriting":e+=",Arial,cursive";break;default:e+=",Arial,"+this.category}return e},e.prototype.clone=function(){var t=new e;return t.family=this.family,t.category=this.category,t.earlyAccessUrl=this.earlyAccessUrl,t.variants=this.variants.slice(),t.subsets=this.subsets.slice(),t},e.fromJson=function(t){var i=new e;return i.family=t.family,i.category=t.category,i.earlyAccessUrl=t.hasOwnProperty("earlyAccessUrl")?t.earlyAccessUrl:null,i.variants=t.variants,i.subsets=t.subsets,i},e.prototype.serialize=function(){return{family:this.family,category:this.category,earlyAccessUrl:this.earlyAccessUrl,variants:this.variants,subsets:this.subsets}},e}(),l=function(){function e(){this.variants=[],this.subsets=[]}return e.fromJson=function(t){var i=new e;return i.font=a.fromJson(t.font),i.variants=t.variants,i.subsets=t.subsets,i},e.prototype.serialize=function(){return{font:this.font.serialize(),variants:this.variants,subsets:this.subsets}},e.prototype.clone=function(){var t=new e;return t.font=this.font.clone(),t.variants=this.variants.slice(),t.subsets=this.subsets.slice(),t},e}(),c=function(){function e(){this.state="none",this.fontElements={},this.ready=!1,this.error=null,this.fontThumbs=null}return e.getHardcodedFontList=function(){return["Arial","Batang","Capture it","Avenir Light","Comic Sans MS","Courier New","Dotum","Georgia","Gulim","Helvetica","Microsoft JhengHei","Malgun Gothic","MingLiU","Myriad Set Pro","Nanum Gothic","BYekan","BNazanin","BZar","IranNastaliq","IRANSansWeb","AtlanticCruise","Vazir","Nahid","Lucida Grande","PMingLiU","Tahoma","Times New Roman","Trebuchet MS","Verdana","Sylfaen"]},e.getForcedCustomFonts=function(){return["Exo 2","Open Sans","Open Sans Condensed","PT Sans","PT Sans Caption","PT Sans Narrow","Roboto","Roboto Condensed","Roboto Slab"]},e.prototype.forceCustomFontsUsage=function(){if(this.ready){for(var t,i={},n=0,o=e.getForcedCustomFonts();n<o.length;n++)i[t=o[n]]=!0;for(t in this.availableFonts){var s=this.availableFonts[t];if(i.hasOwnProperty(s.family)){var r=new l;r.font=s,r.subsets=s.subsets.slice(),r.variants=s.variants.slice(),wb_builder.site.usedCustomFonts[t]=r,this.createFontLinkElementForFont(s)}}}},e.prototype.init=function(){if("none"==this.state){var e=this;this.availableFonts={},this.state="loading",s().ajax({url:wb_builder.availableFontsUrl,type:"GET",dataType:"json",async:!0,success:function(t){if(t.error)e.state="error",e.error=t.error;else{for(var i=0;i<t.items.length;i++)e.availableFonts[t.items[i].family]=new a(t.items[i]);e.state="done",e.ready=!0,e.forceCustomFontsUsage()}},error:function(){e.state="error",e.error=__("Failed to load list of available fonts")+" (1)"}})}},e.prototype.loadFontThumbs=function(e){var t=this;if(this.fontThumbs)e();else{var i=e;s().ajax({url:wb_builder.fontThumbsUrl,type:"GET",dataType:"json",async:!0,success:function(e){t.fontThumbs=e,i()},error:function(){t.state="error",t.error=__("Failed to load list of available fonts")+" (2)",i()}})}},e.prototype.createFontLinkElementForFont=function(e,t){var i=e.family,n=s()("<link/>").attr({rel:"stylesheet",type:"text/css",href:e.getUrl(e.variants,e.subsets)});return t||(t=document),t.getElementsByTagName("head")[0].appendChild(n.get(0)),this.fontElements[i]=n},e.prototype.getFontThumbnail=function(e){var t;return this.fontThumbs&&this.fontThumbs.hasOwnProperty(e.family)?t=s()("<img>").attr("src",this.fontThumbs[e.family]).attr("alt",e.family).attr("title",e.family):(this.createFontLinkElement(e.family),(t=s()("<span>").css({fontSize:"20px",fontFamily:e.family,padding:"0 10px"}).attr("title",e.family)).text(e.family)),t},e.prototype.createFontLinkElement=function(e){return e in this.fontElements?this.fontElements[e]:e in this.availableFonts?this.createFontLinkElementForFont(this.availableFonts[e]):null},e.prototype.removeFontLinkElement=function(e){e in this.fontElements&&this.fontElements[e].remove()},e.prototype.addCustomFontUsage=function(e,t){void 0===t&&(t=!1);var i=e.split(",")[0].replace(/^["']/,"").replace(/["']$/,"");for(var o in this.availableFonts){var s=this.availableFonts[o];if(s.family==i){if(wb_builder.site.usedCustomFonts.hasOwnProperty(o))break;if(!t){var r=new l;r.font=s,r.subsets=s.subsets.slice(),r.variants=s.variants.slice(),wb_builder.site.usedCustomFonts[o]=r;var a=new n.FontsChangedBuilderEvent;n.GlobalEvents.triggerEvent("fonts.changed",a)}this.createFontLinkElement(o)}}},e}(),u=new c},"./FontStyleSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FontStyleSelector:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;i.onChange=t;var n=r()("<div>").addClass("btn-group");return i.bBold=i.buildButton("fa fa-bold").appendTo(n),i.bItalic=i.buildButton("fa fa-italic").appendTo(n),i.bUnderline=i.buildButton("fa fa-underline").appendTo(n),i._elem.addClass("wb-font-style-ctrl").append(n),i}return a(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)})},t.prototype.buildButton=function(e,t){var i=this;void 0===t&&(t=!1);var n=r()("<button>").addClass("btn btn-default");t?n.append(r()("<strong>").html(e)):n.append(r()("<span>").addClass(e));var o=0;return n.on("click touchend",(function(){var e=(new Date).getTime();o<e-500&&(o=e,n.toggleClass("active"),"function"==typeof i.onChange&&i.onChange(),i.onValueChanged())})),n},t.prototype.getValue=function(){var e={bold:this.bBold.is(".active"),italic:this.bItalic.is(".active"),underline:this.bUnderline.is(".active"),css:{}};return e.css["font-weight"]=e.bold?"bold":"normal",e.css["font-style"]=e.italic?"italic":"normal",e.css["text-decoration"]=e.underline?"underline":"none",e},t.prototype.setValue=function(e){var t=e||{};this.bBold.removeClass("active"),t.bold&&this.bBold.addClass("active"),this.bItalic.removeClass("active"),t.italic&&this.bItalic.addClass("active"),this.bUnderline.removeClass("active"),t.underline&&this.bUnderline.addClass("active")},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t}(o.UIComponent)},"./FreeGallery.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Module:function(){return d}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e,t){var i=Object.keys(t).map((function(e){return e+"="+(t[e]?encodeURIComponent(t[e]):"")})).join("&");return e+(i?"?"+i:"")},l=function(){function e(){this.galleries={},this.current=null}return e.prototype.add=function(e){this.galleries[e.ID]=e},e.prototype.resetPages=function(){for(var e in this.galleries)this.galleries[e].totalImages=0,this.galleries[e].page=0},e.prototype.takeAnyFree=function(){for(var e,t=null,i=Object.keys(this.galleries);i.length>0;){var n=(0,void 0,e=i.length-1-0+1,Math.floor(Math.random()*e+0)),o=i.splice(n,1)[0],s=this.galleries[o];if(!s.totalPages||s.page<s.totalPages){t=s;break}}return t},e.genOptionsFromArgs=function(e){return{perPage:e.perPage?e.perPage:25,forEach:e.forEach&&"function"==typeof e.forEach?e.forEach:function(e,t){},beforeForEach:e.beforeForEach&&"function"==typeof e.beforeForEach?e.beforeForEach:function(){},afterForEach:e.afterForEach&&"function"==typeof e.afterForEach?e.afterForEach:function(){},emptyList:e.emptyList&&"function"==typeof e.emptyList?e.emptyList:function(){}}},e.prototype.init=function(t){this.options=e.genOptionsFromArgs(t),this.resetPages()},e.prototype.load=function(e){this.searchQuery=e||null,this.current=this.takeAnyFree(),this.current&&(this.current.loadGallery(this.options,this.current.page+1,this.searchQuery),this.current.page++)},e}(),c=function(){this.page=0,this.totalImages=0,this.totalPages=0},u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ID="unsplash",t.KEY="d7d1134d5a4cb24f6aaca87fc75254aad7f6fad54750e8634e8d18c7353036c7",t.IMAGES_URL="https://api.unsplash.com/search/photos/",t.RANDOM_IMAGES_URL="https://api.unsplash.com/photos/",t.MAX_RETRIES=3,t.retries=0,t}r(t,e),t.prototype.url=function(e,t,i){var n;void 0===e&&(e=1),void 0===t&&(t=null),void 0===i&&(i=25);var o={};return o.client_id=this.KEY,t?(o.query=t,n=this.IMAGES_URL):n=this.RANDOM_IMAGES_URL,o.per_page=""+i,o.page=""+e,a(n,o)},t.prototype.loadGallery=function(e,t,i){var n=this;void 0===t&&(t=1),void 0===i&&(i=null);var o=this.url(t,i,e.perPage);s().ajax({url:o,success:function(t){n.retries=0;var o=i?t.results:t;n.totalPages=i?t.total_pages:1e3,n.totalImages=o.length,n.totalImages?(e.beforeForEach(),s().each(o,(function(t,i){var n={url:i.urls.regular,thumb:i.urls.thumb,name:i.user.name,title:i.user.name};e.forEach(t,n)})),e.afterForEach()):e.emptyList()},error:function(){n.retries++,n.retries<n.MAX_RETRIES&&n.loadGallery(e,t,i)},dataType:"json"})}}(c),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ID="pixabay",t.KEY="8464430-d10ea9b4543afa20b3042ab23",t.IMAGES_URL="https://pixabay.com/api/",t.MAX_RETRIES=3,t.retries=0,t}return r(t,e),t.prototype.url=function(e,t,i){void 0===e&&(e=1),void 0===t&&(t=null),void 0===i&&(i=25);var n=this.IMAGES_URL,o={};return o.key=this.KEY,t&&(o.q=t),o.safesearch="true",o.per_page=""+i,o.page=""+e,a(n,o)},t.prototype.loadGallery=function(e,t,i){var n=this;void 0===t&&(t=1),void 0===i&&(i=null);var o=this.url(t,i,e.perPage);s().ajax({url:o,success:function(t){n.retries=0;var i=t.hits;n.totalImages=i.length,n.totalPages=Math.ceil(t.totalHits/(e.perPage?e.perPage:20)),n.totalImages?(e.beforeForEach(),s().each(i,(function(t,i){var n={url:i.largeImageURL,thumb:i.previewURL,name:i.user,title:i.tags};e.forEach(t,n)})),e.afterForEach()):e.emptyList()},error:function(){n.retries++,n.retries<n.MAX_RETRIES&&n.loadGallery(e,t,i)},dataType:"json"})},t}(c)),d=new l;d.add(new u)},"./Gallery.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Gallery:function(){return x}});var n,o=i("./ElementRegister.ts"),s=i("./Element.ts"),r=i("./Service.ts"),a=i("./core/BuilderConfig.ts"),l=i("./ContextMenu.ts"),c=i("./ColorPicker.ts"),u=i("./BorderControl.ts"),d=i("./BuilderEvent.ts"),h=i("./CommonTypes.ts"),p=i("./TextControl.ts"),m=i("./SizeSelector.ts"),g=i("./HAlignSelector.ts"),f=i("./GalleryLib.ts"),y=i("./ui/GalleryTypeSelector.ts"),b=i("./element/PropertyType.ts"),v=i("./element/Controls.ts"),_=i("./lib/jquery-1.11.3.min.js"),C=i.n(_),w=i("./lib/masonry-4.2.2/masonry.pkgd.min.js"),T=i.n(w),E=i("./lib/jquery-bridget/jquery-bridget.js"),I=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});i.n(E)()("masonry",T(),C());var x=function(e){function t(t,i){void 0===i&&(i=!1);var n,o=this;return(o=e.call(this,t,i)||this).noPhotoBg="ico-tb-gallery",o.typeSubmenu=null,o.dialog=null,o._images=[],o._border=t.content.border?t.content.border:{color:"#FFFFFF",style:"none",weight:5,css:{border:"5px none #FFFFFF"}},o._captionTitleStyle=p.TextControl.buildCss(t.content.captionTitleStyle?t.content.captionTitleStyle:{color:"#FFFFFF",size:20,align:h.Alignment.Center,letterSpacing:0}),o._captionDescriptionStyle=p.TextControl.buildCss(t.content.captionDescriptionStyle?t.content.captionDescriptionStyle:{color:"#FFFFFF",size:16,align:h.Alignment.Center,letterSpacing:0}),o._images=t.content.images instanceof Array?t.content.images:[],o._disablePopup=!!t.content.disablePopup,o.gallery=new f.GalleryLib({type:t.content.type,interval:t.content.interval,speed:t.content.speed,bgColor:t.content.bgColor?t.content.bgColor:"#000000",images:o.buildImageList(o.images),border:null===(n=o.border)||void 0===n?void 0:n.css,padding:t.content.padding,thumbWidth:"number"==typeof t.content.thumbWidth?t.content.thumbWidth:"number"==typeof t.content.thumbSize?t.content.thumbSize:0,thumbHeight:"number"==typeof t.content.thumbHeight?t.content.thumbHeight:"number"==typeof t.content.thumbSize?t.content.thumbSize:0,thumbAlign:t.content.thumbAlign,thumbPadding:t.content.thumbPadding,imageCover:t.content.imageCover,disablePopup:!1,hideArrows:t.content.hideArrows,slideOpacity:t.content.slideOpacity||t.content.thumbOpacity,showPictureCaption:t.content.showPictureCaption,captionBackground:t.content.captionBackground?t.content.captionBackground:"rgba(0, 0, 0, 0.66)",captionTitleStyle:o.captionTitleStyle?o.captionTitleStyle.css:void 0,captionDescriptionStyle:o.captionDescriptionStyle?o.captionDescriptionStyle.css:void 0,markerIconTypeId:t.content.markerIconTypeId?t.content.markerIconTypeId:void 0,mapTypeId:t.content.mapTypeId?t.content.mapTypeId:null,zoom:t.content.zoom?t.content.zoom:16,mapCenter:t.content.mapCenter?t.content.mapCenter:null,key:t.content.key?t.content.key:null,theme:t.content.theme?t.content.theme:"default",color:t.content.color?t.content.color:"#eeeeee",showSatellite:!("showSatellite"in t.content)||t.content.showSatellite,showZoom:!("showZoom"in t.content)||t.content.showZoom,showStreetView:!("showStreetView"in t.content)||t.content.showStreetView,showFullscreen:!("showFullscreen"in t.content)||t.content.showFullscreen,allowDragging:!("allowDragging"in t.content)||t.content.allowDragging,showRoads:!("showRoads"in t.content)||t.content.showRoads,showLandmarks:!("showLandmarks"in t.content)||t.content.showLandmarks,showLabels:!("showLabels"in t.content)||t.content.showLabels}),o.generateThumbs(),o.container.css("height","100%"),o.gallery.appendTo(o.container),o.setErrorMessage(__("No images selected")),o.displayErrorMessage(0==o.images.length),d.GlobalEvents.on("media.meta.changed",o.metaChangeHandler=function(e){return o.handleMetaChange(e)}),o.updateMinSize(!0),o.images||i||o.changePictures(),o.elem.on("resize",(function(){return o.gallery.handleContinuousResize()})),o.elem.on("resizestop",(function(){return o.onResize()})),o.controls.onDblClick((function(){return o.changePictures()})),o}return I(t,e),Object.defineProperty(t.prototype,"border",{get:function(){return this._border},set:function(e){this._border=e,e.css&&this.gallery.setBorder(e.css)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"captionTitleStyle",{get:function(){return this._captionTitleStyle},set:function(e){this._captionTitleStyle=p.TextControl.buildCss(e),this._captionTitleStyle.css&&(delete this._captionTitleStyle.css["text-decoration"],this.gallery.setCaptionTitleStyle(this._captionTitleStyle.css))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"captionDescriptionStyle",{get:function(){return this._captionDescriptionStyle},set:function(e){this._captionDescriptionStyle=p.TextControl.buildCss(e),this._captionDescriptionStyle.css&&(delete this._captionDescriptionStyle.css["text-decoration"],this.gallery.setCaptionDescriptionStyle(this._captionDescriptionStyle.css))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return this._images},set:function(e){"string"==typeof e&&(e=[e]),this._images=e,this._images.length?this.displayErrorMessage(!1):this.setErrorMessage(__("No images selected")),this.gallery.setImages(this.buildImageList(this._images))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disablePopup",{get:function(){return this._disablePopup},set:function(e){this._disablePopup=e,this.gallery.setDisablePopup(this._disablePopup)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryType",{get:function(){return this.gallery.getType()},set:function(e){this.gallery.setType(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryBgColor",{get:function(){return this.gallery.getBgColor()},set:function(e){this.gallery.setBgColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryPadding",{get:function(){return this.gallery.getPadding()},set:function(e){this.gallery.setPadding(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gallerySlideShowInterval",{get:function(){return this.gallery.getFrequency()},set:function(e){this.gallery.setFrequency(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gallerySlideShowSpeed",{get:function(){return this.gallery.getSlideshowSpeed()/1e3},set:function(e){this.gallery.setSlideshowSpeed(Math.round(1e3*e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryThumbWidth",{get:function(){return this.gallery.getThumbWidth()},set:function(e){this.gallery.setThumbWidth(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryThumbHeight",{get:function(){return this.gallery.getThumbHeight()},set:function(e){this.gallery.setThumbHeight(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryThumbAlign",{get:function(){return this.gallery.getThumbAlign()},set:function(e){this.gallery.setThumbAlign(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gallerySlideOpacity",{get:function(){return this.gallery.getSlideOpacity()},set:function(e){this.gallery.setSlideOpacity(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryThumbPadding",{get:function(){return this.gallery.getThumbPadding()},set:function(e){this.gallery.setThumbPadding(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryThumbAnim",{get:function(){return this.gallery.getThumbAnim()},set:function(e){this.gallery.setThumbAnim(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryImageCover",{get:function(){return this.gallery.getImageCover()},set:function(e){this.gallery.setImageCover(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"galleryHideArrows",{get:function(){return this.gallery.getHideArrows()},set:function(e){this.gallery.setHideArrows(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPictureCaption",{get:function(){return this.gallery.getShowPictureCaption()},set:function(e){this.gallery.setShowPictureCaption(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"captionBackground",{get:function(){return this.gallery.getCaptionBackground()||"transparent"},set:function(e){this.gallery.setCaptionBackground(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTypeId",{get:function(){return this.gallery.getMapTypeId()},set:function(e){this.gallery.setMapTypeId(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markerIconTypeId",{get:function(){return this.gallery.getMarkerIconTypeId()},set:function(e){this.gallery.setMarkerIconTypeId(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this.gallery.getZoom()},set:function(e){this.gallery.setZoom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapCenter",{get:function(){return this.gallery.getMapCenter()},set:function(e){this.gallery.setMapCenter(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.gallery.getKey()},set:function(e){this.gallery.setKey(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.gallery.getTheme()},set:function(e){this.gallery.setTheme(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.gallery.getColor()},set:function(e){this.gallery.setColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSatellite",{get:function(){return this.gallery.getShowSatellite()},set:function(e){this.gallery.setShowSatellite(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showZoom",{get:function(){return this.gallery.getShowZoom()},set:function(e){this.gallery.setShowZoom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showStreetView",{get:function(){return this.gallery.getShowStreetView()},set:function(e){this.gallery.setShowStreetView(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFullscreen",{get:function(){return this.gallery.getShowFullscreen()},set:function(e){this.gallery.setShowFullscreen(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this.gallery.getAllowDragging()},set:function(e){this.gallery.setAllowDragging(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRoads",{get:function(){return this.gallery.getShowRoads()},set:function(e){this.gallery.setShowRoads(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showLandmarks",{get:function(){return this.gallery.getShowLandmarks()},set:function(e){this.gallery.setShowLandmarks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showLabels",{get:function(){return this.gallery.getShowLabels()},set:function(e){this.gallery.setShowLabels(e)},enumerable:!1,configurable:!0}),t.prototype.switchMode=function(t,i,n,o){var s=this;void 0===n&&(n=!1),void 0===o&&(o=!1),e.prototype.switchMode.call(this,t,i,n,o),!this.gallery||"slideshow"!==this.galleryType&&"list"!==this.galleryType||setTimeout((function(){s.gallery&&s.gallery.handleResize()}),400)},t.prototype.getDefaultResizeMode=function(){return v.ControlsResizeMode.ALL},t.prototype.getIcon=function(){return"fa fa-th-large"},t.prototype.fillImageMeta=function(e,t){e.title=t.title?__tr(t.title,null,"",!0):"",""===e.title&&t.link&&t.link.name&&(e.title=__tr(t.link.name,null,"",!0)),e.description=t.description?__tr(t.description,null,"",!0):"",e.address=t.address},t.prototype.buildImageList=function(e){for(var t=this,i=[],n=function(e){var n=e;/^gallery\//.test(n)&&!/^gallery\/thumbs\//.test(n)&&(n="gallery/thumbs/"+n.substring(8)),/^https?:/i.test(n)||(n=wb_builder.userBaseUrl+n);var s={thumb:o.gallery&&"map"==o.gallery.getType()?n:void 0,src:o.system.makeLocalUrl(e),title:"",description:""};i.push(s),r.Service.mediaLibrary.getPathMeta(e,(function(e){t.fillImageMeta(s,e),t.gallery&&t.gallery.onMetaChange()}),void 0,o.previewCompositionId)},o=this,s=0,a=e;s<a.length;s++)n(a[s]);return i},t.prototype.handleMetaChange=function(e){if(this.gallery)for(var t=0,i=this.images;t<i.length;t++){var n=i[t];if(n==e.path||n=="gallery/"+e.path){var o={src:this.system.makeLocalUrl(n),title:"",description:""};this.fillImageMeta(o,e.meta),this.gallery.updateImageMeta(o);break}}},t.prototype.generateThumbs=function(){var e=this.galleryType;this.previewCompositionId||"slideshow"!=e&&"list"!=e&&"map"!=e||C().post(a.wbConfig.getUrl("upload_gen_thumb"),JSON.stringify({paths:this.images}))},t.prototype.getUsedMediaGalleryItems=function(){for(var t=e.prototype.getUsedMediaGalleryItems.call(this),i=0,n=this.images;i<n.length;i++){var o=n[i];"string"==typeof o&&""!==o&&"none"!==o&&t.push(o)}return t},t.prototype.getUsedFonts=function(){var t=e.prototype.getUsedFonts.call(this);return this.captionTitleStyle&&this.captionTitleStyle.font&&""!==this.captionTitleStyle.font&&t.push(this.captionTitleStyle.font),this.captionDescriptionStyle&&this.captionDescriptionStyle.font&&""!==this.captionDescriptionStyle.font&&t.push(this.captionDescriptionStyle.font),t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.content={type:this.galleryType,interval:this.gallerySlideShowInterval,speed:Math.round(1e3*this.gallerySlideShowSpeed),bgColor:this.galleryBgColor,images:this.images,border:this.border,padding:this.galleryPadding,thumbWidth:this.galleryThumbWidth,thumbHeight:this.galleryThumbHeight,thumbAlign:this.galleryThumbAlign,thumbPadding:this.galleryThumbPadding,thumbAnim:this.galleryThumbAnim||void 0,imageCover:this.galleryImageCover,disablePopup:this.disablePopup,hideArrows:this.galleryHideArrows,slideOpacity:this.gallerySlideOpacity,showPictureCaption:this.showPictureCaption,captionBackground:this.captionBackground,captionTitleStyle:this.captionTitleStyle,captionDescriptionStyle:this.captionDescriptionStyle,mapTypeId:this.mapTypeId,markerIconTypeId:this.markerIconTypeId,zoom:this.zoom,mapCenter:this.mapCenter,key:this.key,theme:this.theme,color:this.color,showSatellite:this.showSatellite,showZoom:this.showZoom,showStreetView:this.showStreetView,showFullscreen:this.showFullscreen,allowDragging:this.allowDragging,showRoads:this.showRoads,showLandmarks:this.showLandmarks,showLabels:this.showLabels},t},t.prototype.displayEmptyMessage=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.prototype.displayEmptyMessage.call(this,t,i,n),this.elem.css("background",t?this.noPhotoBg:""),this.gallery.setVisible(!t)},t.prototype.changePictures=function(){var e=this;if(this.images.length){r.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-start",this),r.Service.GalleryPictureManager.setMediaLibraryOptions({showMediaTabs:!0,customContentCallback:null});var t=this.images;r.Service.GalleryPictureManager.setValue(t),r.Service.GalleryPictureManager.setApplyCallback((function(){e.images=r.Service.GalleryPictureManager.getValue(),e.generateThumbs(),e.displayEmptyMessage(0==e.images.length),r.Service.GalleryPictureManager.setVisible(!1),JSON.stringify(t)!==JSON.stringify(e.images)&&wb_builder.setPageModified(!0)})),r.Service.GalleryPictureManager.setVisible(!0)}else this.dialog=r.Service.mediaLibrary.open(__("Add pictures"),!0,"image",!0),this.dialog.addButton(__("Close")),this.dialog.addButton(__("Apply"),(function(){e.dialog&&(e.images=e.dialog.getSelectedFiles(),e.generateThumbs(),e.displayEmptyMessage(0==e.images.length),e.dialog.hide(),e.images.length&&e.changePictures())}),!0),this.dialog.onClose=function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+e.getClassType()+"-edit-end",e)},this.images.length>0?this.dialog.setSelectedFiles(this.images):this.dialog.clearFileSelection(),this.dialog.setVisible(!0)},t.prototype.updateHierarchyLevel=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e.prototype.updateHierarchyLevel.call(this,t),t&&this.onResize(i)},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.onResize=function(t){void 0===t&&(t=!1),e.prototype.onResize.call(this,t),this.gallery&&this.gallery.handleResize(),this.elem.trigger("elementresize",[this])},t.prototype.getImages=function(){return this.images},t.prototype.onSwitchLanguage=function(t){e.prototype.onSwitchLanguage.call(this,t),this.gallery.setImages(this.buildImageList(this.images))},t.prototype.updateMinSize=function(e){void 0===e&&(e=!1),this.onResize(e)},t.prototype.canUseAsBackground=function(){return!0},t.prototype.updateComPropertiesGalleryType=function(e){if(this.comDialog){var t=this.comDialog.fields;t.imageControlsRow1.applyLayoutCellCss(0,{display:"none"}),t.imageControlsRow1.applyLayoutCellCss(1,{display:"none"}),t.imageControlsRow1.applyLayoutCellCss(2,{display:"none"}),t.galleryThumbSizeTimesLabel.setVisible(!1),t.galleryThumbHeight.setVisible(!1),t.imageControlsRow1.applyLayoutCellCss(3,{display:"none"}),t.imageControlsRow1.applyLayoutCellCss(4,{display:"none"}),t.imageControlsRow1.applyLayoutCellCss(5,{display:"none"}),t.imageControlsRow2.applyLayoutCellCss(0,{display:"none"}),t.imageControlsRow2.applyLayoutCellCss(1,{display:"none"}),t.galleryHideArrows.setVisible("slideshow"===e),"map"===e?(t.imageControlsRow1.applyLayoutCellCss(2,{display:""}),t.galleryThumbSizeTimesLabel.setVisible(!0),t.galleryThumbHeight.setVisible(!0),t.imageControlsRow1.applyLayoutCellCss(3,{display:"none"}),t.imageControlsRow1.applyLayoutCellCss(5,{display:"none"})):"thumbs"===e?(t.imageControlsRow1.applyLayoutCellCss(2,{display:""}),t.galleryThumbSizeTimesLabel.setVisible(!0),t.galleryThumbHeight.setVisible(!0),t.imageControlsRow1.applyLayoutCellCss(3,{display:""}),t.imageControlsRow1.applyLayoutCellCss(5,{display:""})):"slideshow"===e?(t.imageControlsRow1.applyLayoutCellCss(0,{display:""}),t.imageControlsRow1.applyLayoutCellCss(1,{display:""}),t.imageControlsRow1.applyLayoutCellCss(4,{display:""}),t.imageControlsRow2.applyLayoutCellCss(0,{display:""}),t.imageControlsRow2.applyLayoutCellCss(1,{display:""})):"list"===e?(t.imageControlsRow1.applyLayoutCellCss(0,{display:""}),t.imageControlsRow1.applyLayoutCellCss(1,{display:""}),t.imageControlsRow1.applyLayoutCellCss(2,{display:""}),t.galleryThumbSizeTimesLabel.setVisible(!0),t.galleryThumbHeight.setVisible(!0),t.imageControlsRow2.applyLayoutCellCss(0,{display:""}),t.imageControlsRow2.applyLayoutCellCss(1,{display:""})):"masonry"===e&&(t.imageControlsRow1.applyLayoutCellCss(2,{display:""}),t.imageControlsRow1.applyLayoutCellCss(3,{display:""}),t.imageControlsRow1.applyLayoutCellCss(5,{display:""}))}},t.prototype.comProperties=function(t){var i=this,n=e.prototype.comProperties.call(this,{size:{sizeClass:"modal-md",minBodyHeight:384},tabs:[{children:[{type:"HorizontalLayout",columnWeights:[4,4,4],children:[{type:"VerticalLayout",css:{marginTop:15},id:"galleryImagesBlock",children:[{type:"Label",text:__("Gallery Pictures")},{type:"ImageSelector",id:"galleryImages",usePictureManager:!0}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryBgColorBlock",children:[{type:"Label",text:__("Background color")},{type:c.ColorPicker,id:"galleryBgColor",big:!0,change:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-galleryBgColor-change",i)}}]},{type:"VerticalLayout",css:{marginTop:15},id:"imageBorderBlock",children:[{type:"Label",text:__("Border")},{type:u.BorderControl,id:"imageBorder",noTransparent:!1,change:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-imageBorder-change",i)}}]}]},{type:"Label",css:{marginTop:15},text:__("Gallery Type")},{type:y.GalleryTypeSelector,id:"galleryType",change:function(e){i.updateComPropertiesGalleryType(e.galleryType.getValue()),r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-galleryType-change",i)}},{type:"HorizontalLayout",id:"imageControlsRow1",columnWeights:[4,4,4,4,4,4,4],children:[{type:"VerticalLayout",css:{marginTop:15},id:"galleryPaddingBlock",children:[{type:"Label",text:__("Gallery padding (px)")},{type:m.SizeSelector,id:"galleryPadding",min:0,max:999,repeat:!1,change:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-galleryPadding-change",i)}}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryFrequencyBlock",children:[{type:"Label",text:__("Image change frequency (s)"),helpText:__("Enter 0 seconds to disable automatic image changing")},{type:m.SizeSelector,id:"galleryFrequency",min:0,max:10,repeat:!1}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryThumbSizeBlock",children:[{type:"Label",text:__("Thumbnail Size")},{type:"FlowLayout",verticalAlign:"middle",spacing:5,children:[{type:m.SizeSelector,id:"galleryThumbWidth",min:10,repeat:!1},{type:"Label",html:"&times;",id:"galleryThumbSizeTimesLabel",css:{fontWeight:"normal",fontSize:18}},{type:m.SizeSelector,id:"galleryThumbHeight",min:10,repeat:!1}]}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryThumbAlignBlock",children:[{type:"Label",text:__("Align")},{type:g.HAlignSelector,id:"galleryThumbAlign",justify:!1}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryOpacityBlock",children:[{type:"Label",text:__("Slide opacity (%)")},{type:"SliderControl",id:"gallerySlideOpacity",min:0,max:100}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryThumbPaddingBlock",children:[{type:"Label",text:__("Thumb padding (px)")},{type:m.SizeSelector,id:"galleryThumbPadding",min:0,max:999,repeat:!1}]}]},{type:"HorizontalLayout",id:"imageControlsRow2",columnWeights:[4,4],children:[{type:"VerticalLayout",css:{marginTop:15},id:"galleryImageCoverBlock",children:[{type:"CheckBox",id:"galleryImageCover",label:__("Auto crop")}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryDisablePopupBlock",children:[{type:"CheckBox",id:"galleryDisablePopup",label:__("Do not enlarge picture on click")}]},{type:"VerticalLayout",css:{marginTop:15},id:"galleryHideArrowsBlock",children:[{type:"CheckBox",id:"galleryHideArrows",label:__("Hide arrows")}]}]}]},{name:__("Captions"),children:[{type:"HorizontalLayout",columnWeights:[6,6],children:[{type:"VerticalLayout",css:{marginTop:15},id:"pictureCaptionBlock",children:[{type:"Label",text:__("Show picture caption")},{type:"RadioBox",id:"showPictureCaptionAlways",group:"showPictureCaption",label:__("Always")},{type:"RadioBox",id:"showPictureCaptionOnHover",group:"showPictureCaption",label:__("On mouse hover")}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Caption background colour")},{type:c.ColorPicker,id:"captionBackground",big:!1}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Picture title style")},{type:p.TextControl,id:"captionTitleStyle",horizontal:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Picture description style")},{type:p.TextControl,id:"captionDescriptionStyle",horizontal:!0}]}]}],callbackFunc:function(e){i.galleryBgColor=e.galleryBgColor.getValue(),i.gallerySlideShowInterval=e.galleryFrequency.getValue(),i.galleryType=e.galleryType.getValue(),i.border=e.imageBorder.getValue(),i.galleryPadding=e.galleryPadding.getValue(),i.galleryThumbWidth=e.galleryThumbWidth.getValue(),i.galleryThumbHeight=e.galleryThumbHeight.getValue(),i.galleryThumbAlign=e.galleryThumbAlign.getValue(),i.galleryThumbPadding=e.galleryThumbPadding.getValue(),i.gallerySlideOpacity=e.gallerySlideOpacity.getValue(),i.galleryImageCover=e.galleryImageCover.getValue(),i.disablePopup=e.galleryDisablePopup.getValue(),i.galleryHideArrows=e.galleryHideArrows.getValue(),e.showPictureCaptionOnHover.getValue()?i.showPictureCaption="hover":i.showPictureCaption="always",i.captionBackground=e.captionBackground.getValue(),i.captionTitleStyle=e.captionTitleStyle.getValue(),i.captionDescriptionStyle=e.captionDescriptionStyle.getValue();var t=i.galleryType;"auto"!==i.height||"slideshow"!==t&&"list"!==t||(i.useMinHeight=!0,i.minHeight<20&&(i.minHeight=200),i.updateStyle()),i.images=e.galleryImages.getValues()}});n.galleryType.setValue(this.galleryType),n.galleryBgColor.setValue(this.galleryBgColor),n.galleryImages.setValues(this.images),n.imageBorder.setValue(this.border),n.galleryFrequency.setValue(this.gallerySlideShowInterval),n.galleryPadding.setValue(this.galleryPadding),n.galleryThumbWidth.setValue(this.galleryThumbWidth),n.galleryThumbHeight.setValue(this.galleryThumbHeight),n.galleryThumbAlign.setValue(this.galleryThumbAlign),n.galleryThumbPadding.setValue(this.galleryThumbPadding),n.gallerySlideOpacity.setValue(this.gallerySlideOpacity),n.galleryImageCover.setValue(this.galleryImageCover),n.galleryDisablePopup.setValue(this.disablePopup),n.galleryHideArrows.setValue(this.galleryHideArrows);var o=this.showPictureCaption;return n.showPictureCaptionAlways.setValue("always"===o),n.showPictureCaptionOnHover.setValue("hover"===o),n.captionBackground.setValue(this.captionBackground),n.captionTitleStyle.setValue(this.captionTitleStyle),n.captionDescriptionStyle.setValue(this.captionDescriptionStyle),n},t.prototype.initContextMenu=function(){var t=this;if(e.prototype.initContextMenu.call(this),this.menu){var i=this.contextMenuFirstIndex;this.menu.insertItemAt(i++,"editGallery",__("Change pictures"),(function(){return t.changePictures()}),!1,!1,null,"glyphicon glyphicon-picture"),this.typeSubmenu=new l.ContextMenu(this.id+"_type_sub"),this.typeSubmenu.addItem("gt_thumbs",__("Thumbnails"),(function(){return t.galleryType="thumbs"}),!1,!1,null,"glyphicon glyphicon-th"),this.typeSubmenu.addItem("gt_masonry",__("Masonry"),(function(){return t.galleryType="masonry"}),!1,!1,null,"glyphicon glyphicon-th"),this.typeSubmenu.addItem("gt_slide",__("Slideshow"),(function(){return t.galleryType="slideshow"}),!1,!1,null,"glyphicon glyphicon-film"),this.typeSubmenu.addItem("gt_list",__("List"),(function(){return t.galleryType="list"}),!1,!1,null,"glyphicon glyphicon-align-justify"),this.typeSubmenu.addItem("gt_map",__("Map"),(function(){return t.galleryType="map"}),!1,!1,null,"glyphicon glyphicon-map-marker"),this.menu.insertItemAt(i++,"changeType",__("Change type"),this.typeSubmenu,!1,!1,null,"glyphicon glyphicon-cog"),this.menu.addSeparator(i++)}},t.prototype.updateContextMenu=function(t){if(void 0===t&&(t=!1),e.prototype.updateContextMenu.call(this,t),this.typeSubmenu){var i={gt_thumbs:"thumbs",gt_slide:"slideshow",gt_list:"list"},n=this.galleryType;for(var o in i)this.typeSubmenu.setSelected(o,n===i[o])}},t.prototype.releaseResources=function(t){if(e.prototype.releaseResources.call(this,t),this.gallery.destroy(),d.GlobalEvents.off("media.meta.changed",this.metaChangeHandler),this.menu){var i=this.menu.getItem("changeColor");null==i||i.ColorPickerDestroy()}},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"galleryType",type:b.PropertyType.GalleryType}),this.registerProperty({name:"galleryBgColor",type:b.PropertyType.GalleryBackgroundColor}),this.registerProperty({name:"galleryPadding",type:b.PropertyType.GalleryPadding,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"galleryImageCover",type:b.PropertyType.GalleryImageCover,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"disablePopup",type:b.PropertyType.GalleryDisableLightbox,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"galleryHideArrows",type:b.PropertyType.GalleryHideArrows,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType}}}),this.registerProperty({name:"images",type:b.PropertyType.GalleryImages}),this.registerProperty({name:"border",type:b.PropertyType.ThumbnailBorder}),this.registerProperty({name:"galleryThumbWidth",type:b.PropertyType.ThumbnailWidth,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"thumbs"===this.galleryType||"masonry"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"galleryThumbHeight",type:b.PropertyType.ThumbnailHeight,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"thumbs"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"galleryThumbAlign",type:b.PropertyType.ThumbnailAlignment,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"thumbs"===this.galleryType||"masonry"===this.galleryType}}}),this.registerProperty({name:"galleryThumbPadding",type:b.PropertyType.ThumbnailPadding,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"thumbs"===this.galleryType||"masonry"===this.galleryType}}}),this.registerProperty({name:"galleryThumbAnim",type:b.PropertyType.ThumbnailAnimation,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"thumbs"===this.galleryType||"masonry"===this.galleryType}}}),this.registerProperty({name:"gallerySlideShowInterval",type:b.PropertyType.SlideShowInterval,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"gallerySlideShowSpeed",type:b.PropertyType.SlideShowSpeed,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType||"list"===this.galleryType}}}),this.registerProperty({name:"gallerySlideOpacity",type:b.PropertyType.SlideOpacity,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"slideshow"===this.galleryType}}}),this.registerProperty({name:"showPictureCaption",type:b.PropertyType.CaptionsDisplay}),this.registerProperty({name:"captionBackground",type:b.PropertyType.CaptionsBackgroundColor}),this.registerProperty({name:"captionTitleStyle",type:b.PropertyType.CaptionsTitleStyle}),this.registerProperty({name:"captionDescriptionStyle",type:b.PropertyType.CaptionsDescriptionStyle}),this.registerProperty({name:"mapTypeId",type:b.PropertyType.GoogleMapType,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"markerIconTypeId",type:b.PropertyType.GoogleMarkerIconType,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"zoom",type:b.PropertyType.MapZoom,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"mapCenter",type:b.PropertyType.GoogleMapAddress,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType,label:__("Map center"),cleanable:!0}}}),this.registerProperty({name:"key",type:b.PropertyType.ApiGoogleMapsKey,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"theme",type:b.PropertyType.GoogleMapTheme,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"color",type:b.PropertyType.MapColor,dependencies:["galleryType","theme"],uiComponentOptions:function(){return{visible:"map"===this.galleryType&&"monochrome"===this.theme}}}),this.registerProperty({name:"showSatellite",type:b.PropertyType.MapShowSatelliteControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showZoom",type:b.PropertyType.MapShowZoomControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showStreetView",type:b.PropertyType.MapShowStreetViewControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showFullscreen",type:b.PropertyType.MapShowFullScreenControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"allowDragging",type:b.PropertyType.MapAllowDragging,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showRoads",type:b.PropertyType.MapShowRoads,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showLandmarks",type:b.PropertyType.MapShowLandmarks,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}}),this.registerProperty({name:"showLabels",type:b.PropertyType.MapShowLabels,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:"map"===this.galleryType}}})},t.config={thumbWidth:290,thumbHeight:290,minWidth:320,minHeight:240},t.selectDialog=null,t.editDialog=null,t}(s.Element);o.ElementRegister.registerClass("Gallery",x)},"./GalleryLib.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GalleryLib:function(){return d}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./util/TextUtil.ts"),r=i("./GoogleMapsApi.ts"),a=function(){return a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},l=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};function c(e){return"wb-anim-"+e.effect+(e.direction?"-"+e.direction:"")}function u(e){return e?{animation:c(e)+" "+e.duration+"s "+e.timing+" "+e.delay+"s","animation-iteration-count":e.loop?"infinite":1}:{animation:"none"}}var d=function(){function e(t){var i=this;this.type="thumbs",this.slideshowInterval=5,this.slideshowSpeed=400,this.images=[],this.imageIndex=0,this.slideshowTimer=0,this.displayedImage=null,this.loadingImage=null,this.listImgCont=null,this.thumbImgCont=null,this.fullThumbWidth=0,this.fullThumbHeight=0,this.bgColor="",this.padding=0,this.imageCover=!1,this.disablePopup=!1,this.hideArrows=!1,this.slideOpacity=100,this.thumbWidth=290,this.thumbHeight=290,this.thumbAlign="left",this.thumbPadding=6,this.thumbAnim=null,this.showPictureCaption="always",this.imageElems={},this.lightBox=null,this.initialRender=!1,this.lightBoxDisplayed=!1,this.invalid=!1,this.resizeEventHandler=null,this.transitionendEventHandler=null,this.map=null,this.mapMarkers=[],this.mapInfowindows=[],this.mapDiv=null,this.delayedUpdateTimeout=0,this.metaUpdateTimeout=0,e.galleryLibList.push(this),this.elem=o()("<div>").addClass("wb_gallery"),this.id=t.id?t.id:"wb-gallery-id",this.border=t.border?t.border:{border:"5px none #FFFFFF"},this.thumbWidth="number"==typeof t.thumbWidth&&t.thumbWidth>0?t.thumbWidth:290,this.thumbHeight="number"==typeof t.thumbHeight&&t.thumbHeight>0?t.thumbHeight:290,this.thumbAlign=t.thumbAlign?t.thumbAlign:this.thumbAlign,this.thumbPadding=t.thumbPadding||0===t.thumbPadding?t.thumbPadding:this.thumbPadding,t.thumbAnim&&(this.thumbAnim=t.thumbAnim),this.padding=t.padding||0===t.padding?t.padding:0,this.type=t.type?t.type:this.type,this.slideshowInterval="number"==typeof t.interval?t.interval:10,this.imageCover="boolean"==typeof t.imageCover?t.imageCover:this.imageCover,this.disablePopup="boolean"==typeof t.disablePopup?t.disablePopup:this.disablePopup,this.hideArrows="boolean"==typeof t.hideArrows?t.hideArrows:this.hideArrows,this.slideOpacity="number"==typeof t.slideOpacity?t.slideOpacity:this.slideOpacity,this.slideshowSpeed="number"==typeof t.speed?t.speed:400,this.setBgColor(t.bgColor?t.bgColor:"transparent"),this.showPictureCaption="string"==typeof t.showPictureCaption?t.showPictureCaption:this.showPictureCaption,t.captionBackground&&this.setCaptionBackground(t.captionBackground),t.captionTitleStyle&&this.setCaptionTitleStyle(t.captionTitleStyle),t.captionDescriptionStyle&&this.setCaptionDescriptionStyle(t.captionDescriptionStyle),this.mapTypeId=t.mapTypeId||google.maps.MapTypeId.ROADMAP,this.markerIconTypeId=t.markerIconTypeId||null,this.zoom=t.zoom||16,this.mapCenter=t.mapCenter||null,this.key=t.key||null,this.theme=t.theme||"default",this.color=t.color||"#eeeeee",this.showSatellite=t.showSatellite||!1,this.showZoom=t.showZoom||!1,this.showStreetView=t.showStreetView||!1,this.showFullscreen=t.showFullscreen||!1,this.allowDragging=t.allowDragging||!1,this.showRoads=t.showRoads||!1,this.showLandmarks=t.showLandmarks||!1,this.showLabels=t.showLabels||!1,"wb_builder"in window||(this.initialRender=!0),this.setImages(t.images&&t.images.length?t.images:[]),t.trackResize&&(this.resizeEventHandler=function(){return i.handleResize()},o()(window).on("resize",this.resizeEventHandler)),this.transitionendEventHandler=function(e){o()(e.target).is(".wb-viewport-block")&&i.handleResize()},o()(window).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",this.transitionendEventHandler)}return e.getGalleryLibList=function(){return e.galleryLibList},e.prototype.setVisible=function(e){this.elem.css("display",e?"block":"none")},e.prototype.appendTo=function(e){o()(e).append(this.elem),this.handleResize()},e.prototype.destroy=function(){var e;this.slideshowTimer&&clearInterval(this.slideshowTimer),"masonry"===this.type&&this.listImgCont&&this.listImgCont.masonry("destroy"),null===(e=this.lightBox)||void 0===e||e.destroy(),this.resizeEventHandler&&o()(window).off("resize",this.resizeEventHandler),this.transitionendEventHandler&&o()(window).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",this.transitionendEventHandler),this.elem.remove()},e.prototype.reset=function(e){var t=this;this.slideshowTimer&&clearInterval(this.slideshowTimer),this.slideshowInterval&&this.images.length>1?this.slideshowTimer=setInterval((function(){return t.slideshowNext(e)}),1e3*this.slideshowInterval):this.slideshowTimer=0},e.prototype.invalidate=function(){var e=this;return this.invalid||(this.invalid=!0,"requestAnimationFrame"in window?requestAnimationFrame((function(){return e.revalidate()})):setTimeout((function(){return e.revalidate()}),0)),this},e.prototype.revalidate=function(){return this.invalid=!1,this.render(),this},e.prototype.applyAnimation=function(e,t,i){if(e.css(u()),this.thumbAnim&&this.thumbAnim.normal){var n=this.thumbAnim.normal;e.addClass("wb-anim-entry").removeClass("wb-anim-entry-on");var o=function(){return setTimeout((function(){e.css(u(a(a({},n),{delay:0}))),setTimeout((function(){return e.addClass("wb-anim-entry-on").removeClass("wb-anim-entry")}),40)}),1e3*n.delay*t)};i?i.done(o):o()}if(this.thumbAnim&&this.thumbAnim.hover){var s=this.thumbAnim.hover,r=u(),l=u(s);e.addClass(c(s)).off("mouseover").on("mouseover",(function(){return e.css(l)})).off("mouseout").on("mouseout",(function(){return e.css(r)})),s.loop&&e.addClass("loop")}},e.prototype.render=function(){if(this.slideshowTimer&&clearInterval(this.slideshowTimer),this.slideshowTimer=0,this.listImgCont=null,this.displayedImage=null,this.loadingImage=null,this.elem.empty(),0!=this.images.length)switch(this.type){case"slideshow":this.renderSlideshow();break;case"list":this.renderList();break;case"masonry":this.renderMasonry();break;case"map":this.renderMap();break;default:this.renderThumbs()}},e.prototype.renderMap=function(){var e=this;this.elem.html('<div class="wb-gallery-map" style="width: 100%; height: 100%; overflow: auto; position: absolute;"></div>'),this.elem.css("text-align",this.thumbAlign);var t=this.elem.children().first();this.map=null,this.mapDiv=null,r.GoogleMapsApi.loadGoogleMapsApi([function(){var i=e;e.map||(e.mapDiv||(e.mapDiv=o()("<div>").css({width:"100%",height:"100%"}).appendTo(t)),e.mapDiv.css("display","block"),setTimeout((function(){i.mapDiv&&(i.map=new google.maps.Map(i.mapDiv.get(0),{zoom:i.zoom,center:i.mapCenter&&i.mapCenter.latLng?i.mapCenter.latLng:new google.maps.LatLng(0,0),mapTypeId:i.mapTypeId||google.maps.MapTypeId.ROADMAP,mapTypeControl:i.showSatellite,zoomControl:i.showZoom,streetViewControl:i.showStreetView,fullscreenControl:i.showFullscreen,draggable:i.allowDragging,styles:i.getStyles()}))}),50));var n=function(){if(i.map){i.map.setZoom(i.zoom),i.map.setCenter(new google.maps.LatLng(0,0)),i.map.setMapTypeId(i.mapTypeId||google.maps.MapTypeId.ROADMAP),i.map.setOptions({mapTypeControl:i.showSatellite,zoomControl:i.showZoom,streetViewControl:i.showStreetView,fullscreenControl:i.showFullscreen,draggable:i.allowDragging,styles:i.getStyles()}),i.map.addListener("click",(function(){i.mapInfowindows.map((function(e){e.close()}))})),i.mapMarkers.map((function(e){return e.setMap(null)})),i.mapMarkers=[],i.mapInfowindows=[];for(var e=new google.maps.LatLngBounds,t=function(t,n){var r=i.images[t];if(r.address&&r.address.latLng){var a=o()('<div class="gallery-map-image" style="position: relative">'+'<img src="'.concat((0,s.urlEncode)(r.src||r.thumb||""),'" alt="').concat(r.title,'" style="max-width: 100%; max-height: 100%"/>')+"</div>"),l=o()('<div class="wb-picture-caption"/>');i.captionBackground&&l.css("background-color",i.captionBackground),i.fillCaptionContainer(l,r,!0);var c=new google.maps.InfoWindow({content:a.append(l).get(0)});c.addListener("domready",(function(){var e=o()(this.getContent()).parent(),t=e.parent().innerHeight()-e.height();o()(this.getContent()).children("img").css("max-height",e.height()-t)}));var u=new google.maps.LatLng(r.address.latLng);e.extend(u);var d=void 0;"thumbs"===i.markerIconTypeId?d={url:r.thumb||r.src,size:new google.maps.Size(35,35),scaledSize:new google.maps.Size(35,35)}:"camera"===i.markerIconTypeId&&(d={path:"M960 864q119 0 203.5 -84.5t84.5 -203.5t-84.5 -203.5t-203.5 -84.5t-203.5 84.5t-84.5 203.5t84.5 203.5t203.5 84.5zM1664 1280q106 0 181 -75t75 -181v-896q0 -106 -75 -181t-181 -75h-1408q-106 0 -181 75t-75 181v896q0 106 75 181t181 75h224l51 136 q19 49 69.5 84.5t103.5 35.5h512q53 0 103.5 -35.5t69.5 -84.5l51 -136h224zM960 128q185 0 316.5 131.5t131.5 316.5t-131.5 316.5t-316.5 131.5t-316.5 -131.5t-131.5 -316.5t131.5 -316.5t316.5 -131.5z",anchor:new google.maps.Point(15,30),scale:.01,rotation:180,fillColor:"#cecece",fillOpacity:.5,strokeWeight:1});var h=new google.maps.Marker({position:u,map:i.map,title:r.title,icon:d});h.addListener("click",(function(){i.mapInfowindows.map((function(e){return e.close()}));var e=h.getMap();e&&c.open(e,h)})),i.mapMarkers.push(h),i.mapInfowindows.push(c)}},r=0,a=i.images.length;r<a;r++)t(r);i.mapCenter&&i.mapCenter.latLng&&0!==i.mapCenter.latLng.lat&&0!==i.mapCenter.latLng.lng?(i.map.setCenter(i.mapCenter.latLng),i.map.setZoom(i.zoom)):1===i.mapMarkers.length?(i.map.setCenter(new google.maps.LatLng(0,0)),i.map.setZoom(i.zoom)):i.map.fitBounds(e)}else setTimeout(n,10)};setTimeout(n,50)}])},e.prototype.getThemeDefaultStyle=function(){return[]},e.prototype.getThemeLightStyle=function(e){return[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:e||"#cccccc"},{visibility:"on"}]}]},e.prototype.getThemeDarkStyle=function(e){return[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:e||"#333333"},{lightness:17}]}]},e.prototype.getThemeMonochromeStyle=function(e){return[{featureType:"all",elementType:"geometry",stylers:[{color:e||"#3e44b5"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{gamma:.01},{lightness:20}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{saturation:-31},{lightness:-33},{weight:2},{gamma:.8}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:30},{saturation:30}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:20}]},{featureType:"poi.park",elementType:"geometry",stylers:[{lightness:20},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:10},{saturation:-30}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{saturation:25},{lightness:25}]},{featureType:"water",elementType:"all",stylers:[{lightness:-20}]}]},e.prototype.getThemeStyle=function(e,t){return"light"===e?this.getThemeLightStyle(t):"dark"===e?this.getThemeDarkStyle(t):"monochrome"===e?this.getThemeMonochromeStyle(t):this.getThemeDefaultStyle()},e.prototype.getStyles=function(){var e=this.getThemeStyle(this.theme,this.color),t=[{featureType:"road",stylers:[{visibility:this.showRoads?"on":"off"}]},{featureType:"poi",stylers:[{visibility:this.showLandmarks?"on":"off"}]},{elementType:"labels",stylers:[{visibility:this.showLabels?"on":"off"}]}];return e.concat(t)},e.prototype.renderThumbs=function(){this.elem.html('<div class="wb-thumbs-only" style="width: 100%; height: 100%; overflow: auto;"></div>'),this.elem.css("text-align",this.thumbAlign);for(var e=this.elem.children().first(),t=0,i=this.images.length;t<i;t++){var n=this.addImage(e,this.images[t],t).wrp;this.applyAnimation(n,t)}e.children(".wb_thumb").css("padding",this.thumbPadding/2+"px")},e.prototype.renderSlideshow=function(){var e=this,t=this.elem.parent();if(t.length){var i=t.css("min-height");i&&/^\d+px$/.test(i)&&parseInt(i)>0&&t.css("height",i)}this.elem.html('<div class="gallery-slideshow"><div class="gallery-slide-image" style="overflow: hidden;"></div><div class="gallery-slide-left"><i class="fa fa-chevron-left"></i></div><div class="gallery-slide-right"><i class="fa fa-chevron-right"></i></div></div>');var n=this.elem.children().first(),o=n.children(".gallery-slide-left"),s=n.children(".gallery-slide-right");this.hideArrows&&(o.css("display","none"),s.css("display","none")),this.listImgCont=n.children(".gallery-slide-image"),this.listImgCont.css("opacity",this.slideOpacity/100),o.click((function(){return e.slideshowPrev()})),s.click((function(){return e.slideshowNext()})),this.reset(),this.imageIndex=-1,this.slideshowNext()},e.prototype.renderList=function(){var e=this,t=this.elem.height();t||(t=this.elem.parent().height());var i=this.getThumbWidth(),n=this.getThumbHeight(),s=o()("<div></div>"),r=function(){var t=e.imageElems[e.imageIndex];t.parentNode&&t.parentNode.parentNode&&t.parentNode.parentNode.parentNode&&(o()(t.parentNode.parentNode.parentNode).children(".tmb-selected").removeClass("tmb-selected"),o()(t.parentNode.parentNode).addClass("tmb-selected"))};this.imageElems={};for(var a=function(t){var o=l.images[t],a=l.addImage(s,o,t,!0).img;a.css({cursor:"pointer"}),l.imageElems[t]=a.get(0),a.click((function(){e.listImgCont&&(e.imageIndex=e.images.indexOf(o),e.displayImage(e.listImgCont,r))}));var c=a.parent().parent();t===l.imageIndex&&(c.addClass("tmb-selected"),i=l.getThumbWidth()+8,n=l.getThumbHeight()+8)},l=this,c=0;c<this.images.length;c++)a(c);this.fullThumbWidth=i,this.fullThumbHeight=n;var u=i*this.images.length;s.css({position:"absolute",left:"0",top:"5px",width:u+"px",height:n+"px"});var d=document.createElement("DIV");o()(d).css({position:"relative",height:t+"px"}),d.className="gallery-list";var h,p=document.createElement("DIV");o()(p).css({position:"relative",height:t-n-10+"px",overflow:"hidden"}),p.className="gallery-list-image";var m=document.createElement("DIV");o()(m).css({position:"relative",float:"left",width:"16px",height:n+10+"px",cursor:"pointer"}),m.className="gallery-list-left",o()(m).click((function(){return e.slideBy(3*-e.fullThumbWidth)})),(h=document.createElement("I")).setAttribute("class","fa fa-chevron-left"),m.appendChild(h);var g=document.createElement("DIV");o()(g).css({position:"relative",float:"none",margin:"0 auto",maxWidth:u+"px",height:n+10+"px",overflow:"hidden"}),g.className="gallery-list-thumbs";var f=document.createElement("DIV");o()(f).css({position:"relative",float:"right",width:"16px",height:n+10+"px",cursor:"pointer"}),f.className="gallery-list-right",o()(f).click((function(){return e.slideBy(3*e.fullThumbWidth)})),(h=document.createElement("I")).setAttribute("class","fa fa-chevron-right"),f.appendChild(h);var y=document.createElement("DIV");o()(y).css({position:"relative",height:n+10+"px",overflow:"hidden"}),o()(g).append(s),y.appendChild(m),y.appendChild(f),y.appendChild(g),d.appendChild(p),d.appendChild(y),this.listImgCont=o()(p),this.thumbImgCont=o()(g),this.elem.append(d),this.reset(r),this.imageIndex=-1,this.slideshowNext(r)},e.prototype.renderMasonry=function(){var e=o()('<div class="wb-masonry-items"/>'),t=o()('<div class="wb-masonry" style="width: 100%; height: 100%; overflow: auto;"/>');t.append(e),this.elem.append(t),"left"===this.thumbAlign?e.css("float","left"):"right"===this.thumbAlign?e.css("float","right"):e.css("margin","0 auto");for(var i=o().Deferred(),n=0,s=this.images.length;n<s;n++){var r=this.addImage(e,this.images[n],n).wrp;this.applyAnimation(r,n,i.promise())}e.children(".wb_thumb").css("padding",this.thumbPadding/2+"px");var a=this.getBorder();e.masonry({itemSelector:".wb_thumb",columnWidth:this.getThumbWidth()+(a?this.getBorderWidth(a,1)+this.getBorderWidth(a,3):0)+this.thumbPadding,fitWidth:!0,transitionDuration:0}).masonry("once","layoutComplete",(function(){return i.resolve()})),this.listImgCont=e},e.prototype.onImageLoad=function(){var e=this;this.delayedUpdateTimeout&&clearTimeout(this.delayedUpdateTimeout),this.delayedUpdateTimeout=setTimeout((function(){e.delayedUpdateTimeout=0,"masonry"===e.type&&(e.elem.find(".wb-masonry-items").masonry(),e.elem.trigger("elementviewchange"))}),1e3)},e.prototype.getBorderWidth=function(e,t){void 0===t&&(t=0);var i="";1==t&&"string"==typeof e.borderLeft&&(i=e.borderLeft),1==t&&"string"==typeof e["border-left"]&&(i=e["border-left"]),3==t&&"string"==typeof e.borderRight&&(i=e.borderRight),3==t&&"string"==typeof e["border-right"]&&(i=e["border-right"]),i||"string"!=typeof e.border||(i=e.border);var n=i.match(/^([0-9]+)px(?:| .+)$/);return n?parseFloat(n[1]):0},e.prototype.slideBy=function(e,t){if(void 0===t&&(t=!1),this.thumbImgCont){var i=this.thumbImgCont,n=i.children().first(),o=n.position().left;o-=e;var s=-(n.width()-i.width());o<s&&(o=s),o>0&&(o=0);var r={left:o+"px"};t?n.stop(!0,!1).css(r):n.animate(r)}},e.prototype.handleContinuousResize=function(){this.listImgCont&&"masonry"===this.type&&this.listImgCont.masonry()},e.prototype.handleResize=function(){if(this.elem.parent().height("map"===this.type?"auto":"100%"),this.listImgCont){if("list"===this.type){var e=this.elem.height(),t=this.fullThumbHeight;this.listImgCont.css({height:e-t-10+"px"}),this.slideBy(0,!0)}else"masonry"===this.type&&(this.listImgCont.css("width",""),this.listImgCont.masonry());this.displayedImage&&this.updateImageSize(this.displayedImage),this.loadingImage&&this.updateImageSize(this.loadingImage)}},e.prototype.updateImageSize=function(e){if(this.listImgCont){var t=e.data("_wb_size_"),i=this.calcImageStyles(this.listImgCont,t);e.css({left:i.x+"px",top:i.y+"px"});var n=e.children("img").first();if(n&&n.length){n.css({width:i.width+"px",height:i.height+"px"});var o=n.get(0);o.width=i.width,o.height=i.height}}},e.prototype.calcImageStyles=function(e,t){if(!t)return{x:0,y:0,width:0,height:0};var i=this.imageCover,n=i?0:this.padding,o=e.innerWidth()-2*n,s=e.innerHeight()-2*n,r=t.width,a=t.height;if(i||r>o||a>s){var l=r/o,c=a/s,u=i?Math.min(l,c):Math.max(l,c);r=Math.floor(r/u),a=Math.floor(a/u)}return{x:Math.floor((o-r)/2+n),y:Math.floor((s-a)/2+n),width:r,height:a}},e.prototype.parseHash=function(){var e=window.location.hash.substring(1),t={gid:"",pid:""};if(e.length<5)return t;for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(1==n&&o&&(t.gid=o[1]),2==n&&o&&(t.pid=o[1]))}return t},e.prototype.displayImage=function(e,t){var i=this;"function"==typeof t&&t();var n=this.images[this.imageIndex];if(n){var r="thumbs"!==this.type&&"masonry"!==this.type&&n.link?n.link:void 0,a=(r?o()("<a>"):o()("<div>")).addClass("gallery-image");r&&(a.attr("href",r.url),r.target&&a.attr("target",r.target)),n.title&&a.attr("title",n.title),a.data("image",n),a.css({display:"none",position:"absolute"});var l=new Image,c=o()(l);l.alt="",l.onload=function(){if(i.displayedImage){var t=i.displayedImage.data("caption");i.displayedImage.fadeOut(i.getTransitionSpeed(),(function(){i.displayedImage&&i.displayedImage.remove()})),t&&t.fadeOut(i.getTransitionSpeed(),(function(){return t.remove()}))}var n={width:l.width,height:l.height};a.data("_wb_size_",n),a.append(l);var o=i.calcImageStyles(e,n);a.css({left:o.x+"px",top:o.y+"px"}),c.css({width:o.width+"px",height:o.height+"px"}),l.width=o.width,l.height=o.height,a.fadeIn(i.getTransitionSpeed(),(function(){i.displayedImage&&i.displayedImage.remove();var e=a.parent();i.displayedImage=e&&e.length?a:null,i.loadingImage=null}))},c.css(this.imageCover||!this.border?{border:"none"}:this.border),e.append(a),this.loadingImage=a;var u=o()('<div class="wb-picture-caption" style="display: none;"/>');this.captionBackground&&u.css("background-color",this.captionBackground),this.fillCaptionContainer(u,n,!0)&&("always"===this.showPictureCaption?(u.fadeIn(this.getTransitionSpeed()),e.append(u),a.data("caption",u)):(e.append(u),a.data("caption",u),u.css({display:"block",opacity:0}),e.hover((function(){u.css("opacity","1")}),(function(){u.css("opacity","0")})))),l.src=(0,s.urlEncode)(n.src,!0,!0),r||this.initImageLightBox(c,this.imageIndex),"function"==typeof this.onImageDisplayed&&this.onImageDisplayed(l.src)}},e.prototype.slideshowNext=function(e){0!==this.images.length&&this.listImgCont&&!this.lightBoxDisplayed&&(this.imageIndex++,this.imageIndex>=this.images.length&&(this.imageIndex=0),this.displayImage(this.listImgCont,e))},e.prototype.slideshowPrev=function(){0!==this.images.length&&this.listImgCont&&(this.imageIndex--,this.imageIndex<0&&(this.imageIndex=this.images.length-1),this.displayImage(this.listImgCont))},e.prototype.addImage=function(e,t,i,n){var r=this;void 0===n&&(n=!1);var a="thumbs"===this.type||"masonry"===this.type,l=a&&t.link?t.link:void 0,c=(l?o()("<a>"):o()("<div>")).addClass("wb_thumb");l&&(c.attr("href",l.url),l.target&&c.attr("target",l.target)),t.title&&c.attr("title",t.title);var u=this.getThumbWidth(),d=this.getThumbHeight(),h=o()("<div/>");h.css({zIndex:"1",width:u+"px",overflow:"hidden",boxSizing:"content-box",position:"relative"}),"masonry"!==this.type&&h.css("height",d+"px");var p=this.getBorder();a&&p&&h.css(p),c.append(h),c.data("image",t);var m=o()('<img src="" alt="" />'),g=m.get(0);if(g.onload=function(){var e,t=g.width,i=g.height;if("masonry"===r.type)e=t/u;else{var n=t/u,o=i/d;e=Math.min(n,o)}t/=e,i/=e;var s=Math.round((u-t)/2),a="masonry"===r.type?0:Math.round((d-i)/2);m.css({left:s+"px",top:a+"px",width:t+"px",height:i+"px"}),setTimeout((function(){return r.onImageLoad()}),100)},g.src=(0,s.urlEncode)(t.thumb||t.src,!0,!0),m.css({display:"block",zIndex:"1",maxWidth:"auto",position:"relative"}),h.append(m),a&&this.getThumbWidth()>=100){var f=o()('<div class="wb-picture-caption"/>');this.captionBackground&&f.css("background-color",this.captionBackground),this.fillCaptionContainer(f,t,!1)&&(h.append(f),"hover"===this.showPictureCaption&&(f.css({opacity:0,transition:"opacity "+(this.slideshowSpeed/1e3).toFixed(3)+"s linear"}),c.hover((function(){f.css("opacity","1")}),(function(){f.css("opacity","0")}))))}return e.append(c),n||l||this.initImageLightBox(m,i),{img:m,wrp:h}},e.prototype.fillCaptionContainer=function(e,t,i,n){void 0===n&&(n=!1);var s=!1;if(""!==t.title){s=!0;var r=o()('<h3 class="wb-lightbox-title">').append(n&&t.link?o()("<a>").attr({href:t.link.url,target:t.link.target}).text(t.title):document.createTextNode(t.title));this.captionTitleStyle&&r.css(this.captionTitleStyle),e.append(r)}if(i&&""!==t.description){s=!0;var a=o()('<div class="wb-lightbox-description">').text(t.description);this.captionDescriptionStyle&&a.css(this.captionDescriptionStyle),e.append(a)}return s},e.prototype.updateImageMeta=function(e){for(var t=0,i=this.images;t<i.length;t++){var n=i[t];if(n.src===e.src){o().extend(!0,n,e),this.onMetaChange();break}}},e.prototype.renderMeta=function(e,t,i,n){var s;return n&&n.length?(n.empty(),s=!1):(n=o()('<div class="wb-picture-caption"/>'),s=!0),this.captionBackground&&n.css("background-color",this.captionBackground),this.fillCaptionContainer(n,e,t)?(s&&(n.css("opacity",0),i.append(n),n.css("opacity",1)),n):(s||n.detach(),null)},e.prototype.onMetaChange=function(){var e=this;this.metaUpdateTimeout||(this.metaUpdateTimeout=requestAnimationFrame((function(){if(e.metaUpdateTimeout=0,"map"===e.type)e.renderMap();else if("thumbs"===e.type||"masonry"===e.type){if(e.getThumbWidth()>=100){var t=e;e.elem.find(".wb_thumb").each((function(){var e=o()(this),i=e.data("image");i&&(e.attr("title",i.title||""),t.renderMeta(i,!1,e.children().first(),o()(".wb-picture-caption",e)))}))}}else{var i=function(t,i){var n=t.parent();if(n&&n.length){var o=t.data("image");if(o){t.attr("title",o.title||"");var s=t.data("caption"),r=e.renderMeta(o,!0,n,s);if(t.data("caption",r),r&&!s){r.addClass("wb-no-transition");var a=parseFloat(getComputedStyle(t[0]).opacity);a<1&&(r.css("opacity",a),i?r.fadeTo(Math.floor((1-a)*e.getTransitionSpeed()),1):r.fadeOut(Math.floor(a*e.getTransitionSpeed()),(function(){return null==r?void 0:r.remove()})))}}}};e.displayedImage&&i(e.displayedImage,!1),e.loadingImage&&i(e.loadingImage,!0),"list"===e.type&&o()(".wb_thumb",e.elem).each((function(){var e=o()(this),t=e.data("image");e.attr("title",t.title||"")}))}})))},e.prototype.constructImagesArray=function(){for(var e=[],t=0,i=this.images;t<i.length;t++){var n=i[t];e.push({src:n.src,w:n.width,h:n.height,msrc:null,title:"string"==typeof n.title&&n.title.length>0?n.title:" ",link:n.link?n.link:void 0,description:n.description?n.description:""})}return e},e.prototype.initImageLightBox=function(t,i){var n,s=this,r=e.lightBoxInited;if(e.lightBoxInited=!0,this.initialRender&&(n=this.parseHash(),i=n.pid?parseInt(n.pid):i),"slideshow"!==this.type&&"list"!==this.type||!this.disablePopup){var a,l=o()("body > .pswp");if(!r&&this.initialRender&&n&&n.pid)this.lightBoxDisplayed=!0,a=this.constructImagesArray(),this.lightBox=new PhotoSwipe(l.get(0),PhotoSwipeUI_Default,a,{index:i,addCaptionHTMLFn:function(e,t){var i=o()(t.children[0]);return i.empty(),s.fillCaptionContainer(i,e,!0,!0)},history:!0}),this.lightBox.init(),this.lightBox.listen("destroy",(function(){s.lightBoxDisplayed=!1})),this.initialRender=!1;t.css({cursor:"pointer"}).on("click touchstart touchend touchmove",(function(e){var t,n=o()(e.currentTarget);("touchstart"===e.type?n.data("pswpDisabled",!1):"touchmove"===e.type&&n.data("pswpDisabled",!0),"click"!==e.type&&"touchend"!==e.type||n.data("pswpDisabled"))||(s.lightBoxDisplayed=!0,t=s.constructImagesArray(),s.lightBox=new PhotoSwipe(l.get(0),PhotoSwipeUI_Default,t,{index:i,addCaptionHTMLFn:function(e,t){var i=o()(t.children[0]);return i.empty(),s.fillCaptionContainer(i,e,!0,!0)},history:!0}),s.lightBox.init(),s.lightBox.listen("destroy",(function(){s.lightBoxDisplayed=!1})),l.attr("id",s.id+"_pswp"))}))}},e.prototype.getImages=function(){return l([],this.images,!0)},e.prototype.setImages=function(e){this.images=l([],e,!0),this.invalidate()},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e,this.invalidate()},e.prototype.getSlideshowInterval=function(){return this.slideshowInterval},e.prototype.getSlideshowSpeed=function(){return this.slideshowSpeed},e.prototype.setSlideshowSpeed=function(e){this.slideshowSpeed=e},e.prototype.getTransitionSpeed=function(){return this.slideshowInterval>0?Math.min(Math.max(0,1e3*this.slideshowInterval-100),this.slideshowSpeed):0},e.prototype.getBgColor=function(){return this.bgColor},e.prototype.setBgColor=function(e){this.bgColor=e,this.elem.css("background-color",this.bgColor)},e.prototype.getCaptionBackground=function(){return this.captionBackground},e.prototype.setCaptionBackground=function(e){this.captionBackground=e,this.captionBackground&&this.elem.find(".wb-picture-caption").css("background-color",e)},e.prototype.getCaptionTitleStyle=function(){return this.captionTitleStyle},e.prototype.setCaptionTitleStyle=function(e){this.captionTitleStyle=e,this.elem.find(".wb-lightbox-title").css(e)},e.prototype.getCaptionDescriptionStyle=function(){return this.captionDescriptionStyle},e.prototype.setCaptionDescriptionStyle=function(e){this.captionDescriptionStyle=e,this.elem.find(".wb-lightbox-description").css(e)},e.prototype.setFrequency=function(e){e>=0&&e<=10&&(this.slideshowInterval=e,this.reset())},e.prototype.getFrequency=function(){return this.slideshowInterval},e.prototype.getBorder=function(){return this.border},e.prototype.setBorder=function(e){this.border=e,this.elem.find(".gallery-image").css(this.imageCover||!this.border?{border:"none"}:this.border),this.invalidate()},e.prototype.getPadding=function(){return this.padding},e.prototype.getThumbWidth=function(){return this.thumbWidth?this.thumbWidth:290},e.prototype.getThumbHeight=function(){return this.thumbHeight?this.thumbHeight:290},e.prototype.getThumbAlign=function(){return this.thumbAlign},e.prototype.getThumbPadding=function(){return this.thumbPadding},e.prototype.setPadding=function(e){this.padding=e,this.invalidate()},e.prototype.setThumbWidth=function(e){this.thumbWidth=e,this.invalidate()},e.prototype.setThumbHeight=function(e){this.thumbHeight=e,this.invalidate()},e.prototype.setThumbAlign=function(e){this.thumbAlign=e,this.invalidate()},e.prototype.setThumbPadding=function(e){this.thumbPadding=e,this.invalidate()},e.prototype.getThumbAnim=function(){return this.thumbAnim},e.prototype.setThumbAnim=function(e){e&&"_preview"in e&&e._preview&&delete e._preview,this.thumbAnim=e,this.invalidate()},e.prototype.setImageCover=function(e){this.imageCover=e,this.invalidate()},e.prototype.setDisablePopup=function(e){this.disablePopup=e,this.invalidate()},e.prototype.setHideArrows=function(e){if(this.hideArrows=e,"slideshow"===this.type){var t=this.elem.find(".gallery-slide-left"),i=this.elem.find(".gallery-slide-right");e?(t.css("display","none"),i.css("display","none")):(t.css("display",""),i.css("display",""))}},e.prototype.setSlideOpacity=function(e){this.slideOpacity=e,"slideshow"===this.type&&this.listImgCont&&this.listImgCont.css("opacity",this.slideOpacity/100)},e.prototype.getImageCover=function(){return this.imageCover},e.prototype.getDisablePopup=function(){return this.disablePopup},e.prototype.getHideArrows=function(){return this.hideArrows},e.prototype.getSlideOpacity=function(){return this.slideOpacity},e.prototype.setShowPictureCaption=function(e){this.showPictureCaption=e,this.invalidate()},e.prototype.getShowPictureCaption=function(){return this.showPictureCaption},e.prototype.getMapTypeId=function(){return this.mapTypeId},e.prototype.setMapTypeId=function(e){this.mapTypeId=e,this.invalidate()},e.prototype.getMarkerIconTypeId=function(){return this.markerIconTypeId},e.prototype.setMarkerIconTypeId=function(e){this.markerIconTypeId=e,this.invalidate()},e.prototype.getZoom=function(){return this.zoom},e.prototype.setZoom=function(e){this.zoom=e,this.invalidate()},e.prototype.getMapCenter=function(){return this.mapCenter},e.prototype.setMapCenter=function(e){this.mapCenter=e,this.invalidate()},e.prototype.getKey=function(){return this.key},e.prototype.setKey=function(e){this.key=e,this.invalidate()},e.prototype.getTheme=function(){return this.theme},e.prototype.setTheme=function(e){this.theme=e,this.invalidate()},e.prototype.getColor=function(){return this.color},e.prototype.setColor=function(e){this.color=e,this.invalidate()},e.prototype.getShowSatellite=function(){return this.showSatellite},e.prototype.setShowSatellite=function(e){this.showSatellite=e,this.invalidate()},e.prototype.getShowZoom=function(){return this.showZoom},e.prototype.setShowZoom=function(e){this.showZoom=e,this.invalidate()},e.prototype.getShowStreetView=function(){return this.showStreetView},e.prototype.setShowStreetView=function(e){this.showStreetView=e,this.invalidate()},e.prototype.getShowFullscreen=function(){return this.showFullscreen},e.prototype.setShowFullscreen=function(e){this.showFullscreen=e,this.invalidate()},e.prototype.getAllowDragging=function(){return this.allowDragging},e.prototype.setAllowDragging=function(e){this.allowDragging=e,this.invalidate()},e.prototype.getShowRoads=function(){return this.showRoads},e.prototype.setShowRoads=function(e){this.showRoads=e,this.invalidate()},e.prototype.getShowLandmarks=function(){return this.showLandmarks},e.prototype.setShowLandmarks=function(e){this.showLandmarks=e,this.invalidate()},e.prototype.getShowLabels=function(){return this.showLabels},e.prototype.setShowLabels=function(e){this.showLabels=e,this.invalidate()},e.lightBoxInited=!1,e.galleryLibList=[],e}()},"./GalleryPictureManager.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GalleryPictureManager:function(){return y},GalleryPictureManagerType:function(){return f}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./Service.ts"),a=i("./VerticalLayout.ts"),l=i("./CustomContainer.ts"),c=i("./HorizontalLayout.ts"),u=i("./Label.ts"),d=i("./PointerTracker.ts"),h=i("./lib/jquery-1.11.3.min.js"),p=i.n(h),m=i("./ui/GoogleMapsPlacesControl.ts"),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=function(e){function t(){var i=e.call(this,"%inherit%")||this;return i.images=[],i.mediaDialog=null,i.selectedImage=null,i.timestamp=0,i.fullyInitialized=!1,i.metaChangeEventHandler=i.onMetaChange.bind(i),i.setMediaLibraryOptions(t.defaultMediaLibraryOptions),i.updateTimestamp(),i}return g(t,e),t.prototype.updateTimestamp=function(){this.timestamp=(new Date).getTime()},t.prototype.setMediaLibraryOptions=function(e){this.mediaLibraryOptions=e},t.prototype.setVisible=function(t,i,n){var o=this;e.prototype.setVisible.call(this,t,i,n),this.updateTimestamp(),t&&!this.fullyInitialized&&(this.fullyInitialized=!0,this.fields.imageDescription.setHeight(166),this.fields.imageTitle.on("change",this.metaChangeEventHandler),this.fields.imageDescription.on("change",this.metaChangeEventHandler)),t&&setTimeout((function(){return o.setSelection(o.fields.images.getElem().find(".thumb-li:not(.no-dd)").eq(0).data("image"))}),250),null===this.selectedImage&&this.clearSelection()},t.prototype.init=function(){var t=this;e.prototype.__construct.call(this,"",!1),this.thumb=p()('<li class="thumb-li active-or-hover-visible-parent"><div class="wb-touch-handle-placeholder"><div class="wb-touch-handle"><i class="fa fa-bars" style="color: #FFF;"></i></div><a href="javascript:void(0)" class="btn btn-default btn-xs active-or-hover-visible"><i class="glyphicon glyphicon-remove"></i></a><a href="javascript:void(0)" class="thumbnail"><img src="" alt="" /></a></div><span class="wb_thumb_name"></span></li>'),this.setSizeClass("modal-lg"),this.setTitle(__("Gallery picture manager"));var i=this;this.setContent(new r.Service.UIBuilder({type:a.VerticalLayout,children:[{type:c.HorizontalLayout,columnWeights:[8,4],columnWeightsSmall:[8,4],children:[{type:a.VerticalLayout,children:[{type:l.CustomContainer,css:{marginTop:-10,"font-size":"12px"},content:'<i class="fa fa-info-circle"></i> '+__("Use Drag and Drop to reorder pictures")},{type:l.CustomContainer,id:"images",tag:"ul",styleClass:"thumbnails wb_media_library",css:{marginTop:"15px","overflow-y":"auto"},attr:{id:"wb_picture_manager_thumbs"},init:function(){var e=this.getElem();e.on("click touchend",".thumb-li:not(.no-dd) .btn",(function(e){var t=p()(this).closest(".thumb-li").data("image"),n=i.images.indexOf(t);n>=0&&(i.images.splice(n,1),t===i.selectedImage&&i.clearSelection(),i.render(),e.stopImmediatePropagation(),e.preventDefault())})).on("click touchend",".thumb-li:not(.no-dd)",(function(){i.setSelection(p()(this).data("image"))})),e.droppable({accept:".thumb-li"})}}]},{type:a.VerticalLayout,children:[{type:u.Label,text:__("Title")},{type:"MultilangTextField",id:"imageTitle"},{type:u.Label,text:__("Link"),css:{marginTop:15}},{type:"LinkSelector",id:"imageLink",multilang:!0,change:this.metaChangeEventHandler},{type:"Label",text:__("Address"),helpText:__("The same as in Google Maps")},{type:m.GoogleMapsPlacesControl,id:"imageAddress",placeholder:"Liberty Island, New York, NY 10004",change:this.metaChangeEventHandler},{type:u.Label,text:__("Description"),css:{marginTop:15}},{type:"MultilangTextField",id:"imageDescription",textArea:!0,height:166}]}]}]},this.fields),!0),this.setOnClose((function(){"function"==typeof t.closeCallback&&t.closeCallback()})),this.addButton(__("Add pictures"),(function(){t.openMediaLibrary()}),!1,"pull-left btn-success"),this.addButton(__("Close")),this.addButton(__("Apply"),(function(){t.applyCallback&&t.applyCallback()}),!0),this.clearSelection()},t.prototype.onMetaChange=function(){null!==this.selectedImage&&r.Service.mediaLibrary.setPathMeta(this.selectedImage,{title:this.fields.imageTitle.getValue(),link:this.fields.imageLink.getValue(),description:this.fields.imageDescription.getValue(),address:this.fields.imageAddress.getValue()})},t.prototype.openMediaLibrary=function(){var e=this;this.mediaDialog=r.Service.mediaLibrary.open(__("Add pictures"),!0,"image",!!this.mediaLibraryOptions.showMediaTabs,!1,this.mediaLibraryOptions.customContentCallback),this.mediaDialog.addButton(__("Close")),this.mediaDialog.addButton(__("Apply"),(function(){if(e.mediaDialog){e.updateTimestamp();var t=e.mediaDialog.getSelectedFiles();e.mediaDialog.hide();for(var i=0,n=t;i<n.length;i++){var o=n[i];e.images.indexOf(o)<0&&e.images.push(o)}e.render()}}),!0),this.mediaDialog.clearFileSelection(),this.mediaDialog.setVisible(!0)},t.prototype.render=function(){for(var e,t=this,i=[],n=0,o=this.images;n<o.length;n++){var s=o[n];(e=this.thumb.clone()).find(".thumbnail img").attr("src",s);var r=s.split("/"),a=r[r.length-1],l=a.replace(/-ts\d+/gi,""),c=s,u=c.split("."),h=u.length>1?u[u.length-1]:"";"swf"===h?c=wb_builder.modBaseUrl+"img/file_flash.png":"mp3,aac,wav".indexOf(h)>=0?c=wb_builder.modBaseUrl+"img/file_audio.png":"pdf"===h?c=wb_builder.modBaseUrl+"img/file_pdf.png":"docx,doc,xls,xlsx,rtf,ppt,pptx,odt".indexOf(h)>=0?c=wb_builder.modBaseUrl+"img/file_doc.png":"rar"===h?c=wb_builder.modBaseUrl+"img/file_rar.png":"zip"===h?c=wb_builder.modBaseUrl+"img/file_zip.png":"mp4,mpeg,avi,flv,mkv,mov".indexOf(h)>=0?c=wb_builder.modBaseUrl+"img/file_video.png":"psd,csv,html,xml,yml,txt".indexOf(h)>=0?c=wb_builder.modBaseUrl+"img/file_doc.png":(/^gallery\//.test(c)&&!/^gallery\/thumbs\//.test(c)&&(c="gallery/thumbs/"+c.substring(8)),/^https?:/i.test(c)||(c=wb_builder.userBaseUrl+c)),e.data("image",s),p()("img",e).attr("src",c+"?ts="+this.timestamp),p()("a.thumbnail",e).attr("title",l),p()("span",e).text(a),i.push(e)}var m=__("Add New");(e=this.thumb.clone()).on("click",(function(e){t.openMediaLibrary()})),e.addClass("no-dd"),p()("a.thumbnail",e).attr({title:m}).append('<span class="empty"><i class="glyphicon glyphicon-plus"></i><span class="name"></span></span>'),p()(".wb-touch-handle-placeholder",e).removeClass("wb-touch-handle-placeholder"),p()(".wb-touch-handle",e).remove(),p()(".btn",e).remove(),p()("span.name",e).text(m),i.push(e),this.fields.images.setContent(i);var g=this,f=g.fields.images.getElem(),y=[wb_builder.isTouchDevice?110:80,86];if(wb_builder.isTouchDevice&&(f.addClass("wb-touch-enabled"),!this.touchTracker)){var b=function(e,t,i){var n=i.data.elem[0],o={draggable:i.data.elem,helper:i.data.helper,position:{left:i.data.pos.left+i.positionDelta.x,top:i.data.pos.top+i.positionDelta.y},offset:{left:i.data.offs.left+i.positionDelta.x,top:i.data.offs.top+i.positionDelta.y}};if("function"==typeof t){var s={type:e,target:n,clientX:i.position.clientX,clientY:i.position.clientY,pageX:i.position.pageX,pageY:i.position.pageY,stopPropagation:function(){},preventDefault:function(){}};t.call(n,s,o)}return i.data.helper.css({left:Math.round(o.position.left),top:Math.round(o.position.top)}),o};this.touchTracker=new d.PointerTracker(f,{trackTouches:!0,trackMouse:!1,preventDefaults:!0,allowMultiplePointers:!1,onPointerStart:function(e){if(!e.initialTarget)return!1;var t=p()(e.initialTarget).closest(".wb-touch-handle");if(!t.length)return!1;var i=t.closest(".ui-draggable");return e.data={draggableOptions:i.data("draggable").options,elem:i,helper:i.clone(),pos:i.position(),offs:i.offset()},!0},onDragStart:function(e){e.data&&e.data.draggableOptions&&(f.append(e.data.helper),e.data.helper.css({position:"absolute","z-index":1e3}),e.data.helper.addClass("ui-draggable-dragging"),"function"==typeof e.data.draggableOptions.start&&b("dragstart",e.data.draggableOptions.start,e))},onDragMove:function(e){e.data&&e.data.draggableOptions&&"function"==typeof e.data.draggableOptions.drag&&b("drag",e.data.draggableOptions.drag,e)},onDragEnd:function(e){e.data&&e.data.draggableOptions&&(e.data.helper.removeClass("ui-draggable-dragging"),"function"==typeof e.data.draggableOptions.stop&&b("dragstop",e.data.draggableOptions.stop,e),e.data.helper.remove())}})}for(var v=0,_=i;v<_.length;v++)(e=_[v]).is(".no-dd")||e.draggable({helper:"clone",revert:!1,start:function(e,t){t.helper.removeClass("active").css("opacity",.5).find(".btn").remove(),p()(this).css("visibility","hidden").addClass("ui-draggable-helper")},stop:function(){var e=p()(this);e.css("visibility","").removeClass("ui-draggable-helper");var t=e.data("image"),i=g.images.indexOf(t);if(i>=0){g.images.splice(i,1);var n=e.data("newIdx");g.images.splice(n,0,t)}},drag:function(e,t){var i=f.offset(),n=t.offset.left-i.left,o=t.offset.top-i.top+f[0].scrollTop,s=Math.floor(f[0].scrollWidth/y[0]),r=Math.ceil(g.images.length/s),a=Math.min(Math.max(Math.floor((n+y[0]/2)/y[0]),0),s-1),l=Math.min(Math.max(Math.floor((o+y[1]/2)/y[1]),0),r-1),c=Math.max(Math.min(a+l*s,g.images.length-1),0),u=p()(this);u.data("newIdx",c);var d=f.children(":not(.ui-draggable-helper)").eq(c);d.length?d.before(u):f.append(u)}});this.setSelection(this.selectedImage)},t.prototype.setValue=function(e){this.images=[];for(var t=0,i=e;t<i.length;t++){var n=i[t];this.images.push(n)}this.render()},t.prototype.getValue=function(){return this.images},t.prototype.setApplyCallback=function(e){this.applyCallback=e},t.prototype.setCloseCallback=function(e){this.closeCallback=e},t.prototype.clearSelection=function(){this.setSelection(this.images.length>0?this.images[0]:null)},t.prototype.setSelection=function(e){p()(":focus").blur(),this.selectedImage=null,this.fields.imageTitle.setValue(""),this.fields.imageTitle.setEnabled(!1),this.fields.imageLink.setValue(null),this.fields.imageLink.setEnabled(!1),this.fields.imageDescription.setValue(""),this.fields.imageDescription.setEnabled(!1),this.fields.imageAddress.setValue(null),this.fields.imageAddress.setEnabled(!1);var t=this.fields.images.getElem().find(".thumb-li.ui-draggable"),i=this;t.each((function(){var t=p()(this);t.data("image")==e?t.addClass("active"):t.removeClass("active")})),i.selectedImage=e,i.selectedImage&&r.Service.mediaLibrary.getPathMeta(i.selectedImage,function(e){this===i.selectedImage&&(i.fields.imageTitle.setEnabled(!0),i.fields.imageTitle.setValue(e.title),i.fields.imageLink.setEnabled(!0),i.fields.imageLink.setValue(e.link),i.fields.imageDescription.setEnabled(!0),i.fields.imageDescription.setValue(e.description),i.fields.imageAddress.setEnabled(!0),i.fields.imageAddress.setValue(e.address),i.fields.imageTitle.focus())}.bind(i.selectedImage))},t.defaultMediaLibraryOptions={showMediaTabs:!0,customContentCallback:null},t}(s()),y=new f;r.Service.GalleryPictureManager=y},"./GoogleMapsApi.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GoogleMapsApi:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./core/BuilderConfig.ts"),r=function(){function e(){}return e.loadGoogleMapsApi=function(t){if(void 0===t&&(t=[]),e.callbacks=e.callbacks.concat(t),e.scriptLoaded)e.callbacksCalled&&e.mapsLoaded();else{e.scriptLoaded=!0,window.GoogleMapsApi_clb_fn=e.mapsLoaded;var i,n=void 0,r=s.wbConfig.locale?s.wbConfig.locale:null;wb_builder.site.currSelLang&&(n=s.wbConfig.getLanguageByCode(wb_builder.site.currSelLang))&&(r=n.locale),i=r&&r.indexOf("_")>=0?r.split("_")[1].toUpperCase():null,o().getScript(s.wbConfig.httpProtocol+"://maps.googleapis.com/maps/api/js?v=3.exp&key="+wb_builder.mapsConfig.googleMapsApiKey+"&sensor=false"+(i?"&region="+i+"&language="+r:"")+"&callback=GoogleMapsApi_clb_fn&libraries=places")}},e.mapsLoaded=function(){for(var t in e.callbacksCalled=!0,e.callbacks)"function"==typeof e.callbacks[t]&&(e.callbacks[t](),delete e.callbacks[t])},e.scriptLoaded=!1,e.callbacksCalled=!1,e.callbacks=[],e}()},"./GridAndGuidesDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GridAndGuidesDialog:function(){return h}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./VerticalLayout.ts"),a=i("./Service.ts"),l=i("./HorizontalLayout.ts"),c=i("./SizeSelector.ts"),u=i("./ColorPicker.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(){var t=e.call(this,"",!1)||this;return t.setTitleVisible(!0),t.setFooterVisible(!0),t.setSize(500,null),t.setTitle(__("Grid and guides")),t.setContent(new a.Service.UIBuilder({type:r.VerticalLayout,children:[{type:l.HorizontalLayout,css:{marginTop:-15},children:[{type:r.VerticalLayout,css:{marginTop:15},children:[{type:"Label",text:__("Snapping")},{type:"CheckBox",label:__("Snap to grid"),id:"snapToGrid"},{type:"CheckBox",label:__("Snap to objects"),id:"snapToObjects"}]},{type:r.VerticalLayout,css:{marginTop:15},children:[{type:"Label",text:__("Display")},{type:"CheckBox",label:__("Show distances"),id:"showHelpers"},{type:"CheckBox",label:__("Show grid"),id:"showGrid"},{type:"CheckBox",label:__("Show layout"),id:"showLayout"}]}]},{type:l.HorizontalLayout,children:[{type:r.VerticalLayout,css:{marginTop:15},children:[{type:"Label",text:__("Grid size")},{type:c.SizeSelector,id:"gridSize",min:5,max:100}]},{type:r.VerticalLayout,css:{marginTop:15},children:[{type:"Label",text:__("Grid color")},{type:u.ColorPicker,id:"gridColor"}]}]}]},t.fields),!0),t.addButton(__("Cancel"),(function(){t.setVisible(!1)}),!1),t.addButton(__("Apply"),(function(){t.saveFields()&&t.setVisible(!1)}),!0),t}return d(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.open=function(){var e=t.getInstance();e.updateFields(),e.setVisible(!0)},t.prototype.saveFields=function(){var e=wb_builder.bodyInstance.grid;return e.setVisible(this.fields.showGrid.getValue()),e.setSize(this.fields.gridSize.getValue()),e.setColor(this.fields.gridColor.getValue()),wb_builder.setCookie("wb_showgrid",(e.isVisible()?"Y":"N")+"/"+e.getSize()+"/"+e.getColor()),wb_builder.showMeasurementHelpers=this.fields.showHelpers.getValue(),wb_builder.setCookie("wb_showhelpers",wb_builder.showMeasurementHelpers?"Y":"N"),wb_builder.showLayout=this.fields.showLayout.getValue(),wb_builder.setCookie("wb_showlayout",wb_builder.showLayout?"Y":"N"),wb_builder.snapToGrid=this.fields.snapToGrid.getValue(),wb_builder.setCookie("wb_snapgrid",wb_builder.snapToGrid?"Y":"N"),wb_builder.snapToObjects=this.fields.snapToObjects.getValue(),wb_builder.setCookie("wb_snapobjects",wb_builder.snapToObjects?"Y":"N"),!0},t.prototype.updateFields=function(){var e=wb_builder.bodyInstance.grid;this.fields.showGrid.setValue(e.isVisible()),this.fields.showHelpers.setValue(wb_builder.showMeasurementHelpers),this.fields.showLayout.setValue(wb_builder.showLayout),this.fields.snapToGrid.setValue(wb_builder.snapToGrid),this.fields.snapToObjects.setValue(wb_builder.snapToObjects),this.fields.gridSize.setValue(e.getSize()),this.fields.gridColor.setValue(e.getColor())},t}(s())},"./HAlignSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HAlignSelector:function(){return c}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l={left:'<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect width="9" height="2" fill="#212529"/>\n\t\t\t<rect y="4" width="15" height="2" fill="#212529"/>\n\t\t\t<rect y="8" width="12" height="2" fill="#212529"/>\n\t\t\t<rect y="12" width="16" height="2" fill="#212529"/>\n\t\t</svg>',center:'<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect x="4" width="9" height="2" fill="#212529"/>\n\t\t\t<rect x="1" y="4" width="15" height="2" fill="#212529"/>\n\t\t\t<rect x="2" y="8" width="12" height="2" fill="#212529"/>\n\t\t\t<rect y="12" width="16" height="2" fill="#212529"/>\n\t\t</svg>',right:'<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect x="7" width="9" height="2" fill="#212529"/>\n\t\t\t<rect x="1" y="4" width="15" height="2" fill="#212529"/>\n\t\t\t<rect x="4" y="8" width="12" height="2" fill="#212529"/>\n\t\t\t<rect y="12" width="16" height="2" fill="#212529"/>\n\t\t</svg>',justify:'<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect width="16" height="2" fill="#212529"/>\n\t\t\t<rect y="4" width="16" height="2" fill="#212529"/>\n\t\t\t<rect y="8" width="16" height="2" fill="#212529"/>\n\t\t\t<rect y="12" width="16" height="2" fill="#212529"/>\n\t\t</svg>'},c=function(e){function t(t){void 0===t&&(t=!1);var i=e.call(this)||this;i.align="",i.justifyEnabled=!0,i.buttons={},i._elem.addClass("wb-halign-control"),i.buttonsContainer=r()('<div class="btn-group" />'),i._elem.append(i.buttonsContainer);for(var n=function(e){var t;o.buttons[e]=(t=l[e],r()("<button>").addClass("btn btn-default").append(t)).on("click",(function(){i.handleChange(e),i._elem.trigger("change"),i.onValueChanged()})).appendTo(o.buttonsContainer)},o=this,s=0,a=["left","center","right","justify"];s<a.length;s++)n(a[s]);return i.setJustifyEnabled(t),i.setValue("left"),i}return a(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"justify"in e&&this.setJustifyEnabled(!!e.justify),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.on("change",(function(){n.call(i,t)})))},t.prototype.setEnabled=function(e){for(var t in this._enabled=!!e,this.buttons)this._enabled?this.buttons[t].removeAttr("disabled"):this.buttons[t].attr("disabled","disabled")},t.prototype.handleChange=function(e){if(e in this.buttons&&("justify"!==e||this.justifyEnabled)){for(var t in this.buttons)t==e?this.buttons[t].addClass("active"):this.buttons[t].removeClass("active");this.align=e}},t.prototype.setJustifyEnabled=function(e){this.justifyEnabled!=e&&(this.justifyEnabled=e,e?this.buttons.justify.appendTo(this.buttonsContainer):this.buttons.justify.detach())},t.prototype.getValue=function(){return this.align},t.prototype.setValue=function(e){this.handleChange(e)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"justify"in t&&this.setJustifyEnabled(!!t.justify)},t}(o.UIComponent)},"./HelpSystem/AnimTween.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{AnimTween:function(){return n}});var n=function(){function e(e,t,i,n,o,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=null),this.onStep=i,this.onStart=n,this.onEnd=o,this.onDispose=s,this.currKeyframe=0,this.timeHandle=0,this.keyframeLen=Math.round(1e3/t),this.numKeyframes=Math.ceil(e/this.keyframeLen)}return e.prototype.start=function(){var e=this;return this.timeHandle&&clearInterval(this.timeHandle),this.currKeyframe=0,this.onStart&&this.onStart.call(this,this),this.timeHandle=setInterval((function(){return e.step()}),this.keyframeLen),this},e.prototype.step=function(){this.onStep&&this.onStep.call(this,this),this.currKeyframe++,this.currKeyframe>=this.numKeyframes&&this.end()},e.prototype.end=function(e){void 0===e&&(e=!1),!e&&this.onEnd&&this.onEnd.call(this,this),this.timeHandle&&clearInterval(this.timeHandle),this.currKeyframe=0},e.prototype.dispose=function(){this.onDispose&&this.onDispose.call(this,this),this.end(!0)},e}()},"./HelpSystem/HelpOverlay.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HelpOverlay:function(){return E},handlePageLoad:function(){return R},init:function(){return O},isHelpAvailable:function(){return D},openHelp:function(){return x}});var n,o,s,r=i("./Service.ts"),a=i("./UserInput.ts"),l=i("./WB_Dialog.class.js"),c=i.n(l),u=i("./WidgetToolbar.js"),d=i.n(u),h=i("./HelpSystem/AnimTween.ts"),p=i("./HelpSystem/HelpOverlayTemplatesPanel.ts"),m=i("./UIComponent.ts"),g=i("./BuilderEvent.ts"),f=i("./DefaultUI/PluginToolbar.ts"),y=i("./lib/jquery-1.11.3.min.js"),b=i.n(y),v=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_={},C=null,w=null,T=null,E=(function(){function e(e,t,i,n,o){var s;void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!0),this.boundsFunc=e,this.element=t,this.isFixed=i,this.isGroup=n,this.isEnabled=o,this.isGroupOpen=!1,this.groupItems=[],this.bounds=this.boundsFunc(this.element),"getClassType"in this.element?this.scenarioId=this.element.getClassType():(s=this.element.getId().split("__"),this.scenarioId=s[1])}e.prototype.toggleGroup=function(){if(this.isGroup){this.isGroupOpen=!this.isGroupOpen,this.element.setOpen(this.isGroupOpen);for(var e=0,t=this.groupItems;e<t.length;e++){var i=t[e];i.isEnabled=this.isGroupOpen,i.isEnabled&&(i.bounds=i.boundsFunc(i.element))}}},e.prototype.addGroupItem=function(e){this.isGroup&&this.groupItems.push(e)},e.prototype.hitTest=function(e,t,i,n){if(!this.isEnabled)return!1;var o=this.isFixed?i:e,s=this.isFixed?n:t;return o>=this.bounds.left&&o<=this.bounds.left+this.bounds.width&&s>=this.bounds.top&&s<=this.bounds.top+this.bounds.height}}(),function(e){function t(t){var i=e.call(this)||this;return i.wbConfig=t,i.isClosable=!0,i.sections=[],i.selectedSection=null,i.widgetToolbar=null,i._isVisible=!1,i._elem.addClass("wb-hlp-overlay").append(i.buildInfoFeature().append((i.tplBlock=new p.HelpOverlayTemplatesPanel(i)).setVisible(!1).getElem())).on("mousemove",(function(e){return i.onMouseMove(e)})),i.marker=b()("<div>").addClass("wb-hlp-overlay-marker").on("click",(function(){return i.onSectionClick()})),i._elem.append(i.marker),i.closeBtn=b()("<div>").addClass("wb-hlp-overlay-close").html("&times;").on("click",(function(){return I()})),i._elem.append(i.closeBtn),b()(document.body).append(i._elem),i}return v(t,e),t.prototype.setClosable=function(e){this.isClosable=e,e?this.closeBtn.show():this.closeBtn.hide()},t.prototype.buildInfoFeature=function(){var e=b()("<div>").addClass("wb-hlp-overlay-info"),t=b()("<div>").addClass("wb-info-wrp").appendTo(e);return t.html("<br/>"+__("Click on element to start interactive help or press 'ESC' to close.")+"<br/>"),b()("<img>").addClass("wb-arrow-a").attr({src:"modules/builder/img/arrow.svg",alt:""}).prependTo(t),b()("<img>").addClass("wb-arrow-b").attr({src:"modules/builder/img/arrow.svg",alt:""}).appendTo(t),e},t.prototype.buildBigLink=function(e,t,i,n){var o=this;return b()("<div>").css({fontSize:"24px",marginTop:"30px",cursor:"pointer"}).append(b()("<span>").addClass(i).css({display:"inline-block",verticalAlign:"middle",marginRight:"10px",fontSize:"1.5em"})).append(b()("<span>").css({display:"inline-block",verticalAlign:"middle",textDecoration:"underline"}).text(t)).on("click",(function(){setTimeout((function(){o.setVisible(!1,!0)}),100),r.Service.HelpSystemPlayer.loadRemote(n,!1,(function(){o.setVisible(!0)}))})).appendTo(e)},t.prototype.onSectionClick=function(){var e=this;if(this.selectedSection)if(this.selectedSection.isGroup){for(var t=0,i=this.sections;t<i.length;t++){var n=i[t];n!==this.selectedSection&&n.isGroup&&n.isGroupOpen&&n.toggleGroup()}this.selectedSection.toggleGroup()}else{var o=this.selectedSection.scenarioId;setTimeout((function(){e.setVisible(!1,!0)}),100),r.Service.HelpSystemPlayer.loadRemote(o,!1,(function(){e.setVisible(!0)}))}},t.prototype.onMouseMove=function(e){if(this._isVisible){for(var t=!1,i=0,n=this.sections;i<n.length;i++){var o=n[i];if(o.hitTest(e.pageX,e.pageY,e.originalEvent.clientX,e.originalEvent.clientY)){this.selectedSection=o,this.marker.css({display:"block",left:o.bounds.left,top:o.bounds.top,width:o.bounds.width,height:o.bounds.height,position:o.isFixed?"fixed":"absolute"}),t=!0;break}}t||this.marker.css({display:"none"})}},t.prototype.indexSections=function(){this.widgetToolbar&&(this.widgetToolbar.elem.parent().remove(),this.widgetToolbar=null);var e=function(e){var t=[];e.id&&t.push(e.id),e.name&&t.push(e.name);for(var i=0,n=t;i<n.length;i++){var o=n[i];if(o in _)return o;if("Text"==o||o==__("Text")?o="TextArea":"Media"==o||o==__("Media")?o="Youtube":"Maps"==o||o==__("Maps")?o="GoogleMaps":o==__("Picture")?o="Picture":o==__("Gallery")?o="Gallery":o==__("Shape")?o="Shape":o==__("Line")?o="Line":o==__("Button")?o="Button":o==__("Form")?o="Form":o==__("Menu")?o="Menu":o==__("Languages")&&(o="Languages"),o in _)return o}return null},t=this,i=r.Service.uiManager.getManager();this.widgetToolbar=Object.create(d()).init((0,f.constructPluginToolbar)(r.Service.uiManager.getApiInstance(),(function(){}),{type:"item",isActive:function(t){return!!e(t)},click:function(){var i=e(this);i&&this.enabled&&(setTimeout((function(){t.setVisible(!1,!0)}),100),r.Service.HelpSystemPlayer.loadRemote(i,!1,(function(){t.setVisible(!0)})))},icon:function(e){return i.lookupUIIconClass("plugin",e)}}),"wb-help-overlay-widgets",!0),this.widgetToolbar&&b()("<div>").addClass("wb-help-overlay-widgets-wrp").append(b()("<div>").append(this.widgetToolbar.elem)).css({top:69,height:60}).appendTo(this._elem),this.sections=[]},t.prototype.setHeight=function(e){this._elem.css({height:e})},t.prototype.setTemplatesVisible=function(e,t){void 0===t&&(t=!0),e?(this.tplBlock.reload(t),this.tplBlock.setVisible(!0)):this.tplBlock.setVisible(!1)},t.prototype.setVisible=function(e,t){var i=this;if(void 0===t&&(t=!1),this._isVisible===e)return this;if(this._isVisible=e,this.marker.css({display:"none"}),t&&!e){var n,o=1;new h.AnimTween(600,24,(function(){o-=n,i._elem.css({opacity:o})}),(function(e){n=1/e.numKeyframes}),(function(e){i._elem.css({display:"none"}),e.dispose()})).start()}else this._elem.css({display:e?"block":"none",opacity:1});e&&this.widgetToolbar&&this.widgetToolbar.ajustSize();var s=new g.VisibilityChangedBuilderEvent(e);return g.GlobalEvents.triggerEvent(e?"help.show":"help.hide",s),this},t.prototype.runScenario=function(e){var t=this;e.id?this.wbConfig.testMode&&!this.isClosable?r.Service.templates.applyTemplate(e.id,(function(){r.Service.HelpSystemPlayer.loadRemote(".",!0,(function(){t.setVisible(!0)}))}),this):(this.setVisible(!1),r.Service.templates.applyTemplateWithDialog(e.id,(function(){r.Service.HelpSystemPlayer.loadRemote(".",!0,(function(){t.setVisible(!0)}))}),(function(){t.setVisible(!0)}),this)):e.scenarioId&&(setTimeout((function(){t.setVisible(!1,!0)}),100),r.Service.HelpSystemPlayer.loadRemote(e.scenarioId,!1,(function(){t.setVisible(!0)})))},t}(m.UIComponent));function I(){s.setVisible(!1)}function x(e){void 0===e&&(e=!0),w&&T&&D()&&(C&&"string"==typeof C?function(e,t,i,n){if(void 0===n&&(n=!1),n)window.open(e,"_blank");else{if(!o){(o=new(c())(__("Help"))).dialog.addClass("wb-help-dialog"),o.setSize(1024,null),o.setNoScroll();var s=b()("<iframe>").css({border:"none",width:"100%",height:400});s.attr("frameborder",0),e?s.attr("src",e):s.attr("src","//site.pro/help/?bare=1&lang="+i.locale),o.setContent(s),o.setAutoResize(!0,(function(e){return s.height(e-15)})),e||o.addButton(__("Download video tour"),(function(){location.href=i.baseUrl+"help-video/"}),!1,"btn-success").css({float:t.rtl?"right":"left"}),o.addButton(__("Close"))}o.setVisible(!0)}}(C,w,T,!0):function(e,t){void 0===t&&(t=!0),s||(s=new E(e),a.UserInput.addHotKey("Esc",(function(){return I()}))),s.indexSections(),s.setClosable(t),s.setTemplatesVisible(!0,t),s.setVisible(!0)}(T,e))}function S(){var e=b()("<div>").addClass("alert alert-warning").css({position:"fixed",right:0,bottom:20,zIndex:9999,padding:"4px 10px"}).text(__("Guide is temporary disabled")).appendTo(document.body);setTimeout((function(){return e.remove()}),5e3)}function k(e){if(void 0===e&&(e=!1),!location.hash)return!1;if(location.hash.match(/^#helpOverlay$/))e||S();else{if(!location.hash.match(/^#helpOverlayNone$/))return!1;e||S()}return!0}function D(){return!1!==C}function O(e,t){w=e,T=t,C=__trr(w.helpUrl),D()&&(b().getJSON(T.getUrl("scenario/list")).then((function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];_[n]=!0}}),(function(){return console.log("Error loading scenario list.")})),window.addEventListener("hashchange",(function(){k()}),!1),k(!0))}function R(){k()}},"./HelpSystem/HelpOverlayTemplatesPanel.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HelpOverlayTemplatesPanel:function(){return u}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./UIComponent.ts"),l=i("./UIContainer.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e){function t(t){var i=e.call(this)||this;return i.helpOverlay=t,i.itemCount=0,i.itemOffset=0,i.itemShowCount=6,i.leftBtn=new h("wb-hlp-tpl-list-left","fa fa-chevron-left",(function(){i.slide(-1)})),i.rightBtn=new h("wb-hlp-tpl-list-right","fa fa-chevron-right",(function(){i.slide(1)})),i.itemsWrap=(new l.UIContainer).addClass("wb-hlp-tpl-list-wrap"),i.itemsElem=(new l.UIContainer).addClass("wb-hlp-tpl-list-items").addChild(i.itemsWrap),i._elem.addClass("wb-hlp-tpl-list").append(i.leftBtn.getElem()).append(i.rightBtn.getElem()).append(i.itemsElem.getElem()),i}return c(t,e),t.prototype.slide=function(e){void 0===e&&(e=0),this.itemOffset-=e,this.itemOffset<this.itemShowCount-this.itemCount&&(this.itemOffset=this.itemShowCount-this.itemCount),this.itemOffset>0&&(this.itemOffset=0),this.itemsWrap.css({left:160*this.itemOffset+"px"}),this.rightBtn.setVisible(this.itemOffset>this.itemShowCount-this.itemCount),this.leftBtn.setVisible(this.itemOffset<0)},t.prototype.clear=function(){this.itemsWrap.removeAllChildren(),this.itemCount=0,this.itemOffset=0,this.slide(0)},t.prototype.addTemplate=function(e){this.itemsWrap.addChild(new d(e,this.helpOverlay)),this.itemCount++},t.prototype.reload=function(e){var t=this;void 0===e&&(e=!0),this.clear(),this.addTemplate({scenarioId:"introduction",icon:"fa fa-rocket",name:__("Basic Tutorial"),duration:"~1 "+__("min")}),e&&this.addTemplate({scenarioId:".",icon:"fa fa-cogs",name:__("See how template was made"),duration:"~5 "+__("min")}),r.Service.templates.getTemplates().done((function(e){if(e)for(var i=0,n=e;i<n.length;i++){var o=n[i];o.isPrivate||(o.duration="~5 "+__("min"),t.addTemplate(o))}t.slide(0)})).fail((function(){t.setVisible(!1)}))},t}(a.UIComponent),d=function(e){function t(t,i){var n=e.call(this)||this,o=s()("<div>").addClass("wb-hlp-tpl-list-item-icon");t.icon?o.append(s()("<span>").addClass(t.icon)):o.append(s()("<span>").addClass("fa fa-play-circle-o wb-hlp-tpl-list-item-play")).append(s()("<img>").attr({src:t.thumb,alt:t.name}));var r=s()("<span>").addClass("wb-hlp-tpl-list-item-name").text(t.name);return t.duration&&r.append(s()("<span>").addClass("wb-hlp-tpl-list-item-durr").text("("+t.duration+")")),n._elem.addClass("wb-hlp-tpl-list-item").append(o).append(r),n.on("click",(function(){i.runScenario(t)})),n}return c(t,e),t}(a.UIComponent),h=function(e){function t(t,i,n){var o=e.call(this,"span")||this;return o._elem.addClass(t).append(s()("<span>").addClass(i)),o.on("click touchstart",n),o}return c(t,e),t}(a.UIComponent)},"./HelpSystem/HelpSystemPlayer.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HelpSystemPlayer:function(){return E}});var n,o,s,r=i("./ElementRegister.ts"),a=i("./UserInput.ts"),l=i("./WB_Site.class.js"),c=i.n(l),u=i("./WB_Dialog.class.js"),d=i.n(u),h=i("./HelpSystem/Scenario.ts"),p=i("./HelpSystem/PlayerControls.ts"),m=i("./HelpSystem/Tooltip.ts"),g=i("./HelpSystem/PlayerCanvas.ts"),f=i("./HelpSystem/ScenarioBuilder.ts"),y=i("./HelpSystem/AnimTween.ts"),b=i("./HelpSystem/VirtualCursor.ts"),v=i("./Service.ts"),_=i("./lib/jquery-1.11.3.min.js"),C=i.n(_),w=i("./BuilderEvent.ts"),T=i("./PluginApi/UIManager.ts"),E=function(){function e(){var t=this;this.scenario=null,this.stepIndex=-1,this.selfTip=null,this.currentStepSubject=null,this.stepParams=[],this.forceList=[],this.forcingBounds=!1,this.audio=null,this.bgAudio=null,this.autoAdvance=!1,this.delayedAutoAdvance=this.autoAdvance,this.delayedTimer=0,this.performInProgress=!1,this.performStack=[],this.debug=!1,this.vDesktop=null,this.subjectMap={},this.currElemSubject=null,this.canvas=null,this.cursor=null,this.timerHandles={eventDelay:0,stepDelay:0,resizeTween:null,moveTween:null},this.hotkeysEnabled=!1,this.waitForAudio=!1,this.doneCallback=null,this.playToggleLock=!1,this.controls=p.PlayerControls.init((function(){t.playToggleLock||(t.playToggleLock=!0,setTimeout((function(){t.playToggleLock=!1}),300),t.delayedTimer||(t.delayedAutoAdvance=t.autoAdvance),t.delayedAutoAdvance?(t.delayedAutoAdvance=!1,t.controls.getFields().playBtn.getElem().attr({title:__("Play")}),t.controls.getFields().playBtn.setIcon("fa fa-play"),t.controls.getFields().nextBtn.setEnabled(!0)):(t.delayedAutoAdvance=!0,t.controls.getFields().nextBtn.setEnabled(!1),t.controls.getFields().playBtn.getElem().attr({title:__("Stop")}),t.controls.getFields().playBtn.setIcon("fa fa-pause")),t.delayedPlayPause())}),(function(){t.autoAdvance||t.performInProgress||t.perform(!1)}),(function(){t.end()}),(function(i,n){if(t.scenario){t.scenario.stepDelay=e.STEP_DELAY+Math.round(e.STEP_DELAY*(6-i)*.6);var o=.5*(e.STEP_DELAY+Math.round(5*e.STEP_DELAY*.6));t.scenario.animDuration=Math.max(Math.round(t.scenario.stepDelay*e.ANIM_DURATION/o),e.ANIM_DURATION)}})),this.controls.setVisible(!1),C()(document.body).append(this.controls.getElem()),a.UserInput.addHotKey("esc",(function(){t.hotkeysEnabled&&t.end()})),window.addEventListener("hashchange",(function(){t.handleUrlHashChange()}),!1)}return e.init=function(t,i){return o=t,s=i,n||(n=new e),v.Service.HelpSystemPlayer=e,(0,f.init)(t,s),n},e.notify=function(e,t){void 0===t&&(t=null),n&&n.handleEvent(e,t)},e.loadRemote=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=null),n&&e&&("."===e?(n.load((0,f.buildFromCurrent)(o,!t)),n.start(!1,!0,!t,!t,i)):C().getJSON(s.lnBaseUrl+"scenario/load/"+e).then((function(o){o?(n.load(o),n.start(!1,!0,!t,!1,i)):console.log("Scenario '".concat(e,"' not found."))}),(function(){console.log("Error loading scenario.")})))},e.getCanvas=function(){return n?n.canvas:null},e.prototype.delayedPlayPause=function(){var e=this;this.delayedTimer&&clearTimeout(this.delayedTimer),this.performInProgress?this.delayedTimer=setTimeout((function(){return e.delayedPlayPause()}),17):this.delayedAutoAdvance?this.autoAdvance||this.perform(!0):(this.autoAdvance=!1,this.timerHandles.stepDelay&&clearTimeout(this.timerHandles.stepDelay))},e.prototype.handlePageLoad=function(e){var t=this;void 0===e&&(e=null),e?(this.load(e),setTimeout((function(){t.start()}),1e3)):this.handleUrlHashChange()},e.prototype.handleUrlHashChange=function(){if(location.hash&&location.hash.match(/^#scenario=.+$/)){var t=location.hash.split("=",2)[1];location.hash="";var i=t.split("/"),n=i.length>0?i[0]:null,o=i.length>1&&!!i[1];console.log("Scenario",n,o),n&&e.loadRemote(n,o)}},e.prototype.handleEvent=function(e,t){var i=this;if(void 0===t&&(t=null),this.forcingBounds)this.debug&&console.log("ignoring event ".concat(e," - currently forcing bounds"));else if(this.debug&&console.log("Handle event ".concat(e," - subject: ").concat(t?"Y":"N")),this.scenario&&!(this.stepIndex<0)){e&&e.match(/^add-plugin-[^-]+$/)&&this.canvas&&t&&this.canvas.registerElementAdd(t),this.processForces(e);var n,o=this.scenario.steps[this.stepIndex];if(!this.selfTip){if(o.requirements&&o.requirements.length>0)for(var s=function(t){if(!o.requirements[t])return"continue";o.requirements[t]===e?(o.requirements.splice(t,1),r.debug&&console.log("Satisfy requirement ".concat(e,", remaining ").concat(o.requirements.length))):(n=o.requirements[t].match(/^timeout:([0-9]+)$/i))&&(r.timerHandles.eventDelay&&clearTimeout(r.timerHandles.eventDelay),r.timerHandles.eventDelay=setTimeout((function(){o.requirements&&i.handleEvent(o.requirements[t],null)}),parseInt(n[1],10)))},r=this,a=o.requirements.length-1;a>=0;a--)s(a);o.requirements&&0!==o.requirements.length||(this.debug&&console.log("Render step",o),this.renderStep(o,this.stepParams),this.stepParams=[])}if(this.selfTip||!o.subject&&(!o.requirements||0===o.requirements.length)){if(o.objectives&&o.objectives.length>0)for(a=o.objectives.length-1;a>=0;a--)o.objectives[a]===e&&(!this.currElemSubject&&e&&e.match(/^add-plugin-[^-]+$/)&&t&&(this.currElemSubject=t),o.objectives.splice(a,1),this.stepParams.push(t),this.debug&&console.log("Complete objective ".concat(e,", remaining ").concat(o.objectives.length)));o.objectives&&0!==o.objectives.length?"scenario-start"==e&&this.autoAdvance&&0===this.stepIndex&&this.handleAutoAdvance():(this.currElemSubject&&o.forceBounds&&(this.debug&&console.log("Queue force bounds",o.forceBounds),this.forceList.unshift(Object.assign({subject:this.currElemSubject},o.forceBounds)),this.processForces(e)),!this.currElemSubject&&o.forceBounds&&console.error("Error no subject for forcing"),this.debug&&console.log("Advance step"),this.next())}}},e.prototype.processForces=function(e){this.forcingBounds=!0;for(var t=this.forceList.length-1;t>=0;t--){var i=this.forceList[t];i.event&&i.event!==e||(this.forceList.splice(t,1),this.debug&&console.log("Force bounds",i),i.subject&&(0,h.applyBounds)(i.subject,i))}this.forcingBounds=!1},e.prototype.renderStep=function(e,t){var i=this;if(this.clearStep(),this.currentStepSubject=this.resolveTargetPath(e.subject,t,e.id,!0),this.currentStepSubject){if(!this.scenario)return;if(this.selfTip=new m.Tooltip(e,this.currentStepSubject,(function(){i.closeTooltip()})),this.currentStepSubject.elem){var n=e.subject.split("-");if(n.length>=4&&"item"==n[0]&&"plugin"==n[1]&&"prop"==n[3]){var o=this.currentStepSubject.elem,s=o.closest(".wb-sidebar-item-content").get(0);o.parents(".wb-property-group.collapsed").removeClass("collapsed"),setTimeout((function(){var e=s.getBoundingClientRect(),t=o.get(0).getBoundingClientRect(),i=(Math.max(e.left,e.left+(e.width-t.width)/2),Math.max(e.top,e.top+(e.height-t.height)/2)-t.top);try{s.scrollBy({left:-0,top:-i,behavior:"smooth"})}catch(e){s.scrollBy(-0,-i)}}),Math.floor(this.scenario.stepDelay/2))}}e.audio&&(this.debug&&console.log("Play audio: ".concat(e.audio)),this.audio&&this.audio.pause(),this.audio=new Audio((this.scenario.baseUrl?this.scenario.baseUrl:"")+e.audio),this.audio.onload=function(){i.audio&&(i.debug&&console.log("Audio loaded: ".concat(e.audio)),i.audio.play())},this.audio.onerror=function(){console.error("Failed to load audio: ".concat(e.audio))},this.audio.load(),this.audio.play())}else e.subject&&console.error("No subject: "+e.subject)},e.prototype.updateUrl=function(e,t){return this.canvas&&t&&t.baseUrl&&"string"==typeof e&&!e.match(/^(http|https):\/\/.+/i)?t.baseUrl+e:e},e.prototype.closeTooltip=function(){this.selfTip&&(this.selfTip.el.remove(),this.selfTip=null)},e.prototype.clearStep=function(){this.closeTooltip(),this.currElemSubject=null,this.currentStepSubject=null},e.prototype.resolveTargetPath=function(e,t,i,n){if(void 0===i&&(i=null),void 0===n&&(n=!1),!e)return null;var s=e.split("["),r=s.length>1&&s[1].length>1?s[1].substring(0,s[1].length-1):null,a=r&&r.match(/^[0-9]+$/)?parseInt(r,10):-1,l=s.length>1;isNaN(a)&&(a=-1),s=s[0].split("-");var c=(0,T.getManager)();switch(s[0]){case"desktop":return this.vDesktop?new m.ScenarioStepSubject(this.vDesktop,"right"):null;case"preview":var u=s[1]+"-"+s[2];if("close-btn"===u)return(y=c.lookupUIElement("preview","close"))&&y.elem.css({position:"relative"}),y;if("resize-border"===u)return s.length>3&&"left"===s[3]?new m.ScenarioStepSubject(o.previewToolbar.getResizerElement(!0),"right",200,8):new m.ScenarioStepSubject(o.previewToolbar.getResizerElement(!1),"left",200,-4);break;case"toolbar":if("ctrl"===s[1]){var d=s[2];"config"===d&&s.length>3&&s[3]&&(d+="-"+s[3]);var h=c.lookupUIElement("control",d);if(h)return h}else if("plugin"===s[1]){var p=c.lookupUIElement("plugin",s[2]);if(p)return p}break;case"item":if("plugin"===s[1]){this.debug&&console.log("--identify",l,r,a,this.subjectMap);for(var g=0,f=(l&&r&&r in this.subjectMap?[this.subjectMap[r]]:l&&a>=0&&t.length>0?t:this.canvas?this.canvas.getRegisteredElements():o.bodyInstance.getContentElements());g<f.length;g++){var y,b=(y=f[g]).getClassType();if(s[2]===b){if(i&&(this.subjectMap[i]=y),n&&(this.currElemSubject=y),!(s.length>4))return new m.ScenarioStepSubject(y.elem);var v=s[3]+"-"+s[4];if("edit-cmd"===v){var _=y.getToolbarElem(s[5]);return _||(_=y.getToolbarElem()),new m.ScenarioStepSubject(_,"left",0,0,!0,!0)}if("edit-btn"===v)return y.setControlsVisible(!0),new m.ScenarioStepSubject(y.editBtn.elem,"left");if("move-btn"===v)return y.setControlsVisible(!0),new m.ScenarioStepSubject(y.moveBtn.elem,"right");if("prop"===s[3]||"menu"===s[3]){var C=s[4]+(s.length>5?"-"+s[5]:"");"prop"!==s[3]&&(C=s[3]+"-"+C);var w=y.comPropertiesField(C);if(this.debug&&console.log("Resolving property subject",C,y,w),w)return"apply"===s[4]?new m.ScenarioStepSubject(w.getElem(),"left",0,0,!0,!0):"tab"===s[4]?new m.ScenarioStepSubject(w.getElem(),"bottom",0,0,!0,!0):new m.ScenarioStepSubject(w.getElem(),"bottom")}}}}break;case"config":if("background"===s[1]){var E=s[0]+"-"+s[1],I=this.subjectMap[E];if(I&&"prop"===s[2]&&(C=I.propertyDialogField(s[3])))return new m.ScenarioStepSubject(C.getElem())}}return null},e.prototype.load=function(t){if(this.end(),this.scenario=t,"animDuration"in this.scenario&&this.scenario.animDuration&&!isNaN(this.scenario.animDuration)||(this.scenario.animDuration=e.ANIM_DURATION),"stepDelay"in this.scenario&&this.scenario.stepDelay&&!isNaN(this.scenario.stepDelay)||(this.scenario.stepDelay=e.STEP_DELAY),o.isTouchDevice&&(this.scenario.audio&&(this.scenario.audio=null),this.scenario.steps))for(var i=0,n=this.scenario.steps;i<n.length;i++){var s=n[i];s.audio&&(s.audio=void 0)}},e.prototype.getTargetCanvas=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var i=e&&e.block?e.block:t||"wb_main";if(i in this.subjectMap)return this.subjectMap[i];if(this.canvas)return(i?this.canvas.findChildById(i):null)||this.canvas;i=i.replace("step-","");var n=o.bodyInstance.getContentBlock(i);if(!n)throw Error("Block '"+i+"' not found");return n},e.prototype.cursorGoElem=function(e,t,i){var n=this;if(void 0===i&&(i=""),!e.cursorReady&&this.cursor&&t){var o=t.elem.offset();return"prop"==i?(o.left+=t.getWidthInPixels()-10,o.top+=10):"move"==i?(o.left+=10,o.top+=10):"resize"==i?"TextArea"==t.getClassType()?(o.left+=t.elem.outerWidth(!1)-3,o.top+=Math.round(.3*t.elem.outerHeight(!1))):(o.left+=t.elem.outerWidth(!1)-8,o.top+=t.elem.outerHeight(!1)-8):(o.left+=Math.round(t.elem.outerWidth(!1)/2),o.top+=Math.round(t.elem.outerHeight(!1)/2)),this.cursor.moveTo(o,(function(){n.cursor&&n.cursor.animClick((function(){e.cursorReady=!0,n.perform(n.autoAdvance)}))})),!0}return!1},e.prototype.cursorGoControl=function(e,t,i,n){var o=this;if(void 0===n&&(n=!1),(!e.cursorReadyControl||!e.cursorReadyControl[i])&&this.cursor&&t){var s=t instanceof m.ScenarioStepSubject?t.elem:t,r=s.offset(),a=m.ScenarioStepSubject.calcActualSize(s);return r.left+=Math.round(a.width/2),r.top+=Math.round(a.height/2),this.cursor.moveTo(r,(function(){o.cursor&&o.cursor.animClick((function(){e.cursorReadyControl||(e.cursorReadyControl={}),e.cursorReadyControl[i]=!0,o.perform(o.autoAdvance)}),n)})),!0}return!1},e.prototype.perform=function(t){var i=this;if(void 0===t&&(t=!1),this.scenario&&!(this.stepIndex<0)){this.performInProgress=!0,this.autoAdvance=t;var n=this.scenario.steps[this.stepIndex];if(this.debug&&console.log("performing step",t,JSON.stringify(n)),n.objectives.length>0)for(var s=function(t){var s=n.objectives[t].split("-");if("add"===s[0]){if("plugin"===s[1]){var l=a.resolveTargetPath(n.subject,a.stepParams);if(a.cursorGoControl(n,l,n.objectives[t]))return{value:void 0};var c=(0,T.getManager)(),u=s[2],d=function(){var e=r.ElementRegister.getClassByName(u),t={content:n.defaultContent?n.defaultContent:{}};n.elemId&&(t.id=n.elemId),"Picture"===u?t.content.src&&(t.content.src=i.updateUrl(t.content.src,i.scenario)):"Gallery"===u?t.content.images&&t.content.images instanceof Array&&(t.content.images=t.content.images.map((function(e){return i.updateUrl(e,i.scenario)}))):"Menu"===u&&(t.forceNewDialog=!0);var o=new e(t,!0);n.id&&(i.subjectMap[n.id]=o,i.debug&&console.log("add element to map",n.id,o)),i.getTargetCanvas(n).addChild(o),n.forceBounds&&(0,h.applyBounds)(o,n.forceBounds),i.performStack.push(o),"Picture"!==o.getClassType()&&"Gallery"!==o.getClassType()||(i.handleEvent("item-plugin-"+u+"-edit-start",o),i.handleEvent("item-plugin-"+u+"-edit-end",o)),"Picture"===o.getClassType()&&o.loadImage(o.getSrc())};if(l){var p,m=l,g=0,f=0,b=a.scenario.animDuration;return a.timerHandles.resizeTween&&a.timerHandles.resizeTween.dispose(),a.timerHandles.resizeTween=new y.AnimTween(b,24,(function(){var e=p.offset();p.css({left:e.left+g,top:e.top-window.scrollY+f}),c.closeAll()}),(function(e){var t=m.elem.offset();t.top-=window.scrollY,p=m.elem.clone().detach().css({left:t.left,top:t.top,position:"fixed"}).addClass("ui-draggable-dragging").attr({id:""});var o=new h.BoundableElement(u,i.getTargetCanvas(n));o.left=C()(window).width()/2,o.top=C()(window).height()/2,n.forceBounds&&(0,h.applyBounds)(o,n.forceBounds),o.makePageRelative(),i.cursor&&i.cursor.moveTo(o,null,b,24),o.top-=window.scrollY,C()(document.body).append(p),g=(o.left-t.left)/e.numKeyframes,f=(o.top-t.top)/e.numKeyframes}),(function(){p.remove(),d(),i.performInProgress=!1,i.handleAutoAdvance()}),(function(){p.remove()})).start(),{value:void 0}}c.closeAll(),d()}}else if("item"===s[0]){if("plugin"===s[1])if("resize"===s[3]){if(l=a.performStack.length>0?a.performStack[a.performStack.length-1]:null,a.cursorGoElem(n,l,"resize"))return{value:void 0};if(a.handleEvent("item-plugin-"+s[2]+"-resize-start",l),n.forceBounds&&l){var _=n.forceBounds,w=l,E=0,I=0,x=a.scenario.animDuration;return a.timerHandles.resizeTween&&a.timerHandles.resizeTween.dispose(),a.timerHandles.resizeTween=new y.AnimTween(x,24,(function(){w.setSize(w.getWidthInPixels()+E,w.getHeightInPixels()+I),w.onResize()}),(function(e){if(i.cursor&&_.width){var t=i.cursor.getElem().offset();t.top+=_.height-w.getHeightInPixels(),t.left+=_.width-w.getWidthInPixels(),i.cursor.moveTo(t,null,x,24)}E=(_.width?_.width-w.getWidthInPixels():0)/e.numKeyframes,I=(_.height?_.height-w.getHeightInPixels():0)/e.numKeyframes}),(function(){w.elem.trigger("resize"),i.handleEvent("item-plugin-"+s[2]+"-resize-end",w),i.performInProgress=!1,i.handleAutoAdvance()})).start(),{value:void 0}}}else if("move"===s[3]){if(l=a.performStack.length>0?a.performStack[a.performStack.length-1]:null,a.cursorGoElem(n,l,"move"))return{value:void 0};if(a.handleEvent("item-plugin-"+s[2]+"-move-start",l),n.forceBounds&&l){var S=n.forceBounds,k=l,D=0,O=0,R=a.scenario.animDuration;return a.timerHandles.moveTween&&a.timerHandles.moveTween.dispose(),a.timerHandles.moveTween=new y.AnimTween(R,24,(function(){var e=k.getLocation();k.setLocation(e.left+D,e.top+O)}),(function(e){var t=k.getParent(),o=new h.BoundableElement("",i.getTargetCanvas(n,t?t.id:null),S,!0);o.left+=10,o.top+=10,i.cursor&&i.cursor.moveTo(o,null,R,24);var s=k.getLocation();D=(S.left&&"number"==typeof S.left?S.left-s.left:0)/e.numKeyframes,O=(S.top&&"number"==typeof S.top?S.top-s.top:0)/e.numKeyframes}),(function(){i.handleEvent("item-plugin-"+s[2]+"-move-end",k),i.performInProgress=!1,i.handleAutoAdvance()})).start(),{value:void 0}}}else if("edit"===s[3]){var P=s.length>4?s[4]:"";if(l=a.currElemSubject){var L=n.defaultContent&&"value"in n.defaultContent?n.defaultContent.value:"1234";if("TextArea"==s[2])if("select"===P){if(a.cursorGoElem(n,l))return{value:void 0};l.selectAll()}else if("text"===P)l.insertText(L,!0);else if("cmd"===P){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};l.execCommand(s[5])}else{if("start"==s[4]){if(a.cursorGoElem(n,l))return{value:void 0};l.showEditor(0,0)}if("end"==s[4]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};l.hideEditor()}}}}else if("select"===s[3]){var A=void 0;if(!(l=a.currElemSubject)&&n.subject&&(A=a.resolveTargetPath(n.subject,a.stepParams))&&(l=A),a.cursorGoElem(n,l,"select"))return{value:void 0};n.keepCurrentSelection||v.Service.element.unselectAll(),l.setSelected(!0)}else if("setAsBg"===s[3]){if(l=a.currElemSubject,a.cursorGoElem(n,l,"prop"))return{value:void 0};l.setAsBackground()}else if(("prop"===s[3]||"menu"===s[3])&&(l=a.currElemSubject,a.debug&&console.log("--subject=",l),l))if(L=n.defaultContent&&"value"in n.defaultContent?n.defaultContent.value:"1234","open"===s[4]){if(a.cursorGoElem(n,l,"prop"))return{value:void 0};l.comProperties()}else if("close"===s[4]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};l.closeComProperties()}else if("apply"===s[4]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};l.applyComProperties()}else if("tab"===s[4]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};(M=l.comPropertiesField(s[4]+"-"+s[5]))&&(M.select(),e.notify("item-plugin-"+s[2]+"-prop-"+s[4]+"-"+s[5],l))}else if("urlLink"===s[4]&&"Picture"==s[2]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};(M=l.comPropertiesField(s[4]))&&(M.setValue({type:"url",url:L}),e.notify("item-plugin-"+s[2]+"-prop-"+s[4]+"-change",l))}else if("linkTypeEnlarge"===s[4]&&"Picture"==s[2]){if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,n.objectives[t]))return{value:void 0};var M;(M=l.comPropertiesField(s[4]))&&(M.setValue(!0),e.notify("item-plugin-"+s[2]+"-prop-"+s[4]+"-change",l))}else{var B=void 0,N=void 0;if("prop"!==s[3]?(B=s[3]+"-"+s[4]+("menu"===s[3]&&s.length>5?"-"+s[5]:""),N="menu"===s[3]?s[6]:s[5]):(B=s[4],N=s[5]),"Menu"==s[2]){if("menu-new-apply"===B||"menu-edit-apply"===B||B.match(/^menu\-edit\-select\:[0-9]+$/))return a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,B)?{value:void 0}:(l.applyComProperties(s[3]+"-"+s[4]+(s.length>5?"-"+s[5]:"")),"continue");if("menu-new"===B)return a.cursorGoElem(n,l,"prop")?{value:void 0}:(l.openEditMenuItems(!0),"continue");if("menu-edit"===B)return a.cursorGoElem(n,l,"prop")?{value:void 0}:(l.openEditMenuItems(!1),"continue")}var F=!!n.objectives[t].match(/^.+\-bg[^\-]+\-change$/);if(a.currentStepSubject&&a.cursorGoControl(n,a.currentStepSubject,B,F))return{value:void 0};var K=l.comPropertiesField(B),V=l.getProperty(B);if(V&&"change"===N)K&&"onValueChanged"in K?(V.deserialize(l,L,!0,!0),setTimeout((function(){return null==K?void 0:K.onValueChanged()}),10)):V.deserialize(l,L,!0,!0);else if(K&&"click"===N)K.trigger("click");else if(K){if("Shape"==s[2]&&"borderRadius"===B&&"object"!=typeof L?K.setValue({lt:L,rt:L,rb:L,lb:L}):K.setValue(L),"Picture"!=s[2]||"sizeW"!==B&&"sizeH"!==B)if("GoogleMaps"==s[2]&&"gmapAddress"===B){var H=l.comPropertiesField("gmap");H&&n.defaultContent&&"ll"in n.defaultContent&&H.setLatLng(n.defaultContent.ll)}else"GoogleMaps"==s[2]&&"gmapZoomLevel"===B?K.trigger("change"):"Youtube"==s[2]&&"videoId"===B?K.trigger("paste"):"Form"==s[2]&&K.trigger("change");else K.trigger("change");e.notify("item-plugin-"+s[2]+("prop"===s[3]?"-"+s[3]:"")+"-"+B+"-"+N,l)}}}else if("toolbar"===s[0]){if("plugin"===s[1]){if(l=a.resolveTargetPath(n.subject,[]),"open"==s[3]&&l){if(a.cursorGoControl(n,l,n.objectives[t]))return{value:void 0};(j=l.elem.children("a, button, .btn")).length>0?j.first().trigger("mouseover"):l.elem.trigger("mouseover")}}else if("ctrl"===s[1]&&(l=a.resolveTargetPath(n.subject,[]),"click"==s[3]&&l)){if(a.cursorGoControl(n,l,n.objectives[t]))return{value:void 0};var j;(j=l.elem.children("a, button, .btn")).length>0?j.first().trigger("click"):l.elem.trigger("click"),a.autoAdvance&&a.handleEvent(n.objectives[t])}}else if("config"===s[0]&&"background"===s[1]){if(l=a.resolveTargetPath(n.subject,[]),F=!!n.objectives[t].match(/^.+\-bgPage\-change$/),l&&a.cursorGoControl(n,l,n.objectives[t],F))return{value:void 0};var U=s[0]+"-"+s[1];if("open"===s[2])a.subjectMap[U]=o.site.changeBackground();else if("apply"===s[2])(z=a.subjectMap[U])&&z.propertyDialogApply(!0);else if("prop"===s[2]){var z;if(z=a.subjectMap[U]){var W=z.propertyDialogField(s[3]);if("change"===s[4]&&W){var G=W.getValue();n.defaultContent&&"value"in n.defaultContent&&(G=n.defaultContent.value),W.setValue(G),"function"==typeof W.triggerChange&&W.triggerChange(),"bgPage"===s[3]&&a.canvas&&G&&G.css&&(a.canvas.elem.css(G.css),"transparent"===a.canvas.elem.get(0).style.backgroundColor&&a.canvas.elem.css({backgroundColor:"#ffffff"}))}}}}},a=this,l=n.objectives.length-1;l>=0;l--){var c=s(l);if("object"==typeof c)return c.value}else this.debug&&console.log("Advance step 2"),this.next();this.performInProgress=!1,this.debug&&console.log("performing step done"),this.handleAutoAdvance()}},e.prototype.handleAutoAdvance=function(){var e=this;this.scenario&&(this.debug&&console.log("try auto advance",this.autoAdvance,this.performInProgress),this.autoAdvance&&!this.performInProgress&&(this.debug&&console.log("auto advance",this.audio),this.waitForAudio&&this.audio&&!this.audio.ended?(this.debug&&console.log("wait for audio",this.audio),this.audio.addEventListener("ended",(function(){e.scenario&&(e.debug&&console.log("wait for audio done - advance"),e.timerHandles.stepDelay&&clearTimeout(e.timerHandles.stepDelay),e.timerHandles.stepDelay=setTimeout((function(){return e.perform(e.autoAdvance)}),e.scenario.stepDelay))}))):(this.debug&&console.log("advance"),this.timerHandles.stepDelay&&clearTimeout(this.timerHandles.stepDelay),this.timerHandles.stepDelay=setTimeout((function(){return e.perform(e.autoAdvance)}),this.scenario.stepDelay))))},e.prototype.next=function(){!this.scenario||this.stepIndex<0||(this.scenario.steps.length-1<=this.stepIndex?(this.controls.setEndState(!0,!0),this.clearStep(),this.autoAdvance=!1):(this.clearStep(),this.stepIndex++,this.controls.setStep(this.stepIndex+1,this.scenario.steps.length),this.handleEvent("scenario-next-step"),this.handleAutoAdvance()))},e.prototype.setStyle=function(e){var t,i;void 0===e&&(e=null);for(var n=0,s=o.site.styles;n<s.length;n++){var r=s[n];".wb-stl-scenario"===r.selector?t=r:".wb-stl-normal"===r.selector&&(i=r)}if(t){var a=o.site.styles.indexOf(t);o.site.styles.splice(a,1)}e&&i&&this.scenario&&this.scenario.style?((t=new(c().Style)(i.serialize())).name="Scenario",t.selector=".wb-stl-scenario",t.ruleSets=C().extend(!0,[],i.ruleSets),this.scenario.style.color&&(t.ruleSets[0].rules[0].css.color=this.scenario.style.color,t.sys.text||(t.sys.text={}),t.sys.text.color=this.scenario.style.color),o.site.styles.push(t),o.site.updateStyle()):o.site.updateStyle()},e.prototype.start=function(e,t,i,n,s){var r=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===s&&(s=null),this.playToggleLock=!1,this.scenario&&0!==this.scenario.steps.length){if(e||this.end(),this.doneCallback=s,t&&(this.autoAdvance=!0,this.controls.getFields().nextBtn.setEnabled(!1),this.controls.getFields().playBtn.getElem().attr({attr:__("Stop")}),this.controls.getFields().playBtn.setIcon("fa fa-pause")),this.subjectMap={},i){this.canvas=new g.PlayerCanvas(n);var a,l=0,c=this.canvas;new y.AnimTween(300,24,(function(){l+=a,c.elem.css({opacity:l})}),(function(e){c.elem.css({opacity:l}),a=1/e.numKeyframes}),(function(e){e.dispose()})).start()}else this.canvas&&(this.canvas.dispose(),this.canvas=null);if(this.canvas)for(var u=0,d=this.canvas.getRegisteredElements();u<d.length;u++){var h=d[u];this.subjectMap[h.id]=h}else for(var p=0,m=o.bodyInstance.getContentBlocks();p<m.length;p++){var f=m[p];this.subjectMap[f.id]=f}if(this.scenario.requireSpace&&this.scenario.requireSpace>0){for(var _=0,T=this.scenario.steps;_<T.length;_++){var E=T[_];if(!this.canvas&&"config-background-prop-bgPage"==E.subject){var I=o.site.getPage(o.pageId);I&&I.background&&(I.background.image&&"none"!==I.background.image||I.background.color&&"transparent"!==I.background.color)&&(I.background={css:{background:""}}),o.bodyInstance.bgSite={css:{background:""}},o.bodyInstance.updateStyle()}}if(!this.canvas)for(var x=0,S=o.bodyInstance.getContentBlocks();x<S.length;x++)for(var k=0,D=(f=S[x]).getChildren();k<D.length;k++)D[k].remove({})}this.stepIndex=0,this.stepParams=[],this.forceList=[],this.performStack=[],this.vDesktop=C()("<div>").css({position:"fixed",left:-1,top:C()(window).height()/2,width:1,height:1,zIndex:999,overflow:"visible"}).appendTo(document.body),this.cursor=new b.VirtualCursor,C()(document.body).append(this.cursor.getElem()),this.hotkeysEnabled=!0,this.currElemSubject=null,v.Service.element.unselectAll(),this.controls.setEndState(!1),this.controls.setSpeed(3),this.controls.setStep(this.stepIndex+1,this.scenario.steps.length),this.controls.setVisible(!0),this.scenario.audio&&(this.bgAudio&&this.bgAudio.pause(),this.bgAudio=new Audio((this.scenario.baseUrl?this.scenario.baseUrl:"")+this.scenario.audio),this.bgAudio.loop=!0,this.bgAudio.onload=function(){r.bgAudio&&r.bgAudio.play()},this.bgAudio.onerror=function(){r.scenario&&console.error("Failed to load audio: ".concat(r.scenario.audio))},this.bgAudio.load(),this.bgAudio.play()),this.scenario.style&&this.setStyle(this.scenario.style),this.handleEvent("scenario-start");var O=new w.VisibilityChangedBuilderEvent(!0);w.GlobalEvents.triggerEvent("help.playershow",O)}},e.prototype.end=function(){if(this.scenario){this.doneCallback&&(this.doneCallback.call(this),this.doneCallback=null),this.clearStep(),this.stepIndex=-1,this.forceList=[],this.performInProgress=!1,this.vDesktop&&(this.vDesktop.remove(),this.vDesktop=null),this.subjectMap={},this.controls.setVisible(!1),this.bgAudio&&this.bgAudio.pause(),this.bgAudio=null,this.canvas&&(this.canvas.dispose(),this.canvas=null),this.cursor&&(this.cursor.dispose(),this.cursor=null),this.hotkeysEnabled=!1,this.handleEvent("scenario-end"),this.setStyle(null),d().closeAll(),this.timerHandles.eventDelay&&clearTimeout(this.timerHandles.eventDelay),this.timerHandles.stepDelay&&clearTimeout(this.timerHandles.stepDelay),this.timerHandles.resizeTween&&this.timerHandles.resizeTween.dispose(),this.timerHandles.moveTween&&this.timerHandles.moveTween.dispose(),v.Service.element.unselectAll();var e=new w.VisibilityChangedBuilderEvent(!1);w.GlobalEvents.triggerEvent("help.playerhide",e)}},e.ANIM_DURATION=400,e.STEP_DELAY=500,e}()},"./HelpSystem/PlayerCanvas.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PlayerCanvas:function(){return d}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./LayoutElement.ts"),a=i("./CommonTypes.ts"),l=i("./BuilderEvent.ts"),c=i("./Service.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(t){void 0===t&&(t=!1);var i=e.call(this,{content:{layout:{type:a.ChildrenLayoutType.Vertical}}},!0)||this;i.elementIdx={},i.elementList=[],i.id="canvas",i.isFlexible=!1,i.wrapper=s()("<div>").addClass("wb-site wb-site-canvas wb-viewport-mode-".concat(c.Service.modeManager.getMode())).css({width:"100%",height:wb_builder.bodyInstance.site.height(),backgroundColor:t?"#ffffff":"rgba(0, 0, 0, 0.80)"}),i.wrapper.append(i.elem),i.wrapper.insertBefore(wb_builder.bodyInstance.site),l.GlobalEvents.on("modes.changed",(function(e){i.wrapper.removeClass("wb-viewport-mode-phone wb-viewport-mode-tablet wb-viewport-mode-desktop wb-viewport-mode-tv").addClass("wb-viewport-mode-".concat(e.mode))}));var n={width:"100%",height:"auto",useMinWidth:!1,useMaxWidth:!1,useMinHeight:!1,useMaxHeight:!1,content:{layout:{type:"vertical",wrapRes:"phone",wrap:"nowrap",hAlign:"center",vAlign:"center",hSpacing:"center",vSpacing:"center"}}},o={};for(var r in o[a.ContentBlockId.Header]={name:"Header",anchor:"header"},o[a.ContentBlockId.Main]={name:"Body",anchor:"main"},o[a.ContentBlockId.Footer]={name:"Footer",anchor:"footer"},o){if(!o.hasOwnProperty(r))return i;c.Service.elementRegister.createElement("LayoutElement",s().extend(!0,{},n,o[r],{id:r}),!0,!0,(function(e){i.registerElementAdd(e),i.addChild(e)}))}return i}return u(t,e),t.prototype.getRegisteredElements=function(){return this.elementList},t.prototype.registerElementAdd=function(e){"LayoutElement"==e.getClassType()&&(this.elementIdx[e.id]=e),this.elementList.push(e)},t.prototype.findChildById=function(e){return e in this.elementIdx?this.elementIdx[e]:null},t.prototype.dispose=function(){this.wrapper.remove()},t.prototype.getCanvasClientRect=function(){return this.wrapper[0].getBoundingClientRect()},t}(r.LayoutElement)},"./HelpSystem/PlayerControls.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PlayerControls:function(){return p}});var n,o=i("./UIContainer.ts"),s=i("./UIButton.ts"),r=i("./Service.ts"),a=i("./ButtonGroup.ts"),l=i("./FlowLayout.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(){},d=function(e){function t(){var t=e.call(this)||this;return t.fields=new u,t.baseSpeed=3,t.onSpeedChange=null,r.Service.UIBuilder.buildLayout([{type:a.ButtonGroup,children:[{type:s.UIButton,id:"val",borderless:!0,text:"1.0x",buttonSize:s.UIButton.SIZE_SMALL,menuWidth:80,menuUp:[{name:"0.25x",click:function(){t.applySpeed(0,.25)}},{name:"0.5x",click:function(){t.applySpeed(0,.5)}},{name:"1.0x",click:function(){t.applySpeed(0,1)}},{name:"1.5x",click:function(){t.applySpeed(0,1.5)}},{name:"2.0x",click:function(){t.applySpeed(0,2)}}]}]}],t,t.fields),t}return c(t,e),t.prototype.buildInit=function(t,i){if(e.prototype.buildInit.call(this,t,i),"baseSpeed"in t&&t.baseSpeed){var n=1*t.baseSpeed;n>0&&!isNaN(n)&&(this.baseSpeed=n)}"change"in t&&"function"==typeof t.change&&(this.onSpeedChange=t.change)},t.prototype.applySpeed=function(e,t){void 0===t&&(t=0);var i=Math.ceil(e>0?e:this.baseSpeed*t),n=Math.ceil(1.75*this.baseSpeed);0===t&&(t=i/this.baseSpeed),this.fields.val.setText(t+(1===t||2===t?".0":"")+"x"),this.onSpeedChange&&this.onSpeedChange(i,n)},t}(l.FlowLayout),h=function(){},p=function(e){function t(t){var i=e.call(this)||this;return i.onClose=t,i.fields=new h,i.closeTimeout=0,i.addClass("wb-hlp-player-controls"),i}return c(t,e),t.prototype.setStep=function(e,t){this.fields.label.setText(e+" of "+t)},t.prototype.setSpeed=function(e){this.fields.speedGroup.applySpeed(e)},t.prototype.setEndState=function(e,t){var i=this;void 0===t&&(t=!1),this.closeTimeout&&clearTimeout(this.closeTimeout),e?(this.fields.playBtn.setVisible(!1),this.fields.nextBtn.setVisible(!1),this.fields.closeBtn.setVisible(!0),this.fields.label.setVisible(!1),this.fields.speedLabel.setVisible(!1),this.fields.speedGroup.setVisible(!1),this.fields.speedGroupSep.setVisible(!1),t&&(this.closeTimeout=setTimeout((function(){return i.onClose()}),3e3))):(this.fields.playBtn.setVisible(!0),this.fields.nextBtn.setVisible(!0),this.fields.closeBtn.setVisible(!0),this.fields.label.setVisible(!0),this.fields.speedLabel.setVisible(!0),this.fields.speedGroup.setVisible(!0),this.fields.speedGroupSep.setVisible(!0)),this.css({marginLeft:-this.getElem().outerWidth()/2})},t.prototype.getFields=function(){return this.fields},t.init=function(e,i,n,o){var a=new t(n);return a.onSpeedChange=o,r.Service.UIBuilder.buildLayout({type:"FlowLayout",verticalAlign:"middle",spacing:0,children:[{type:"Button",text:"",attr:{title:__("Play")},buttonSize:s.UIButton.SIZE_SMALL,icon:"fa fa-pause",borderless:!0,id:"playBtn",click:e},{type:"Button",text:"",attr:{title:__("Next")},buttonSize:s.UIButton.SIZE_SMALL,icon:"fa fa-step-forward",borderless:!0,id:"nextBtn",click:i,css:{marginLeft:10,marginRight:10}},{type:"Label",text:"0/0",id:"label",css:{paddingLeft:15,marginBottom:2,borderLeft:"1px solid #ccc"}},{type:"Label",text:__("Speed"),id:"speedLabel",css:{marginLeft:15,marginRight:10,marginBottom:2,paddingLeft:"15px",fontWeight:"normal",borderLeft:"1px solid #ccc"}},{type:d,id:"speedGroup",change:o},{type:"Label",html:"&nbsp;",id:"speedGroupSep",css:{marginBottom:2,paddingLeft:"6px",borderLeft:"1px solid #ccc"}},{type:"Button",text:"",attr:{title:__("Close")},buttonSize:s.UIButton.SIZE_SMALL,icon:"fa fa-times",borderless:!0,id:"closeBtn",click:n}]},a,a.fields),a.css({position:"fixed",zIndex:99999,bottom:10,left:"50%",background:"#fff",border:"1px solid #ccc",padding:5}),a},t}(o.UIContainer)},"./HelpSystem/Scenario.ts":function(e,t,i){"use strict";function n(e,t){if(t&&"object"==typeof t){var i;if("width"in t&&(e.setSize(t.width,null),"Picture"==e.getClassType()&&(i=e).crop&&(i.crop.width=t.width)),"height"in t&&(e.setSize(null,t.height),"Picture"==e.getClassType()&&(i=e).crop&&(i.crop.height=t.height)),"individualMargin"in t&&t.individualMargin&&(e.individualMargin=t.individualMargin),"minWidth"in t&&"number"==typeof t.minWidth&&(e.minWidth=t.minWidth),"maxWidth"in t&&"number"==typeof t.maxWidth&&(e.maxWidth=t.maxWidth),"minHeight"in t&&"number"==typeof t.minHeight&&(e.minHeight=t.minHeight),"maxHeight"in t&&"number"==typeof t.maxHeight&&(e.maxHeight=t.maxHeight),"useMinWidth"in t&&"number"==typeof t.useMinWidth&&(e.useMinWidth=t.useMinWidth),"useMaxWidth"in t&&"number"==typeof t.useMaxWidth&&(e.useMaxWidth=t.useMaxWidth),"useMinHeight"in t&&"number"==typeof t.useMinHeight&&(e.useMinHeight=t.useMinHeight),"useMaxHeight"in t&&"number"==typeof t.useMaxHeight&&(e.useMaxHeight=t.useMaxHeight),"left"in t){var n=0;if("string"==typeof t.left){var o=e.getParent(),s=o?o.getWidthInPixels():0,r=t.refWidth?t.refWidth:e.getWidthInPixels();"left"===t.left?n=0:"right"===t.left?n=s-r:"center"!==t.left&&"middle"!==t.left||(n=(s-r)/2)}else n=t.left;e.setLocation(n,null)}if("top"in t){var a=0;if("string"==typeof t.top){var l=e.getParent(),c=l?l.getHeightInPixels():0;"top"===t.top?a=0:"bottom"===t.top?a=c-e.getHeightInPixels():"middle"!==t.top&&"center"!==t.top||(a=(c-e.getHeightInPixels())/2)}else a=t.top;e.setLocation(null,a)}e.onResize()}}i.r(t),i.d(t,{BoundableElement:function(){return o},ForceBounds:function(){return s},Scenario:function(){return a},ScenarioStep:function(){return r},applyBounds:function(){return n}});var o=function(){function e(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this.type=e,this.parent=t,this.left=0,this.top=0,this.width=0,this.height=0,this.individualMargin=null,this.minWidth=0,this.maxWidth=1200,this.minHeight=0,this.maxHeight=600,this.useMinWidth=!1,this.useMaxWidth=!1,this.useMinHeight=!1,this.useMaxHeight=!1,i&&("number"==typeof i.left&&(this.left=i.left),"number"==typeof i.top&&(this.top=i.top)),n&&this.makePageRelative()}return e.prototype.getClassType=function(){return this.type},e.prototype.setSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),null!==e&&(this.width=e),null!==t&&(this.height=t)},e.prototype.setLocation=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),null!==e&&(this.left=e),null!==t&&(this.top=t)},e.prototype.onResize=function(){},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getParent=function(){return this.parent},e.prototype.getWidthInPixels=function(){return this.width},e.prototype.getHeightInPixels=function(){return this.height},e.prototype.makePageRelative=function(){var e=this.getParent().container.offset();this.left+=e.left,this.top+=e.top},e}(),s=function(){},r=function(){},a=function(){}},"./HelpSystem/ScenarioBuilder.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{buildFromCurrent:function(){return m},init:function(){return p}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./HelpSystem/Scenario.ts"),r=i("./CommonTypes.ts"),a=i("./element/PropertyType.ts"),l=i("./Service.ts"),c=i("./util/ComparisonUtil.ts"),u={},d=null,h={};function p(e,t){d=e,o().getJSON(t.getLnUrl("scenario/dict")).then((function(e){e&&"object"==typeof e&&(u=e)}),(function(){return console.log("Error loading scenario dictionary.")}))}function m(e,t){void 0===t&&(t=!0);var i=new s.Scenario;i.baseUrl="scenarios/",i.name=__("Current Template"),i.requireSpace=600,i.steps=[{title:"Lets create site",text:"Lets create site",subject:"toolbar-ctrl-change"}];var n=function(e,t){e.steps.push({title:u.Click&&u.Click.title?u.Click.title:__("Click"),text:u.Click&&u.Click.text?u.Click.text:"",subject:"toolbar-ctrl-config",objectives:["toolbar-ctrl-config-click"]}),e.steps.push({title:u.Click&&u.Click.title?u.Click.title:__("Click"),text:u.Click&&u.Click.text?u.Click.text:"",subject:"toolbar-ctrl-config-background",objectives:["config-background-open"]});var i,n=t.site.getPage(t.pageId);return i=n&&n.background&&(n.background.image&&"none"!==n.background.image||n.background.color&&"transparent"!==n.background.color)?n.background:t.bodyInstance.bgSite,delete(i=o().extend(!0,{},i)).opacity,i.css&&delete i.css.opacity,e.steps.push({title:u.Change&&u.Change.title?u.Change.title:__("Change"),text:u.Change&&u.Change.text?u.Change.text:"",audio:u.Change&&u.Change.audio?u.Change.audio:"",requirements:["timeout:500"],subject:"config-background-prop-bgPage",defaultContent:{value:i},objectives:["config-background-prop-bgPage-change"]}),e.steps.push({title:u.Apply&&u.Apply.title?u.Apply.title:__("Apply"),text:u.Apply&&u.Apply.text?u.Apply.text:"",audio:u.Apply&&u.Apply.audio?u.Apply.audio:"",subject:"config-background-prop-apply",objectives:["config-background-apply"]}),null}(i,e);return g(e.bodyInstance.getChildren(),i,n,t),i}function g(e,t,i,n,o){void 0===o&&(o=!1),o&&e.sort((function(e,t){var i=b(e,!0),n=b(t,!0),o=e.getLocation(),s=t.getLocation();return o.top+i.top==s.top+n.top?e.getZIndex()==t.getZIndex()?0:e.getZIndex()>t.getZIndex()?1:-1:o.top+i.top>s.top+n.top?1:-1}));for(var s=0,a=e;s<a.length;s++){var l=a[s],c=l.getClassType();if("LinkExchangeBadge"!==c&&(i=f(l,t,i,n),i=null,"LayoutElement"===c)){var u=l;g(u.getChildren(),t,i,n,u.getChildrenLayout()==r.ChildrenLayoutType.Absolute)}}}function f(e,t,i,n,o){var s=e.getClassType(),d=function(e,t,i,n,o,s){var a=i.id==r.ContentBlockId.Header||i.id==r.ContentBlockId.Main||i.id==r.ContentBlockId.Footer,l=i.getLocation(),c=a?null:s||i.getParent(),d=c&&(c.id==r.ContentBlockId.Header||c.id==r.ContentBlockId.Main||c.id==r.ContentBlockId.Footer),h=i.serialize().content;h||(h={});var p={title:u.Add&&u.Add.title?u.Add.title.replace("%s",__(t)):__("Add")+" "+t,text:u.Add&&u.Add.text?u.Add.text:"",id:a||!o?i.id:"step-"+i.id,elemId:a||!o?i.id:"step-"+i.id,block:c?d||!o?c.id:"step-"+c.id:null,subject:"toolbar-plugin-"+t,objectives:["add-plugin-"+t],forceBounds:{top:l.top+0,left:l.left+0,individualMargin:h.individualMargin,minWidth:h.minWidth,maxWidth:h.maxWidth,minHeight:h.minHeight,maxHeight:h.maxHeight,useMinWidth:h.useMinWidth,useMaxWidth:h.useMaxWidth,useMinHeight:h.useMinHeight,useMaxHeight:h.useMaxHeight}};return n&&(p.requirements=[n]),a||e.steps.push(p),p}(t,s,e,i,n,o);return i=null,"Picture"===s?i=function(e,t,i,n){return t.defaultContent={src:n.getSrc()},t.forceBounds&&(t.forceBounds.event="item-plugin-"+i+"-edit-loaded"),null}(0,d,s,e):"Gallery"===s?i=function(e,t,i,n){return t.defaultContent=n.serialize().content,t.defaultContent.images=t.defaultContent.images.map((function(e){return wb_builder.makeLocalUrl(e)})),null}(0,d,0,e):"Menu"===s?i=function(e,t,i,n){var o=n,s=!1,r={title:u.Edit&&u.Edit.title?u.Edit.title:__("Edit"),text:u.Edit&&u.Edit.text?u.Edit.text:"",audio:u.Edit&&u.Edit.audio?u.Edit.audio:"",subject:"item-plugin-"+i+"-edit-btn[0]",objectives:["item-plugin-"+i+"-menu-edit"]},a=0;for(var l in o.items);for(var l in o.items){var c=o.items[l];a>0&&(s||(e.steps.push(r),s=!0),e.steps.push({title:u.Click&&u.Click.title?u.Click.title:__("Click"),text:u.Click&&u.Click.text?u.Click.text:"",requirements:["timeout:500"],subject:"item-plugin-"+i+"-menu-edit-newItemButton[0]",objectives:["item-plugin-"+i+"-menu-edit-newItemButton-click"]})),e.steps.push({title:u.Edit&&u.Edit.title?u.Edit.title:__("Edit"),text:u.Edit&&u.Edit.text?u.Edit.text:"",audio:u.Edit&&u.Edit.audio?u.Edit.audio:"",requirements:["timeout:500"],subject:"item-plugin-"+i+"-menu-new-fldName[0]",defaultContent:{value:c.name},objectives:["item-plugin-"+i+"-menu-new-fldName-change"]}),e.steps.push({title:u.Apply&&u.Apply.title?u.Apply.title:__("Apply"),text:u.Apply&&u.Apply.text?u.Apply.text:"",audio:u.Apply&&u.Apply.audio?u.Apply.audio:"",subject:"item-plugin-"+i+"-menu-new-apply[0]",objectives:["item-plugin-"+i+"-menu-new-apply"]}),"_blank"===c.target&&(s||(e.steps.push(r),s=!0),e.steps.push({title:u.Edit&&u.Click.title?u.Click.title:__("Click"),text:u.Edit&&u.Click.text?u.Click.text:"",audio:u.Edit&&u.Click.audio?u.Click.audio:"",requirements:["timeout:500"],subject:"item-plugin-"+i+"-menu-edit-fldNewWindow[0]",defaultContent:{value:!0},objectives:["item-plugin-"+i+"-menu-edit-fldNewWindow-change"]})),c.noMenu&&(s||(e.steps.push(r),s=!0),e.steps.push({title:u.Edit&&u.Click.title?u.Click.title:__("Click"),text:u.Edit&&u.Click.text?u.Click.text:"",audio:u.Edit&&u.Click.audio?u.Click.audio:"",requirements:["timeout:500"],subject:"item-plugin-"+i+"-menu-edit-fldHideInMenu[0]",defaultContent:{value:!0},objectives:["item-plugin-"+i+"-menu-edit-fldHideInMenu-change"]})),a++}return s&&e.steps.push({title:u.Apply&&u.Apply.title?u.Apply.title:__("Apply"),text:u.Apply&&u.Apply.text?u.Apply.text:"",audio:u.Apply&&u.Apply.audio?u.Apply.audio:"",requirements:["timeout:500"],subject:"item-plugin-"+i+"-menu-edit-apply[0]",objectives:["item-plugin-"+i+"-menu-edit-apply"]}),null}(t,0,s,e):"TextArea"===s?i=function(e,t,i,n){var o=n;return e.steps.push({title:u.Edit&&u.Edit.title?u.Edit.title:__("Edit"),text:u.Edit&&u.Edit.text?u.Edit.text:"",audio:u.Edit&&u.Edit.audio?u.Edit.audio:"",placement:"right",subject:"item-plugin-"+i+"-edit-btn["+t.id+"]",objectives:["item-plugin-"+i+"-edit-start"]}),e.steps.push({title:u.Select&&u.Select.title?u.Select.title:__("Select"),text:u.Select&&u.Select.text?u.Select.text:"",subject:"item-plugin-"+i+"["+t.id+"]",objectives:["item-plugin-"+i+"-edit-select"]}),e.steps.push({title:u.Edit&&u.Edit.title?u.Edit.title:__("Edit"),text:u.Edit&&u.Edit.text?u.Edit.text:"",audio:u.Edit&&u.Edit.audio?u.Edit.audio:"",subject:"item-plugin-"+i+"["+t.id+"]",defaultContent:{value:o.textDivValue},objectives:["item-plugin-"+i+"-edit-text"]}),e.steps.push({title:u.Click&&u.Click.title?u.Click.title:__("Click"),text:u.Click&&u.Click.text?u.Click.text:"",subject:"item-plugin-TextArea-edit-cmd-closebtn["+t.id+"]",objectives:["item-plugin-TextArea-edit-end"]}),null}(t,d,s,e):"LayoutElement"===s&&(i=function(e,t,i,n,o){var s=null,r=n.backgroundElement;return r&&(s=f(r,e,s,o,n),e.steps.push({title:u.Select&&u.Select.title?u.Select.title:__("Select"),text:u.Select&&u.Select.text?u.Select.text:"",subject:"item-plugin-"+r.getClassType()+"-edit-btn[0]",requirements:s?[s]:[],objectives:["item-plugin-"+r.getClassType()+"-setAsBg"]}),s=null),s}(t,0,0,e,n)),i=function(e,t,i,n,o){var s,r,d,p,m=[],g=n.getProperties();for(var f in g)if(g.hasOwnProperty(f)){if(!(p=g[f]).type||p.type.isElementReference||!p.type.component||p.type.accessLevel!=a.PropertyTypeAccess.User)continue;m.push(g[f])}if(!m.length)return o;m.sort((function(e,t){if(e.type===t.type)return 0;var i=e.dependencies&&e.dependencies.indexOf(t.name)>=0?1:0,n=t.dependencies&&t.dependencies.indexOf(e.name)>=0?1:0;return i==n&&(i=e.type?(e.type.isButton?1e4:0)+e.type.sortOrder:0,n=t.type?(t.type.isButton?1e4:0)+t.type.sortOrder:0),i<n?-1:1})),o=function(e,t,i,n){var o,s,r;return e.steps.push({title:(null===(o=u.Select)||void 0===o?void 0:o.title)||__("Select"),text:(null===(s=u.Select)||void 0===s?void 0:s.text)||"",audio:(null===(r=u.Select)||void 0===r?void 0:r.audio)||"",requirements:n?[n]:void 0,subject:"item-plugin-"+i+"["+t.id+"]",objectives:["item-plugin-"+i+"-select"]}),"timeout:100"}(e,t,i,o);for(var b="number"==typeof n.width&&"number"==typeof n.height,v=function(e){return h.hasOwnProperty(e)||l.Service.elementRegister.createElement(e,{content:{}},!0,!0,(function(t){var i={},n=t.getProperties();for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];s.type&&s.getter&&!s.type.isButton&&s.type.component&&(i[o]=s.serialize(t))}h[e]=i,t.remove({noHistory:!0})}),(function(){h[e]=null})),h[e]}(i),_=0,C=m;_<C.length;_++){var w=C[_];if(w.type&&!(y.indexOf(w.type)>=0)&&("TextArea"!==i||w.type!==a.PropertyType.ElementHeight)&&(!b||w.type!==a.PropertyType.ElementWidth&&w.type!==a.PropertyType.ElementHeight)){var T=w.getUIComponentOptions(n);if((!("visible"in T)||T.visible)&&(!("enabled"in T)||T.enabled)){if(w.type.isButton);else{var E=w.serialize(n);if(v&&v.hasOwnProperty(w.name)&&c.ComparisonUtil.checkEqualsRecursive(v[w.name],E))continue;e.steps.push({title:(null===(s=u.Change)||void 0===s?void 0:s.title)||__("Change"),text:(null===(r=u.Change)||void 0===r?void 0:r.text)||"",audio:(null===(d=u.Change)||void 0===d?void 0:d.audio)||"",requirements:o?[o]:void 0,subject:"item-plugin-"+i+"-prop-"+w.name+"["+t.id+"]",defaultContent:{value:E},objectives:["item-plugin-"+i+"-prop-"+w.name+"-change"]})}o=null}}}return o}(t,d,s,e,i),i=function(e,t,i,n,o,s){return"number"==typeof n.width&&"number"==typeof n.height&&(e.steps.push({title:u.Resize&&u.Resize.title?u.Resize.title.replace("%s",__(i)):__("Resize"),text:u.Resize&&u.Resize.text?u.Resize.text:"",audio:u.Resize&&u.Resize.audio?u.Resize.audio:"",placement:"right",subject:"item-plugin-"+i+"["+t.id+"]",requirements:o?[o]:[],objectives:["item-plugin-"+i+"-resize-start"],forceBounds:{event:"item-plugin-"+i+"-resize-end",width:n.getWidth(),height:n.getHeight()}}),o="item-plugin-"+i+"-resize-end"),o}(t,d,s,e,i),i}var y=[a.PropertyType.ElementPositionLeft,a.PropertyType.ElementPositionTop];function b(e,t){var i;if(t){var n=e.getParent();(i=n?n.container.offset():{left:0,top:0}).top-=d?d.body.position().top:128}else i={left:0,top:0};return i}},"./HelpSystem/Tooltip.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ScenarioStepSubject:function(){return s},Tooltip:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(e,t,i,n,o,s){void 0===t&&(t=null),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===s&&(s=!1),this.elem=e,this.tipPlacement=t,this.topOffset=i,this.leftOffset=n,this.absolute=o,this.absoluteScroll=s;var r=e?(""+e[0].tagName).toLowerCase():"";"input"!==r&&"textarea"!==r&&"select"!==r&&"button"!==r&&"table"!==r||(this.absolute=!0,this.absoluteScroll=!0)}return e.prototype.calcSize=function(){return e.calcActualSize(this)},e.calcActualSize=function(t){var i,n=t instanceof e?t.elem:t,o=n.outerWidth(!0),s=n.outerHeight(!0),r=0;if(n.hasClass("wb-vertical-layout")){r=0;for(var a=0,l=(i=n.children(".wb-horiz-lay-item")).length;a<l;a++){var c=e.calcActualSize(i.eq(a)).width;c>0&&(0==r||c<r)&&(r=c)}}else if((i=n.children(".wb-horiz-lay-item")).length>0)for(r=0,a=0,l=i.length;a<l;a++)r+=e.calcActualSize(i.eq(a)).width;else if(1===(i=n.eq(0).children(":not(.wb-hlp-ttip)")).length){var u=i.first();if(u.hasClass("wb-vertical-layout"))return e.calcActualSize(u);r=u.outerWidth(!0)}return r>0&&r<o&&(o=r),{width:o,height:s}},e}(),r=function(){function e(e,t,i){void 0===i&&(i=null),this.title=e.title,this.text=e.text,this.el=o()('<div class="wb-hlp-ttip"><div class="wb-hlp-ttip-tip"><div></div></div></div>');var n=t.elem.offset(),s=e.placement?e.placement:t.tipPlacement?t.tipPlacement:"";s&&this.el.addClass("wb-hlp-ttip-"+s),this.el.css({whiteSpace:"normal",textTransform:"none",opacity:.9,position:t.absolute?"fixed":"absolute"}),"function"==typeof i&&this.el.append(o()('<div class="close">&times;</div>').on("click",i)),e.title&&this.el.append(o()('<div class="wb-hlp-ttip-title">'+e.title+"</div>").css({whiteSpace:"nowrap"})),e.text&&this.el.append(this.formatText(e.text));var r=0;if(e.text||"left"!==s&&"right"!==s?(this.el.find(".wb-hlp-ttip-tip").css({top:""}),r=20):(this.el.find(".wb-hlp-ttip-tip").css({top:"93%"}),r=0),t.absolute)o()(document.body).append(this.el);else{t.elem.append(this.el),t.elem.is("li")&&t.elem.css({position:"relative"});var a=t.elem[0];((a.className+"").indexOf("wb_move_btn")>=0||(a.className+"").indexOf("wb_edit_btn")>=0)&&(a=a.parentNode),"scrollIntoView"in a&&"function"==typeof a.scrollIntoView&&(e.subject&&e.subject.match(/^(toolbar-plugin-|item-plugin-[^-]+-prop-)/)||setTimeout((function(){try{a.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}catch(e){try{a.scrollIntoView({block:"center",inline:"center"})}catch(e){a.scrollIntoView(!1)}}}),40))}var l=t.absolute?n.left-(t.absoluteScroll?o()(document).scrollLeft():0):0,c=t.absolute?n.top-(t.absoluteScroll?o()(document).scrollTop():0):0,u=t.calcSize();"left"===s?(n.top=c+u.height/2-this.el.outerHeight(!0)/2+r,n.left=l-this.el.outerWidth(!0)+t.leftOffset):"right"===s?(n.top=c+u.height/2-this.el.outerHeight(!0)/2+r,n.left=l+u.width+7+t.leftOffset):"top"===s?(n.top=c-this.el.outerHeight(!0)+t.topOffset,n.left=l+(u.width-this.el.outerWidth(!0))/2):(n.top=c+u.height+t.topOffset,n.left=l+(u.width-this.el.outerWidth(!0))/2),this.el.css({left:n.left,top:n.top})}return e.prototype.formatText=function(e){return e.replace(/\*([^\*]+)\*/g,"<b>$1</b>")},e}()},"./HelpSystem/VirtualCursor.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{VirtualCursor:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./HelpSystem/AnimTween.ts"),r=function(){function e(){var e=this;this.tween=null,this.elem=o()("<div>").css({position:"fixed",zIndex:99999,left:200,top:200}),this.pointer=o()('<svg width="334" height="465" viewBox="0 0 33.2 42.6"><path style="fill:#000000;stroke:#ffffff;stroke-width:2;" d="m 32.4,28.4 c -0.2,0.1 -0.4,0.1 -0.6,0.1 L 14.5,28 c -0.4,0 -0.9,0.2 -1.1,0.5 L 2.6,42.1 C 2.5,42.3 2.3,42.4 2.1,42.5 1.8,42.6 1.4,42.7 1.1,42.6 0.5,42.4 0.2,41.9 0.2,41.3 L 0,1.4 C 0,0.9 0.3,0.4 0.8,0.1 1.3,-0.2 1.9,0 2.3,0.3 L 32.7,26 c 0.5,0.4 0.6,1 0.4,1.6 -0.1,0.4 -0.4,0.6 -0.7,0.8 z" /></svg>').css({width:24,height:25,position:"relative",zIndex:3}).appendTo(this.elem),this.clickIndicator=o()("<div>").addClass("click-pulse").css({zIndex:1,borderRadius:30,border:"2px solid #000",opacity:0,position:"absolute"}).appendTo(this.elem),this.clickIndicator.clone().css({borderColor:"#fff"}).appendTo(this.elem),this.clickIndicator.clone().css({marginLeft:"-120px"}).appendTo(this.elem),this.clickIndicator.clone().css({marginLeft:"120px"}).appendTo(this.elem),this.elem.on("click",(function(){return e.animClick()}))}return e.prototype.getElem=function(){return this.elem},e.prototype.dispose=function(){this.elem.detach()},e.prototype.animClick=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1);var i=this.elem.children(".click-pulse");i.eq(0).addClass("vcursor-click-pulse"),t&&(i.eq(2).addClass("vcursor-click-pulse"),i.eq(3).addClass("vcursor-click-pulse")),setTimeout((function(){return i.eq(1).addClass("vcursor-click-pulse")}),100),setTimeout((function(){i.removeClass("vcursor-click-pulse"),e&&e()}),500)},e.prototype.moveTo=function(e,t,i,n){var o=this;void 0===t&&(t=null),void 0===i&&(i=200),void 0===n&&(n=24),this.tween&&this.tween.dispose();var r={left:0,top:0},a=0,l=0;e.left&&"number"==typeof e.left&&(r.left=e.left),e.top&&"number"==typeof e.top&&(r.top=e.top),this.tween=new s.AnimTween(i,n,(function(){var e=o.elem.offset();o.elem.css({left:e.left+a,top:e.top-window.scrollY+l})}),(function(e){var t=o.elem.offset();a=(r.left&&"number"==typeof r.left?r.left-t.left:0)/e.numKeyframes,l=(r.top&&"number"==typeof r.top?r.top-t.top:0)/e.numKeyframes}),t).start()},e}()},"./HorizontalLayout.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{HorizontalLayout:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIContainer.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t){var i=e.call(this,"%inherit%"===t?t:"div")||this;return i.columnWeights={},i.columnWeightsSmall={},"%inherit%"===t||i._elem.addClass("row"),i}return a(t,e),t.prototype.buildInit=function(e,t){if(e.columnWeights&&"object"==typeof e.columnWeights&&e.columnWeights.length)for(var i=0;i<e.columnWeights.length;i++)this.setColWeight(i,e.columnWeights[i]);if(e.columnWeightsSmall&&"object"==typeof e.columnWeightsSmall&&e.columnWeightsSmall.length)for(i=0;i<e.columnWeightsSmall.length;i++)this.setColWeight(i,e.columnWeightsSmall[i],1);"noPadding"in e&&e.noPadding&&this.setNoPadding(!0)},t.prototype._appendChild=function(e){var t=s()("<div>").append(e.getElem());this._elem.append(t);var i=Math.floor(12/this._elem.children().length);i<1&&(i=1);var n=this._elem.children().length-1;"#"+n in this.columnWeights?this._elem.children().eq(n).attr("class","wb-horiz-lay-item col-md-"+this.columnWeights["#"+n]):this._elem.children().attr("class","wb-horiz-lay-item col-md-"+i),"#"+n in this.columnWeightsSmall&&this._elem.children().eq(n).addClass("col-sm-"+this.columnWeightsSmall["#"+n])},t.prototype._detachChild=function(e){var t=e.getElem(),i=t.parent();t.detach(),i.remove();var n=Math.floor(12/this._elem.children().length);n<1&&(n=1),this._elem.children().attr("class","wb-horiz-lay-item col-md-"+n)},t.prototype.applyLayoutCellCss=function(e,t){return this._elem.children().eq(e).css(t),this},t.prototype.setColWeight=function(e,t,i){void 0===i&&(i=0);var n=Math.floor(12/this._elem.children().length);return 1===i?("#"+e in this.columnWeightsSmall&&(n=this.columnWeightsSmall["#"+e]),this.columnWeightsSmall["#"+e]=t,this._elem.children().eq(e).removeClass("col-sm-"+n).addClass("col-sm-"+t)):("#"+e in this.columnWeights&&(n=this.columnWeights["#"+e]),this.columnWeights["#"+e]=t,this._elem.children().eq(e).removeClass("col-md-"+n).addClass("col-md-"+t)),this},t.prototype.setColWeightAll=function(e){for(var t=0;t<e.length;t++)this.setColWeight(t,e[t]);return this},t.prototype.setNoPadding=function(e){e?this._elem.addClass("wb-horiz-lay-no-padding"):this._elem.removeClass("wb-horiz-lay-no-padding")},t}(r.UIContainer)},"./IFrameControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{IFrameControl:function(){return r}});var n,o=i("./UIComponent.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t,i){var n=e.call(this,"iframe")||this;return n.parseUrl(t||"about:blank"),n.params="object"==typeof i?i:{},n._elem.attr({frameborder:"0",src:n.buildUrl()}).css({width:"200px",height:"200px"}),n}return s(t,e),t.prototype.buildInit=function(e,t){this.parseUrl(e.url?e.url:"about:blank"),e.params&&"object"==typeof e.params&&(this.params=e.params),this._elem.attr("src",this.buildUrl())},t.prototype.parseUrl=function(e){var t=(e?e+"":"").split("?");this.url=t[0];for(var i=t.length>1?t[1].split("&"):[],n=0;n<i.length;n++){var o=i[n].split("=");this.params[o[0]]=o.length>1?o[1]:""}},t.prototype.buildUrl=function(){var e=this.url,t="";for(var i in this.params)t+=(t.length>0?"&":"")+i+"="+encodeURIComponent(this.params[i]);return e+(t.length>0?"?"+t:"")},t.prototype.setParam=function(e,t){this.params[e]=t,this._elem.attr("src",this.buildUrl())},t.prototype.setParams=function(e){this.params="object"==typeof e?e:{},this._elem.attr("src",this.buildUrl())},t.prototype.getValue=function(){return this.buildUrl()},t.prototype.setValue=function(e,t){void 0===t&&(t=null),this.url="",this.params="object"==typeof t&&t?t:{},this.parseUrl(e),this._elem.attr("src",this.buildUrl())},t}(o.UIComponent)},"./ItemContainer.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ItemContainer:function(){return l},ItemContainerItem:function(){return a}});var n,o=i("./UIContainer.ts"),s=i("./VerticalLayout.ts"),r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e){function t(t,i){var n=e.call(this)||this;return n.item=t,n.list=i,n.buildLayout(),n.load(),n}return r(t,e),t.prototype.reload=function(){},t}(o.UIContainer),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemElements=[],t}return r(t,e),t.prototype.buildInit=function(e,t){e.itemType&&(this.itemType=e.itemType),e.itemElemType&&(this.itemElemType=e.itemElemType)},t.prototype.reload=function(){for(var e=0,t=this.itemElements;e<t.length;e++)t[e].reload()},t.prototype.setValue=function(e){this.removeAllChildren(),this.itemElements=[];for(var t=0;t<e.length;t++)this.addItem(e[t])},t.prototype.getValue=function(){return this.itemElements.map((function(e){return e.store(),e.item}))},t.prototype.addItem=function(e){var t=new this.itemElemType(e,this);this.itemElements.push(t),this.addChild(t)},t.prototype.removeItemElem=function(e){var t=this.itemElements.indexOf(e);if(t>=0){var i=this.itemElements.splice(t,1);this.removeChild(i[0])}},t.prototype.newItem=function(){this.addItem(new this.itemType)},t}(s.VerticalLayout)},"./KindaPromise.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{KindaPromise:function(){return n}});var n=function(){function e(e){var t=this;this.resolveFuncList=[],this.rejectFuncList=[],this.bothFuncList=[],this.rejectVal=null,this.result=0,e((function(e){return t.resolve(e)}),(function(e){return t.reject(e)}))}return e.prototype.resolve=function(e){this.resolveVal=e,this.result=1;for(var t=0,i=this.resolveFuncList;t<i.length;t++)i[t].call(this,this.resolveVal);for(var n=0,o=this.bothFuncList;n<o.length;n++)o[n].call(this)},e.prototype.reject=function(e){this.rejectVal=e,this.result=-1;for(var t=0,i=this.rejectFuncList;t<i.length;t++)i[t].call(this,this.rejectVal);for(var n=0,o=this.bothFuncList;n<o.length;n++)o[n].call(this)},e.prototype.then=function(e){return this.resolveFuncList.push(e),this.result>0&&e.call(this,this.resolveVal),this},e.prototype.catch=function(e){return this.rejectFuncList.push(e),this.result<0&&e.call(this,this.rejectVal),this},e.prototype.finally=function(e){return this.bothFuncList.push(e),0!=this.result&&e.call(this),this},e}()},"./Label.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Label:function(){return u}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./WB_ToolTipControl.class.js"),l=i.n(a),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e){function t(t,i){void 0===i&&(i="");var n=e.call(this,"%inherit%"===t?t:void 0)||this;return n.toolTip=null,"%inherit%"!==t&&(n.setText(t),i&&n.setHelpText(i)),n}return c(t,e),t.prototype.buildInit=function(e,t){e.value?this.setText(e.value):e.text?this.setText(e.text):e.html&&this.setHtml(e.html),e.helpText&&this.setHelpText(e.helpText,e.helpPlacement?e.helpPlacement:"right")},t.prototype._createElem=function(){return s()("<label>").addClass("wb-label-ctrl")},t.prototype.setHelpText=function(e,t){return void 0===e&&(e=null),void 0===t&&(t="top"),!this.toolTip&&e?(this.toolTip=new(l())("?",e,t),this._elem.append(this.toolTip.elem)):this.toolTip&&e?(this.toolTip.setTitle(e,!1),this.toolTip.setPlacement(t)):this.toolTip&&!e&&(this.toolTip.elem.remove(),this.toolTip=null),this},t.prototype.setText=function(e){return this._elem.text(e),this},t.prototype.getText=function(){return this._elem.text()},t.prototype.setHtml=function(e){return"string"==typeof e?this._elem.html(e):this._elem.empty().append(e),this},t.prototype.getHtml=function(){return this._elem.html()},t}(r.UIComponent)},"./LayoutElement.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{LayoutElement:function(){return N}});var n,o=i("./ElementRegister.ts"),s=i("./Element.ts"),r=i("./CommonTypes.ts"),a=i("./Service.ts"),l=i("./BuilderEvent.ts"),c=i("./FlowLayout.ts"),u=i("./VerticalLayout.ts"),d=i("./HorizontalLayout.ts"),h=i("./BackgroundControl.ts"),p=i("./Label.ts"),m=i("./element/ZIndexHandle.ts"),g=i("./BorderControl.ts"),f=i("./RoundCornersControl.ts"),y=i("./UIModeScaleFactors.ts"),b=i("./element/ControlsSelectionBorder.ts"),v=i("./element/Controls.ts"),_=i("./element/ControlsCircleButton.ts"),C=i("./ui/FlexLayoutControl.ts"),w=i("./ContextMenu.ts"),T=i("./PluginApi/UIManager.ts"),E=i("./util/HistoryUtil.ts"),I=i("./ui/BackgroundElementSelector.ts"),x=i("./element/PropertyType.ts"),S=i("./util/MathUtil.ts"),k=i("./element/ElementBackground.ts"),D=i("./lib/jquery-1.11.3.min.js"),O=i.n(D),R=i("./WB_URLControl.class.js"),P=i.n(R),L=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),A=function(){return A=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},M=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},B=null;var N=function(e){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=!1);var n=e.call(this,t,i)||this;if(n._renderedLayout=new C.FlexLayoutControlValue,n._layout=new C.FlexLayoutControlValue,n.children=[],n._scaleFactors=null,n._borderRadius=null,n._border=null,n._isSticky=!1,n._stickyAlign="center top",n.zIndexHandle=new m.ZIndexHandle(n,11),n.isFlexible=!0,n.backgroundElementContainer=null,n._backgroundElement=null,n._collapsed=!1,n._link=null,n.isDnDInfoMsgVisible=!1,n.dndInfoMsg=null,n.stickyUpdateCallback=null,n.elem.addClass("wb-layout-element"),n.setEmptyMessageImage("fa fa-columns"),n._margin={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0},n._background=null,t&&t.content){if("layout"in t.content)n._layout=n._renderedLayout=new C.FlexLayoutControlValue(t.content.layout);else if("childrenLayout"in t.content){var s=t.content;s.type=s.childrenLayout,"wrapResolution"in s&&(s.wrapRes=s.wrapResolution),n._layout=n._renderedLayout=new C.FlexLayoutControlValue(s)}t.content.padding&&O().extend(n._individualMargin,t.content.padding),n._margin=t.content.margin?t.content.margin:n._margin,n._background=t.content.background?t.content.background:n._background,n._scaleFactors=t.content.scaleFactors?t.content.scaleFactors:n._scaleFactors,n._border=t.content.border||(0,g.buildCss)({color:"#000",style:"solid",weight:0}),t.content.borderRadius&&(n._borderRadius=t.content.borderRadius),t.content.stickyAlign&&(n._stickyAlign=t.content.stickyAlign),t.content.isSticky&&(n._isSticky=!!t.content.isSticky);var r=void 0;if(t.content.backgroundElement&&"string"==typeof(r=t.content.backgroundElement).class&&(r.isBackgroundElement=!0,n.isElementPreview&&(r.isElementPreview=!0),o.ElementRegister.createElement(r.class,r,!0,!1,(function(e){n.backgroundElement=e}))),t.content.children)for(var a=0;a<t.content.children.length;a++)(r=t.content.children[a])&&"string"==typeof r.class&&(n.isElementPreview&&(r.isElementPreview=!0),r._copy=t._copy,o.ElementRegister.createElement(r.class,r,!0,!1,(function(e){n.addChild(e,!1,!0)})));n._collapsed=!!t.content.collapsed,n._link="link"in t.content&&t.content.link?t.content.link:null}return n.initDroppable(),n.controls.updatePadding(n.getActualPadding()),n.controls.setCloneHandler((function(e,t){(function(e,t,i){if(!B){B={menu:new w.ContextMenu,ref:t,after:i};for(var n=function(e){if("-"==e.name)return B.menu.addSeparator(),"continue";B.menu.addItem("wb-elcol-"+e.id,e.name,(function(){o.ElementRegister.createElementOrComposition(e.id,null,(function(e){B&&function(e,t,i){if(t.parent){var n={content:{layout:t.serialize().content.layout}};o.ElementRegister.createElement(t.getClassType(),n,!1,!1,(function(n){if(t.parent){t.parent.addChild(n,!1,!1,t,i),n.updateStyle();for(var o=0,s=e;o<s.length;o++){var r=s[o];n.addChild(r),r.updateStyle()}(0,E.createAddElementsHistoryRecord)(M([n],e,!0))}}))}}(e,B.ref,B.after)}))}),!1,e.inactive,null,e.icon)},s=0,r=(0,T.getApiInstance)().getCompositionCollections();s<r.length;s++)n(r[s])}B.ref=t,B.after=i,B.menu.show(e)})(t,n,e==_.CircleButtonType.BOTTOM||e==_.CircleButtonType.RIGHT),t.preventDefault(),t.stopPropagation()})),n._isSticky&&n.stickyInit(),n.updateStyle(!0),setTimeout((function(){return n.updateDnDInfoMessage()}),500),n}return L(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this._margin},set:function(e){this._margin=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactors",{get:function(){return this._scaleFactors},set:function(e){this._scaleFactors=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(e){this._borderRadius=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){var e=(0,g.buildCss)(this._border||null);return(0,g.applyRadiusValue)(e,this._borderRadius),e},set:function(e){this._border=A({},e),delete this._border.radius,this._borderRadius=(0,g.toRadiusValue)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSticky",{get:function(){return this._isSticky},set:function(e){var t;this._isSticky=e,e?this.stickyInit():this.stickyDeInit(),this.parent?this.parent.zIndexHandle.assignLayer(this,!1):this.system&&(null===(t=this.system.getCurrentContextCanvas())||void 0===t||t.zIndexHandle.assignLayer(this,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stickyAlign",{get:function(){return this._stickyAlign},set:function(e){this._stickyAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundElement",{get:function(){return this._backgroundElement},set:function(e){this._backgroundElement!==e&&(this._backgroundElement&&(this.backgroundElementContainer&&(e?this.backgroundElementContainer.empty():(this.backgroundElementContainer.remove(),this.backgroundElementContainer=null)),this._backgroundElement.isBackgroundElement=!1),this._backgroundElement=e,this._backgroundElement&&(this.backgroundElementContainer||(this.backgroundElementContainer=O()('<div class="wb-layout-bg-element" />'),this.backgroundElementContainer.insertBefore(this.container)),this.backgroundElementContainer.append(this._backgroundElement.elem),this._backgroundElement.isBackgroundElement=!0,this._backgroundElement.setParent(this),this._backgroundElement.setLayoutConstraints(r.ChildrenLayoutType.Absolute),this._backgroundElement.setLocation(0,0),this._backgroundElement.setSize("100%","100%"),this._backgroundElement.updateStyle()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collapsed",{get:function(){return this._collapsed},set:function(e){e!=this._collapsed&&(this._collapsed=e,l.GlobalEvents.triggerEvent(e?"site.structure.collapse":"site.structure.expand",new l.SiteStructureCollapseExpandBuilderEvent(this,e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e,l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),t.prototype.switchMode=function(t,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),e.prototype.switchMode.call(this,t,i,n,o),this.controls.updatePadding(this.getActualPadding())},t.prototype.setSelected=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.prototype.setSelected.call(this,t,i,n);for(var o=0,s=this.children;o<s.length;o++)s[o].controls.setParentMarginsVisible(t)},t.prototype.handleValueChange=function(t,i,n){n!=b.ValueType.PADDING&&n!=b.ValueType.MARGIN||(i/=this.getCurrentModeScaleFactor()),e.prototype.handleValueChange.call(this,t,i,n)},t.prototype.getDataDefaults=function(){return O().extend(e.prototype.getDataDefaults.call(this),{minWidth:20,minHeight:20})},t.prototype.serialize=function(){for(var t=e.prototype.serialize.call(this),i=[],n=0,o=this.children;n<o.length;n++){var s=o[n];i.push(s.serialize())}return t.content={layout:this.layout.serialize(),margin:A({},this._margin),children:i,background:this.background,border:this.border,borderRadius:this.borderRadius,isSticky:this.isSticky,stickyAlign:this.stickyAlign,backgroundElement:this.backgroundElement?this.backgroundElement.serialize():null,scaleFactors:this._scaleFactors,collapsed:this._collapsed,link:this.link},t},t.prototype.appendRestorationData=function(t){if(e.prototype.appendRestorationData.call(this,t),t.content&&(t.content.backgroundElement&&this.backgroundElement&&this.backgroundElement.id===t.content.backgroundElement.id&&this.backgroundElement.appendRestorationData(t.content.backgroundElement),t.content.children&&t.content.children.length)){for(var i={},n=0,o=this.children;n<o.length;n++){var s=o[n];i[s.id]=s}for(var r=0,a=t.content.children;r<a.length;r++){var l=a[r];i.hasOwnProperty(l.id)&&i[l.id].appendRestorationData(l)}}},t.prototype.onBeforeRemove=function(t){if(e.prototype.onBeforeRemove.call(this,t),!t.preventRemoval){this.backgroundElement&&this.backgroundElement.onBeforeRemove(t);for(var i=this.children.length-1;i>=0;i--){if(t.preventRemoval)return;this.children[i].onBeforeRemove(t)}}},t.prototype.releaseResources=function(t){var i=t.isRecursive?t:O().extend({},t,{isRecursive:!0});this.backgroundElement&&this.backgroundElement.remove(i);for(var n=this.children.length-1;n>=0;n--)this.children[n].remove(i);this.isSticky&&this.stickyDeInit(),e.prototype.releaseResources.call(this,t)},t.prototype.extractBackground=function(){this.backgroundElement&&(wb_builder.historyAdd("extractBackground",{parent:this.id,element:this.backgroundElement.id},(function(e){var t=window.getElementById(e.parent),i=window.getElementById(e.element);t&&i?(i.setSelected(!1),t.removeChild(i),t.backgroundElement=i,t.updateStyle(),l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent)):console.error("Unable to undo 'extractBackground' action. Related elements not found.")}),(function(e){var t=window.getElementById(e.parent),i=window.getElementById(e.element);t&&i?(i.setParent(null),t.addChild(i),t.backgroundElement=null,t.updateStyle(),l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent)):console.error("Unable to redo 'extractBackground' action. Related elements not found.")})),this.backgroundElement.setParent(null),this.addChild(this.backgroundElement),this.backgroundElement=null,this.updateStyle(),l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent))},t.prototype.canUseAsBackground=function(){return!1},t.prototype.onResize=function(t){e.prototype.onResize.call(this,t),this.updateStyle(t)},t.prototype.onLiveResize=function(t,i){e.prototype.onLiveResize.call(this,t,i),this.updateStyle()},t.prototype.getDefaultResizeMode=function(){return v.ControlsResizeMode.ALL},t.prototype.getWrap=function(){return this.layout.wrap},t.prototype.getHorizontalAlignment=function(){return this.layout.hAlign},t.prototype.getVerticalAlignment=function(){return this.layout.vAlign},t.prototype.getHorizontalSpacing=function(){return this.layout.hSpacing},t.prototype.getVerticalSpacing=function(){return this.layout.vSpacing},t.prototype.supportsAutoWidth=function(){return!0},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.supportsPadding=function(){return!0},t.prototype.updateDnDInfoMessage=function(){this.setDnDInfoMessageVisible(0==this.children.length&&this.getHeightInPixels()>=40&&!this.isElementPreview&&!this.parent)},t.prototype.setDnDInfoMessageVisible=function(e){this.isDnDInfoMsgVisible!=e&&(this.isDnDInfoMsgVisible=e,e?(this.dndInfoMsg||(this.dndInfoMsg=O()("<div>").addClass("wb-lednd-msg").text(__("Drag and drop element here"))),this.dndInfoMsg.appendTo(this.elem)):this.dndInfoMsg&&this.dndInfoMsg.detach())},t.prototype.updateLayout=function(){if(this._renderedLayout&&this._layout){var e=this.getBoundingRect(),i={};if(this._renderedLayout.type!==r.ChildrenLayoutType.Absolute&&this._layout.type===r.ChildrenLayoutType.Absolute){this.backupResponsiveData();for(var n=0,o=this.children;n<o.length;n++)(p=o[n]).backupResponsiveData(),i[p.id]=p.getBoundingRect()}if(this._layout.type==r.ChildrenLayoutType.Vertical?this.container.removeClass("wb-layout-absolute wb-layout-horizontal").addClass("wb-layout-vertical"):this._layout.type==r.ChildrenLayoutType.Horizontal?this.container.removeClass("wb-layout-absolute wb-layout-vertical").addClass("wb-layout-horizontal"):this.container.removeClass("wb-layout-horizontal wb-layout-vertical").addClass("wb-layout-absolute"),this._renderedLayout!==this._layout)for(var s=0,a=this.children;s<a.length;s++)(p=a[s]).setLayoutConstraints(this._layout.type);if(this._renderedLayout.type!==r.ChildrenLayoutType.Absolute&&this._layout.type===r.ChildrenLayoutType.Absolute){this.useMinWidth=this.useMaxWidth=this.useMinHeight=this.useMaxHeight=!1,this.flexGrow=this.flexShrink=0,this.setSize(Math.round(e.width),Math.round(e.height));for(var l=0,c=this.children;l<c.length;l++){var u=i[(p=c[l]).id];p.setLocation(Math.round(u.left-e.left),Math.round(u.top-e.top)),p.setSize(Math.round(u.width),Math.round(u.height))}}else if(this._renderedLayout.type===r.ChildrenLayoutType.Absolute&&this._layout.type!==r.ChildrenLayoutType.Absolute){this.getLayoutConstraints()!==r.ChildrenLayoutType.Absolute&&this.restoreResponsiveData();for(var d=0,h=this.children;d<h.length;d++){var p;(p=h[d])instanceof t&&p.getChildrenLayout()===r.ChildrenLayoutType.Absolute||p.restoreResponsiveData()}}this._renderedLayout=this._layout,this.updateDnDInfoMessage()}},t.prototype.getChildrenLayout=function(){return this.layout.type},t.prototype.getChildrenHorizontalAlign=function(){return this.layout.hAlign},t.prototype.setLayoutConstraints=function(t,i){void 0===i&&(i=!1),e.prototype.setLayoutConstraints.call(this,t,i),this.parent&&t==r.ChildrenLayoutType.Horizontal?this.controls.setCloneMode(v.CloneMode.HORIZONTAL):this.parent&&t==r.ChildrenLayoutType.Vertical?this.controls.setCloneMode(v.CloneMode.VERTICAL):this.controls.setCloneMode(v.CloneMode.NONE)},t.prototype.setDebugLinesVisible=function(t){e.prototype.setDebugLinesVisible.call(this,t);for(var i=0,n=this.children;i<n.length;i++)n[i].setDebugLinesVisible(t)},t.prototype.updateHierarchyLevel=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e.prototype.updateHierarchyLevel.call(this,t,i);for(var n=0,o=this.children;n<o.length;n++)o[n].updateHierarchyLevel(t,i)},t.prototype.zReset=function(){this.zIndexHandle.changeLayer();for(var e=0,i=this.children;e<i.length;e++){var n=i[e];n instanceof t&&n.zReset()}},t.prototype.setParent=function(t,i){void 0===i&&(i=!1),e.prototype.setParent.call(this,t,i),this.isFlexible=!t,this.updateSize(i),this.updateDnDInfoMessage()},t.prototype.addChild=function(e,i,n,o,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);var c=o instanceof s.Element&&o?this.children.indexOf(o):-1;if(o&&c<0)return!1;if(this.children.indexOf(e)>=0&&(!o||o===e))return!1;var u=e.getParent();return!!(u!==this||o&&o!==e)&&(u?(u.removeChild(e),u==this&&(c=o instanceof s.Element&&o?this.children.indexOf(o):-1)):e instanceof t&&wb_builder.bodyInstance.removeChild(e),o?r?o.elem.after(e.elem):o.elem.before(e.elem):this.container.append(e.elem),e.setParent(this,n),c>=0?this.children.splice(c+(r?1:0),0,e):this.children.push(e),e.setLayoutConstraints(this._layout.type,n),this.zIndexHandle.assignLayer(e,i),this.updateDnDInfoMessage(),n||(l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent),a.Service.HelpSystemPlayer.notify("add-plugin-"+e.getClassType(),e)),!0)},t.prototype.removeChild=function(e,t){void 0===t&&(t=!1);var i=this.children.indexOf(e);i>=0&&(this.children.splice(i,1),e.setParent(null),this.zIndexHandle.changeLayer()),this.container[0].contains(e.elem[0])&&e.elem.detach(),t||(this.updateDnDInfoMessage(),l.GlobalEvents.triggerEvent("site.structure.changed",new l.SiteStructureChangedBuilderEvent))},t.prototype.isEmpty=function(){return 0==this.children.length},t.prototype.getChildren=function(){return M([],this.children,!0)},t.prototype.getChildIndex=function(e){return this.children.indexOf(e)},t.prototype.getChildAt=function(e){return e>=0&&e<this.children.length?this.children[e]:null},t.prototype.getName=function(t){if(void 0===t&&(t=!1),!this.name||t){var i="Block";return this.layout.type==r.ChildrenLayoutType.Horizontal?i=__("Horizontal Layout"):this.layout.type==r.ChildrenLayoutType.Vertical&&(i=__("Vertical Layout")),i}return e.prototype.getName.call(this)},t.prototype.getIcon=function(){return this.layout.type==r.ChildrenLayoutType.Horizontal?"wbico wbico-horizontal-layout":this.layout.type==r.ChildrenLayoutType.Vertical?"wbico wbico-vertical-layout":"wbico wbico-block-layout"},t.prototype.hasActiveLink=function(){return P().isActiveLinkValue(this._link)},t.prototype.getSiteTreeNodeProperties=function(){var t=e.prototype.getSiteTreeNodeProperties.call(this);return t.collapsible=!0,t.isCollapsed=this.collapsed,t.hasLink=this.hasActiveLink(),t.hasBg=!!this.backgroundElement,t.hasBgGallery=!!this.backgroundElement&&"Gallery"===this.backgroundElement.className,t},t.prototype.getSiteTreeNodeChildren=function(){var e=this.getChildren();return this.layout.type==r.ChildrenLayoutType.Absolute&&e.sort((function(e,t){var i=e.top,n=t.top;return i===n&&(i=e.left,n=t.left),i===n&&(i=t.getZIndex(),n=e.getZIndex()),i===n?0:i<n?-1:1})),e},t.prototype.isAcceptingChildren=function(){return!0},t.prototype.getActualMargins=function(){var t=e.prototype.getActualMargins.call(this);if(!t)return null;var i=this.getCurrentModeScaleFactor();return t.marginTop=Math.round(t.marginTop*i),t.marginRight=Math.round(t.marginRight*i),t.marginBottom=Math.round(t.marginBottom*i),t.marginLeft=Math.round(t.marginLeft*i),t},t.prototype.getActualPadding=function(){var e=A({},this._individualMargin),t=this.getCurrentModeScaleFactor();return e.paddingTop=Math.round(e.paddingTop*t),e.paddingRight=Math.round(e.paddingRight*t),e.paddingBottom=Math.round(e.paddingBottom*t),e.paddingLeft=Math.round(e.paddingLeft*t),e},t.prototype.getContentPadding=function(){return this._individualMargin?O().extend({},this._individualMargin):null},t.prototype.comProperties=function(){var t=this;this.individualMargin||(this.individualMargin={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});var i=e.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{name:__("Layout"),children:[{type:u.VerticalLayout,spacing:15,children:[{type:C.FlexLayoutControl,id:"layout"},{type:d.HorizontalLayout,columnWeights:[2,10],children:[{type:"CheckBox",id:"isSticky",label:__("Sticky")}]}]}]},{name:__("Spacing"),type:"spacing",children:[{type:u.VerticalLayout,spacing:15,children:[{type:u.VerticalLayout,id:"scaleFactorsBlock",css:{marginTop:this.isResizable?15:0},children:[{type:"Label",text:__("Padding and margin scale factors")},{type:y.UIModeScaleFactors,id:"scaleFactors"}]}]}]},{name:__("Style"),type:"style",children:[{type:u.VerticalLayout,spacing:15,children:[{type:c.FlowLayout,children:[{type:h.BackgroundControl,id:"background",useColor:!0,useImage:!0,usePosition:!0,useRepeat:!0,useAttachment:!0,useSize:!0,useFullWidth:!1},{type:u.VerticalLayout,id:"bgElementBlock",children:[{type:p.Label,text:__("Background element")},{type:I.BackgroundElementSelector,id:"bgElement"}]}]},{type:d.HorizontalLayout,columnWeights:[4,8],children:[{type:u.VerticalLayout,children:[{type:p.Label,text:__("Border")},{type:g.BorderControl,id:"border",noTransparent:!1}]},{type:u.VerticalLayout,children:[{type:p.Label,text:__("Rounded corners")},{type:f.RoundCornersControl,id:"borderRadius"}]}]}]}]}],callbackFunc:function(e){t.background=e.background.getValue(),e.bgElement.getValue()||t.extractBackground(),t.border=e.border.getValue(),t.borderRadius=e.borderRadius.getValue(),t.isSticky=e.isSticky.getValue(),t.scaleFactors=e.scaleFactors.getValue(),t._scaleFactors&&100===t._scaleFactors.tv&&100===t._scaleFactors.desktop&&100===t._scaleFactors.tablet&&100===t._scaleFactors.phone&&(t._scaleFactors=null),t.layout=e.layout.getValue()}});return i.background.setValue(this.background),i.bgElementBlock.setVisible(!!this.backgroundElement),i.bgElement.setValue(this.backgroundElement),i.border.setValue(this.border),i.borderRadius.setValue(this.borderRadius),i.isSticky.setValue(this.isSticky),i.scaleFactors.setValue(this.scaleFactors),i.layout.setValue(this.layout),i},t.prototype.isChildrenLayoutHorizontalNow=function(){return this.layout.type===r.ChildrenLayoutType.Horizontal&&(""===this.layout.wrapRes||a.Service.modeManager.compareModes(a.Service.modeManager.getMode(),this.layout.wrapRes)>0)},t.prototype.getCurrentModeScaleFactor=function(){return this._scaleFactors?this._scaleFactors[a.Service.modeManager.getMode()]/100:1},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return this._background&&this._background.image&&""!==this._background.image&&"none"!==this._background.image&&t.push(this._background.image),t},t.prototype.initDroppable=function(){var e=this;this.container&&this.container.droppable({tolerance:"pointer",greedy:!0,hoverClass:"wb-state-highlight",accept:".wb_element,.wb_item",drop:function(t,i){if(t.originalEvent.isImmediatePropagationStopped())return!1;var n=function(t,i,n){var o=i[0];e.addChild(o),wb_builder.setPageModified(!0),e.updateStyle()},s=i.draggable.wbGetClassInstance();if(s){if(s.removed||s.dropAccepted)return;n(0,[s])}else{var r=i.draggable.attr("id");if(!(r=r?r.split("__")[1]:null))return;var a={content:{}};o.ElementRegister.createElementOrComposition(r,(function(e,t){return a}),(function(e,t){n(0,e)}))}return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),t.returnValue=!1,!1}})},t.prototype.updateStyle=function(t,i,n){if(void 0===n&&(n=!1),e.prototype.updateStyle.call(this,t,i),this.updateLayout(),this.container&&this.children){var o=this.isChildrenLayoutHorizontalNow();(0,k.apply)(this,this.background,this.container,n,"",this.borderRadius),this.border&&this.border.css&&this.container.css(this.border.css),this.borderRadius&&this.borderRadius.css&&this.container.css(this.borderRadius.css),this.elem.css({position:this.isSticky?"fixed":""});var s=this.getCurrentModeScaleFactor();this.container.css({position:"relative",minWidth:20,minHeight:20,padding:this._individualMargin?Math.round(this._individualMargin.paddingTop*s)+"px "+Math.round(this._individualMargin.paddingRight*s)+"px "+Math.round(this._individualMargin.paddingBottom*s)+"px "+Math.round(this._individualMargin.paddingLeft*s)+"px":"",overflow:!this.isSticky||"left center"!=this.stickyAlign&&"right center"!=this.stickyAlign?"":"auto"}).css(this.layout.getContainerCss(o)),this.layout.type===r.ChildrenLayoutType.Horizontal&&(o?this.container.removeClass("wb-layout-temp-vertical"):this.container.addClass("wb-layout-temp-vertical"));for(var a=0,l=this.children;a<l.length;a++){var c=l[a];this.layout.type===r.ChildrenLayoutType.Horizontal&&(o?c.setLayoutConstraints(r.ChildrenLayoutType.Horizontal,t):c.setLayoutConstraints(r.ChildrenLayoutType.Vertical,t)),c.updateStyle(t,i)}this.isSticky&&this.stickyUpdatePosition()}},t.prototype.stickyInit=function(){var e=this;if(!this.stickyUpdateCallback){var t,i=0,n=0,o=function(){var s=e.stickyUpdatePosition();s!==t?(n=0,i=requestAnimationFrame(o)):i=++n<=2?requestAnimationFrame(o):0,t=s};this.stickyUpdateCallback=function(){i&&cancelAnimationFrame(i),t="",n=0,i=requestAnimationFrame(o)},O()(window).on("orientationchange resize scroll",this.stickyUpdateCallback),l.GlobalEvents.on("modes.changed",this.stickyUpdateCallback),l.GlobalEvents.on("site.structure.changed",this.stickyUpdateCallback),l.GlobalEvents.on("modal.show",this.stickyUpdateCallback),l.GlobalEvents.on("modal.hide",this.stickyUpdateCallback);for(var s=250;s<5e3;s+=250)setTimeout(this.stickyUpdateCallback,s);this.elem.addClass("wb-sticky"),wb_builder.bodyInstance.registerStickyElement(this)}},t.prototype.stickyDeInit=function(){this.stickyUpdateCallback&&(O()(window).off("orientationchange resize scroll",this.stickyUpdateCallback),l.GlobalEvents.off("modes.changed",this.stickyUpdateCallback),l.GlobalEvents.off("site.structure.changed",this.stickyUpdateCallback),l.GlobalEvents.off("modal.show",this.stickyUpdateCallback),l.GlobalEvents.off("modal.hide",this.stickyUpdateCallback),this.stickyUpdateCallback=null,this.elem.css({left:"",top:"",right:"",bottom:""}),this.elem.removeClass("wb-sticky"),wb_builder.bodyInstance.unregisterStickyElement(this))},t.prototype.stickyUpdatePosition=function(){if(!this.isSticky)return"";var e=wb_builder.getViewportRect();if(!e||e.width<=0||e.height<=0)return"";var t=(this.stickyAlign||"center top").split(" "),i=t[0],n=t[1],o={left:"right"!=i?e.left:"auto",top:"bottom"!=n?e.top:"auto",right:"left"!=i?e.right:"auto",bottom:"top"!=n?e.bottom:"auto",width:"center"===i||"auto"===this.width?"auto":S.MathUtil.calcSizeInPixels(this.width,e.width),height:"center"===n||"auto"===this.height?"auto":S.MathUtil.calcSizeInPixels(this.height,e.height)};return this.elem.css(o),wb_builder.bodyInstance.stickyInvalidate(),"".concat(e.left,"|").concat(e.top,"|").concat(e.right,"|").concat(e.bottom,"|").concat(e.width,"|").concat(e.height)},t.prototype.enableDropZone=function(e){this.container.droppable(e?"enable":"disable")},t.prototype.getBoundingClientRect=function(){return this.container[0].getBoundingClientRect()},t.prototype.getCalculatedHeight=function(e){void 0===e&&(e=!1);for(var t=0,i=this.children.length>0?0:100,n=0,o=this.children;n<o.length;n++){var s=o[n];if(s&&!s.isHidden()&&!s.isHidden(!0)){var r=s.getBounds(!1,e);t=Math.max(t,r.top2)}}return Math.max(t,i)},t.prototype.updateSize=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=0),void 0===i&&(i=!1),!this.parent&&this.layout.type==r.ChildrenLayoutType.Absolute){if(this.isFlexible||e){var n=this.getCalculatedHeight(i);n<this.minHeight&&(n=this.minHeight),parseInt(""+t)&&(n=Math.max(t,n)),this.setSize(null,n+(this._individualMargin?this._individualMargin.paddingTop+this._individualMargin.paddingBottom:0))}wb_builder.showLayout&&wb_builder.highlightLayout(!0,i)}},t.prototype.getPercentWidth=function(e){return e/(this.getWidthInPixels()-(this._individualMargin?this._individualMargin.paddingLeft+this._individualMargin.paddingRight:0))*100},t.prototype.isZIndexEnabled=function(){return this.isSticky||e.prototype.isZIndexEnabled.call(this)},t.prototype.isGlobalZIndex=function(){return this.isSticky||e.prototype.isGlobalZIndex.call(this)},t.prototype.initContextMenu=function(){var t=this;e.prototype.initContextMenu.call(this);var i=this.menu;i&&i.addItem("sticky",__("Sticky"),(function(){wb_builder.setPageModified(!0),t.isSticky=!t.isSticky,t.updateStyle()}),!1,!1,null,"fa fa-square-o")},t.prototype.updateContextMenu=function(t){void 0===t&&(t=!1),e.prototype.updateContextMenu.call(this,t);var i=this.menu;i&&(i.setVisible("order",this.isSticky),i.setName("sticky",__("Sticky"),"fa fa"+(this.isSticky?"-check":"")+"-square-o"))},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"isSticky",type:x.PropertyType.ElementPositionSticky}),this.registerProperty({name:"stickyAlign",type:x.PropertyType.StickyAlignment,dependencies:["isSticky"],uiComponentOptions:function(){return{visible:this.isSticky}}}),this.registerProperty({name:"layout",type:x.PropertyType.BlockLayout}),this.registerProperty({name:"scaleFactors",type:x.PropertyType.SpacingModeScaleFactors,onChange:function(e,t){t.controls.updateMargin(t.getActualMargins()),t.controls.updatePadding(t.getActualPadding())}}),this.registerProperty({name:"background",type:x.PropertyType.LayoutElementBackground,uiComponentOptions:{useColor:!0,useImage:!0,usePosition:!0,useRepeat:!0,useAttachment:!0,useSize:!0,useFullWidth:!1,useOpacity:!0,allowVideo:!0}}),this.registerProperty({name:"backgroundElement",type:x.PropertyType.ElementBackgroundElement,uiComponentOptions:function(){return{visible:!!this.backgroundElement}}}),this.registerProperty({name:"border",type:x.PropertyType.LayoutElementBgBorder}),this.registerProperty({name:"link",type:x.PropertyType.LayoutElementOnClickLink,uiComponentOptions:function(){return{helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):__("This whole block works as a big link if an URL is specified.")}}})},t}(s.Element);o.ElementRegister.registerClass("LayoutElement",N)},"./List.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{List:function(){return a}});var n,o=i("./UIComponent.ts"),s=i("./WB_ListControl.class.js"),r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.buildInit=function(e,t){var i,n,o=this;this._control=new s.ListControl({type:e.itemType?e.itemType:null,itemNameFunc:e.itemNameFunc?e.itemNameFunc:null,itemTitleFunc:e.itemTitleFunc?e.itemTitleFunc:null,editable:!!e.editable,sortable:!("sortable"in e)||!!e.sortable,addNewItemsToBeginning:"addNewItemsToBeginning"in e&&e.addNewItemsToBeginning,newItemButtonText:"newItemButtonText"in e?e.newItemButtonText:null}),this._elem=this._control.elem,e.listHeight&&this._control.setHeight(e.listHeight),"function"==typeof e.select&&(i=this,n=e.select,o._control.options.onSelect=function(e){return n.call(i,t,e,this)}),"function"==typeof e.selectNone&&function(e,i){o._control.options.onSelectNone=function(){return i.call(e,t)}}(this,e.selectNone),"function"==typeof e.add&&function(e,i){e._control.options.onAdd=function(n){return i.call(e,t,n,this.get(0))}}(this,e.add),"function"==typeof e.remove&&function(e,i){e._control.options.onRemove=function(n){return i.call(e,t,n,this.get(0))}}(this,e.remove)},t.prototype.setValue=function(e){this._control.setValue(e)},t.prototype.getValue=function(){return this._control.getValue()},t.prototype.setItemIcon=function(e,t){this._control.setItemIcon(e,t)},t.prototype.addItem=function(e,t,i,n){return this._control.addItem(e,t,i,n)},t.prototype.setItemLiEnabled=function(e,t){this._control.setItemLiEnabled(e,t)},t.prototype.setCustomBuildSearchBlobFunction=function(e){this._control.setCustomBuildSearchBlobFunction(e)},t.prototype.addSeparator=function(){this._control.addSeparator()},t.prototype.removeAllItems=function(){this._control.removeAllItems()},t.prototype.selectFirst=function(){this._control.selectFirst()},t.prototype.selectItemLi=function(e){this._control.selectItemLi(e)},t.prototype.selectItem=function(e){this._control.selectItem(e)},t.prototype.getItemsLi=function(){return this._control.getItemsLi()},t.prototype.getItems=function(e){return void 0===e&&(e=!1),this._control.getItems(e)},t.prototype.getLastSelected=function(){return this._control.lastSelected},t.prototype.getLastSelectedLi=function(){return this._control.lastSelectedLi},t}(o.UIComponent)},"./MenuConfirmDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{confirmDelete:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./Confirm.ts");function r(e,t){s.Confirm.showDialog(__("Delete menu"),o()('<div class="wb_change_template_dlg"><div class="qq">'+__("Are you sure you want to delete this menu?")+'</div><div class="red">'+__("Once deleted all pages this menu links to will also be deleted.")+"</div></div>"),[{title:__("No, keep current menu")},{title:__("Yes, delete menu"),cssClass:"btn-danger",func:e}],480,t),s.Confirm.dialog&&s.Confirm.dialog.setCenterButtons(!0)}},"./MenuListControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MenuListControl:function(){return l}});var n=i("./jquery-builder.ts"),o=i("./WB_ComboBox.class.js"),s=i.n(o),r=i("./util/MenuList.ts"),a=i("./util/TextUtil.ts"),l=function(){function e(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),this._maxNameLength=24,this._elem=new(s()),this._elem.elem.addClass("wb-menu-list-control"),i&&(this._elem.onBeforeChange=i.onBeforeChange,this._elem.onChange=i.onChange),e?this._maxNameLength=38:this._elem.elem.css({width:"220px"}),this.anchorMode=!!t,this.input=this._elem.input,this.button=this._elem.button,this.elem=this._elem.elem,this.reloadMenuList()}return e.prototype.getItems=function(){return this._elem.getOptionsData()},e.prototype.reloadMenuList=function(){this._elem.removeAllOptions();for(var e=!0,t=0,i=(0,r.buildMenuStruct)(this.anchorMode,!1,null,!0);t<i.length;t++){var o=i[t];if(0!=o.items.length&&!o.hasOnlyLinks()){e?e=!1:this._elem.addSeparator();for(var s=0,l=o.items;s<l.length;s++){for(var c=l[s],d="",h=c.lvl;h>0;)h--,d+="&nbsp;&nbsp;&nbsp;&nbsp;";var p=this._elem.addOption(c.uID,d+c.name,c.isCurrent(),c,!1,c.isLink());p.find("a").attr("title",(0,a.stripTags)(c.fullName)),c.anchor||(p.attr("data-type",c.type),p.attr("data-subtype",c.subType?c.subType:""),p.attr("data-target",(0,a.stripTags)(n.default.JSON.encode(c.isExternal()?c.url:c.pageId))))}this.anchorMode||u(this._elem,o)}}},e.prototype.getExtendedValue=function(){return this._elem.getValueData()},e.prototype.setExtendedValue=function(e){e.menuUID?this._elem.setValue(e.menuUID+"_"+e.id+(e.anchor?"_"+e.anchor:"")):this.setValue(""+e.id)},e.prototype.getValue=function(){var e=this._elem.getValueData();return e&&e.id?e.id:0},e.prototype.setValue=function(e){for(var t in this._elem.optionsData)this._elem.optionsData[t].data&&this._elem.optionsData[t].data.id===parseInt(""+e,10)&&this._elem.setValue(t)},e.prototype.open=function(){this._elem.menu.parent().addClass("open")},e.prototype.close=function(){this._elem.menu.parent().removeClass("open")},e}();function c(e,t,i){return(0,n.default)("<span>").addClass("wb-menuselector-btn").attr({title:e}).append((0,n.default)("<span>").addClass("wb-menuselector-icon "+t)).append((0,n.default)("<span>").addClass("wb-menuselector-text").text(e)).on("click",i)}function u(e,t){var i=(0,n.default)("<span>").addClass("wb-menuselector-tb");t.isEditable()&&i.append(c(__("Edit"),"glyphicon glyphicon-pencil",(function(){return t.edit(),!1}))),t.isRemovable()&&i.append(c(__("Remove"),"glyphicon glyphicon-trash",(function(){return t.remove(),!1})));var o,s,r=wb_builder.site.landing;if(r){for(var a=!1,l=0,u=t.items;l<u.length;l++){var d=u[l],h=void 0;if("page"===d.type&&d.pageId&&(h=wb_builder.site.getPage(d.pageId))&&h.isFront){a=!0;break}}if(a){var p=(o=__("Landing"),s=r,(0,n.default)("<span>").addClass("wb-menuselector-btn wb-menuselector-label").addClass(s?"checked":"").append((0,n.default)("<span>").addClass("wb-menuselector-text").text(o)));p.tooltip({title:__("All pages from this menu will be published as one page with common header and footer of homepage"),placement:"top"}),i.append(p)}}return e.addOption(t.uID+"_edit","",!1,null,!0).append(i),i}},"./NotificationRibbon.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationRibbon:function(){return l},defaultMessages:function(){return u},init:function(){return c}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./BuilderEvent.ts"),l=new(function(){function e(){this.text="",this.isHtml=!1}return e.prototype.setVisible=function(e){e&&this.text?a.GlobalEvents.triggerEvent("notification.changed",new a.NotificationEvent(this.text,this.isHtml)):a.GlobalEvents.triggerEvent("notification.changed",new a.NotificationEvent("",!1))},e.prototype.setText=function(e,t){void 0===t&&(t=!1),this.text=e,this.isHtml=t,a.GlobalEvents.triggerEvent("notification.changed",new a.NotificationEvent(e,t))},e.prototype.getText=function(){return this.text},e}());function c(e){n=e}function u(){if(n.testMode&&!n.devTestMode&&!n.websiteImportStatus){var e=__("This is Demo version. Everything created with it will be reset after 24 hours."),t=r.Service.RemoteLoginDialog;if(t.isRegistrationAvailable()){e+=' <a href="javascript:void(0)" class="wb-reg-link">'+__("To save your site, use Publish button.")+"</a>";var i=s()("<span>").html(e);i.find("a[class=wb-reg-link]").on("click",(function(){t.setVisible(!0)})),l.setText(i,!0)}else l.setText(e)}}},"./PagingSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PagingSelector:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.totalPages=1,t.currentPage=1,t.enabled=!0,t}return a(t,e),t.prototype.buildInit=function(e,t){var i=this;this._elem.addClass("wb-paging-selector"),e.change&&"function"==typeof e.change&&(this.onChange=e.change),this.group=s()('<div class="btn-group" role="group"></div>').append(s()('<button type="button" class="btn btn-default btn-sm wb-paging-selector-btn-side">').html("&laquo;").on("click",(function(){return i.goBack()}))).append(s()('<button type="button" class="btn btn-default btn-sm wb-paging-selector-btn-side">').html("&raquo;").on("click",(function(){return i.goForward()}))),this._elem.append(this.group),this.updateStyle()},t.prototype.clearPages=function(){this.group.children().each((function(){var e=s()(this);e.attr("data-page")&&(e.detach(),e.remove())}))},t.prototype.addSpacer=function(){var e=s()('<button type="button" class="btn btn-sm btn-default wb-paging-selector-btn-spacer">').text("...");this.group.append(e)},t.prototype.updateStyle=function(){var e=this;this.clearPages();for(var t=this.group.children(),i=t.length,n=t.eq(i-1),o=function(t){s()('<button type="button" class="btn btn-sm btn-default">').attr("data-page",t).text(t).on("click",(function(){e.currentPage=t,e.switchPage(t)})).insertBefore(n)},r=1;r<=this.totalPages;r++)o(r);this.switchPage(1,!0)},t.prototype.switchPage=function(e,t){void 0===t&&(t=!1);var i=this.group.children('[data-page="'+e+'"]');i.hasClass("active")||(this.group.children(".active").removeClass("active"),i.addClass("active"),t||"function"!=typeof this.onChange||this.onChange.call(this,e))},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.getTotalPages=function(){return this.totalPages},t.prototype.setEnabled=function(e){this.enabled=e,this.enabled?this.group.children().removeAttr("disabled"):this.group.children().attr("disabled","disabled")},t.prototype.setTotalPages=function(e){this.totalPages!==e&&(this.totalPages=e,this.currentPage=1,this.updateStyle())},t.prototype.goBack=function(){1!==this.currentPage&&(this.currentPage--,this.switchPage(this.currentPage))},t.prototype.goForward=function(){this.currentPage!==this.totalPages&&(this.currentPage++,this.switchPage(this.currentPage))},t.prototype.setPage=function(e,t){void 0===t&&(t=!1),e<0||e>this.totalPages||(this.currentPage=e,this.switchPage(this.currentPage,t))},t}(r.UIComponent)},"./PasteDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PasteDialog:function(){return d}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./WB_Dialog.class.js"),a=i.n(r),l=i("./TextAreaControl.ts"),c=i("./CheckBoxControl.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(t){var i=e.call(this,t)||this,n=i.fields;i.content.empty();var o=s()('<label for="pasteText'+i.id+'"><small></small></label>');return o.children("small").append(__("Please paste inside the following box using mouse or keyboard (Ctrl/Cmd+V) and hit Paste")),i.content.append(o),n.pasteText=new l.TextAreaControl,n.pasteText.input.css({width:"510px",height:"160px"}).attr("id","pasteText"+i.id),i.content.append(n.pasteText.elem),n.pasteInside=new c.CheckBoxControl(__("Paste text inside selected element")),i.content.append(n.pasteInside.elem),i}return u(t,e),t.prototype.showCheck=function(e){this.fields.pasteText.setValue(""),this.fields.pasteInside.setValue(!1),e?this.fields.pasteInside.elem.show():this.fields.pasteInside.elem.hide()},t.prototype.getInfo=function(){return{text:this.fields.pasteText.getValue(),inside:this.fields.pasteInside.getValue()}},t}(a())},"./Picture.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Picture:function(){return w}});var n,o=i("./Element.ts"),s=i("./ElementRegister.ts"),r=i("./Service.ts"),a=i("./UIButton.ts"),l=i("./tools/CropTool.ts"),c=i("./element/ControlsButton.ts"),u=i("./element/PropertyType.ts"),d=i("./BorderControl.ts"),h=i("./element/Controls.ts"),p=i("./lib/jquery-1.11.3.min.js"),m=i.n(p),g=i("./BuilderEvent.ts"),f=i("./WB_URLControl.class.js"),y=i.n(f),b=i("./RoundCornersControl.ts"),v=i("./ColorPicker.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),C=function(){return C=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},w=function(e){function t(t,i,n,o){void 0===t&&(t={content:{}}),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!0);var s=e.call(this,t,i,n,(!t||!t.customLock)&&o)||this;s.noPhotoBg="ico-tb-picture",s.image=null,s.imageW=null,s.dialog=null,s.originalSize=null,s.myEmptyMessageText=__("Double click to change picture"),s._imageAlt=null,s._imageUrl=null,s._imageLink=null,s._color="#000000",s._opacity=100,s._keepAspectRatio=!1,s._imageLinkType="url",s.customLock=!1,s.crop=null,s._lastSrc=null;var r=t&&"object"==typeof t?t:{};if(s.loadDeferred=m().Deferred(),s.customLock=!!r.customLock,s.customLock&&(s.classNamePropEnabled=!1),s.ignoreParentBounds=!0,s.setEmptyMessageText(s.myEmptyMessageText),s.displayEmptyMessage(!0),s.elem.addClass("wb_picture"),s.container.css("overflow","hidden"),s.cropBtn=new c.ControlsButton("wb_crop_btn","fa fa-crop",c.ControlsButtonAlign.LEFT_TOP,"pointer"),s.cropBtn.elem.on("click",(function(){return s.runCrop()})),s.controls.addButton(s.cropBtn),s._imageUrl=t.content.src?t.content.src:null,s._imageAlt=t.content.alt?t.content.alt:null,s._color=t.content.color?t.content.color:"#000000",s._border=t.content.border?t.content.border:{color:"#000000",style:"none",weight:1,css:{border:"1px none #000000"}},s._corners=t.content.corners?t.content.corners:{lt:0,rt:0,rb:0,lb:0,css:{"border-radius":"0","-webkit-border-radius":"0","-moz-border-radius":"0"}},s._opacity=t.content.opacity||0===t.content.opacity?t.content.opacity:s._opacity,s._imageUrl&&"string"==typeof s._imageUrl&&0===s._imageUrl.indexOf("user_images/")&&(s._imageUrl=s._imageUrl.replace("user_images/","gallery/")),s.crop=t.content.crop?new l.CropRectangle(t.content.crop):null,t.content.link&&"object"==typeof t.content.link?s._imageLink=t.content.link:s._imageLink={url:t.content.link?t.content.link:void 0,type:t.content.linkType?t.content.linkType:void 0,title:t.content.linkTitle?t.content.linkTitle:void 0,target:t.content.linkTarget?t.content.linkTarget:void 0,noFollow:t.content.linkNoFollow?t.content.linkNoFollow:null},s._imageLinkType=t.content.imageLinkType?t.content.imageLinkType:"url",null!==s._imageUrl&&""!==s._imageUrl&&"none"!==s._imageUrl||t._copy||s.isElementPreview)s.loadImage(s.getSrc(),null,!0,!0);else if(!i){var a=t.maxWidth&&t.maxHeight&&t.maxWidth===t.maxHeight?t.maxWidth:t.minWidth&&t.minHeight&&t.minWidth===t.minHeight?t.minWidth:0,u=Math.floor(a/2),d=!!(a&&t.content&&t.content.corners&&(t.content.corners.differ&&t.content.corners.lt>=u&&t.content.corners.rt>=u&&t.content.corners.lb>=u&&t.content.corners.rb>=u||!t.content.corners.differ&&t.content.corners.lt>=u));s.setSize("auto","auto"),s.changePicture((function(){if(d&&s.image&&s.imageW&&s.originalSize&&s.originalSize.width&&s.originalSize.height){var e=Math.min(s.originalSize.width,s.originalSize.height);s.crop=new l.CropRectangle({x:Math.round((s.originalSize.width-e)/2),y:Math.round((s.originalSize.height-e)/2),width:e,height:e,imgWidth:s.originalSize.width,imgHeight:s.originalSize.height}),s.crop.normalize(),s.crop.isCoveringAll()?(s.crop=null,s.imageW=m()(s.image),d=!1):s.imageW=m()(l.CropTool.renderCanvas(s.image,s.crop)),s.imageW.css("visibility",""),s.container.empty(),s.container.append(s.imageW)}else d=!1;s.resetImageSize(!1,d),s.updateStyle()}))}return s.customLock||s.isAdminLocked?(s.updateImageSize(),s.setResizingEnabled(!1,!0)):(s.controls.elem.tooltip({trigger:"manual",placement:"top",html:!0,title:__("This element can be edited only in Desktop mode")}),s.controls.onDblClick((function(){s.debug&&console.log("DoubleClick"),s.changePicture()}))),s.modeContextOk.resetSize=!0,s.verifyCropable(),s}return _(t,e),Object.defineProperty(t.prototype,"imageAlt",{get:function(){return this._imageAlt},set:function(e){this._imageAlt=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(e){this.setSrc(e,null,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLink",{get:function(){return this._imageLink},set:function(e){this._imageLink=e,g.GlobalEvents.triggerEvent("site.structure.changed",new g.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){var e=(0,d.buildCss)(this._border||null);return(0,d.applyRadiusValue)(e,this._corners),e},set:function(e){this._border=C({},e),delete this._border.radius,this._corners=(0,d.toRadiusValue)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"corners",{get:function(){return this._corners},set:function(e){this._corners=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepAspectRatio",{get:function(){return this._keepAspectRatio},set:function(e){this._keepAspectRatio=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLinkType",{get:function(){return this._imageLinkType},set:function(e){this._imageLinkType=e,g.GlobalEvents.triggerEvent("site.structure.changed",new g.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),t.prototype.getDataDefaults=function(){return m().extend(e.prototype.getDataDefaults.call(this),{width:"100%",minWidth:1,minHeight:1})},t.prototype.getDefaultResizeMode=function(){return h.ControlsResizeMode.ALL},t.prototype.getIcon=function(){return"fa fa-picture-o"},t.prototype.getName=function(t){if(void 0===t&&(t=!1),this.name&&!t)return this.name;var i=t?200:20,n="string"==typeof this._imageUrl?this._imageUrl:this._imageUrl&&this._imageUrl.faIcon?this._imageUrl.faIcon.replace(/^fa fa-(.+)$/,"$1"):"";return n&&(n=n.replace(/^(?:|.*\/)([^\/]+)$/,"$1")).length>i&&(n=n.substring(0,i)+"..."),n||e.prototype.getName.call(this,t)},t.prototype.supportsAutoWidth=function(){return!0},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.updateContentSize=function(t){e.prototype.updateContentSize.call(this,t),this.imageW&&this.updateImageSize()},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return"string"==typeof this._imageUrl&&""!==this._imageUrl&&"none"!==this._imageUrl&&t.push(this._imageUrl),t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.customLock=this.customLock,t.content={src:this._imageUrl,color:this.color,border:this._border,corners:this.corners,opacity:this.opacity,alt:this.imageAlt,link:this.imageLink,imageLinkType:this.imageLinkType,crop:this.crop?this.crop.serialize():void 0},t},t.prototype.onResize=function(t){void 0===t&&(t=!1),e.prototype.onResize.call(this,t),this.updateImageSize(),this.elem.trigger("elementresize",[this])},t.prototype.onLoaded=function(){return this.loadDeferred},t.prototype.updateStyle=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=null),e.prototype.updateStyle.call(this,t,i),this.updateImageSize()},t.prototype.setSrc=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1),e?"object"==typeof e?(this._imageUrl=m().extend({},e),this.loadImage(this._imageUrl,t,!0),"enlarge"===this._imageLinkType&&(this.imageLinkType="url")):(this._imageUrl=this.makeRelUrl(e),this.loadImage(this.makeLocalUrl(e),t,i)):(this._imageUrl=null,this.loadImage(null,t,i)),this.verifyCropable()},t.prototype.getSrc=function(){return this._imageUrl?"string"==typeof this._imageUrl?this.makeLocalUrl(this._imageUrl):m().extend({},this._imageUrl):null},t.prototype.getRelSrc=function(){return this._imageUrl?"string"==typeof this._imageUrl?this.makeRelUrl(this._imageUrl):m().extend({},this._imageUrl):null},t.prototype.getColor=function(){return this.color},t.prototype.setColor=function(e){this.color=e,this.updateImageSize()},t.prototype.updateImageSize=function(){var e;this.imageW&&(this.container.css({width:"auto",height:"auto"}),e={position:"relative",width:"auto"===this.width?"auto":"100%",height:"auto"},this._imageUrl&&"object"==typeof this._imageUrl&&"faIcon"in this._imageUrl&&(e.color=this._color),(this._opacity||0===this._opacity)&&(e.opacity=this._opacity/100),this.imageW.css(e),this._border&&this._border.css&&this.imageW.css(this._border.css),this._corners&&this._corners.css&&this.imageW.css(this._corners.css))},t.prototype.getBorderWeight=function(){var e={left:0,right:0,top:0,bottom:0},t=this.getSrc();return t&&"string"!=typeof t||!this.border||!this.border.weight||("object"==typeof this.border.weight?this.border.differ?(e.top="none"===this.border.style[0]?0:this.border.weight[0],e.right="none"===this.border.style[1]?0:this.border.weight[1],e.bottom="none"===this.border.style[2]?0:this.border.weight[2],e.left="none"===this.border.style[3]?0:this.border.weight[3]):e.top=e.right=e.bottom=e.left="none"===this.border.style[0]?0:this.border.weight[0]:e.top=e.right=e.bottom=e.left="none"===this.border.style?0:this.border.weight),e},t.prototype.getBorderTotalWeight=function(){var e=this.getBorderWeight();return{horizontal:e.left+e.right,vertical:e.top+e.bottom}},t.prototype.resetImageSize=function(e,t){var i;if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.isLocked)return this.moveBtn.elem.tooltip("show"),null;if(this.originalSize){var n=this.originalSize.width,o=this.originalSize.height;if(t&&this.crop&&this.crop.width&&this.crop.height){var s=this.crop.width/this.crop.height;n>=o?o=Math.round(n/s):n=Math.round(o*s)}var r=Math.min(n,240),a=r/n,l=Math.round(a*o),c=Math.round(m()(window).width()/2),u=Math.round(m()(window).height()/2);if(a=Math.min(c/n,u/o),i={width:n,height:o,minWidth:r,minHeight:l,maxWidth:c=Math.min(Math.max(r,Math.round(a*n)),n),maxHeight:u=Math.min(Math.max(l,Math.round(a*o)),o)},"number"==typeof this.width&&"number"==typeof this.height?(i.width=c,i.height=u):(i.width="100%",i.height="auto"),e)return i;this.setSize(i.width,i.height),this.minWidth=i.minWidth||0,this.minHeight=i.minHeight||0,this.maxWidth=i.maxWidth||0,this.maxHeight=i.maxHeight||0,this.useMinWidth=!0,this.useMinHeight=!0,this.useMaxWidth=!0,this.useMaxHeight=!0,this.flexGrow=1,this.flexShrink=1,t||(this.crop=null,this.container.empty(),this.image?(this.imageW=m()(this.image),this.container.append(this.imageW)):this.imageW=null),this.parent&&("updateSize"in this.parent?this.parent.updateSize():this.parent.updateStyle()),this.updateImageSize()}else i={width:"100%",height:"auto"};return i},t.prototype.canUseAsBackground=function(){return!0},t.prototype.updateComPropertiesInterface=function(){if(e.prototype.updateComPropertiesInterface.call(this),this.comDialog){var t=this.comDialog.fields.imageUrl.getValue();t&&"object"==typeof t?(this.comDialog.fields.linkTypeUrl.setValue(!0),this.comDialog.fields.linkTypeEnlarge.setVisible(!1),this.comDialog.fields.colorLabel.setVisible(!0),this.comDialog.fields.color.setVisible(!0)):(this.comDialog.fields.linkTypeEnlarge.setVisible(!0),this.comDialog.fields.colorLabel.setVisible(!1),this.comDialog.fields.color.setVisible(!1))}},t.prototype.loadImage=function(e,i,n,o){var s=this;void 0===i&&(i=null),void 0===n&&(n=!1),void 0===o&&(o=!1);var a=i;this.image&&(this.image.parentNode&&this.image.parentNode.removeChild(this.image),this.image=null,this.imageW=null);var c=e!==this._lastSrc;e&&"object"==typeof e?"faIcon"in e?t.createFontAwesomeIconSVG(e,(function(t,i){s.imageW=t,s.originalSize={width:e.faWidth,height:e.faHeight},s.container.empty(),m()(s.container).append(s.imageW),s.image=s.imageW.get(0),s.updateImageSize(),s.displayEmptyMessage(!1),"function"==typeof a&&a.call(s),r.Service.HelpSystemPlayer.notify("item-plugin-"+s.getClassType()+"-edit-loaded",s),o&&s.loadDeferred&&s.loadDeferred.resolve()})):o&&this.loadDeferred&&this.loadDeferred.resolve():(e&&this.setEmptyMessageText(__("loading...")),this.image=new Image,this.imageW=m()(this.image),this.imageW.css({width:"100%",height:"auto"}),this.image.onload=function(){s.setEmptyMessageText(s.myEmptyMessageText),s.image?(s.originalSize={width:s.image.naturalWidth,height:s.image.naturalHeight},n||(s.maxWidth=s.image.naturalWidth,s.useMaxWidth=!0,s.maxHeight=s.image.naturalHeight,s.useMaxHeight=!0),!o&&c&&(s.crop=null),s.crop&&(s.crop.update(s.image),s.crop.normalize(),s.crop.isCoveringAll()?s.crop=null:s.imageW=m()(l.CropTool.renderCanvas(s.image,s.crop))),s.container.empty(),s.imageW&&(m()(s.container).append(s.imageW),s.imageW.css("display","block")),s.updateImageSize(),s.displayEmptyMessage(!1),o&&s.loadDeferred&&s.loadDeferred.resolve(),"function"==typeof a&&a.call(s),r.Service.HelpSystemPlayer.notify("item-plugin-"+s.getClassType()+"-edit-loaded",s)):o&&s.loadDeferred&&s.loadDeferred.resolve()},this.image.onerror=function(){o&&s.loadDeferred&&s.loadDeferred.fail(),s.setEmptyMessageText(s.myEmptyMessageText),s.displayEmptyMessage(!0),s._imageUrl="",r.Service.HelpSystemPlayer.notify("item-plugin-"+s.getClassType()+"-edit-loaded",s)},this.image.src=e||"",this.imageW.css("visibility",e?"visible":"hidden"),this._lastSrc=e),this.imageW&&(this.opacity||0===this.opacity)&&this.imageW.css("opacity",this.opacity/100)},t.prototype.changePicture=function(e){var t=this;if(this.isLocked)this.moveBtn.elem.tooltip("show");else{var i=e,n=this;r.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-edit-start",this),this.dialog=r.Service.mediaLibrary.open(__("Change picture"),!1,"image",!0,!0),this.dialog.addButton(__("Cancel")),this.dialog.addButton(__("Select"),(function(){var e;if(t.dialog){var n=t.dialog.getSelectedFiles();t.system.setPageModified(!0),t.setSrc(n.length>0?n[0]:null,i),null===(e=t.getProperty("imageUrl"))||void 0===e||e.triggerChange(t),t.dialog.hide()}}),!0),this.dialog.onClose=function(){var e,i=null===(e=n.dialog)||void 0===e?void 0:e.getSelectedFiles();(null==i?void 0:i.length)||t.remove({noHistory:!0}),r.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-edit-end",t)};var o=this.getRelSrc();o?this.dialog.setSelectedFiles([o]):this.dialog.clearFileSelection(),this.dialog.setVisible(!0)}},t.createFontAwesomeIconSVG=function(e,t){var i="&#x"+e.faCharacter+";";r.Service.mediaLibrary.updateFontAwesomeIconInfo(e,(function(e){var n='<svg width="'+e.faWidth+'" height="'+e.faHeight+'" viewBox="0 0 '+e.faWidth+" "+e.faHeight+'" style="direction: ltr;" xmlns="http://www.w3.org/2000/svg">';n+='<text x="'+e.faXOffset+'" y="'+e.faBaseLine+'" font-size="'+e.faFontSize+'" fill="currentColor" style="font-family: FontAwesome;">'+i+"</text>",n+="</svg>",t(m()(n),e)}))},t.prototype.comProperties=function(t){var i=this,n=(this._imageUrl&&this._imageUrl,e.prototype.comProperties.call(this,{size:{minBodyHeight:350},tabs:[{name:__("General"),children:[{type:"HorizontalLayout",columnWeights:[5,7],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Picture")},{type:"ImageSelector",id:"imageUrl",thumbSize:140,fontAwesomeTab:!0,select:this.updateComPropertiesInterface.bind(this)},{type:"Label",id:"colorLabel",text:__("Color"),css:{marginTop:15}},{type:v.ColorPicker,id:"color",label:__("Color"),noTransparent:!1}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Alternative Text"),helpText:__("Information for an image if a user for some reason cannot view it")},{type:"MultilangTextField",id:"alt",onChange:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-alt-change",i)}},{type:"RadioBox",id:"linkTypeUrl",css:{marginTop:15},label:__("Link to another place"),group:"link_type",value:!0},{type:"LinkSelector",id:"urlLink",multilang:!0,css:{marginLeft:"20px"},change:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-urlLink-change",i)},click:function(){n.linkTypeUrl.setValue(!0)}},{type:"RadioBox",id:"linkTypeEnlarge",label:__("Enlarge picture on click"),group:"link_type",css:{marginTop:"10px"},change:function(){r.Service.HelpSystemPlayer.notify("item-plugin-"+i.getClassType()+"-prop-linkTypeEnlarge-change",i)}}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Opacity (%)")},{type:"SliderControl",id:"opacity",width:120}]},{type:"FlowLayout",css:{marginTop:15},spacing:40,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:d.BorderControl,id:"border"}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Rounded corners")},{type:b.RoundCornersControl,id:"corners"}]}]}],init:function(e){var t=m()('<div class="aspect-div"></div>'),n=m()('<div class="aspect-box ico-aspect-ratio"></div>').attr("title",__("Keep aspect ratio")),o=function(){i.keepAspectRatio?(n.addClass("ico-aspect-ratio"),n.removeClass("ico-aspect-ratio-off")):(n.removeClass("ico-aspect-ratio"),n.addClass("ico-aspect-ratio-off"))};n.on("click",(function(){i.keepAspectRatio=!i.keepAspectRatio,o()})),o(),t.append(n),e.sizeW.getElem().parent().css("position","relative").append(t);var s=function(t){var n=t?e.sizeW.getValue():e.sizeH.getValue();if(i.keepAspectRatio&&"number"==typeof i.width&&"number"==typeof i.height&&"number"==typeof n){var o=i.width/i.height,s=n;t?e.sizeH.setValue(Math.round(s/o)):e.sizeW.setValue(Math.round(s*o))}};e.sizeW.on("change",(function(){s(!0)})),e.sizeH.on("change",(function(){s(!1)}));var r=new a.UIButton(__("Reset size"),a.UIButton.STYLE_DEFAULT,"glyphicon glyphicon-fullscreen");r.addClass("btn-xs"),r.on("click",(function(){var t=i.resetImageSize(!0);t&&t.width&&t.height&&(e.sizeW.setValue(t.width),e.sizeH.setValue(t.height),t.minWidth&&(e.minWidth.setValue(t.minWidth),e.useMinWidth.setValue(!0)),t.minHeight&&(e.minHeight.setValue(t.minHeight),e.useMinHeight.setValue(!0)),t.maxWidth&&(e.maxWidth.setValue(t.maxWidth),e.useMaxWidth.setValue(!0)),t.maxHeight&&(e.maxHeight.setValue(t.maxHeight),e.useMaxHeight.setValue(!0)),e.wasReset=!0)})),e.sizeBlock.addChild(r),e.sizeBlock.applyLayoutCellCss(3,wb_builder.rtl?{textAlign:"left",paddingLeft:"38px",marginTop:4}:{textAlign:"right",paddingRight:"38px",marginTop:4})},callbackFunc:function(e){i.imageAlt=e.alt.getValue(),i.imageLink=e.urlLink.getValue(),i.imageLinkType=e.linkTypeUrl.getValue()?"url":"enlarge",e.wasReset&&i.resetImageSize(),i.color=e.color.getValue(),i._border=e.border.getValue(),i.corners=e.corners.getValue(),i.opacity=e.opacity.getValue(),i.setSrc(e.imageUrl.getValue(),null,!0),i.updateStyle()}}));return n.wasReset=!1,n.oldSize=this.getSize(),n.imageUrl.setValue(this._imageUrl),n.alt.setValue(this.imageAlt),n.urlLink.setValue(this.imageLink),n.linkTypeUrl.setValue("url"===this.imageLinkType),n.linkTypeEnlarge.setValue("enlarge"===this.imageLinkType),n.color.setValue(this.getColor()),n.border.setValue(this._border),n.corners.setValue(this.corners),n.opacity.setValue(this.opacity),this.updateComPropertiesInterface(),n},t.prototype.initContextMenu=function(){var t=this;if(!this.customLock&&(e.prototype.initContextMenu.call(this),this.menu)){var i=this.contextMenuFirstIndex;this.menu.insertItemAt(i++,"changePicture",__("Change picture"),(function(){t.changePicture()}),!1,!1,null,"glyphicon glyphicon-picture"),this.isResizable&&this.menu.insertItemAt(i++,"resetSize",__("Reset to original size"),(function(){t.system.setPageModified(!0),t.resetImageSize(),t.updateStyle()}),!1,!1,null,"glyphicon glyphicon-fullscreen"),this.menu.insertItemAt(i++,"crop",__("Crop"),(function(){return t.runCrop()}),!1,!1,null,"glyphicon glyphicon-resize-small",!1),this.menu.addSeparator(i)}},t.prototype.updateContextMenu=function(t){void 0===t&&(t=!1),e.prototype.updateContextMenu.call(this,t),this.menu&&this.menu.setVisible("crop","string"==typeof this._imageUrl&&""!==this._imageUrl&&"none"!==this._imageUrl)},t.prototype.verifyCropable=function(){this.cropBtn.setActive(!!(this.image&&this.imageW&&this._imageUrl&&"object"!=typeof this._imageUrl))},t.prototype.runCrop=function(){var e=this;if(this.imageW&&this.image&&"naturalWidth"in this.image){var t=new l.CropTool;this.setSelected(!1),this.imageW.css("visibility","hidden"),t.beginCrop(this.elem,this.image,this.crop,this.getBorderWeight(),(function(t){var i=e.crop;e.applyCrop(t),wb_builder.historyAdd("pictureCropped",{element:e.id,oldCropRect:i,newCropRect:t},(function(e){window.getElementById(e.element).applyCrop(e.oldCropRect)}),(function(e){window.getElementById(e.element).applyCrop(e.newCropRect)}))}),(function(){e.setSelected(!0),e.imageW&&e.imageW.css("visibility","")}))}},t.prototype.applyCrop=function(e){this.image&&(!e||e.isCoveringAll()?(this.crop=null,this.imageW=m()(this.image)):(this.crop=e,this.imageW=m()(l.CropTool.renderCanvas(this.image,e))),this.imageW.css("visibility",""),this.container.empty(),this.container.append(this.imageW),this.setSelected(!0),this.updateImageSize())},t.prototype.onBeforeRemove=function(t){!this.customLock||t.batch?e.prototype.onBeforeRemove.call(this,t):t.preventRemoval=!0},t.prototype.setHiddenInMode=function(t,i){this.customLock||e.prototype.setHiddenInMode.call(this,t,i)},t.prototype.getSiteTreeNodeProperties=function(){var t=e.prototype.getSiteTreeNodeProperties.call(this);return t.hasLink="url"===this._imageLinkType&&y().isActiveLinkValue(this._imageLink),t},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"opacity",type:u.PropertyType.ImageOpacity,uiComponentOptions:function(){return{enabled:!this.customLock}}}),this.registerProperty({name:"border",type:u.PropertyType.ImageBorder}),this.registerProperty({name:"imageUrl",type:u.PropertyType.Image,uiComponentOptions:function(){return{enabled:!this.customLock}}}),this.registerProperty({name:"color",type:u.PropertyType.IconColor,dependencies:["imageUrl"],uiComponentOptions:function(){return{visible:this._imageUrl&&"object"==typeof this._imageUrl}}}),this.registerProperty({name:"imageAlt",type:u.PropertyType.ImageAlt,uiComponentOptions:function(){return{enabled:!this.customLock}}}),this.registerProperty({name:"imageLinkType",type:u.PropertyType.OnClickAction,dependencies:["imageUrl"],uiComponentOptions:function(){return{enabled:!this.customLock,options:[{value:"enlarge",label:__("Enlarge picture on click"),disabled:this._imageUrl&&"object"==typeof this._imageUrl},{value:"url",label:__("URL"),helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):""}]}}}),this.registerProperty({name:"imageLink",type:u.PropertyType.OnClickLink,dependencies:["imageLinkType"],uiComponentOptions:function(){return{enabled:!this.customLock,visible:"url"===this._imageLinkType}}})},t}(o.Element);s.ElementRegister.registerClass("Picture",w)},"./PluginApi/BuilderApi.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BuilderApi:function(){return _}});var n,o=i("./ElementRegister.ts"),s=i("./Service.ts"),r=i("./GridAndGuidesDialog.ts"),a=i("./util/MenuList.ts"),l=i("./HelpSystem/HelpOverlay.ts"),c=i("./RemoteLoginDialog.ts"),u=i("./admin/Templates.ts"),d=i("./ElementCompositionAdmin.ts"),h=i("./element/MoveRelativeHandle.ts"),p=i("./ui/MigrateBackDialog.ts"),m=i("./ui/ResetTemplateDialog.ts"),g=i("./util/DropZoneCalculator.ts"),f=i("./util/HistoryUtil.ts"),y=i("./lib/jquery-1.11.3.min.js"),b=i.n(y),v=i("./util/FlowStepUtil.ts");!function(e){e.Icon="icon",e.IconAndText="icon_and_text",e.Render="render",e.RenderAndText="render_and_text"}(n||(n={}));var _=function(){function e(e,t){this.builder=e,this.wbConfig=t}return e.prototype.getSiteMenus=function(){return(0,a.buildMenuStruct)(!1,!1,null,!0)},e.prototype.getLanguage=function(){for(var e=0,t=this.wbConfig.availableLanguages;e<t.length;e++){var i=t[e];if(i.code==this.wbConfig.langCode)return i}return null},e.prototype.getLanguages=function(){return this.wbConfig.availableLanguages},e.prototype.setLanguage=function(e){window.location.href=this.wbConfig.baseUrl+(e.default?"":e.code+"/")},e.prototype.getSiteDomain=function(){return this.builder.siteDomain},e.prototype.getSiteUrl=function(){return"http://"+this.builder.siteDomain},e.prototype.getLogoUrl=function(){return this.wbConfig.whiteLabel.logo?this.wbConfig.baseUrl+"builder-logo":this.wbConfig.whiteLabel.defaultLogo?this.wbConfig.whiteLabel.defaultLogo:""},e.prototype.getBaseUrl=function(e){return void 0===e&&(e=!1),e?this.wbConfig.lnBaseUrl:this.wbConfig.baseUrl},e.prototype.getPanelUrl=function(){return this.builder.panelUrl},e.prototype.getB2cDomainsUrl=function(){return this.wbConfig.b2cDomainsUrl},e.prototype.isB2C=function(){return!!this.wbConfig.isB2C},e.prototype.getSignUpInfo=function(){var e=this.builder.testSignUpBtn;return e?{title:__trr(e.title),url:__trr(e.url).replace("{{siteDomain}}",this.builder.siteDomain)}:null},e.prototype.getPlanUpgradeUrl=function(){return this.wbConfig.upgradeUrl},e.prototype.getCompositionCollections=function(){return this.builder.pluginToolbar},e.prototype.isRtl=function(){return this.builder.rtl},e.prototype.isTouchDevice=function(){return this.builder.isTouchDevice},e.prototype.isTestMode=function(){return this.wbConfig.testMode},e.prototype.isAdminMode=function(){return this.wbConfig.adminMode},e.prototype.isComposerMode=function(){return this.builder.isComposer},e.prototype.isTestPublishEnabled=function(){return this.builder.testPublishEnabled},e.prototype.isImportAvailable=function(){return this.wbConfig.enableImport},e.prototype.isImportVisible=function(){return!this.wbConfig.hideImport},e.prototype.isTemplateSelectorVisible=function(){return!this.builder.hideTemplateSelector},e.prototype.isResetTemplateButtonVisible=function(){return!this.builder.hideResetTemplateButton},e.prototype.showImportDialog=function(){s.Service.websiteImporter.showImportDialog()},e.prototype.isHistoryUndoAvailable=function(){return this.builder.historyHasUndo()},e.prototype.isHistoryRedoAvailable=function(){return this.builder.historyHasRedo()},e.prototype.isLayoutPopupMode=function(){return!!this.builder.layoutPopupMode},e.prototype.getLayoutPopupWidth=function(){return this.isLayoutPopupMode()?parseInt(this.builder.layoutPopupWidth):0},e.prototype.getLayoutPopupHeight=function(){return this.isLayoutPopupMode()?parseInt(this.builder.layoutPopupHeight):0},e.prototype.isPublishAvailable=function(){return!(this.isTestMode()&&!c.RemoteLoginDialog.available()&&!this.builder.testSignUpBtn||this.isAdminMode()&&!this.isTestPublishEnabled()||this.builder.publishBlocked)},e.prototype.publish=function(){if(this.isTestMode()&&!this.isTestPublishEnabled()){var e=this.getSignUpInfo();c.RemoteLoginDialog.available()?c.RemoteLoginDialog.setVisible(!0):e&&window.open(e.url)}else this.isPublishAvailable()&&this.builder.publish()},e.prototype.preview=function(){return this.builder.preview(this.builder.previewToolbar)},e.prototype.reloadPreview=function(){this.builder.preview(this.builder.previewToolbar,!0)},e.prototype.hidePreview=function(){this.builder.previewToolbar.close()},e.prototype.setPreviewWidth=function(e){this.builder.previewToolbar.setPreviewWidth(e)},e.prototype.save=function(e,t){this.builder.save(e,t)},e.prototype.isTemplateSavingAvailable=function(){return this.isAdminMode()},e.prototype.isTemplateSavingEnabled=function(){return"en_US"==this.wbConfig.locale||this.builder.isEnterprise},e.prototype.showSaveAsTemplateDialog=function(){this.builder.save(!1,(function(e){e&&(0,u.saveAsTemplate)()}),null,!1,!1,!1)},e.prototype.isBlockSavingAvailable=function(){return this.isComposerMode()},e.prototype.isBlockSavingEnabled=function(){return this.isElementCompositionSavingEnabled()},e.prototype.showSaveBlockDialog=function(){this.saveElementComposition()},e.prototype.isElementCompositionSavingEnabled=function(){return"en_US"==this.wbConfig.locale},e.prototype.saveElementComposition=function(){d.ElementCompositionAdminModule.saveComposition()},e.prototype.goToPage=function(e,t){this.builder.goToPage(e,t)},e.prototype.historyUndo=function(){this.builder.historyUndo()},e.prototype.historyRedo=function(){this.builder.historyRedo()},e.prototype.showBackupRestoreDialog=function(){this.builder.backupRestore()},e.prototype.showTemplateChooser=function(){this.builder.templateChooser.setVisible(!0)},e.prototype.resetSite=function(e){var t=this;void 0===e&&(e=!1),e?(0,m.show)().then((function(){return t.resetSite(!1)})):(this.builder.setPageModified(!1),location.href=this.wbConfig.getUrl(this.builder.resetUri))},e.prototype.addElementAt=function(e,t,i,n){var r=this;if(void 0===n&&(n=null),e)if("string"==typeof e){for(var a=null,l=0,c=this.getCompositionCollections();l<c.length;l++){var u=c[l];if(u.id===e){a=u;break}}if(a){var d=s.Service.element.buildDummy(a.icon,a.name),h=!1;if(!n){var p=s.Service.element.getSelected();for(var m in p){var g=p[m],y=void 0;if("LayoutElement"==g.getClassType()?y=(n=g).getChildAt(0):(n=g.getParent(),y=g),n){n.addChild(d,!1,!1,y||void 0,!1),window.requestAnimationFrame((function(){d.scrollIntoView(!0),setTimeout((function(){return d.scrollIntoView(!0)}),300)})),h=!0;break}}}wb_builder.historyBeginGroup(),h||this.addElementInstAt([d],t,i,n,!0),wb_builder.historyEndGroup(),o.ElementRegister.createElementOrComposition(e,null,(function(e){wb_builder.historyBeginGroup(),s.Service.element.replaceDummy(d,e),e.length&&(r.unselectAll(),e[0].setSelected(!0),e[0].setControlsVisible(!0),r.builder.setPageModified(!0)),wb_builder.historyEndGroup()}),(function(){wb_builder.historyBeginGroup(),d.remove({noHistory:!0}),wb_builder.historyEndGroup()}))}else o.ElementRegister.createElementOrComposition(e,null,(function(e){r.addElementInstAt(e,t,i,n),(0,f.createAddElementsHistoryRecord)(e)}))}else this.addElementInstAt(e,t,i,n),(0,f.createAddElementsHistoryRecord)(e)},e.prototype.adjustPos=function(e,t,i,n,o,s){var r=n.width,a=n.height;return"number"!=typeof r&&(r=/.*%$/.test(r)?i.width*parseFloat(r)/100:0),"number"!=typeof a&&(a=/.*%$/.test(a)?i.width*parseFloat(a)/100:0),{x:o?this.builder.autoSnapX(Math.round((i.width-r)/2)):this.builder.autoSnapX(Math.max(Math.min(Math.floor(e-r/2),i.width-r),0)),y:this.builder.autoSnapY(Math.max(Math.min(Math.floor(t-a/2),i.height-a),0),s)}},e.prototype.addElementInstAt=function(e,t,i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),0!=e.length){var r=null;if(!(n instanceof s.Service.element.Element)){var a=this.builder.getCurrentContextRootElements();r=this.builder.getCurrentContextCanvasClientRect();var l=b()(window);Math.round(t)===Math.round(l.width()/2)&&Math.round(i)===Math.round(l.height()/2)&&(t=r.left+r.width/2);var c,u=t-r.left,d=i-r.top;if(n)r=n.getBoundingClientRect();else{for(var h=null,p=0,m=a;p<m.length;p++){var f=m[p];if(r=f.getBoundingClientRect(),h=f,r.left<=t&&r.left+r.width>=t&&r.top<=i&&r.top+r.height>=i){n=h;break}}if(n||(n=h),!n||!r)return}t-=r.left,i-=r.top,e[0].getParent()||o||this.unselectAll(),c=e[0];var y=this.builder.site.getPage(this.builder.pageId);y&&y.popupMode&&!o&&(c.isCommon=!1,c.includePages={});var v=c.getSizeInPixels(),_={left:this.builder.autoSnapX(t-v.width/2),top:this.builder.autoSnapY(i-v.height/2,n.id)};new g.DropZoneCalculator(a,null,_,v).dropElementsAt([c],u,d,window.scrollX,window.scrollY,!0)||(c.setLocation(_.left,_.top),n.addChild(c)),o||c.setSelected(!0),c.scrollIntoView(!0),o||(e[0].setControlsVisible(!0),this.builder.setPageModified(!0))}}},e.prototype.unselectAll=function(){s.Service.element.unselectAll()},e.prototype.getModes=function(){for(var e=s.Service.modeManager,t=[],i=0,n=e.getModes();i<n.length;i++){var o=n[i];t.push({id:o,name:e.getModeName(o),width:e.getModeWidth(o)})}return t},e.prototype.sortAndAutoAlignElements=function(){},e.prototype.isAutoLayoutEnabled=function(){return!1},e.prototype.isAutoLayoutAvailable=function(){return!1},e.prototype.setAutoLayoutEnabled=function(e){},e.prototype.setMode=function(e){},e.prototype.getModeEnabled=function(e){return!0},e.prototype.setModeEnabled=function(e,t){},e.prototype.isFullScreenSupported=function(){return this.builder.goFullScreen(!0)},e.prototype.toggleFullScreen=function(){return this.builder.goFullScreen(!1)},e.prototype.showSiteSEODialog=function(){this.builder.site&&this.builder.site.changeSiteSEO()},e.prototype.showSiteBackgroundDialog=function(){this.builder.site&&this.builder.site.changeBackground()},e.prototype.showSiteStylesDialog=function(){this.builder.site&&this.builder.site.changeStyles()},e.prototype.showSiteFaviconDialog=function(){this.builder.site&&this.builder.site.changeFavicon()},e.prototype.showSitePropertiesDialog=function(){this.builder.site&&this.builder.site.changeProperties()},e.prototype.showGridAndGuidesDialog=function(){r.GridAndGuidesDialog.open()},e.prototype.getSiteLanding=function(){return this.builder.site&&this.builder.site.landing},e.prototype.setSiteLanding=function(e){this.builder.site&&this.builder.site.setLanding(e,!1)},e.prototype.hideContextMenus=function(){s.Service.contextMenu.hideAll()},e.prototype.bindCompositionButton=function(e,t,i){h.MoveRelativeHandle.fromToolbarItem({id:e.id,name:e.name,icon:e.icon,elem:e.elem},wb_builder,(function(t){o.ElementRegister.createElementOrComposition(e.id,null,(function(e){wb_builder.historyBeginGroup(),t(e),wb_builder.historyEndGroup()}),(function(){wb_builder.historyBeginGroup(),t([]),wb_builder.historyEndGroup()})),"function"==typeof i&&i()}),t)},e.prototype.getFeaturesetVersion=function(){return wb_builder.builderMajorVersion},e.prototype.migrateBack=function(){var e=this;this.builder.migrateBackUrl&&p.show().then((function(){return e.builder.goToPage(null,e.builder.migrateBackUrl)}))},e.prototype.forwardFlowStep=function(e,t){void 0===t&&(t=!1),(0,v.forwardFlowStep)(this.wbConfig,e,t)},e.prototype.isHelpAvailable=function(){return(0,l.isHelpAvailable)()},e.prototype.showHelp=function(){(0,l.openHelp)()},e.prototype.logout=function(){window.location.href=this.builder.logoutUrl},e.prototype.init=function(e){this.builder.body=b()(e),this.builder.container=b()(document.body),this.builder.body.addClass("wb-body"),this.builder.initContinue()},e}()},"./PluginApi/DataWrapper.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{DataWrapper:function(){return s}});var n={},o=0,s=function(){function e(){}return e.wrap=function(e,t){var i=new t;return i.wrapId="wrap_elem_"+o,o++,n[i.wrapId]=e,i},e.uwrap=function(e,t){return n[e.wrapId]},e}()},"./PluginApi/PluginBody.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginBody:function(){return r}});var n=i("./Element.ts"),o=i("./Service.ts"),s=i("./PluginApi/DataWrapper.ts"),r=function(){function e(){this.wrapId=""}return e.prototype.getType=function(){return"Body"},e.prototype.setElementSelection=function(e){o.Service.element.unselectAll();for(var t=0,i=e;t<i.length;t++){var r=i[t];s.DataWrapper.uwrap(r,n.Element).setSelected(!0)}},e}()},"./PluginApi/PluginContextMenu.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginContextMenu:function(){return a}});var n=i("./ContextMenu.ts"),o=i("./PluginApi/DataWrapper.ts"),s="plugin_ctx_menu_item_",r=0,a=function(){function e(){this.wrapId="",this.id=""}return e.prototype.getId=function(){return this.id},e.prototype.setVisible=function(e){o.DataWrapper.uwrap(this,n.ContextMenu).setVisible(s+this.id,e)},e.prototype.addItem=function(e,t,i,a,c){void 0===a&&(a="glyphicon glyphicon-link"),void 0===c&&(c=-1),e||(e="auto"+r,r++);var u=new l(e,this);return o.DataWrapper.uwrap(this,n.ContextMenu).insertItemAt(c,s+e,t,i,!1,!1,null,a),u},e.prototype.addMenu=function(t,i,a,c){void 0===a&&(a="glyphicon glyphicon-list"),void 0===c&&(c=-1),t||(t="auto"+r,r++);var u=new n.ContextMenu("plugin_ctx_menu_"+t),d=o.DataWrapper.wrap(u,e);return d.id=t,new l(t,d),o.DataWrapper.uwrap(this,n.ContextMenu).insertItemAt(c,s+t,i,u,!1,!1,null,a),d},e.prototype.addSeparator=function(e){o.DataWrapper.uwrap(this,n.ContextMenu).addSeparator(e)},e.prototype.getItem=function(t){var i=o.DataWrapper.uwrap(this,n.ContextMenu);if(!i.getItem(s+t))return null;var r=i.getSubmenu(s+t);if(r){var a=o.DataWrapper.wrap(r,e);return a.id=t,a}return new l(t,this)},e.prototype.hasItemById=function(e){return!!o.DataWrapper.uwrap(this,n.ContextMenu).getItem(s+e)},e.prototype.removeItem=function(e){o.DataWrapper.uwrap(this,n.ContextMenu).removeItem(s+e.getId())},e.prototype.removeAllItems=function(){o.DataWrapper.uwrap(this,n.ContextMenu).removeAllItems()},e}(),l=function(){function e(e,t){this.id=e,this.menu=t}return e.prototype.getId=function(){return this.id},e.prototype.getParent=function(){return this.menu},e.prototype.setName=function(e){o.DataWrapper.uwrap(this.menu,n.ContextMenu).setName(s+this.id,e)},e.prototype.setSelected=function(e){o.DataWrapper.uwrap(this.menu,n.ContextMenu).setSelected(s+this.id,e)},e.prototype.setEnabled=function(e){o.DataWrapper.uwrap(this.menu,n.ContextMenu).setDisabled(s+this.id,!e)},e.prototype.setVisible=function(e){o.DataWrapper.uwrap(this.menu,n.ContextMenu).setVisible(s+this.id,e)},e}()},"./PluginApi/PluginElement.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginContent:function(){return d},PluginElement:function(){return u}});var n,o=i("./Element.ts"),s=i("./ElementRegister.ts"),r=i("./PluginApi/DataWrapper.ts"),a=i("./PluginApi/PluginBody.ts"),l=i("./LayoutElement.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(){function e(){this.wrapId="",this.x=0,this.y=0}return e.prototype.getType=function(){return r.DataWrapper.uwrap(this,o.Element).className},e.prototype.getId=function(){return r.DataWrapper.uwrap(this,o.Element).id},e.prototype.getX=function(){var e=r.DataWrapper.uwrap(this,o.Element);return e.getParent()?e.getLocation().left:this.x},e.prototype.getY=function(){var e=r.DataWrapper.uwrap(this,o.Element);return e.getParent()?e.getLocation().top:this.y},e.prototype.getWidth=function(){return r.DataWrapper.uwrap(this,o.Element).getWidth()},e.prototype.getHeight=function(){return r.DataWrapper.uwrap(this,o.Element).getHeight()},e.prototype.setX=function(e){r.DataWrapper.uwrap(this,o.Element).setLocation(e)},e.prototype.setY=function(e){r.DataWrapper.uwrap(this,o.Element).setLocation(null,e)},e.prototype.getParent=function(){var e=r.DataWrapper.uwrap(this,o.Element).getParent();return e?r.DataWrapper.wrap(e,d):r.DataWrapper.wrap(wb_builder.bodyInstance,a.PluginBody)},e.prototype.toData=function(){return r.DataWrapper.uwrap(this,o.Element).serialize()},e.fromData=function(t){var i=t.class?s.ElementRegister.getClassByName(t.class):null;if(!i)return null;var n=r.DataWrapper.wrap(new i(t),e);return n.x=t.x?t.x:0,n.y=t.y?t.y:0,n},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.addElement=function(e){if(!e)throw"Bad argument";wb_builder.setPageModified(!0);var t=r.DataWrapper.uwrap(e,o.Element);r.DataWrapper.uwrap(this,l.LayoutElement).addChild(t)},t}(u)},"./PluginApi/PluginResourceLoader.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginResource:function(){return a},PluginResourceLoader:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./core/BuilderConfig.ts"),r=function(){function e(e){this.pluginData="object"==typeof e?e:{id:e,extReferenceId:null,baseUrl:s.wbConfig.baseUrl+"plugins/"+e,customConfiguration:null}}return e.prototype.getResourceUrl=function(e){return this.pluginData.baseUrl+"/"+e.replace(/^\/+/,"")},e.prototype.loadStyles=function(e){for(var t=o()("head"),i=0,n=e;i<n.length;i++){var s=n[i];t.append(o()('<link rel="stylesheet prefetch" type="text/css" />').attr("href",this.getResourceUrl(s)))}},e.prototype.addRawStyleSheet=function(e){var t=this,i=document.createElement("STYLE");i.setAttribute("type","text/css"),e=e.replace(/(url\(\s*['"]?)(.*?['"]?\s*\))/gi,(function(e,i,n){return/^(https?:\/\/|\/)/i.test(n)?e:i+t.getResourceUrl(n)})),i.appendChild(document.createTextNode(e)),document.body.appendChild(i)},e.prototype.loadResources=function(e,t){for(var i={},n=e.length,o=function(){--n<=0&&t(i)},s=0,r=e;s<r.length;s++){var l=r[s],c=new a(l,this.getResourceUrl(l));i[l]=c,c.load(o)}return i},e}(),a=function(){function e(e,t){this.xhr=null,this.data=null,this.status=null,this.error=null,this.name=e,this.url=t}return e.prototype.load=function(e){var t=this;this.status=null,this.error=null,this.data=null,this.xhr=o().ajax({url:this.url,type:"GET",success:function(e,i){t.data=e,t.status=i},error:function(e,i,n){t.status=i,t.error=n},complete:function(){e()}})},e.prototype.abort=function(){this.xhr&&this.xhr.abort()},e}()},"./PluginApi/PluginSite.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginSite:function(){return r}});var n=i("./PluginApi/DataWrapper.ts"),o=i("./WB_Site.class.js"),s=i.n(o),r=function(){function e(){this.wrapId=""}return e.prototype.getType=function(){return"Site"},e.prototype.getSiteMetaHtml=function(){return n.DataWrapper.uwrap(this,s()).metaHtml||""},e.prototype.setSiteMetaHtml=function(e){n.DataWrapper.uwrap(this,s()).metaHtml="string"==typeof e?e:""},e.prototype.getSiteHeadEndHtml=function(){return n.DataWrapper.uwrap(this,s()).headSnippetsHtml||""},e.prototype.setSiteHeadEndHtml=function(e){n.DataWrapper.uwrap(this,s()).headSnippetsHtml="string"==typeof e?e:""},e.prototype.getSiteBodyEndHtml=function(){return n.DataWrapper.uwrap(this,s()).bodySnippetsHtml||""},e.prototype.setSiteBodyEndHtml=function(e){n.DataWrapper.uwrap(this,s()).bodySnippetsHtml="string"==typeof e?e:""},e}()},"./PluginApi/PluginTranslation.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{__:function(){return a},extendTranslations:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s={};function r(e){o().extend(s,e)}function a(e){return s.hasOwnProperty(e)?s[e]:window.__(e)}},"./PluginApi/PluginWrapper.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PluginWrapper:function(){return O}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./core/BuilderConfig.ts"),a=i("./Element.ts"),l=i("./ElementRegister.ts"),c=i("./Service.ts"),u=i("./WB_URLControl.class.js"),d=i.n(u),h=i("./PluginApi/Types.ts"),p=i("./BuilderEvent.ts"),m=i("./Body.ts"),g=i("./PluginApi/PluginElement.ts"),f=i("./PluginApi/DataWrapper.ts"),y=i("./PluginApi/PluginContextMenu.ts"),b=i("./PluginApi/PluginBody.ts"),v=i("./PluginApi/PluginSite.ts"),_=i("./ColorPicker.ts"),C=i("./SizeSelector.ts"),w=i("./BorderControl.ts"),T=i("./element/PropertyType.ts"),E=i("./util/ChangeUpdateUtil.ts"),I=i("./util/ComparisonUtil.ts"),x=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),S=function(){return S=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},k=0,D={},O=function(e){function t(t,i){var n=e.call(this,t,!1,!1,!0,(function(){this._def=i}))||this;if(n.cachedIcon=null,n._rendered=!1,n._isolatorElem=null,n._isolatorElemWnd=null,n._isolatorElemReady=!1,n._isolatorElemListeners=[],n._callbackApplied=!1,n.updateDelayTimer=null,n.waitToValidate=new E.ChangeUpdateState((function(e){if(e){var t=e.func.call(n._def,e.value,n._data,e.api);void 0!==t&&e.api.setError(t)}}),null),n.waitToUpdate=new E.ChangeUpdateState((function(e){e&&n._updateStyle(!1,e.langCode,e.renderOnce)}),null),!t)return n;var o=n._def&&n._def.element?n._def.element:new h.ElementDefinition;if("object"==typeof o.minSize&&o.minSize&&(o.minSize.width&&(n.sysMinWidth=o.minSize.width,"number"!=typeof t.minWidth&&(n.minWidth=n.sysMinWidth,n.useMinWidth=!0)),o.minSize.height&&(n.sysMinHeight=o.minSize.height,"number"!=typeof t.minHeight&&(n.minHeight=n.sysMinHeight,n.useMinHeight=!0))),"object"!=typeof o.defaultSize||!o.defaultSize||t.width&&t.height||(o.defaultSize.width&&n.setSize(o.defaultSize.width,null),o.defaultSize.height&&n.setSize(null,o.defaultSize.height)),"resizable"in o&&!o.resizable&&n.setResizingEnabled(!1,!0),n.displayEmptyMessage(!0),n.elem.hasClass("wb-ext-resizable")){var s=n.elem.resizableExt("option","stop");n.elem.resizableExt("option","stop",(function(e,t){s(e,t),"function"==typeof n._def.resizeStopAction&&n._def.resizeStopAction(n._data,n.container)}))}if(n._data=t,n._data.id=n.id,n._data.width=n.getWidth(),n._data.height=n.getHeight(),wb_builder.pluginData)for(var r in wb_builder.pluginData)n._data[r]=wb_builder.pluginData[r];return n.updateStyle(!0),n._def.notifyHelpSystemPlayer=function(e,t){t||(t=n),c.Service.HelpSystemPlayer.notify("item-plugin-"+n.getClassType()+"-"+e,t)},n._def.updateElement=function(e){if(void 0===e&&(e=!1),e){var t=n._def.element.renderOnce;n._def.element.renderOnce=!1,n.updateStyle(),n._def.element.renderOnce=t}else n.updateStyle()},n._def.setSize=function(e,t){n.setSize(e,t)},n._def.setLocation=function(e,t){n.setLocation(e,t)},n._def.openProperties=function(){n.comProperties()},n._def.bringToFront=function(){n.parent&&n.parent.zIndexHandle.changeLayer(n,"top")},n._def.sendToBack=function(){n.parent&&n.parent.zIndexHandle.changeLayer(n,"bottom")},n._def.bringForward=function(){n.parent&&n.parent.zIndexHandle.changeLayer(n,"up")},n._def.sendBackwards=function(){n.parent&&n.parent.zIndexHandle.changeLayer(n,"down")},n._def.moveToHeader=function(){n.parent&&wb_builder.bodyInstance.addElement("wb_header",n)},n._def.moveToBody=function(){n.parent&&wb_builder.bodyInstance.addElement("wb_main",n)},n._def.moveToFooter=function(){n.parent&&wb_builder.bodyInstance.addElement("wb_footer",n)},n.container.css({overflow:"hidden"}),"function"==typeof n._def.loadedAction&&setTimeout((function(){n._def.loadedAction&&n._def.loadedAction(t,n.container)}),0),n._def.setErrorMessage=function(e){n.setErrorMessage(e)},n._def.displayErrorMessage=function(e){n.displayErrorMessage(e)},n._def.getSize=function(){return n.getSize()},n}return x(t,e),t.mutateData=function(e,i,n){if(!i)return i;i.content&&"object"==typeof i.content&&"function"!=typeof i.content.pop||(i.content={}),i.isPublished=!1,i.isPreview=!1,i.requireService=null;var o=e.def?t._extendDef(e.def):new h.PluginDefinition;return o.serviceUrl=e.serviceUrl,"function"==typeof o.loadAction&&o.loadAction(i),o.element="object"==typeof o.element&&o.element?o.element:new h.ElementDefinition,n.def=o,i},t.registerPlugin=function(e,i){var n,o=!1;"propertyDialog"in i&&"object"==typeof i.propertyDialog&&null!==i.propertyDialog||(i.propertyDialog={},o=!0);var s=i.properties instanceof Array?i.properties:[],r=new h.PluginMetaData;r.id=t._config.id,t._config.id=null,r.icon=t._config.icon,t._config.icon=null,r.name=i.name,r.isBorderless=i.borderless,r.template=t._config.template||"",t._config.template=null,r.serviceUrl=t._config.serviceUrl,t._config.serviceUrl=null,r.def=i;var a={def:i},c=(n=function(n){function l(i){var o=n.call(this,t.mutateData(r,i||null,a),a.def)||this;return o.className=e,o}return x(l,n),l.prototype.meta=function(){return r},l.prototype.registerProperties=function(){n.prototype.registerProperties.call(this),o||0!=s.length&&!i.keepMoreProperties||this.registerProperty({name:"morePropertiesButton",type:T.PropertyType.MoreProperties,uiComponentOptions:{click:function(){this.comProperties()}}});for(var t=function(t){if("string"!=typeof t.id||!t.id)return console.warn('Plugin "'.concat(e,'" property must have "id"')),"continue";if("string"!=typeof t.type||!t.type)return console.warn('Plugin "'.concat(e,'" property must have "type"')),"continue";if("function"!=typeof t.get||"function"!=typeof t.set)return console.warn('Plugin "'.concat(e,'" property "').concat(t.id,'" must have "get" and "set" functions')),"continue";var i="object"==typeof t.uiComponentOptions?S({},t.uiComponentOptions):{};"string"==typeof t.label&&t.label&&(i.label=t.label),"function"==typeof t.moreInfo&&(i.moreInfo=function(){"function"==typeof t.moreInfo&&this.callWithData(t.moreInfo)}),"string"==typeof t.helpText&&t.helpText&&(i.helpText=t.helpText);var n=void 0;"function"==typeof t.validate&&(n=function(e,i,n){var o=I.ComparisonUtil.checkEqualsRecursive(e,i);return!o&&t.validate&&n&&(this.waitToValidate.elem={func:t.validate,value:e,api:{setError:function(e){return n.setError(e)}}},(0,E.waitForChangeEndToUpdate)(this.waitToValidate)),o}),r.registerProperty({name:t.id,type:T.PropertyType[t.type],prop:{get:function(){return this.callWithData(t.get)},set:function(e){this.callWithDataValue(t.set,e)}},dependencies:t.dependencies,comparator:n,uiComponentOptions:function(){return"function"==typeof t.visible&&(i.visible=this.callWithData(t.visible)),"function"==typeof t.enabled&&(i.enabled=this.callWithData(t.enabled)),i}})},r=this,a=0,l=s;a<l.length;a++)t(l[a])},l}(t),n._metaData_=r,n);i.pluginScoped=c.pluginScoped="object"==typeof i.pluginScoped?i.pluginScoped:{},l.ElementRegister.registerClass(e,c,!0,t._config.active)},t.prototype.callWithDataValue=function(e,t){return e.call(this._def,t,this._data,this.elem)},t.prototype.callWithData=function(e){return e.call(this._def,this._data)},t.isDataImageSelector=function(e,i){if(void 0===i&&(i=!1),!e)return!1;if(i)return/^gallery\//.test(e);var n=!0;if("object"==typeof e&&"length"in e){for(var o in e)if(!t.isDataImageSelector(e[o],!0)){n=!1;break}}else t.isDataImageSelector(e,!0)||(n=!1);return n},t.imageSelectorMakeLocalUrl=function(e){if(e){if("object"==typeof e&&"length"in e){var t=[];for(var i in e)t.push(wb_builder.makeLocalUrl(e[i]));return t}return wb_builder.makeLocalUrl(e)}return e},t.updateImageSelectorData=function(e,i){if(e&&(i||(i=0),!(i>3)))for(var n in e)e[n]instanceof HTMLElement||e[n]instanceof s()||(t.isDataImageSelector(e[n])?e[n]=t.imageSelectorMakeLocalUrl(e[n]):e[n]&&"object"==typeof e[n]&&t.updateImageSelectorData(e[n],i+1))},t.isMultilangValue=function(e){if(e&&"object"==typeof e){for(var t in e)if(!(t in r.wbConfig.getLanguageCodeIndex()))return!1;return!0}return!1},t.updateMultilangData=function(e,i){if(e&&(i||(i=0),!(i>3)))for(var n in e)e[n]instanceof HTMLElement||e[n]instanceof s()||(t.isMultilangValue(e[n])?e[n]=__tr(e[n],null,__tr(e[n],wb_builder.site.getLastDefLang())):"object"==typeof e[n]&&t.updateMultilangData(e[n],i+1))},t.isLinkSelectorValue=function(e){return!!(e&&"object"==typeof e&&"name"in e&&"type"in e&&"url"in e&&"target"in e&&"title"in e&&"menuUID"in e&&"anchor"in e)},t.updateLinkSelectorData=function(e,i){if(e&&(i||(i=0),!(i>3)))for(var n in e)e[n]instanceof HTMLElement||e[n]instanceof s()||(t.isLinkSelectorValue(e[n])?(e[n]&&e[n].name||(e[n].name=d().getName(e[n])),e[n]&&e[n].finalUrl||(e[n].finalUrl=d().getUrl(e[n]))):"object"==typeof e[n]&&t.updateLinkSelectorData(e[n],i+1))},t.addEventListener=function(e,t){if(e&&"string"==typeof e&&t&&"function"==typeof t){var i=t;i.eventHandlerId||(i.eventHandlerId="plEventId"+k,k++),i.eventHandlerId in D||(D[i.eventHandlerId]=function(e){var i=new h.PluginEvent;if(e instanceof p.ContextMenuEvent)if(i.x=e.x,i.y=e.y,i.ctxMenu=f.DataWrapper.wrap(e.menu,y.PluginContextMenu),e.target instanceof a.Element){i.target=f.DataWrapper.wrap(e.target,g.PluginElement),i.targets=[];var n=c.Service.element.getSelected();for(var o in n)i.targets.push(f.DataWrapper.wrap(n[o],g.PluginElement))}else e.target instanceof m.Body&&(i.target=f.DataWrapper.wrap(e.target,b.PluginBody));else e instanceof p.SaveEvent&&(i.target=f.DataWrapper.wrap(wb_builder.site,v.PluginSite));t(i)}),p.GlobalEvents.on(e,D[i.eventHandlerId])}},t.removeEventListener=function(e,t){if(e&&"string"==typeof e&&t&&"function"==typeof t){var i=t;i.eventHandlerId&&i.eventHandlerId in D&&p.GlobalEvents.off(e,D[i.eventHandlerId])}},t._extendDef=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this),i=t.class;return i in l.ElementRegister.pluginRegistry&&l.ElementRegister.pluginRegistry[i].textId&&(t.class=l.ElementRegister.pluginRegistry[i].textId),t.supportsAutoWidth=this.supportsAutoWidth(),t.supportsAutoHeight=this.supportsAutoHeight(),t.content=this._data.content&&"object"==typeof this._data.content&&"function"!=typeof this._data.content.pop?this._data.content:{},"function"==typeof this._def.saveAction&&this._def.saveAction(t,this.container),t},t.prototype.updateContentSize=function(){e.prototype.updateContentSize.call(this),this._data&&(this._data.width=this.getWidth(),this._data.height=this.getHeight(),"function"==typeof this._def.resizeAction&&this._def.resizeAction(this._data,this.container));var t=this.getParent();t&&t.updateSize()},t.prototype.onSwitchLanguage=function(t){e.prototype.onSwitchLanguage.call(this,t),"function"==typeof this._def.switchLanguageAction&&this._def.switchLanguageAction(this._data,this.container,t),this.updateStyle(!1,t)},t.prototype.switchMode=function(t,i,n,o){e.prototype.switchMode.call(this,t,i,n,o),o&&"function"==typeof this._def.switchModeAction&&this._def.switchModeAction(this._data,this.container)},t.prototype.updateStyle=function(e,t){!e&&this._def.batchUpdates?(this.waitToUpdate.elem={renderOnce:this._def.element.renderOnce,langCode:t},(0,E.waitForChangeEndToUpdate)(this.waitToUpdate)):this._updateStyle(e,t,this._def.element.renderOnce)},t.prototype._updateStyle=function(i,n,o){var r=this;if(void 0===o&&(o=!1),e.prototype.updateStyle.call(this,i,n),!this._rendered||!o){this._rendered=!0;var a=function(){t.updateLinkSelectorData(r._data.content);var e=s().extend(!0,{},r._data);t.updateImageSelectorData(e.content),t.updateMultilangData(e.content),window.$=s();var i=window.Mustache.render(r.meta().template,e);if(r._def.element.isolatedRendering){r._isolatorElem||(r._isolatorElemWnd=null,r._isolatorElemReady=!1,r._isolatorElemListeners=[],r._isolatorElem=s()("<iframe>").css({border:"none",background:"transparent",padding:"0",margin:"0",width:"100%",height:"100%"}).attr({src:"modules/builder/tpl/blank.html"}).on("load",(function(){if(r._isolatorElem){r._isolatorElemWnd=r._isolatorElem.get(0).contentWindow||r._isolatorElem.get(0).contentDocument,r._isolatorElemWnd.xnextStickRight=function(){},r._isolatorElemReady=!0;for(var e=0;e<r._isolatorElemListeners.length;e++)"function"==typeof r._isolatorElemListeners[e].func&&r._isolatorElemListeners[e].func.call(r._isolatorElemListeners[e].inst)}})),r.container.empty(),r.container.append(r._isolatorElem));var n=null;r._isolatorElemWnd instanceof Window?n=s()(r._isolatorElemWnd.document.body):r._isolatorElemWnd instanceof Document&&(n=s()(r._isolatorElemWnd.body)),r._isolatorElemReady?n&&n.html(i):r._isolatorElemListeners.push({inst:r,func:function(){n&&n.html(i)}})}else r.container.html(i);r.displayEmptyMessage(!i)};this._def.element.updateDelay?(this.updateDelayTimer&&clearTimeout(this.updateDelayTimer),this.updateDelayTimer=setTimeout(a,this._def.element.updateDelay)):a()}},t.prototype.comProperties=function(){var t=this;if(!this._def.propertyDialog)return{};var i=this;this._callbackApplied||(this._callbackApplied=!0,this._def.propertyDialog.callbackFunc=function(e){"function"==typeof i._def.applyAction&&i._def.applyAction(e,i._data,i.container),t.updateStyle()});var n=e.prototype.comProperties.call(this,this._def.propertyDialog);if(this.comDialog){this._callbackApplied&&delete this._def.propertyDialog.callbackFunc;var o=this.comDialog.fields;o._initiated||(o._initiated=!0),"function"==typeof this._def.openAction&&this._def.openAction(o,this._data,this.container)}return n},t.prototype.updateComPropertiesInterface=function(){e.prototype.updateComPropertiesInterface.call(this),this.comDialog&&"function"==typeof this._def.updateAction&&this._def.updateAction(this.comDialog.fields,this._data,this.container)},t.prototype.applyAction=function(e,t,i){},t.prototype.meta=function(){return t._metaData_},t.prototype.getIcon=function(){if(!this.cachedIcon){var e=c.Service.ElementComposition.lookupPluginIcon(this.className);this.cachedIcon=e||"fa fa-puzzle-piece"}return this.cachedIcon},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);if("function"==typeof this._def.getUsedMediaGalleryItems){var i=this._def.getUsedMediaGalleryItems(this._data);if(s().isArray(i))for(var n=0,o=i;n<o.length;n++){var r=o[n];"string"==typeof r&&""!==r&&"none"!==r&&t.push(r)}}return t},t.prototype.getUsedSiteStyles=function(){var t=e.prototype.getUsedSiteStyles.call(this);if("function"==typeof this._def.getUsedSiteStyles){var i=this._def.getUsedSiteStyles(this._data);if(s().isArray(i))for(var n=0,o=i;n<o.length;n++){var r=o[n];"string"==typeof r&&""!==r&&t.push(r)}}return t},t.prototype.getUsedFonts=function(){var t=e.prototype.getUsedFonts.call(this);if("function"==typeof this._def.getUsedFonts){var i=this._def.getUsedFonts(this._data);if(s().isArray(i))for(var n=0,o=i;n<o.length;n++){var r=o[n];"string"==typeof r&&""!==r&&t.push(r)}}return t},t.prototype.getSupportedSizeUnits=function(){return"function"==typeof this._def.getSupportedSizeUnits?this._def.getSupportedSizeUnits(this._data):e.prototype.getSupportedSizeUnits.call(this)},t.prototype.onLoaded=function(){return"function"==typeof this._def.onLoaded?this._def.onLoaded():s().when()},t.prototype.supportsAutoWidth=function(){return"function"==typeof this._def.supportsAutoWidth?this._def.supportsAutoWidth(this._data):"boolean"==typeof this._def.supportsAutoWidth?this._def.supportsAutoWidth:e.prototype.supportsAutoWidth.call(this)},t.prototype.supportsAutoHeight=function(){return"function"==typeof this._def.supportsAutoHeight?this._def.supportsAutoHeight(this._data):"boolean"==typeof this._def.supportsAutoHeight?this._def.supportsAutoHeight:e.prototype.supportsAutoHeight.call(this)},t.prototype.canUseAsBackground=function(){return"function"==typeof this._def.canUseAsBackground?this._def.canUseAsBackground(this._data):"boolean"==typeof this._def.canUseAsBackground?this._def.canUseAsBackground:e.prototype.canUseAsBackground.call(this)},t.generatePaymentGatewayLogoHtml=function(e,t){if(void 0===t&&(t=null),"string"==typeof t&&t)for(var i=0,n=e;i<n.length;i++){var o=n[i];"html"in o&&o.html||(o.html='<div class="payment-gateway-logo-item"><img src="'+wb_builder.pluginRepoPath+"/"+t+"/site/gallery_gen/"+t+"/"+o.id+'" alt="'+o.id+'" /></div>')}return e},t.paymentGatewayStylePropertiesDef=function(e,i,n){void 0===n&&(n=null),i&&(i=this.generatePaymentGatewayLogoHtml(i,n));var o=[{id:"buttonLabel",type:"PaymentGatewayButtonLabel",get:function(e){return e.content.button_label},set:function(e,i){i.content.button_label=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"buttonColor",type:"PaymentGatewayButtonColor",get:function(e){return e.content.button_color},set:function(e,i){i.content.button_color=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"fontFamily",type:"PaymentGatewayFontControl",get:function(e){return{font:e.content.font_family,color:e.content.label_color,size:e.content.font_size}},set:function(e,i){i.content.font_family=e.font,i.content.label_color=e.color,i.content.font_size=e.size,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"fontSize",type:"PaymentGatewayFontSize",get:function(e){return e.content.font_size},set:function(e,i){i.content.font_size=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"labelColor",type:"PaymentGatewayLabelColor",get:function(e){return e.content.label_color},set:function(e,i){i.content.label_color=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"buttonBorder",type:"PaymentGatewayBorderControl",get:function(e){var t=(0,w.buildCss)(e.content.button_border||null);return(0,w.applyRadiusValue)(t,e.content.border_radius),t},set:function(e,i){i.content.button_border=S({},e),delete i.content.button_border.radius,i.content.border_radius=(0,w.toRadiusValue)(e),i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"logo",type:"PaymentGatewayLogo",get:function(e){return e.content.logo},set:function(e,i){i.content.logo=e,i.content.logo_src=t.paymentGatewayGenLogoSrc(i),i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()},uiComponentOptions:{options:i}},{id:"logoSrc",type:"PaymentGatewayLogoSrc",get:function(e){return e.content.logo_src},set:function(e,i){i.content.logo_src=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"showLogo",type:"PaymentGatewayShowLogo",get:function(e){return e.content.showlogo?1:0},set:function(e,i){i.content.showlogo=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"logoWidth",type:"PaymentGatewayLogoWidth",get:function(e){return e.content.logo_width},set:function(e,i){i.content.logo_width=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"buttonPadding",type:"PaymentGatewayButtonPadding",get:function(e){return e.content.button_padding},set:function(e,i){i.content.button_padding=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"buttonWidth",type:"PaymentGatewayButtonWidth",get:function(e){return e.content.button_padding},set:function(e,i){i.content.button_padding=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}},{id:"buttonHeight",type:"PaymentGatewayButtonHeight",get:function(e){return e.content.button_padding},set:function(e,i){i.content.button_padding=e,i.content.paymentGatewayButton=t.paymentGatewayGenButton(i),this.updateElement()}}];return e.concat(o)},t.paymentGatewayStyleTabDef=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=!1);var n=[{type:"VerticalLayout",css:{width:120},children:[{type:"Label",text:__("Font")},{type:"FontFamilySelector",id:"font_family",noFixedWidth:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Max logo width")},{type:C.SizeSelector,id:"logo_width",max:300,min:20}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Show logo")},{type:"RadioBox",id:"showlogo1",label:__("Yes"),group:"showlogo"},{type:"RadioBox",id:"showlogo0",label:__("No"),group:"showlogo"}]}];e&&(e=this.generatePaymentGatewayLogoHtml(e,t),n.push({type:"VerticalLayout",children:[{type:"Label",text:__("Logo")},{type:"DropdownBox",id:"logo",options:e}]}));var o=[{type:"VerticalLayout",children:[{type:"Label",text:__("Button Label")},{type:"TextField",id:"button_label"}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:w.BorderControl,id:"button_border",showRadius:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Background")},{type:_.ColorPicker,id:"button_color"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Size")},{type:C.SizeSelector,id:"font_size"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Color")},{type:_.ColorPicker,id:"label_color",noTransparent:!0}]}]},{type:"HorizontalLayout",css:{marginTop:15},children:n},{type:"HorizontalLayout",css:{marginTop:15},columnWeights:[8,4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Button padding (px)")},{type:C.SizeSelector,id:"button_padding",min:0,max:299,repeat:!1}]}]}];return o.push({type:"FlowLayout",css:{marginTop:15},children:[{type:"VerticalLayout",css:{},children:[{type:"Label",text:__("Width")},{type:C.SizeSelector,id:"button_width"}]},{type:"VerticalLayout",css:{},children:[{type:"Label",text:""},{type:"Label",text:" x ",css:{marginTop:10,fontWeight:"normal"}}]},{type:"VerticalLayout",css:{},children:[{type:"Label",text:__("Height")},{type:C.SizeSelector,id:"button_height"}]}]}),o.push({type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"preview",init:function(e,t){var i=this;this.getElem().css({background:'url("modules/builder/img/bg2_2.png") repeat',padding:15}),this.update=function(e){var n=t.__paymentGatewayPreview__();i.getElem().html('<div style="overflow: hidden; margin: 0 auto; height: '+(e?"auto":n.height)+"px;width: "+n.width+("number"==typeof n.width?"px":"")+';">'+t.__paymentGatewayGenButton__(n)+"</div>"),e&&setTimeout((function(){var e=i.getElem().find(".btn").outerHeight();t.button_height.setValue(e),t.sizeH&&t.sizeH.setValue(e)}),50)}}}]}),{name:__("Style"),children:o}},t.paymentGatewayOpenAction=function(e,i,n){var o;i.content.button_label&&e.button_label&&e.button_label.setText(i.content.button_label),i.content.button_color&&e.button_color&&e.button_color.setValue(i.content.button_color),i.content.font_family&&e.font_family&&e.font_family.setValue(i.content.font_family),i.content.font_size&&e.font_size&&e.font_size.setValue(i.content.font_size),i.content.label_color&&e.label_color&&e.label_color.setValue(i.content.label_color),i.content.button_border&&e.button_border&&e.button_border.setValue(i.content.button_border),e.logo&&i.content.logo&&(o=e.logo.getItemById(i.content.logo),e.logo.selectItem(o)),e.showlogo1&&e.showlogo1.setValue(!0===i.content.showlogo),e.showlogo0&&e.showlogo0.setValue(!1===i.content.showlogo),i.content.logo_width&&e.logo_width&&e.logo_width.setValue(i.content.logo_width),(i.content.button_padding||0===i.content.button_padding)&&e.button_padding&&e.button_padding.setValue(i.content.button_padding),i.width&&e.button_width&&e.button_width.setValue(i.width),i.height&&e.button_height&&e.button_height.setValue(i.height),e.__paymentGatewayEventsSet__||(e.preview||(e.preview={update:function(){}}),e.__paymentGatewayEventsSet__=!0,e.__paymentGatewayGenButton__=t.paymentGatewayGenButton,e.__paymentGatewayGenLogoSrc__=t.paymentGatewayGenLogoSrc,e.__paymentGatewayPreview__=function(){var t,n,o=s().extend(!0,{},i);return e.button_width&&(o.width=e.button_width.getValue()),e.button_height&&(o.height=e.button_height.getValue()),e.button_label&&(o.content.button_label=e.button_label.getText()),e.button_color&&(o.content.button_color=e.button_color.getValue()),e.font_family&&(o.content.font_family=e.font_family.getValue()),e.font_size&&(o.content.font_size=e.font_size.getValue()),e.label_color&&(o.content.label_color=e.label_color.getValue()),e.button_border&&(o.content.button_border=e.button_border.getValue()),e.logo&&(t=e.logo.getSelectedItem())&&(n=t.getOriginal())&&(o.content.logo=n.id),e.showlogo1&&(o.content.showlogo=!!e.showlogo1.getValue()),e.logo_width&&(o.content.logo_width=e.logo_width.getValue()),e.button_padding&&(o.content.button_padding=e.button_padding.getValue()),o.content.logo_src=e.__paymentGatewayGenLogoSrc__(o),o},e.button_label&&e.button_label.on("change",(function(){return e.preview.update(!0)})),e.button_color&&e.button_color.setOnChange((function(){return e.preview.update()})),e.font_family&&e.font_family.on("change",(function(){return e.preview.update()})),e.font_size&&e.font_size.on("change",(function(){return e.preview.update()})),e.label_color&&e.label_color.setOnChange((function(){return e.preview.update()})),e.button_border&&e.button_border.setOnChange((function(){return e.preview.update()})),e.logo&&e.logo.on("change",(function(){return e.preview.update(!0)})),e.showlogo1&&e.showlogo1.on("change",(function(){return e.preview.update(!0)})),e.showlogo0&&e.showlogo0.on("change",(function(){return e.preview.update()})),e.logo_width&&e.logo_width.on("change",(function(){return e.preview.update()})),e.button_padding&&e.button_padding.on("change",(function(){return e.preview.update()})),e.sizeW&&e.sizeW.on("change",(function(){e.button_width.setValue(e.sizeW.getValue()),e.preview.update()})),e.sizeH&&e.sizeH.on("change",(function(){e.button_height.setValue(e.sizeH.getValue()),e.preview.update()})),e.button_width&&e.button_width.on("change",(function(){e.sizeW&&e.sizeW.setValue(e.button_width.getValue()),e.preview.update()})),e.button_height&&e.button_height.on("change",(function(){e.sizeH&&e.sizeH.setValue(e.button_height.getValue()),e.preview.update()}))),e.preview.update()},t.paymentGatewayApplyAction=function(e,t,i){var n,o;e.button_label&&(t.content.button_label=e.button_label.getText()),e.button_color&&(t.content.button_color=e.button_color.getValue()),e.font_family&&(t.content.font_family=e.font_family.getValue()),e.font_size&&(t.content.font_size=e.font_size.getValue()),e.label_color&&(t.content.label_color=e.label_color.getValue()),e.button_border&&(t.content.button_border=e.button_border.getValue()),e.logo&&(n=e.logo.getSelectedItem())&&(o=n.getOriginal())&&(t.content.logo=o.id),e.showlogo1&&e.showlogo1.getValue()&&(t.content.showlogo=!0),e.showlogo0&&e.showlogo0.getValue()&&(t.content.showlogo=!1),e.logo_width&&(t.content.logo_width=e.logo_width.getValue()),e.button_padding&&(t.content.button_padding=e.button_padding.getValue()),e.button_width&&(t.width=e.button_width.getValue()),e.button_height&&(t.height=e.button_height.getValue()),t.content.logo_src=e.__paymentGatewayGenLogoSrc__(t),t.content.paymentGatewayButton=e.__paymentGatewayGenButton__(t)},t.paymentGatewayLoadAction=function(e,t,i){void 0===i&&(i=!1);var n=e.content.button_border;!e.content.border_radius&&n&&n.radius&&(e.content.border_radius=(0,w.toRadiusValue)(n),n.radius=void 0,n.css&&"object"==typeof n.css&&(delete n.css["border-radius"],delete n.css["-webkit-border-radius"],delete n.css["-moz-border-radius"]));var o=i?"none":"solid";"object"!=typeof t&&(t={}),void 0===e.content.button_label?e.content.button_label=void 0!==t.button_label?t.button_label:i?"":__("Pay with %s").replace("%s",""):"Pay with"===s().trim(e.content.button_label)&&(e.content.button_label=s().trim(__("Pay with %s").replace("%s",""))),e.content.button_color||(e.content.button_color=t.button_color?t.button_color:"#ffffff"),e.content.font_family||(e.content.font_family=t.font_family?t.font_family:"Arial"),e.content.font_size||(e.content.font_size=parseInt(t.font_size)?parseInt(t.font_size):14),e.content.label_color||(e.content.label_color=t.label_color?t.label_color:"#000000"),e.content.button_border||(e.content.button_border=t.button_border?t.button_border:{color:["#eeeeee","#eeeeee","#eeeeee","#eeeeee"],style:[o,o,o,o],weight:[1,1,1,1],differ:!1,css:{"border-bottom":"1px "+o+" #eeeeee","border-left":"1px "+o+" #eeeeee","border-right":"1px "+o+" #eeeeee","border-top":"1px "+o+" #eeeeee"},cssRaw:"border: 1px "+o+" #eeeeee"}),e.content.logo||(e.content.logo=t.logo?t.logo:null),void 0===e.content.showlogo&&(e.content.showlogo=void 0===t.showlogo||!!t.showlogo),e.content.logo_width||(e.content.logo_width=parseInt(t.logo_width)?parseInt(t.logo_width):80),e.content.border_radius||(e.content.border_radius=t.border_radius?t.border_radius:{lt:0,rt:0,rb:0,lb:0,css:{"border-radius":"0px","-webkit-border-radius":"0px","-moz-border-radius":"0px"},cssRaw:""}),void 0===e.content.button_padding&&(e.content.button_padding=void 0===t.button_padding||isNaN(parseInt(t.button_padding))?5:parseInt(t.button_padding)),e.content.logo_src=this.paymentGatewayGenLogoSrc(e),e.content.paymentGatewayButton=this.paymentGatewayGenButton(e)},t.paymentGatewayGenLogoSrc=function(e){return e.class&&e.content.logo?wb_builder.pluginRepoPath+"/"+e.class+"/site/gallery_gen/"+e.class+"/"+e.content.logo:null},t.paymentGatewayGenButton=function(e){var t=s()("<button>").addClass("btn btn-default btn-sm").css({width:"100%",height:"100%",whiteSpace:"normal",overflow:"hidden"});if(e.content.button_label){var i=s()("<strong>");i.text(e.content.button_label),i.css("display","block"),e.content.label_color&&i.css("color",e.content.label_color),e.content.font_family&&i.css("font-family",e.content.font_family),e.content.font_size&&i.css("font-size",e.content.font_size+"px"),t.append(i)}if(e.content.border_radius&&e.content.border_radius.css&&t.css(e.content.border_radius.css),(e.content.button_padding||0===e.content.button_padding)&&t.css("padding",e.content.button_padding+"px"),e.content.button_color&&t.css("background-color",e.content.button_color),e.content.button_border&&e.content.button_border.css&&t.css(e.content.button_border.css),e.content.showlogo&&e.content.logo_src){var n=s()("<img>").css("max-width","100%");n.attr("src",e.content.logo_src),e.class&&n.attr("alt",e.class),e.content.logo_width&&n.css("width",e.content.logo_width+"px"),t.append(n)}return t.wrap("<div>").parent().html()},t.paymentGatewayMigrateNewVars=function(e,t){var i;for(var n in t)i=t[n],n&&i&&n in e.content&&(e.content[i]=e.content[n],e.content[n]=null,delete e.content[n])},t.PluginElement=g.PluginElement,t._config=new h.PluginWrapperConfig,t._metaData_=new h.PluginMetaData,t}(a.Element)},"./PluginApi/Types.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ElementDefinition:function(){return a},PluginDefinition:function(){return r},PluginEvent:function(){return n},PluginMetaData:function(){return o},PluginWrapperConfig:function(){return s}});var n=function(){this.x=0,this.y=0,this.ctxMenu=null,this.target=null},o=function(){this.id=null,this.icon=null,this.name=null,this.isBorderless=!1,this.template="",this.serviceUrl=null,this.def=new r},s=function(e,t,i,n,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),void 0===o&&(o=null),this.id=e,this.icon=t,this.template=i,this.active=n,this.serviceUrl=o},r=function(){this.name=null,this.borderless=!1,this.element=new a,this.serviceUrl=null},a=function(){this.resizable=!1,this.renderOnce=!1,this.isolatedRendering=!1,this.updateDelay=0}},"./PluginApi/UIManager.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UIManager:function(){return o},getApiInstance:function(){return u},getManager:function(){return d},init:function(){return c},registerUI:function(){return l}});var n=i("./Service.ts"),o=function(){function e(e){}return e.prototype.getSubBar=function(){return null},e.prototype.getControlToolbar=function(){return null},e.prototype.getToolbarHeight=function(){return 0},e.prototype.getWidgetToolbar=function(){return null},e.prototype.lookupUIElement=function(e,t){return null},e.prototype.lookupUIIconClass=function(e,t){return null},e.prototype.closeAll=function(){},e}(),s={},r=null,a=null;function l(e,t){s[e]=t}function c(e,t){var i;if("string"==typeof t&&s.hasOwnProperty(t))i=s[t];else{var n=Object.keys(s).shift();if(!n)throw new Error("No UI manager");i=s[n]}a=e,r=new i(e)}function u(){if(!a)throw new Error("You can only use this after initialization");return a}function d(){if(!r)throw new Error("You can only use this after initialization");return r}n.Service.uiManager={getApiInstance:u,getManager:d}},"./PointerTracker.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PointerTracker:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s={trackMouse:!0,trackTouches:!0,allowMultiplePointers:!0,preventDefaults:!0,minDragDistance:1},r=function(){function e(t,i){var n=this;if(this.pointers={},this.activePointers=0,this.isMultiTouch=null,this.options=o().extend({},s,i),!this.options.trackMouse&&!this.options.trackTouches)throw new Error("At least trackMouse or trackTouches option must be set to true.");this.options.trackMouse&&(t.on("mousedown",(function(t){n.onPointerStart("mouse"+t.which,!0,t.target,e.getEventPosition(t,t))&&n.options.preventDefaults&&(t.stopImmediatePropagation(),t.preventDefault())})),o()(window).on("mousemove",(function(t){for(var i in n.pointers)n.pointers.hasOwnProperty(i)&&n.pointers[i].isMouse&&n.onPointerMove(n.pointers[i].identifier,t.target,e.getEventPosition(t,t))})),o()(window).on("mouseup",(function(t){n.onPointerEnd("mouse"+t.which,t.target,e.getEventPosition(t,t))}))),this.options.trackTouches&&(t.on("touchstart",(function(t){var i=t.originalEvent;null===n.isMultiTouch&&(n.isMultiTouch="identifier"in i.touches[0]);for(var o,s,r,a=!1,l=i.changedTouches.length-1;l>=0;l--)o=i.changedTouches[l],s="touch"+(n.isMultiTouch?o.identifier:0),r=e.getEventPosition(t,o),n.onPointerStart(s,!1,t.target,r)&&(a=!0);a&&n.options.preventDefaults&&(t.stopImmediatePropagation(),t.preventDefault())})),o()(window).on("touchmove",(function(t){for(var i,o,s,r=t.originalEvent,a=r.changedTouches.length-1;a>=0;a--)i=r.changedTouches[a],o="touch"+(n.isMultiTouch?i.identifier:0),s=e.getEventPosition(t,i),n.onPointerMove(o,t.target,s)})),o()(window).on("touchend touchcancel",(function(t){for(var i,o,s,r=t.originalEvent,a=r.changedTouches.length-1;a>=0;a--)i=r.changedTouches[a],o="touch"+(n.isMultiTouch?i.identifier:0),s=e.getEventPosition(t,i),n.onPointerEnd(o,t.target,s)})))}return e.getEventPosition=function(e,t){var i={clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY};if(null===t.pageX&&null!==t.clientX){var n=e.target,o=n&&"ownerDocument"in n&&n.ownerDocument||document,s=o.documentElement,r=o.body;i.pageX=i.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),i.pageY=i.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}return i},e.prototype.onPointerStart=function(e,t,i,n){if(!this.options.allowMultiplePointers&&this.activePointers>0&&!this.pointers.hasOwnProperty(e))return!1;this.pointers.hasOwnProperty(e)&&this.onPointerEnd(e,i,n);var s=o().extend({},n),r={identifier:e,isMouse:t,isDragging:!this.options.minDragDistance,initialTarget:i,overTarget:i,data:null,initialPosition:s,position:n,positionDelta:{x:0,y:0}};return this.pointers[e]=r,this.activePointers++,this.options.onPointerStart&&!1===this.options.onPointerStart.call(this,r)?(this.activePointers--,delete this.pointers[e],!1):(r.isDragging&&this.options.onDragStart&&this.options.onDragStart.call(this,r),!0)},e.prototype.onPointerMove=function(e,t,i){if(this.pointers.hasOwnProperty(e)){var n=this.pointers[e];n.position=i,n.positionDelta={x:n.position.clientX-n.initialPosition.clientX,y:n.position.clientY-n.initialPosition.clientY},this.options.onPointerMove&&this.options.onPointerMove.call(this,n),n.isDragging||(!this.options.minDragDistance||Math.abs(n.position.clientX-n.initialPosition.clientX)+Math.abs(n.position.clientY-n.initialPosition.clientY)>=this.options.minDragDistance)&&(n.isDragging=!0,this.options.onDragStart&&this.options.onDragStart.call(this,n)),n.isDragging&&this.options.onDragMove&&this.options.onDragMove.call(this,n)}},e.prototype.onPointerEnd=function(e,t,i){if(this.pointers.hasOwnProperty(e)){var n=this.pointers[e];delete this.pointers[e],this.activePointers--,n.position=i,n.positionDelta={x:n.position.clientX-n.initialPosition.clientX,y:n.position.clientY-n.initialPosition.clientY},n.isDragging&&this.options.onDragEnd&&this.options.onDragEnd.call(this,n),this.options.onPointerEnd&&this.options.onPointerEnd.call(this,n),!n.isDragging&&this.options.onClick&&this.options.onClick.call(this,n)}},e}()},"./PreloaderOverlay.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PreloaderOverlay:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t,i){void 0===t&&(t=100),void 0===i&&(i=!1);var n=e.call(this,"div")||this;return n.value=t,n.noParentLimit=i,n.parentLimitsRemoved=!1,n._elem.addClass("wb-preloader-overlay"),n.progressElem=s()("<div>").addClass("progress-bar progress-bar-striped active").css({width:"100%"}),n.progressBarElem=s()("<div>").addClass("progress").append(n.progressElem).appendTo(n._elem),n}return a(t,e),t.prototype.buildInit=function(e,t){e.value&&this.setValue(e.value),this.noParentLimit=!!e.noParentLimit},t.prototype.setVisible=function(t){if(t&&this.noParentLimit&&!this.parentLimitsRemoved&&(this._elem.parent().css({position:"static"}),this.parentLimitsRemoved=!0),e.prototype.setVisible.call(this,t),t){var i=Math.round((this._elem.outerHeight(!1)-this.progressBarElem.outerHeight(!1))/2);i>0&&this.progressBarElem.css({marginTop:i+"px"})}return this},t.prototype.setValue=function(e){this.value=Math.max(Math.min(e,100),0),this.progressElem.css({width:this.value+"%"})},t.prototype.getValue=function(){return this.value},t}(r.UIComponent)},"./PreviewToolbar.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PreviewToolbar:function(){return c},init:function(){return u}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./HelpSystem/HelpSystemPlayer.ts"),r=i("./BuilderEvent.ts"),a=i("./util/EventUtil.ts"),l=i("./Service.ts"),c=function(){function e(e){var t=this;this.isOpen=!1,this.lastScrollPosition=0,this.isDebugMode=!1,this.builder=e,this.body=o()("<div>").addClass("wb-preview-body").hide(),window.CSS&&"function"==typeof window.CSS.supports&&window.CSS.supports("-webkit-overflow-scrolling","touch")&&this.body.css({overflow:"auto","-webkit-overflow-scrolling":"touch"}),this.bodyCover=o()("<div>").addClass("wb-preview-cover").appendTo(this.body).hide(),this.loaderOverlay=o()('<div><div class="ico-spin icon-wb-spinner"></div></div>').addClass("wb-preview-loader-overlay").hide(),this.iframe=document.createElement("iframe");var i=function(){t.bodySize&&(t.updateFramHeight(),t.updateBody())};o()(this.iframe).attr({frameborder:"0",scrolling:"yes"}).on("load",(function(){t.loaderOverlay.hide(),i(),t.toggleDebugMode(!0),s.HelpSystemPlayer.notify("preview-loaded",t)})),o()(window).on("resize orientationchange",i);var n=null,r=!1;this.resizerRight=o()("<div>").addClass("wb-preview-sizer-r").on("mousedown touchstart",(function(e){var i=(0,a.posFromEvent)(e);n={v:t.body.width(),t:6,x:i.left,y:i.top},r=!1,t.bodyCover.show()})).appendTo(this.body),this.resizerLeft=o()("<div>").addClass("wb-preview-sizer-l").on("mousedown touchstart",(function(e){var i=(0,a.posFromEvent)(e);n={v:t.body.width(),t:4,x:i.left,y:i.top},r=!1,t.bodyCover.show()})).appendTo(this.body);var c=l.default.modeManager.getMinWidth();o()(window).on("mousemove touchmove",(function(e){if(n){var i=(0,a.posFromEvent)(e);6===n.t&&t.body.width(Math.max(n.v+2*(i.left-n.x),c)),4===n.t&&t.body.width(Math.max(n.v+2*(n.x-i.left),c)),r||(r=!0,s.HelpSystemPlayer.notify("preview-resize-start",t)),t.setPreviewWidth(t.body.width())}})).on("mouseup touchend touchcancel",(function(){r&&s.HelpSystemPlayer.notify("preview-resize-end",t),n=null,r=!1,t.bodyCover.hide()})),this.builder.body.before(this.body),this.builder.body.before(this.loaderOverlay),this.bodySize={width:c,height:200},this.setVisible(!1)}return e.prototype.toggleDebugMode=function(e){void 0===e&&(e=!1),e||(this.isDebugMode=!this.isDebugMode),this.iframe.contentDocument&&(this.isDebugMode?o()(this.iframe.contentDocument.body).addClass("wb-site-debug"):o()(this.iframe.contentDocument.body).removeClass("wb-site-debug"))},e.prototype.updateFramHeight=function(){this.bodySize&&this.body&&(this.bodySize.height=o()(window).height()-this.body.offset().top)},e.prototype.updateBody=function(){this.body.css({width:this.bodySize.width,height:this.bodySize.height})},e.prototype.setVisible=function(e){var t=new r.VisibilityChangedBuilderEvent(e);if(r.GlobalEvents.triggerEvent(e?"preview.show":"preview.hide",t),e&&this.builder&&this.builder.bodyInstance){var i=l.default.modeManager.getModeFromWidth(wb_builder.body.outerWidth()),n=l.default.modeManager.getModeWidth(i);this.setPreviewWidth(n)}return this},e.prototype.open=function(){if(!this.isOpen){this.body.append(this.iframe);var e=o()(document);this.lastScrollPosition=e.scrollTop(),e.scrollTop(0),this.isOpen=!0,this.builder.body.hide(),this.setVisible(!0),this.loaderOverlay.show(),this.body.show(),this.updateBody(),o()(document.body).css({backgroundColor:"#aaaaaa"}),s.HelpSystemPlayer.notify("preview-open",this)}return this.iframe.contentWindow},e.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.setVisible(!1),this.body.hide(),this.loaderOverlay.hide(),this.builder.body.show(),this.iframe&&this.iframe.contentWindow&&(this.iframe.contentWindow.document.open(),this.iframe.contentWindow.document.write(""),this.iframe.contentWindow.document.close(),o()(this.iframe).detach()),this.lastScrollPosition&&(o()(document).scrollTop(this.lastScrollPosition),this.lastScrollPosition=0),o()(window).trigger("resize"),r.GlobalEvents.triggerEvent("block.main.updatesize",{}),o()(document.body).css({backgroundColor:"#ffffff"}),s.HelpSystemPlayer.notify("preview-close",this))},e.prototype.getResizerElement=function(e){return void 0===e&&(e=!1),e?this.resizerLeft:this.resizerRight},e.prototype.setPreviewWidth=function(e){this.bodySize&&(this.bodySize.width=e,this.updateBody(),this.updateFramHeight(),r.GlobalEvents.triggerEvent("preview.size.changed",new r.PreviewSizeChangedEvent(e)))},e}();function u(e){return new c(e)}},"./ProgressBar.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ProgressBar:function(){return c},ProgressBarType:function(){return o}});var n,o,s=i("./UIComponent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e.Default="default",e.Info="info",e.Success="success",e.Warning="warning",e.Danger="danger"}(o||(o={}));var c=function(e){function t(){var t=e.call(this)||this;return t.parts={},t}return l(t,e),t.prototype._createElem=function(){var e=a()('<div class="progress wb-progress-bar">');return this.container=a()('<div class="wb-progress-bar-cont">').css({"white-space":"nowrap",overflow:"hidden"}),e.append(this.container),e},t.prototype.setValue=function(e){this.setProgress(o.Default,e)},t.prototype.setText=function(e){this.textOver||(this.textOver=a()('<div class="wb-progress-bar-text wb-pbt-over">'),this.textUnder=a()('<div class="wb-progress-bar-text wb-pbt-under">'),this.container.append(this.textOver),this.getElem().append(this.textUnder)),this.textOver.text(e),this.textUnder.text(e)},t.prototype.setProgress=function(e,t){var i,n=e,o=0;for(n in this.parts.hasOwnProperty(n)?i=this.parts[n]:(i=a()('<div class="wb-progress-bar-part progress-bar progress-bar-'+e+' progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">'),this.container.append(i),this.parts[n]=i),i.attr("aria-valuenow",t).data("value",t),this.parts)this.parts.hasOwnProperty(n)&&(o+=this.parts[n].data("value"));if(this.container.css({width:o+"%"}),o>0)for(n in this.parts)this.parts.hasOwnProperty(n)&&this.parts[n].css({width:(o?100*this.parts[n].data("value")/o:0)+"%"})},t}(s.UIComponent)},"./RangeList.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{RangeList:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(){this.ranges=[]}return e.prototype.add=function(e,t,i){void 0===t&&(t=!0);var n=!0;if(t){if(i&&"function"!=typeof i)throw new Error("priorityCheckCallback must be a callable function when specified.");for(var s=void 0,r=void 0,a=[],l=this.ranges.length-1;l>=0;l--)if(s=this.ranges[l],!(e.to<s.from||e.from>s.to))if((i?i(e,s):e)===s)if(e.from<s.from)e.to>s.to&&((r=o().extend({},e)).from=s.to,a.push(r)),e.to=s.from;else{if(e.to<=s.to){n=!1;break}e.from=s.to}else s.from<e.from?(s.to>e.to&&((r=o().extend({},s)).from=e.to,a.push(r)),s.to=e.from):s.to<=e.to?this.ranges.splice(l,1):s.from=e.to;if(a.length)for(var c=0,u=a;c<u.length;c++)r=u[c],this.add(r,t,i)}n&&this.ranges.push(e)},e}()},"./RemoteLoginDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{RemoteLoginDialog:function(){return w},RemoteLoginDialogType:function(){return C},handlePublish:function(){return I},init:function(){return T},isProcessing:function(){return E}});var n,o=i("./HorizontalLayout.ts"),s=i("./UIButton.ts"),r=i("./AlertBox.js"),a=i.n(r),l=i("./NotificationRibbon.ts"),c=i("./CongratsDialog.ts"),u=i("./PreloaderOverlay.ts"),d=i("./WB_Dialog.class.js"),h=i.n(d),p=i("./Service.ts"),m=i("./lib/jquery-1.11.3.min.js"),g=i.n(m),f=i("./core/BuilderConfig.ts"),y=i("./VerticalLayout.ts"),b=i("./IFrameControl.ts"),v=i("./Label.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),C=function(e){function t(){var t=e.call(this,"%inherit%")||this;return t.waitTimer=null,t.onLoadCallback=null,t.imageBanner=null,t.closeBtn=null,t.processing=!1,t}return _(t,e),t.prototype.isProcessing=function(){return this.processing},t.prototype.available=function(){if(f.wbConfig.testMode){if(wb_builder.isReseller)return!0;if(wb_builder.demoConfig&&wb_builder.demoConfig.loginRegApiUrl&&(wb_builder.demoConfig.useRegForm||wb_builder.demoConfig.useRemoteRegForm||wb_builder.demoConfig.useLoginForm))return!0}return!1},t.prototype.setClosable=function(t){e.prototype.setClosable.call(this,t),t?this.closeBtn&&this.closeBtn.show():this.closeBtn&&this.closeBtn.hide()},t.prototype.isRegistrationAvailable=function(){return f.wbConfig.testMode&&wb_builder.demoConfig&&wb_builder.demoConfig.loginRegApiUrl&&(wb_builder.demoConfig.useRegForm||wb_builder.demoConfig.useRemoteRegForm)},t.prototype.isPlainPublish=function(){return f.wbConfig.testMode&&wb_builder.demoConfig&&wb_builder.demoConfig.hidePublishSubMenu},t.prototype.handlePublish=function(){var e=this;wb_builder.publishOnLoad&&wb_builder.publish((function(){setTimeout((function(){return e.congratsDialog.setVisible(!0)}),400)}))},t.prototype.buildBanner=function(e){var t=this,i=new Image;this.imageBanner=g()("<div>").append(i).css({position:"fixed",zIndex:9990,cursor:"pointer",bottom:10,left:"50%"}).appendTo(document.body),i.onload=function(){t.imageBanner.css({width:i.width+"px",height:i.height+"px",marginLeft:i.width/-2+"px"}),g()(i).on("click",(function(){t.available()&&t.setVisible(!0)})),g()("<button>").attr({type:"button"}).css({position:"absolute",zIndex:9991,color:"#333",opacity:1,top:0,right:"4px"}).addClass("close").html("&times;").on("click",(function(){t.imageBanner.remove()})).appendTo(t.imageBanner)},i.onerror=function(){console.log("Error loading banner image '".concat(e,"'."))},i.src=e},t.prototype.getImageBanner=function(){return this.imageBanner},t.prototype.enableWaitTimer=function(e){var t=this;this.waitTimer&&clearTimeout(this.waitTimer),this.fields.iframeAlert.setText("").setVisible(!1),e&&(this.waitTimer=setTimeout((function(){g().getJSON(f.wbConfig.lnBaseUrl+"create-website/notify-wait",(function(e){e.error?t.fields.iframeAlert.setText(e.error.message?e.error.message:e.error).setVisible(!0):e.result?(f.wbConfig.testMode=!1,e.reloadData&&e.reloadData.sessUniqKey&&(f.wbConfig.sessUniqKey=e.reloadData.sessUniqKey,wb_builder.siteDomain=e.reloadData.domain,f.wbConfig.upgradeUrl=e.reloadData.upgradeUrl,wb_builder.formsAllowed=e.reloadData.formsAllowed,"pluginToolbar"in e.reloadData&&e.reloadData.pluginToolbar&&(wb_builder.pluginToolbar=e.reloadData.pluginToolbar)),l.NotificationRibbon.setVisible(!1),t.hide(),wb_builder.publish((function(){t.congratsDialog.setVisible(!0)}))):t.enableWaitTimer(!0)})).fail((function(){t.fields.iframeAlert.setText(__("Action failed")).setVisible(!0)}))}),5e3))},t.prototype.setVisible=function(t,i,n){var o=this;e.prototype.setVisible.call(this,t,i,n),this.fields.iframe&&wb_builder.demoConfig&&(t?(this.fields.preloader.setVisible(!0),this.onLoadCallback||this.fields.iframe.on("load",this.onLoadCallback=function(){o.fields.preloader.setVisible(!1)}),this.fields.iframe.setValue(wb_builder.demoConfig.loginRegApiUrl,{builderApiUrl:f.wbConfig.lnBaseUrl+"api/create-website/",loginHash:wb_builder.demoConfig.loginHash?wb_builder.demoConfig.loginHash:"",serverId:wb_builder.serverId?"".concat(wb_builder.serverId):""}),this.enableWaitTimer(!0)):this.enableWaitTimer(!1))},t.prototype.init=function(){var t,i=this;e.prototype.__construct.call(this,"",!1),this.dialog.addClass("wb-remote-login-dialog"),this.baseElem.css({maxWidth:600}),this.content.css({padding:"20px"}),this.setTitleVisible(!1),this.setFooterVisible(!1),this.setTitle("Login Stuff");var n=!!wb_builder.demoConfig&&wb_builder.demoConfig.useRemoteRegForm,r=!n&&(!wb_builder.demoConfig||wb_builder.demoConfig.useRegForm),d=n&&!!wb_builder.demoConfig&&wb_builder.demoConfig.inlineRemoteForm;d&&(n=!1);var h=!wb_builder.demoConfig||wb_builder.demoConfig.useLoginForm;wb_builder.demoConfig&&!wb_builder.demoConfig.loginRegApiUrl&&(r=!1,n=!1,d=!1,h=!1);var m=wb_builder.demoConfig?wb_builder.demoConfig.loginRegMsg:null;this.setContent(new p.Service.UIBuilder({type:y.VerticalLayout,children:[{type:"AlertBox",style:a().STYLE_WARNING,html:m,css:{marginTop:15},ignore:!m},{type:u.PreloaderOverlay,id:"preloader",value:100,visible:!1,noParentLimit:!0},{type:o.HorizontalLayout,id:"hl",children:[{type:y.VerticalLayout,spacing:0,ignore:!d,children:[{type:"AlertBox",id:"iframeAlert",style:a().STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:b.IFrameControl,id:"iframe",css:{width:"100%",minHeight:"570px",marginTop:"10px"}}]},{type:y.VerticalLayout,spacing:15,ignore:!n,children:[{type:v.Label,text:__("RemoteRegistrationMessage"),css:{fontWeight:"bold",whiteSpace:"pre-wrap"}},{type:s.UIButton,id:"remoteRegisterBtn",text:__("Go to registration"),buttonStyle:s.UIButton.STYLE_SUCCESS,click:function(e,t){t.remoteRegisterBtn.setEnabled(!1),wb_builder.save(!0,(function(){setTimeout((function(){wb_builder.goToPage(null,f.wbConfig.lnBaseUrl+"create-website/remote-register")}),100)}))}}]},{type:y.VerticalLayout,id:"registerForm",spacing:15,ignore:!r,children:[{type:v.Label,text:__("Sign Up"),css:{fontWeight:"bold"}},{type:"AlertBox",id:"registerAlert",style:a().STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:"TextField",id:"rEmail",placeholder:__("E-mail")},{type:"TextField",id:"rName",placeholder:__("Name")},{type:"TextField",id:"rPassword",placeholder:__("Password"),password:!0},{type:"TextField",id:"rPassword2",placeholder:__("Confirm password"),password:!0},{type:s.UIButton,id:"registerBtn",text:__("Register"),buttonStyle:s.UIButton.STYLE_SUCCESS,click:function(e,t){i.processing=!0,t.registerForm.setEnabled(!1),t.registerAlert.setText("").setVisible(!1),t.preloader.setVisible(!0),g().post(f.wbConfig.lnBaseUrl+"create-website/",{register:1,email:t.rEmail.getText(),name:t.rName.getText(),password:t.rPassword.getText(),password2:t.rPassword2.getText()},void 0,"json").done((function(e){e.error?t.registerAlert.setText(e.error.message?e.error.message:e.error).setVisible(!0):(f.wbConfig.testMode=!1,e.reloadData&&e.reloadData.sessUniqKey&&(f.wbConfig.sessUniqKey=e.reloadData.sessUniqKey,wb_builder.siteDomain=e.reloadData.domain,f.wbConfig.upgradeUrl=e.reloadData.upgradeUrl),l.NotificationRibbon.setVisible(!1),i.hide(),wb_builder.publish((function(){i.congratsDialog.setVisible(!0)}))),t.registerForm.setEnabled(!0),t.preloader.setVisible(!1),i.processing=!1})).fail((function(){t.registerAlert.setText(__("Action failed")).setVisible(!0),t.registerForm.setEnabled(!0),t.preloader.setVisible(!1),i.processing=!1}))}}]},{type:y.VerticalLayout,id:"loginForm",spacing:15,ignore:!h,children:[{type:v.Label,text:__("Login"),css:{fontWeight:"bold"}},{type:"AlertBox",id:"loginAlert",style:a().STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:"AlertBox",id:"remindAlert",style:a().STYLE_INFO,visible:!1,css:{marginBottom:10},text:__("A new password will be sent to the specified e-mail address.")},{type:"TextField",id:"lEmail",placeholder:__("E-mail")},{type:"TextField",id:"lPassword",placeholder:__("Password"),password:!0},{type:s.UIButton,id:"lRemind",text:__("Remind password"),buttonStyle:s.UIButton.STYLE_LINK,css:{padding:0},click:function(e,t){t.loginAlert.setVisible(!1),t.remindAlert.setVisible(!0),t.lPassword.setVisible(!1),t.lRemind.setVisible(!1),t.lLogin.setVisible(!0),t.loginBtn.setVisible(!1),t.remindBtn.setVisible(!0)}},{type:s.UIButton,id:"lLogin",text:__("Return to login form"),buttonStyle:s.UIButton.STYLE_LINK,css:{padding:0},visible:!1,click:t=function(e,t){t.loginAlert.setVisible(!1),t.remindAlert.setVisible(!1),t.lPassword.setVisible(!0),t.lRemind.setVisible(!0),t.lLogin.setVisible(!1),t.loginBtn.setVisible(!0),t.remindBtn.setVisible(!1)}},{type:s.UIButton,id:"loginBtn",text:__("Login"),buttonStyle:s.UIButton.STYLE_SUCCESS,click:function(e,t){t.loginForm.setEnabled(!1),t.loginAlert.setText("").setVisible(!1),t.preloader.setVisible(!0),g().post(f.wbConfig.lnBaseUrl+"create-website/",{login:1,email:t.lEmail.getText(),password:t.lPassword.getText()},void 0,"json").done((function(e){e.error?t.loginAlert.setText(e.error.message?e.error.message:e.error).setBoxStyle(a().STYLE_DANGER).setVisible(!0):(f.wbConfig.testMode=!1,e.reloadData&&e.reloadData.sessUniqKey&&(f.wbConfig.sessUniqKey=e.reloadData.sessUniqKey,wb_builder.siteDomain=e.reloadData.domain,f.wbConfig.upgradeUrl=e.reloadData.upgradeUrl),l.NotificationRibbon.setVisible(!1),i.hide(),wb_builder.publish((function(){i.congratsDialog.setVisible(!0)}))),t.loginForm.setEnabled(!0),t.preloader.setVisible(!1)})).fail((function(){t.loginAlert.setText(__("Action failed")).setVisible(!0),t.loginForm.setEnabled(!0),t.preloader.setVisible(!1)}))}},{type:s.UIButton,id:"remindBtn",text:__("Send Password"),buttonStyle:s.UIButton.STYLE_SUCCESS,visible:!1,click:function(e,i){i.loginForm.setEnabled(!1),i.loginAlert.setText("").setVisible(!1),i.preloader.setVisible(!0),g().post(f.wbConfig.lnBaseUrl+"create-website/",{remind:1,email:i.lEmail.getText()},void 0,"json").done((function(e){e.error?i.loginAlert.setText(e.error.message?e.error.message:e.error).setBoxStyle(a().STYLE_DANGER).setVisible(!0):(t(0,i),i.lPassword.focus(),i.loginAlert.setText(__("Password sent")).setBoxStyle(a().STYLE_SUCCESS).setVisible(!0)),i.loginForm.setEnabled(!0),i.preloader.setVisible(!1)})).fail((function(){i.loginAlert.setText(__("Action failed")).setVisible(!0),i.loginForm.setEnabled(!0),i.preloader.setVisible(!1)}))}}]}]}]},this.fields),!0),r&&h&&(this.fields.hl.applyLayoutCellCss(0,{borderRight:"1px solid #d5d5d5"}),this.fields.hl.applyLayoutCellCss(1,{borderLeft:"1px solid #d5d5d5",marginLeft:-1})),this.closeBtn=g()("<button>").addClass("close").attr({type:"button"}).html("&times;").css({position:"absolute",top:"12px",right:"20px",zIndex:99}).on("click",(function(){return i.hide()})),this.closeBtn.prependTo(this.content),this.congratsDialog=new c.CongratsDialog,wb_builder.demoConfig&&wb_builder.demoConfig.bannerImageUrl&&this.buildBanner(wb_builder.demoConfig.bannerImageUrl),g()(window).on("message",(function(e){e.originalEvent.data&&"object"==typeof e.originalEvent.data&&"action"in e.originalEvent.data&&"remoteLoginRegisterDisableClose"===e.originalEvent.data.action&&i.setClosable(!1)}))},t}(h()),w=new C;function T(){w.init()}function E(){return w.isProcessing()}function I(){w.handlePublish()}p.Service.RemoteLoginDialog=w},"./RoundCornersControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{RoundCornersControl:function(){return d}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./SizeSelector.ts"),a=i("./CheckBox.js"),l=i.n(a),c=i("./UIComponent.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;i.onChange=t,i.differ=!1;var n=s()('<table class="wb-roundcorner-control"><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></table>');i.differInput=new(l())(__("Use different corners"),!1,!0),i.differInput.css({marginTop:10}),i._elem.append(n),i._elem.append(i.differInput.getElem()),i.square=s()('<div class="smaller-square"></div>');var o=n.find("td"),a=0,c=null;return(c=o.eq(a++)).append((i._lt=new r.SizeSelector).getElem()),i._lt.setMinValue(0),i._lt.on("change keyup",(function(){i.updateStyle(),i._triggerOnChange()})),i._lt.on("cut paste",(function(){setTimeout((function(){i.updateStyle(),i._triggerOnChange()}),0)})),c.append(i.square),(c=o.eq(a++)).append(i._lt_p=s()('<div class="wb-roundcorner-control-clt"></div>')),(c=o.eq(a++)).append(i._rt_p=s()('<div class="wb-roundcorner-control-crt"></div>')),(c=o.eq(a++)).append((i._rt=new r.SizeSelector).getElem()),i._rt.setMinValue(0),i._rt.on("change keyup",(function(){i.updateStyle(),i._triggerOnChange()})),i._rt.on("cut paste",(function(){setTimeout((function(){i.updateStyle(),i._triggerOnChange()}),0)})),(c=o.eq(a++)).append((i._lb=new r.SizeSelector).getElem()),i._lb.setMinValue(0),i._lb.on("change keyup",(function(){i.updateStyle(),i._triggerOnChange()})),i._lb.on("cut paste",(function(){setTimeout((function(){i.updateStyle(),i._triggerOnChange()}),0)})),(c=o.eq(a++)).append(i._lb_p=s()('<div class="wb-roundcorner-control-clb"></div>')),(c=o.eq(a++)).append(i._rb_p=s()('<div class="wb-roundcorner-control-crb"></div>')),(c=o.eq(a++)).append((i._rb=new r.SizeSelector).getElem()),i._rb.setMinValue(0),i._rb.on("change keyup",(function(){i.updateStyle(),i._triggerOnChange()})),i._rb.on("cut paste",(function(){setTimeout((function(){i.updateStyle(),i._triggerOnChange()}),0)})),i.input=i._elem.find("input"),i.differInput.on("change",(function(){i.differ=i.differInput.getValue(),i.updateView()})),i.updateView(),i}return u(t,e),t.stringifyCss=function(e){var t="";for(var i in e)t+=i+": "+e[i]+"; ";return t.substring(0,t.length-1)},t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){return n.call(i,t)})},t.prototype.updateView=function(){this.differ?(this.square.css("display","none"),this._rt.getElem().show(),this._rb.getElem().show(),this._lb.getElem().show(),this._lt_p.show(),this._rt_p.show(),this._rb_p.show(),this._lb_p.show()):(this.square.css("display","inline-block"),this._rt.getElem().hide(),this._rb.getElem().hide(),this._lb.getElem().hide(),this._lt_p.hide(),this._rt_p.hide(),this._rb_p.hide(),this._lb_p.hide())},t.prototype._triggerOnChange=function(){"function"==typeof this.onChange&&this.onChange.call(this),this.onValueChanged()},t.prototype.updateStyle=function(){this._lt_p.css("border-radius",this._lt.getValue()+"px 0 0 0"),this._rt_p.css("border-radius","0 "+this._rt.getValue()+"px 0 0"),this._rb_p.css("border-radius","0 0 "+this._rb.getValue()+"px 0"),this._lb_p.css("border-radius","0 0 0 "+this._lb.getValue()+"px"),this.square.css("border-radius",this._lt.getValue()+"px")},t.prototype.getValue=function(){var e,i={"border-radius":e=this.differ?this._lt.getValue()+"px "+this._rt.getValue()+"px "+this._rb.getValue()+"px "+this._lb.getValue()+"px":this._lt.getValue()+"px "+this._lt.getValue()+"px "+this._lt.getValue()+"px "+this._lt.getValue()+"px","-moz-border-radius":e,"-webkit-border-radius":e};return{lt:this._lt.getValue(),rt:this._rt.getValue(),rb:this._rb.getValue(),lb:this._lb.getValue(),differ:this.differ,css:i,cssRaw:t.stringifyCss(i)}},t.prototype.setValue=function(e){var t=e;t||(t={lt:0,rt:0,rb:0,lb:0,differ:!1}),this._lt.setValue(t.lt),this._rt.setValue(t.rt),this._rb.setValue(t.rb),this._lb.setValue(t.lb),this.differ="differ"in t?!!t.differ:t.lt!==t.rt||t.lt!==t.rb||t.lt!==t.lb||t.rt!==t.rb||t.rt!==t.lb||t.rb!==t.lb,this.differInput.setValue(this.differ),this.updateView(),this.updateStyle()},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t}(c.UIComponent)},"./Rulers.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Ruler:function(){return r},RulerManagerInstance:function(){return a}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(){this.invalidationTimer=null,this.rulers=[]}return e.prototype.invalidate=function(){var e=this;return this.invalidationTimer||(this.invalidationTimer=setTimeout((function(){e.render(),e.invalidationTimer=null}),0)),this},e.prototype.render=function(){for(var e=0,t=this.rulers;e<t.length;e++)t[e].render();return this},e.prototype.addRuler=function(e,t,i){void 0===i&&(i=!0);var n=new r(e,t,i);return this.rulers.push(n),this.invalidate(),n},e.prototype.removeRuler=function(e){var t=this.rulers.indexOf(e);return t>=0&&(this.rulers.splice(t,1),e.onRemove()),this},e.prototype.clear=function(){for(var e=0,t=this.rulers;e<t.length;e++)t[e].onRemove();return this.rulers=[],this.invalidate(),this},e}(),r=function(){function e(e,t,i){void 0===i&&(i=!0),this.visible=!0,this.lineVisible=!0,this.renderedVisible=!1,this.hElem=null,this.vElem=null,this.hMeasurement=null,this.vMeasurement=null,this.lineVisible=i,this.set(e,t)}return e.prototype.set=function(e,t){return this.from=e,this.to=t,a.invalidate(),this},e.prototype.setVisible=function(e){return this.visible!=e&&(this.visible=e,a.invalidate()),this},e.prototype.render=function(){return wb_builder.bodyInstance?(!this.visible||this.from.x===this.to.x&&this.from.y===this.to.y?(this.hElem&&this.hElem.addClass("hidden"),this.vElem&&this.vElem.addClass("hidden")):(this.from.x!==this.to.x?(this.hElem||(this.hElem=o()('<div class="wb-ruler wb-ruler-horizontal">'),this.hMeasurement=o()('<div class="wb-ruler-measurement">'),this.hElem.append(this.hMeasurement),this.lineVisible||this.hElem.addClass("wb-ruler-no-line"),wb_builder.body.append(this.hElem)),e=Math.round(Math.abs(this.to.x-this.from.x)),this.hMeasurement&&(this.hMeasurement.text(e+"px"),this.from.y<=this.to.y?this.hMeasurement.removeClass("wb-ruler-measurement-bottom").addClass("wb-ruler-measurement-top"):this.hMeasurement.removeClass("wb-ruler-measurement-top").addClass("wb-ruler-measurement-bottom")),this.hElem.removeClass("hidden").css({left:Math.min(this.from.x,this.to.x),top:this.from.y,width:e})):this.hElem&&this.hElem.addClass("hidden"),this.from.y!==this.to.y?(this.vElem||(this.vElem=o()('<div class="wb-ruler wb-ruler-vertical">'),this.vMeasurement=o()('<div class="wb-ruler-measurement">'),this.vElem.append(this.vMeasurement),this.lineVisible||this.vElem.addClass("wb-ruler-no-line"),wb_builder.body.append(this.vElem)),e=Math.round(Math.abs(this.to.y-this.from.y)),this.vMeasurement&&(this.vMeasurement.text(e+"px"),this.from.x<=this.to.x?this.vMeasurement.removeClass("wb-ruler-measurement-left").addClass("wb-ruler-measurement-right"):this.vMeasurement.removeClass("wb-ruler-measurement-right").addClass("wb-ruler-measurement-left")),this.vElem.removeClass("hidden").css({left:this.to.x,top:Math.min(this.from.y,this.to.y),height:e})):this.vElem&&this.vElem.addClass("hidden")),this.renderedVisible=this.visible,this):this;var e},e.prototype.onRemove=function(){this.hElem&&(this.hElem.remove(),this.hElem=null),this.vElem&&(this.vElem.remove(),this.vElem=null)},e}(),a=new s},"./Serializable.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Serializable:function(){return n}});var n=function(){function e(){}return e.copy=function(t,i,n,o){if(void 0===i&&(i=null),void 0===n&&(n=!1),void 0===o&&(o=null),!n&&t instanceof e){var s=t.serialize();return i&&(s=e.copy(s,i)),s}if(t instanceof Array){for(var r=[],a=0;a<t.length;a++)o&&!o.call(t,a,t[a])||r.push(e.copy(t[a]));return r}if(t instanceof Object){var l=i||{};for(var c in t)!t.hasOwnProperty(c)||"function"==typeof t[c]||o&&!o.call(t,c,t[c])||(l[c]=e.copy(t[c]));return l}return"function"==typeof t?null:t},e.deserializeArray=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=i||[];if(t instanceof Array)for(var o=0;o<t.length;o++){var s=new e;s.deserialize(t[o]),n.push(s)}return n},e.serializeValue=function(t,i,n,o){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),e.copy(t,i,o,n)},e.prototype.deserialize=function(t){void 0===t&&(t=null),t&&"object"==typeof t&&e.copy(t,this)},e.prototype.serialize=function(){return e.copy(this,null,!0)},e}()},"./Service.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Service:function(){return r}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}((function(){}));new s,window.__extends=o;var r={};t.default=r},"./Shape.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Shape:function(){return _}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./ElementRegister.ts"),a=i("./Element.ts"),l=i("./Service.ts"),c=i("./BackgroundControl.ts"),u=i("./BorderControl.ts"),d=i("./WB_URLControl.class.js"),h=i.n(d),p=i("./RoundCornersControl.ts"),m=i("./element/PropertyType.ts"),g=i("./element/Controls.ts"),f=i("./element/ElementBackground.ts"),y=i("./BuilderEvent.ts"),b=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),v=function(){return v=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},_=function(e){function t(i){var n=e.call(this,i)||this;n.noPhotoBg="ico-tb-shape",n._link=null,n.ignoreParentBounds=!0;var o=null;i.content&&(parseFloat(""+i.content.opacity)||0===parseFloat(""+i.content.opacity))&&(o=parseFloat(""+i.content.opacity),i.content.opacity=null,delete i.content.opacity),n.displayEmptyMessage(!1),n.container.css({overflow:"hidden"}),n.shape=s()("<div></div>"),n.shape.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),n.container.append(n.shape);var r=i.content&&i.content.background&&"string"==typeof i.content.background?i.content.background:"#ffffff";if(n._background=i.content&&i.content.background&&"object"==typeof i.content.background?i.content.background:{color:r,image:"none",position:"left top",repeat:"repeat",size:"auto auto",attachment:"scroll",css:{background:r+" none repeat scroll left top","background-size":"auto auto"}},n._border=i.content&&i.content.border?i.content.border:{color:"#C0C0C0",style:"solid",weight:5,css:{border:"5px solid #C0C0C0"}},null!==o){var a=n._background.color,l=t.applyOldOpacityToColor(a,o);if(n._background.opacity=100*o,n._background.css||(n._background.css={}),n._background.css.opacity=o,o<1&&n._background.image&&"none"!==n._background.image?(n._background.color="transparent",n._background.css.background=n._background.css.background.replace(a,"transparent")):(n._background.color=l,n._background.css.background=n._background.css.background.replace(a,l)),"string"==typeof n._border.color)a=n._border.color,l=t.applyOldOpacityToColor(a,o),n._border.color=l,n._border.css&&n._border.css.hasOwnProperty("border")&&(n._border.css.border=n._border.css.border.replace(a,l));else for(var c=["top","right","bottom","left"],u=0;u<4;u++)a=n._border.color[u],l=t.applyOldOpacityToColor(a,o),n._border.color[u]=l,0===u&&n._border.css&&n._border.css.hasOwnProperty("border")&&(n._border.css.border=n._border.css.border.replace(a,l)),n._border.css&&n._border.css.hasOwnProperty("border-"+c[u])&&(n._border.css["border-"+c[u]]=n._border.css["border-"+c[u]].replace(a,l))}return n._borderRadius=i.content&&i.content.borderRadius?i.content.borderRadius:{lt:10,rt:10,rb:10,lb:10,differ:!1,css:{"border-radius":"10px","-webkit-border-radius":"10px","-moz-border-radius":"10px"}},n._link=i.content&&"link"in i.content&&i.content.link?i.content.link:null,n.updateStyle(!0),n}return b(t,e),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){var e=(0,u.buildCss)(this._border||null);return(0,u.applyRadiusValue)(e,this._borderRadius),e},set:function(e){this._border=v({},e),delete this._border.radius,this._borderRadius=(0,u.toRadiusValue)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(e){this._borderRadius=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e,y.GlobalEvents.triggerEvent("site.structure.changed",new y.SiteStructureChangedBuilderEvent)},enumerable:!1,configurable:!0}),t.applyOldOpacityToColor=function(e,t){var i=e;if(/^#(\w{2})(\w{2})(\w{2})$/.test(e))i="rgba("+parseInt(RegExp.$1,16)+", "+parseInt(RegExp.$2,16)+", "+parseInt(RegExp.$3,16)+", "+t+")";else if(/^rgb\([^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?\)$/.test(e))i="rgba("+RegExp.$1+", "+RegExp.$2+", "+RegExp.$3+", "+t+")";else if(/^rgba\([^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?(\d+).*?,.*?([\d\.]+).*?\)$/.test(e)){var n=RegExp.$4*t;i="rgba("+RegExp.$1+", "+RegExp.$2+", "+RegExp.$3+", "+n+")"}return i},t.prototype.getDataDefaults=function(){return s().extend(e.prototype.getDataDefaults.call(this),{minWidth:1,minHeight:1})},t.prototype.getIcon=function(){return"fa fa-square-o"},t.prototype.getDefaultResizeMode=function(){return g.ControlsResizeMode.ALL},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return this.background&&this.background.image&&""!==this.background.image&&"none"!==this.background.image&&t.push(this.background.image),t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.content={background:this.background,border:this._border,borderRadius:this._borderRadius,link:this.link},t},t.prototype.releaseResources=function(t){e.prototype.releaseResources.call(this,t);var i=this.shape.children(".wb_shape_video_background");(0,c.runVideoByBackground)(null,i,this)},t.prototype.updateStyle=function(t,i,n){void 0===t&&(t=!1),void 0===n&&(n=!1),e.prototype.updateStyle.call(this,t,i),(0,f.apply)(this,this.background,this.shape,n,"wb_shape_video_background"),this._border.css&&this.shape.css(this._border.css),this._borderRadius.css&&this.shape.css(this._borderRadius.css)},t.prototype.updateHierarchyLevel=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e.prototype.updateHierarchyLevel.call(this,t,i),this.updateStyle(i,void 0,!0)},t.prototype.canUseAsBackground=function(){return!0},t.prototype.getSupportedSizeUnits=function(){var t=e.prototype.getSupportedSizeUnits.call(this),i=t.sizeW,n=t.sizeH;return Array.isArray(n)&&n.push({suffix:"%",min:1,max:100,precision:2,step:1}),{sizeW:i,sizeH:n}},t.prototype.comProperties=function(){var t=this,i=e.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Border")},{type:u.BorderControl,id:"border",noTransparent:!1,change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-prop-border-change",t)}}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Rounded corners")},{type:p.RoundCornersControl,id:"borderRadius",change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-prop-borderRadius-change",t)}}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Background")},{type:c.BackgroundControl,id:"background",useSize:!0,useAttachment:!0,useOpacity:!0,allowVideo:!0,change:function(){l.Service.HelpSystemPlayer.notify("item-plugin-"+t.getClassType()+"-prop-background-change",t)}}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("URL")},{type:"LinkSelector",id:"link",multilang:!0}]}]}],callbackFunc:function(e){t.background=e.background.getValue(),t.border=e.border.getValue(),t.borderRadius=e.borderRadius.getValue(),t.link=e.link.getValue(),t.updateStyle()}});return i.background.setValue(this.background),i.border.setValue(this._border),i.borderRadius.setValue(this._borderRadius),i.link.setValue(this.link),i},t.prototype.getSiteTreeNodeProperties=function(){var t=e.prototype.getSiteTreeNodeProperties.call(this);return t.hasLink=h().isActiveLinkValue(this._link),t},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"background",type:m.PropertyType.ShapeElementBackground,uiComponentOptions:{useSize:!0,useAttachment:!0,useOpacity:!0,allowVideo:!0}}),this.registerProperty({name:"border",type:m.PropertyType.ShapeElementBgBorder}),this.registerProperty({name:"link",type:m.PropertyType.ShapeOnClickLink,uiComponentOptions:function(){return{helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):""}}})},t}(a.Element);r.ElementRegister.registerClass("Shape",_)},"./SiteLoader.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{loadInitSiteData:function(){return d}});var n=i("./ElementRegister.ts"),o=i("./Body.ts"),s=i("./Service.ts"),r=i("./Confirm.ts"),a=i("./util/MenuList.ts"),l=i("./BuilderEvent.ts"),c=i("./element/GroupHandle.ts"),u=function(){function e(e){void 0===e&&(e=0),this.maxElementsToLoad=0,this.batchStart=-1,this.batchEnd=0,this.batchSize=150,this.bodySet=!1,this.maxElementsToLoad=e}return e.prototype.getRemaining=function(){return this.maxElementsToLoad-this.batchEnd},e.prototype.hasMore=function(){return this.batchEnd<this.maxElementsToLoad},e.prototype.nextBatch=function(){return!!this.hasMore()&&(this.batchStart<0?this.batchStart=0:this.batchStart=this.batchEnd,this.batchEnd=Math.min(this.batchStart+this.batchSize,this.maxElementsToLoad),!0)},e}();function d(e,t,i,d){void 0===i&&(i=!1);var h=new u(e.elemntQueue.length);!function(e,t,i,n){t.excludedElements=[],t.pageId=parseInt(e.id,10),t.preloader.setProgress(40),function(e){if((0,a.clearRemovedMenuList)(),"menu"in e&&e.menu&&"object"==typeof e.menu)for(var t in e.menu)s.Service.menu.storeStrangeMenu(e.menu[t])}(e),t.preloader.setProgress(52);var r={class:"Body",content:{blocks:{}}};i.siteData={class:"Site",content:{pages:[]}},t.preloader.setProgress(60);for(var l=10/i.maxElementsToLoad,c=60,u=0;u<i.maxElementsToLoad;u++){var d=e.elemntQueue[u];"Site"===d.class?i.siteData=d:"Body"===d.class&&((r=d).content||(r.content={})),t.preloader.setProgress(Math.floor(c+=l))}n&&t.site.applyData(i.siteData),t.bodyInstance&&t.bodyInstance.cleanup();var h=t.bodyInstance=new o.Body(r,t.body);t.sidebarPanel.setSiteElem(h.site),t.viewportSizeControls.setSiteElem(h.siteRoot)}(e,t,h,i);var p=function(){!function(e,t,i,n){var o=t.bodyInstance;o.isEmpty()&&o.iniDefaultBlock();var r=o.getContentBlock("wb_main");!i.bodySet&&r&&r.updateSize(),o.zReset(),o.updateStyle(),s.Service.menu.getElemList().length||l.GlobalEvents.triggerEvent("pages.changed",new l.PagesChangedBuilderEvent),t.preloader.setProgress(100);var a=t.site.getPage(t.pageId),u=(a&&a.popupMode&&a.popupWidth,a&&a.popupMode?a.popupHeight:null);setTimeout((function(){t.preloader.setVisible(!1),t.preloader.setHintsCategory(null),setTimeout((function(){t.highlightLayout(t.showLayout),t.setLayoutEnabled(!u),(0,c.updateGroupBounds)()}),500)}),500),t.bodyInstance.grid.setVisible(t.bodyInstance.grid.isVisible(),!0),t.highlightLayout(t.showLayout),t.setLayoutEnabled(!u),t.bodyInstance.setDebugLinesVisible(t.site.showDebugLines),t.setPageModified(!1),t.site.reloadPagesMiId(),t.setPageModified(!1),t.site.setLanding(t.site.landing,!0),t.site.onUpdateLanguages(!0),(0,c.initGroups)(t.bodyInstance.getContentElements(!0)),n&&"function"==typeof n&&n.call(t)}(0,t,h,d)},m=function(){h.nextBatch()&&(function(e,t,i){var o,s=30/i.maxElementsToLoad,r=70,a=t.bodyInstance;t.preloader.setProgress(r),i.bodySet=!1;for(var l=i.batchStart;l<i.batchEnd;l++){var c=e.elemntQueue[l];if(c.isCommon&&c.includePages){if(e.popupMode){t.excludedElements.push(c);continue}if(Object.keys(c.includePages).length>0&&!c.includePages[t.pageId]){t.excludedElements.push(c);continue}}if("Blocks"!==c.class){"LayoutElement"===c.class&&(c.isMovable=!1);var u=n.ElementRegister.getClassByName(c.class);if(u){(o=new u(c,!0)).hiddenResp&&o.hide(!0);var d=c.parentId;d||(d=c.block),a.addElement(d,o,!0,!0),t.preloader.setProgress(Math.floor(r+=s)),"wb_main"===d&&(i.bodySet=!0)}}}setTimeout((function(){var e=a.getContentBlock("wb_main");e&&e.updateSize()}),0)}(e,t,h),h.hasMore())?r.Confirm.showDialog(__("Page has lots of elements"),__("Page loaded %s of %s elements, do you want to continue loading?").replace("%s",""+h.batchEnd).replace("%s",""+h.maxElementsToLoad),[{title:__("Yes"),func:function(){return setTimeout((function(){return m()}),1e3)}},{title:__("No"),func:function(){return setTimeout((function(){return p()}),1e3)}}],600):p()};m()}},"./SiteStylesElement.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SiteStylesElement:function(){return l}});var n=i("./Service.ts"),o=i("./ModeManager.js"),s=i.n(o),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=function(){function e(t){if(void 0===t&&(t=null),null===t&&((t=a()("#head")).length||(t=a()("head"))),this.id="wb_site_style_sheet_"+e.nextUID++,this.elem=a()('<style type="text/css" id="'+this.id+'"></style>'),a()(t).append(this.elem),"createPopup"in window&&this.elem.append(document.createTextNode("")),this.sheet=this.elem.get(0).sheet,!this.sheet)for(var i=1;i<document.styleSheets.length;i++){var n=document.styleSheets[i],o=n;if((o.id?o.id:o.ownerNode?o.ownerNode.id:null)===this.id){this.sheet=n;break}}this.sheet&&(!this.sheet.href||this.sheet.href.indexOf(location.origin)>-1)&&(this.rules=this.sheet.cssRules?this.sheet.cssRules:this.sheet.rules)}return e.prototype.fixLocalUrls=function(e){return/^(.*)url\(['"](gallery\/.+)['"]\)(.*)$/.test(e)?RegExp.$1+"url('"+wb_builder.makeLocalUrl(RegExp.$2)+"')"+RegExp.$3:e},e.prototype.canApplyFontScale=function(e,t,i){var n=(t.appliesToTag("ul")||t.appliesToTag("ol"))&&/:before/.test(i.selector);return"font"===e||"font-size"===e||"line-height"===e||n&&("width"===e||"height"===e||"margin-left"===e)},e.prototype.applyFontScale=function(e,t,i,n,o){var s,r,a=t;if(i>0&&1!==i){var l=(n.appliesToTag("ul")||n.appliesToTag("ol"))&&/:before/.test(o.selector);"font-size"===e||l&&("width"===e||"margin-left"===e)?(s=String(a).match(/^([\-0-9]+)([a-z]+|)$/i))&&(r=(r=Math.round(parseInt(s[1],10)*i))<0?Math.min(r,-8):Math.max(r,8),"margin-left"===e&&o.css.hasOwnProperty("-wb-offs-post-calc")&&(r-=o.css["-wb-offs-post-calc"]),a=String(r)+s[2]):"font"===e?(s=String(a).match(/^(.+\ )([\-0-9]+)(px\ .+)$/i))&&(r=Math.max(Math.round(parseInt(s[2],10)*i),8),a=s[1]+String(r)+s[3]):("line-height"===e||l&&"height"===e)&&(s=String(a).match(/^([\-0-9]+)([a-z]+|)$/i))&&(r=Math.max(Math.round(parseInt(s[1],10)*i),8),a=String(r)+s[2])}return a},e.prototype.addStyles=function(e,t){var i=this;void 0===t&&(t=!1);var o=["#site","#WB_TextArea_maxCont",".wb-wysiwyg-control",".wb-element-preview",".wb-site-canvas"],r=[s().MODE_TABLET,s().MODE_DESKTOP,s().MODE_TV];n.Service.style.enumerateRules(e,(function(e,a,l){if(i.sheet){for(var c=e.selector.split(","),u=[],d=0,h=o;d<h.length;d++){var p=h[d];u.push(p+" "+c.join(","+p+" "))}var m=u.join(","),g=[],f={};for(var y in e.css)if(!/^-wb-/.test(y)&&e.css.hasOwnProperty(y)){var b=t?e.css[y]:i.applyFontScale(y,e.css[y],l.modes&&l.modes.hasOwnProperty(s().MODE_PHONE)?l.modes[s().MODE_PHONE].fontScale:1,l,e);if(g.push(y+": "+b+";"),!t&&l.modes&&i.canApplyFontScale(y,l,e))for(var v=0,_=r;v<_.length;v++){var C=_[v],w=i.applyFontScale(y,e.css[y],l.modes.hasOwnProperty(C)?l.modes[C].fontScale:1,l,e);w!==b&&(f.hasOwnProperty(C)||(f[C]=[]),f[C].push(y+": "+w+";"))}}var T=i.fixLocalUrls(g.join(" "));i.addRule(m,T);for(var E={},I=function(e){return"#site .wb-viewport-mode-".concat(e," ")+c.join(", #site .wb-viewport-mode-".concat(e," "))+", .wb-site-canvas.wb-viewport-mode-".concat(e," ")+c.join(", .wb-site-canvas.wb-viewport-mode-".concat(e," "))},x=0,S=r;x<S.length;x++)C=S[x],f.hasOwnProperty(C)&&(E[C]=i.fixLocalUrls(f[C].join(" ")),i.addRule(I(C),E[C]));for(var k=null,D=0,O=r;D<O.length;D++)(C=O[D])!=n.Service.modeManager.MODE_PHONE&&C!=n.Service.modeManager.MODE_TABLET&&(C in E?k=E[C]:k&&i.addRule(I(C),k))}}))},e.prototype.addRule=function(e,t,i){this.sheet&&(i&&(t=e+" { "+t+" }",e=i),this.sheet.insertRule?this.sheet.insertRule(e+" { "+t+" }",this.rules.length):this.sheet.addRule(e,t))},e.prototype.clearRules=function(){if(this.sheet)for(var e=this.rules.length-1;e>=0;e--)try{this.sheet.deleteRule(e)}catch(e){}},e.prototype.remove=function(){this.elem.remove()},e.nextUID=0,e}()},"./SiteTree.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SiteTree:function(){return f}});var n=i("./BuilderEvent.ts"),o=i("./ContextMenu.ts"),s=i("./element/OrderingHandle.ts"),r=i("./Element.ts"),a=i("./LayoutElement.ts"),l=i("./Body.ts"),c=i("./util/HistoryUtil.ts"),u=i("./util/EventUtil.ts"),d=i("./lib/jquery-1.11.3.min.js"),h=i.n(d),p=i("./core/BuilderConfig.ts"),m=null,g=function(){function e(e,t){void 0===t&&(t=!1),this.isRoot=t,this.currentProps=null,this.children=[],this.orderingHandle=new s.OrderingHandle(this,wb_builder),this.parent=null,this.props=null,this.selected=!1,this.ctxMenu=null,this.node=e,this.elem=h()('<div class="wb-site-tree-item"/>').data("item",this),this.contentElem=h()('<div class="wb-site-tree-item-content"/>'),this.childrenContainerElem=h()('<div class="wb-site-tree-item-children"/>'),this.elem.append(this.contentElem,this.childrenContainerElem),this.collapseHandleElem=h()('<i class="wb-site-tree-collapse-handle"/>'),this.iconElem=h()("<i/>"),this.nameElem=h()("<span/>"),this.metaElem=h()('<span class="wb-site-tree-item-meta">'),this.contentElem.append(this.collapseHandleElem,this.iconElem,this.nameElem),this.ctxMenu=this.node.getSiteTreeNodeMenu(),this.ctxMenu&&this.ctxMenu.pasiveBind(this.contentElem)}return e.prototype.getBounds=function(){var e=this.contentElem.offset();return{left:e.left,top:e.top,width:this.contentElem.width(),height:this.contentElem.height()}},e.prototype.getParent=function(){return this.parent},e.prototype.setParent=function(e){this.parent=e,this.parent&&this.parent.isRoot?this.elem.addClass("wb-site-tree-lvl1"):this.elem.removeClass("wb-site-tree-lvl1")},e.prototype.canAcceptItem=function(t){return!(t instanceof e&&t.node instanceof a.LayoutElement&&!t.node.getParent())&&!(this.node instanceof l.Body)&&this.node instanceof a.LayoutElement},e.prototype.addChild=function(t,i,n){if(void 0===n&&(n=!1),this.node instanceof a.LayoutElement&&t instanceof e&&t.node instanceof r.Element){var o=i&&i instanceof e&&i.node instanceof r.Element?i.node:void 0;t.node.getParent()&&(0,c.createMoveElementsHistoryRecord)([t.node]);var s=t.node.getParent();s&&s.getChildIndex(t.node),this.node.addChild(t.node,!1,!1,o,n)}},e.prototype.findItemForObject=function(e){if(this.node===e)return this;for(var t=0,i=this.children;t<i.length;t++){var n=i[t].findItemForObject(e);if(n)return n}return null},e.prototype.getChildrenContainerElem=function(){return this.childrenContainerElem},e.prototype.render=function(){this.orderingHandle.setContainer(m);var t=this.props=this.node.getSiteTreeNodeProperties();t.collapsible&&t.isCollapsed?this.elem.addClass("wb-collapsed"):this.elem.removeClass("wb-collapsed"),t.collapsible?t.isCollapsed?(this.collapseHandleElem.removeClass("fa-minus-square-o"),this.collapseHandleElem.addClass("fa fa-plus-square-o")):(this.collapseHandleElem.removeClass("fa-plus-square-o"),this.collapseHandleElem.addClass("fa fa-minus-square-o")):this.collapseHandleElem.removeClass("fa fa-plus-square-o fa-minus-square-o"),this.currentProps&&this.currentProps.icon===t.icon||(t.icon?this.iconElem.attr("class","wb-site-tree-item-icon "+t.icon):this.iconElem.attr("class",""));var i=this.currentProps&&this.currentProps.color?this.currentProps.color:"",n=t.color||"";if(!this.currentProps||this.currentProps.name!==t.name||this.currentProps.meta!==t.meta||this.currentProps.isGrouped!==t.isGrouped||this.currentProps.isHidden!==t.isHidden||this.currentProps.isCommon!==t.isCommon||this.currentProps.isCommonInherited!==t.isCommonInherited||this.currentProps.hasLink!==t.hasLink||this.currentProps.hasBg!==t.hasBg||this.currentProps.hasBgGallery!==t.hasBgGallery||i!==n){var o=!1;this.metaElem.detach(),this.contentElem.css("color",n),this.nameElem.text(t.name?__tr(t.name):""),this.nameElem.attr("title",t.title?t.title:""),t.meta&&(this.metaElem.text(" "+t.meta),o=!0),this.metaElem.children(".fa-link").remove(),t.hasLink&&(this.metaElem.append(' <span class="fa fa-link"></span>'),o=!0),this.metaElem.children(".fa-cubes").remove(),t.isCommon&&(this.metaElem.append(' <span class="fa fa-cubes"></span>'),o=!0),this.metaElem.children(".fa-object-group").remove(),t.isGrouped&&(this.metaElem.append(' <span class="fa fa-object-group"></span>'),o=!0),this.metaElem.children(".fa-eye-slash").remove(),t.isHidden&&(this.metaElem.append(' <span class="fa fa-eye-slash"></span>'),o=!0),this.metaElem.children(".fa-picture-o").remove(),this.metaElem.children(".fa-th-large").remove(),t.hasBg&&(t.hasBgGallery?this.metaElem.append(' <span class="fa fa-th-large"></span>'):this.metaElem.append(' <span class="fa fa-picture-o"></span>'),o=!0),o&&this.nameElem.append(this.metaElem);var s=this.node;p.wbConfig.devDebugMode&&(s.debugInfo&&"object"==typeof s.debugInfo&&s.debugInfo.nodeNameColor&&this.nameElem.css("color",s.debugInfo.nodeNameColor),this.nameElem.append(h()(' <span style="color: #F0F8FF; margin-left: 5px; margin-right: 5px;" class="fa fa-info-circle"/>').on("click",(function(){var e={element:s,initialData:s.debugData,debugInfo:s.debugInfo};console.log(e)}))))}this.currentProps=t,this.updateSelection();for(var r,a=[],l=0,c=this.node.getSiteTreeNodeChildren();l<c.length;l++){var u=c[l];r=null;for(var d=0,g=this.children.length;d<g;d++)if(this.children[d].node===u){r=this.children[d],this.children.splice(d,1);break}r||(r=new e(u)),r.setParent(this),a.push(r),this.childrenContainerElem.append(r.elem),r.render()}for(var f=0,y=this.children;f<y.length;f++)y[f].elem.remove();this.children=a},e.prototype.updateCollapseState=function(){var e=this.node.collapsed;this.props&&(this.props.isCollapsed=e),this.currentProps&&(this.currentProps.isCollapsed=e),e?(this.elem.addClass("wb-collapsed"),this.collapseHandleElem.removeClass("fa-minus-square-o"),this.collapseHandleElem.addClass("fa fa-plus-square-o")):(this.elem.removeClass("wb-collapsed"),this.collapseHandleElem.removeClass("fa-plus-square-o"),this.collapseHandleElem.addClass("fa fa-minus-square-o"))},e.prototype.updateSelection=function(){var e=this.node.isSelected();e?(this.elem.addClass("active"),this.selected!=e&&this.scrollIntoViewIfNeeded()):this.elem.removeClass("active"),this.selected=e},e.prototype.scrollIntoViewIfNeeded=function(){if(m){var e=this.contentElem.get(0),t=e.getBoundingClientRect(),i=m.getParentViewport();t.top<i.top?e.scrollIntoView():t.bottom>i.bottom&&e.scrollIntoView(!1)}},e}(),f=function(){function e(e,t){this.visible=!0,m=this,this.api=e,this.root=new g(t,!0),this.elem=h()('<div class="wb-site-tree"/>');var i=this.root.getChildrenContainerElem();this.elem.append(i)}return e.prototype.collectItems=function(e,t,i,n){void 0===n&&(n=!1);for(var o=0,s=e.children;o<s.length;o++){var r=s[o];r!==i&&(this.collectItems(r,t,i),t.push(r))}return t},e.prototype.getAllOrderableItems=function(e){return this.collectItems(this.root,[],e,!0)},e.prototype.getParentViewport=function(){return this.elem.parent().get(0).getBoundingClientRect()},e.prototype.getItemsViewport=function(){return this.elem.get(0).getBoundingClientRect()},e.prototype.scrollItemsViewport=function(e){var t=this.elem.parent().get(0),i=t.scrollTop;return t.scrollTop+=e,i!=t.scrollTop},e.prototype.init=function(e){var t=this;e.add("site-tree",this.elem,!1,__("Page structure"),!0,30),this.render(),n.GlobalEvents.on("site.structure.changed",(function(){return t.render()})),n.GlobalEvents.on("help.playershow",(function(){return t.render()})),n.GlobalEvents.on("help.playerhide",(function(){return t.render()})),n.GlobalEvents.on("site.structure.collapse site.structure.expand",(function(e){var i;return null===(i=t.root.findItemForObject(e.item))||void 0===i?void 0:i.updateCollapseState()}));var i=function(e){return h()(e.target).closest(".wb-site-tree-item").data("item")},s=!1;this.elem.on("longhover",".wb-site-tree-item",(function(e){var n=i(e);n&&"collapsed"in n.node&&(n.node.collapsed=!1),t.scrollItemsViewport(0),e.stopImmediatePropagation()})).on("mousedown touchstart",".wb-site-tree-item-content",(function(e){var t=i(e);s="touchstart"==e.type,t.orderingHandle.triggerDown(e)})).on("touchend",".wb-site-tree-item-content",(function(e){var t=i(e);t.orderingHandle.moveStarted||(0,u.triggerEvent)(t.contentElem,"click",e)})).on("click",".wb-site-tree-item-content",(function(e){var n,r=i(e);if(h()(e.target).closest(".wb-site-tree-collapse-handle").length&&(null===(n=r.props)||void 0===n?void 0:n.collapsible))r.node.collapsed=!r.node.collapsed;else{var a=r.node.isSelected(),l=!0;e.ctrlKey?l=!a:t.api.unselectAll(),(0,o.hideAllContextMenus)(),r.node.setSelected(l),r.node.scrollIntoView(),s&&a&&r.ctxMenu&&r.ctxMenu.show(e)}e.stopPropagation()}));var r=0,a=null;n.GlobalEvents.on("selection.changed",(function(e){var i=t.root.findItemForObject(e.item);if(i&&i.updateSelection(),"select"===e.op&&e.item){for(var n=e.item;n&&"function"==typeof n.getParent;)(n=n.getParent())&&"collapsed"in n&&(n.collapsed=!1);a=e.item,r&&clearTimeout(r),r=setTimeout((function(){r=0;var e=t.root.findItemForObject(a);e&&e.scrollIntoViewIfNeeded(),a=null}),10)}}))},e.prototype.render=function(){this.root.render()},e.prototype.setVisible=function(e){this.visible!=e&&(this.visible=e,e?this.elem.show():this.elem.hide())},e}()},"./SizeSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SizeSelector:function(){return c}});var n,o=i("./UIComponent.ts"),s=i("./Service.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i,n,o,s,r,l){void 0===t&&(t=!0),void 0===i&&(i=1),void 0===n&&(n=9999),void 0===o&&(o=1),void 0===s&&(s=!1),void 0===r&&(r=!1),void 0===l&&(l="px");var c=e.call(this)||this;return c.unitsDropdown=null,c.unitsVisible=!1,c.minValue=1,c.maxValue=9999,c.noRepeat=!1,c.precision=0,c.clearTrailingZeroes=!0,c._enabled=!0,c.step=1,c.buttonHoldData=null,c.onConfirmFunc=null,c.onCancelFunc=null,c.units=[],c.currentUnit=null,c.unitsWidth=20,c.isFixed=!1,c.fixedWidth=0,c.unitsDropdownAlignment="left",c.isSmall=!1,c.isSpinnerVisible=!1,c.isActive=!1,o||(o=1),null!=i&&(c.minValue=i),null!=n&&(c.maxValue=n),c.noRepeat=void 0===s?void 0===n||c.noRepeat:s,c.step=o,c.input=a()('<input type="text" class="form-control form-control-with-suffix" value="1" />'),c.upDownButtons=a()('<div class="input-group-btn buttons"><button class="btn btn-default btn-arrow arrow-up" type="button"><span class="caret"></span></button><button class="btn btn-default btn-arrow arrow-down" type="button"><span class="caret"></span></button></div>'),c.unitsElem=a()('<span class="units input-group-addon"></span>'),c.groupElem=a()('<div class="input-group">').append(c.input,c.upDownButtons),c._elem.addClass("wb-size-selector").append(c.groupElem),c.setFixedWidth(!r),c.setUnits(l),c.setUnitsVisible(!t),c.input.on("change",(function(e){var t=c.input[0],i=parseFloat(t.value.replace(",","."));isNaN(i)&&(i=0),i=Math.max(i,c.getCurrentUnitMinValue()),i=Math.min(i,c.getCurrentUnitMaxValue()),t.value=c.numberToText(i),c.onValueChanged()})),c.input.on("keydown",(function(e){var t=e.keyCode||e.which;if(c.buttonHoldData&&(38===t||40===t))return e.stopImmediatePropagation(),void e.preventDefault();38===t?c.onArrowUp(!0,e):40===t?c.onArrowDown(!0,e):13===t&&"function"==typeof c.onConfirmFunc?c.onConfirmFunc.call(c,e):27===t&&"function"==typeof c.onCancelFunc&&c.onCancelFunc.call(c,e)})),c.input.on("keyup",(function(e){c.onValueChanged()})),c.input.on("paste cut",(function(e){setTimeout((function(){return c.input.trigger("change")}),0)})),a()("button",c._elem).first().bind("mousedown touchstart",c.onArrowUp.bind(c,!1)),a()("button",c._elem).last().bind("mousedown touchstart",c.onArrowDown.bind(c,!1)),c}return l(t,e),t.toCSS=function(e){var t="";if("object"==typeof e&&e.length)for(var i=0;i<Math.min(e.length,4);i++)t+=(t?" ":"")+e[i]+"px";else t=e+"px";return t},t.prototype.buildInit=function(e,t){var i,n;"unitConverter"in e&&e.unitConverter&&(this.unitConverter=e.unitConverter),"unitsWidth"in e&&e.unitsWidth&&(this.unitsWidth=e.unitsWidth),"unitsDropdownAlignment"in e&&e.unitsDropdownAlignment&&this.setUnitsDropdownAlignment(e.unitsDropdownAlignment),"units"in e&&this.setUnitsVisible(!!e.units),"min"in e&&(this.minValue=parseFloat(""+e.min)),"max"in e&&e.max&&(this.maxValue=e.max),"step"in e&&e.step&&(this.step=e.step),"repeat"in e&&(this.noRepeat=!e.repeat),"noFixedWidth"in e&&this.setFixedWidth(!e.noFixedWidth),"fixedWidth"in e&&e.fixedWidth&&this.setFixedWidth(e.fixedWidth),"small"in e&&this.setSmall(!!e.small),"hideSpinner"in e&&this.setSpinnerVisible(!e.hideSpinner,!!e.units),e.value&&this.setValue(e.value),e.units&&this.setUnits(e.units),e.precision&&this.setPrecision(e.precision),e.clearTrailingZeroes&&this.setClearTrailingZeroes(e.clearTrailingZeroes),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.input.on("change",(function(){n.call(i,t)})))},t.prototype.setActive=function(e){this.isActive!=e&&(this.isActive=e,e?this._elem.addClass("wb-size-selector-active"):this._elem.removeClass("wb-size-selector-active"))},t.prototype.setSmall=function(e){this.isSmall=e,e?this.groupElem.addClass("input-group-sm"):this.groupElem.removeClass("input-group-sm"),this.unitsDropdown&&this.unitsDropdown.setSmall(e)},t.prototype.setSpinnerVisible=function(e,t){return void 0===t&&(t=!0),this.isSpinnerVisible=e,this.upDownButtons.css({display:e?"":"none"}),e?this._elem.removeClass("wb-size-selector-ns"):(this._elem.addClass("wb-size-selector-ns"),t||this.input.removeClass("form-control-with-suffix")),this},t.prototype.setFixedWidth=function(e){return"number"==typeof e?(this.fixedWidth=e,this.isFixed=!0,this.groupElem.removeClass("fixed-width")):(this.isFixed=e,e?this.groupElem.addClass("fixed-width"):this.groupElem.removeClass("fixed-width")),this.groupElem.css({width:this.fixedWidth>0&&this.isFixed?this.fixedWidth+"px":""}),this},t.prototype.setUnitsVisible=function(e){return this.unitsVisible==e||(this.unitsVisible=e,e&&this.currentUnit?this.upDownButtons.before(this.unitsElem):this.unitsElem.detach()),this},t.prototype.setUnitsDropdownAlignment=function(e){this.unitsDropdownAlignment=e,this.unitsDropdown&&this.unitsDropdown.setAlignment(e)},t.prototype.setNoRepeat=function(e){return this.noRepeat=e,this},t.prototype.onArrowUp=function(e,t){return!!this._enabled&&(t.stopImmediatePropagation(),t.preventDefault(),this.onButtonPress(e,1),!0)},t.prototype.onArrowDown=function(e,t){return!!this._enabled&&(t.stopImmediatePropagation(),t.preventDefault(),this.onButtonPress(e,-1),!0)},t.prototype.getValueAsObject=function(){var e=1*this.input.val();return{value:e=Math.min(Math.max(isNaN(e)?0:e,this.getCurrentUnitMinValue()),this.getCurrentUnitMaxValue()),unit:this.currentUnit}},t.prototype.applyUnitToValue=function(e,t){return t?"fixedValue"in t?t.fixedValue:"suffix"in t&&""!==t.suffix?e+t.suffix:e:e},t.prototype.modifyByStep=function(e){var t=1*this.input.val()+this.getCurrentUnitStep()*e,i=this.getCurrentUnitMinValue(),n=this.getCurrentUnitMaxValue();isNaN(t)?t=Math.min(Math.max(0,i),n):t<i?t=!this.noRepeat&&e?n:i:t>n&&(t=!this.noRepeat&&e?i:n),this.input.val(this.numberToText(t)),this.input.trigger("change")},t.prototype.onButtonPress=function(e,t){this.buttonHoldData&&this.onButtonRelease(),this.buttonHoldData={nextTime:500,direction:t,eventHandler:this.onButtonRelease.bind(this),timeoutHandler:this.onButtonHold.bind(this)},a()(document.body).on(e?"keyup":"mouseup touchend touchcancel",this.buttonHoldData.eventHandler),this.buttonHoldData.timer=setTimeout(this.buttonHoldData.timeoutHandler,this.buttonHoldData.nextTime),this.modifyByStep(t)},t.prototype.onButtonHold=function(){this.buttonHoldData&&(this.modifyByStep(this.buttonHoldData.direction),this.buttonHoldData.nextTime=Math.max(10,.66*this.buttonHoldData.nextTime),this.buttonHoldData.timer=setTimeout(this.buttonHoldData.timeoutHandler,this.buttonHoldData.nextTime))},t.prototype.onButtonRelease=function(e){if(this.buttonHoldData){if(e&&"keyup"===e.type){var t=e.keyCode||e.which;if(38!==t&&40!==t)return}e&&(e.stopImmediatePropagation(),e.preventDefault()),a()(document.body).off("keyup mouseup touchend touchcancel",this.buttonHoldData.eventHandler),clearTimeout(this.buttonHoldData.timer),this.buttonHoldData=null}},t.prototype.setMinValue=function(e){return e>=this.maxValue||(this.minValue=e),this},t.prototype.setMaxValue=function(e){return e<=this.minValue||(this.maxValue=e),this},t.prototype.setEnabled=function(e){this._enabled=!!e,this.unitsDropdown&&this.unitsDropdown.setEnabled(e),this._enabled?(this.input.removeClass("disabled"),this.input.removeAttr("disabled"),a()("button",this._elem).removeClass("disabled"),this.unitsElem.removeClass("disabled")):(this.input.addClass("disabled"),this.input.attr({disabled:"disabled"}),a()("button",this._elem).addClass("disabled"),this.unitsElem.addClass("disabled"))},t.prototype.getEnabled=function(){return this._enabled},t.prototype.setCss=function(e){return this._elem.css(e),this},t.prototype.setUnits=function(e){var t=this.getValueAsObject();return this.units=null===e?[]:"string"==typeof e?[{suffix:"",label:e}]:a().extend([],e),this.units.length?(this.currentUnit&&("suffix"in this.currentUnit?this.currentUnit=this.findUnitBySuffix(this.currentUnit.suffix):"fixedValue"in this.currentUnit?this.currentUnit=this.findUnitByFixedValue(this.currentUnit.fixedValue):this.currentUnit=null),this.currentUnit||(this.currentUnit=this.findUnitBySuffix(""))):this.currentUnit=null,this.updateUnitsBox(),"function"!=typeof this.unitConverter||this.currentUnit&&"fixedValue"in this.currentUnit||this.compareUnits(t.unit,this.currentUnit)||(t.value=this.unitConverter.call(this,t.value,t.unit,this.currentUnit)),this.setValue(this.applyUnitToValue(t.value,this.currentUnit)),this},t.prototype.compareUnits=function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if("fixedValue"in e){if(!("fixedValue"in t))return!1;if(e.fixedValue!==t.fixedValue)return!1}else{if("fixedValue"in t)return!1;if(e.suffix!==t.suffix)return!1}return!0},t.prototype.getPrecision=function(){return this.precision},t.prototype.setPrecision=function(e){this.precision=e,this.setValue(this.getValue())},t.prototype.getClearTrailingZeroes=function(){return this.clearTrailingZeroes},t.prototype.setClearTrailingZeroes=function(e){this.clearTrailingZeroes=e,this.setValue(this.getValue())},t.prototype.setUnitsWidth=function(e){return this.unitsWidth=e,this.updateUnitsElemWidth(),this.unitsDropdown&&this.unitsDropdown.getElem().css("width",this.unitsWidth),this},t.prototype.getValue=function(){var e=parseFloat(this.input.val().replace(",",".")),t=isNaN(e)?this.getCurrentUnitMinValue()||0:e;return this.applyUnitToValue(t,this.currentUnit)},t.prototype.setValue=function(e){void 0===e&&(e=0);var t=0,i="";if(null===e?e=0:"object"==typeof e&&"length"in e&&(e=e.length?e[0]:0),"number"==typeof e)t=e;else if(this.findUnitByFixedValue(e,!1))this.selectUnitByFixedValue(e),i=null;else{var n=e.match(/^(-?[0-9]+(?:\.[0-9]+)?)(.*)$/i);n&&(e=n[1],i=n[2]),t=parseFloat(e)}null!==i&&this.selectUnitBySuffix(i),isNaN(t)&&(t=this.getCurrentUnitMinValue()),this.input.val(this.numberToText(t))},t.prototype.selectUnitBySuffix=function(e){this.units.length<=1||(this.currentUnit=this.findUnitBySuffix(e),this.updateUnitsBox(!1))},t.prototype.selectUnitByFixedValue=function(e){this.units.length<=1||(this.currentUnit=this.findUnitByFixedValue(e),this.updateUnitsBox(!1))},t.prototype.updateUnitsElemWidth=function(){this.unitsElem&&this.unitsElem.css("width",this.currentUnit&&"fixedValue"in this.currentUnit?"":this.unitsWidth)},t.prototype.updateUnitsBox=function(e){var t=this;if(void 0===e&&(e=!0),this.unitsElem&&this.unitsElem.length){if(this.units.length<=1){this.unitsElem.removeClass("has-dropdown");var i="";this.currentUnit&&(this.currentUnit.label?i=this.currentUnit.label:"suffix"in this.currentUnit?i=this.currentUnit.suffix:"fixedValue"in this.currentUnit&&(i=this.currentUnit.fixedValue)),""===i?this.unitsElem.detach():(this.unitsDropdown&&this.unitsDropdown.getElem().detach(),this.unitsElem.text(i),this.unitsVisible&&this.upDownButtons.before(this.unitsElem))}else{if(this.currentUnit||(this.currentUnit=this.units[0]),this.unitsElem.addClass("has-dropdown"),this.unitsDropdown&&this.unitsElem[0].contains(this.unitsDropdown.getElem()[0])||this.unitsElem.html(""),!this.unitsDropdown){var n={};s.Service.UIBuilder.buildLayout({type:"DropdownBox",id:"unitsDropdown",css:{width:this.unitsWidth},enabled:this._enabled,alignment:this.unitsDropdownAlignment,small:this.isSmall,change:function(){if(t.unitsDropdown){var e=t.getValueAsObject(),i=t.unitsDropdown.getSelectedItem(),n=i&&i.getOriginal();t.currentUnit=n&&n.unit,t.currentUnit?t.updateMainInputs():(t.currentUnit=t.findUnitBySuffix(""),t.updateUnitsBox(!1)),t.updateUnitsElemWidth(),"function"!=typeof t.unitConverter||t.currentUnit&&"fixedValue"in t.currentUnit||t.compareUnits(e.unit,t.currentUnit)||(e.value=t.unitConverter.call(t,e.value,e.unit,t.currentUnit)),t.setValue(t.applyUnitToValue(e.value,t.currentUnit)),t.modifyByStep(0)}}},this.unitsElem,n),this.unitsDropdown=n.unitsDropdown,e=!0}if(this.unitsDropdown){if(this.unitsElem[0].contains(this.unitsDropdown.getElem()[0])||(this.unitsElem.append(this.unitsDropdown.getElem()),e=!0),e){for(var o=[],r=0,a=this.units;r<a.length;r++){var l=a[r];"suffix"in l?o.push({id:"s-"+l.suffix,name:l.label||l.suffix,unit:l}):"fixedValue"in l&&o.push({id:"f-"+l.fixedValue,name:l.label||l.fixedValue,unit:l})}this.unitsDropdown.reload(o)}"suffix"in this.currentUnit?this.unitsDropdown.setValue("s-"+this.currentUnit.suffix):"fixedValue"in this.currentUnit&&this.unitsDropdown.setValue("f-"+this.currentUnit.fixedValue)}}this.updateUnitsElemWidth(),this.updateMainInputs()}},t.prototype.updateMainInputs=function(){this.currentUnit&&"fixedValue"in this.currentUnit?this.groupElem[0].contains(this.input[0])&&(this.input.detach(),this.upDownButtons.detach(),this.unitsDropdown&&this.unitsDropdown.getElem().addClass("wb-max-width")):this.groupElem[0].contains(this.input[0])||(this.groupElem.prepend(this.input,this.upDownButtons),this.unitsDropdown&&this.unitsDropdown.getElem().removeClass("wb-max-width"))},t.prototype.findUnitBySuffix=function(e,t){void 0===t&&(t=!0);for(var i=null,n=0,o=this.units;n<o.length;n++){var s=o[n];if("suffix"in s){if(s.suffix===e)return s;""===s.suffix&&(i=s)}}return t?i||(this.units.length?this.units[0]:null):null},t.prototype.findUnitByFixedValue=function(e,t){void 0===t&&(t=!0);for(var i=null,n=0,o=this.units;n<o.length;n++){var s=o[n];if("fixedValue"in s){if(s.fixedValue===e)return s}else"suffix"in s&&""===s.suffix&&(i=s)}return t?i||(this.units.length?this.units[0]:null):null},t.prototype.getCurrentUnitMinValue=function(){return this.currentUnit&&"min"in this.currentUnit&&"number"==typeof this.currentUnit.min?this.currentUnit.min:this.minValue},t.prototype.getCurrentUnitMaxValue=function(){return this.currentUnit&&"max"in this.currentUnit&&"number"==typeof this.currentUnit.max?this.currentUnit.max:this.maxValue},t.prototype.getCurrentUnitPrecision=function(){return this.currentUnit&&"precision"in this.currentUnit&&"number"==typeof this.currentUnit.precision?this.currentUnit.precision:this.precision},t.prototype.getCurrentUnitStep=function(){return this.currentUnit&&"step"in this.currentUnit&&"number"==typeof this.currentUnit.step?this.currentUnit.step:this.step},t.prototype.roundValue=function(e){var t=Math.pow(10,this.getCurrentUnitPrecision());return Math.round(e*t)/t},t.prototype.numberToText=function(e){var t=this.roundValue(e).toFixed(this.getCurrentUnitPrecision());return this.clearTrailingZeroes&&(t=t.replace(/\.0+$/,"").replace(/(\.[0-9]*?)0+$/,"$1")),t},t.prototype.focus=function(e){void 0===e&&(e=!1),this.input.focus(),e&&this.input.select()},t.prototype.on=function(t,i){return"confirm"===t?this.onConfirmFunc=i:"cancel"===t?this.onCancelFunc=i:e.prototype.on.call(this,t,i),this},t.prototype.bind=function(e,t,i){void 0===i&&(i=!1),this.input.bind(e,t,i)},t.prototype.unbind=function(e){this.input.unbind(e)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"unitConverter"in t&&(this.unitConverter=t.unitConverter),"unitsWidth"in t&&this.setUnitsWidth(t.unitsWidth),"unitsDropdownAlignment"in t&&t.unitsDropdownAlignment&&this.setUnitsDropdownAlignment(t.unitsDropdownAlignment),"min"in t&&this.setMinValue(t.min),"max"in t&&this.setMaxValue(t.max),"step"in t&&(this.step=t.step),this.noRepeat=!("repeat"in t)||!t.repeat,"noFixedWidth"in t&&this.setFixedWidth(!t.noFixedWidth),"fixedWidth"in t&&t.fixedWidth&&this.setFixedWidth(t.fixedWidth),"small"in t&&this.setSmall(!!t.small),"hideSpinner"in t&&this.setSpinnerVisible(!t.hideSpinner,!!t.units),"units"in t&&(this.setUnitsVisible(!!t.units),this.setUnits(t.units)),"precision"in t&&this.setPrecision(t.precision),"clearTrailingZeroes"in t&&this.setClearTrailingZeroes(t.clearTrailingZeroes),"css"in t&&this.setCss(t.css)},t}(o.UIComponent)},"./SliderControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SliderControl:function(){return c}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./ui/NumControl.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=100),void 0===n&&(n=1),void 0===o&&(o="%");var r=e.call(this,"div")||this;return r._min=t,r._max=i,r._step=n,r._unit=o,r.options=null,r.uiFields=null,r.sliding=!1,r._elem.addClass("wb-slider-control"),r._slider=s()("<div>"),r._handle=s()('<div class="ui-slider-handle">'),r._input=new a.NumControl(r._unit,r._max,(function(e){e||0===e||(e=0),e=Math.max(r._min,Math.min(r._max,e)),r._input.setValue(e),r._slider.slider("value",e),r.onValueChanged()})).setStyle(a.NumControlStyle.WidePostfix),r._slider.append(r._handle),r._elem.append(r._slider),r._elem.append(r._input.getElem()),r._slider.slider({start:function(){r.sliding=!0},stop:function(){r.sliding=!1},create:function(){r._input.setValue(r._slider.slider("value"))},slide:function(e,t){r._input.setValue(t.value),setTimeout((function(){r.onValueChanged()}),0)},change:function(){r.options&&r.uiFields&&r.onChange&&"function"==typeof r.onChange&&r.onChange.call(r,r.options,r.uiFields)},range:"min",min:r._min,max:r._max,step:r._step}),r}return l(t,e),t.prototype.buildInit=function(e,t){this.options=e,this.uiFields=t,this._min=e.min||0===e.min?e.min:0,this._max=e.max||0===e.max?e.max:100,this._step=e.step||0===e.step?e.step:1,this._unit=e.unit?e.unit:"%",this.onChange=e.change,"width"in e&&this._slider.css("width",e.width?e.width:120),this.setMin(this._min),this.setMax(this._max),this.setStep(this._step),this.setUnit(this._unit)},t.prototype.setOnChange=function(e){var t=this;return this.options={},this.uiFields={},this.onChange=function(){return e(t.getValue())},this},t.prototype.getValue=function(){return this._slider.slider("value")},t.prototype.setValue=function(e){this._slider.slider("value",e),this._input.setValue(e)},t.prototype.setMin=function(e){this._min=e,this._slider.slider("option","min",this._min)},t.prototype.setMax=function(e){this._max=e,this._slider.slider("option","max",this._max)},t.prototype.setStep=function(e){this._min=e,this._slider.slider("option","step",this._step)},t.prototype.setUnit=function(e){this._unit=e,this._input.setUnit(this._unit,this._max)},t.prototype.setEnabled=function(e){this._enabled=!!e,this._enabled?(this._elem.removeClass("disabled"),this._slider.slider("enable"),this._input.removeClass("disabled")):(this._elem.addClass("disabled"),this._slider.slider("disable"),this._input.addClass("disabled")),this._input.setEnabled(this._enabled)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"min"in t&&this.setMin(t.min),"max"in t&&this.setMax(t.max),"step"in t&&this.setStep(t.step),"unit"in t&&this.setUnit(t.unit)},t.prototype.setCombinedBindingsValue=function(t){this.sliding||e.prototype.setCombinedBindingsValue.call(this,t)},t.prototype.destroy=function(){this._slider&&this._slider.data("slider")&&this._slider.slider("destroy"),e.prototype.destroy.call(this)},t}(r.UIComponent)},"./SpacingSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SpacingSelector:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;return t.editElem=null,t.editMode=!1,t.editMinValue=0,t.editValue=0,t.editPos="",t.useMargin=!0,t.usePadding=!0,t.allowNegativeMargin=!1,t.root=t._elem.find(".wb-spacing-control-root"),t.margin=t.root.children(".padding"),t.padding=t.root.children(".padding").children(".itm"),t.marginLabel=t.root.children(".lbl"),t.paddingLabel=t.root.find(".padding > .lbl"),t.marginValues=t.margin.children(".l,.r,.t,.b"),t.paddingValues=t.padding.children(".l,.r,.t,.b"),t.marginButtons=t.margin.children("a.la,a.ra,a.ta,a.ba"),t.paddingButtons=t.padding.children("a.la,a.ra,a.ta,a.ba"),t.editInput=r()("<input>").attr({type:"text"}).addClass("wb-spacing-control-edit").on("blur",(function(){return t.exitEditMode(!0)})).on("keyup",(function(e){13==e.keyCode||10==e.keyCode?t.exitEditMode(!0):27==e.keyCode?t.exitEditMode(!1):38==e.keyCode?t.editInput.val(t.parseInt(t.editInput.val())+1):40==e.keyCode&&t.editInput.val(Math.max(t.parseInt(t.editInput.val())-1,t.editMinValue))})),t.margin.children("a.la").bind("click",(function(){return t.enterEditMode("margin","l"),!1})),t.margin.children("a.ra").bind("click",(function(){return t.enterEditMode("margin","r"),!1})),t.margin.children("a.ta").bind("click",(function(){return t.enterEditMode("margin","t"),!1})),t.margin.children("a.ba").bind("click",(function(){return t.enterEditMode("margin","b"),!1})),t.padding.children("a.la").bind("click",(function(){return t.enterEditMode("padding","l"),!1})),t.padding.children("a.ra").bind("click",(function(){return t.enterEditMode("padding","r"),!1})),t.padding.children("a.ta").bind("click",(function(){return t.enterEditMode("padding","t"),!1})),t.padding.children("a.ba").bind("click",(function(){return t.enterEditMode("padding","b"),!1})),t}return a(t,e),t.prototype.buildInit=function(e,t){e.value&&this.setValue(e.value),this.setUseMargin(!e.noMargin),this.setUsePadding(!e.noPadding),this.setAllowNegativeMargin(!!e.allowNegativeMargin)},t.prototype.setAllowNegativeMargin=function(e){this.allowNegativeMargin=e},t.prototype._createElem=function(){return r()('<div class="wb-spacing-control"><div class="wb-spacing-control-root"><span class="lbl">'+__("margin")+'</span><div class="padding"><span class="lbl">'+__("padding")+'</span><span class="l">0</span><span class="r">0</span><span class="t">0</span><span class="b">0</span><a href="javascript:void(0)" class="la"></a><a href="javascript:void(0)" class="ra"></a><a href="javascript:void(0)" class="ta"></a><a href="javascript:void(0)" class="ba"></a><div class="itm"><span class="l">0</span><span class="r">0</span><span class="t">0</span><span class="b">0</span><a href="javascript:void(0)" class="la"></a><a href="javascript:void(0)" class="ra"></a><a href="javascript:void(0)" class="ta"></a><a href="javascript:void(0)" class="ba"></a></div></div></div></div>')},t.prototype.setUseMargin=function(e){this.useMargin!=e&&(this.useMargin=e,e?(this.marginLabel.show(),this.marginValues.show(),this.marginButtons.show()):(this.marginLabel.hide(),this.marginValues.hide(),this.marginButtons.hide()))},t.prototype.setUsePadding=function(e){this.usePadding!=e&&(this.usePadding=e,e?(this.paddingLabel.show(),this.paddingValues.show(),this.paddingButtons.show()):(this.paddingLabel.hide(),this.paddingValues.hide(),this.paddingButtons.hide()))},t.prototype.enterEditMode=function(e,t){var i=this;if(this.exitEditMode(!0),this.editPos=t,"padding"===e)this.editElem=this.padding.children("."+t);else{if("margin"!==e)return;this.editElem=this.margin.children("."+t)}this.editMinValue="margin"===e&&this.allowNegativeMargin?-9999:0,this.editValue=this.parseInt(this.editElem.html()),this.editElem.css({display:"none"}),this.editInput.val(this.editValue),this.editInput.addClass(this.editPos+"a"),this.editElem.parent().append(this.editInput),setTimeout((function(){i.editInput.focus(),i.editInput.select()}),40),this.editInput.focus(),this.editInput.select(),this.editMode=!0},t.prototype.exitEditMode=function(e){void 0===e&&(e=!1),this.editMode&&(this.editMode=!1,this.editInput.detach(),this.editPos&&this.editInput.removeClass(this.editPos+"a"),e&&(this.editValue=Math.max(this.parseInt(this.editInput.val()),this.editMinValue)),this.editElem&&(this.editElem.text(this.editValue),this.editElem.css({display:""})),e&&this.onValueChanged())},t.prototype.parseInt=function(e){var t=parseInt(""+e,10);return isNaN(t)?0:t},t.createValue=function(e){var t={marginTop:e&&e.marginTop?e.marginTop:0,marginRight:e&&e.marginRight?e.marginRight:0,marginBottom:e&&e.marginBottom?e.marginBottom:0,marginLeft:e&&e.marginLeft?e.marginLeft:0,paddingTop:e&&e.paddingTop?e.paddingTop:0,paddingRight:e&&e.paddingRight?e.paddingRight:0,paddingBottom:e&&e.paddingBottom?e.paddingBottom:0,paddingLeft:e&&e.paddingLeft?e.paddingLeft:0};return t.css={margin:t.marginTop+"px "+t.marginRight+"px "+t.marginBottom+"px "+t.marginLeft+"px",padding:t.paddingTop+"px "+t.paddingRight+"px "+t.paddingBottom+"px "+t.paddingLeft+"px"},t},t.prototype.getValue=function(){return t.createValue({marginTop:this.parseInt(this.margin.children(".t").html()),marginRight:this.parseInt(this.margin.children(".r").html()),marginBottom:this.parseInt(this.margin.children(".b").html()),marginLeft:this.parseInt(this.margin.children(".l").html()),paddingTop:this.parseInt(this.padding.children(".t").html()),paddingRight:this.parseInt(this.padding.children(".r").html()),paddingBottom:this.parseInt(this.padding.children(".b").html()),paddingLeft:this.parseInt(this.padding.children(".l").html())})},t.prototype.setValue=function(e){var t=e||{};this.margin.children(".l").html(""+this.parseInt("marginLeft"in t?t.marginLeft:0)),this.margin.children(".r").html(""+this.parseInt("marginRight"in t?t.marginRight:0)),this.margin.children(".t").html(""+this.parseInt("marginTop"in t?t.marginTop:0)),this.margin.children(".b").html(""+this.parseInt("marginBottom"in t?t.marginBottom:0)),this.padding.children(".l").html(""+this.parseInt("paddingLeft"in t?t.paddingLeft:0)),this.padding.children(".r").html(""+this.parseInt("paddingRight"in t?t.paddingRight:0)),this.padding.children(".t").html(""+this.parseInt("paddingTop"in t?t.paddingTop:0)),this.padding.children(".b").html(""+this.parseInt("paddingBottom"in t?t.paddingBottom:0))},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"useMargin"in t&&this.setUseMargin(!!t.useMargin),"usePadding"in t&&this.setUsePadding(!!t.usePadding),"allowNegativeMargin"in t&&this.setAllowNegativeMargin(!!t.allowNegativeMargin)},t}(o.UIComponent)},"./TaskProgressDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TaskProgressDialog:function(){return g}});var n,o,s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=i("./WB_Dialog.class.js"),l=i.n(a),c=i("./Service.ts"),u=i("./ProgressBar.ts"),d=i("./VerticalLayout.ts"),h=i("./FlowLayout.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e.Pending="pending",e.Active="active",e.Done="done"}(o||(o={}));var m=function(){},g=function(e){function t(t){var i=e.call(this,t,!0)||this;i.monitorOptions=null,i.monitorTimer=null,i.monitorXHR=null,i.monitorResult=null,i.tasks={},i.retryTimer=null,i.queuedForCancel=!1,i.isActivatedManually=!1;var n={type:d.VerticalLayout,children:[{type:"CustomContainer",id:"preloader",styleClass:"fa fa-spinner fa-spin"},{type:d.VerticalLayout,id:"container",children:[]},{type:"CustomContainer",id:"errorMessage",visible:!1,styleClass:"alert alert-danger",tag:"div",content:""},{type:"CustomContainer",id:"retryCountdown",visible:!1,styleClass:"text-center",tag:"div",content:""}]},o={};i.content.empty(),c.Service.UIBuilder.buildLayout(n,i.content,o),i.preloader=o.preloader,i.container=o.container,i.errorMessage=o.errorMessage,i.retryCountdown=o.retryCountdown;var s=i;return i.addButton(__("Close"),(function(){r()(this).is(".disabled")||s.cancel()})),i}return p(t,e),t.prototype.cancel=function(){this.monitorXHR?(this.queuedForCancel=!0,this.xButton.addClass("hidden"),this.buttons.find("button").addClass("disabled")):this.onCancel()},t.prototype.reset=function(){this.queuedForCancel=!1,this.preloader.setVisible(!0),this.container.removeAllChildren(),this.tasks={},this.monitorResult=null,this.errorMessage.getElem().text(""),this.errorMessage.setVisible(!1),this.retryCountdown.setVisible(!1),null!==this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null},t.prototype.monitor=function(e,t){void 0===t&&(t=!1),this.reset(),this.monitorOptions=e,this.queuedForCancel=!1,e.onCancel?this.buttons.find("button").text(__("Cancel")):(this.xButton.addClass("hidden"),this.buttons.find("button").addClass("disabled")),this.doMonitorLoop(t)},t.prototype.doMonitorLoop=function(e){void 0===e&&(e=!1),this.monitorOptions&&(this.monitorTimer=null,this.monitorXHR=r().ajax({url:this.monitorOptions.url+(e?(this.monitorOptions.url.indexOf("?")>=0?"&":"?")+"requestStart=1":""),data:this.monitorOptions.data?this.monitorOptions.data:{},type:"post",dataType:"json",async:!0,success:function(e){this.monitorXHR=null,this.preloader.setVisible(!1),this.onSuccess(e)}.bind(this),error:function(e,t,i){this.monitorXHR=null,this.preloader.setVisible(!1),"abort"!==t&&this.onError(i,!0)}.bind(this)}))},t.prototype.onSuccess=function(e){if(this.monitorOptions)if("boolean"==typeof e.complete)if(e.error)this.onError(e.error,!1);else{if(e.steps)for(var t in e.steps)this.updateStep(t,e.steps[t]);e.complete?this.onComplete():this.queuedForCancel?this.onCancel():this.monitorTimer=setTimeout(this.doMonitorLoop.bind(this),5e3)}else this.onError("Bad response received",!0)},t.prototype.onCancel=function(){if(!this.monitorOptions)return this.reset(),void this.setVisible(!1);this.monitorResult=!1;var e=this.monitorOptions.onCancel;this.stopMonitoring(),this.reset(),this.setVisible(!1),"function"==typeof e?e():this.isActivatedManually||this.monitorResult||wb_builder.initPage()},t.prototype.onComplete=function(){this.monitorOptions&&(this.monitorResult=!0,"function"==typeof this.monitorOptions.onComplete&&this.monitorOptions.onComplete(),this.stopMonitoring())},t.prototype.onError=function(e,t){this.monitorOptions&&(t?this.queuedForCancel?this.onCancel():this.monitorTimer=setTimeout(this.doMonitorLoop.bind(this),3e4):(this.monitorResult=!1,"function"==typeof this.monitorOptions.onError?this.monitorOptions.onError(e):this.setError(e),this.stopMonitoring()))},t.prototype.isMonitoring=function(){return null!==this.monitorOptions},t.prototype.stopMonitoring=function(){this.queuedForCancel=!1,this.monitorTimer&&(clearTimeout(this.monitorTimer),this.monitorTimer=null),this.monitorXHR&&(this.monitorXHR.abort(),this.monitorXHR=null),this.monitorOptions=null,this.xButton.removeClass("hidden"),this.buttons.find("button").removeClass("disabled").text(__("Close"))},t.prototype.updateStep=function(e,t){var i;this.tasks.hasOwnProperty(e)?i=this.tasks[e]:(i=new m,c.Service.UIBuilder.buildLayout({type:"HorizontalLayout",styleClass:"wb-lay-no-mb",columnWeights:[6,6],columnWeightsSmall:[12,12],css:{marginBottom:15},children:[{type:h.FlowLayout,styleClass:"wb-lay-no-mb",children:[{type:"CustomContainer",id:"icon",styleClass:"fa fa-hourglass",tag:"i",width:30},{type:"Label",id:"text",css:{"font-weight":"normal"},text:t.text}]},{type:"HorizontalLayout",styleClass:"wb-lay-no-mb",css:{minHeight:20},children:[{type:"ProgressBar",id:"progress"}]}]},this.container,i),this.tasks[e]=i),i.text.setText(t.text),t.state==o.Pending?(i.icon.getElem().attr("class","fa fa-hourglass-half").css({color:"#AAA"}),i.progress.setVisible(!1)):(i.progress.setVisible(!0),t.progressText&&i.progress.setText(t.progressText),t.state==o.Active?(i.icon.addClass("fa-play-circle"),i.icon.getElem().attr("class","fa fa-spinner fa-spin").css({color:"#377BB5"}),i.progress.setProgress(u.ProgressBarType.Default,t.progress),i.progress.setProgress(u.ProgressBarType.Success,0)):(i.icon.addClass("fa-check-circle"),i.icon.getElem().attr("class","fa fa-check-circle").css({color:"#0A0"}),i.progress.setProgress(u.ProgressBarType.Default,0),i.progress.setProgress(u.ProgressBarType.Success,t.progress)))},t.prototype.setError=function(e){this.preloader.setVisible(!1),this.errorMessage.getElem().text(e),this.errorMessage.setVisible(!0)},t.prototype.retry=function(e,t,i){var n=this;if(null===this.retryTimer){this.retryCountdown.setVisible(!0);var o=e,s=t,r=i,a=function(){o>0?(n.retryCountdown.getElem().text(__("Retrying in %s seconds").replace("%s",o.toString())),o--,n.retryTimer=setTimeout(a,1e3)):(c.Service.websiteImporter.importWebsite(s,r,!1),n.retryTimer=null)};a()}},t}(l())},"./TemplateChooser.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TemplateChooser:function(){return D},redirectToBuilder:function(){return x}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./PreloaderOverlay.ts"),l=i("./Service.ts"),c=i("./ui/ChangeTemplateDialog.ts"),u=i("./DropdownBox.ts"),d=i("./DefaultUI/LanguageSelector.ts"),h=i("./TextField.ts"),p=i("./UIButton.ts"),m=i("./BuilderEvent.ts"),g=i("./CheckBox.js"),f=i.n(g),y=i("./lib/jquery-1.11.3.min.js"),b=i.n(y),v=i("./core/BuilderConfig.ts"),_=i("./util/FlowStepUtil.ts"),C=i("./WebsiteImporter.ts"),w=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),T=[],E=function(){},I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.buildInit=function(t,i){var n=this;t.change=function(e){return n.onChange(e)},e.prototype.buildInit.call(this,t,i),this.chooser=t.chooser},t.prototype.onChange=function(e){var t=this.getSelectedItem();if(t){var i=t.getOriginal();"function"==typeof i.customContentAppender?this.chooser.loadCustomContent(i.customContentAppender):this.chooser.loadTemplates(t.getId()),e.categoryList.selectItem(t.getId())}},t.prototype.addAllItems=function(e){for(var t=0;t<e.length;t++)this.addItem(new u.DropdownBox.Item(e[t].name+(!1!==e[t].templateCount?" ("+e[t].templateCount+")":""),e[t].id,e[t]))},t}(u.DropdownBox);function x(e){void 0===e&&(e=""),location.href=v.wbConfig.getLnUrl("",void 0,!e,!0,!0)+(e?"#scenario="+e:"")}var S=function(e){function t(){var t=e.call(this)||this;return t.items=[],t.rootSize=b()("<div>").css({textAlign:"center",fontSize:"10px",color:"#999999",display:"block",borderTop:"1px solid #e5e5e5"}).hide().appendTo(t.getElem()),v.wbConfig.adminMode&&(t.privateToggler=new(f())(__("Show private"),!0),t.privateToggler.getElem().find("span").tooltip({title:__("Private templates are visible only in admin builder mode.")+" "+__("Template becomes private after saving it with %s option checked.").replace("%s",'"'+__("Make private")+'"'),placement:"right",container:"body"}).prepend('<span class="glyphicon glyphicon-lock"></span>&nbsp;'),t.privateToggler.onChange((function(){t.chooser.reloadContents()})),t.privateToggler.getElem().css({borderBottom:"1px solid #e5e5e5",display:"block",padding:"6px"}).prependTo(t.getElem())),t}return w(t,e),t.prototype.buildInit=function(e,t){this.chooser=e.chooser},t.prototype.removeAllItems=function(){this.rootSize.detach(),this.privateToggler&&this.privateToggler.getElem().detach(),this.getElem().empty()},t.prototype.addAllItems=function(e){this.rootSize.detach(),this.privateToggler&&this.privateToggler.getElem().detach();for(var t=0;t<e.length;t++)this.addItem(e[t]);this.getElem().append(this.rootSize),this.privateToggler&&this.getElem().prepend(this.privateToggler.getElem())},t.prototype.addItem=function(e){var t=this;this.items.push(e);var i,n=e,o=this;e.elem=b()("<div>").addClass("wb-tpl-cats-item"),i=b()("<a>").attr({href:"javascript:void(0)"}).text(e.name).on("click",(function(){return o.selectItem(n.id),"function"==typeof n.customContentAppender?t.chooser.loadCustomContent(n.customContentAppender):t.chooser.loadTemplates(n.id),t.chooser.fields.categoryListCombo.selectItem(t.chooser.fields.categoryListCombo.getItemById(n.id)),!1})),!1!==e.templateCount&&i.append(b()("<span>").text("("+e.templateCount+")")),e.elem.append(i).appendTo(this.getElem()),e.isPrivate&&i.append(b()("<span>").addClass("glyphicon glyphicon-lock"))},t.prototype.selectItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t].elem;i&&(e===this.items[t].id?i.addClass("active"):i.removeClass("active"))}},t.prototype.setSize=function(e){this.rootSize.text(e||""),e?this.rootSize.show():this.rootSize.hide()},t}(r.UIComponent),k=function(e){function t(){var t=e.call(this)||this;return t.cont=b()("<div>").addClass("wb-tpl-list-body").appendTo(t.getElem()),t}return w(t,e),t.prototype.buildInit=function(e,t){this.chooser=e.chooser},t.prototype.removeAllItems=function(){this.cont.empty()},t.prototype.addAllItems=function(e){for(var t=0;t<e.length;t++)this.addItem(e[t])},t.prototype.addItem=function(e){var t,i,n,o,s=this,r=e,a=null,l=b()("<div>").addClass("wb-tpl-list-item");if(e.id&&l.data("__TPL_ID__",e.id),"function"==typeof e.customContentAppender)l.appendTo(this.cont),e.customContentAppender(l);else{l.attr({"aria-haspopup":"true"}).on("touchend",(function(){return b()(this).parent().children().removeClass("active"),b()(this).toggleClass("active"),!1}));var c=b()('<div class="wb-tpl-btns">').append(n=b()("<button>").addClass("btn btn-success btn-lg").attr({type:"button"}).append(b()("<span>").addClass("fa fa-pencil-square-o")).append(__("Select"))).append(b()("<div>").addClass("wb-line2").append(b()("<a>").addClass("btn btn-default btn-outline").attr({target:"_blank",href:e.previewUrl}).append(b()("<span>").addClass("fa fa-search")).on("touchend",(function(e){e.stopImmediatePropagation()})).append(__("Preview"))).append(o=b()("<button>").addClass("btn btn-default btn-outline").attr({type:"button",title:__("See how template was made")}).append(b()("<span>").addClass("fa fa-play-circle-o")).on("click touchend",(function(){return s.onBtnPlay(r.id),!1})).append(__("Guide"))));if(v.wbConfig.adminMode&&e.isPrivate&&c.append(a=b()("<button>").addClass("btn btn-danger btn-sm").attr({type:"button"}).append(b()("<span>").addClass("fa fa-trash")).append(__("Delete"))),l.append(b()("<div>").append(b()("<div>").addClass("wb-tpl-list-overlay").append(b()("<div>")).append(c)).append(b()("<div/>").addClass("cimg").append(t=b()('<img src=""/>').attr({src:e.thumb}))).append(i=b()("<span/>").text(e.name))).appendTo(this.cont),t.removeAttr("width").removeAttr("height"),e.isPrivate&&i.append(b()("<span>").addClass("glyphicon glyphicon-lock")),e.current&&(i.append(b()("<span>").text(__("(current template)"))),l.addClass("current")),e.size&&i.append(b()("<span>").css({textAlign:"center",fontSize:"10px",color:e.sizeSeverity?"#ef5350":"#999999",fontWeight:e.sizeSeverity?"bold":"normal",display:"block"}).text(e.size)),a&&a.on("click",(function(){return s.removeTemplate(r.id)})),e.available)n.on("click touchend",(function(){return s.onBtnSelect(r.id),!1}));else{n.detach(),o.detach();var u=v.wbConfig.upgradeUrl?v.wbConfig.upgradeUrl:null,d="";if(e.availableInPlans){var h="";if(v.wbConfig.isB2C)h=e.availableInPlans.map((function(e){return"<a"+(u?' href="'+u+'"':"")+' target="_blank">'+__(e.name)+"</a>"})).join(", ");else{for(var p=[],m=0,g=e.availableInPlans;m<g.length;m++){var f=g[m];p=p.concat(f.hostingPlanNames)}h=b().trim(p.map((function(e){return"<a"+(u?' href="'+u+'"':"")+' target="_blank">'+e+"</a>"})).join(", "))}d='<div class="wb-tpl-list-upgrade"><div>'+(h?"":"<span>"+__("Need more builder features?")+"</span><br />")+'<a class="btn btn-lg btn-success btn-raised"'+(u?' href="'+u+'"':"")+' target="_blank">'+__("Upgrade")+"</a>"+(h?"<br /><span>"+__("Available in %s").replace("%s",h)+"</span>":"")+"</div></div>"}else d='<div class="wb-tpl-list-onlypro">'+("expired"===v.wbConfig.premiumButtonType?'<div><span class="exp">'+__("Ask administrator to enable this feature")+"</span></div>":"<div>"+__("Available in %sPremium version%s").replace("%s",u?'<span class="glyphicon glyphicon-star"></span><span class="txt"><a href="'+u+'" target="_blank">':"").replace("%s",u?"</a></span>":""))+"</div>";var y=l.find(".wb-tpl-btns");b()(d).insertBefore(y.children().eq(0)),l.find(".wb-tpl-list-overlay").show()}}},t.prototype.onBtnSelect=function(e){O.applyTemplateWithDialog(e,null,null,this.chooser,this.chooser.fields.loader,this.chooser.isStandAlone)},t.prototype.removeTemplate=function(e){var t=this;confirm(__("Are you sure?"))&&O.removeTemplate(e,(function(){t.cont.find(".wb-tpl-list-item").each((function(){var t=b()(this);t.data("__TPL_ID__")===e&&(t.detach(),t.remove)}))}))},t.prototype.onBtnPlay=function(e){var t=this;O.applyTemplateWithDialog(e,(function(){t.chooser.isStandAlone?x("./1"):l.Service.HelpSystemPlayer.loadRemote(".",!0)}),null,this.chooser,this.chooser.fields.loader,this.chooser.isStandAlone)},t}(r.UIComponent),D=function(e){function t(t){void 0===t&&(t=!1);var i=e.call(this,__("Select template"),!0,null,!0)||this;i.isStandAlone=t,i.contentLoaded=!1,i.templates=[],i.categories=[],i.onResizeCallback=null,i.fields=new E,i.setContent(new l.Service.UIBuilder([{type:a.PreloaderOverlay,id:"loader",value:100,visible:!1},{type:"HorizontalLayout",columnWeights:[2,10],columnWeightsSmall:[3,9],debug:!0,children:[{type:"VerticalLayout",rowStyleClass:["visible-xs-block"],children:[{type:I,id:"categoryListCombo",css:{margin:"15px 15px 0 15px"},chooser:i},{type:S,id:"categoryList",styleClass:"wb-tpl-cats hidden-xs",css:{height:300},chooser:i}]},{type:"VerticalLayout",children:[{type:k,id:"list",styleClass:"wb-tpl-list",css:{height:300},chooser:i},{type:"CustomContainer",id:"content"}]}]}],i.fields),!0);var n=l.Service.uiManager.getApiInstance();i.languageSelector=new d.LanguageSelector(n),i.headerElem.append(i.languageSelector.elem),i.closeButton=i.addButton(__("Close")),i.baseElem.addClass("wb-tpl-dialog");var o=b()("<div>").addClass("wb-tpl-logo");return v.wbConfig.whiteLabel.logo&&o.css({backgroundImage:"url('"+v.wbConfig.baseUrl+"builder-logo')"}),i.title.before(o),i}return w(t,e),t.prototype.getDefaultCategoryId=function(e,t){var i,n,o,s=null,r={};if((o=window.location.search.split("?"))&&2===o.length&&(o=o[1].split("&")))for(n=0;n<o.length;n++)2===(i=o[n].split("=")).length&&(r[i[0]]=decodeURIComponent(i[1]));return e&&e.categoryList&&r.tpl&&e.categoryListCombo.getItemById(r.tpl)&&(s=r.tpl),s||(s=t.length>0?t[0].id:null),s},t.prototype.reloadContents=function(){var e=this;this.fields.loader.setVisible(!0);var t={};this.fields.categoryList.privateToggler&&(t.noPrivate=this.fields.categoryList.privateToggler.getValue()?"0":"1"),v.wbConfig.commerceAvailable||(t.exclude="E-commerce"),b().getJSON(O.getApiUrl("template/categories",t)).done((function(t){if(v.wbConfig.hideImport||t.push(e.createImportCategoryData()),e.fields.loader.setVisible(!1),"object"==typeof t){if(e.categories=t,e.fields.categoryList.removeAllItems(),e.fields.categoryListCombo.removeAllItems(),e.fields.categoryList.addAllItems(e.categories),e.fields.categoryListCombo.addAllItems(e.categories),e.fields.categoryList.setSize(""),e.categories.length>0){for(var i=0,n=e.categories;i<n.length;i++){var o=n[i];if(o.rootSize){e.fields.categoryList.setSize(o.rootSize);break}}var s=e.getDefaultCategoryId(e.fields,e.categories);e.fields.categoryList.selectItem(s),e.fields.categoryListCombo.selectItem(s?e.fields.categoryListCombo.getItemById(s):null),e.loadTemplates(s)}}else console.error("Template category loading format error")})).fail((function(){e.fields.loader.setVisible(!1),console.error("Template category loading error")}))},t.prototype.createImportCategoryData=function(){var e=this;return{id:"__import__",name:__("Website import"),templateCount:!1,isPrivate:!1,customContentAppender:function(t){e.appendImportForm(t,!0)}}},t.prototype.createImportTemplateData=function(){var e=this;return{id:"__import__",name:"",categoryId:"",thumb:"",previewUrl:"",isPrivate:!1,current:!1,available:!0,customContentAppender:function(t){e.appendImportForm(t,!1)}}},t.prototype.appendImportForm=function(e,t){var i=this;void 0===t&&(t=!1);var n=new h.TextField("","www."),o=new p.UIButton(__("Import"),p.UIButton.STYLE_SUCCESS);o.addClass("btn-lg"),v.wbConfig.enableImport?o.on("click",(function(){var e=n.getValue();e&&(/^https?:\/\//.test(e)||(e="http://"+e),i.setVisible(!1),setTimeout((function(){C.WebsiteImporter.setImportCompleteCallback((function(e){var t=e;C.WebsiteImporter.setImportCompleteCallback(null),setTimeout((function(){t?i.isStandAlone?((0,_.forwardFlowStep)(v.wbConfig,3),x()):wb_builder.loadPage(1,!0,(function(){(0,_.forwardFlowStep)(v.wbConfig,3)})):i.setVisible(!0)}),500)})),C.WebsiteImporter.importWebsite({url:e},1,!0)}),500))})):o.getElem().attr("disabled","disabled"),n.getElem().on("keydown",(function(e){13===(e.which||e.keyCode)&&o.trigger("click")}));var s=b()("<div>").addClass("wb-tpl-list-import"),r=b()("<div>").append(b()("<p>").text(__("Import Any Website"))).append(n.getElem()).append(o.getElem());t&&!v.wbConfig.enableImport&&r.append(b()("<div>").text(__("Ask administrator to enable this feature"))),s.append(r),e.append(s),t?(n.getElem().addClass("input-lg"),s.addClass("big"),b()(window).on("resize",(function(){b()(".wb-tpl-list-import.big").css("height",e.parents(".modal-body").outerHeight()+"px")})),b()(window).trigger("resize"),setTimeout((function(){return b()(window).trigger("resize")}),100)):(s.on("mouseenter",(function(){n.getElem().trigger("focus")})),s.on("mouseleave",(function(){n.getElem().trigger("blur")})),e.append(b()("<div>").append(s)),b()(window).on("resize",(function(){s.css("height",Math.min(s.width(),484)/484*330+"px"),s.width()*s.height()<65100?(s.addClass("smaller"),s.find(".btn").removeClass("btn-lg")):(s.removeClass("smaller"),s.find(".btn").addClass("btn-lg"))})),b()(window).trigger("resize"),setTimeout((function(){return b()(window).trigger("resize")}),100))},t.prototype.loadTemplates=function(e){var t=this;this.fields.loader.setVisible(!0);var i={qty:""+(v.wbConfig.enableImport?5:6)};this.fields.categoryList.privateToggler&&(i.noPrivate=this.fields.categoryList.privateToggler.getValue()?"0":"1"),b().getJSON(O.getApiUrl("template/list/"+e,i)).done((function(i){t.fields.loader.setVisible(!1),"object"==typeof i?(!v.wbConfig.enableImport||v.wbConfig.hideImport||"rnd"!==e&&"all"!==e||i.unshift(t.createImportTemplateData()),t.templates=i,t.fields.content.getElem().hide(),t.fields.list.getElem().show(),t.fields.list.removeAllItems(),t.fields.list.addAllItems(t.templates)):console.error("Template loading format error"),t.fields.list.getElem().scrollTop(0)})).fail((function(){t.fields.loader.setVisible(!1),console.error("Template loading error")}))},t.prototype.loadCustomContent=function(e){this.fields.content.getElem().empty(),this.fields.content.getElem().show(),this.fields.list.getElem().hide(),e(this.fields.content.getElem())},t.prototype.setVisible=function(t,i,n){var o=this,s=new m.VisibilityChangedBuilderEvent(t);m.GlobalEvents.triggerEvent(t?"templates.show":"templates.hide",s),s.defaultPrevented||(e.prototype.setVisible.call(this,t,i,n),t?(this.fields.loader.setVisible(!1),this.isStandAlone||parseInt(""+wb_builder.pageId,10)<=0?(this.closeButton.hide(),this.xButton.hide()):(this.closeButton.show(),this.xButton.show()),this.contentLoaded||(this.contentLoaded=!0,this.reloadContents()),this.onResizeCallback||(this.onResizeCallback=function(){o.setMaximised(!0);var e=o.content.css({padding:0,overflowX:"hidden",overflowY:"auto"}).height();o.fields.categoryList.css({height:e}),o.fields.list.css({height:e})}),this.setMaximised(!0),setTimeout((function(){o.onResizeCallback&&o.onResizeCallback()}),500),b()(window).on("resize",this.onResizeCallback)):this.onResizeCallback&&b()(window).off("resize",this.onResizeCallback))},t}(s()),O=new(function(){function e(){}return e.prototype.getTemplates=function(e){return void 0===e&&(e=null),e||(e="all"),b().getJSON(this.getApiUrl("template/list/"+e))},e.prototype.getApiUrl=function(e,t){return v.wbConfig.getLnUrl(e,t,!0)},e.prototype.applyTemplate=function(e,t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1);var s=t;n&&n.setVisible(!0),b().getJSON(this.getApiUrl("template/select/"+e)).done((function(e){var t="object"==typeof e&&e.ok;if(!n||t&&o||n.setVisible(!1),"object"==typeof e)if(t&&o)(0,_.forwardFlowStep)(v.wbConfig,2),s&&"function"==typeof s?s.call(i):x();else if(t){wb_builder.pageId=e.pageId,wb_builder.template=e.template,wb_builder.meta=e.meta,l.Service.Store.Module.initialLoadDone=!1,l.Service.Store.Module.load((function(){l.Service.Store.Module.initialLoadDone=!1}),!0),l.Service.Store.Module.needToTranslateItems="E-commerce"===e.template.categoryId,l.Service.Blog.Module.resetData(),i&&i.setVisible(!1),setTimeout((function(){wb_builder.loadPage(e.pageId,!0,(function(){(0,_.forwardFlowStep)(v.wbConfig,2),s&&"function"==typeof s&&s.call(i)}))}),500);for(var r=0;r<T.length;r++)T[r].call(i)}else console.error("Template apply failed");else console.error("Template apply format error")})).fail((function(){n&&n.setVisible(!1),console.error("Template apply error")}))},e.prototype.applyTemplateWithDialog=function(e,t,i,n,o,s){var r=this;void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=!1);var a=t;!s&&parseInt(""+wb_builder.pageId,10)>0?(0,c.show)().fail((function(){"function"==typeof i&&i.call(r)})).then((function(){r.applyTemplate(e,a,n,o,s)})):this.applyTemplate(e,a,n,o,s)},e.prototype.removeTemplate=function(e,t){b().getJSON(this.getApiUrl("template/tplremove/?id="+e)).done((function(e){e.ok?"function"==typeof t&&t():e.error&&alert(e.error)}))},e.prototype.addChangeListener=function(e){"function"==typeof e&&T.push(e)},e.prototype.removeChangeListener=function(e){var t="function"==typeof e?T.indexOf(e):-1;t>=0&&T.splice(t,1)},e}());l.Service.templates=O},"./TextAreaControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TextAreaControl:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(e,t,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=!1),this.input=this.elem=o()('<textarea class="form-control"></textarea>'),e&&this.elem.attr("name",e),t&&this.elem.val(t),i?"vertical"!==i&&"horizontal"!==i&&"both"!==i||this.input.css("resize",i):this.input.css("resize","none")}return e.prototype.getValue=function(){return this.elem.val()},e.prototype.setValue=function(e){this.elem.val(e)},e}()},"./TextControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TextControl:function(){return C}});var n,o=i("./Service.ts"),s=i("./ColorPicker.ts"),r=i("./VerticalLayout.ts"),a=i("./SizeSelector.ts"),l=i("./FontStyleSelector.ts"),c=i("./CustomContainer.ts"),u=i("./UIComponent.ts"),d=i("./CommonTypes.ts"),h=i("./WB_FontControl.class.js"),p=i.n(h),m=i("./FlowLayout.ts"),g=i("./HorizontalLayout.ts"),f=i("./ui/Popover.ts"),y=i("./lib/jquery-1.11.3.min.js"),b=i.n(y),v=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_=function(e){function t(){var t=e.call(this)||this;return t._elem.css({height:198,overflow:"hidden",padding:"10px",border:"1px solid lightgray"}),t}return v(t,e),t.prototype.html=function(e){this._elem.html(e)},t.prototype.empty=function(){this._elem.empty()},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b().fn.append.apply(this._elem,e)},t}(c.CustomContainer),C=function(e){function t(t,i,n,o,r,c,u,d,h){void 0===t&&(t=!1),void 0===i&&(i="left"),void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===c&&(c=!0),void 0===u&&(u=!1),void 0===d&&(d=!1),void 0===h&&(h=!1);var p=e.call(this)||this;p.needPreview=n,p.uiFields={},p.previewTag=null,p.isHorizontal=!1,p.layoutElem=null;var m=function(){p.needPreview&&p.updatePreview(),p.layoutElem&&p.layoutElem.update(),p.onValueChanged()};return p.buildField({type:"VerticalLayout",id:"fontBlock",children:[{type:"Label",text:__("Font")},{type:"FlowLayout",spacing:-1,children:[{type:"FontFamilySelector",id:"font",css:{width:164},change:m},{type:"Button",icon:"fa fa-pencil",click:function(e,t){t.font.getWrappedControl().openEditFontsDialog()},css:{paddingLeft:"10px",paddingRight:"10px"}}]}]}),p.buildField({type:"VerticalLayout",id:"sizeBlock",visible:!u,children:[{type:"Label",text:__("Size")},{type:a.SizeSelector,id:"size",min:8,units:"px",hideSpinner:!0,change:m}]}),p.buildField({type:"VerticalLayout",id:"lineHeightBlock",visible:t,children:[{type:"Label",text:__("Line height"),helpPlacement:i},{type:a.SizeSelector,id:"lineHeight",min:8,units:"px",hideSpinner:!0,change:m}]}),p.buildField({type:"VerticalLayout",id:"letterSpacingBlock",visible:!d,children:[{type:"Label",text:__("Letter spacing")},{type:a.SizeSelector,id:"letterSpacing",min:-100,precision:2,step:.01,units:"px",hideSpinner:!0,change:m}]}),p.buildField({type:"VerticalLayout",id:"styleBlock",visible:!o,children:[{type:"Label",text:__("Style")},{type:l.FontStyleSelector,id:"style",change:m}]}),p.buildField({type:"VerticalLayout",id:"alignBlock",visible:!r,children:[{type:"Label",text:__("Align")},{type:"HAlignSelector",id:"align",justify:!0,change:m}]}),p.buildField({type:"VerticalLayout",id:"colorBlock",visible:!h,children:[{type:"Label",text:__("Color")},{type:s.ColorPicker,id:"color",noTransparent:!0,change:m}]}),p.buildField({type:"VerticalLayout",id:"transformBlock",visible:!1,children:[{type:"Label",text:__("Letter case")},{type:"FontTransformSelector",id:"transform",change:m}]}),p.buildField({type:"VerticalLayout",id:"previewBlock",visible:n,children:[{type:"Label",text:__("Preview")},{type:_,id:"previewText"}]}),p.setHorizontal(c),p.font=p.uiFields.font,p.size=p.uiFields.size,p.lineHeight=p.uiFields.lineHeight,p.letterSpacing=p.uiFields.letterSpacing,p.align=p.uiFields.align,p.style=p.uiFields.style,p.color=p.uiFields.color,p.previewText=p.uiFields.previewText,p}return v(t,e),t.stringifyCss=function(e){var t="";for(var i in e)t+=i+": "+e[i]+"; ";return t.substring(0,t.length-1)},t.combine=function(e,i,n,o,s,r){var a=o?o.getValue():{},l={font:(a.italic?"italic":"normal")+" "+(a.bold?"bold":"normal")+" "+(i?i.getValue():12)+"px"+(e?" "+e.getValue():""),"text-align":s?s.getValue():"left","text-decoration":a.underline?"underline":"none",color:n?n.getValue():"#000000"},c=i?i.getValue()+2:14;l["line-height"]=0===c?"normal":c+"px";var u=r?r.getValue():0;return u&&(l["letter-spacing"]=u+"px"),{color:n?n.getValue():"#000000",size:i?i.getValue():12,decoration:a.underline?"underline":"none",font:e?e.getValue():void 0,style:o?o.getValue():void 0,align:s?s.getValue():d.Alignment.Left,lineHeight:i?i.getValue()+2:14,letterSpacing:u,css:l,cssRaw:t.stringifyCss(l)}},t.buildCss=function(e,i,n,o,s,r,a,l,c){var u=e||{},d={color:u.color?u.color:null,size:u.size?u.size:0,font:u.font?u.font:null,style:"object"==typeof u.style||null!==u.style?u.style:{},align:u.align?u.align:null,lineHeight:u.lineHeight?u.lineHeight:null,letterSpacing:u.letterSpacing?u.letterSpacing:0,textTransform:u.textTransform?u.textTransform:null,css:{},cssRaw:""};i&&(d.font=i.getValue()),n&&(d.size=n.getValue()),o&&(d.color=o.getValue()),s&&(d.style=s.getValue()),r&&(d.align=r.getValue()),a&&(d.lineHeight=a.getValue()),l&&(d.letterSpacing=l.getValue()),c&&(d.textTransform=c.getValue().value),n&&(d.css["font-size"]=d.size+"px");var h=d.style?(d.style.italic?"italic":"normal")+" "+(d.style.bold?"bold":"normal")+" ":"";return h&&(d.css["font-style"]=h),d.size&&(d.css.font=(d.style?(d.style.italic?"italic":"normal")+" "+(d.style.bold?"bold":"normal")+" ":"")+d.size+"px"+(d.font?" "+d.font:"")),d.font&&(d.css["font-family"]=d.font),d.color&&(d.css.color=d.color),d.style&&(d.css["text-decoration"]=d.style.underline?"underline":"none"),d.align&&(d.css["text-align"]=d.align),d.lineHeight&&(d.css["line-height"]=0===d.lineHeight?"normal":d.lineHeight+"px"),d.letterSpacing&&(d.css["letter-spacing"]=d.letterSpacing+"px"),d.textTransform&&(d.css["text-transform"]=d.textTransform),d.cssRaw=t.stringifyCss(d.css),b().extend(!0,{},d)},t.prototype.buildInit=function(e,t){"needLineHeight"in e&&this.setNeedLineHeight(!!e.needLineHeight),"needPreview"in e&&this.setNeedPreview(!!e.needPreview),"horizontal"in e&&this.setHorizontal(!!e.horizontal),"noStyle"in e&&this.setNoStyle(!!e.noStyle),"noAlign"in e&&this.setNoAlign(!!e.noAlign),"noSize"in e&&this.setNoSize(!!e.noSize),"noSpacing"in e&&this.setNoSpacing(!!e.noSpacing),"noColorPicker"in e&&this.setNoColorPicker(!!e.noColorPicker),"useTranform"in e&&this.setUseTransform(!!e.useTranform),"value"in e&&this.setValue(e.value||null)},t.prototype.buildField=function(e){return new o.Service.UIBuilder(e,this.uiFields)},t.prototype.destroy=function(){this.layoutElem&&this.layoutElem.dispose(),this.uiFields&&o.Service.UIBuilder.destroyFields(this.uiFields),e.prototype.destroy.call(this)},t.prototype.getValue=function(){return t.buildCss(void 0,this.font,this.size,this.color,this.style,this.align,this.lineHeight,this.letterSpacing,this.uiFields.transform)},t.prototype.setValue=function(e){var t=e?b().extend(!0,{letterSpacing:0},e):null;t||(t={color:"#000000",size:12,decoration:"none",font:"Arial,sans-serif",style:{},align:"left",lineHeight:null,letterSpacing:0,textTransform:null}),this.color.setValue(t.color),this.size&&this.size.setValue(t.size?t.size:12),this.font.setValue(t.font),this.style&&this.style.setValue(t.style),this.align&&this.align.setValue(t.align),this.lineHeight&&this.lineHeight.setValue(t.lineHeight),this.letterSpacing&&this.letterSpacing.setValue(t.letterSpacing),this.uiFields.transform&&this.uiFields.transform.setValue(t.textTransform),this.previewText&&this.updatePreview(),this.layoutElem&&this.layoutElem.update()},t.prototype.setHorizontal=function(e){this.isHorizontal==e&&this.layoutElem||(this.isHorizontal=e,this.layoutElem&&this.layoutElem.dispose(),this.layoutElem=e?new T(this.uiFields):new w(this.uiFields),this.layoutElem.appendTo(this._elem),this.layoutElem.update())},t.prototype.setPreviewTag=function(e){this.previewTag=e||"div",this.updatePreview()},t.prototype.updatePreview=function(){if(this.previewText){var e=this.getValue(),t=this.previewTag?this.previewTag:"div",i="object"!=typeof t?[t]:t;this.previewText.empty();for(var n=0;n<i.length;n++){var o=i[n],r=document.createElement(i[n]);"ol"===o||"ul"===o?b()(r).css("margin",0).css(e.css||{}).append(b()("<li>").text(__("Preview text")),b()("<li>").text(__("Preview text"))):b()(r).css("margin",0).css(e.css||{}).append(document.createTextNode(__("Preview text")),"<br>",document.createTextNode(__("Preview text"))),this.previewText.append(r)}this.previewText.css({backgroundColor:s.ColorPicker.readableColor(e.color)})}},t.prototype.setNeedLineHeight=function(e){this.uiFields.lineHeightBlock.setVisible(e)},t.prototype.setNeedPreview=function(e){this.needPreview=e,this.uiFields.previewBlock&&this.uiFields.previewBlock.setVisible(e)},t.prototype.setNoStyle=function(e){this.uiFields.styleBlock.setVisible(!e)},t.prototype.setNoAlign=function(e){this.uiFields.alignBlock.setVisible(!e)},t.prototype.setNoSize=function(e){this.uiFields.sizeBlock.setVisible(!e)},t.prototype.setNoColorPicker=function(e){this.uiFields.colorBlock.setVisible(!e)},t.prototype.setNoSpacing=function(e){this.uiFields.letterSpacingBlock.setVisible(!e)},t.prototype.setUseTransform=function(e){this.uiFields.transformBlock.setVisible(e)},t.prototype.setEnabled=function(e){},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(e){"needLineHeight"in e&&this.setNeedLineHeight(!!e.needLineHeight),"needPreview"in e&&this.setNeedPreview(!!e.needPreview),"noStyle"in e&&this.setNoStyle(!!e.noStyle),"noAlign"in e&&this.setNoAlign(!!e.noAlign),"noSize"in e&&this.setNoSize(!!e.noSize),"noSpacing"in e&&this.setNoSpacing(!!e.noSpacing),"noColorPicker"in e&&this.setNoColorPicker(!!e.noColorPicker),"useTranform"in e&&this.setUseTransform(!!e.useTranform)},t}(u.UIComponent),w=function(e){function t(t){var i=e.call(this)||this;return i.setSpacing(15),i.addAllChildren([(new g.HorizontalLayout).addAllChildren([t.fontBlock]).setColWeightAll([8]),(new g.HorizontalLayout).addAllChildren([t.sizeBlock,t.lineHeightBlock,t.letterSpacingBlock]).setColWeightAll([4,4,4]),(new g.HorizontalLayout).addAllChildren([t.alignBlock,t.styleBlock,t.colorBlock]).setColWeightAll([4,4,4]),t.previewBlock]),i}return v(t,e),t.prototype.update=function(){},t.prototype.appendTo=function(e){e.append(this._elem)},t.prototype.dispose=function(){this.removeAllChildren(),this._elem.remove()},t}(r.VerticalLayout),T=function(){function e(e){var t=this;this.fields=e;var i=b()("<button>").addClass("btn btn-default").attr({type:"button"}).append(b()("<span>").addClass("fa fa-pencil")).on("click",(function(){return t.onClick()}));this.input=b()("<input>").addClass("form-control").attr({type:"text",readonly:"readonly"}).on("click",(function(){return t.onClick()})),this.elem=b()("<div>").addClass("input-group wb-edit-field-ctrl").append(this.input).append(b()("<span>").addClass("input-group-btn").append(i)),this.popover=new E(i,e)}return e.prototype.update=function(){var e=this.fields.font,t=p().getPrimaryFontName(e.getValue());this.input.val(t.substring(0,1).toUpperCase()+t.substring(1)+(this.fields.sizeBlock.isVisible()?", ".concat(this.fields.size.getValue(),"px"):"")+"...")},e.prototype.onClick=function(){this.popover.isVisible()?this.popover.setVisible(!1):this.popover.setVisible(!0)},e.prototype.appendTo=function(e){e.append(this.elem)},e.prototype.dispose=function(){this.popover.isVisible()&&this.popover.setVisible(!1),this.popover.dispose(),this.elem.remove()},e}(),E=function(e){function t(t,i){var n,o=this;return(o=e.call(this,t,__("Font"),(n=new r.VerticalLayout).setSpacing(12).getElem())||this).lines=[(new m.FlowLayout).setSpacing(30).addAllChildren([i.fontBlock,i.colorBlock]),(new m.FlowLayout).setSpacing(30).addAllChildren([i.sizeBlock,i.lineHeightBlock]),(new m.FlowLayout).setSpacing(30).addAllChildren([i.styleBlock,i.alignBlock]),(new m.FlowLayout).setSpacing(30).addAllChildren([i.transformBlock,i.letterSpacingBlock])],n.addAllChildren(o.lines),o}return v(t,e),t.prototype.dispose=function(){for(var t=0,i=this.lines;t<i.length;t++)i[t].removeAllChildren();e.prototype.dispose.call(this)},t}(f.Popover)},"./TextField.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TextField:function(){return l}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t,i,n,o,r,a){void 0===n&&(n=!1),void 0===o&&(o=!1);var l=e.call(this)||this;return l.textArea=!1,l.inputField=null,l.inputTextArea=null,l.inputIsRoot=!1,l.isWrapped=!1,l.setTextArea(n,!0),t&&l.setText(t),i&&l.setPlaceholder(i),l.setResizable(o),r||a?(l.inputIsRoot=!1,l._elem=s()("<div>"),l._elem.append(l.input),r&&(l._elem.addClass("input-prepend"),l._elem.prepend(l.prepareAdOn(r))),a&&(l._elem.addClass("input-append"),l._elem.append(l.prepareAdOn(a)))):(l.inputIsRoot=!0,l._elem=l.input),l.elem=l._elem,l._elem.addClass("wb-textfield-ctrl"),l}return a(t,e),t.prototype.buildInit=function(e,t){var i,n;this.setTextArea(!!e.textArea),e.placeholder&&this.setPlaceholder(e.placeholder),this.setResizable(!!e.resizable&&e.resizable),e.value?this.setText(e.value):e.text&&this.setText(e.text),e.password&&this.setAsPassword(!!e.password),e.inputType&&this.setType(e.inputType),e.title&&this.setTitle(e.title),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.on("change",(function(){n.call(i,t)})))},t.prototype.setTextArea=function(e,t){var i,n=this;void 0===t&&(t=!1),(this.textArea!==e||t)&&(this.textArea=!!e,e?(this.inputTextArea||(this.inputTextArea=s()("<textarea>").addClass("form-control").on("change keyup",(function(){n.onValueChanged()})).on("paste cut",(function(){setTimeout((function(){return n.input.trigger("change")}),0)}))),i=this.inputTextArea):(this.inputField||(this.inputField=s()("<input>").addClass("form-control").attr("type","text").on("change keyup",(function(){n.onValueChanged()})).on("paste cut",(function(){setTimeout((function(){return n.input.trigger("change")}),0)}))),i=this.inputField),this.input&&(this.input.before(i),this.input.detach()),this.input=i,this.inputIsRoot&&(this._elem=this.elem=this.input))},t.prototype.setResizable=function(e){this.textArea&&(e?"vertical"===e||"horizontal"===e||"both"===e?this.input.css({resize:e}):!0===e&&this.input.css({resize:"both"}):this.input.css({resize:"none"}))},t.prototype.setName=function(e){this.input.attr("name",e)},t.prototype.setText=function(e){return this.setValue(e)},t.prototype.getText=function(){return this.getValue()},t.prototype.setValue=function(e){return this.input.val(e),this},t.prototype.getValue=function(){return this.input.val()},t.prototype.setPlaceholder=function(e){return this.input.attr("placeholder",e),this},t.prototype.getPlaceholder=function(){return this.input.attr("placeholder")},t.prototype.setAsPassword=function(e){return this.textArea||this.input.attr("type",e?"password":"text"),this},t.prototype.setType=function(e){this.textArea||this.input.attr("type",e)},t.prototype.setMinWidth=function(e){return this.input.css("min-width",e),this},t.prototype.setMinHeight=function(e){return this.textArea&&this.input.css("min-height",e),this},t.prototype.setEnabled=function(t){return e.prototype.setEnabled.call(this,t),t?(this.input.removeClass("disabled"),this.input.removeAttr("disabled")):(this.input.addClass("disabled"),this.input.attr("disabled","disabled")),this},t.prototype.focus=function(){this.input.focus()},t.prototype.insertAtCursor=function(e){var t=this.input.get(0),i=t.value;if(t.focus(),void 0!==t.selectionStart&&null!==t.selectionStart&&null!==t.selectionEnd)t.value=i.substring(0,t.selectionStart)+e+i.substring(t.selectionEnd);else{t.createTextRange;var n=t.createTextRange();n&&(n.text=e)}},t.prototype.prepareAdOn=function(e){var t=null;return"object"==typeof e&&"function"==typeof e.hasClass&&e.className?(t=s()(e),e.hasClass("add-on")||e.hasClass("btn")||t.addClass("add-on")):(t=s()('<span class="add-on"></span>')).append(e),t},t.prototype.prepareForPropertyPanel=function(){if(!this.isWrapped){this.isWrapped=!0,this.inputIsRoot=!1;var t=this._elem;this._elem=this.elem=s()("<div>"),this._elem.append(t)}return e.prototype.prepareForPropertyPanel.call(this)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"textArea"in t&&this.setTextArea(!!t.textArea),"placeholder"in t&&this.setPlaceholder(t.placeholder),"resizable"in t&&this.setResizable(t.resizable),"password"in t&&this.setAsPassword(!!t.password),"inputType"in t&&this.setType(t.inputType),"title"in t&&this.setTitle(t.title),"minWidth"in t&&this.setMinWidth(t.minWidth),"minHeight"in t&&this.setMinHeight(t.minHeight)},t}(r.UIComponent)},"./Tree.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Tree:function(){return h},TreeListItem:function(){return c.Item}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./UIButton.ts"),l=i("./VerticalLayout.ts"),c=i("./TreeListControl.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastSelected=null,t}return d(t,e),t.prototype.buildInit=function(e,t){var i=this;this.fields=t,this.itemType=e.itemType,this.selectFunc=e.select,this.addFunc=e.add,this.css({background:"#F5F5F5",border:"1px solid #E3E3E3",padding:"8px 2px"}),this.tree=new(u()),this.tree.selectFunc=function(e){if("function"==typeof i.selectFunc&&i.selectFunc.call(i,i.fields,e.getOriginal()),i.lastSelected){var t=i.lastSelected.getOriginal(),n=t?__tr(t.name):null;i.lastSelected.setTitle(n||"—")}i.lastSelected=e},this.addChild(this.tree),this.applyLayoutCellCss(0,{height:e.listHeight?e.listHeight:306,overflowY:"auto"});var n=new a.UIButton(__("New Item"),a.UIButton.STYLE_LINK,"glyphicon glyphicon-plus");n.css({marginLeft:-7}),n.on("click",(function(){if("function"==typeof i.itemType){var e=new i.itemType,t=new c.Item(e.name?__tr(e.name):__("New Item"),null,e);i.tree.items.addItem(t),i.tree.updateTree(),"function"==typeof i.addFunc&&i.addFunc.call(i,i.fields,e,t)}})),this.addChild(n),this.addChild(new p(__("Use Drag and Drop to sort and categorize items")))},t.prototype.getLastSelected=function(){return this.lastSelected?this.lastSelected.getOriginal():null},t.prototype.selectItemLi=function(e){this.tree.selectItem(e)},t.prototype.selectFirst=function(){var e=this.tree.items.getItem(0);e&&this.tree.selectItem(e)},t.prototype.getItems=function(e,t){void 0===t&&(t=null),t instanceof Array||(t=[]);for(var i=0,n=e.getItemCount();i<n;i++){var o=e.getItem(i);if(o){var s=o.getOriginal();s&&(s.parentId=e.isRoot()?0:e.getOriginal().id,t.push(s),o.getItemCount()>0&&this.getItems(o,t))}}return t},t.prototype.getValue=function(){return this.getItems(this.tree.items)},t.prototype.setValue=function(e){this.tree.items.removeAllItems();for(var t={},i=0,n=e;i<n.length;i++)t["#"+(r=n[i]).id]=new c.Item(__tr(r.name),null,r);for(var o=0,s=e;o<s.length;o++){var r;(r=s[o]).parentId&&"#"+r.parentId in t?t["#"+r.parentId].addItem(t["#"+r.id]):this.tree.items.addItem(t["#"+r.id])}this.tree.updateTree()},t}(l.VerticalLayout),p=function(e){function t(t,i){var n=e.call(this)||this;n.icon="glyphicon glyphicon-exclamation-sign",n.text=null,n.addClass("wb-page-tree-notice");var o={marginTop:0,marginRight:0,marginLeft:0};wb_builder.rtl?o.marginRight=6:o.marginLeft=6,n.css(o);var r=s()("<small>").appendTo(n._elem);return n.iconElem=s()("<i>").appendTo(r),n.textElem=s()("<span>").addClass("txt").appendTo(r),n.setText(t),n.setIcon(i||n.icon),n}return d(t,e),t.prototype.setText=function(e){this.text=e,this.textElem.text(this.text)},t.prototype.setIcon=function(e){this.icon=e,this.iconElem.removeClass().addClass(this.icon)},t}(r.UIComponent)},"./UIButton.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UIButton:function(){return c}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./Service.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i,n,o){var r=e.call(this,"%inherit%"===t?t:void 0)||this;return r._icon=null,r._iconElem=null,r._preloader=null,r.caretElem=null,r.menuElem=null,"%inherit%"!==t&&(r.btnElem=r._elem,r._iconElem=s()("<i>"),r.setText(t),i&&r.setButtonStyle(i),n&&r.setIcon(n),o&&r.setType(o)),r}return l(t,e),t.prototype.buildInit=function(e,t){var i=this,n=e.menuUp?e.menuUp:e.menu;if(n&&n.length>0){this._elem=s()("<div>").addClass("btn-group").append(this.btnElem),e.menuUp&&this._elem.addClass("dropup"),this.caretElem=s()("<span>").addClass("caret").css({marginLeft:"4px"}),this.menuElem=s()("<ul>").addClass("dropdown-menu"),e.menuWidth&&this.menuElem.css({width:e.menuWidth+"px",minWidth:e.menuWidth+"px"});for(var o=function(e){var t,i,n=s()("<li>"),o=s()("<a>").attr({href:"javascript:void(0)"}).text(e.name).appendTo(n);"function"==typeof e.click&&(t=r,i=e.click,o.on("click",(function(){return i.call(t),t._elem.removeClass("open"),!1}))),r.menuElem.append(n)},r=this,a=0,l=n;a<l.length;a++)o(l[a]);this.btnElem.on("click",(function(){i._elem.toggleClass("open")})),this.menuElem.appendTo(this._elem)}e.value?this.setText(e.value):e.text&&this.setText(e.text),e.icon&&this.setIcon(e.icon),e.buttonStyle&&this.setButtonStyle(e.buttonStyle),e.buttonSize&&this.setButtonSize(e.buttonSize),e.buttonWidth&&this.setButtonWidth(e.buttonWidth),e.buttonType&&this.setType(e.buttonType),e.borderless&&this.btnElem.css({border:"none"})},t.prototype.setType=function(e){e&&this.btnElem.attr({type:e})},t.prototype.setIcon=function(e){var t=e||null;this._iconElem&&t!==this._icon&&(this._icon&&this._iconElem.removeClass(this._icon),this._icon=t,this._icon?this._iconElem.addClass(this._icon).prependTo(this.btnElem):this._iconElem.detach())},t.prototype._createElem=function(){return s()("<button>").attr("type","button").addClass("btn btn-default")},t.prototype.setText=function(e){return this.btnElem.text(null===e?"":e),this._iconElem&&(e?this._iconElem.css(wb_builder.rtl?{marginLeft:"4px"}:{marginRight:"4px"}):this._iconElem.css({marginLeft:0,marginRight:0})),this.caretElem&&this.caretElem.appendTo(this.btnElem),this},t.prototype.getText=function(){return this.btnElem.text()},t.prototype.setButtonSize=function(e){return this.btnElem.removeClass("btn-lg btn-sm btn-xs"),e===t.SIZE_LARGE?this.btnElem.addClass("btn-lg"):e===t.SIZE_SMALL?this.btnElem.addClass("btn-sm"):e===t.SIZE_TINY&&this.btnElem.addClass("btn-xs"),this},t.prototype.setButtonStyle=function(e){return this.btnElem.removeClass("btn-success btn-danger btn-info btn-warning btn-primary btn-link btn-default"),e===t.STYLE_DANGER?this.btnElem.addClass("btn-danger"):e===t.STYLE_SUCCESS?this.btnElem.addClass("btn-success"):e===t.STYLE_INFO?this.btnElem.addClass("btn-info"):e===t.STYLE_WARNING?this.btnElem.addClass("btn-warning"):e===t.STYLE_PRIMARY?this.btnElem.addClass("btn-primary"):e===t.STYLE_LINK?this.btnElem.addClass("btn-link"):e===t.STYLE_DEFAULT&&this.btnElem.addClass("btn-default"),this},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),t?this._elem.removeClass("disabled"):this._elem.addClass("disabled")},t.prototype.setLoading=function(e){e?(this._preloader||(this._preloader=s()('<span class="icon-wb-spinner ico-spin"></span>'),this.btnElem.prepend(this._preloader)),this._preloader.show(),this.setEnabled(!1)):(this._preloader&&this._preloader.hide(),this.setEnabled(!0))},t.prototype.setBorderless=function(e){this.btnElem.css({border:e?"none":""})},t.prototype.setButtonWidth=function(e){this.btnElem.css({width:e?e+"%":""})},t.prototype.setLabel=function(e){return void 0===e&&(e=null),e||(e=""),this.setText(e),this},t.supportsMultipleObjectBindings=function(){return!1},t.componentBindsAsButton=function(){return!0},t.prototype.setComponentOptions=function(e){var t=this;if("icon"in e&&this.setIcon(e.icon),"buttonStyle"in e&&this.setButtonStyle(e.buttonStyle),"buttonSize"in e&&this.setButtonSize(e.buttonSize),"buttonType"in e&&this.setType(e.buttonType),"borderless"in e&&this.setBorderless(e.borderless),"buttonWidth"in e&&this.setButtonWidth(e.buttonWidth),"loading"in e&&this.setLoading(e.loading),"click"in e){var i=e.click;this.btnElem.off("click").on("click",(function(){if(t.bindings.length){var e=t.bindings[0];a.Service.HelpSystemPlayer.notify("item-plugin-"+e.owner.getClassType()+"-prop-"+e.property.name+"-click"),i.call(e.owner)}}))}},t.STYLE_SUCCESS="success",t.STYLE_INFO="info",t.STYLE_DANGER="danger",t.STYLE_WARNING="warning",t.STYLE_PRIMARY="primary",t.STYLE_DEFAULT="default",t.STYLE_LINK="link",t.SIZE_NORMAL="normal",t.SIZE_LARGE="btn-lg",t.SIZE_SMALL="btn-sm",t.SIZE_TINY="btn-xs",t.TYPE_BUTTON="button",t.TYPE_SUBMIT="submit",t}(r.UIComponent)},"./UIComponent.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UIComponent:function(){return l}});var n=i("./jquery-builder.ts"),o=i("./core/BuilderConfig.ts"),s=i("./element/Properties.ts"),r=i("./WB_ToolTipControl.class.js"),a=i.n(r),l=function(){function e(t){this._enabled=!0,this._control=null,this._tooltipIsSet=!1,this._labelText=null,this._moreInfo=null,this._moreInfoElem=null,this._helpText=null,this._labelStyle={},this._labelElem=null,this._helpTextElem=null,this._labelContElem=null,this._descriptionText=null,this._descriptionTextElem=null,this._invalid=!1,this._revalidating=!1,this._destroyed=!1,this._isVisible=!0,this.errorElem=null,this.errorText="",this.bindings=[],this.bindingsBySubType={},this.dependencyBindings=[],this._propertyType=null,this._instanceIndex=e.nextInstanceIndex++,"%inherit%"!==t&&(t&&(this.tagType=t),this._elem=this._createElem(),this.invalidate())}return Object.defineProperty(e.prototype,"propertyType",{get:function(){return this._propertyType},set:function(e){this._propertyType=e,this._control&&(this._control.propertyType=e)},enumerable:!1,configurable:!0}),e.prototype._createElem=function(){return(0,n.default)("<"+(this.tagType?this.tagType:"div")+">")},e.prototype._createLabelContainerElem=function(){var e=(0,n.default)('<div class="wb-component-label-cont">');return this._elem.prepend(e),e},e.prototype.getElem=function(){return this._elem},e.prototype.setComponentOptions=function(e){"enabled"in e&&this.setEnabled(!!e.enabled),"visible"in e&&this.setVisible(!!e.visible),"label"in e&&this.setLabel(e.label),"moreInfo"in e&&this.setMoreInfo(e.moreInfo||null),"helpText"in e&&this.setHelpText(e.helpText,"helpTextPlacement"in e?e.helpTextPlacement:void 0),"descriptionText"in e&&this.setDescriptionText(e.descriptionText),this._control&&"function"==typeof this._control.setComponentOptions&&this._control.setComponentOptions(e)},e.prototype.prepareForPropertyPanel=function(){if(!this._elem)throw this._control?new Error("UI Component doesn't have DOM element. If this component class actually extends UIComponent, then it must not be wrapped by PropertyType component factory function."):new Error("UI Component doesn't have DOM element or it is stored into a wrong variable.");return this._control&&"function"==typeof this._control.prepareForPropertyPanel&&this._control.prepareForPropertyPanel(),this._elem.addClass("wb-property"),this},e.prototype.bindProperty=function(e,t){if(this._propertyType&&this._propertyType!==t.type)throw new Error("Can't bind property that has an incompatible property type");var i=new s.PropertyUIBinding(e,t,this,this.onPropertyChanged),n=t.subType||"";this.bindingsBySubType.hasOwnProperty(n)||(this.bindingsBySubType[n]=[]),this.bindingsBySubType[n].push(i),this.bindings.push(i),this.invalidate()},e.prototype.bindDependencyProperty=function(e,t){this.dependencyBindings.push(new s.PropertyUIBinding(e,t,this,this.onDependencyPropertyChanged)),this.invalidate()},e.prototype.unbindAllProperties=function(){for(var e=0,t=this.bindings;e<t.length;e++)t[e].destroy();for(var i=0,n=this.dependencyBindings;i<n.length;i++)n[i].destroy();this.bindings=[],this.bindingsBySubType={},this.dependencyBindings=[],this._control&&(this._control.bindings=this.bindings,this._control.bindingsBySubType=this.bindingsBySubType,this._control.dependencyBindings=this.dependencyBindings),this.invalidate()},e.prototype.callForOneBinding=function(e){for(var t=0,i=this.bindings;t<i.length;t++){var n=i[t];return e.call(n.owner)}return e()},e.prototype.onPropertyChanged=function(e,t){this.invalidate(),this._control&&"function"==typeof this._control.onPropertyChanged&&this._control.onPropertyChanged(e,t)},e.prototype.onDependencyPropertyChanged=function(e,t){this.invalidate(),this._control&&"function"==typeof this._control.onDependencyPropertyChanged&&this._control.onDependencyPropertyChanged(e,t)},e.prototype.getCombinedBindingsOptions=function(){return this._control&&"function"==typeof this._control.getCombinedBindingsOptions?this._control.getCombinedBindingsOptions():this.bindings.length?this.bindings[0].getUIComponentOptions():null},e.prototype.getCombinedBindingsValue=function(){return!this.bindings.length||this._propertyType&&this._propertyType.isButton?null:this._control&&"function"==typeof this._control.getCombinedBindingsValue?this._control.getCombinedBindingsValue():{value:this.bindings[0].getValue(),multipleValues:!1}},e.prototype.setCombinedBindingsValue=function(e){this._propertyType&&this._propertyType.isButton||(this._control&&"function"==typeof this._control.setCombinedBindingsValue?this._control.setCombinedBindingsValue(e):this.setValue(e.value))},e.prototype.onValueChanged=function(){if(!(!this.bindings.length||this._revalidating||this._propertyType&&this._propertyType.isButton))if(this._control&&"function"==typeof this._control._onValueChangedOverride)this._control._onValueChangedOverride();else for(var e=this.getValue(),t=e&&"object"==typeof e,i=t&&Array.isArray(e),o=0,s=this.bindings;o<s.length;o++)s[o].setValue(t?n.default.extend(!0,i?[]:{},e):e,!0)},e.prototype.invalidate=function(){var e=this;return this._destroyed||this._invalid||(this._invalid=!0,requestAnimationFrame((function(){e._destroyed||(e._invalid=!1,e._revalidating=!0,e._control&&(e._control._revalidating=!0),e.revalidate(),e._revalidating=!1,e._control&&(e._control._revalidating=!1))}))),this},e.prototype.revalidate=function(){this._invalid=!1;var e=this.getCombinedBindingsOptions();e&&this.setComponentOptions(e);var t=this.getCombinedBindingsValue();if(t&&this.setCombinedBindingsValue(t),o.wbConfig.adminMode&&this.propertyType&&!this.propertyType.isElementReference&&1==this.bindings.length&&"getClassType"in this.bindings[0].owner){var i="";if(i+="Help subject: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"[0]\n",this.propertyType.isButton)i+="Help objective: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"-click\n";else{i+="Help objective: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"-change\n";try{i+='Help defaultContent: {"value": '+JSON.stringify(this.bindings[0].property.serialize(this.bindings[0].owner),null,2)+"}\n"}catch(e){console.error(e),console.error("Unable to generate defaultContent for ".concat(this.bindings[0].property.name))}}this.getElem().attr("title",i)}this._control&&"function"==typeof this._control.revalidate&&this._control.revalidate()},e.prototype.destroy=function(){this._control&&"function"==typeof this._control.destroy&&this._control.destroy(),this._helpTextElem&&(this._helpTextElem.remove(),this._helpTextElem=null),this._destroyed=!0,this.unbindAllProperties(),this._elem.remove()},e.prototype.css=function(e){return this._elem&&this._elem.css(e),this},e.prototype.addClass=function(e){return this._elem&&this._elem.addClass(e),this},e.prototype.removeClass=function(e){return this._elem&&this._elem.removeClass(e),this},e.prototype.isVisible=function(){return this._isVisible},e.prototype.setVisible=function(e){return this._elem&&(this._isVisible=e,this._elem[0].style.display=e?"":"none",this._elem.trigger("componentvisibilitychanged")),this},e.prototype.setEnabled=function(e){this._enabled=!!e},e.prototype.setTitle=function(e){return e?this._elem.attr("title",e):this._elem.removeAttr("title"),this},e.prototype.setLabelStyle=function(e){this._labelStyle=e,this._labelElem&&this._labelElem.css(e)},e.prototype.setLabel=function(e){return void 0===e&&(e=null),this._labelText!==e&&(null===e||""===e?(this._labelElem&&(this._labelElem.remove(),this._labelElem=null),this._labelContElem&&!this._helpTextElem&&(this._labelContElem.remove(),this._labelContElem=null)):(this._labelContElem||(this._labelContElem=this._createLabelContainerElem()),this._labelElem||(this._labelElem=(0,n.default)('<span class="wb-component-label"/>').css(this._labelStyle),this._labelContElem.prepend(this._labelElem)),this._labelElem.text(e),this._labelElem.attr("title",e)),this._labelText=e),this},e.prototype.setError=function(e){this.errorText!=e&&(this.errorText=e,this.errorText&&!this.errorElem&&(this.errorElem=(0,n.default)('<div class="wb-component-error"/>').appendTo(this._elem)),this.errorElem&&this.errorElem.text(this.errorText))},e.prototype.setMoreInfo=function(e){var t=this;return this._moreInfo!==e&&this._labelElem?(this._moreInfo=e,this._moreInfoElem&&!e?(this._moreInfoElem.remove(),this._moreInfoElem=null):(this._moreInfoElem||(this._moreInfoElem=(0,n.default)("<span>").append(" (").append((0,n.default)("<a>").attr("href","javascript:void(0)").text(__("Settings"))).append(")").appendTo(this._labelElem)),this._moreInfoElem.children("a").off("click").on("click",(function(){"function"==typeof e&&t.callForOneBinding(e)}))),this):this},e.prototype.setHelpText=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t="top"),this._helpText!==e){if(null===e||""===e)this._helpTextElem&&(this._helpTextElem.remove(),this._helpTextElem=null),this._labelContElem&&!this._labelElem&&(this._labelContElem.remove(),this._labelContElem=null);else{var i=e,n="?";"warn:"==e.substring(0,5)?(i=e.substring(5),n="warn"):"error:"==e.substring(0,6)&&(i=e.substring(6),n="error"),this._labelContElem||(this._labelContElem=this._createLabelContainerElem()),this._helpTextElem||(this._helpTextElem=new(a())(n,i,t),this._labelContElem.append(this._helpTextElem.elem)),window.hasOwnProperty("wb_builder")&&wb_builder.rtl&&("left"===t?t="right":"right"===t&&(t="left")),this._helpTextElem.setLabel(n),this._helpTextElem.setTitle(i,!0),this._helpTextElem.setPlacement(t)}this._helpText=e}return this},e.prototype.setDescriptionText=function(e){return void 0===e&&(e=null),this._descriptionText!==e&&(null===e||""===e?this._descriptionTextElem&&(this._descriptionTextElem.remove(),this._descriptionTextElem=null):(this._descriptionTextElem||(this._descriptionTextElem=(0,n.default)('<div class="wb-component-description"/>'),this._elem.append(this._descriptionTextElem)),this._descriptionTextElem.html(e)),this._descriptionText=e),this},e.prototype.on=function(e,t){var i=this,n=t;return n._wrapCallback=function(e){i._enabled&&n(e)},this._elem&&this._elem.on(e,n._wrapCallback),this},e.prototype.off=function(e,t){return this._elem&&this._elem.off(e,t._wrapCallback?t._wrapCallback:t),this},e.prototype.setTooltip=function(e,t,i){if(void 0===t&&(t="top"),void 0===i&&(i="hover"),this._tooltipIsSet&&!e)return this._elem.tooltip("destroy"),void(this._tooltipIsSet=!1);e&&(this._tooltipOpts||(this._tooltipOpts={}),"string"==typeof e&&(this._tooltipOpts.title=e),this._tooltipOpts.placement=t||"top",this._tooltipOpts.trigger=i||"hover",this._tooltipOpts.title&&(this._tooltipIsSet?this._elem.attr("data-original-title",this._tooltipOpts.title):this._elem.tooltip(this._tooltipOpts),this._tooltipIsSet=!0))},e.prototype.trigger=function(e,t){return this._elem&&this._elem.trigger(e,t),this},e.prototype.getWrappedControl=function(){return this._control},e.wrapControl=function(t){var i=new e;i._control=t,i._elem=t.elem,i.getValue=function(){return this._control.getValue()},i.setValue=function(e){this._control.setValue(e)},i.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._control&&"function"==typeof this._control.setEnabled&&this._control.setEnabled(t)},i._control._componentWrapper=i,i._control.bindings=i.bindings,i._control.bindingsBySubType=i.bindingsBySubType,i._control.dependencyBindings=i.dependencyBindings,i._control.propertyType=i.propertyType;var n=t;return"onValueChanged"in n&&(n._onValueChangedOverride=n.onValueChanged),n.onValueChanged=i.onValueChanged.bind(i),i},e.nextInstanceIndex=0,e}()},"./UIContainer.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UIContainer:function(){return r}});var n,o=i("./UIComponent.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){var i=e.call(this,t)||this;return i._children=[],i._container=null,"%inherit%"===t||(i._children=[]),i}return s(t,e),t.prototype._appendChild=function(e){this._elem.append(e.getElem())},t.prototype._detachChild=function(e){e.getElem().detach()},t.prototype.addChild=function(e){return this._children.indexOf(e)<0&&(this._children.push(e),this._appendChild(e)),this},t.prototype.removeChild=function(e){var t=this._children.indexOf(e);return t>=0&&(this._children.splice(t,1),this._detachChild(e)),this},t.prototype.addAllChildren=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.addChild(n)}return this},t.prototype.removeAllChildren=function(){for(var e=0;e<this._children.length;e++)this._detachChild(this._children[e]);return this._children.splice(0,this._children.length),this},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].setEnabled(t)},t}(o.UIComponent)},"./UIModeScaleFactors.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UIModeScaleFactors:function(){return h}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./UIComponent.ts"),a=i("./SizeSelector.ts"),l=i("./Service.ts"),c=i("./CustomContainer.ts"),u=i("./BuilderEvent.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(t){var i=e.call(this,t)||this;if("%inherit%"===t)return i;var n={},o=function(e,t){var i=l.Service.modeManager.getModeName(t);return{type:c.CustomContainer,content:'<span class="fa fa-'.concat(e,'"></span>'),attr:{title:i},css:{textAlign:"center"},init:function(){n[t]=this}}},s="",r=function(e){s!=e&&(s&&s in n&&n[s].getElem().css({color:""}),e&&e in n&&n[e].getElem().css({color:"#ff7100"}),s&&s in i.uiFields&&i.uiFields[s].setActive(!1),e&&e in i.uiFields&&i.uiFields[e].setActive(!0),s=e)};return l.Service.UIBuilder.buildLayout({type:"HorizontalLayout",noPadding:!0,children:[{type:"VerticalLayout",children:[o("desktop",l.Service.modeManager.MODE_TV),{type:a.SizeSelector,id:"tv",units:"%",noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return i.triggerOnChange()}}]},{type:"VerticalLayout",enabled:!1,children:[o("laptop",l.Service.modeManager.MODE_DESKTOP),{type:a.SizeSelector,id:"desktop",units:"%",noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return i.triggerOnChange()}}]},{type:"VerticalLayout",children:[o("tablet",l.Service.modeManager.MODE_TABLET),{type:a.SizeSelector,id:"tablet",units:"%",noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return i.triggerOnChange()}}]},{type:"VerticalLayout",children:[o("mobile",l.Service.modeManager.MODE_PHONE),{type:a.SizeSelector,id:"phone",units:"%",noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return i.triggerOnChange()}}]}]},i.getElem(),i.uiFields={}),u.GlobalEvents.on("modes.changed",(function(e){return r(e.mode)})),r(l.Service.modeManager.getMode()),i.uiFields.phone.on("keyup",(function(){return i.onValueChanged()})),i.uiFields.phone.on("cut paste",(function(){return setTimeout((function(){return i.onValueChanged()}),0)})),i.uiFields.tablet.on("keyup",(function(){return i.onValueChanged()})),i.uiFields.tablet.on("cut paste",(function(){return setTimeout((function(){return i.onValueChanged()}),0)})),i.uiFields.desktop.on("keyup",(function(){return i.onValueChanged()})),i.uiFields.desktop.on("cut paste",(function(){return setTimeout((function(){return i.onValueChanged()}),0)})),i.uiFields.tv.on("keyup",(function(){return i.onValueChanged()})),i.uiFields.tv.on("cut paste",(function(){return setTimeout((function(){return i.onValueChanged()}),0)})),i}return d(t,e),t.prototype.buildInit=function(e,t){this.setMin(e.min||0).setMax(e.max||500),this.setValue(e.value||null),this.setOnChange(e.change||null)},t.prototype.setMin=function(e){return this.uiFields.phone.setMinValue(e),this.uiFields.tablet.setMinValue(e),this.uiFields.desktop.setMinValue(e),this.uiFields.tv.setMinValue(e),this},t.prototype.setMax=function(e){return this.uiFields.phone.setMaxValue(e),this.uiFields.tablet.setMaxValue(e),this.uiFields.desktop.setMaxValue(e),this.uiFields.tv.setMaxValue(e),this},t.prototype.setOnChange=function(e){this.onChange=e},t.prototype.getValue=function(){return{tv:this.uiFields.tv.getValue(),desktop:this.uiFields.desktop.getValue(),tablet:this.uiFields.tablet.getValue(),phone:this.uiFields.phone.getValue()}},t.prototype.setValue=function(e){var i=s().extend({},t.defaultValue,e);this.uiFields.tv.setValue(i.tv),this.uiFields.desktop.setValue(i.desktop),this.uiFields.tablet.setValue(i.tablet),this.uiFields.phone.setValue(i.phone)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this.uiFields.tv.setEnabled(t),this.uiFields.desktop.setEnabled(t),this.uiFields.tablet.setEnabled(t),this.uiFields.phone.setEnabled(t)},t.prototype.triggerOnChange=function(){"function"==typeof this.onChange&&this.onChange.call(this),this.onValueChanged()},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"min"in t&&this.setMin(t.min),"max"in t&&this.setMax(t.max)},t.defaultValue={tv:100,desktop:100,tablet:100,phone:100},t}(r.UIComponent)},"./UniqueIdentifier.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UniqueIdentifier:function(){return n}});var n=function(){function e(){}return e.newId=function(e){var t,i=1;for(t=0;t<e.length;t++)i<=e[t].id&&(i=e[t].id+1);return i},e.assignIds=function(t){var i,n=e.newId(t);for(i=0;i<t.length;i++)t[i].id||(t[i].id=n,n++);return t},e}()},"./UserInput.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{UserInput:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=new(function(){function e(){this.hotKeysMap={27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",107:"+",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"},this.hotKeysMod={shift:!1,ctrl:!1,alt:!1,win:!1},this.hotKeysListeners={},this.initialized=!1,this.blockNextMouseUpDeselect=!1;for(var e=65;e<=90;e++)this.hotKeysMap[e]=String.fromCharCode(e).toLowerCase();for(e=96;e<=105;e++)this.hotKeysMap[e]=String.fromCharCode(e-48).toLowerCase()}return e.prototype.resyncKeys=function(e){"boolean"==typeof e.shiftKey&&(this.hotKeysMod.shift=e.shiftKey),"boolean"==typeof e.ctrlKey&&(this.hotKeysMod.ctrl=e.ctrlKey),"boolean"==typeof e.altKey&&(this.hotKeysMod.alt=e.altKey)},e.prototype.init=function(e){var t=this;this.initialized||(this.initialized=!0,o()(e).on("keydown",(function(e){if(o()(e.target).is("body")&&8===e.which)return e.preventDefault(),!1;16===e.keyCode?t.hotKeysMod.shift=!0:17===e.keyCode?t.hotKeysMod.ctrl=!0:18===e.keyCode?t.hotKeysMod.alt=!0:t.resyncKeys(e);var i=t.hotKeysMap[e.keyCode],n=i,s=t.hotKeysListeners[n];if(t.hotKeysMod.shift&&"shift"!==i&&(n="shift+"+i,s=t.hotKeysListeners[n]),t.hotKeysMod.ctrl&&"ctrl"!==i&&(n="ctrl+"+i,s=t.hotKeysListeners[n]),t.hotKeysMod.alt&&"alt"!==i&&(n="alt+"+i,s=t.hotKeysListeners[n]),s&&s.length>0){e.data||(e.data={}),e.data.hotKey=n;for(var r=o()(document.body),a=!(r.hasClass("modal-open")||r.hasClass("wb-properties-focus")),l=0,c=s;l<c.length;l++){var u=c[l];!a&&u.builderOnly||u.callback(e)}}return!0})).on("keyup",(function(e){16===e.keyCode?t.hotKeysMod.shift=!1:17===e.keyCode?t.hotKeysMod.ctrl=!1:18===e.keyCode&&(t.hotKeysMod.alt=!1)})).on("mouseenter",(function(e){return t.resyncKeys(e)})))},e.prototype.addHotKey=function(e,t,i){void 0===i&&(i=!1);var n=e.toLowerCase();this.hotKeysListeners.hasOwnProperty(n)||(this.hotKeysListeners[n]=[]),this.hotKeysListeners[n].push({builderOnly:i,callback:t})},e}())},"./VerticalLayout.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{VerticalLayout:function(){return l}});var n,o=i("./UIContainer.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t,i){void 0===t&&(t=!1),void 0===i&&(i=[]);var n=e.call(this,"%inherit%"===t?t:"div")||this;return n._spacing=0,n._childCount=0,"%inherit%"===t||(n.addClass("wb-vertical-layout"),t&&n.addClass("row-fluid"),n._rowStyleClass=i&&"object"==typeof i&&"length"in i?i:[]),n}return a(t,e),t.prototype.buildInit=function(e,t){e.fluid&&this.addClass("row-fluid"),e.rowStyleClass&&e.rowStyleClass instanceof Array&&(this._rowStyleClass=e.rowStyleClass),(e.spacing||0===e.spacing)&&this.setSpacing(e.spacing)},t.prototype._appendChild=function(e){var t=r()("<div>").append(e.getElem());this._childCount>0&&t.css({marginTop:this._spacing+"px"}),this._elem.append(t),this._childCount>=0&&this._childCount<this._rowStyleClass.length&&this._rowStyleClass[this._childCount]&&t.addClass(this._rowStyleClass[this._childCount]),this._childCount++},t.prototype._detachChild=function(e){var t=e.getElem(),i=t.parent();t.detach(),i.remove(),this._childCount--},t.prototype.applyLayoutCellCss=function(e,t){return this._elem.children().eq(e).css(t),this},t.prototype.setSpacing=function(e){return this._spacing=e,this},t}(o.UIContainer)},"./Video.ts":function(e,t,i){"use strict";i.r(t);var n,o=i("./Element.ts"),s=i("./element/PropertyType.ts"),r=i("./ElementRegister.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t,i,n,o){void 0===t&&(t={content:{}}),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!0);var s=e.call(this,t,i,n,o)||this;if(s._videoUrl="",s._posterUrl="",s._showControls=!1,s._autoPlay=!1,s._loop=!1,s._muted=!1,s.videoElem=document.createElement("video"),s.videoElem.style.width="100%",s.videoElem.style.height="100%",s.videoElem.style.backgroundColor="#000",s.videoSourceElem=document.createElement("source"),s.videoLinkElem=document.createElement("a"),s.videoElem.append(s.videoLinkElem),s.container.append(s.videoElem),s.setVideoControlsVisible(!0),t.content){var r=t.content;"string"==typeof r.videoUrl&&s.setVideoUrl(r.videoUrl),"string"==typeof r.posterUrl&&s.setPosterUrl(r.posterUrl),"boolean"==typeof r.showControls&&s.setVideoControlsVisible(r.showControls),"boolean"==typeof r.autoPlay&&s.setVideoAutoPlay(r.autoPlay),"boolean"==typeof r.loop&&s.setVideoLoop(r.loop),"boolean"==typeof r.muted&&s.setVideoMuted(r.muted)}return s.updateStyle(!0),s}return a(t,e),Object.defineProperty(t.prototype,"propVideoUrl",{get:function(){return this._videoUrl},set:function(e){this.setVideoUrl(e||"",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propPosterUrl",{get:function(){return this._posterUrl},set:function(e){this.setPosterUrl(e||"")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propShowControls",{get:function(){return this._showControls},set:function(e){this.setVideoControlsVisible(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propAutoPlay",{get:function(){return this._autoPlay},set:function(e){this.setVideoAutoPlay(e,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propLoop",{get:function(){return this._loop},set:function(e){this.setVideoLoop(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propMuted",{get:function(){return this._muted},set:function(e){this.setVideoMuted(e)},enumerable:!1,configurable:!0}),t.prototype.setVideoControlsVisible=function(e){this._showControls!=e&&(this._showControls=e,this.videoElem.controls=e)},t.prototype.setVideoAutoPlay=function(e,t){void 0===t&&(t=!1),this._autoPlay!=e&&(this._autoPlay=e,this.videoElem.autoplay=e,t&&(e?this.videoElem.play():this.videoElem.pause()))},t.prototype.setVideoLoop=function(e){this._loop!=e&&(this._loop=e,this.videoElem.loop=e)},t.prototype.setVideoMuted=function(e){this._muted!=e&&(this._muted=e,this.videoElem.muted=e)},t.prototype.setVideoUrl=function(e,t){if(void 0===t&&(t=!1),this._videoUrl!=e){this._videoUrl=e?wb_builder.makeRelUrl(e):"";var i="",n="",o="video/mp4";if(e){var s=e.split("/");"mp4"==(n=(s=(i=s[s.length-1]).split(".")).length>1?s[s.length-1]:"")?o="video/mp4":"webm"==n?o="video/webm":"avi"==n?o="video/avi":"ogv"!=n&&"ogm"!=n&&"ogg"!=n||(o="video/ogg")}this.videoSourceElem.type=o,this.videoSourceElem.src=e?wb_builder.makeLocalUrl(e):"",this.videoLinkElem.href=e?wb_builder.makeLocalUrl(e):"",e?this.videoElem.appendChild(this.videoSourceElem):this.videoElem.removeChild(this.videoSourceElem),this.videoLinkElem.innerText=i,this.videoElem.load(),t&&e&&this._autoPlay&&this.videoElem.play()}},t.prototype.setPosterUrl=function(e){this._posterUrl!=e&&(this._posterUrl=e?wb_builder.makeRelUrl(e):"",this.videoElem.poster=e?wb_builder.makeLocalUrl(e):"")},t.prototype.getIcon=function(){return"fa fa-play-circle"},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.content={videoUrl:this._videoUrl,posterUrl:this._posterUrl,showControls:this._showControls,autoPlay:this._autoPlay,loop:this._loop,muted:this._muted},t},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return this._videoUrl&&t.push(this._videoUrl),t},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"propVideoUrl",type:s.PropertyType.VideoUrl}),this.registerProperty({name:"propPosterUrl",type:s.PropertyType.VideoPosterUrl}),this.registerProperty({name:"propShowControls",type:s.PropertyType.VideoControls}),this.registerProperty({name:"propAutoPlay",type:s.PropertyType.VideoAutoPlay}),this.registerProperty({name:"propLoop",type:s.PropertyType.VideoLoop}),this.registerProperty({name:"propMuted",type:s.PropertyType.VideoMuted})},t}(o.Element);r.ElementRegister.registerClass("Video",l)},"./WYSIWYGControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{WYSIWYGControl:function(){return d}});var n,o=i("./UIComponent.ts"),s=i("./BuilderEvent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=i("./core/BuilderConfig.ts"),c=i("./lib/ckeditor/ckeditor.js"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(i){var n=e.call(this,"%inherit%"===i?i:"div")||this;return n.value="",n.editorChosenLanguage=null,n.onChange=null,n.onBlur=null,t.controls.push(n),n}return u(t,e),t.getAll=function(){return t.controls},t.reloadAll=function(){for(var e=0,i=t.controls;e<i.length;e++)i[e].refreshEditor()},t.prototype.buildInit=function(e,i){var n=this;this._contentId="wb_wysiwyg_control_"+t.nextId++,this._elem.css({position:"relative",lineHeight:"normal",height:e.height?e.height:83}),this.textDiv=a()('<div class="wb-wysiwyg-control">'),"ar_AE"!==l.wbConfig.locale&&"he_IL"!==l.wbConfig.locale&&"fa_IR"!==l.wbConfig.locale||this.textDiv.addClass("rtl"),this.textDiv.attr("id",this._contentId),this._elem.append(this.textDiv),this.editorChosenLanguage=wb_builder.site.currSelLang,e.hasOwnProperty("value")&&e.value&&this.setValue(e.value),s.GlobalEvents.on("languages.update",(function(){for(var e,t=!1,i=0;e=wb_builder.site.languages[i];i++)if(e.code===n.editorChosenLanguage){t=!0;break}t||(n.setValue(n.textDiv.html(),n.editorChosenLanguage),n.onSwitchLanguage(wb_builder.site.currSelLang||"",!0),n.editorChosenLanguage=wb_builder.site.currSelLang),setTimeout(n.initEditor.bind(n),10)}));var o,r,c=this;this._editorConfig={toolbar:[["Bold","Italic","Underline","RemoveFormat"],["WBLink","Unlink"],["Languages"]],on:{selectionChange:function(e){e.data.selection&&e.data.selection.getSelectedText()},afterCommandExec:function(){},focus:function(){c._editor.wbTextAreaInstance=c,a()("#cke_"+c._contentId).css({"z-index":2e3})},change:function(){n.onChange&&n.onChange()},blur:function(){n.onBlur&&n.onBlur()}}},e.hasOwnProperty("config")&&(this._editorConfig=a().extend(this._editorConfig,e.config)),"change"in e&&"function"==typeof e.change&&(o=this,r=e.change,n.onChange=function(){r.call(o,i)}),"blur"in e&&"function"==typeof e.blur&&function(e,t){n.onBlur=function(){t.call(e,i)}}(this,e.blur);var u=a();if((u.hasOwnProperty("browser")?u.browser:{msie:!1}).msie){var d=this.textDiv.html();d=d.replace(/(<p[^>]*>)&nbsp;(<\/p>)/gi,"$1­$2"),this.textDiv.html(d)}this.updateStyle(),this.initEditor()},t.prototype.updateStyle=function(){this._enabled?(this.textDiv.attr("contenteditable","true"),this.textDiv.removeClass("disabled")):(this.textDiv.removeAttr("contenteditable"),this.textDiv.addClass("disabled"))},t.prototype.initEditor=function(){var e=this;if(a()("#"+this._contentId).length){if(this._editor&&(this._editor.focus(),this._editor.destroy(),this._editor=null),this._enabled){if(!this._editorConfig.hasOwnProperty("stylesSet")){var t=c.CKEDITOR.stylesSet.get("wb_site_styles");t||(t=c.CKEDITOR.stylesSet.add("wb_site_styles",[])),t.splice(0,t.length);for(var i=0;i<wb_builder.site.styles.length;i++){var n=wb_builder.site.styles[i],o=/^\.([^\ ]+)(?:\ |$)/i.exec(n.selector);o&&t.push({name:n.name,element:n.tag?n.tag:"span",attributes:{class:o[1]}})}this._editorConfig.stylesSet="wb_site_styles"}this._editor=c.CKEDITOR.inline(this._contentId,this._editorConfig),this._editor.on("blur",(function(){e.onValueChanged()}))}}else clearTimeout(this._timeout),this._timeout=setTimeout((function(){return e.initEditor()}),1e3)},t.prototype.updateValue=function(e,t){var i,n,o;if("object"==typeof e)this.value=null===e?"":e;else if(t=t||this.editorChosenLanguage||wb_builder.site.currSelLang||"","string"==typeof this.value)if(wb_builder.site.languages.length){for(o={},i=0;n=wb_builder.site.languages[i];i++)n.code===t?o[n.code]=e:n.code===wb_builder.site.getLastDefLang()&&(o[n.code]=this.value);this.value=o}else this.value=e;else if("object"==typeof this.value){for(o={},i=0;n=wb_builder.site.languages[i];i++)n.code in this.value&&(o[n.code]=this.value[n.code]);o[t]=e,this.value=o}return this},t.prototype.refreshEditor=function(){this._editorConfig.stylesSet=null,delete this._editorConfig.stylesSet,this.initEditor()},t.prototype.setValue=function(e,t){var i;if(this.updateValue(e,t),i=null===e?"":"object"==typeof e?e[t||this.editorChosenLanguage||wb_builder.site.currSelLang||""]||"":e,this._editor)this._editor.setData(i);else{var n=a()("<div>").html(i);n.find("script").each((function(){a()(this).replaceWith("\x3c!--{cke_protected}"+this.outerHTML+"--\x3e")})),i=n.html(),this.textDiv.html(i)}return this},t.prototype.getValue=function(){var e;return e=this._editor?this._editor.getData():this.textDiv.html(),this.updateValue(e).value},t.prototype.onSwitchLanguage=function(e,t){this.textDiv.html(("string"==typeof this.value?this.value:this.value[e])||"")},t.prototype.setEnabled=function(t){var i=this._enabled;e.prototype.setEnabled.call(this,t),i!=t&&(this.initEditor(),this.updateStyle())},t.convertPlainTextToHtml=function(e){if(null===e)return"";if("object"==typeof e){for(var i in e)e.hasOwnProperty(i)&&(e[i]=t.convertPlainTextToHtml(e[i]));return e}if(/<(p|u|i|a|b|em|hr|br|ul|li|tr|td|th|h[1-6]|div|span|table|strong)\b.*>/i.test(e=""+e))return e;for(var n,o="<p>",s=0,r=(i=0,e.length-1);i<=r;i++)"\r"!=(n=e.charAt(i))&&("\n"==n?++s>1&&(o+="</p>\n<p>",s=0):(s&&(o+="<br />\n",s=0),o+=n));return s&&(o+="<br />\n"),"<p></p>"==(o+="</p>")&&(o=""),o},t.nextId=0,t.controls=[],t}(o.UIComponent)},"./WebsiteImporter.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{WebsiteImportOptions:function(){return m},WebsiteImportVerificationOptionsControl:function(){return g},WebsiteImporter:function(){return y},WebsiteImporterModule:function(){return f}});var n,o=i("./TaskProgressDialog.ts"),s=i("./Service.ts"),r=i("./Confirm.ts"),a=i("./UIComponent.ts"),l=i("./CustomContainer.ts"),c=i("./lib/jquery-1.11.3.min.js"),u=i.n(c),d=i("./core/BuilderConfig.ts"),h=i("./util/FlowStepUtil.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){},g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.domainNameSpans=[],t.domainName="",t.data=null,t.error="",t}return p(t,e),t.prototype.buildInit=function(e,t){var i=this;e.domain&&this.setDomainName(e.domain),this.updateContent(),u().ajax({url:WB_IMPORT_VERIFICATION_INFO_URL,dataType:"json",async:!0,success:function(e){e&&e.success&&e.info?i.data=e.info:e.error?i.error=e.error:i.error=__("Unknown error"),i.updateContent()},error:function(){i.error="Network error",i.updateContent()}})},t.prototype.createBlock=function(e){var t=u()('<p style="font-weight: bold;"/>'),i=u()('<a href="javascript:void(0)">').text(e),n=u()('<div class="hidden"/>');return this._elem.append(t,n),t.append(i),t.append('<i class="fa fa-chevron-right"/>').append('<i class="fa fa-chevron-down hidden"/>').append(document.createTextNode(" ")).append(i),i.on("click touchstart",(function(){var e=u()(this).parent();e.find(".fa-chevron-right").toggleClass("hidden"),e.find(".fa-chevron-down").toggleClass("hidden"),n.toggleClass("hidden")})),n},t.prototype.updateContent=function(){if(this._elem.html(""),this._elem.append(u()("<h4>").text(__("Confirm website ownership"))),""!==this.error)this._elem.append(u()('<div class="alert alert-danger">').text(this.error));else if(this.data){this.domainNameSpans=[],this.domainNameSpans.push(u()("<span>").text(this.domainName));var e=void 0;this._elem.append(u()('<p class="text-small">').text(__("Select one of the following methods to get confirmation instructions."))),(e=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","1").replace("%2$s","HTTP"))).append(u()("<ol>").append(u()('<li class="text-small">').text(__("Download file:")).append('<br /><a style="word-break: break-all;" href="'+this.data.tokenFileDataUri+'" download="'+this.data.tokenFileName+'">'+this.data.tokenFileName+"</a>")).append(u()('<li class="text-small">').text(__("Upload it to the root folder of the website you are about to import."))).append(u()('<li class="text-small">').text(__("Check if it is accessible via URL:")).append("<br />",u()('<code style="word-break: break-all;">').append("http://",this.domainNameSpans[0],"/"+this.data.tokenFileName)))),(e=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","2").replace("%2$s","META"))).append(u()('<p class="text-small">').text(__("Add meta tag (HTML code) to your website:"))),e.append(u()('<p class="text-small">').append(u()('<code style="word-break: break-all;"/>').text(this.data.tokenMetaTagHtml))),(e=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","3").replace("%2$s","DNS"))).append(u()('<p class="text-small">').text(__("Add following record to your website DNS zone:"))),e.append(u()('<p class="text-small">').append(u()('<code style="word-break: break-all;"/>').text(this.data.tokenDNSRecord))),e.append(u()('<p class="text-small">').text(__("Sometimes it may take several minutes for DNS service to update changes in zone.")))}else this._elem.append('<i class="fa fa-spinner fa-pulse fa-2x" />')},t.prototype.setDomainName=function(e){this.domainName=e;for(var t=0,i=this.domainNameSpans;t<i.length;t++)i[t].text(e)},t}(a.UIComponent),f=function(){function e(){this.importFields={},this.importCompleteCallback=null,this.migrationMode=!1}return e.prototype.resetRetries=function(){this.retriesLeft=0},e.prototype.resetProgress=function(){this.taskProgressDialog.reset(),this.taskProgressDialog.setVisible(!0)},e.prototype.openPreloader=function(){this.taskProgressDialog||(this.taskProgressDialog=new o.TaskProgressDialog(this.migrationMode?__("Migrating to new builder version"):__("Import website")),this.resetProgress())},e.prototype.setMigrationMode=function(e){this.migrationMode=e},e.prototype.setImportCompleteCallback=function(e){this.importCompleteCallback=e},e.prototype.checkUrl=function(e){return/^https?:\/\/[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?(\.[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?)+(:[0-9]+)?(\/|\?|#|$)/.test(e)},e.prototype.handleImportOnOpen=function(e,t){var i=this;this.resetRetries(),this.setMigrationMode(e),this.setImportCompleteCallback((function(e){i.setImportCompleteCallback(null),i.setMigrationMode(!1),t(e)})),this.showProgress(!0)},e.prototype.importWebsite=function(e,t,i){var n=this;this.lastImportData=e,this.retriesLeft=Math.max(t,0),this.openPreloader(),this.resetProgress(),i&&(this.taskProgressDialog.isActivatedManually=i),u().ajax({url:WB_IMPORT_URL+"?sess="+d.wbConfig.sessUniqKey+"&st="+d.wbConfig.secureToken,data:e,type:"post",dataType:"json",async:!0,success:function(t){"success"in t&&t.success?n.showProgress():"error"in t?4===t.errorCode?(n.resetProgress(),n.taskProgressDialog.setVisible(!1),n.showImportDialog(e.url,!0)):n.showError({allowRetry:!1,message:t.error}):n.showError({allowRetry:!0,message:__("Import service is currently unavailable. Please try again later.")})},error:function(){n.showError({allowRetry:!0,message:__("Import service is currently unavailable. Please try again later.")})}})},e.prototype.showProgress=function(e){void 0===e&&(e=!1),this.openPreloader(),this.taskProgressDialog.isMonitoring()||(this.importCompleteCallback&&(this.taskProgressDialog.isActivatedManually=!0),this.taskProgressDialog&&this.taskProgressDialog.setTitle(this.migrationMode?__("Migrating to new builder version"):__("Import website")),this.taskProgressDialog.monitor({url:WB_IMPORT_STATUS_URL+"?sess="+d.wbConfig.sessUniqKey,onComplete:this.onImportDone.bind(this),onCancel:this.onImportCancelled.bind(this),onError:this.showError.bind(this)},e))},e.prototype.showError=function(e){var t=this;this.openPreloader(),this.importCompleteCallback&&this.taskProgressDialog.setOnClose((function(){t.taskProgressDialog.setOnClose(null),t.importCompleteCallback&&t.importCompleteCallback(!1)})),this.taskProgressDialog&&this.taskProgressDialog.setTitle(this.migrationMode?__("Migrating to new builder version"):__("Import website")),this.taskProgressDialog.setError(e.message),e.allowRetry&&this.lastImportData&&this.retriesLeft>0&&this.taskProgressDialog.retry(15,this.lastImportData,this.retriesLeft-1)},e.prototype.onImportCancelled=function(){u().ajax({url:WB_IMPORT_CANCEL_URL+"?sess="+d.wbConfig.sessUniqKey,async:!0}),this.importCompleteCallback&&this.importCompleteCallback(!1)},e.prototype.onImportDone=function(){var e=this;setTimeout((function(){e.taskProgressDialog.setVisible(!1),e.importCompleteCallback?e.importCompleteCallback(!0):wb_builder.loadPage(1,!0,(function(){(0,h.forwardFlowStep)(d.wbConfig,3)}))}),500)},e.prototype.onBuilderInit=function(e){return!!e&&(e.importing?(e.importData&&(this.lastImportData=e.importData,this.retriesLeft=1),this.showProgress()):e.error&&this.showError(e.error),!0)},e.prototype.getDomain=function(t){var i=e.DEFAULT_DOMAIN,n=t.match(/^(?:https?:\/\/)?([a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?(\.[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?)+)(?:[:\/?#].*)?$/i);return n&&(i=n[1]),i},e.prototype.showImportDialog=function(e,t){var i=this;void 0===e&&(e=""),void 0===t&&(t=!1);var n,o=this;n=t?u()('<div><div class="website-import-form"></div></div>'):u()('<div class="wb_change_template_dlg"><div class="website-import-form"></div><div class="red">'+__("Your current information will be lost once import is completed.")+"</div></div>"),s.Service.UIBuilder.buildLayout({type:"VerticalLayout",css:{margin:"10px 0",textAlign:"left"},children:[{type:"Label",text:__("URL of a website to import")},{type:"TextField",id:"importUrl",value:e,attr:{placeholder:"http://..."},on:{"keyup paste cut change":function(){i.importFields.importUrl&&i.importFields.verification&&i.importFields.verification.setDomainName(i.getDomain(i.importFields.importUrl.getValue()))}}},{type:l.CustomContainer,css:{marginTop:15},content:u()('<div class="alert alert-danger" style="margin-bottom: 0;"/>').text(__("Unable to confirm that you are owner of %s").replace("%s",this.getDomain(e))),ignore:!t},{type:g,id:"verification",css:{marginTop:30,marginBottom:30},domain:this.getDomain(e),ignore:!d.wbConfig.importVerification.required,visible:t||!d.wbConfig.importVerification.usesApi},{type:"HorizontalLayout",ignore:!d.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Pages"},{type:"TextField",value:10,id:"maxPages"}]},{type:"HorizontalLayout",ignore:!d.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Files"},{type:"TextField",value:1e3,id:"maxFiles"}]},{type:"HorizontalLayout",ignore:!d.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Gallery Size (MB)"},{type:"TextField",value:50,id:"maxGallerySize"}]},{type:"HorizontalLayout",ignore:!d.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Image Size (MB)"},{type:"TextField",value:3,id:"maxImageSize"}]},{type:"HorizontalLayout",ignore:!d.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Document Size (MB)"},{type:"TextField",value:20,id:"maxDocumentSize"}]}]},n.find(".website-import-form"),this.importFields),r.Confirm.showDialog(__("Import"),n,[{title:t?__("Cancel"):__("No, keep current website")},{title:t?__("Confirm and import"):__("Yes, import website"),cssClass:"btn-danger",validateFunc:function(){var e=this.importUrl.getValue();return this.importUrl.getElem().removeClass("has-error"),""===e?(this.importUrl.getElem().addClass("has-error"),!1):(/^https?:\/\//.test(e)||(e="http://"+e),o.checkUrl(e)?(this.importUrl.setValue(e),!0):(this.importUrl.getElem().addClass("has-error"),!1))}.bind(this.importFields),func:function(e){var t=new m;if(t.url=this.importUrl.getValue(),d.wbConfig.devTestMode){var i=void 0;i=Math.floor(parseFloat(this.maxPages.getValue())),!isNaN(i)&&i>0&&(t.maxPages=i),i=Math.floor(parseFloat(this.maxFiles.getValue())),!isNaN(i)&&i>=0&&(t.maxFiles=i),i=Math.floor(1024*parseFloat(this.maxGallerySize.getValue())*1024),!isNaN(i)&&i>=0&&(t.maxGallerySize=i),i=Math.floor(1024*parseFloat(this.maxImageSize.getValue())*1024),!isNaN(i)&&i>=0&&(t.maxImageSize=i),i=Math.floor(1024*parseFloat(this.maxDocumentSize.getValue())*1024),!isNaN(i)&&i>=0&&(t.maxDocumentSize=i)}o.importWebsite(t,1,!0)}.bind(this.importFields,n)}],480),r.Confirm.dialog&&r.Confirm.dialog.setCenterButtons(!0)},e.DEFAULT_DOMAIN="your-imported-site.com",e}(),y=new f;s.Service.websiteImporter=y},"./admin/Templates.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{saveAsTemplate:function(){return b}});var n,o,s=i("./WB_Dialog.class.js"),r=i.n(s),a=i("./Service.ts"),l=i("./CustomContainer.ts"),c=i("./WB_MsgDialog.class.js"),u=i.n(c),d=i("./TextField.ts"),h=i("./DropdownBox.ts"),p=i("./Label.ts"),m=i("./VerticalLayout.ts"),g=i("./lib/jquery-1.11.3.min.js"),f=i.n(g),y=i("./core/BuilderConfig.ts");function b(){var e,t=function(){e.newCategoryBlock.setVisible("-"==e.fldCategory.getValue())},i=function(){e.currentTemplate.setVisible(e.fldOverwrite.getValue())};n||((n=new(r())(__("Save template"))).setSize(300),n.setNoScroll(),n.setContent(new a.Service.UIBuilder({type:m.VerticalLayout,children:[{type:p.Label,text:__("Name")},{type:d.TextField,id:"fldName",change:function(){this.getValue()!==wb_builder.template.localId&&(e.fldOverwrite.setValue(!1),i())}},{type:p.Label,text:__("Category"),css:{marginTop:15}},{type:h.DropdownBox,id:"fldCategory",change:function(){return t()}},{type:m.VerticalLayout,id:"newCategoryBlock",visible:!1,css:{marginTop:15},children:[{type:p.Label,text:__("New category")},{type:d.TextField,id:"fldNewCategory"}]},{type:p.Label,text:__("Screenshot"),css:{marginTop:15},helpText:__("Recommended size")+": 968x660"},{type:"ImageSelector",id:"image"},{type:m.VerticalLayout,css:{marginTop:15},children:[{type:"CheckBox",id:"fldOverwrite",label:__("Overwrite existing template"),change:function(){return i()},helpText:__("If checked, then will overwrite current template by applying new data, name and category to it.")},{type:p.Label,id:"currentTemplate",text:"("+wb_builder.template.id+")",css:{marginLeft:20}},{type:"CheckBox",id:"fldIsPrivate",label:__("Make private"),css:{marginTop:5},helpText:__("Private templates are visible only in admin builder mode.")},{type:"CheckBox",id:"fldNonTranslatable",label:__("Do not translate"),css:{marginTop:5},helpText:__("If not checked, then template phrases will not be translated to client's language when choosing that template.")+"<br>"+__("Important")+": "+__("If checked, then only original builder phrases will be translated. Your custom phrases will be translated to random phrases.")}]},{type:l.CustomContainer,styleClass:"alert alert-warning",css:{marginTop:15,marginBottom:0},init:function(){this.getElem().append('<span class="glyphicon glyphicon-exclamation-sign"></span>').append("&nbsp;"+__("Unused files will not be saved"))}}]},n.fields),!0),e=n.fields,n.addButton(__("Cancel")),n.addButton(__("Save"),(function(){f().post(y.wbConfig.baseUrl+"tplsave/",{name:e.fldName.getValue(),category:e.fldCategory.getValue(),newCategory:e.fldNewCategory.getValue(),image:e.image.getValue(),overwrite:e.fldOverwrite.getValue()?1:0,isPrivate:e.fldIsPrivate.getValue()?1:0,nonTranslatable:e.fldNonTranslatable.getValue()?1:0}).done((function(e){o||(o=new(u())(__("Save template"))),e.complete?(e.tpl&&(wb_builder.template=e.tpl),e.needRefresh&&wb_builder.templateChooser.reloadContents(),o.setMessage(__("Template saved successfully"),null,"success"),n.hide()):o.setMessage(e.error?e.error:"Unknown Error",__("Error"),"error"),o.show()})).fail((function(){o||(o=new(u())(__("Save template"))),o.setMessage(__("Saving template failed"),__("Error"),"error"),o.show()}))}),!0)),(e=n.fields).fldName.setValue(wb_builder.template.localId),e.fldIsPrivate.setValue(!!wb_builder.template.isPrivate),e.fldNonTranslatable.setValue(!!wb_builder.template.nonTranslatable),e.fldOverwrite.setValue(!0),f().getJSON(y.wbConfig.baseUrl+"tpllist/",(function(i){var n,o=null;if(i&&i.length){e.fldCategory.removeAllItems();var s=new h.DropdownBox.Item("+ "+__("New Item"),"-");e.fldCategory.addItem(s);for(var r=0,a=i;r<a.length;r++){var l=a[r];n=new h.DropdownBox.Item(l.name,l.id,l),e.fldCategory.addItem(n),l.id===wb_builder.template.categoryId&&(o=n)}e.fldCategory.selectItem(o)}t()})),i(),e.currentTemplate.setText("("+wb_builder.template.id+")"),n.show()}},"./blog/Blog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Blog:function(){return g}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./ElementRegister.ts"),a=i("./Element.ts"),l=i("./blog/BlogPost.ts"),c=i("./blog/BlogPropertyDialog.ts"),u=i("./Service.ts"),d=i("./blog/BlogLayout.ts"),h=i("./element/PropertyType.ts"),p=i("./TextControl.ts"),m=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),g=function(e){function t(i){var n=e.call(this,t.dataValidate(i))||this;n.currPage=1,n.totalPages=0,n.currentItemsPerPage=0,n.currentCategory=null,n.posts=[],n.previewPostId=null,n.loading=!1,n.resizeTimer=null,n.resizeCallback=null,n._data=i;var o=n.virtualElement||n.isElementPreview;n.blogService=o?u.Service.BlogForCompositions:u.Service.Blog,n._data.content||(n._data.content={}),n._data.content.layout||(n._data.content.layout=d.BlogLayout.TYPE_LIST),n._data.content.itemsPerPage||(n._data.content.itemsPerPage=6),n._data.content.thumbWidth||(n._data.content.thumbWidth=240),n._data.content.thumbHeight||(n._data.content.thumbHeight=200),n._data.content.thumbAlign||(n._data.content.thumbAlign="left"),n._data.content.thumbPadding||0===n._data.content.thumbPadding||(n._data.content.thumbPadding=20),n._data.content.captionBackground||(n._data.content.captionBackground="rgba(235, 235, 235, 0.92)"),n._data.content.noCornerPadding=!("noCornerPadding"in n._data.content)||!!n._data.content.noCornerPadding;var r,a,c,h,m,g={},f=wb_builder.site.styles;for(r=0;r<f.length;r++)if(".wb-stl-normal"===f[r].selector){var y=f[r].sys.text||{};g=p.TextControl.buildCss({color:"#333333",size:y.size,font:y.font,lineHeight:1.4*y.size,style:{}})}return n._data.content.titleStyle||(n._data.content.titleStyle=s().extend(!0,{},g),n._data.content.titleStyle.style.bold=!0,n._data.content.titleStyle=p.TextControl.buildCss(n._data.content.titleStyle)),n._data.content.descriptionStyle||(n._data.content.descriptionStyle=s().extend(!0,{},g)),n._data.content.dateStyle||(n._data.content.dateStyle=s().extend(!0,{},g)),n._data.content.background||(n._data.content.background="#ffffff"),n._data.content.displayShortText=!("displayShortText"in n._data.content)||!!n._data.content.displayShortText,n._data.content.shortTextLength||(n._data.content.shortTextLength=200),n._data.content.displayTitle=!("displayTitle"in n._data.content)||!!n._data.content.displayTitle,n._data.content.displayDate=!("displayDate"in n._data.content)||!!n._data.content.displayDate,n._data.content.category=n._data.content.category?n._data.content.category:null,n._data.content.useThumbnails=!("useThumbnails"in n._data.content)||!!n._data.content.useThumbnails,n.currentItemsPerPage=n._data.content.itemsPerPage,n.currentCategory=n._data.content.category,n.blogService.Module.elemList.push(n),n._data.isElementPreview||(null===(h=n.cover)||void 0===h||h.on("click mousemove",(function(e){var t,i=e.pageX,o=e.pageY,r=!1;if(n.container.find(".wb-blog-paging .btn").each((function(){var t=s()(this);if(t.hasClass("active"))return!0;var a=t.offset(),l=t.outerWidth(),c=t.outerHeight();return!(i>=a.left&&i<=a.left+l&&o>=a.top&&o<=a.top+c)||("click"===e.type?function(e){var t;(t=e.hasClass("prev")?Math.max(1,n.currPage-1):e.hasClass("next")?Math.min(n.currPage+1,n.totalPages):parseInt(e.text()))!==n.currPage&&n.switchPage(t)}(t):(r=!0,!1))})),n.previewPostId&&n.previewBackBtn){var a=n.previewBackBtn.offset(),l={width:n.previewBackBtn.outerWidth(),height:n.previewBackBtn.outerHeight()};i>=a.left&&i<=a.left+l.width&&o>=a.top&&o<=a.top+l.height&&("click"===e.type&&n.previewBackBtn.trigger("click"),r=!0)}"mousemove"===e.type&&(null===(t=n.cover)||void 0===t||t.css("cursor",r?"pointer":"default"))})),null===(m=n.cover)||void 0===m||m.on("dblclick",(function(e){if(n.previewPostId)n.blogService.Module.editBlogPost(n.findPostById(n.previewPostId),(function(e){e.state!==l.BlogPost.STATE_ACTIVE&&n.hidePreview(),n.blogService.Module.updateAllElements()}));else{var t=e.pageX,i=e.pageY,o=n.container.find(".wb-blog-item"),r=n,a=!1;o.each((function(){var e=s()(this);if(e.hasClass("active"))return!0;var n=e.offset(),o=e.outerWidth(),l=e.outerHeight();if(t>=n.left&&t<=n.left+o&&i>=n.top&&i<=n.top+l){var c=parseInt(e.attr("data-post-id"));return c&&(r.blogService.Module.editBlogPost(r.findPostById(c),(function(){r.blogService.Module.updateAllElements()})),a=!0),!1}return!0})),a||n.blogService.Module.editBlog()}}))),n._data.isElementPreview||(n.resizeTimer&&clearInterval(n.resizeTimer),setInterval((function(){if("function"==typeof n.resizeCallback){var e=n.getWidthInPixels(),t=n.getHeightInPixels();a&&c&&a===e&&c===t||(n.resizeCallback.call(n,e,t),a=e,c=t)}}),50)),n.setLoading(!0),n.blogService.Module.load({success:function(){n.loadData(n.currPage,(function(){n._data.isElementPreview||n._data.id||n.posts.length||n.blogService.Module.editBlogPost(new l.BlogPost({state:l.BlogPost.STATE_ACTIVE})),n.updateStyle(!0)}))},error:function(e){return alert(e.message)},complete:function(){return n.setLoading(!1)}}),n}return m(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsPerPage",{get:function(){return this._data.content.itemsPerPage},set:function(e){this._data.content.itemsPerPage=Math.max(1,e),this.currPage=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._data.content.layout},set:function(e){this._data.content.layout=e,this.currPage=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbWidth",{get:function(){return this._data.content.thumbWidth},set:function(e){this._data.content.thumbWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbHeight",{get:function(){return this._data.content.thumbHeight},set:function(e){this._data.content.thumbHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbAlign",{get:function(){return this._data.content.thumbAlign},set:function(e){this._data.content.thumbAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbPadding",{get:function(){return this._data.content.thumbPadding},set:function(e){this._data.content.thumbPadding=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"captionBackground",{get:function(){return this._data.content.captionBackground},set:function(e){this._data.content.captionBackground=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noCornerPadding",{get:function(){return this._data.content.noCornerPadding},set:function(e){this._data.content.noCornerPadding=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleStyle",{get:function(){return this._data.content.titleStyle},set:function(e){this._data.content.titleStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dateStyle",{get:function(){return this._data.content.dateStyle},set:function(e){this._data.content.dateStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descriptionStyle",{get:function(){return this._data.content.descriptionStyle},set:function(e){this._data.content.descriptionStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._data.content.background},set:function(e){this._data.content.background=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayShortText",{get:function(){return this._data.content.displayShortText},set:function(e){this._data.content.displayShortText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortTextLength",{get:function(){return this._data.content.shortTextLength},set:function(e){this._data.content.shortTextLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayDate",{get:function(){return this._data.content.displayDate},set:function(e){this._data.content.displayDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayTitle",{get:function(){return this._data.content.displayTitle},set:function(e){this._data.content.displayTitle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this._data.content.category},set:function(e){this._data.content.category=e,this.currPage=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useThumbnails",{get:function(){return this._data.content.useThumbnails},set:function(e){this._data.content.useThumbnails=e},enumerable:!1,configurable:!0}),t.dataValidate=function(e){return e&&!e.width&&(e.width=900,e.height=620),e},t.prototype.supportsPadding=function(){return!0},t.prototype.getIcon=function(){return"fa fa-pencil-square-o"},t.prototype.hidePreview=function(){this.previewElem.hide(),this.listElem.show(),this.pagingElem.show(),this.previewPostId=null},t.prototype.renderPreview=function(e){var t=this;if(!this.previewElem){this.previewElem=this.blogElem.children(".wb-blog-preview"),this.previewElem=s()("<div>").addClass("wb-blog-preview").hide();var i=s()("<div>").addClass("back");this.previewBackBtn=s()("<button>").attr("type","button").addClass("btn btn-default").text("< "+__("Back")).on("click",(function(){return t.hidePreview()})),i.append(this.previewBackBtn),this.previewElem.append(i);var n=s()("<div>").addClass("item");this.previewElem.append(n),this.blogElem.append(this.previewElem)}var o=this.findPostById(e);o&&(this.previewElem.children(".item").html(__tr(o.text)),this.listElem.hide(),this.pagingElem.hide(),this.previewElem.show(),this.previewPostId=e)},t.prototype.onSwitchLanguage=function(t){e.prototype.onSwitchLanguage.call(this,t),this.render(!0,!1),this.previewPostId&&this.renderPreview(this.previewPostId)},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);for(var i in t.content={},this._data.content)t.content[i]=this._data.content[i];return t},t.prototype.comProperties=function(){var t=this,i=e.prototype.comProperties.call(this,c.build(this,(function(){return t._data})));return this.comDialog&&this.comDialog.dialog.addClass("wb-modal-settings-900"),c.updateData(i),i},t.prototype.updateStyle=function(t,i){void 0===i&&(i=null),e.prototype.updateStyle.call(this,t,i),this.render()},t.prototype.render=function(e,t,i){var n=this;if(void 0===e&&(e=!0),void 0===t&&(t=!0),this.blogElem||(this.blogElem=s()("<div>").addClass("wb-blog"),this.blogFilters=s()("<div>").addClass("wb-blog-filters").hide(),this.blogFilters.append(s()("<select>").addClass("wb-blog-cat-select form-control").append(s()("<option>").text(__("All")).attr("selected","selected"))),this.blogElem.append(this.blogFilters),this.blogElemWrapper=s()("<div>").addClass("wb-blog-wrapper"),this.listElem=s()("<div>").addClass("wb-blog-list"),this.preloaderElem=s()('<div class="wb-blog-preloader"><div class="ico-spin wb-icon-spinner"></div></div>'),this.pagingElem=s()('<div class="wb-blog-paging"><div class="btn-group" role="group"></div></div>'),this.blogElemWrapper.append(this.listElem),this.blogElemWrapper.append(this.preloaderElem),this.blogElem.append(this.blogElemWrapper),this.blogElem.append(this.pagingElem),this.container.append(this.blogElem)),this.individualMargin){var o=this.individualMargin;this.blogElem.css("padding",(o.paddingTop||0)+"px "+(o.paddingRight||0)+"px "+(o.paddingBottom||0)+"px "+(o.paddingLeft||0)+"px")}for(var r=0,a=d.BlogLayout.getAvailableTypes();r<a.length;r++){var l=a[r];this.blogElemWrapper.removeClass("wb-blog-type-"+l)}this.blogElemWrapper.addClass("wb-blog-type-"+this.layout),this.blogElem.css("background-color",this.background),this.listElem.css({"text-align":this.thumbAlign,margin:this.noCornerPadding?-this.thumbPadding/2+"px":0}),this._data.isElementPreview||(this.category?this.blogFilters.hide():this.blogFilters.show()),this.pagingElem.css("text-align",this.thumbAlign),e?this.loadData(i||this.currPage,(function(){switch(n.resizeCallback=null,n.layout){case d.BlogLayout.TYPE_THUMBS:n.renderThumbs();break;case d.BlogLayout.TYPE_LIST:n.renderList();break;case d.BlogLayout.TYPE_ONETHREE:n.renderOneThree()}t&&n.renderPaging()})):t&&this.renderPaging()},t.prototype.findPostById=function(e){if(this.posts&&this.posts.length)for(var t=0,i=this.posts;t<i.length;t++){var n=i[t];if(n.id===e)return n}return null},t.prototype.setLoading=function(e){this.preloaderElem||this.render(!1,!1),this.loading=e,this.loading?(this.listElem.css("opacity",.5),this.preloaderElem.css("display","flex")):(this.listElem.css("opacity",1),this.preloaderElem.css("display","none"))},t.prototype.reset=function(){this.posts=[],this.currPage=1,this.totalPages=0,this.currentItemsPerPage=this.itemsPerPage,this.currentCategory=this.category},t.prototype.loadData=function(e,t){var i=this;e===this.currPage&&this.totalPages>0&&this.currentItemsPerPage&&this.currentItemsPerPage===this.itemsPerPage&&this.currentCategory===this.category?t():(this.currentItemsPerPage=this.itemsPerPage,this.currentCategory=this.category,this.currPage=e,this.setLoading(!0),this.blogService.API.loadPosts(l.BlogPost.STATE_ACTIVE,{success:function(e){i.totalPages=Math.ceil(e.total/i.itemsPerPage),i.posts=[];for(var n=0,o=e.list;n<o.length;n++){var s=o[n];i.posts.push(new l.BlogPost(s))}t()},complete:function(){return i.setLoading(!1)}},this.currentItemsPerPage,this.currPage,this.currentCategory))},t.prototype.switchPage=function(e){var t=this.pagingElem.children();t.children().removeClass("active"),t.children('[data-page="'+e+'"]').addClass("active"),1===e?t.children(".prev").attr("disabled","disabled"):t.children(".prev").removeAttr("disabled"),e===this.totalPages?t.children(".next").attr("disabled","disabled"):t.children(".next").removeAttr("disabled"),this.render(!0,!1,e)},t.prototype.renderPaging=function(){if(this.totalPages>1){var e=this.pagingElem.children();e.empty(),e.append(s()("<div>").attr("type","button").addClass("btn btn-default prev").html("&laquo;"));for(var t=1;t<=this.totalPages;t++){var i=s()("<div>").attr("type","button").attr("data-page",t).addClass("btn btn-default .page").text(t);t===this.currPage&&i.addClass("active"),e.append(i)}e.append(s()("<div>").attr("type","button").addClass("btn btn-default next").html("&raquo;")),this.pagingElem.show()}else this.pagingElem.hide()},t.prototype.getShortText=function(e){var t=s()("<div>").append(__tr(e.text)).text();return t?t.substring(0,this.shortTextLength)+(t.length>this.shortTextLength?"...":""):""},t.prototype.getPrettyDate=function(e){return e.dateDate&&e.dateTime?e.dateDate+" "+e.dateTime:/(\d{4}\-\d{2}\-\d{2}\ \d{2}:\d{2}):\d{2}/.test(e.createdDate)?RegExp.$1:""},t.prototype.renderThumbs=function(){this.listElem.empty();for(var e=!this.displayTitle&&!this.displayDate&&!this.displayShortText,t=0,i=this.posts;t<i.length;t++){var n=i[t],o=this.thumbPadding/2,r=s()("<div>").addClass("wb-blog-item").attr("data-post-id",n.id).css({width:this.thumbWidth+2*o+"px",height:this.thumbHeight+2*o+"px",padding:o+"px"}),a=s()("<div>").addClass("wrapper"),l=null;if((this.useThumbnails||e)&&(this.useThumbnails&&n.thumbnail?l=s()("<div>").css("background-image",'url("'+wb_builder.makeLocalUrl(n.thumbnail)+'")'):(this.useThumbnails&&!n.thumbnail||e)&&(l=s()("<div>").addClass("no-thumbnail").append(s()("<span>").addClass("glyphicon glyphicon-picture"))),l&&(l.addClass("blog-item-thumbnail"),a.append(l))),!e){var c=s()("<div>").addClass("caption"),u=10;if(this.displayTitle){u+=this.titleStyle.lineHeight||20;var d=s()("<span>").addClass("title").text(__tr(n.title));this.titleStyle.css&&d.css(this.titleStyle.css),c.append(d)}if(this.displayDate){var h=this.getPrettyDate(n);if(h){u+=this.dateStyle.lineHeight||20;var p=s()("<span>").addClass("date").text(h);this.dateStyle.css&&p.css(this.dateStyle.css),c.append(p)}}if(this.displayShortText){var m=2*(this.descriptionStyle.lineHeight||20);u+=m;var g=this.getShortText(n);if(g){var f=s()("<span>").addClass("description").text(g).css("height",m);this.descriptionStyle.css&&f.css(this.descriptionStyle.css),c.append(f)}}l&&l.css("padding-bottom",u),c.css({"background-color":this.captionBackground,height:u}),this.useThumbnails||c.css({"min-height":"100%","padding-top":(this.thumbHeight-u)/2+"px"}),a.append(c)}r.append(a),this.listElem.append(r)}},t.prototype.renderList=function(){var e=this;this.listElem.empty();for(var t=!this.displayTitle&&!this.displayDate&&!this.displayShortText,i=0,n=this.posts;i<n.length;i++){var o=n[i],r=s()("<div>").addClass("wb-blog-item").attr("data-post-id",o.id).css({margin:this.thumbPadding/2+"px","padding-right":this.thumbPadding+"px","background-color":this.captionBackground,height:this.thumbHeight+"px"});if(this.useThumbnails||t){var a=null;this.useThumbnails&&o.thumbnail?a=s()("<div>").css("background-image",'url("'+wb_builder.makeLocalUrl(o.thumbnail)+'")'):(this.useThumbnails&&!o.thumbnail||t)&&(a=s()("<div>").addClass("no-thumbnail").append(s()("<span>").addClass("glyphicon glyphicon-picture"))),a&&(a.addClass("blog-item-thumbnail"),a.css("width",t?"100%":this.thumbWidth+"px"),r.append(a))}if(!t){var l=s()("<div>").addClass("caption");(this.useThumbnails||t)&&l.css({"margin-left":-this.thumbWidth+"px","padding-left":this.thumbWidth+"px"});var c=s()("<div>"),u=0;if(this.displayTitle){var d=s()("<span>").addClass("title").text(__tr(o.title));this.titleStyle.css&&d.css(this.titleStyle.css),c.append(d),u+=this.titleStyle.lineHeight||20}if(this.displayDate){var h=this.getPrettyDate(o);if(h){var p=s()("<span>").addClass("date").text(h);this.dateStyle.css&&p.css(this.dateStyle.css),c.append(p),u+=this.dateStyle.lineHeight||20}}if(this.displayShortText){var m=this.getShortText(o);if(m){var g=s()("<span>").addClass("description").text(m);this.descriptionStyle.css&&g.css(this.descriptionStyle.css),c.append(g);var f=this.descriptionStyle.lineHeight||20,y=this.thumbHeight-30-u;u+=Math.floor(y/f)*f}}u>0&&c.css("max-height",u+"px");var b=s()("<div>").addClass("caption-wrapper");b.append(c),l.append(b),r.append(l)}this.listElem.append(r)}var v=this.thumbWidth+200,_=this.blogElem.find(".blog-item-thumbnail");this.resizeCallback=function(t,i){t<=v?(e.blogElem.addClass("mobile"),_.css("height",Math.min(e.thumbHeight,e.thumbHeight/e.thumbWidth*t)+"px")):(e.blogElem.removeClass("mobile"),_.css("height",""))}},t.prototype.renderOneThree=function(){var e=this;this.renderThumbs(),this.blogElemWrapper.addClass("wb-blog-type-thumbs"),this.listElem.children().each((function(e){e%4==0&&s()(this).addClass("big")}));var t=600+2*this.thumbPadding;this.resizeCallback=function(i,n){i<=t?e.blogElem.addClass("mobile"):e.blogElem.removeClass("mobile")}},t.prototype.initContextMenu=function(){var t,i,n,o=this;e.prototype.initContextMenu.call(this),null===(t=this.menu)||void 0===t||t.insertItemAt(0,"newBlogPost",__("New Blog Post"),(function(){var e=new Date,t=new l.BlogPost({state:l.BlogPost.STATE_ACTIVE,dateDate:e.getUTCFullYear()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate(),dateTime:(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()});o.blogService.Module.editBlogPost(t)}),!1,!1,null,"glyphicon glyphicon-plus"),null===(i=this.menu)||void 0===i||i.insertItemAt(1,"editBlog",__("Edit Blog"),(function(){o.blogService.Module.editBlog()}),!1,!1,null,"glyphicon glyphicon-pencil"),null===(n=this.menu)||void 0===n||n.addSeparator(2)},t.prototype.getUsedFonts=function(){var t=e.prototype.getUsedFonts.call(this);return this.titleStyle&&this.titleStyle.font&&""!==this.titleStyle.font&&t.push(this.titleStyle.font),this.dateStyle&&this.dateStyle.font&&""!==this.dateStyle.font&&t.push(this.dateStyle.font),this.descriptionStyle&&this.descriptionStyle.font&&""!==this.descriptionStyle.font&&t.push(this.descriptionStyle.font),t},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"data"}),this.registerProperty({name:"itemsButton",type:h.PropertyType.BlogItemsButton,uiComponentOptions:{click:function(){this.blogService.Module.editBlog()}}}),this.registerProperty({name:"category",type:h.PropertyType.BlogCategory,dependencies:["data"],uiComponentOptions:function(){var e=[{id:0,name:__("All")}],t=this.blogService.Module.getCategories();if(t&&t.length)for(var i=0,n=t;i<n.length;i++){var o=n[i];e.push({id:o.id,parentId:o.parentId||void 0,name:o.name})}return{options:e}}}),this.registerProperty({name:"itemsPerPage",type:h.PropertyType.ItemsPerPage,dependencies:["data"]}),this.registerProperty({name:"layout",type:h.PropertyType.BlogLayoutType,dependencies:["data"]}),this.registerProperty({name:"thumbWidth",type:h.PropertyType.ThumbnailWidth,dependencies:["data","layout","useThumbnails"],uiComponentOptions:function(){return{visible:this.layout!=d.BlogLayout.TYPE_ONETHREE,enabled:this.useThumbnails}}}),this.registerProperty({name:"thumbHeight",type:h.PropertyType.ThumbnailHeight,dependencies:["data","useThumbnails"],uiComponentOptions:function(){return{enabled:this.useThumbnails}}}),this.registerProperty({name:"thumbAlign",type:h.PropertyType.ThumbnailAlignment,dependencies:["data","layout","useThumbnails"],uiComponentOptions:function(){return{visible:this.layout!=d.BlogLayout.TYPE_LIST,enabled:this.useThumbnails}}}),this.registerProperty({name:"thumbPadding",type:h.PropertyType.ThumbnailPadding,dependencies:["data","useThumbnails"],uiComponentOptions:function(){return{enabled:this.useThumbnails}}}),this.registerProperty({name:"captionBackground",type:h.PropertyType.BlogCaptionsBackgroundColor,dependencies:["data"]}),this.registerProperty({name:"titleStyle",type:h.PropertyType.TitleStyleCombined,dependencies:["data"]}),this.registerProperty({name:"descriptionStyle",type:h.PropertyType.TextStyleCombined,dependencies:["data"]}),this.registerProperty({name:"dateStyle",type:h.PropertyType.DateStyleCombined,dependencies:["data"]}),this.registerProperty({name:"background",type:h.PropertyType.BlogElementBackgroundColor,dependencies:["data"]}),this.registerProperty({name:"displayTitle",type:h.PropertyType.ListingShowTitle,dependencies:["data"]}),this.registerProperty({name:"displayDate",type:h.PropertyType.ListingShowDates,dependencies:["data"]}),this.registerProperty({name:"displayShortText",type:h.PropertyType.ListingShowDescription,dependencies:["data"]}),this.registerProperty({name:"useThumbnails",type:h.PropertyType.UseThumbnails,dependencies:["data"]}),this.registerProperty({name:"shortTextLength",type:h.PropertyType.ListingMaxDescriptionLength,dependencies:["data","shortTextLength"],uiComponentOptions:function(){return{visible:this.displayShortText}}})},t}(a.Element);r.ElementRegister.registerClass("Blog",g)},"./blog/BlogCategory.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogCategory:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.parentId=0,i.name="",i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./blog/BlogCategoryDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogCategoryDialog:function(){return h}});var n,o=i("./WB_PropertyDialog.class.js"),s=i.n(o),r=i("./Tree.ts"),a=i("./Service.ts"),l=i("./blog/BlogCategory.ts"),c=i("./UniqueIdentifier.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.buildInit=function(t,i){t.itemType=l.BlogCategory,t.select=this.onSelect,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){e.name=t.name.getValue()},t.prototype.getItemValue=function(e,t){e||(e=new l.BlogCategory),t.name.setValue(e&&e.name?e.name:"")},t.prototype.onSelect=function(e,t){var i=this.getLastSelected();i&&this.setItemValue(i,e),this.getItemValue(t,e)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(i),e.name.focus()},t}(r.Tree),h=function(e){function t(t){var i=e.call(this,"%inherit%")||this;return i.saveFunc=t,e.prototype.__construct.call(i,__("Properties"),void 0,void 0,void 0,{noScroll:!0,size:{width:685},tabs:[{children:[{type:"HorizontalLayout",columnWeights:[5,7],columnWeightsSmall:[5,7],children:[{type:d,id:"tree",css:{height:420},listHeight:320},{type:"VerticalLayout",spacing:15,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Name")},{type:"MultilangTextField",id:"name"}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){i.applyData()}}]}),i.dialog.addClass("wb-modal-settings"),i}return u(t,e),t.prototype.applyData=function(){var e=this;this.setLoading(!0),this.fields.tree.selectFirst(),a.Service.Blog.Module.setCategories(c.UniqueIdentifier.assignIds(this.fields.tree.getValue()),!0,{success:function(){e.setVisible(!1),"function"==typeof e.saveFunc&&e.saveFunc.call(e)},complete:function(){return e.setLoading(!1)},error:function(e){return alert(e.message)}})},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var o=a.Service.Blog.Module.getCategories();o.length||o.push(new l.BlogCategory({name:__("Sample Category")})),this.fields.tree.setValue(o),this.fields.tree.selectFirst(),e.prototype.setVisible.call(this,t,i,n)},t}(s())},"./blog/BlogEditDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogEditDialog:function(){return b}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./WB_PropertyDialog.class.js"),a=i.n(r),l=i("./UIComponent.ts"),c=i("./BigList.ts"),u=i("./blog/BlogPost.ts"),d=i("./CustomContainer.ts"),h=i("./Service.ts"),p=i("./PagingSelector.ts"),m=i("./UIButton.ts"),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descriptionLength=50,t}return g(t,e),t.prototype.getDescription=function(e){var t=s()("<div>").append(__tr(e)).text();return t?t.substring(0,this.descriptionLength)+(t.length>this.descriptionLength?"...":""):""},t.prototype.getAltText=function(e){var t=[];if(e.dateDate&&e.dateTime?t.push(e.dateDate+" "+e.dateTime):e.createdDate&&/(\d{4}\-\d{2}\-\d{2}\ \d{2}:\d{2}):\d{2}/.test(e.createdDate)&&t.push(RegExp.$1),e.categories.length){for(var i={},n=0,o=h.Service.Blog.Module.getCategories();n<o.length;n++){var s=o[n];i[s.id]=__tr(s.name,"__DEFAULT__")}for(var r=[],a=0,l=e.categories;a<l.length;a++){var c=l[a];c in i&&r.push(i[c])}r.length&&t.push(r.join(", "))}var u=t.join("<br />");return'<div style="font-size: 11px; text-align: right; margin-top: '+(2===t.length?"-6px":"2px")+';">'+u+"</div>"},t.prototype.setList=function(t){for(var i=[],n=0,o=t;n<o.length;n++){var s=o[n],r=__tr(s.title,null);i.push({title:r||"["+__("no name")+"]",description:this.getDescription(__tr(s.text)),thumbnail:s.thumbnail?wb_builder.makeLocalUrl(s.thumbnail):null,altText:this.getAltText(s),data:s})}e.prototype.setValue.call(this,i)},t.prototype.removeByPostId=function(e){for(var t=this.getValue(),i=0;i<t.length;i++)if(t[i].data.id===e){this.removeItem(i);break}},t}(c.BigList),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.buildInit=function(e,t){var i=this;this._elem.addClass("wb-blog-state-chooser"),this.list=s()("<ul>");for(var n=function(e){var t=s()('<li><a><span class="text"></span><span class="badge total"></span></a></li>').attr("data-state",e).on("click",(function(){i.setState(e)}));t.find(".text").text(function(e){switch(e){case u.BlogPost.STATE_ACTIVE:return __("Published");case u.BlogPost.STATE_DRAFT:return __("Draft");case u.BlogPost.STATE_DELETED:return __("Deleted");default:return"[unknown]"}}(e)),o.list.append(t)},o=this,r=0,a=u.BlogPost.getAvailableStates();r<a.length;r++)n(a[r]);this._elem.append(this.list),e.select&&"function"==typeof e.select&&(this.onSelect=e.select),this.setState(u.BlogPost.STATE_ACTIVE,!0)},t.prototype.setState=function(e,t){void 0===t&&(t=!1),this.list.children().removeClass("active"),this.list.children('[data-state="'+e+'"]').addClass("active"),t||"function"!=typeof this.onSelect||this.onSelect.call(this,e)},t.prototype.getCurrentState=function(){return this.list.children(".active").attr("data-state")},t.prototype.setTotal=function(e,t){this.list.children('[data-state="'+e+'"]').find(".total").text(t)},t.prototype.updateTotals=function(e){for(var t in e)this.setTotal(t,e[t])},t.prototype.getTotal=function(e){return parseInt(this.list.children('[data-state="'+e+'"]').find(".total").text())},t.prototype.getTotals=function(){var e={};return this.list.children().each((function(){var t=s()(this);e[t.data("state")]=parseInt(t.find(".total").text())})),e},t}(l.UIComponent),b=function(e){function t(){var t=e.call(this,"",{tabs:[{name:__("Posts"),children:[{type:d.CustomContainer,children:[{type:y,id:"state",select:function(e){t.updateButtons(),t.fields.paging.setPage(1,!0),t.loadPosts()}},{type:"FlowLayout",spacing:0,children:[{type:"Button",icon:"glyphicon glyphicon-trash",id:"deleteButton",buttonStyle:m.UIButton.STYLE_DANGER,click:function(){if(confirm(__("Are you sure? This action is irreversible."))){t.setLoading(!0);for(var e={},i=t.fields.state.getTotals(),n=[],o=0,s=t.fields.list.getSelected();o<s.length;o++){var r=s[o];e[r.data.id]=u.BlogPost.STATE_DELETED,i[r.data.state]--,i[u.BlogPost.STATE_DELETED]++,n.push(r.data.id)}h.Service.Blog.API.updatePostsState(e,{success:function(){t.fields.state.updateTotals(i);for(var e=0,o=n;e<o.length;e++){var s=o[e];t.fields.list.removeByPostId(s)}t.fields.paging.setPage(1,!0),t.loadPosts()},complete:function(){t.setLoading(!1)}})}}},{type:"Button",text:__("New Post"),id:"newButton",icon:"glyphicon glyphicon-plus",buttonStyle:m.UIButton.STYLE_SUCCESS,click:function(){var e=new Date,i=new u.BlogPost({state:t.fields.state.getCurrentState(),dateDate:e.getUTCFullYear()+"-"+(e.getMonth()<10?"0":"")+e.getMonth()+"-"+(e.getDate()<10?"0":"")+e.getDate(),dateTime:(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()});h.Service.Blog.Module.editBlogPost(i,(function(e){t.fields.state.setState(e.state,!0)}))}}]}],init:function(e,t){this.getElem().css({display:"flex","justify-content":"space-between","align-items":"center",padding:"10px 0",height:"34px","box-sizing":"content-box"})}},{type:f,id:"list",checkable:!0,noItemsMessage:__("No items found"),click:function(e){h.Service.Blog.Module.editBlogPost(e.data)},select:function(e){t.updateButtons()}},{type:"VerticalLayout",css:{marginTop:15},children:[{type:p.PagingSelector,id:"paging",change:function(e){t.loadPosts(t.fields.state.getCurrentState(),e)}}]}]}],buttons:[{name:__("Close")},{name:__("Apply"),primary:!0,click:function(){t.setLoading(!0),t.applyData({success:function(){h.Service.Blog.Module.updateAllElements(),t.setVisible(!1)},complete:function(){return t.setLoading(!1)},error:function(e){return alert(e.message)}})}}]})||this;return t.postsPerPage=5,t.setTitle(__("Edit Blog")),t.dialog.addClass("wb-modal-settings"),t.fields.list.getElem().css("min-height","525px"),t.list=[],t}return g(t,e),t.prototype.loadPosts=function(e,t){var i=this;e||(e=this.fields.state.getCurrentState()),t||(t=this.fields.paging.getCurrentPage()),this.fields.paging.setEnabled(!1),this.setLoading(!0),h.Service.Blog.API.loadPosts(e,{success:function(e){i.list=[];for(var t=0,n=e.list;t<n.length;t++){var o=n[t],s=new u.BlogPost;s.deserialize(o),i.list.push(s)}i.fields.list.setList(i.list),i.updateButtons(),i.updatePaging(),i.fields.paging.setEnabled(!0),i.setLoading(!1)}},this.postsPerPage,t)},t.prototype.updateButtons=function(){var e=this.fields.list.getSelectedCount()>0;this.fields.deleteButton.setVisible(e),this.fields.newButton.setVisible(!e)},t.prototype.updatePaging=function(){var e=this.fields.state.getTotals()[this.fields.state.getCurrentState()],t=Math.ceil(e/this.postsPerPage);this.fields.paging.setTotalPages(t),this.fields.paging.setVisible(t>1)},t.prototype.onShow=function(){var e=this;h.Service.Blog.API.getTotals({success:function(t){e.fields.state.updateTotals(t),e.updatePaging(),e.loadPosts()}})},t.prototype.applyData=function(e){e&&e.success&&e.success(),e&&e.complete&&e.complete()},t}(a())},"./blog/BlogEditPostDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogEditPostDialog:function(){return f},CatSelector:function(){return m}});var n,o,s=i("./WB_PropertyDialog.class.js"),r=i.n(s),a=i("./blog/BlogPost.ts"),l=i("./Service.ts"),c=i("./WYSIWYGControl.ts"),u=i("./DropdownBox.ts"),d=i("./blog/BlogCategory.ts"),h=i("./blog/BlogCategoryDialog.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(e){function t(){var t=e.call(this)||this;return t.singleOrNone=!1,t.setEditable(!0),t}return p(t,e),t.prototype.buildInit=function(t,i){e.prototype.buildInit.call(this,t,i),this.singleOrNone=t.singleOrNone,this.onEditStart=t.editStart,this.onEditApplied=t.editApplied,this.singleOrNone&&(this.multiselect=!1,this.setEditable(!1),this.reload())},t.prototype.onEdit=function(e){var t=this;this.onEditStart&&this.onEditStart.call(this),o||(o=new h.BlogCategoryDialog((function(){t.reload(),t.onEditApplied&&t.onEditApplied.call(t)}))),o.setVisible(!0)},t.prototype.reload=function(){this.multiselect=!this.singleOrNone,this.optionsSource=l.Service.Blog.Module.getCategories().map((function(e){return e})),this.singleOrNone&&this.optionsSource.unshift(new d.BlogCategory({name:__("All")})),e.prototype.reload.call(this),this.setMultilevel(!0)},t}(u.DropdownBox),g=null,f=function(e){function t(){var t=e.call(this,"",{tabs:[{name:__("General"),children:[{type:"HorizontalLayout",columnWeights:[3,9],children:[{type:"VerticalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Picture")},{type:"ImageSelector",id:"thumbnail",thumbSize:140}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Title")},{type:"MultilangTextField",id:"title"}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Date")},{type:"TextField",id:"dateDate",init:function(){this.getElem().datepicker({dateFormat:"yy-mm-dd"})}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Time")},{type:"TextField",id:"dateTime",init:function(){this.getElem().attr("type","time")}}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Category")},{type:m,id:"categories",editStart:function(){g=l.Service.Blog.Module.getCategories().map((function(e){return e.id}))},editApplied:function(){if(g){if(t.post){for(var e=[],i=0,n=l.Service.Blog.Module.getCategories().map((function(e){return e.id}));i<n.length;i++){var o=n[i];g.indexOf(o)<0&&e.push(o)}for(var s=0,r=e;s<r.length;s++)o=r[s],t.post.categories.indexOf(o)<0&&t.post.categories.push(o);t.fields.categories.setValue(t.post.categories,!0)}g=null}}}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("State")},{type:"DropdownBox",id:"state",options:[{id:a.BlogPost.STATE_ACTIVE,name:__("Active")},{id:a.BlogPost.STATE_DRAFT,name:__("Draft")}]}]},{type:"CheckBox",css:{marginTop:15},label:__("Add Facebook comments"),id:"fbComments"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Text")},{type:c.WYSIWYGControl,id:"text",textArea:!0,height:480,config:{toolbar:[["Styles","Bold","Italic","Underline","Strike","Subscript","Superscript","Wbcolor","Wbbgcolor","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","WBImage","WBLink","Unlink","Anchor"],["ShowBlocks","WBSourcedialog","|","More","Less"],["Languages"]]}}]}]}]},{name:__("SEO"),children:[{type:"HorizontalLayout",columnWeights:[6,6],children:[{type:"VerticalLayout",spacing:15,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("SEO Title")},{type:"MultilangTextField",id:"seoTitle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("SEO Description")},{type:"MultilangTextField",id:"seoDescription",textArea:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("User friendly URL")},{type:"MultilangTextField",id:"seoAlias"}]}]}]}]}],buttons:[{name:__("Close")},{name:__("Save"),primary:!0,click:function(){t.post&&(t.setLoading(!0),t.applyData(),l.Service.Blog.API.savePost(t.post,{success:function(e){"function"==typeof t.onSave&&t.onSave.call(t,t.post),t.post.state===a.BlogPost.STATE_ACTIVE&&l.Service.Blog.Module.updateAllElements(),t.setVisible(!1)},error:function(e){return alert(e.message)},complete:function(){return t.setLoading(!1)}}))}}]})||this;return t.post=null,t.setTitle(__("Edit Post")),t.dialog.addClass("wb-modal-settings-1200"),t}return p(t,e),t.prototype.onClose=function(){this.post=null,this.onSave=null},t.prototype.setPost=function(e,t){this.post=e,this.onSave=t,this.fields.state.setValue(this.post.state),this.fields.thumbnail.setValue(this.post.thumbnail),this.fields.title.setValue(this.post.title),this.fields.dateDate.setValue(this.post.dateDate),this.fields.dateTime.setValue(this.post.dateTime),this.fields.text.setValue(wb_builder.site.reloadTextTags(this.post.text)),this.fields.categories.setValue(this.post.categories,!0),this.fields.fbComments.setValue(this.post.fbComments),this.fields.seoTitle.setValue(this.post.seoTitle),this.fields.seoDescription.setValue(this.post.seoDescription),this.fields.seoAlias.setValue(this.post.seoAlias),this.fields.seoAlias.setValue(this.post.seoAlias)},t.prototype.applyData=function(){this.post&&(this.post.state=this.fields.state.getValue(),this.post.thumbnail=this.fields.thumbnail.getValue(),this.post.title=this.fields.title.getValue(),this.post.dateDate=this.fields.dateDate.getValue(),this.post.dateTime=this.fields.dateTime.getValue(),this.post.text=this.fields.text.getValue(),this.post.categories=this.fields.categories.getValue(!0),this.post.fbComments=this.fields.fbComments.getValue(),this.post.seoTitle=this.fields.seoTitle.getValue(),this.post.seoDescription=this.fields.seoDescription.getValue(),this.post.seoAlias=this.fields.seoAlias.getValue())},t}(r())},"./blog/BlogLayout.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogLayout:function(){return n}});var n=function(){function e(){}return e.getAvailableTypes=function(){return[this.TYPE_THUMBS,this.TYPE_LIST,this.TYPE_ONETHREE]},e.TYPE_THUMBS="thumbs",e.TYPE_LIST="list",e.TYPE_ONETHREE="onethree",e}()},"./blog/BlogModule.ts":function(e,t,i){"use strict";i.r(t);var n=i("./blog/BlogEditDialog.ts"),o=i("./blog/BlogEditPostDialog.ts"),s=i("./Service.ts"),r=i("./blog/BlogService.ts"),a=i("./blog/BlogCategory.ts"),l=i("./blog/BlogStyles.ts"),c=new r.BlogService(!1),u=new r.BlogService(!0),d=function(){function e(e){this.elemList=[],this.data=null,this.api=e}return e.prototype.editBlog=function(){this.editDialog||(this.editDialog=new n.BlogEditDialog),this.editDialog.show()},e.prototype.editBlogPost=function(e,t){this.editPostDialog||(this.editPostDialog=new o.BlogEditPostDialog),this.editPostDialog.setPost(e,t),this.editPostDialog.show()},e.prototype.getCategories=function(){return this.data.categories},e.prototype.setCategories=function(e,t,i){void 0===t&&(t=!1),this.data.categories=e,t&&this.api.saveCategories(this.data.categories,i)},e.prototype.getStyles=function(){return this.data.styles},e.prototype.setStyles=function(e,t,i){void 0===t&&(t=!1),this.data.styles=e,t&&this.api.saveStyles(this.data.styles,i)},e.prototype.load=function(e){var t=this;this.data?e&&e.success&&e.success():(e||(e={}),r.BlogService.mergeCallbacks(e,{success:function(e){t.data.categories=[];for(var i=0,n=e.categories;i<n.length;i++){var o=n[i];t.data.categories.push(new a.BlogCategory(o))}t.data.styles=new l.BlogStyles(e.styles)}}),this.data={},this.api.loadData(e))},e.prototype.updateAllElements=function(){for(var e=0,t=this.elemList;e<t.length;e++){var i=t[e];i.reset(),i.updateStyle()}},e.prototype.resetData=function(){this.data=null},e}();s.Service.Blog={Module:new d(c),API:c},s.Service.BlogForCompositions={Module:new d(u),API:u}},"./blog/BlogPost.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogPost:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.title="",i.text="",i.state="draft",i.categories=[],i.fbComments=!1,i.seoTitle="",i.seoDescription="",i.seoAlias="",i.deserialize(t),i.dateDate&&i.dateTime||!i.createdDate||!/(\d{4}\-\d{2}\-\d{2})\ (\d{2}:\d{2})/.test(i.createdDate)||(i.dateDate=RegExp.$1,i.dateTime=RegExp.$2),i}return s(t,e),t.getAvailableStates=function(){return[t.STATE_ACTIVE,t.STATE_DRAFT]},t.STATE_ACTIVE="active",t.STATE_DRAFT="draft",t.STATE_DELETED="deleted",t}(o.Serializable)},"./blog/BlogPropertyDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{LayoutSelector:function(){return y},build:function(){return v},updateData:function(){return C}});var n,o,s,r,a=i("./lib/jquery-1.11.3.min.js"),l=i.n(a),c=i("./UIComponent.ts"),u=i("./core/BuilderConfig.ts"),d=i("./SizeSelector.ts"),h=i("./blog/BlogLayout.ts"),p=i("./TextControl.ts"),m=i("./ColorPicker.ts"),g=i("./blog/BlogEditPostDialog.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.buildInit=function(e,t){var i,n,o=this;this._elem.addClass("wb-blog-layout-selector wb-blog-layout-selector-large"),this._elem.append(l()('<div class="heading">').text(__("Choose Your Blog Layout style"))),this.list=l()('<div class="layout-list">');for(var s=this,r=0,a=h.BlogLayout.getAvailableTypes();r<a.length;r++)i=a[r],n=void 0,(n=l()('<div class="layout layout-'+i+'"><span></span></div>').attr("data-layout",i).attr("title",s.getLayoutName(i))).children("span").css("background-image","url("+s.getLayoutIcon(i)+")"),function(e){n.on("click",(function(){o.setValue(e),o.onValueChanged()}))}(i),s.list.append(n);this._elem.append(this.list),"function"==typeof e.change&&(this.onChange=e.change)},t.prototype.getLayoutName=function(e){switch(e){case h.BlogLayout.TYPE_THUMBS:return __("Thumbnails");case h.BlogLayout.TYPE_LIST:return __("List");case h.BlogLayout.TYPE_ONETHREE:return __("One-three")}return e},t.prototype.getLayoutIcon=function(e){return u.wbConfig.baseUrl+wb_builder.modBaseUrl+"js/blog/img/layout-"+e+".svg"},t.prototype.getValue=function(){return this.list.children(".active").attr("data-layout")},t.prototype.setValue=function(e){this.list.children().removeClass("active"),this.list.children('[data-layout="'+e+'"]').addClass("active"),this.onChange&&this.onChange.call(this,e)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setIsSmall=function(e){e?(this._elem.removeClass("wb-blog-layout-selector-large"),this._elem.addClass("wb-blog-layout-selector-small")):(this._elem.addClass("wb-blog-layout-selector-large"),this._elem.removeClass("wb-blog-layout-selector-small"))},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"small"in t&&this.setIsSmall(!!t.small)},t}(c.UIComponent),b={tabs:[{name:__("Layout"),children:[{type:y,id:"layout",change:function(){return _()}}]},{name:__("Settings"),children:[{type:"HorizontalLayout",columnWeights:[4],columnWeightsSmall:[4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Category")},{type:g.CatSelector,id:"category",singleOrNone:!0}]}]},{type:"HorizontalLayout",children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Items per page")},{type:d.SizeSelector,min:1,max:99,id:"itemsPerPage"}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"displayTitle",label:__("Display title")},{type:"CheckBox",id:"displayDate",label:__("Display date")},{type:"CheckBox",id:"displayShortText",label:__("Display description"),change:function(){return _()}},{type:"CheckBox",id:"useThumbnails",label:__("Use thumbnails"),change:function(){return _()}}]},{type:"VerticalLayout",css:{marginTop:15},id:"shortTextLengthBlock",children:[{type:"Label",text:__("Description length")+" ("+__("symbols")+")"},{type:d.SizeSelector,id:"shortTextLength",min:5,max:999}]}]},{type:"HorizontalLayout",children:[{type:"VerticalLayout",css:{marginTop:15},id:"thumbsSizeBlock",children:[{type:"Label",text:__("Thumbnail Size")},{type:"FlowLayout",verticalAlign:"middle",spacing:5,children:[{type:d.SizeSelector,id:"thumbWidth",min:10,repeat:!1},{type:"Label",html:"&times;",id:"thumbSizeTimesLabel",css:{fontWeight:"normal",fontSize:18}},{type:"Label",text:__("Height")+":",id:"thumbSizeHeightLabel",css:{fontWeight:"normal"}},{type:d.SizeSelector,id:"thumbHeight",min:10,repeat:!1}]}]},{type:"VerticalLayout",css:{marginTop:15},id:"thumbsPaddingBlock",children:[{type:"Label",text:__("Thumb padding (px)")},{type:d.SizeSelector,id:"thumbPadding",min:0,max:999,repeat:!1}]},{type:"VerticalLayout",css:{marginTop:15},id:"captionBackgroundBlock",children:[{type:"Label",text:__("Caption Background")},{type:m.ColorPicker,id:"captionBackground"}]}]},{type:"VerticalLayout",css:{marginTop:15},id:"thumbAlignBlock",children:[{type:"Label",text:__("Align")},{type:"HAlignSelector",id:"thumbAlign",justify:!1}]}]},{name:__("Style"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Title")},{type:p.TextControl,id:"titleStyle",horizontal:!0,needLineHeight:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Description")},{type:p.TextControl,id:"descriptionStyle",horizontal:!0,needLineHeight:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Date")},{type:p.TextControl,id:"dateStyle",horizontal:!0,needLineHeight:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Background")},{type:m.ColorPicker,id:"background"}]}]}],callbackFunc:function(){!function(){var e=o.getProperty("data");null==e||e.triggerBeforeChange(o,!0);var t=s();t.content.layout=r.layout.getValue(),t.content.itemsPerPage=r.itemsPerPage.getValue(),t.content.thumbWidth=r.thumbWidth.getValue(),t.content.thumbHeight=r.thumbHeight.getValue(),t.content.thumbAlign=r.thumbAlign.getValue(),t.content.thumbPadding=r.thumbPadding.getValue(),t.content.captionBackground=r.captionBackground.getValue(),t.content.titleStyle=r.titleStyle.getValue(),t.content.descriptionStyle=r.descriptionStyle.getValue(),t.content.dateStyle=r.dateStyle.getValue(),t.content.background=r.background.getValue(),t.content.displayShortText=r.displayShortText.getValue(),t.content.shortTextLength=r.shortTextLength.getValue(),t.content.displayTitle=r.displayTitle.getValue(),t.content.displayDate=r.displayDate.getValue(),t.content.category=r.category.getValue(),t.content.useThumbnails=r.useThumbnails.getValue(),o.updateStyle(),null==e||e.triggerChange(o,!0)}()}};function v(e,t){return o=e,s=t,b}function _(){r.layout.getValue()===h.BlogLayout.TYPE_ONETHREE?(r.thumbWidth.setVisible(!1),r.thumbSizeTimesLabel.setVisible(!1),r.thumbSizeHeightLabel.setVisible(!0),r.thumbAlignBlock.setVisible(!1)):(r.thumbWidth.setVisible(!0),r.thumbSizeTimesLabel.setVisible(!0),r.thumbSizeHeightLabel.setVisible(!1),r.thumbAlignBlock.setVisible(!0)),r.displayShortText.getValue()?r.shortTextLengthBlock.setVisible(!0):r.shortTextLengthBlock.setVisible(!1);var e=r.useThumbnails.getValue();r.thumbsSizeBlock.setVisible(e),r.thumbAlignBlock.setVisible(e),r.thumbsPaddingBlock.setVisible(e)}function C(e){r=e;var t=s();r.layout.setValue(t.content.layout),r.itemsPerPage.setValue(t.content.itemsPerPage),r.thumbWidth.setValue(t.content.thumbWidth),r.thumbHeight.setValue(t.content.thumbHeight),r.thumbAlign.setValue(t.content.thumbAlign),r.thumbPadding.setValue(t.content.thumbPadding),r.captionBackground.setValue(t.content.captionBackground),r.titleStyle.setValue(t.content.titleStyle),r.descriptionStyle.setValue(t.content.descriptionStyle),r.dateStyle.setValue(t.content.dateStyle),r.background.setValue(t.content.background),r.displayShortText.setValue(t.content.displayShortText),r.shortTextLength.setValue(t.content.shortTextLength),r.displayTitle.setValue(t.content.displayTitle),r.displayDate.setValue(t.content.displayDate),r.category.reload(),r.category.setValue(t.content.category),r.useThumbnails.setValue(t.content.useThumbnails),_()}},"./blog/BlogService.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogService:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(e){e&&e({code:-1,message:"An error occurred. Please try again later."})},r=function(){function e(e){this.isUsedForCompositions=e}return e.prototype.init=function(e){this.wbConfig=e},e.prototype.getUrl=function(e,t){var i="blog/"+e;return this.isUsedForCompositions&&(t||(t={}),t.comp="1"),this.wbConfig?this.wbConfig.getLnUrl(i,t):i},e.prototype.cancelRequests=function(){for(var t in e.activeRequests)e.activeRequests.hasOwnProperty(t)&&(e.activeRequests[t].xhr.abort(),delete e.activeRequests[t])},e.prototype.loadPosts=function(t,i,n,r,a){var l="load-posts:"+t+":"+n+":"+r+":"+a;if(e.activeRequests.hasOwnProperty(l))i&&e.activeRequests[l].callbacks.push(i);else{var c=this.getUrl("load-posts",{state:t||"",cpp:n?""+n:"",page:r?""+r:"",category:a?""+a:""});e.activeRequests[l]={xhr:o().ajax({url:c,type:"get",dataType:"json",async:!0,success:function(t){if(e.activeRequests.hasOwnProperty(l))if(t.error)for(var i=0,n=e.activeRequests[l].callbacks;i<n.length;i++){var o=n[i];o.error&&o.error(t.error)}else if(t.ok&&t.data)for(var s=0,r=e.activeRequests[l].callbacks;s<r.length;s++){var a=r[s];a.success&&a.success(t.data)}},error:function(){if(e.activeRequests.hasOwnProperty(l))for(var t=0,i=e.activeRequests[l].callbacks;t<i.length;t++){var n=i[t];n.error&&s(n.error)}},complete:function(){if(e.activeRequests.hasOwnProperty(l)){for(var t=0,i=e.activeRequests[l].callbacks;t<i.length;t++){var n=i[t];n.complete&&n.complete()}delete e.activeRequests[l]}}}),callbacks:i?[i]:[]}}},e.prototype.saveCategories=function(e,t){o().ajax({url:this.getUrl("save-categories"),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({categories:e}),success:function(e){e.error?t&&t.error&&t.error(e.error):e.ok&&t&&t.success&&t.success()},error:function(){t&&t.error&&s(t.error)},complete:function(){t&&t.complete&&t.complete()}})},e.prototype.saveStyles=function(e,t){o().ajax({url:this.getUrl("save-styles"),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({styles:e}),success:function(e){e.error?t&&t.error&&t.error(e.error):e.ok&&t&&t.success&&t.success()},error:function(){t&&t.error&&s(t.error)},complete:function(){t&&t.complete&&t.complete()}})},e.prototype.getTotals=function(e){o().getJSON(this.getUrl("get-totals"),(function(t){t.error?e&&e.error&&e.error(t.error):t.ok&&t.totals&&e&&e.success&&e.success(t.totals)})).fail((function(){e&&e.error&&s(e.error)})).done((function(){e&&e.complete&&e.complete()}))},e.prototype.updatePostsState=function(e,t){o().ajax({url:this.getUrl("update-posts-state"),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({states:e}),success:function(e){e.error?t&&t.error&&t.error(e.error):e.ok&&t&&t.success&&t.success()},error:function(){t&&t.error&&s(t.error)},complete:function(){t&&t.complete&&t.complete()}})},e.prototype.savePost=function(e,t){o().ajax({url:this.getUrl("save-post"),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(e.serialize()),success:function(e){e.error?t&&t.error&&t.error(e.error):e.ok&&e.id&&t&&t.success&&t.success(e.id)},error:function(){t&&t.error&&s(t.error)},complete:function(){t&&t.complete&&t.complete()}})},e.prototype.loadData=function(e){o().getJSON(this.getUrl("load-data"),(function(t){t.error?e&&e.error&&e.error(t.error):t.ok&&t.data&&e&&e.success&&e.success(t.data),e&&e.complete&&e.complete()})).fail((function(){e&&e.error&&s(e.error)})).done((function(){e&&e.complete&&e.complete()}))},e.mergeCallbacks=function(e,t){if(t.success)if(e.success){var i=e.success;e.success=function(){i(arguments),t.success.apply(this,arguments)}}else e.success=t.success;if(t.error)if(e.error){var n=e.error;e.error=function(e){n(e),t.error.call(this,e)}}else e.error=t.error;if(t.complete)if(e.complete){var o=e.complete;e.complete=function(){o(),t.complete.call(this)}}else e.complete=t.complete;return e},e.activeRequests={},e}()},"./blog/BlogStyles.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlogStyles:function(){return c}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Serializable.ts"),a=i("./TextControl.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t){var i,n=e.call(this)||this,o={},r=wb_builder.site.styles;for(i=0;i<r.length;i++)if(".wb-stl-normal"===r[i].selector){var l=r[i].sys.text||{};o=a.TextControl.buildCss({color:l.color,size:l.size,font:l.font,style:{}})}return t.title?n.title=t.title:(n.title=s().extend(!0,{},o),n.title.style.bold=!0,n.title=a.TextControl.buildCss(n.title)),n.text=t.text?t.text:o,n.background=t.background?t.background:"transparent",n}return l(t,e),t}(r.Serializable)},"./core/BuilderConfig.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{applyConfig:function(){return o},wbConfig:function(){return n}});var n=new(function(){function e(){this.adminMode=!1,this.devTestMode=!1,this.devDebugMode=!1,this.testMode=!1,this.commerceAvailable=!1,this.unbrandedTestMode=!1,this.isModRewrite=!0,this.routeGetKey="route",this.httpProtocol=location.protocol&&"https:"===location.protocol?"https":"http",this.baseUrl="",this.lnBaseUrl="",this.upgradeUrl="",this.flowUrl="",this.jsLibsPath="",this.loginHash="",this.secureToken="",this.sessUniqKey="",this.isB2C=!1,this.b2cDomainsUrl="",this.b2cDomainRegisterUrl="",this.premiumButtonType="",this.whiteLabel={builder:!1,title:null,logo:null,defaultLogo:null},this.hideImport=!1,this.enableImport=!1,this.websiteImportStatus=null,this.importVerification={required:!1,usesApi:!1},this.defaultImagePixelDensity=1,this.locale="",this.langCode="",this.availableLanguages=[],this.availableLanguagesIndex=null}return e.prototype.getLanguageByLocale=function(e){if(!e)return null;for(var t=0,i=void 0;i=this.availableLanguages[t];t++)if(i.locale===e)return i;return null},e.prototype.getLanguageByCode=function(e){if(!e)return null;for(var t=0,i=void 0;i=this.availableLanguages[t];t++)if(i.code===e)return i;return null},e.prototype.getCountryCode=function(e){for(var t=0,i=void 0;i=this.availableLanguages[t];t++)if(i.code===e)return"us"===i.countryCode?"gb":"cs"===i.countryCode?"rs":"ct"===i.countryCode?"es-ct":"gb"===i.countryCode?"gb-wls":"gl"===i.countryCode?"gal":"ae"===i.countryCode?"eg":"myv"===i.code?"ru-mo":i.countryCode;return e},e.prototype.getLanguageCodeIndex=function(){if(!this.availableLanguagesIndex){this.availableLanguagesIndex={};for(var e=0,t=void 0;t=n.availableLanguages[e];e++)t.code&&(this.availableLanguagesIndex[t.code]=t)}return this.availableLanguagesIndex},e.prototype.getUrl=function(e,t,i,n,o){return this.baseUrl+this.getUri(e,t,i,n,o)},e.prototype.getLnUrl=function(e,t,i,n,o){return this.lnBaseUrl+this.getUri(e,t,i,n,o)},e.prototype.getUri=function(e,t,i,n,o){var s="";t&&"object"==typeof t||(t={}),this.isModRewrite?s+=e||"":this.routeGetKey&&(t[this.routeGetKey]=e,s+="?"+this.routeGetKey+"="+e),i||(t.ts=""+(new Date).getTime()),n||(t.lh=this.loginHash,t.st=this.secureToken),o||(t.sess=this.sessUniqKey);var r=[];for(var a in t)r.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));var l=r.join("&");return l.length>0&&(s+=(s.indexOf("?")>=0?"&":"?")+l),s},e}());function o(e){for(var t in e)t in n&&"function"!=typeof n[t]&&(n[t]=e[t])}},"./core/SitePage.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Page:function(){return o}});var n=i("./Service.ts"),o=function(){function e(e){this.site=null,this.id=parseInt(""+e.id,10),this.isFront=!!e.isFront,this.isSingle=!!e.isSingle,this.title=e.title||"",this.alias=e.alias||"",this.keywords=e.keywords||"",this.description=e.description||"",this.image=e.image||null,this.noindex=!!e.noindex,this.copyFrom=e.copyFrom||null,this.copyClearHeader=e.copyClearHeader||null,this.copyClearBody=e.copyClearBody||null,this.copyClearFooter=e.copyClearFooter||null,this.blocks=e.blocks||{},this.importedFromUrl=e.importedFromUrl||null,this.landing=!!e.landing,this.landingOrder=e.landingOrder||0,this.fixedHeader=e.fixedHeader||!1,this.noPageBg=e.noPageBg||!1,this.miId=e.miId||null,this.miId||this.reloadMiId(),this.background=e.background||{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this.background2=e.background2||{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}},this.popupMode=!!e.popupMode,this.popupWidth=e.popupWidth||null,this.popupHeight=e.popupHeight||null,this.openPopupPageId=e.openPopupPageId||null,this.headSnippetsHtml=e.headSnippetsHtml||"",this.bodySnippetsHtml=e.bodySnippetsHtml||"",this.bodyStartSnippetsHtml=e.bodyStartSnippetsHtml||""}return e.prototype.serialize=function(){return{id:this.id,isFront:!!this.isFront,isSingle:!!this.isSingle,title:this.title,alias:this.alias,keywords:this.keywords,description:this.description,image:this.image||void 0,noindex:!!this.noindex,background:this.background,background2:this.background2,copyFrom:this.copyFrom,copyClearHeader:this.copyClearHeader||void 0,copyClearBody:this.copyClearBody||void 0,copyClearFooter:this.copyClearFooter||void 0,landing:this.landing,landingOrder:this.landingOrder,fixedHeader:this.fixedHeader,importedFromUrl:this.importedFromUrl||void 0,noPageBg:this.noPageBg,miId:this.miId||void 0,popupMode:!!this.popupMode,popupWidth:this.popupWidth||void 0,popupHeight:this.popupHeight||void 0,openPopupPageId:this.openPopupPageId||void 0,headSnippetsHtml:this.headSnippetsHtml||void 0,bodySnippetsHtml:this.bodySnippetsHtml||void 0,bodyStartSnippetsHtml:this.bodyStartSnippetsHtml||void 0}},e.prototype.reloadMiId=function(e){if(void 0===e&&(e=!1),!this.miId||e){var t=function(e,i){if(!i||!i.items)return null;var n,o;for(var s in i.items){if("page"===(n=i.items[s]).type&&n.targetId==e)return n;if(o=t(e,n))return o}return null},i=n.default.menu.getElemList(!0),o=void 0;for(var s in i){var r=i[s];if(o=t(this.id,r))return void(this.miId=r.menuUID+"_"+o.id)}}},e.prototype.setLanding=function(e,t){this.landing=!!e,this.landingOrder=t},e}()},"./element/Controls.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CloneMode:function(){return a.CloneMode},Controls:function(){return g},ControlsResizeMode:function(){return a.ControlsResizeMode},isDoingResize:function(){return m}});var n=i("./CommonTypes.ts"),o=i("./element/ControlsButton.ts"),s=i("./element/ControlsSelectionBorder.ts"),r=i("./util/EventUtil.ts"),a=i("./element/ControlsSelection.ts"),l=i("./lib/jquery-1.11.3.min.js"),c=i.n(l),u=i("./element/ControlsMinMax.ts"),d=function(){return d=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},h=null,p=!1;function m(){return(0,a.isDoingResize)()||(0,s.isDoingResize)()}var g=function(){function e(e,t,i,o){void 0===e&&(e=!1),void 0===t&&(t=!0);var s=this;this.valueChangeHandler=i,this.onSelectionChange=o,this.parent=null,this.muted=!1,this.outlineActive=!1,this.resizeMode=a.ControlsResizeMode.ALL,this.buttons=[],this.covered=!1,this.locked=!1,this.compact=!1,this.lockedBtn=null,this.lockedBtn2=null,this.lockedUnlockFn=null,this.lockedOpts={timeout:0,tooltipShown:!1,isDown:!1,highlight:function(){!s.lockedOpts.tooltipShown&&s.lockedBtn&&(s.lockedBtn.elem.tooltip("show"),s.lockedOpts.timeout&&clearTimeout(s.lockedOpts.timeout),s.lockedOpts.timeout=setTimeout((function(){s.lockedBtn&&(s.lockedBtn.elem.tooltip("hide"),s.lockedOpts.tooltipShown=!1)}),3e3))},canceler:function(e){return s.lockedOpts.isDown=!0,e.stopPropagation(),e.preventDefault(),!1},unlocker:function(){return"function"==typeof s.lockedUnlockFn&&s.lockedUnlockFn(),!1},upper:function(){s.lockedOpts.isDown=!1},mover:function(){s.lockedOpts.isDown&&(s.setSelected(!0),s.setVisible(!0),s.lockedOpts.highlight(),s.lockedOpts.tooltipShown=!0)}},this.debugLines=null,this.debugLinesVisible=!1,this.debugLinesHierarchyLevel=0,this.debugLinesAbsolute=!1,this.lastEventType="",this.lastEventTime=0,this.lastEventSkippedType="",this.lastEventSkippedTime=0,this.alignment={h:n.FlexAlignItems.Center,v:n.FlexAlignItems.Center},this.padding=null,this.margin=null,this.parentMargin=null,this.inConstruction=!0,this.elem=c()("<div>").addClass("wb_controls").css({zIndex:10}),e&&(this.outlineElem=c()("<div>").addClass("wb_elem_outline").appendTo(this.elem)),this.elem.append(this.cover=c()("<div>").addClass("wb_cover")),this.covered=!t,this.setCoverEnabled(t),this.visible=!1,this.setVisible(!0),this.outlineVisible=!0,this.setOutlineVisible(!1),this.selected=!0,this.setSelected(!1),this.hover=!0,this.setHover(!1),this.resizeHandlesVisible=!0,this.setResizeHandlesVisible(!1),this.buttonsVisible=!0,this.setButtonsVisible(!1),this.cloneMode=a.CloneMode.ALL,this.setCloneMode(a.CloneMode.NONE),this.parentMarginsVisible=!0,this.setParentMarginsVisible(!1),this.bounds={left:0,top:0,width:0,height:0,left1:0,top1:0,left2:0,top2:0,pageLeft:0,pageTop:0},this.elem.on("mousemove",(function(){return s.setHover(!0)})),p||(p=!0,c()(document).on("mousemove",(function(e){var t=e.target&&e.target.className;h&&t&&t.indexOf("wb_controls")<0&&t.indexOf("sel-padding-top")<0&&t.indexOf("sel-padding-right")<0&&t.indexOf("sel-padding-bottom")<0&&t.indexOf("sel-padding-left")<0&&t.indexOf("wb_cover")<0&&h.setHover(!1)}))),this.inConstruction=!1,this.minMax=new u.ControlsMinMax(this.elem)}return e.prototype.setInteractHandler=function(e,t){var i=this;void 0===t&&(t=!1);var n=null;this.elem.parent().on("mousedown touchstart",(function(t){if(m()||0!==t.button&&void 0!==t.button)return t.stopPropagation(),t.stopImmediatePropagation(),void t.preventDefault();"mousedown"==t.type&&"touchstart"==i.lastEventType&&Date.now()-i.lastEventTime<100||(i.lastEventType=t.type,i.lastEventTime=Date.now(),n=t,e(t,!0))})),this.elem.parent().on("mouseup touchend"+(t?" click":""),(function(t){if(m()||0!==t.button&&void 0!==t.button)return i.lastEventSkippedType=t.type,void(i.lastEventSkippedTime=Date.now());"click"==t.type&&("mouseup"==i.lastEventSkippedType||"touchend"==i.lastEventSkippedType)&&Date.now()-i.lastEventSkippedTime<100?t.stopPropagation():"mouseup"==t.type&&"touchend"==i.lastEventType&&Date.now()-i.lastEventTime<100||(i.lastEventType=t.type,i.lastEventTime=Date.now(),n=null,e(t,!1))})),t&&this.elem.parent().on("mousemove touchmove",(function(t){m()||"mousemove"==t.type&&"touchmove"==i.lastEventType&&Date.now()-i.lastEventTime<100||(i.lastEventType=t.type,i.lastEventTime=Date.now(),n&&((0,r.moveEventDiff)(n,t)<=4||e(t,!1)))}))},e.prototype.setCloneHandler=function(e){this.cloneHandler=e,this.selection&&this.selection.setCloneHandler(e)},e.prototype.setCloneMode=function(e){this.cloneMode!=e&&(this.cloneMode=e,this.selection&&this.selection.setCloneMode(e))},e.prototype.setAlignment=function(e,t){this.alignment.h=e,this.alignment.v=t,this.selection&&this.selection.setAlignment(this.alignment.h,this.alignment.v)},e.prototype.setCoverEnabled=function(e){this.covered!=e&&(this.covered=e,e?this.cover.show():this.cover.hide())},e.prototype.isDebugLinesVisible=function(){return this.debugLinesVisible},e.prototype.setDebugLinesVisible=function(e){this.debugLinesVisible!=e&&(this.debugLinesVisible=e,e?(this.debugLines||(this.debugLines=c()("<div>").addClass("wb-debug-lines wb-debug-lines-dashed"),this.updateDebugLines(this.debugLinesHierarchyLevel,this.debugLinesAbsolute,!0),this.parent?this.parent.append(this.debugLines):this.elem.append(this.debugLines)),this.debugLines.show(),this.setHover(!0)):this.debugLines&&this.debugLines.hide())},e.prototype.updateDebugLines=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),(this.debugLinesHierarchyLevel!=e||this.debugLinesAbsolute!=t||i)&&(this.debugLinesHierarchyLevel=e,this.debugLinesAbsolute=t)},e.prototype.setResizeMode=function(e){this.resizeMode!=e&&(this.resizeMode=e,this.selection&&this.selection.setResizeMode(e))},e.prototype.updatePadding=function(e){this.padding=e?d({},e):null,this.selection&&this.selection.updatePadding(this.padding)},e.prototype.updateMargin=function(e){this.margin=e?d({},e):null,this.selection&&this.selection.updateMargin(this.margin)},e.prototype.updateParentMargin=function(e){this.parentMargin=e?d({},e):null,this.selection&&this.selection.updateParentMargin(this.parentMargin)},e.prototype.handleResize=function(e,t){void 0===e&&(e=!1),this.selection&&this.selection.handleResize(e,t)},e.prototype.setResizeHandlesVisible=function(e,t){void 0===t&&(t=!1),!e||this.resizeHandlesVisible&&!t?e||!this.resizeHandlesVisible&&!t||(this.resizeHandlesVisible=!1,this.selection&&this.selection.setResizeHandlesVisible(!1,t)):(this.resizeHandlesVisible=!0,this.selection&&this.selection.setResizeHandlesVisible(!0,t))},e.prototype.addButton=function(e){return this.buttons.indexOf(e)<0&&(this.buttons.push(e),this.parent?this.parent.append(e.elem):this.elem.append(e.elem),e.setVisible(this.buttonsVisible)),this},e.prototype.setButtonsVisible=function(e){if(this.buttonsVisible!=e){this.buttonsVisible=e;for(var t=0,i=this.buttons;t<i.length;t++){var n=i[t];n.isActive()&&n.setVisible(e)}this.selection&&this.selection.setButtonsVisible(e),this.setButtonsCompact(this.compact)}},e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(e){e&&!this.selected?(this.selected=!0,this.setPaddingsVisible(!0),this.setMarginsVisible(!0),this.selectionAttach(),!this.inConstruction&&this.onSelectionChange&&this.onSelectionChange(this.selection||null),this.hover||this.elem.css("opacity",1),this.setResizeHandlesVisible(!0),this.setButtonsVisible(!0)):!e&&this.selected&&(this.selected=!1,this.selectionDetach(),!this.inConstruction&&this.onSelectionChange&&this.onSelectionChange(this.selection||null),this.hover||this.elem.css("opacity",0),this.setResizeHandlesVisible(!1),this.setButtonsVisible(!1))},e.prototype.setPaddingsVisible=function(e){e&&!this.paddingsVisible?this.paddingsVisible=!0:!e&&this.paddingsVisible&&(this.paddingsVisible=!1)},e.prototype.setMarginsVisible=function(e){e&&!this.marginsVisible?this.marginsVisible=!0:!e&&this.marginsVisible&&(this.marginsVisible=!1)},e.prototype.setParentMarginsVisible=function(e){e&&!this.parentMarginsVisible?(this.parentMarginsVisible=!0,this.selectionAttach(),this.setOutlineVisible(!1),this.hover||this.elem.css("opacity",1),this.setResizeHandlesVisible(!1),this.setButtonsVisible(!1)):!e&&this.parentMarginsVisible&&(this.parentMarginsVisible=!1,this.selectionDetach(),this.setOutlineVisible(!1),this.hover||this.elem.css("opacity",0),this.setResizeHandlesVisible(!1),this.setButtonsVisible(!1))},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(e){e&&!this.visible?(this.visible=!0,this.elem.show()):!e&&this.visible&&(this.visible=!1,this.elem.hide())},e.prototype.setHover=function(e){var t,i;e&&!this.hover?(this.hover=!0,h&&h!==this&&h.setHover(!1),h=this,this.setOutlineVisible(!0),this.setPaddingsVisible(!0),this.setMarginsVisible(!0),this.selectionAttach(),this.selected||this.parentMarginsVisible||this.elem.css("opacity",1),this.selected||this.setResizeHandlesVisible(!1)):!e&&this.hover&&(this.hover=!1,h===this&&(h=null),this.setOutlineVisible(!1),this.setPaddingsVisible(!1),null===(t=this.selection)||void 0===t||t.setPaddingVisible(this.paddingsVisible),this.setMarginsVisible(!1),null===(i=this.selection)||void 0===i||i.setMarginVisible(this.marginsVisible),this.selected||this.parentMarginsVisible||!this.selection||this.selectionDetach(),this.selected||this.parentMarginsVisible||this.elem.css("opacity",0),this.selected||this.setResizeHandlesVisible(!1))},e.prototype.setMuted=function(e){this.cover&&this.muted!=e&&(this.muted=e,e?(this.cover.css({backgroundColor:"#aaaaaa",opacity:.7}),this.covered||this.cover.show()):(this.covered||this.cover.hide(),this.cover.css({backgroundColor:"",opacity:""})))},e.prototype.ensureLockedBtn=function(){if(!this.lockedBtn)for(var e=0,t=this.buttons;e<t.length;e++){var i=t[e];i.align==o.ControlsButtonAlign.LEFT_TOP?i.elem.hasClass("wb_move_btn")&&(this.lockedBtn=i):i.align==o.ControlsButtonAlign.RIGHT_TOP&&i.elem.hasClass("wb_lang_label")&&(this.lockedBtn2=i)}},e.prototype.setLocked=function(e,t){var i=this;void 0===t&&(t=null),!this.locked&&e?(this.locked=!0,this.lockedUnlockFn="function"==typeof t?t:function(){return i.setLocked(!1)},this.ensureLockedBtn(),this.lockedBtn&&(this.lockedBtn.setLocked(!0),this.lockedBtn.elem.on("mousedown",this.lockedOpts.canceler),this.lockedBtn.elem.on("click",this.lockedOpts.unlocker),this.lockedBtn2&&this.lockedBtn2.elem.on("mousedown",this.lockedOpts.canceler))):this.locked&&!e&&(this.locked=!1,this.ensureLockedBtn(),this.lockedBtn&&(this.lockedBtn.setLocked(!1),this.lockedBtn.elem.off({mousedown:this.lockedOpts.canceler,click:this.lockedOpts.unlocker}),this.lockedBtn2&&this.lockedBtn2.elem.off({mousedown:this.lockedOpts.canceler}),this.cover&&this.cover.off({mousedown:this.lockedOpts.canceler,mouseup:this.lockedOpts.upper,mousemove:this.lockedOpts.mover})))},e.prototype.setOutlineVisible=function(e){e&&!this.outlineVisible?(this.outlineVisible=!0,this.outlineElem.show()):!e&&this.outlineVisible&&(this.outlineVisible=!1,this.outlineElem.hide())},e.prototype.setOutlineActive=function(e){this.outlineElem&&(!this.outlineActive&&e?(this.setButtonsVisible(!1),this.setHover(!0),this.outlineElem.addClass("wb_elem_outline_active"),this.outlineActive=!0):this.outlineActive&&!e&&(this.setHover(!1),this.outlineElem.removeClass("wb_elem_outline_active"),this.outlineActive=!1))},e.prototype.setButtonsCompact=function(e){this.compact=e;var t=!1;if(wb_builder.body){var i=wb_builder.body.offset();t=this.elem.offset().top<i.top+24}for(var n={},s=0,r=this.buttons;s<r.length;s++){var a=r[s];if(a.isActive()&&a.isVisible()&&a.isCurrentlyVisible()){var l=e?o.ControlsButtonAlign.LEFT_TOP:a.align;l in n?n[l]++:n[l]=0,a.updateAlign(e,n[l],t)}}},e.prototype.layout=function(){return this.setButtonsCompact(!1),this},e.prototype.onDblClick=function(e){if(c().browser.chrome){var t=0,i=0;this.elem.bind("click",(function(n){1==++t?i=setTimeout((function(){return t=0}),400):2===t&&(clearTimeout(i),t=0,e(n))}))}else this.elem.bind("dblclick",e)},e.prototype.updateBoundsFromElements=function(e,t){void 0===t&&(t=!1);for(var i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,r=null,a=0,l=0,c=e;l<c.length;l++){var u=c[l];if(!u.isHidden()&&!u.isHidden(!0)){!r&&u.parent&&(r=u.parent);var d=u.getLocation(!0),h=u.getSizeInPixels();d.left<i&&(i=d.left),d.top<n&&(n=d.top),d.left+h.width>o&&(o=d.left+h.width),d.top+h.height>s&&(s=d.top+h.height),a++}}0===a&&(i=n=o=s=0),r?(t||r.cacheBounds(),this.bounds.pageLeft=r.left,this.bounds.pageTop=r.offsetTop):(this.bounds.pageLeft=0,this.bounds.pageTop=0),this.bounds.left=this.bounds.left1=0+i,this.bounds.top=this.bounds.top1=0+n,this.bounds.width=o-i,this.bounds.height=s-n,this.bounds.left2=this.bounds.left+this.bounds.width,this.bounds.top2=this.bounds.top+this.bounds.height,this.bounds.pageLeft+=this.bounds.left,this.bounds.pageTop+=this.bounds.top,this.elem.css({left:this.bounds.left,top:this.bounds.top,width:this.bounds.width,height:this.bounds.height})},e.prototype.getBounds=function(){return this.bounds},e.prototype.blink=function(){var e=this;if(this.outlineElem){var t=this.hover;t||this.setHover(!0),this.outlineElem.addClass("wb_blink"),setTimeout((function(){e.outlineElem.removeClass("wb_blink"),t||e.setHover(!1)}),1e3)}},e.prototype.selectionAttach=function(){this.parent&&(this.selection||(this.selection=(0,a.acquire)().attach(this.elem,this.parent)),this.selection.setValueChangeHandler(this.valueChangeHandler).setCloneHandler(this.cloneHandler).setCloneMode(this.cloneMode).setButtonsVisible(this.buttonsVisible).setAlignment(this.alignment.h,this.alignment.v).updatePadding(this.padding).updateMargin(this.margin).updateParentMargin(this.parentMargin).setParentMarginsVisible(this.parentMarginsVisible).setResizeMode(this.resizeMode).setResizeHandlesVisible(this.resizeHandlesVisible).setSelected(this.selected).setPaddingVisible(this.paddingsVisible).setMarginVisible(this.marginsVisible))},e.prototype.selectionDetach=function(){this.selection&&((0,a.release)(this.selection.detach()),this.selection=void 0)},e.prototype.attach=function(e){if(this.parent&&this.detach(),this.parent=e,e){e.append(this.elem);for(var t=0,i=this.buttons;t<i.length;t++){var n=i[t];e.append(n.elem)}this.debugLines&&e.append(this.debugLines)}},e.prototype.detach=function(){if(this.parent){for(var e=0,t=this.buttons;e<t.length;e++){var i=t[e];this.elem.append(i.elem)}this.debugLines&&this.elem.append(this.debugLines),this.selectionDetach(),this.elem.detach()}},e.prototype.dispose=function(){this.parent&&this.detach(),this.elem.remove()},e}()},"./element/ControlsButton.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ControlsButton:function(){return r},ControlsButtonAlign:function(){return n}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o);!function(e){e[e.NONE=0]="NONE",e[e.LEFT_TOP=1]="LEFT_TOP",e[e.RIGHT_TOP=2]="RIGHT_TOP",e[e.CENTER_TOP=3]="CENTER_TOP",e[e.LEFT_BOTTOM=4]="LEFT_BOTTOM"}(n||(n={}));var r=function(){function e(e,t,i,o){void 0===i&&(i=n.LEFT_TOP),void 0===o&&(o=""),this.iconValue="",this.cursor="",this.visible=!0,this.active=!0,this.locked=!1,this.currentlyVisible=!0,this.elem=s()("<div>").addClass(e),this.elem.addClass("wb-ctrl-btn"),this.iconElem=t?s()("<span>").appendTo(this.elem):null,this.align=i,t&&this.setIcon(t),o&&this.setCursor(o)}return e.prototype.setLabel=function(e){this.elem.text(e)},e.prototype.setIcon=function(e){this.iconValue=e,this.locked||this.setIconPrivate(e)},e.prototype.setIconPrivate=function(e){this.iconElem&&("?"==e?(this.iconElem.attr("class",""),this.iconElem.text(e)):(this.iconElem.attr("class",e),this.iconElem.text("")))},e.prototype.setCursor=function(e){this.cursor=e,this.locked||this.setCursorPrivate(e)},e.prototype.setCursorPrivate=function(e){this.elem.css({cursor:e})},e.prototype.setLocked=function(e){!this.locked&&e?(this.locked=!0,this.setIconPrivate("glyphicon glyphicon-lock"),this.setCursorPrivate("pointer"),this.elem.attr({"data-html":!0,"data-placement":"right","data-trigger":"hover",title:__("Unlock this element to move\n(click icon to unlock)").replace(/\n/g,"<br />")}),this.elem.tooltip({trigger:"hover",placement:"right",html:!0})):this.locked&&!e&&(this.locked=!1,this.setIconPrivate(this.iconValue),this.setCursorPrivate(this.cursor),this.elem.removeAttr("title"),this.elem.tooltip("destroy"))},e.prototype.isCurrentlyVisible=function(){return this.currentlyVisible},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(e){this.visible=e,this.updateVisibility()},e.prototype.isActive=function(){return this.active},e.prototype.setActive=function(e){this.active=e,this.updateVisibility()},e.prototype.setAdditionalVisibilityTestCallback=function(e){this.visibilityTestCallback=e,this.updateVisibility()},e.prototype.updateVisibility=function(){var e=this.active&&this.visible&&("function"!=typeof this.visibilityTestCallback||this.visibilityTestCallback());e&&!this.currentlyVisible?(this.currentlyVisible=!0,this.elem.show()):!e&&this.currentlyVisible&&(this.currentlyVisible=!1,this.elem.hide())},e.prototype.updateAlign=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var o=this.align;if(e){if(o!=n.NONE){var s={left:22*t+"px",right:"",top:"",bottom:"",margin:0};i?s.bottom="-22px":s.top="-22px",this.elem.css(s)}}else o==n.LEFT_TOP?this.elem.css({left:4+22*t+"px",right:"",top:4,bottom:"",margin:0}):o==n.RIGHT_TOP?this.elem.css({left:"",right:4+22*t+"px",top:4,bottom:"",margin:0}):o==n.CENTER_TOP?this.elem.css({left:"50%",right:"",top:4,bottom:"",margin:"0 0 0 -10px"}):o==n.LEFT_BOTTOM&&this.elem.css({left:4+22*t+"px",right:"",top:"",bottom:4,margin:0})},e}()},"./element/ControlsCircleButton.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CircleButton:function(){return r},CircleButtonType:function(){return n}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o);!function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(n||(n={}));var r=function(){function e(e,t){this.type=e,this.visible=!0,this.active=!0,this.elem=s()("<div>").text("+");var i="_";e==n.TOP?i="top":e==n.RIGHT?i="right":e==n.BOTTOM?i="bottom":e==n.LEFT&&(i="left"),this.elem.addClass("wb-circle-btn-"+i),this.setHandler(t)}return e.prototype.setHandler=function(e){var t=this;this.handler&&this.elem.off("click",this.handler),e?(this.handler=function(i){e&&e(t.type,i)},this.elem.on("click",this.handler)):this.handler=void 0},e.prototype.setVisible=function(e){this.visible!=e&&(this.visible=e,e?this.active&&this.elem.show():this.active&&this.elem.hide())},e.prototype.isActive=function(){return this.active},e.prototype.setActive=function(e){this.active!=e&&(this.active=e,e?this.visible&&this.elem.show():this.visible&&this.elem.hide())},e}()},"./element/ControlsMinMax.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ControlsMinMax:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(e){this.isVisible=!0,this.elem=o()("<div>").addClass("sel-min-max"),this.minElem=o()("<div>").addClass("sel-min").appendTo(this.elem),this.maxElem=o()("<div>").addClass("sel-max").appendTo(this.elem),this.setVisible(!1),e.append(this.elem)}return e.prototype.setVisible=function(e){this.isVisible!=e&&(this.isVisible=e,e?this.elem.show():this.elem.hide())},e.prototype.applyMinValue=function(e,t){this.minElem.css({left:(e||100)/-2+"px",top:(t||100)/-2+"px",width:(e||100)+"px",height:(t||100)+"px"}),0==e&&0==t?this.minElem.hide():this.minElem.show()},e.prototype.applyMaxValue=function(e,t){this.maxElem.css({left:(e||100)/-2+"px",top:(t||100)/-2+"px",width:(e||100)+"px",height:(t||100)+"px"}),0==e&&0==t?this.maxElem.hide():this.maxElem.show()},e}()},"./element/ControlsSelection.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CloneMode:function(){return n},ControlsResizeMode:function(){return o},ControlsSelection:function(){return g},acquire:function(){return p},isDoingResize:function(){return h},release:function(){return m}});var n,o,s=i("./util/ExtendedResizable.ts"),r=i("./element/ControlsCircleButton.ts"),a=i("./element/ControlsSelectionBorder.ts"),l=i("./lib/jquery-1.11.3.min.js"),c=i.n(l);!function(e){e[e.NONE=0]="NONE",e[e.ALL=1]="ALL",e[e.HORIZONTAL=2]="HORIZONTAL",e[e.VERTICAL=3]="VERTICAL"}(n||(n={})),function(e){e[e.ALL=0]="ALL",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.FULL_WIDTH=2]="FULL_WIDTH",e[e.SIDES=3]="SIDES",e[e.LOWER_RIGHT=4]="LOWER_RIGHT",e[e.NONE=5]="NONE"}(o||(o={}));var u=null,d=!1;function h(){return d}function p(){return new g}function m(e){}var g=function(){function e(){var e=this;this.resizeHandles={},this.resizeMode=o.ALL,this.selElems={top:new a.SelectionBorder(a.SelectionBorderType.TOP),right:new a.SelectionBorder(a.SelectionBorderType.RIGHT),bottom:new a.SelectionBorder(a.SelectionBorderType.BOTTOM),left:new a.SelectionBorder(a.SelectionBorderType.LEFT)},this.cloneButtons={top:new r.CircleButton(r.CircleButtonType.TOP),right:new r.CircleButton(r.CircleButtonType.RIGHT),bottom:new r.CircleButton(r.CircleButtonType.BOTTOM),left:new r.CircleButton(r.CircleButtonType.LEFT)};var t=c()("<div>").addClass("wb_selection_dot");this.selectionDots={leftTop:t.clone().css({left:0,top:0}),centerTop:t.clone().css({left:"50%",marginLeft:"-4px",top:0}),rightTop:t.clone().css({right:0,top:0}),rightMiddle:t.clone().css({right:0,top:"50%",marginTop:"-4px"}),rightBottom:t.clone().css({right:0,bottom:0}),centerBottom:t.clone().css({left:"50%",marginLeft:"-4px",bottom:0}),leftBottom:t.clone().css({left:0,bottom:0}),leftMiddle:t.clone().css({left:0,top:"50%",marginTop:"-4px"})},this.onResizeOver=function(t){return e.onResizeHandleHover(!0,e.resolveAxis(t))},this.onResizeOut=function(t){return e.onResizeHandleHover(!1,e.resolveAxis(t))};for(var i=0,l=s.resizeHandleTypes;i<l.length;i++){var u=l[i];this.resizeHandles[u]=(0,s.buildResizeHandleElem)(u)}this.resizeHandlesVisible=!0,this.setResizeHandlesVisible(!1),this.selected=!0,this.setSelected(!1),this.parentMarginsVisible=!0,this.setParentMarginsVisible(!1),this.paddingVisible=!0,this.setPaddingVisible(!1),this.marginsVisible=!0,this.setMarginVisible(!1),this.buttonsVisible=!0,this.setButtonsVisible(!1),this.cloneMode=n.ALL,this.setCloneMode(n.NONE)}return e.prototype.setValueChangeHandler=function(e){for(var t in this.selElems)this.selElems[t].setValueChangeHandler(e);return this},e.prototype.setCloneHandler=function(e){for(var t in this.cloneButtons)this.cloneButtons[t].setHandler(e);return this},e.prototype.setCloneMode=function(e){return this.cloneMode==e||(this.cloneMode=e,this.cloneButtons.top.setActive(e==n.ALL||e==n.VERTICAL),this.cloneButtons.right.setActive(e==n.ALL||e==n.HORIZONTAL),this.cloneButtons.bottom.setActive(e==n.ALL||e==n.VERTICAL),this.cloneButtons.left.setActive(e==n.ALL||e==n.HORIZONTAL)),this},e.prototype.setButtonsVisible=function(e){if(this.buttonsVisible==e)return this;for(var t in this.buttonsVisible=e,this.cloneButtons){var i=this.cloneButtons[t];i.isActive()&&i.setVisible(e)}return this},e.prototype.updateResizeDots=function(e,t){for(var i in this.selectionDots){var n=!0;e&&t!=o.NONE&&(t!=o.HORIZONTAL||"centerTop"!==i&&"centerBottom"!==i)?t==o.FULL_WIDTH&&"centerTop"!==i&&"centerBottom"!==i&&(n=!1):n=!1,n?this.selectionDots[i].show():this.selectionDots[i].hide()}for(var s in this.resizeHandles)n=!0,e&&t!=o.NONE?(t==o.HORIZONTAL&&"w"!==s&&"e"!==s||t==o.FULL_WIDTH&&"n"!==s&&"s"!==s||t==o.SIDES&&"nw"!==s&&"ne"!==s&&"sw"!==s&&"se"!==s||t==o.LOWER_RIGHT&&"e"!==s&&"s"!==s&&"se"!==s)&&(n=!1):n=!1,n?this.resizeHandles[s].show():this.resizeHandles[s].hide();return this},e.prototype.setAlignment=function(e,t){for(var i in this.selElems)this.selElems[i].setAlignment(e,t);return this},e.prototype.updatePadding=function(e){return this.selElems.top.setPadding(e&&e.paddingTop||0,e&&e.paddingLeft||0,e&&e.paddingRight||0),this.selElems.right.setPadding(e&&e.paddingRight||0,e&&e.paddingTop||0,e&&e.paddingBottom||0),this.selElems.bottom.setPadding(e&&e.paddingBottom||0,e&&e.paddingLeft||0,e&&e.paddingRight||0),this.selElems.left.setPadding(e&&e.paddingLeft||0,e&&e.paddingTop||0,e&&e.paddingBottom||0),this},e.prototype.updateMargin=function(e){return this.selElems.top.setMargin(e?e.marginTop:0),this.selElems.right.setMargin(e?e.marginRight:0),this.selElems.bottom.setMargin(e?e.marginBottom:0),this.selElems.left.setMargin(e?e.marginLeft:0),this},e.prototype.updateParentMargin=function(e){return this.selElems.top.setParentMargin(e?e.marginTop:0),this.selElems.right.setParentMargin(e?e.marginRight:0),this.selElems.bottom.setParentMargin(e?e.marginBottom:0),this.selElems.left.setParentMargin(e?e.marginLeft:0),this},e.prototype.setResizeMode=function(e){return this.resizeMode!=e&&(this.resizeMode=e,this.updateResizeDots(this.resizeHandlesVisible,e)),this},e.prototype.setResizeHandlesVisible=function(e,t){return void 0===t&&(t=!1),!e||this.resizeHandlesVisible&&!t?e||!this.resizeHandlesVisible&&!t||(this.resizeHandlesVisible=!1,this.updateResizeDots(this.resizeHandlesVisible,this.resizeMode)):(this.resizeHandlesVisible=!0,this.updateResizeDots(this.resizeHandlesVisible,this.resizeMode)),this},e.prototype.onResizeHandleHover=function(e,t){if(!d){var i=null;"n"===t?i=this.selElems.top:"e"===t?i=this.selElems.right:"s"===t?i=this.selElems.bottom:"w"===t&&(i=this.selElems.left),u&&u!=i&&(u.setActive(!1),u=null),i&&(i.setActive(e),u=i)}},e.prototype.handleResize=function(e,t){void 0===e&&(e=!1),e?(d=!0,this.onResizeHandleHover(!0,t)):(d=!1,this.onResizeHandleHover(!1,t))},e.prototype.setSelected=function(e){if(e&&!this.selected)for(var t in this.selected=!0,this.selElems)this.selElems[t].setVisible(!0);else if(!e&&this.selected)for(var t in this.selected=!1,this.selElems)this.selElems[t].setVisible(!1);return this},e.prototype.setPaddingVisible=function(e){if(e&&!this.paddingVisible)for(var t in this.paddingVisible=!0,this.selElems)this.selElems[t].setPaddingVisible(!0);else if(!e&&this.paddingVisible)for(var t in this.paddingVisible=!1,this.selElems)this.selElems[t].setPaddingVisible(!1);return this},e.prototype.setMarginVisible=function(e){if(e&&!this.marginsVisible)for(var t in this.marginsVisible=!0,this.selElems)this.selElems[t].setMarginVisible(!0);else if(!e&&this.marginsVisible)for(var t in this.marginsVisible=!1,this.selElems)this.selElems[t].setMarginVisible(!1);return this},e.prototype.setParentMarginsVisible=function(e){if(e&&!this.parentMarginsVisible)for(var t in this.parentMarginsVisible=!0,this.selElems)this.selElems[t].setParentMarginVisible(!0);else if(!e&&this.parentMarginsVisible)for(var t in this.parentMarginsVisible=!1,this.selElems)this.selElems[t].setParentMarginVisible(!1);return this},e.prototype.resolveAxis=function(e){var t=e.target.className.match(/^.*resizable-handle-([a-z]+).*$/i);return t?t[1]:"?"},e.prototype.getResizeHandles=function(){return this.resizeHandles},e.prototype.attach=function(e,t){for(var i in this.selElems)this.selElems[i].appendTo(e);for(var i in this.cloneButtons)this.cloneButtons[i].elem.appendTo(t);for(var i in this.selectionDots)this.selectionDots[i].appendTo(e);for(var n in this.resizeHandles)this.resizeHandles[n].on("mouseover",this.onResizeOver).on("mouseout",this.onResizeOut).appendTo(t);return this},e.prototype.detach=function(){for(var e in this.selElems)this.selElems[e].detach();for(var e in this.cloneButtons)this.cloneButtons[e].elem.detach();for(var e in this.selectionDots)this.selectionDots[e].detach();for(var t in this.resizeHandles)this.resizeHandles[t].off("mouseover",this.onResizeOver).off("mouseout",this.onResizeOut).detach();return this.setValueChangeHandler(void 0).setCloneHandler(void 0),this},e}()},"./element/ControlsSelectionBorder.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SelectionBorder:function(){return h},SelectionBorderType:function(){return n},ValueType:function(){return o},isDoingResize:function(){return d}});var n,o,s=i("./CommonTypes.ts"),r=i("./util/EventUtil.ts"),a=i("./lib/jquery-1.11.3.min.js"),l=i.n(a);!function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(n||(n={})),function(e){e[e.PADDING=0]="PADDING",e[e.MARGIN=1]="MARGIN",e[e.PARENT_MARGIN=2]="PARENT_MARGIN"}(o||(o={}));var c=function(){function e(t,i,n,s){this.border=t,this.valueType=i,this.valueChangeHandler=s,this.pos=e.posFromEvent(n,{left:0,top:0}),i==o.PADDING?(this.value=t.getPadding(),this.border.setPaddingActive(!0)):i==o.MARGIN&&(this.value=t.getMargin(),this.border.setMarginActive(!0))}return e.prototype.dispose=function(){this.valueType==o.PADDING?this.border.setPaddingActive(!1):this.valueType==o.MARGIN&&this.border.setMarginActive(!1)},e.prototype.update=function(t){var i=e.posFromEvent(t,this.pos),r=0,a=1;this.border.type==n.TOP?(a=this.border.vAlign==s.FlexAlignItems.End?-1:1,r=this.value+i.top*a):this.border.type==n.RIGHT?(a=this.border.hAlign==s.FlexAlignItems.Stretch||this.border.hAlign==s.FlexAlignItems.End?-1:1,r=this.value+i.left*a):this.border.type==n.BOTTOM?(a=this.border.vAlign==s.FlexAlignItems.End?-1:1,r=this.value+i.top*a):this.border.type==n.LEFT&&(a=this.border.hAlign==s.FlexAlignItems.Stretch||this.border.hAlign==s.FlexAlignItems.Start?1:-1,r=this.value+i.left*a),r<0&&(r=0),this.valueType==o.PADDING?this.border.setPadding(r,this.border.getPaddingStart(),this.border.getPaddingEnd()):this.valueType==o.MARGIN&&this.border.setMargin(r),"function"==typeof this.valueChangeHandler&&this.valueChangeHandler(this.border.type,r,this.valueType)},e.posFromEvent=function(e,t){var i=(0,r.posFromEvent)(e);return i.left-=t.left,i.top-=t.top,i},e}(),u=null;function d(){return!!u}l()((function(){l()(document).on("mousemove touchmove",(function(e){u&&u.update(e)})).on("mouseup touchend touchcancel",(function(){u&&(u.dispose(),u=null)}))}));var h=function(){function e(e,t){var i=this;this.type=e,this.valueChangeHandler=t,this.paddingActive=!1,this.marginActive=!1,this.parentMarginActive=!1,this.active=!1,this.visible=!1,this.paddingVisible=!1,this.parentMarginVisible=!1,this.marginVisible=!1,this.padding=0,this.paddingStart=0,this.paddingEnd=0,this.margin=0,this.parentMargin=0,this.paddingNone=!1,this.marginNone=!1,this.hAlign=s.FlexAlignItems.Start,this.vAlign=s.FlexAlignItems.Start,this.elem=l()("<div>");var r,a="_";e==n.TOP?a="top":e==n.RIGHT?a="right":e==n.BOTTOM?a="bottom":e==n.LEFT&&(a="left"),this.elem.addClass("sel-"+a),this.rawElem=this.elem[0],this.paddingElem=l()("<div>").addClass("sel-padding-"+a).on("mousedown touchstart",(function(e){u=new c(i,o.PADDING,e,i.valueChangeHandler)})),this.rawPaddingElem=this.paddingElem[0],this.paddingTextElem=l()("<span>").addClass("sel-padding-text").appendTo(this.paddingElem),this.rawPaddingTextElem=this.paddingTextElem[0],this.marginElem=l()("<div>").addClass("sel-margin-"+a).on("mousedown touchstart",(function(e){u=new c(i,o.MARGIN,e,i.valueChangeHandler)})),this.rawMarginElem=this.marginElem[0],this.marginTextElem=l()("<span>").addClass("sel-margin-text").appendTo(this.marginElem),this.parentMarginElem=l()("<div>").addClass("sel-margin-"+a+" sel-ambient").on("mousedown touchstart",(function(e){u=new c(i,o.PARENT_MARGIN,e,i.valueChangeHandler)})),this.rawParentMarginElem=this.parentMarginElem[0],this.parentMarginTextElem=l()("<span>").addClass("sel-margin-text").appendTo(this.parentMarginElem),r=this.paddingVisible,i.paddingVisible=!r,i.setPaddingVisible(r),function(e){i.marginVisible=!e,i.setMarginVisible(e)}(this.marginVisible)}return e.prototype.appendTo=function(e){e.append(this.elem),e.append(this.paddingElem),e.append(this.marginElem),e.append(this.parentMarginElem),this.type===n.BOTTOM&&Math.ceil(e.offset().top+e.height())>=document.body.scrollHeight&&this.marginElem.addClass("hide")},e.prototype.detach=function(){this.elem.detach(),this.paddingElem.detach(),this.marginElem.detach(),this.parentMarginElem.detach()},e.prototype.setValueChangeHandler=function(e){this.valueChangeHandler=e},e.prototype.getPadding=function(){return this.padding},e.prototype.getPaddingStart=function(){return this.paddingStart},e.prototype.getPaddingEnd=function(){return this.paddingEnd},e.prototype.setPadding=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=e;if(e<10&&!this.paddingActive&&(e=10),this.padding!=e||this.paddingStart!=t||this.paddingEnd!=i){this.padding=e,this.paddingStart=t,this.paddingEnd=i;var s=e.toFixed(0)+"px";0==o?(s="",this.setPaddingNone(!0)):this.setPaddingNone(!1),this.paddingTextElem.text(s),this.type==n.TOP||this.type==n.BOTTOM?this.rawPaddingElem.style.height=e-2+"px":this.type!=n.RIGHT&&this.type!=n.LEFT||(this.rawPaddingElem.style.width=e-2+"px"),t>0||i>0?(this.paddingElem.addClass("sel-bm"),this.rawPaddingElem.style.border="",this.type==n.TOP?(this.rawPaddingElem.style.borderTopWidth=e-2+"px",this.rawPaddingElem.style.borderRightWidth=i-2+"px",this.rawPaddingElem.style.borderLeftWidth=t-2+"px",this.rawPaddingTextElem.style.left="",this.rawPaddingTextElem.style.top="-"+(e-2)/2+"px",this.rawPaddingTextElem.style.width=""):this.type==n.RIGHT?(this.rawPaddingElem.style.borderTopWidth=t-2+"px",this.rawPaddingElem.style.borderRightWidth=e-2+"px",this.rawPaddingElem.style.borderBottomWidth=i-2+"px",this.rawPaddingTextElem.style.left="",this.rawPaddingTextElem.style.top="",this.rawPaddingTextElem.style.width=e-2+"px"):this.type==n.BOTTOM?(this.rawPaddingElem.style.borderRightWidth=i-2+"px",this.rawPaddingElem.style.borderBottomWidth=e-2+"px",this.rawPaddingElem.style.borderLeftWidth=t-2+"px",this.rawPaddingTextElem.style.left="",this.rawPaddingTextElem.style.top=(e-2)/2+"px",this.rawPaddingTextElem.style.width=""):this.type==n.LEFT&&(this.rawPaddingElem.style.borderTopWidth=t-2+"px",this.rawPaddingElem.style.borderBottomWidth=i-2+"px",this.rawPaddingElem.style.borderLeftWidth=e-2+"px",this.rawPaddingTextElem.style.left="-"+(e-2)+"px",this.rawPaddingTextElem.style.top="",this.rawPaddingTextElem.style.width=e-2+"px")):(this.paddingElem.removeClass("sel-bm"),this.rawPaddingElem.style.borderTopWidth="0px",this.rawPaddingElem.style.borderRightWidth="0px",this.rawPaddingElem.style.borderBottomWidth="0px",this.rawPaddingElem.style.borderLeftWidth="0px",this.rawPaddingTextElem.style.left="",this.rawPaddingTextElem.style.top="",this.rawPaddingTextElem.style.width="")}},e.prototype.setPaddingActive=function(e){this.paddingActive!=e&&(this.paddingActive=e,e?this.paddingElem.addClass("sel-active"):this.paddingElem.removeClass("sel-active"),this.setPadding(this.padding,this.paddingStart,this.paddingEnd))},e.prototype.setPaddingNone=function(e){this.paddingNone!=e&&(this.paddingNone=e,e?this.paddingElem.addClass("sel-none"):this.paddingElem.removeClass("sel-none"))},e.prototype.getMargin=function(){return this.margin},e.prototype.setMargin=function(e){var t=e;if(e<8&&!this.marginActive&&(e=8),this.margin!=e){this.margin=e;var i=t.toFixed(0)+"px";if(0==t?(i="",this.setMarginNone(!0)):this.setMarginNone(!1),this.marginTextElem.text(i),this.type==n.TOP||this.type==n.BOTTOM)(o={height:e})["margin-"+(this.type==n.TOP?"top":"bottom")]=-e,this.marginElem.css(o);else if(this.type==n.RIGHT||this.type==n.LEFT){var o;(o={width:e})["margin-"+(this.type==n.RIGHT?"right":"left")]=-e,this.marginElem.css(o)}this.type==n.TOP?this.rawParentMarginElem.style.top=-e+"px":this.type==n.RIGHT?this.rawParentMarginElem.style.right=-e+"px":this.type==n.BOTTOM?this.rawParentMarginElem.style.bottom=-e+"px":this.type==n.LEFT&&(this.rawParentMarginElem.style.left=-e+"px")}},e.prototype.setMarginActive=function(e){this.marginActive!=e&&(this.marginActive=e,e?this.marginElem.addClass("sel-active"):this.marginElem.removeClass("sel-active"),this.setMargin(this.margin))},e.prototype.setMarginNone=function(e){this.marginNone!=e&&(this.marginNone=e,e?this.marginElem.addClass("sel-none"):this.marginElem.removeClass("sel-none"))},e.prototype.setParentMargin=function(e){if(this.parentMargin!=e)if(this.parentMargin=e,this.parentMarginTextElem.text(e.toFixed(0)+"px"),this.type==n.TOP||this.type==n.BOTTOM)(t={height:e})["margin-"+(this.type==n.TOP?"top":"bottom")]=-e,this.parentMarginElem.css(t);else if(this.type==n.RIGHT||this.type==n.LEFT){var t;(t={width:e})["margin-"+(this.type==n.RIGHT?"right":"left")]=-e,this.parentMarginElem.css(t)}},e.prototype.setParentMarginActive=function(e){this.parentMarginActive!=e&&(this.parentMarginActive=e,e?this.parentMarginElem.addClass("sel-active"):this.parentMarginElem.removeClass("sel-active"))},e.prototype.setActive=function(e){this.active!=e&&(this.active=e,e?this.elem.addClass("sel-active"):this.elem.removeClass("sel-active"))},e.prototype.setVisible=function(e){this.visible!=e&&(this.visible=e,this.rawElem.style.display=e?"block":"none",this.rawPaddingElem.style.display=e?"block":"none",this.rawPaddingElem.style.pointerEvents=e?"":"none",this.rawPaddingElem.style.touchAction=e?"":"none",this.rawMarginElem.style.display=e?"block":"none")},e.prototype.setPaddingVisible=function(e){this.paddingVisible!=e&&(this.paddingVisible=e,this.rawPaddingElem.style.display=this.paddingVisible||this.visible?"block":"none",this.rawPaddingElem.style.pointerEvents=this.visible?"":"none",this.rawPaddingElem.style.touchAction=this.visible?"":"none")},e.prototype.setMarginVisible=function(e){this.marginVisible!=e&&(this.marginVisible=e,this.rawMarginElem.style.display=this.marginVisible||this.visible?"block":"none")},e.prototype.setParentMarginVisible=function(e){this.parentMarginVisible=e,this.rawParentMarginElem.style.display=this.parentMarginVisible||this.visible?"block":"none"},e.prototype.setAlignment=function(e,t){this.hAlign=e,this.vAlign=t},e}()},"./element/ElementBackground.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{apply:function(){return r}});var n=i("./BackgroundControl.ts"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o);function r(e,t,i,o,r,a){if(void 0===o&&(o=!1),void 0===r&&(r=""),void 0===a&&(a=null),t&&"object"==typeof t){var l=s().extend(!0,{},t),c=l.css;c.background&&l.image&&"none"!==l.image&&(c.background=c.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(l.image)+'")'));var u=i.children(".wb_detach_background"),d=i.children(".wb_video_background");if(l.isVideo&&l.image)u.hide(),d.length||(d=s()("<div>").addClass("wb_video_background").attr("id",e.id+"_video_background"),r&&d.addClass(r),i.prepend(d)),d.show(),(0,n.runVideoByBackground)(l,d,e,o),i.css("background-color",l.color?l.color:""),"number"==typeof l.opacity&&d.css("opacity",l.opacity/100);else if(l.css&&"object"==typeof l.css){(0,n.runVideoByBackground)(null,d,e),d.hide(),u.length||(u=s()("<div>").addClass("wb_detach_background").css({position:"absolute",width:"100%",height:"100%",top:0,left:0}),i.prepend(u)),u.show();var h=s().extend(!0,{},l.css);h.background=h.background.replace(l.color,"transparent"),u.css(h),i.css("background-color",l.color?l.color:"")}e&&a&&a.css&&(u.css(a.css),d.css(a.css))}}},"./element/GroupHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GroupHandle:function(){return B},findGroupById:function(){return w},getRootGroupId:function(){return E},groupEdit:function(){return O},groupElements:function(){return P},groupUnhideByElement:function(){return R},handleInteract:function(){return A},handleSelect:function(){return M},initGroups:function(){return x},printGroupStructure:function(){return C},resolveGroupPath:function(){return T},ungroupElement:function(){return L},unselectGroups:function(){return S},updateGroupBounds:function(){return k}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./Service.ts"),r=i("./element/Controls.ts"),a=i("./element/ControlsButton.ts"),l=i("./element/MovePushHandle.ts"),c=i("./ContextMenu.ts"),u=i("./element/ResizeHandle.ts"),d=i("./UserInput.ts"),h=i("./ElementMeasurementHelpers.ts"),p=i("./BuilderEvent.ts"),m=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},g={},f=0,y=!1,b={},v=0,_={};function C(e,t){for(var i in void 0===e&&(e=null),void 0===t&&(t=0),e||(e=g),e){var n=e[i];if(0!=t||!n.parentGroup){for(var o=t,s="";o>0;)o--,s+="  ";console.log(s,n.id," -> ",n.parentGroup?n.parentGroup.id:null);for(var r=0,a=n.elements;r<a.length;r++){var l=a[r];console.log(s+" - ",l.getClassType(),l.id)}C(n.childGroups,t+1)}}}function w(e){return e in g?g[e]:null}function T(e){var t=e?w(e):null;if(t){var i=[];for(i.push(t.id);t.parentGroup;)t=t.parentGroup,i.push(t.id);return i}return null}function E(e){var t=e?w(e):null;if(t){for(;t.parentGroup;)t=t.parentGroup;return t.id}return null}function I(e){var t=e.getRootGroupId();return t&&w(t)||null}function x(e,t){if(void 0===t&&(t=!1),t||function(){var e=[];for(var t in g)e.push(t);for(var i=0,n=e;i<n.length;i++)t=n[i],g[t].dispose()}(),y||(y=!0,p.GlobalEvents.on("page.load",(function(){return k()})),o()(window).on("resize",(function(){return k()}))),0!=e.length){for(var i,n={},s=0,r=0,a=e;r<a.length;r++)(_=a[r]).groupPath&&s<_.groupPath.length&&(s=_.groupPath.length);for(var l=0;l<s;l++)for(var c=0,u=e;c<u.length;c++)if((_=u[c]).groupPath&&!(_.groupPath.length<=l)){var d=_.groupPath[l],h=null;if(d in n){if(_.groupPath[l]=n[d],!(h=w(_.groupPath[l])))continue}else h=new B,_.groupPath[l]=n[d]=h.id;if(0==l)h.addElement(_);else{var m=w(_.groupPath[l-1]);if(!m)continue;h.addGroup(m)}}for(var b=0,v=e;b<v.length;b++){var _;(_=v[b]).groupPath=null}for(var C in g){if(i=C.match(/^grp([0-9]+)$/)){var T=parseInt(i[1],10);f<T&&(f=T)}g[C].setControlsVisible(!0)}p.GlobalEvents.triggerEvent("site.structure.changed",new p.SiteStructureChangedBuilderEvent)}}function S(){for(var e in g)g[e].setSelected(!1)}function k(){var e=!0;for(var t in g)g[t].updateBounds(!1,e),e=!1}function D(e,t,i){for(var n in e){var o=e[n];o!==t&&o.isEditing()&&(i.push(n),o.setEditing(!1),D(o.childGroups,t,i))}}function O(e){if(!e||!e.parentGroup){for(var t in _)_[t].setEditing(!1);if(_={},!e)return}if(_[e.id]=e,e.setEditing(!0),e.parentGroup){var i=[];D(e.parentGroup.childGroups,e,i);for(var n=0,o=i;n<o.length;n++)delete _[o[n]]}e.setSelected(!1)}function R(e){var t=I(e);t&&(e.cacheBounds(),t.unhide(),t.updateBounds())}function P(e){if(0!=e.length){var t=[];for(var i in b)t.push(b[i]);s.Service.element.unselectAll();for(var n=[],o=0,r=e;o<r.length;o++){for(var a=r[o],l=!0,c=0,u=t;c<u.length;c++)if(u[c].containsElement(a)){l=!1;break}l&&n.push(a)}var d=new B;d.addElements(n,t),d.setControlsVisible(!0),p.GlobalEvents.triggerEvent("site.structure.changed",new p.SiteStructureChangedBuilderEvent)}}function L(e,t){void 0===t&&(t=!1);var i=I(e);if(!i)return e.groupId=null,void(e.groupPath=null);i.removeElement(e),i.isEmpty()&&i.dispose(),t||p.GlobalEvents.triggerEvent("site.structure.changed",new p.SiteStructureChangedBuilderEvent)}function A(e){var t=e.groupId?w(e.groupId):null;return t?!t.isEditing()&&(O(null),!t.isControlsVisible()&&(t.setControlsVisible(!0),!0)):(O(null),!1)}function M(e){var t=I(e);return!(!t||t.isEditing()||(t.setSelected(!0),0))}s.Service.group={updateGroupBounds:k,initGroups:x,groupEdit:O,groupUnhideByElement:R,handleSelect:M,unselectGroups:S,getRootGroupId:E,groupElements:P,resolveGroupPath:T,handleInteract:A,ungroupElement:L};var B=function(){function e(){var e=this;this.parentGroup=null,this.childGroups={},this.elements=[],this.parent=null,this.selected=!1,this.isLocked=!1,this.isInserted=!1,this.editing=!1,this.zIndex=0,this.id="grp"+ ++f,this.controls=new r.Controls(!0,!0,void 0,(function(t){var i=e.controls.elem.resizableExt("instance");i&&(t?i.attachHandles(t.getResizeHandles()):i.detachHandles())})).addButton(this.moveBtn=new a.ControlsButton("wb_move_btn","glyphicon glyphicon-move",a.ControlsButtonAlign.LEFT_TOP,"move")).addButton(this.movePushBtn=new a.ControlsButton("wb_controls_btn","fa fa-sort",a.ControlsButtonAlign.CENTER_TOP,"ns-resize")).layout(),(this.movePushHandle=new l.MovePushHandle(this.elements,!0,wb_builder,(function(){e.updateBounds(!0),e.setMeasurementHelpersVisible(!1)}))).bindToElement(this.movePushBtn.elem),this.controls.setHover(!1),this.controls.setVisible(!0),this.controls.setSelected(!1),this.controls.onDblClick((function(){return O(e)})),this.moveHandle=new l.MovePushHandle(this.elements,!1,wb_builder,(function(){e.updateBounds(!0),e.setMeasurementHelpersVisible(!1)})),this.controls.cover&&this.moveHandle.bindToElement(this.controls.cover),this.controls.elem.on("click",(function(t){if((0,c.hideAllContextMenus)(),(e.parentGroup&&!e.parentGroup.isEditing()||!e.parentGroup&&!e.isEditing())&&O(null),e.parentGroup&&e.parentGroup.isEditing())for(var i in e.parentGroup.childGroups){var n=e.parentGroup.childGroups[i];n!==e&&n.isEditing()&&n.setEditing(!1)}e.moveHandle.moveStarted||(d.UserInput.hotKeysMod.ctrl?e.setSelected(!e.selected):(s.Service.element.unselectAll(),e.setSelected(!0))),t.stopPropagation()})).on("mouseover",(function(t){return e.setMeasurementHelpersVisible(!0),e.isSelected()||e.controls.setHover(!0),t.stopPropagation(),!1})).on("mouseout",(function(t){return e.setMeasurementHelpersVisible(!1),e.isSelected()||e.controls.setHover(!1),t.stopPropagation(),!1})),this.resizeHandle=new u.ResizeHandle(this.controls.elem,this.elements,(function(){return e.updateBounds(!0)}),!0),this.initContextMenu(),g[this.id]=this,this.updateBounds(!0)}return e.prototype.setMeasurementHelpersVisible=function(e){wb_builder.showMeasurementHelpers&&(e?(this.measurementHelpers||(this.measurementHelpers=new h.ElementMeasurementHelpers(this)),this.measurementHelpers.show()):this.measurementHelpers&&(this.measurementHelpers.hide(),this.measurementHelpers=null))},e.prototype.getBounds=function(e){return this.controls.getBounds()},e.prototype.getParentWidth=function(e){return this.parent?this.parent.getWidthInPixels():0},e.prototype.getParentHeight=function(e){return this.parent?this.parent.getHeightInPixels():0},e.prototype.getAffectingElements=function(){for(var e=[],t=0,i=this.parent?this.parent.getChildren():[];t<i.length;t++){for(var n=i[t],o=!1,s=0,r=this.elements;s<r.length;s++)if(r[s]===n){o=!0;break}o||n.isHidden()||n.isHidden(!0)||e.push(new h.MeasurableElement(n))}return e},e.prototype.dispose=function(){this.setEditing(!1),this.setSelected(!1);var e=this.parentGroup;for(var t in e&&e.removeGroup(this,!1),this.childGroups){var i=this.childGroups[t];this.removeGroup(i,!1),e&&e.addGroup(i,!1)}for(var n=0,o=m([],this.elements,!0);n<o.length;n++){var s=o[n];this.removeElement(s,!1),e&&e.addElement(s,!1)}e&&(e.updateZIndex(),e.updateElements()),delete g[this.id],this.contextMenu.unbind(),this.contextMenu.dispose(),this.controls.dispose(),this.parent=null},e.prototype.initContextMenu=function(){var e=this,t=this.contextMenu=new c.ContextMenu("wb_group_context_menu");t.addItem("copy",__("Copy"),(function(){for(var t=[],i=0,n=e.getElements();i<n.length;i++){var o=n[i];t.push(o.serialize())}wb_builder.setClipboard(t)}),!1,!1,null,"glyphicon glyphicon-list-alt",!0),t.addItem("paste",__("Paste"),null,!1,!1,null,"glyphicon glyphicon-download-alt"),t.addSeparator(),t.addItem("lock",__("Lock"),(function(){wb_builder.setPageModified(!0),e.setLocked(!e.isLocked)}),!1,!1,null,"glyphicon glyphicon-lock",!1);var i=t.addItem("group",__("Group"),(function(){wb_builder.setPageModified(!0);var e=[],t=s.Service.element.getSelected();for(var i in t)e.push(t[i]);P(e)}),!1,!1,null,"fa fa-object-group",!1),n=t.addItem("ungroup",__("Ungroup"),(function(){for(var t in wb_builder.setPageModified(!0),e.dispose(),b)b[t].dispose();p.GlobalEvents.triggerEvent("site.structure.changed",new p.SiteStructureChangedBuilderEvent)}),!1,!1,null,"fa fa-object-ungroup",!1);t.addSeparator();var o=new c.ContextMenu("");o.addItem("indexMax",__("Bring to front"),(function(){return e.changeOrder("top")}),!1,!1,null,"glyphicon glyphicon-arrow-up"),o.addItem("indexMin",__("Send to back"),(function(){return e.changeOrder("bottom")}),!1,!1,null,"glyphicon glyphicon-arrow-down"),o.addItem("indexUp",__("Bring forward"),(function(){return e.changeOrder("up")}),!1,!1,null,"glyphicon glyphicon-arrow-up"),o.addItem("indexDown",__("Send backwards"),(function(){return e.changeOrder("down")}),!1,!1,null,"glyphicon glyphicon-arrow-down"),t.addItem("order",__("Order"),o,!1,!1,null,"glyphicon glyphicon-list"),t.addItem("remove",__("Remove"),null,!1,!1,null,"glyphicon glyphicon-remove",!1),t.bind(this.movePushBtn.elem,!0),t.pasiveBind(this.controls.elem),t.onShow=function(){e.selected||(s.Service.element.unselectAll(),e.setSelected(!0)),e.parent&&s.Service.paste.addPaste(t,e.parent,null,!0),e.elements.length>0&&s.Service.element.updateContextMenuRemove(t,e.elements[0]);var o=v,r=s.Service.element.getSelected();for(var a in r)r[a].groupId||o++;o>1?(n.hide(),i.show()):(i.hide(),n.show())}},e.prototype.changeOrder=function(e){if(this.parent){wb_builder.setPageModified(!0);var t=m([],this.elements,!0);"bottom"==e||"up"==e?t.sort((function(e,t){var i=e.getZIndex(),n=t.getZIndex();return i==n?0:i>n?-1:1})):t.sort((function(e,t){var i=e.getZIndex(),n=t.getZIndex();return i==n?0:i<n?-1:1}));for(var i=0,n=t;i<n.length;i++){var o=n[i];this.parent.zIndexHandle.changeLayer(o,e),this.updateZIndex()}}},e.prototype.updateBounds=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.controls.updateBoundsFromElements(this.getElements(),t),!e&&this.measurementHelpers&&this.measurementHelpers.update()},e.prototype.updateElements=function(){var e=this.getElements();this.movePushHandle.updateElements(e),this.moveHandle.updateElements(e),this.resizeHandle.updateElements(e)},e.prototype.isControlsVisible=function(){return this.controls.isSelected()},e.prototype.setControlsVisible=function(e){e&&!this.controls.isSelected()&&this.updateBounds(!0),this.controls.setHover(e)},e.prototype.isEditing=function(){return this.editing},e.prototype.setEditing=function(e){if(!this.editing&&e){for(var t=0,i=this.elements;t<i.length;t++)i[t].controls.setResizeHandlesVisible(!0);this.updateZIndex(!0),this.controls.setOutlineActive(!0),this.editing=!0}else if(this.editing&&!e){for(var n=0,o=this.elements;n<o.length;n++)o[n].controls.setResizeHandlesVisible(!1);this.updateZIndex(!1),this.controls.setOutlineActive(!1),this.editing=!1}},e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(e,t){if(void 0===t&&(t=!1),!t){if(this.controls.setSelected(e),e){for(var i=0,n=this.elements;i<n.length;i++)n[i].setSelected(!1,!0,!1);this.controls.setHover(!0),this.id in b||(b[this.id]=this,v++)}else this.controls.setHover(!1),this.id in b&&(delete b[this.id],v--);this.selected=e}for(var o=0,s=this.elements;o<s.length;o++)s[o].setSelected(e,!0,!0);for(var r in this.childGroups)this.childGroups[r].setSelected(e,!0)},e.prototype.calcZIndex=function(e){void 0===e&&(e=!1);var t=-1;if(e){for(var i=0,n=this.elements;i<n.length;i++){var o=n[i];(t<0||o.getZIndex()<=t)&&(t=Math.max(o.getZIndex()-1,0))}for(var s in this.childGroups){var r=this.childGroups[s].calcZIndex(e);(t<0||r<=t)&&(t=Math.max(r-1,0))}}else{for(var a=0,l=this.elements;a<l.length;a++)(o=l[a]).getZIndex()>=t&&(t=o.getZIndex()+1);for(var s in this.childGroups)(r=this.childGroups[s].calcZIndex(e))>=t&&(t=r+1)}return t<0&&(t=0),t},e.prototype.updateZIndex=function(e){void 0===e&&(e=!1);var t=this.calcZIndex(e);this.zIndex!=t&&(this.zIndex=t,this.controls.elem.css("zIndex",this.zIndex))},e.prototype.getElements=function(){var e=m([],this.elements,!0);for(var t in this.childGroups)for(var i=0,n=this.childGroups[t].getElements();i<n.length;i++){var o=n[i];e.push(o)}return e},e.prototype.containsElement=function(e){return this.getElements().indexOf(e)>=0},e.prototype.addGroup=function(e,t){void 0===t&&(t=!0),e.parentGroup!==this&&(e.parentGroup&&e.parentGroup.removeGroup(e),e.parentGroup=this,this.childGroups[e.id]=e,this.isInserted||e.parent&&(this.isInserted=!0,this.controls.attach(e.parent.container),this.parent=e.parent),t&&(this.updateZIndex(),this.updateElements()))},e.prototype.addElement=function(e,t){if(void 0===t&&(t=!0),this.elements.indexOf(e)<0){var i=e.groupId?w(e.groupId):null;if(i&&i.removeElement(e),e.groupId=this.id,e.controls.setResizeHandlesVisible(!1),this.elements.push(e),!this.isInserted){var n=e.getParent();n&&(this.isInserted=!0,this.controls.attach(n.container),this.parent=n)}t&&(this.updateZIndex(),this.updateElements())}},e.prototype.isEmpty=function(){return 0==this.elements.length},e.prototype.removeGroup=function(e,t){void 0===t&&(t=!0),e.parentGroup===this&&(e.parentGroup=null,e.id in this.childGroups&&delete this.childGroups[e.id],t&&(this.updateZIndex(),this.updateElements()))},e.prototype.removeElement=function(e,t){void 0===t&&(t=!0);var i=this.elements.indexOf(e);e.groupId==this.id&&(e.groupId=null),i>=0&&(e.controls.setResizeHandlesVisible(!0),this.elements.splice(i,1)),t&&(this.updateZIndex(),this.updateElements())},e.prototype.addElements=function(e,t){for(var i=null,n=null,o=!1,s=0,r=e;s<r.length;s++){var a=r[s];if(!i||!a.parent||i==a.parent.id){if(a.parent&&a.parent.id&&(i=a.parent.id),!o){var l=a.groupId?w(a.groupId):null;if(l===this)continue;o=!0,n=l}n&&n.id!=a.groupId||!n&&a.groupId||this.addElement(a,!1)}}for(var c=0,u=t;c<u.length;c++)if(a=u[c],!i||!a.parent||i==a.parent.id){if(!o){if(a.parentGroup===this)continue;o=!0,n=a.parentGroup}n===a.parentGroup&&this.addGroup(a,!1)}n&&n.addGroup(this),this.updateZIndex(),this.updateElements()},e.prototype.onBeforeRemove=function(e){if(this.isLocked)e.preventRemoval=!0;else for(var t=0,i=this.elements;t<i.length;t++)if(i[t].onBeforeRemove(e),e.preventRemoval)return},e.prototype.remove=function(e){if(e&&"object"==typeof e){for(var t=0,i=this.elements;t<i.length;t++)i[t].remove(e);this.dispose()}else console.error("GroupHandle.remove() is called with invalid parameters")},e.prototype.hide=function(){if(!this.isLocked){for(var e=0,t=this.elements;e<t.length;e++)t[e].hide(!0,!0,!0);this.controls.setVisible(!1)}},e.prototype.unhide=function(){this.controls.setVisible(!0)},e.prototype.setLocked=function(e){var t=this;this.isLocked=e;for(var i=0,n=this.elements;i<n.length;i++)n[i].setLocked(e);this.controls.setLocked(e,(function(){return t.setLocked(!1)})),this.contextMenu.setName("lock",e?__("Unlock"):__("Lock"))},e}()},"./element/MovePushHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MovePushHandle:function(){return u}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./Service.ts"),r=i("./util/EventUtil.ts"),a=!1,l=null,c=null,u=function(){function e(e,t,i,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.elements=e,this.push=t,this.builder=i,this.onChange=n,this.moveStarted=!1,this.startEvent=null,this.useXAxis=!1,this.useXAxis=!this.push,a||(a=!0,this.builder.body.on("mousemove touchmove",(function(e){return function(e){var t;if(c&&(c.moveStarted||c.start(),l)){var i=l.element,n=l.parentOffset,o=l.others,a=l.newPos,u=(0,r.posFromEvent)(e),d=l.useXAxis?u.left-n.left-l.offset.left:null,h=u.top-n.top-l.offset.top;!1!==l.topLimit&&h<l.topLimit&&(h=l.topLimit),i.setLocation(d,h,!0);var p={position:i.getLocation(!0)};i.snapHandle.handleDraggableDrag({type:"drag"},p),d=(t=p.position).left,h=t.top,i.setLocation(d,h,!0),l.useXAxis&&(a.left=d),a.top=h;for(var m=l.useXAxis?l.pos.left-d:0,g=l.pos.top-h,f=0,y=o;f<y.length;f++){var b=y[f];b.newPos.left=b.pos.left-m,b.newPos.top=b.pos.top-g,b.element.setLocation(b.newPos.left,b.newPos.top,!0)}l.onChange&&l.onChange();var v=i.getParent();v&&l.updateParentSize&&v.updateSize(!1,0,!0),s.Service.group.updateGroupBounds()}}(e)})),this.builder.body.on("mouseup touchend touchcancel",(function(e){return function(e){if(l){wb_builder.setPageModified(!0);var t=l.element.getParent();t&&t.updateSize();var i=[];i.push({element:l.element.id,pos:o().extend({},l.pos),newPos:o().extend({},l.newPos)});for(var n=0,r=l.others;n<r.length;n++){var a=r[n];i.push({element:a.element.id,pos:o().extend({},a.pos),newPos:o().extend({},a.newPos)})}wb_builder.historyAdd("moveElements",i,(function(e){for(var t=0,i=e.reverse();t<i.length;t++){var n=i[t],o=window.getElementById(n.element);o?o.setLocation(n.pos.left,n.pos.top):console.error("Unable to undo 'moveElement': element "+n.element+" not found.")}s.Service.group.updateGroupBounds()}),(function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t],o=window.getElementById(n.element);o?o.setLocation(n.newPos.left,n.newPos.top):console.error("Unable to redo 'moveElement': element "+n.element+" not found.")}s.Service.group.updateGroupBounds()}));var u=l.element;u.snapHandle.handleDraggableStop({type:"dragstop"},{position:u.getLocation(!0)}),l.onChange&&l.onChange(),l.handle.push&&(s.Service.element.unselectAll(),u.setControlsVisible(!0)),l=null,c=null}else c=null}()})))}return e.prototype.updateElements=function(e){this.elements=e},e.prototype.bindToElement=function(e){var t=this;e.on("mousedown touchstart",(function(e){return t.onDown(e)}))},e.prototype.setUseXAxis=function(e){this.useXAxis=e},e.prototype.onDown=function(e){if(0!=this.elements.length&&!this.elements[0].isLocked)return this.moveStarted=!1,this.startEvent=e,c=this,e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1},e.prototype.start=function(){if(this.startEvent){this.moveStarted=!0;var e=this.startEvent;wb_builder.bodyInstance.cacheBounds();var t=this.elements[0];!this.push&&t.isSelected()||s.Service.element.unselectAll(),t.setSelected(!0,!0,!0);for(var i=t.getLocation(),n=t.elem.offset(),o=(0,r.posFromEvent)(e),a=0,u=i.top,d=t.parent?t.parent.getChildren():[],h=[],p=1;p<this.elements.length;p++){var m=(y=this.elements[p]).getLocation();h.push({element:y,pos:m,newPos:{left:m.left,top:m.top}}),y.setSelected(!0,!0,!0)}if(this.push)for(var g=0,f=d;g<f.length;g++){var y;if(!(y=f[g]).isHidden()&&!y.isHidden(!0)){var b=(m=y.getLocation()).top+y.getHeightInPixels();b<i.top&&a<b&&(a=b),m.top<u||(h.push({element:y,pos:m,newPos:{left:m.left,top:m.top}}),y.setSelected(!0,!0,!0))}}else a=!1;var v,_,C=t.getParent();l={handle:this,onChange:this.onChange,useXAxis:this.useXAxis,updateParentSize:this.push,element:t,others:h,pos:i,newPos:{left:i.left,top:i.top},offset:(v=o,_=n,v.left-=_.left,v.top-=_.top,v),parentOffset:C?{left:C.pageLeft,top:C.pageTop}:{left:0,top:0},topLimit:a},t.snapHandle.handleDraggableStart({type:"dragstart"},{position:t.getLocation(!0)})}else c=null},e}()},"./element/MoveRelativeHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MoveRelativeHandle:function(){return _}});var n=i("./Service.ts"),o=i("./CommonTypes.ts"),s=i("./util/EventUtil.ts"),r=i("./util/DropZoneCalculator.ts"),a=i("./util/WindowAutoScrollUtil.ts"),l=i("./lib/jquery-1.11.3.min.js"),c=i.n(l),u=!1,d=null,h=null,p=(c()("<div>").css({position:"absolute",padding:0,margin:0,fontSize:"1px",lineHeight:"1px",overflow:"hidden",display:"block",zIndex:999,border:"1px solid blue",pointerEvents:"none",touchAction:"none"}),new a.WindowAutoScrollUtil),m="function"==typeof document.elementsFromPoint?document.elementsFromPoint:"function"==typeof document.msElementsFromPoint?document.msElementsFromPoint:null;function g(e,t){var i=!1,n=wb_builder.body[0];if(m){for(var o=m.call(document,e,t),s=0,r=o.length;s<r;s++)if(n.contains(o[s])){i=!0;break}}else i=n.contains(document.elementFromPoint(e,t));return i}function f(e){if(d){var t=(0,s.clientPosFromEvent)(e);if(g(t.left,t.top)){wb_builder.setPageModified(!0);var i=(0,s.posFromEvent)(e);d.dropAreas.dropElementsAt([d.element],i.left,i.top,window.scrollX,window.scrollY,!1,!(!h||h.isDummyPayload)),d.onChange&&d.onChange()}h&&h.cancel(),d.onDone&&d.onDone(),wb_builder.bodyInstance.hideInfoTip(),d=null,h=null}else h&&h.cancel()}var y=function(){function e(){this.active=!1,this.top=c()("<div>").addClass("wb-move-overlay wb-move-overlay-top"),this.right=c()("<div>").addClass("wb-move-overlay wb-move-overlay-right"),this.bottom=c()("<div>").addClass("wb-move-overlay wb-move-overlay-bottom"),this.left=c()("<div>").addClass("wb-move-overlay wb-move-overlay-left")}return e.prototype.attach=function(e){var t=c()(window),i=t.width(),n=t.height();this.top.css({left:e.left,width:e.width,height:e.top}),this.right.css({width:i-e.left-e.width}),this.bottom.css({left:e.left,width:e.width,height:n-e.top-e.height}),this.left.css({width:e.left}),c()(document.body).append(this.top).append(this.right).append(this.bottom).append(this.left),this.active=!0},e.prototype.detach=function(){this.active=!1,this.top.detach(),this.right.detach(),this.bottom.detach(),this.left.detach()},e}(),b=null;function v(){b&&b.active&&b.detach()}var _=function(){function e(e,t,i,n,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this.elements=e,this.builder=t,this.onChange=i,this.onDone=n,this.onStart=o,this.moveStarted=!1,this.startEvent=null,this.enabled=!0,this.noTargetChecks=!1,this.isDummyPayload=!1,this.lastEventType="",this.lastEventTime=0,!u){u=!0;var l=c()(document.body);l.on("mousemove touchmove",(function(e){return function(e){h&&(h.moveStarted||h.start(e),d&&p.start((0,s.clientPosFromEvent)(e),(function(e,t){if(d){var i=g(e.left,e.top)?d.dropAreas.findAreaAt(t.left,t.top,window.scrollX,window.scrollY):null;d.helper.css({left:t.left-d.offset.left,top:t.top-d.offset.top}),i?(d.helper.removeClass("wb-drag-helper-err"),a.WindowAutoScrollUtil.fitHtmlElementIntoWindow(d.helper),d.placeholder.removeClass("hidden").css({left:i.type===r.DropZoneAreaType.IntoAbsolute?t.left+i.helperPosition.left:i.helperPosition.left+(i.sticky?window.scrollX:0),top:i.type===r.DropZoneAreaType.IntoAbsolute?t.top+i.helperPosition.top:i.helperPosition.top+(i.sticky?window.scrollY:0),width:i.helperSize.width,height:i.helperSize.height})):(d.helper.addClass("wb-drag-helper-err"),d.placeholder.addClass("hidden"),wb_builder.bodyInstance.hideInfoTip()),d.onChange&&d.onChange()}else p.stop()})))}(e)})),l.on("mouseup touchend touchcancel",(function(e){return f(e)}))}}return e.fromToolbarItem=function(t,i,o,s){var r=n.Service.element.buildDummy(t.icon,t.name),a=new e([r],i,null,(function(){r.getParent()&&o((function(e){n.Service.element.replaceDummy(r,e)}))}),(function(){"function"==typeof s&&s();var e=t.elem.offset(),i=t.elem.width(),n=t.elem.height();r.pageLeft=e.left-(r.width-i)/2,r.pageTop=e.top-(r.height-n)/2}));return a.noTargetChecks=!0,a.isDummyPayload=!0,a.bindToElement(t.elem),a},e.prototype.updateElements=function(e){this.elements=e},e.prototype.bindToElement=function(e){var t=this;e.on("mousedown touchstart",(function(e){0!==e.button&&void 0!==e.button||t.onDown(e)}))},e.prototype.triggerDown=function(e){this.onDown(e)},e.prototype.triggerUp=function(e){f(e)},e.prototype.isEnabled=function(){return this.enabled},e.prototype.setEnabled=function(e){this.enabled=e},e.prototype.onDown=function(e){if(!("mousedown"==e.type&&"touchstart"==this.lastEventType&&Date.now()-this.lastEventTime<100)&&(this.lastEventType=e.type,this.lastEventTime=Date.now(),this.enabled&&0!=this.elements.length&&!this.elements[0].isLocked&&!this.startEvent&&("touchstart"!=e.type||this.noTargetChecks||this.elements[0].isSelected()))){if(!this.noTargetChecks){var t=e.target?c()(e.target):null;if(t&&!t.hasClass("wb_controls")&&!t.hasClass("wb_cover")&&!t.hasClass("wb_move_btn")&&!t.parent().hasClass("wb_move_btn"))return}return this.moveStarted=!1,this.startEvent=e,h=this,e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1}},e.prototype.cancel=function(){p.stop(),this.startEvent=null,d&&(d.placeholder&&d.placeholder.remove(),d.helper&&d.helper.remove(),d.element.controls.setMuted(!1),d.element.controls.setResizeHandlesVisible(!0),d.element.controls.setButtonsVisible(!0)),v(),h=null,this.moveStarted=!1},e.prototype.start=function(e){if(this.startEvent){var t=this.elements[0],i="new"===t.id&&!t.getParent()&&!t.index;if("new"===t.id||t.getParent()){var a=this.startEvent,l=(0,s.posFromEvent)(a);if(!((0,s.moveEventDiff)(a,e)<=4)){var u=t.getBoundingRect(!0),h=new r.DropZoneCalculator(wb_builder.bodyInstance.getChildren(),t,{left:i?-50:u.left-l.left,top:i?-50:u.top-l.top},{width:i?100:u.width,height:i?100:u.height});this.moveStarted=!0,wb_builder.bodyInstance.cacheBounds(),t.cacheBounds(),this.onStart&&this.onStart(),t.isSelected()||n.Service.element.unselectAll(),t.setSelected(!0,!0,!0),t.controls.setResizeHandlesVisible(!1);var p=c()('<div class="wb-drag-placeholder hidden">').appendTo(document.body),g=n.Service.element.buildDummy(t.getEmtyMessageImage(),t.getName(),70,70,!0).elem.css({zIndex:""}).appendTo(document.body);m||g.addClass("wb-drag-helper-fallback"),t.controls.setOutlineActive(!1),t.controls.setHover(!1),t.controls.setMuted(!0),t.controls.setButtonsVisible(!1),t.setSelected(!0,!0,!0),function(e){b&&b.active&&v();var t=e.getParent();t&&t.getChildrenLayout()==o.ChildrenLayoutType.Absolute&&(b||(b=new y),b.attach(t.getBoundingClientRect()))}(t),d={handle:this,dropAreas:h,helper:g,placeholder:p,onChange:this.onChange,onDone:this.onDone,element:t,offset:{left:35,top:35}}}}}else this.cancel()},e}()},"./element/OrderingHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{OrderingHandle:function(){return g}});var n,o=i("./util/EventUtil.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=!1,l=null,c=null,u=0;function d(e){var t;if(l)if(l.moveStarted)if(l.cachedItem&&l.helper){var i=l.cachedItem.item,s=(0,o.posFromEvent)(e),r=s.left,a=s.top;l.helper.css({left:r-l.itemOffset.left,top:a-l.itemOffset.top});var d,h=l.viewportBounds;(d=null===(t=l.container)||void 0===t?void 0:t.getParentViewport())&&d.height<h.height&&(h=d),a-window.scrollY<h.top+30?l.scrollContainer(-5):a-window.scrollY>h.top+h.height-30&&l.scrollContainer(5);for(var m=!1,g=0,f=l.affectedItems;g<f.length;g++){var y=f[g],b=y.item,v=y.bounds,_=b.getParent();if(!(r<v.left||r>v.left+v.width||a<v.top||a>v.top+v.height)){var C,w;if(C=a>v.top+v.height/2,w=a>v.top+.2*v.height&&a<v.top+.8*v.height,u&&(clearTimeout(u),u=0,c=null),w&&b!==i&&b.canAcceptItem(i)){l.setTarget(i,b,C,w),n.update(v,C,w),c=b.elem.get(0),u=setTimeout(p,500),m=!0;break}if(_&&_.canAcceptItem(i)){l.setTarget(i,b,C),n.update(v,C,!1),m=!0;break}}}m||(l.setTarget(null),n.hide()),l.setHelperOk(m),l.onChange&&l.onChange()}else l.cancel();else l.start(e)}function h(e){if(u&&(clearTimeout(u),u=0,c=null),l){var t=l.lastTarget;if(t.item&&t.refItem){var i=t.refItem.getParent();t.inside?t.refItem.addChild(t.item):i&&i.addChild(t.item,t.refItem,t.after)}l.onChange&&l.onChange(),l.cancel()}}function p(){c&&(r()(c).trigger("longhover"),c=null),l&&l.updateBounds(),u=0}var m=function(){function e(){this.inside=!1,this.elem=r()("<div>").addClass("wb-ordering-handle-marker"),this.hidden=!1,this.hide()}return e.prototype.update=function(e,t,i){var n=e.top-5;i?n+=5:t&&(n+=e.height),this.elem.css({top:n+"px",left:e.left-4+"px",width:e.width+8+"px",height:i?e.height+"px":""}),this.inside!=i&&(this.inside=i,i?this.elem.addClass("wb-ordering-handle-marker-inside"):this.elem.removeClass("wb-ordering-handle-marker-inside")),this.hidden&&(this.hidden=!1,this.elem.show())},e.prototype.hide=function(){this.hidden||(this.hidden=!0,this.elem.hide())},e}(),g=function(){function e(e,t,i){if(void 0===i&&(i=null),this.item=e,this.onChange=i,this.moveStarted=!1,this.startEvent=null,this.container=null,this.cachedItem=null,this.affectedItems=[],this.itemOffset={left:0,top:0},this.helper=null,this.helperOk=!1,this.lastTarget={item:null,refItem:null,after:!1,inside:!1},!a){a=!0;var o=r()(document.body);o.on("mousemove touchmove",(function(e){return d(e)})),o.on("mouseup touchend touchcancel",(function(e){return h()})),n=new m,o.append(n.elem)}}return e.prototype.bindToElement=function(e){var t=this;e.on("mousedown touchstart",(function(e){return t.onDown(e)}))},e.prototype.triggerDown=function(e){this.onDown(e)},e.prototype.setTarget=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!1),this.lastTarget.item=e,this.lastTarget.refItem=t,this.lastTarget.after=i,this.lastTarget.inside=n},e.prototype.setHelperOk=function(e){this.helper&&e!=this.helperOk&&(this.helperOk=e,e?this.helper.removeClass("wb-ordering-handle-helper-no"):this.helper.addClass("wb-ordering-handle-helper-no"))},e.prototype.setContainer=function(e){this.container=e},e.prototype.onDown=function(e){if(this.item)return this.moveStarted=!1,this.startEvent=e,l=this,e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1},e.prototype.cancel=function(){this.moveStarted=!1,this.startEvent=null,l&&l.helper&&(l.helper.remove(),l.helper=null),l=null,n.hide()},e.prototype.scrollContainer=function(e){this.container&&this.container.scrollItemsViewport(e)&&this.updateBounds()},e.prototype.updateBounds=function(){for(var e=0,t=this.affectedItems;e<t.length;e++){var i=t[e];i.bounds=i.item.getBounds()}},e.prototype.start=function(e){var t;if(this.startEvent&&l&&this.container){var i=this.startEvent;if(!((0,o.moveEventDiff)(i,e)<=4)){this.moveStarted=!0,this.cachedItem={item:this.item,bounds:this.item.getBounds()},this.viewportBounds=this.container.getItemsViewport(),this.affectedItems=[];for(var n=0,s=this.container.getAllOrderableItems(this.item);n<s.length;n++){var r=s[n];this.affectedItems.push({item:r,bounds:r.getBounds()})}t=(0,o.posFromEvent)(i),this.itemOffset.left=t.left,this.itemOffset.top=t.top,this.itemOffset.left-=this.cachedItem.bounds.left,this.itemOffset.top-=this.cachedItem.bounds.top,this.helper=this.item.elem.clone().addClass("wb-ordering-handle-helper").css({width:this.cachedItem.bounds.width,height:this.cachedItem.bounds.height}).on("mousemove touchmove",(function(e){return d(e)})).on("mouseup touchend touchcancel",(function(e){return h()})).detach().appendTo(document.body),this.helperOk=!0}}else this.cancel()},e}()},"./element/PasteUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{addPaste:function(){return c},pasteElements:function(){return u}});var n=i("./CommonTypes.ts"),o=(i("./PasteDialog.ts"),i("./WB_TextArea.class.js"),i("./ElementRegister.ts")),s=i("./Service.ts"),r=i("./util/HistoryUtil.ts"),a=i("./lib/jquery-1.11.3.min.js"),l=i.n(a);function c(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),n||e.addItem("paste",__("Paste"),null,!1,!1,null,"glyphicon glyphicon-download-alt");var o=e.getItem("paste");o&&l()(o).unbind("click"),e.setAction("paste",(function(){return u(e,t)}),!0),e.setVisible("paste",!0)}function u(e,t,i,a){t.cacheBounds(!0);var c,u=s.Service.modeManager.getMode(),d=e.pageX-t.left,h=e.pageY-t.offsetTop;if(a){var p=l().Deferred();p.resolve(a),c=p.promise()}else c=wb_builder.getClipboard();c.then((function(e){if(e){var a,l,c,p,m,g,f=[],y=null,b=[],v=t.getWidthInPixels(),_=t.getHeightInPixels();for(a=0;a<e.length;a++){var C=e[a];C.id=null,C._copy=!0,C.referenceTo=void 0,C.isCommon=!1,C.includePages=null,C.anchor=null;var w=C.class?o.ElementRegister.getClassByName(C.class):null;if(!w)return;(l=new w(C)).switchMode(u,u,!0),f.push(l),Object.keys(l.modes).length||(l.modes[u]=l.modeClass()),c=l.left,p=l.top,m=(0,n.convertToPixels)(l.width,v),g=(0,n.convertToPixels)(l.height,_),y?(y.x=Math.min(y.x,c),y.y=Math.min(y.y,p),y.width=Math.max(y.width,c+m-y.x),y.height=Math.max(y.height,p+g-y.y)):y={x:c,y:p,width:m,height:g}}if(y){var T=i;for(a=0;a<f.length;a++){l=f[a];var E=y.x-l.left,I=y.y-l.top;l.setLocation(d-E,h-I),t.addChild(l,void 0,void 0,T,!!T||void 0),l.onResize(!0),b.push(l),T&&(T=l)}}b.length>0&&(0,r.createAddElementsHistoryRecord)(b),s.Service.group.initGroups(b,!0)}}))}s.Service.paste={addPaste:c}},"./element/Properties.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BaseObject:function(){return c},Property:function(){return a},PropertyUIBinding:function(){return l}});var n=i("./util/ComparisonUtil.ts"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./core/BuilderConfig.ts"),a=function(){function e(e){this.listeners=new WeakMap,s().extend(this,e)}return e.prototype.get=function(e){if(!this.getter)throw new Error("Property ".concat(this.name," has no getter"));return this.getter.call(e)},e.prototype.set=function(t,i,o,s,r){var a;if(void 0===o&&(o=!1),void 0===s&&(s=!1),!this.setter)throw new Error("Property ".concat(this.name," has no setter"));if(o=o||e.userInteractionLevel>0,!s){var l=(null===(a=this.type)||void 0===a?void 0:a.defaultValueComparator)||this.comparator;if("function"==typeof l){if(l.call(t,i,this.get(t),r))return}else if(!1!==l&&n.ComparisonUtil.checkEqualsRecursive(i,this.get(t)))return}this.triggerBeforeChange(t,o),this.setter.call(t,i),this.triggerChange(t,o)},e.prototype.serialize=function(e){var t=this.get(e);return this.serializer?this.serializer.call(e,t):this.type&&this.type.serializer?this.type.serializer.call(e,t):(null!==t&&"object"==typeof t&&(t=s().extend(!0,Array.isArray(t)?[]:{},t)),t)},e.prototype.deserialize=function(t,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var r=i;n=n||e.userInteractionLevel>0,this.deserializer?r=this.deserializer.call(t,r):this.type&&this.type.deserializer?r=this.type.deserializer.call(t,r):null!==r&&"object"==typeof r&&(r=s().extend(!0,Array.isArray(r)?[]:{},r)),this.set(t,r,n,o)},e.prototype.triggerBeforeChange=function(t,i){void 0===i&&(i=!1),i=i||e.userInteractionLevel>0,this.onBeforeChange&&this.onBeforeChange.call(t,this,t,i),"function"==typeof t.onBeforePropertyChange&&t.onBeforePropertyChange(this,i)},e.prototype.triggerChange=function(t,i){void 0===i&&(i=!1),i=i||e.userInteractionLevel>0,this.onChange&&this.onChange.call(t,this,t,i);var n=this.listeners.get(t);if(n)for(var o=0,s=n;o<s.length;o++)s[o].call(t,this,t,i);"function"==typeof t.onPropertyChanged&&t.onPropertyChanged(this,i)},e.prototype.addListener=function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)},e.prototype.removeListener=function(e,t){var i=this.listeners.get(e);if(i){var n=i.indexOf(t);n>=0&&i.splice(n,1)}},e.prototype.getUIComponentOptions=function(e){var t,i=this.uiComponentOptions,n=(null===(t=this.type)||void 0===t?void 0:t.defaultComponentOptions)||{};return i?s().extend({},n,"function"==typeof i?i.call(e,e):i):n},e.beginUserInteraction=function(){e.userInteractionLevel++},e.endUserInteraction=function(){--e.userInteractionLevel<0&&(e.userInteractionLevel=0,console.error("Inconsistent amount of beginUserInteraction() and endUserInteraction() method calls."))},e.userInteractionLevel=0,e}(),l=function(){function e(e,t,i,n){this.owner=e,this.property=t,this.component=i,this.boundListener=n.bind(this.component),this.property.addListener(this.owner,this.boundListener)}return e.prototype.destroy=function(){this.property.removeListener(this.owner,this.boundListener)},e.prototype.getValue=function(){return this.property.get(this.owner)},e.prototype.setValue=function(e,t){void 0===t&&(t=!1),this.property.set(this.owner,e,t,!1,this.component)},e.prototype.getUIComponentOptions=function(){return this.property.getUIComponentOptions(this.owner)},e}(),c=function(){function e(){this._invalid=!1,this.registerPropertiesInternal()}return e.prototype.invalidate=function(){var e=this;return this._invalid||(this._invalid=!0,requestAnimationFrame((function(){e._invalid=!1,e.revalidate()}))),this},e.prototype.revalidate=function(){return this._invalid=!1,this},e.prototype.registerPropertiesInternal=function(){e._properties.has(Object.getPrototypeOf(this))||this.registerProperties()},e.prototype.registerProperties=function(){},e.prototype.registerProperty=function(t){var i,n,o,s,l=Object.getPrototypeOf(this);if(e._properties.has(l)||(e._properties.set(l,{}),e._properties_dependants.set(l,{})),o=e._properties.get(l),s=e._properties_dependants.get(l),o.hasOwnProperty(t.name))console.error("Same property is getting registered more than once!",t,l);else if(null===(i=t.type)||void 0===i?void 0:i.isButton)o[t.name]=new a(t);else{var c,u=this.className||(null===(n=l.constructor)||void 0===n?void 0:n.name);if(t.prop)return t.getter=t.prop.get,t.setter=t.prop.set,delete t.prop,void(o[t.name]=new a(t));var d,h=l;do{if(c=Object.getOwnPropertyDescriptor(h,t.name))break;h=Object.getPrototypeOf(h)}while(h);if(c&&(!c.writable||c.get||c.set)||(d="__dprop_"+t.name,c?((r.wbConfig.devDebugMode||r.wbConfig.devTestMode)&&console.info("Replacing field ".concat(t.name," in ").concat(u," class with property that will read/write field ").concat(d)),l[d]=l[t.name]):((r.wbConfig.devDebugMode||r.wbConfig.devTestMode)&&console.info("Creating a dynamic property ".concat(t.name," in ").concat(u," class that will read/write field ").concat(d)),l[d]=void 0),c={get:function(){return this[d]},set:function(e){this[d]=e},configurable:!0,enumerable:!0}),c.get&&c.set){t.getter||(t.getter=c.get),t.setter||(t.setter=c.set);var p=new a(t);if(o[t.name]=p,t.dependencies)for(var m=0,g=t.dependencies;m<g.length;m++){var f=g[m];f!==t.name&&(s.hasOwnProperty(f)||(s[f]=[]),s[f].push(p))}c.set=function(e){p.set(this,e)},Object.defineProperty(l,t.name,c)}else console.warn('Property "'.concat(t.name,'" of ').concat(u," class must have both getter and setter"))}},e.prototype.getProperties=function(){return this.registerPropertiesInternal(),e._properties.get(Object.getPrototypeOf(this))},e.prototype.getProperty=function(e){var t=this.getProperties();return t.hasOwnProperty(e)?t[e]:null},e.prototype.getDependingProperties=function(t){var i=Object.getPrototypeOf(this);if(!e._properties_dependants.has(i))return[];var n=e._properties_dependants.get(i);return n.hasOwnProperty(t.name)?n[t.name]:[]},e.prototype.onBeforePropertyChange=function(e,t){},e.prototype.onPropertyChanged=function(e,t){},e._properties=new Map,e._properties_dependants=new Map,e}()},"./element/PropertyType.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PropertyType:function(){return Q},PropertyTypeAccess:function(){return n}});var n,o=i("./SizeSelector.ts"),s=i("./CheckBox.js"),r=i.n(s),a=i("./TextField.ts"),l=i("./SpacingSelector.ts"),c=i("./SliderControl.ts"),u=i("./ui/CommonalitySelectorControl.ts"),d=i("./ui/FlexLayoutControl.ts"),h=i("./UIModeScaleFactors.ts"),p=i("./BackgroundControl.ts"),m=i("./UIComponent.ts"),g=i("./BorderControl.ts"),f=i("./RoundCornersControl.ts"),y=i("./WB_URLControl.class.js"),b=i.n(y),v=i("./ui/RadioBoxGroupControl.ts"),_=i("./MultilangTextField.js"),C=i.n(_),w=i("./WB_ImagePicker.class.js"),T=i.n(w),E=i("./ColorPicker.ts"),I=i("./HAlignSelector.ts"),x=i("./FontStyleSelector.ts"),S=i("./ui/StaticTextControl.ts"),k=i("./ui/GalleryTypeSelector.ts"),D=i("./TextControl.ts"),O=i("./WB_StyleControl.class.js"),R=i.n(O),P=i("./DropdownBox.ts"),L=i("./ui/FormFieldsControl.ts"),A=i("./ui/GoogleMapsPlacesControl.ts"),M=i("./UIButton.ts"),B=i("./ContactFormControl.ts"),N=i("./ui/BackgroundElementSelector.ts"),F=i("./ui/SiteLanguagesControl.ts"),K=i("./blog/BlogPropertyDialog.ts"),V=i("./AlignSelector.ts"),H=i("./ui/ButtonStyleControl.ts"),j=i("./ui/MenuStyleControl.ts"),U=i("./ui/LineStyleControl.ts"),z=i("./ui/ScriptEditorControl.ts"),W=i("./ui/YandexMapsPlacesControl.ts"),G=i("./ui/BingMapsPlacesControl.ts"),$=i("./ui/BaiduMapsPlacesControl.ts"),q=i("./ui/TextInputButtonControl.ts"),Y=i("./ui/EcwidWidgetControl.ts"),Z=i("./WYSIWYGControl.ts"),X=i("./ui/AnimationControl.ts");!function(e){e[e.User=0]="User",e[e.Admin=1]="Admin",e[e.Developer=2]="Developer",e[e.ComposerOrAdmin=3]="ComposerOrAdmin"}(n||(n={}));var J=function(){var e=new(r())(""),t=e.setValue,i=!0;return e.setValue=function(n){t.call(this,n),i!=n&&(i=n,e.css({marginTop:n?"0px":"23px",marginBottom:n?"1px":""}))},e.setValue(!1),e},Q=function(){function e(t,i,n,o,s,r,a,l,c,u,d){void 0===r&&(r=null),void 0===a&&(a=null),void 0===d&&(d=!1),this.inlineSize=0,this.id=t,this.path=t.split("/"),this.accessLevel=i,this.allowMultipleObjectBindings=n,this.componentSupportsMultipleObjectBindings=!(!s||"function"!=typeof s.supportsMultipleObjectBindings)&&s.supportsMultipleObjectBindings(),this.name=o,this.component=s,this.componentFactory=r,this.defaultComponentOptions=a,this.defaultValueComparator=l,this.isButton=!(!s||"function"!=typeof s.componentBindsAsButton)&&s.componentBindsAsButton(),this.isElementReference=d,this.serializer=c,this.deserializer=u,e.nextSortOrder||(e.nextSortOrder=0),e.sortOrderStep||(e.sortOrderStep=1e3),this.sortOrder=e.nextSortOrder,e.nextSortOrder+=e.sortOrderStep,e.sortMap||(e.sortMap={}),e.categoryTranslations||e.loadTranslations();for(var h=this.path.length-1;h>=0;h--){var p=this.path.slice(0,h+1).join("/");if(e.sortMap.hasOwnProperty(p)?e.sortMap[p]=Math.min(e.sortMap[p],this.sortOrder):e.sortMap[p]=this.sortOrder,h<this.path.length-1&&!e.categoryTranslations.hasOwnProperty(p)){var m=this.path[h],g=m.charAt(0).toUpperCase()+m.slice(1);e.categoryTranslations[p]=g,console.warn('No translation for property path "'.concat(p,'". Using "').concat(g,'"'))}}}return e.loadTranslations=function(){e.categoryTranslations={active:__("Active"),advanced:__("Advanced"),api:__("API"),background:__("Background"),banner:__("Banner"),blog:__("Blog"),border:__("Border"),captcha:__("Google reCAPTCHA")+" (v2)",captions:__("Captions"),contacts:__("Contacts"),content:__("Content"),debug:"Debug",details:__("Details"),email:__("Email settings"),filter:__("Filter"),flags:__("Flag settings"),formFields:__("Fields"),gallery:__("Gallery"),general:__("General"),"general/lineGrp1":"","general/lineGrp1/c1":"",image:__("Picture"),labels:__("Labels"),layout:__("Layout"),"layout/position":__("Position"),listing:__("Listing"),map:__("Map"),menu:__("Menu"),menuItems:__("Menu Items"),music:__("Music"),normalItem:__("Normal item"),onClick:__("Link"),onHover:__("Hover"),plugin:__("Plugin"),position:__("Size"),"position/position":"","position/size":"","position/size/checkboxes":"","position/size/height":"","position/size/_height":"","position/size/_height/max":"","position/size/_height/min":"","position/size/width":"","position/size/_width":"","position/size/_width/max":"","position/size/_width/min":"","thumbnails/_no_name_padal":"","thumbnails/_no_name_size":"","thumbnails/_no_name_border":"",price:__("Price"),sharing:__("Sharing"),share:__("Share"),slideShow:__("Slideshow"),smtp:__("SMTP"),spacing:__("Spacing"),store:__("Store"),table:__("Table"),text:__("Text"),template:__("Template"),thumbnails:__("Thumbnails"),video:__("Video"),visibility:__("Visibility"),animation:__("Animation"),"store cart/_no_name":"","store cart/buttonIcon":"","store cart/buttonIcon/_icon":"","store cart/buttonIcon/_icon/size":"","store cart/buttonIcon/_icon/size/width":"","store cart/buttonIcon/_icon/size/height":""}},e.getCategoryTranslation=function(e){return this.categoryTranslations.hasOwnProperty(e)?this.categoryTranslations[e]:"[".concat(e,"]")},e.prototype.inline=function(e){return void 0===e&&(e=12),this.inlineSize=e,this},e.compare=function(e,t){for(var i=Math.min(e.path.length,t.path.length),n=0;n<i;n++){var o=e.path.slice(0,n+1).join("/"),s=t.path.slice(0,n+1).join("/"),r=this.sortMap[o],a=this.sortMap[s];if(r!==a)return r<a?-1:1}return e.path.length===t.path.length?e.id<t.id?-1:1:e.path.length<t.path.length?-1:1},e.GetbuttonMessenger=new e("getbutton/GetbuttonMessenger",n.User,!0,__("Facebook Messenger"),r()),e.GetbuttonMessengerTextfield=new e("getbutton/GetbuttonMessengerTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:"Facebook Page ID"}),e.GetbuttonWhatsapp=new e("getbutton/GetbuttonWhatsapp",n.User,!0,__("WhatsApp"),r()),e.GetbuttonWhatsappTextfield=new e("getbutton/GetbuttonWhatsappTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:"+1 (800) 123-45-67"}),e.GetbuttonViber=new e("getbutton/GetbuttonViber",n.User,!0,__("Viber"),r()),e.GetbuttonViberTextfield=new e("getbutton/GetbuttonViberTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Phone Number or ID")}),e.GetbuttonSnapchat=new e("getbutton/GetbuttonSnapchat",n.User,!0,__("Snapchat"),r()),e.GetbuttonSnapchatTextfield=new e("getbutton/GetbuttonSnapchatTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Username")}),e.GetbuttonLine=new e("getbutton/GetbuttonLine",n.User,!0,__("Line"),r()),e.GetbuttonLineTextfield=new e("getbutton/GetbuttonLineTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("QR code URL")}),e.GetbuttonTelegram=new e("getbutton/GetbuttonTelegram",n.User,!0,__("Telegram"),r()),e.GetbuttonTelegramTextfield=new e("getbutton/GetbuttonTelegramTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Bot username")}),e.GetbuttonVkontakte=new e("getbutton/GetbuttonVkontakte",n.User,!0,__("Vkontakte"),r()),e.GetbuttonVkontakteTextfield=new e("getbutton/GetbuttonVkontakteTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Page name")}),e.GetbuttonSms=new e("getbutton/GetbuttonSms",n.User,!0,__("SMS (mobile)"),r()),e.GetbuttonSmsTextfield=new e("getbutton/GetbuttonSmsTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Phone number")}),e.GetbuttonCall=new e("getbutton/GetbuttonCall",n.User,!0,__("Call"),r()),e.GetbuttonCallTextfield=new e("getbutton/GetbuttonCallTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Phone number")}),e.GetbuttonEmail=new e("getbutton/GetbuttonEmail",n.User,!0,__("Email"),r()),e.GetbuttonEmailTextfield=new e("getbutton/GetbuttonEmailTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Phone number")}),e.GetbuttonInstagram=new e("getbutton/GetbuttonInstagram",n.User,!0,__("Instagram"),r()),e.GetbuttonInstagramTextfield=new e("getbutton/GetbuttonInstagramTextfield",n.User,!0,__(""),a.TextField,null,{placeholder:__("Username")}),e.GetbuttonActivatePro=new e("getbutton - PRO/GetbuttonActivatePro",n.User,!0,__("Pro version key"),q.TextInputButtonControl),e.GetbuttonProGreeting=new e("getbutton - PRO/GetbuttonProGreeting",n.User,!0,__("Greeting message"),a.TextField,null,{placeholder:__("Hello, how may we help you? Just send us a message now to get assistance.")}),e.GetbuttonProCompanyUrl=new e("getbutton - PRO/GetbuttonProCompanyUrl",n.User,!0,__("Company Logo URL"),a.TextField,null,{placeholder:__("URL")}),e.GetbuttonProDisableBranding=new e("getbutton - PRO/GetbuttonProDisableBranding",n.User,!0,__("Disable branding"),r()),e.GetbuttonProGoogleAnalytics=new e("getbutton - PRO/GetbuttonProGoogleAnalytics",n.User,!0,__("Track clicks in Google Analytics"),r()),e.GetbuttonProCustomColor=new e("getbutton - PRO/GetbuttonProCustomColor",n.User,!0,__("Colour"),E.ColorPicker,null,{noAlpha:!1,noTransparent:!0}),e.GetbuttonProVPosition=new e("getbutton - PRO/position/GetbuttonProVPosition",n.User,!0,__("Vertical"),o.SizeSelector,null,{min:0,max:300,units:"px",hideSpinner:!0}).inline(6),e.GetbuttonProHPosition=new e("getbutton - PRO/position/GetbuttonProHPosition",n.User,!0,__("Horizontal"),o.SizeSelector,null,{min:0,max:300,units:"px",hideSpinner:!0}).inline(6),e.GetbuttonCallToAction=new e("settings/GetbuttonCallToAction",n.User,!0,__("Call to action"),a.TextField,null,{placeholder:__("Message us")}),e.GetbuttonPosition=new e("settings/GetbuttonPosition",n.User,!0,__("Position"),v.RadioBoxGroupControl,null,{options:[{value:!1,label:__("Right")},{value:!0,label:__("Left")}]}).inline(6),e.GetbuttonColor=new e("settings/GetbuttonColor",n.User,!0,__("Colour"),P.DropdownBox,null,{useHtmlInput:!0,options:[{id:"#666666",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #666666;"></div>'},{id:"#E74339",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #E74339;"></div>'},{id:"#ffa500",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffa500;"></div>'},{id:"#008000",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #008000;"></div>'},{id:"#0000ff",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #0000ff;"></div>'},{id:"#800080",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #800080;"></div>'},{id:"#ffc0cb",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffc0cb;"></div>'},{id:"#000000",html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #000000;"></div>'}]}).inline(6),e.ZopimGroupId=new e("zendesk/ZopimGroupId",n.User,!0,__("Widget key"),a.TextField,null,{placeholder:""}),e.OlarkGroupId=new e("olark/OlarkGroupId",n.User,!0,__("Site ID"),a.TextField,null,{placeholder:"1111-222-33-4444",helpText:__('You can find your Site ID in Olark Admin Panel, Settings => Installation => "Get embed code". Enter the ID you will find at the bottom of the code inside olark.identify parentheses, i.e. "1111-222-33-4444"')}),e.TawktoSiteId=new e("tawk.to/TawktoSiteId",n.User,!0,__("Site ID"),a.TextField,null,{placeholder:""}),e.CountdownTimerEndDateString=new e("countdown/CountdownTimerEndDateString",n.User,!0,__("End date"),a.TextField,(function(){var e=new a.TextField;return e.getElem().datepicker({dateFormat:"yy-mm-dd"}),e}),{placeholder:"00:00"}).inline(6),e.CountdownTimerEndTime=new e("countdown/CountdownTimerEndTime",n.User,!0,__("End time"),a.TextField,null,{placeholder:"00:00",inputType:"time"}).inline(6),e.CountdownTimerFontCountdown=new e("countdown/CountdownTimerFontCountdown",n.User,!0,__("Countdown"),D.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!0,noAlign:!0,noSpacing:!0},!1),e.CountdownTimerFontText=new e("countdown/CountdownTimerFontText",n.User,!0,__("Text"),D.TextControl,null,{ttplacement:"top",horizontal:!0,noAlign:!0,noSpacing:!0},!1),e.CountdownCaptionSpacing=new e("countdown/CountdownCaptionSpacing",n.User,!0,__("Caption spacing"),o.SizeSelector,null,{min:0,max:9999,hideSpinner:!0,units:"px"}).inline(6),e.CountdownCaptionPosition=new e("countdown/CountdownCaptionPosition",n.User,!0,__("Caption position"),v.RadioBoxGroupControl,null,{options:[{value:"top",label:__("Top")},{value:"bottom",label:__("Bottom")}]}).inline(6),e.CountUpFrom=new e("Count Up/from",n.User,!0,__("From"),o.SizeSelector,null,{min:0,max:Math.pow(2,53)-1}).inline(6),e.CountUpTo=new e("Count Up/to",n.User,!0,__("To"),o.SizeSelector,null,{min:0,max:Math.pow(2,53)-1}).inline(6),e.CountUpDuration=new e("Count Up/duration",n.User,!0,__("Duration"),c.SliderControl,null,{min:1,max:6,unit:"s"}),e.CountUpText=new e("Count Up/text",n.User,!0,__("Text"),D.TextControl,null),e.MellatTerminalId=new e("mellat/MellatTerminalId",n.User,!0,__("Terminal ID"),a.TextField,null,{placeholder:""}),e.MellatUsername=new e("mellat/MellatUsername",n.User,!0,__("Username"),a.TextField,null,{placeholder:""}),e.MellatPassword=new e("mellat/MellatPassword",n.User,!0,__("Password"),a.TextField,null,{placeholder:""}),e.MellatAdditionalData=new e("mellat/MellatAdditionalData",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.MellatAmount=new e("mellat/MellatAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.MellatIsTest=new e("mellat/MellatIsTest",n.User,!0,__("Test mode"),r()),e.PaymentezAppCode=new e("paymentez/PaymentezAppCode",n.User,!0,__("Application Code"),a.TextField,null,{placeholder:""}),e.PaymentezAppKey=new e("paymentez/PaymentezAppKey",n.User,!0,__("Application Key"),a.TextField,null,{placeholder:""}),e.PaymentezOrderDesc=new e("paymentez/PaymentezOrderDesc",n.User,!0,__("Order Description"),a.TextField,null,{placeholder:""}),e.PaymentezOrderAmount=new e("paymentez/PaymentezOrderAmount",n.User,!0,__("Order Amount"),a.TextField,null,{placeholder:""}).inline(6),e.PaymentezCurrencyCode=new e("paymentez/PaymentezCurrencyCode",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"COP",name:"COP",value:"COP"},{id:"USD",name:"USD",value:"USD"},{id:"BRL",name:"BRL",value:"BRL"},{id:"MXN",name:"MXN",value:"MXN"},{id:"ARS",name:"ARS",value:"ARS"},{id:"CLP",name:"CLP",value:"CLP"},{id:"PEN",name:"PEN",value:"PEN"}]}).inline(6),e.PaymentezIsTest=new e("paymentez/PaymentezIsTest",n.User,!0,__("Test mode"),r()),e.KlarnaUsername=new e("klarna/KlarnaUsername",n.User,!0,__("Username"),a.TextField,null,{placeholder:""}),e.KlarnaPassword=new e("klarna/KlarnaPassword",n.User,!0,__("Password"),a.TextField,null,{placeholder:""}),e.KlarnaItemName=new e("klarna/KlarnaItemName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.KlarnaDefaultCountry=new e("klarna/KlarnaDefaultCountry",n.User,!0,__("Default billing country"),P.DropdownBox,null,{options:[{id:"AX",value:"AX",name:"Åland Islands"},{id:"AL",value:"AL",name:"Albania"},{id:"DZ",value:"DZ",name:"Algeria"},{id:"AS",value:"AS",name:"American Samoa"},{id:"AD",value:"AD",name:"Andorra"},{id:"AI",value:"AI",name:"Anguilla"},{id:"AQ",value:"AQ",name:"Antarctica"},{id:"AG",value:"AG",name:"Antigua and Barbuda"},{id:"AR",value:"AR",name:"Argentina"},{id:"AM",value:"AM",name:"Armenia"},{id:"AW",value:"AW",name:"Aruba"},{id:"AU",value:"AU",name:"Australia"},{id:"AT",value:"AT",name:"Austria"},{id:"AZ",value:"AZ",name:"Azerbaijan"},{id:"BS",value:"BS",name:"Bahamas"},{id:"BH",value:"BH",name:"Bahrain"},{id:"BD",value:"BD",name:"Bangladesh"},{id:"BB",value:"BB",name:"Barbados"},{id:"BY",value:"BY",name:"Belarus"},{id:"BE",value:"BE",name:"Belgium"},{id:"BZ",value:"BZ",name:"Belize"},{id:"BJ",value:"BJ",name:"Benin"},{id:"BM",value:"BM",name:"Bermuda"},{id:"BT",value:"BT",name:"Bhutan"},{id:"BO",value:"BO",name:"Bolivia"},{id:"BA",value:"BA",name:"Bosnia and Herzegovina"},{id:"BW",value:"BW",name:"Botswana"},{id:"BR",value:"BR",name:"Brazil"},{id:"BQ",value:"BQ",name:"British Antarctic Territory"},{id:"VG",value:"VG",name:"British Virgin Islands"},{id:"BN",value:"BN",name:"Brunei"},{id:"BG",value:"BG",name:"Bulgaria"},{id:"BF",value:"BF",name:"Burkina Faso"},{id:"CM",value:"CM",name:"Cameroon"},{id:"CA",value:"CA",name:"Canada"},{id:"CV",value:"CV",name:"Cape Verde"},{id:"KY",value:"KY",name:"Cayman Islands"},{id:"CF",value:"CF",name:"Central African Republic"},{id:"CL",value:"CL",name:"Chile"},{id:"CN",value:"CN",name:"China"},{id:"CX",value:"CX",name:"Christmas Island"},{id:"CO",value:"CO",name:"Colombia"},{id:"KM",value:"KM",name:"Comoros"},{id:"CK",value:"CK",name:"Cook Islands"},{id:"CR",value:"CR",name:"Costa Rica"},{id:"CI",value:"CI",name:"Côte d’Ivoire"},{id:"HR",value:"HR",name:"Croatia"},{id:"CU",value:"CU",name:"Cuba"},{id:"CY",value:"CY",name:"Cyprus"},{id:"CZ",value:"CZ",name:"Czech Republic"},{id:"DK",value:"DK",name:"Denmark"},{id:"DJ",value:"DJ",name:"Djibouti"},{id:"DM",value:"DM",name:"Dominica"},{id:"DO",value:"DO",name:"Dominican Republic"},{id:"EC",value:"EC",name:"Ecuador"},{id:"EG",value:"EG",name:"Egypt"},{id:"SV",value:"SV",name:"El Salvador"},{id:"ER",value:"ER",name:"Eritrea"},{id:"EE",value:"EE",name:"Estonia"},{id:"ET",value:"ET",name:"Ethiopia"},{id:"FK",value:"FK",name:"Falkland Islands"},{id:"FO",value:"FO",name:"Faroe Islands"},{id:"FJ",value:"FJ",name:"Fiji"},{id:"FI",value:"FI",name:"Finland"},{id:"FR",value:"FR",name:"France"},{id:"GF",value:"GF",name:"French Guiana"},{id:"PF",value:"PF",name:"French Polynesia"},{id:"TF",value:"TF",name:"French Southern Territories"},{id:"GA",value:"GA",name:"Gabon"},{id:"GM",value:"GM",name:"Gambia"},{id:"GE",value:"GE",name:"Georgia"},{id:"DE",value:"DE",name:"Germany"},{id:"GH",value:"GH",name:"Ghana"},{id:"GI",value:"GI",name:"Gibraltar"},{id:"GR",value:"GR",name:"Greece"},{id:"GL",value:"GL",name:"Greenland"},{id:"GD",value:"GD",name:"Grenada"},{id:"GP",value:"GP",name:"Guadeloupe"},{id:"GU",value:"GU",name:"Guam"},{id:"GT",value:"GT",name:"Guatemala"},{id:"GG",value:"GG",name:"Guernsey"},{id:"GN",value:"GN",name:"Guinea"},{id:"GY",value:"GY",name:"Guyana"},{id:"HN",value:"HN",name:"Honduras"},{id:"HK",value:"HK",name:"Hong Kong SAR China"},{id:"HU",value:"HU",name:"Hungary"},{id:"IS",value:"IS",name:"Iceland"},{id:"IN",value:"IN",name:"India"},{id:"ID",value:"ID",name:"Indonesia"},{id:"IE",value:"IE",name:"Ireland"},{id:"IM",value:"IM",name:"Isle of Man"},{id:"IL",value:"IL",name:"Israel"},{id:"IT",value:"IT",name:"Italy"},{id:"JM",value:"JM",name:"Jamaica"},{id:"JP",value:"JP",name:"Japan"},{id:"JE",value:"JE",name:"Jersey"},{id:"JO",value:"JO",name:"Jordan"},{id:"KZ",value:"KZ",name:"Kazakhstan"},{id:"KE",value:"KE",name:"Kenya"},{id:"KI",value:"KI",name:"Kiribati"},{id:"KW",value:"KW",name:"Kuwait"},{id:"KG",value:"KG",name:"Kyrgyzstan"},{id:"LA",value:"LA",name:"Laos"},{id:"LV",value:"LV",name:"Latvia"},{id:"LB",value:"LB",name:"Lebanon"},{id:"LS",value:"LS",name:"Lesotho"},{id:"LR",value:"LR",name:"Liberia"},{id:"LI",value:"LI",name:"Liechtenstein"},{id:"LT",value:"LT",name:"Lithuania"},{id:"LU",value:"LU",name:"Luxembourg"},{id:"MO",value:"MO",name:"Macau SAR China"},{id:"MK",value:"MK",name:"Macedonia"},{id:"MG",value:"MG",name:"Madagascar"},{id:"MW",value:"MW",name:"Malawi"},{id:"MY",value:"MY",name:"Malaysia"},{id:"MV",value:"MV",name:"Maldives"},{id:"ML",value:"ML",name:"Mali"},{id:"MT",value:"MT",name:"Malta"},{id:"MH",value:"MH",name:"Marshall Islands"},{id:"MQ",value:"MQ",name:"Martinique"},{id:"MR",value:"MR",name:"Mauritania"},{id:"MU",value:"MU",name:"Mauritius"},{id:"YT",value:"YT",name:"Mayotte"},{id:"MX",value:"MX",name:"Mexico"},{id:"FM",value:"FM",name:"Micronesia"},{id:"MD",value:"MD",name:"Moldova"},{id:"MC",value:"MC",name:"Monaco"},{id:"MN",value:"MN",name:"Mongolia"},{id:"ME",value:"ME",name:"Montenegro"},{id:"MA",value:"MA",name:"Morocco"},{id:"MZ",value:"MZ",name:"Mozambique"},{id:"MM",value:"MM",name:"Myanmar [Burma]"},{id:"NA",value:"NA",name:"Namibia"},{id:"NR",value:"NR",name:"Nauru"},{id:"NP",value:"NP",name:"Nepal"},{id:"NL",value:"NL",name:"Netherlands"},{id:"NC",value:"NC",name:"New Caledonia"},{id:"NZ",value:"NZ",name:"New Zealand"},{id:"NI",value:"NI",name:"Nicaragua"},{id:"NE",value:"NE",name:"Niger"},{id:"NG",value:"NG",name:"Nigeria"},{id:"NU",value:"NU",name:"Niue"},{id:"NF",value:"NF",name:"Norfolk Island"},{id:"MP",value:"MP",name:"Northern Mariana Islands"},{id:"NO",value:"NO",name:"Norway"},{id:"OM",value:"OM",name:"Oman"},{id:"PK",value:"PK",name:"Pakistan"},{id:"PW",value:"PW",name:"Palau"},{id:"PS",value:"PS",name:"Palestinian Territories"},{id:"PA",value:"PA",name:"Panama"},{id:"PG",value:"PG",name:"Papua New Guinea"},{id:"PY",value:"PY",name:"Paraguay"},{id:"PE",value:"PE",name:"Peru"},{id:"PH",value:"PH",name:"Philippines"},{id:"PL",value:"PL",name:"Poland"},{id:"PT",value:"PT",name:"Portugal"},{id:"PR",value:"PR",name:"Puerto Rico"},{id:"QA",value:"QA",name:"Qatar"},{id:"RE",value:"RE",name:"Réunion"},{id:"RO",value:"RO",name:"Romania"},{id:"RU",value:"RU",name:"Russia"},{id:"RW",value:"RW",name:"Rwanda"},{id:"BL",value:"BL",name:"Saint Barthélemy"},{id:"SH",value:"SH",name:"Saint Helena"},{id:"KN",value:"KN",name:"Saint Kitts and Nevis"},{id:"LC",value:"LC",name:"Saint Lucia"},{id:"MF",value:"MF",name:"Saint Martin"},{id:"PM",value:"PM",name:"Saint Pierre and Miquelon"},{id:"VC",value:"VC",name:"Saint Vincent and the Grenadines"},{id:"WS",value:"WS",name:"Samoa"},{id:"SM",value:"SM",name:"San Marino"},{id:"ST",value:"ST",name:"São Tomé and Príncipe"},{id:"SA",value:"SA",name:"Saudi Arabia"},{id:"SN",value:"SN",name:"Senegal"},{id:"RS",value:"RS",name:"Serbia"},{id:"SC",value:"SC",name:"Seychelles"},{id:"SL",value:"SL",name:"Sierra Leone"},{id:"SG",value:"SG",name:"Singapore"},{id:"SK",value:"SK",name:"Slovakia"},{id:"SI",value:"SI",name:"Slovenia"},{id:"SB",value:"SB",name:"Solomon Islands"},{id:"ZA",value:"ZA",name:"South Africa"},{id:"GS",value:"GS",name:"South Georgia and the South Sandwich Islands"},{id:"KR",value:"KR",name:"South Korea"},{id:"ES",value:"ES",name:"Spain"},{id:"LK",value:"LK",name:"Sri Lanka"},{id:"SR",value:"SR",name:"Suriname"},{id:"SJ",value:"SJ",name:"Svalbard and Jan Mayen"},{id:"SZ",value:"SZ",name:"Swaziland"},{id:"SE",value:"SE",name:"Sweden"},{id:"CH",value:"CH",name:"Switzerland"},{id:"TW",value:"TW",name:"Taiwan"},{id:"TJ",value:"TJ",name:"Tajikistan"},{id:"TZ",value:"TZ",name:"Tanzania"},{id:"TH",value:"TH",name:"Thailand"},{id:"TL",value:"TL",name:"Timor-Leste"},{id:"TG",value:"TG",name:"Togo"},{id:"TK",value:"TK",name:"Tokelau"},{id:"TO",value:"TO",name:"Tonga"},{id:"TT",value:"TT",name:"Trinidad and Tobago"},{id:"TR",value:"TR",name:"Turkey"},{id:"TC",value:"TC",name:"Turks and Caicos Islands"},{id:"TV",value:"TV",name:"Tuvalu"},{id:"UM",value:"UM",name:"U.S. Minor Outlying Islands"},{id:"VI",value:"VI",name:"U.S. Virgin Islands"},{id:"UG",value:"UG",name:"Uganda"},{id:"UA",value:"UA",name:"Ukraine"},{id:"AE",value:"AE",name:"United Arab Emirates"},{id:"GB",value:"GB",name:"United Kingdom"},{id:"US",value:"US",name:"United States"},{id:"UY",value:"UY",name:"Uruguay"},{id:"UZ",value:"UZ",name:"Uzbekistan"},{id:"VU",value:"VU",name:"Vanuatu"},{id:"VA",value:"VA",name:"Vatican City"},{id:"VN",value:"VN",name:"Vietnam"},{id:"WF",value:"WF",name:"Wallis and Futuna"},{id:"ZM",value:"ZM",name:"Zambia"},{id:"ZW",value:"ZW",name:"Zimbabwe"}]}),e.KlarnaPrice=new e("klarna/KlarnaPrice",n.User,!0,__("Price with Tax"),a.TextField,null,{placeholder:""}).inline(6),e.KlarnaTaxAmount=new e("klarna/KlarnaTaxAmount",n.User,!0,__("Tax Amount")+", %",o.SizeSelector,null,{min:0,max:100}).inline(6),e.KlarnaCurrencyCode=new e("klarna/KlarnaCurrencyCode",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD",value:"USD"},{id:"GBP",name:"GBP",value:"GBP"},{id:"DKK",name:"DKK",value:"DKK"},{id:"EUR",name:"EUR",value:"EUR"},{id:"NOK",name:"NOK",value:"NOK"},{id:"SEK",name:"SEK",value:"SEK"}]}).inline(6),e.KlarnaIsTest=new e("klarna/KlarnaIsTest",n.User,!0,__("Test mode"),r()),e.WPwsbStoreid=new e("webpay/WPwsbStoreid",n.User,!0,__("Store identifier"),a.TextField,null,{placeholder:""}),e.WPSecretKey=new e("webpay/WPSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.WPItemName=new e("webpay/WPItemName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.WPItemPrice=new e("webpay/WPItemPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.WPCurrency=new e("webpay/WPCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"BYN",name:"BYN",value:"BYN"},{id:"USD",name:"USD",value:"USD"},{id:"EUR",name:"EUR",value:"EUR"},{id:"RUB",name:"RUB",value:"RUB"},{id:"GBP",name:"GBP",value:"GBP"}]}).inline(6),e.WPDemo=new e("webpay/WPDemo",n.User,!0,__("Test mode"),r()),e.KiwiQZApiId=new e("kiwi QZ/KiwiQZApiId",n.User,!0,__("API ID"),a.TextField,null,{placeholder:""}),e.KiwiQZApiPassword=new e("kiwi QZ/KiwiQZApiPassword",n.User,!0,__("API Password"),a.TextField,null,{placeholder:""}),e.KiwiQZProviderId=new e("kiwi QZ/KiwiQZProviderId",n.User,!0,__("Provider ID"),a.TextField,null,{placeholder:""}),e.KiwiQZName=new e("kiwi QZ/KiwiQZName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.KiwiQZAmount=new e("kiwi QZ/KiwiQZAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PaytrailMerchantId=new e("paytrail/PaytrailMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.PaytrailSecretKey=new e("paytrail/PaytrailSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.PaytrailName=new e("paytrail/PaytrailName",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.PaytrailAmount=new e("paytrail/PaytrailAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.WebmoneyWidgetWmId=new e("webmoney widget/WebmoneyWidgetWmId",n.User,!0,__("WebMoney ID"),a.TextField,null,{placeholder:""}),e.WebmoneyWidgetPurseId=new e("webmoney widget/WebmoneyWidgetPurseId",n.User,!0,__("Purse ID"),a.TextField,null,{placeholder:""}),e.WebmoneyWidgetKey=new e("webmoney widget/WebmoneyWidgetKey",n.User,!0,__("Key"),a.TextField,null,{placeholder:""}),e.WebmoneyWidgetDescription=new e("webmoney widget/WebmoneyWidgetDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.WebmoneyWidgetAmount=new e("webmoney widget/WebmoneyWidgetAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.TwoCheckoutSid=new e("2Checkout/2CheckoutSid",n.User,!0,__("SID"),a.TextField,null,{placeholder:""}),e.TwoCheckoutName=new e("2Checkout/2CheckoutName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.TwoCheckoutPrice=new e("2Checkout/2CheckoutPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.TwoCheckoutCurrency=new e("2Checkout/2CheckoutCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD"},{id:"EUR",name:"EUR"},{id:"AED",name:"AED"},{id:"AFN",name:"AFN"},{id:"ALL",name:"ALL"},{id:"ARS",name:"ARS"},{id:"AUD",name:"AUD"},{id:"AZN",name:"AZN"},{id:"BBD",name:"BBD"},{id:"BDT",name:"BDT"},{id:"BGN",name:"BGN"},{id:"BMD",name:"BMD"},{id:"BND",name:"BND"},{id:"BOB",name:"BOB"},{id:"BRL",name:"BRL"},{id:"BSD",name:"BSD"},{id:"BWP",name:"BWP"},{id:"BZD",name:"BZD"},{id:"CAD",name:"CAD"},{id:"CHF",name:"CHF"},{id:"CLP",name:"CLP"},{id:"CNY",name:"CNY"},{id:"COP",name:"COP"},{id:"CRC",name:"CRC"},{id:"CZK",name:"CZK"},{id:"DKK",name:"DKK"},{id:"DOP",name:"DOP"},{id:"DZD",name:"DZD"},{id:"EGP",name:"EGP"},{id:"FJD",name:"FJD"},{id:"GBP",name:"GBP"},{id:"GTQ",name:"GTQ"},{id:"HKD",name:"HKD"},{id:"HNL",name:"HNL"},{id:"HRK",name:"HRK"},{id:"HUF",name:"HUF"},{id:"IDR",name:"IDR"},{id:"ILS",name:"ILS"},{id:"INR",name:"INR"},{id:"JMD",name:"JMD"},{id:"JPY",name:"JPY"},{id:"KES",name:"KES"},{id:"KRW",name:"KRW"},{id:"KZT",name:"KZT"},{id:"LAK",name:"LAK"},{id:"LBP",name:"LBP"},{id:"LKR",name:"LKR"},{id:"LRD",name:"LRD"},{id:"MAD",name:"MAD"},{id:"MMK",name:"MMK"},{id:"MOP",name:"MOP"},{id:"MRO",name:"MRO"},{id:"MUR",name:"MUR"},{id:"MVR",name:"MVR"},{id:"MXN",name:"MXN"},{id:"MYR",name:"MYR"},{id:"NIO",name:"NIO"},{id:"NOK",name:"NOK"},{id:"NPR",name:"NPR"},{id:"NZD",name:"NZD"},{id:"PEN",name:"PEN"},{id:"PGK",name:"PGK"},{id:"PHP",name:"PHP"},{id:"PKR",name:"PKR"},{id:"PLN",name:"PLN"},{id:"QAR",name:"QAR"},{id:"RON",name:"RON"},{id:"RUB",name:"RUB"},{id:"SAR",name:"SAR"},{id:"SBD",name:"SBD"},{id:"SCR",name:"SCR"},{id:"SEK",name:"SEK"},{id:"SGD",name:"SGD"},{id:"SYP",name:"SYP"},{id:"THB",name:"THB"},{id:"TOP",name:"TOP"},{id:"TRY",name:"TRY"},{id:"TTD",name:"TTD"},{id:"TWD",name:"TWD"},{id:"UAH",name:"UAH"},{id:"VND",name:"VND"},{id:"VUV",name:"VUV"},{id:"WST",name:"WST"},{id:"XCD",name:"XCD"},{id:"XOF",name:"XOF"},{id:"YER",name:"YER"},{id:"ZAR",name:"ZAR"}]}).inline(6),e.TwoCheckoutDemo=new e("2Checkout/2CheckoutDemo",n.User,!0,__("Test mode"),r()),e.IyzicoApiKey=new e("iyzico/IyzicoApiKey",n.User,!0,__("API Key"),a.TextField,null,{placeholder:""}),e.IyzicoSecretKey=new e("iyzico/IyzicoSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.IyzicoName=new e("iyzico/IyzicoName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.IyzicoPrice=new e("iyzico/IyzicoPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.IyzicoCurrency=new e("iyzico/IyzicoCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"TRY",name:"TRY",value:"TRY"},{id:"EUR",name:"EUR",value:"EUR"},{id:"USD",name:"USD",value:"USD"},{id:"GBP",name:"GBP",value:"GBP"},{id:"IRR",name:"IRR",value:"IRR"}]}).inline(6),e.IyzicoDemo=new e("iyzico/IyzicoDemo",n.User,!0,__("Test mode"),r()),e.PagseguroEmail=new e("pagseguro/PagseguroEmail",n.User,!0,__("Email"),a.TextField,null,{placeholder:""}),e.PagseguroToken=new e("pagseguro/PagseguroToken",n.User,!0,__("Token"),a.TextField,null,{placeholder:""}),e.PagseguroItemDescription=new e("pagseguro/PagseguroItemDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.PagseguroItemAmount=new e("pagseguro/PagseguroItemAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PagseguroItemQuantity=new e("pagseguro/PagseguroItemQuantity",n.User,!0,__("Quantity"),a.TextField,null,{placeholder:""}).inline(6),e.AssistMerchantId=new e("assist/AssistMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.AssistServerName=new e("assist/AssistServerName",n.User,!0,__("Server name"),a.TextField,null,{placeholder:""}),e.AssistOrderComment=new e("assist/AssistOrderComment",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.AssistOrderAmount=new e("assist/AssistOrderAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.AssistOrderCurrency=new e("assist/AssistOrderCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"RUB",name:"RUB"},{id:"USD",name:"USD"},{id:"EUR",name:"EUR"},{id:"BYN",name:"BYN"},{id:"AMD",name:"AMD"},{id:"AUD",name:"AUD"},{id:"AZN",name:"AZN"},{id:"BGN",name:"BGN"},{id:"BRL",name:"BRL"},{id:"CAD",name:"CAD"},{id:"CHF",name:"CHF"},{id:"CNY",name:"CNY"},{id:"CZK",name:"CZK"},{id:"DKK",name:"DKK"},{id:"GBP",name:"GBP"},{id:"HUF",name:"HUF"},{id:"INR",name:"INR"},{id:"JPY",name:"JPY"},{id:"KGS",name:"KGS"},{id:"KRW",name:"KRW"},{id:"KZT",name:"KZT"},{id:"MDL",name:"MDL"},{id:"NOK",name:"NOK"},{id:"PLN",name:"PLN"},{id:"RON",name:"RON"},{id:"SEK",name:"SEK"},{id:"SGD",name:"SGD"},{id:"TJS",name:"TJS"},{id:"TMT",name:"TMT"},{id:"TRY",name:"TRY"},{id:"UAH",name:"UAH"},{id:"UZS",name:"UZS"},{id:"ZAR",name:"ZAR"}]}).inline(6),e.AssistDemo=new e("assist/AssistDemo",n.User,!0,__("Test mode"),r()),e.ClickEvolutionMerchantId=new e("click evolution/ClickEvolutionMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.ClickEvolutionMerchantServiceId=new e("click evolution/ClickEvolutionMerchantServiceId",n.User,!0,__("Merchant Service ID"),a.TextField,null,{placeholder:""}),e.ClickEvolutionSecretKey=new e("click evolution/ClickEvolutionSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.ClickEvolutionDescription=new e("click evolution/ClickEvolutionDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.ClickEvolutionAmount=new e("click evolution/ClickEvolutionAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.BuynowItemName=new e("buy now/BuynowItemName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.BuynowShipping=new e("buy now/BuynowShipping",n.User,!0,__("Shipping"),a.TextField,null,{placeholder:""}),e.BuynowAmount=new e("buy now/BuynowAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.BuynowCurrency=new e("buy now/BuynowCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD",value:"USD"},{id:"AUD",name:"AUD",value:"AUD"},{id:"BRL",name:"BRL",value:"BRL"},{id:"GBP",name:"GBP",value:"GBP"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"EUR",name:"EUR",value:"EUR"},{id:"HKD",name:"HKD",value:"HKD"},{id:"HUF",name:"HUF",value:"HUF"},{id:"ILS",name:"ILS",value:"ILS"},{id:"JPY",name:"JPY",value:"JPY"},{id:"MYR",name:"MYR",value:"MYR"},{id:"MXN",name:"MXN",value:"MXN"},{id:"TWD",name:"TWD",value:"TWD"},{id:"NZD",name:"NZD",value:"NZD"},{id:"NOK",name:"NOK",value:"NOK"},{id:"PHP",name:"PHP",value:"PHP"},{id:"PLN",name:"PLN",value:"PLN"},{id:"RUB",name:"RUB",value:"RUB"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SEK",name:"SEK",value:"SEK"},{id:"CHF",name:"CHF",value:"CHF"},{id:"THB",name:"THB",value:"THB"}]}).inline(6),e.BuynowBusiness=new e("buy now/BuynowBusiness",n.User,!0,__("Email address to receive payments"),a.TextField,null,{placeholder:""}),e.BuynowDemo=new e("buy now/BuynowDemo",n.User,!0,__("Test mode"),r()),e.PayfastMerchantId=new e("payfast/PayfastMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.PayfastMerchantKey=new e("payfast/PayfastMerchantKey",n.User,!0,__("Merchant Key"),a.TextField,null,{placeholder:""}),e.PayfastPassphrase=new e("payfast/PayfastPassphrase",n.User,!0,__("Passphrase"),a.TextField,null,{placeholder:""}),e.PayfastItemName=new e("payfast/PayfastItemName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.PayfastAmount=new e("payfast/PayfastAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PayseraProjectId=new e("paysera/PayseraProjectId",n.User,!0,__("Project ID"),a.TextField,null,{placeholder:""}),e.PayseraPassword=new e("paysera/PayseraPassword",n.User,!0,__("Password"),a.TextField,null,{placeholder:""}),e.PayseraPaytext=new e("paysera/PayseraPaytext",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.PayseraAmount=new e("paysera/PayseraAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PayseraCurrency=new e("paysera/PayseraCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"AED",name:"AED",value:"AED"},{id:"ALL",name:"ALL",value:"ALL"},{id:"AMD",name:"AMD",value:"AMD"},{id:"ARS",name:"ARS",value:"ARS"},{id:"AUD",name:"AUD",value:"AUD"},{id:"AZN",name:"AZN",value:"AZN"},{id:"BAM",name:"BAM",value:"BAM"},{id:"BDT",name:"BDT",value:"BDT"},{id:"BGN",name:"BGN",value:"BGN"},{id:"BHD",name:"BHD",value:"BHD"},{id:"BOB",name:"BOB",value:"BOB"},{id:"BRL",name:"BRL",value:"BRL"},{id:"BYN",name:"BYN",value:"BYN"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CHF",name:"CHF",value:"CHF"},{id:"CLP",name:"CLP",value:"CLP"},{id:"CNY",name:"CNY",value:"CNY"},{id:"COP",name:"COP",value:"COP"},{id:"CRC",name:"CRC",value:"CRC"},{id:"CVE",name:"CVE",value:"CVE"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"DOP",name:"DOP",value:"DOP"},{id:"DZD",name:"DZD",value:"DZD"},{id:"EGP",name:"EGP",value:"EGP"},{id:"ETB",name:"ETB",value:"ETB"},{id:"EUR",name:"EUR",value:"EUR"},{id:"GBP",name:"GBP",value:"GBP"},{id:"GEL",name:"GEL",value:"GEL"},{id:"GNF",name:"GNF",value:"GNF"},{id:"GTQ",name:"GTQ",value:"GTQ"},{id:"HKD",name:"HKD",value:"HKD"},{id:"HNL",name:"HNL",value:"HNL"},{id:"HRK",name:"HRK",value:"HRK"},{id:"HUF",name:"HUF",value:"HUF"},{id:"IDR",name:"IDR",value:"IDR"},{id:"ILS",name:"ILS",value:"ILS"},{id:"INR",name:"INR",value:"INR"},{id:"IQD",name:"IQD",value:"IQD"},{id:"IRR",name:"IRR",value:"IRR"},{id:"ISK",name:"ISK",value:"ISK"},{id:"JOD",name:"JOD",value:"JOD"},{id:"JPY",name:"JPY",value:"JPY"},{id:"KES",name:"KES",value:"KES"},{id:"KGS",name:"KGS",value:"KGS"},{id:"KRW",name:"KRW",value:"KRW"},{id:"KWD",name:"KWD",value:"KWD"},{id:"KZT",name:"KZT",value:"KZT"},{id:"LBP",name:"LBP",value:"LBP"},{id:"LKR",name:"LKR",value:"LKR"},{id:"MAD",name:"MAD",value:"MAD"},{id:"MDL",name:"MDL",value:"MDL"},{id:"MGA",name:"MGA",value:"MGA"},{id:"MKD",name:"MKD",value:"MKD"},{id:"MNT",name:"MNT",value:"MNT"},{id:"MXN",name:"MXN",value:"MXN"},{id:"MYR",name:"MYR",value:"MYR"},{id:"MZN",name:"MZN",value:"MZN"},{id:"NGN",name:"NGN",value:"NGN"},{id:"NIO",name:"NIO",value:"NIO"},{id:"NOK",name:"NOK",value:"NOK"},{id:"NZD",name:"NZD",value:"NZD"},{id:"OMR",name:"OMR",value:"OMR"},{id:"PEN",name:"PEN",value:"PEN"},{id:"PHP",name:"PHP",value:"PHP"},{id:"PKR",name:"PKR",value:"PKR"},{id:"PLN",name:"PLN",value:"PLN"},{id:"PYG",name:"PYG",value:"PYG"},{id:"QAR",name:"QAR",value:"QAR"},{id:"RON",name:"RON",value:"RON"},{id:"RSD",name:"RSD",value:"RSD"},{id:"RUB",name:"RUB",value:"RUB"},{id:"SAR",name:"SAR",value:"SAR"},{id:"SEK",name:"SEK",value:"SEK"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SYP",name:"SYP",value:"SYP"},{id:"THB",name:"THB",value:"THB"},{id:"TJS",name:"TJS",value:"TJS"},{id:"TND",name:"TND",value:"TND"},{id:"TRY",name:"TRY",value:"TRY"},{id:"TWD",name:"TWD",value:"TWD"},{id:"TZS",name:"TZS",value:"TZS"},{id:"UAH",name:"UAH",value:"UAH"},{id:"UGX",name:"UGX",value:"UGX"},{id:"USD",name:"USD",value:"USD"},{id:"UYU",name:"UYU",value:"UYU"},{id:"UZS",name:"UZS",value:"UZS"},{id:"VEF",name:"VEF",value:"VEF"},{id:"VND",name:"VND",value:"VND"},{id:"XAF",name:"XAF",value:"XAF"},{id:"XOF",name:"XOF",value:"XOF"},{id:"YER",name:"YER",value:"YER"},{id:"ZAR",name:"ZAR",value:"ZAR"}]}).inline(6),e.PayseraTest=new e("paysera/PayseraTest",n.User,!0,__("Test mode"),r()),e.BaokimBusiness=new e("baokim/BaokimBusiness",n.User,!0,__("Email"),a.TextField,null,{placeholder:""}),e.BaokimProductName=new e("baokim/BaokimProductName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.BaokimProductPrice=new e("baokim/BaokimProductPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.RobokassaMerchId=new e("robokassa/RobokassaMerchId",n.User,!0,__("Store identifier"),a.TextField,null,{placeholder:""}),e.RobokassaMerchPass1=new e("robokassa/RobokassaMerchPass1",n.User,!0,__("Password")+" 1",a.TextField,null,{placeholder:""}),e.RobokassaMerchPass2=new e("robokassa/RobokassaMerchPass2",n.User,!0,__("Password")+" 2",a.TextField,null,{placeholder:""}),e.RobokassaDescription=new e("robokassa/RobokassaDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.RobokassaAmount=new e("robokassa/RobokassaAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.RobokassaCurrency=new e("robokassa/RobokassaCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"RUB",name:"RUB"},{id:"KZT",name:"KZT"},{id:"EUR",name:"EUR"},{id:"USD",name:"USD"}]}).inline(6),e.RobokassaHashtype=new e("robokassa/RobokassaHashtype",n.User,!0,__("Hash type"),P.DropdownBox,null,{options:[{id:"MD5",name:"MD5"},{id:"RIPEMD160",name:"RIPEMD160"},{id:"SHA1",name:"SHA1"},{id:"SHA256",name:"SHA256"},{id:"SHA384",name:"SHA384"},{id:"SHA512",name:"SHA512"}]}).inline(6),e.RobokassaDemo=new e("robokassa/RobokassaDemo",n.User,!0,__("Test mode"),r()),e.ExpresspayServiceId=new e("expresspay/ExpresspayServiceId",n.User,!0,"Номер услуги",a.TextField,null,{placeholder:""}),e.ExpresspayToken=new e("expresspay/ExpresspayToken",n.User,!0,"Ключ API",a.TextField,null,{placeholder:""}),e.ExpresspaySecretWord=new e("expresspay/ExpresspaySecretWord",n.User,!0,"Секретное слово",a.TextField,null,{placeholder:""}),e.ExpresspayPayType=new e("expresspay/ExpresspayPayType",n.User,!0,"Способ оплаты",P.DropdownBox,null,{options:[{id:"ERIP",name:"ЕРИП"},{id:"EPOS",name:"E-POS"},{id:"CARD",name:"Интернет-эквайринг"}]}),e.ExpresspayAmount=new e("expresspay/ExpresspayAmount",n.User,!0,__("Amount"),a.TextField,null,{placeholder:""}).inline(6),e.ExpresspayCurrency=new e("expresspay/ExpresspayCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"BYN",name:"BYN"}]}).inline(6),e.ExpresspayDemo=new e("expresspay/ExpresspayDemo",n.User,!0,__("Test mode"),r()),e.BepaidShopId=new e("bepaid/BepaidShopId",n.User,!0,__("Shop ID"),a.TextField,null,{placeholder:""}),e.BepaidShopKey=new e("bepaid/BepaidShopKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.BepaidOrderDescription=new e("bepaid/BepaidOrderDescription",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.BepaidAmount=new e("bepaid/BepaidAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.BepaidCurrency=new e("bepaid/BepaidCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"RUB",name:"RUB",value:"RUB"},{id:"USD",name:"USD",value:"USD"},{id:"EUR",namer:"EUR",value:"EUR"},{id:"BYN",name:"BYN",value:"BYN"},{id:"AMD",name:"AMD",value:"AMD"},{id:"AUD",name:"AUD",value:"AUD"},{id:"AZN",name:"AZN",value:"AZN"},{id:"BGN",name:"BGN",value:"BGN"},{id:"BRL",name:"BRL",value:"BRL"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CHF",name:"CHF",value:"CHF"},{id:"CNY",name:"CNY",value:"CNY"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"GBP",name:"GBP",value:"GBP"},{id:"HUF",name:"HUF",value:"HUF"},{id:"INR",name:"INR",value:"INR"},{id:"JPY",name:"JPY",value:"JPY"},{id:"KGS",name:"KGS",value:"KGS"},{id:"KRW",name:"KRW",value:"KRW"},{id:"KZT",name:"KZT",value:"KZT"},{id:"MDL",name:"MDL",value:"MDL"},{id:"NOK",name:"NOK",value:"NOK"},{id:"PLN",name:"PLN",value:"PLN"},{id:"RON",name:"RON",value:"RON"},{id:"SEK",name:"SEK",value:"SEK"},{id:"SGD",name:"SGD",value:"SGD"},{id:"TJS",name:"TJS",value:"TJS"},{id:"TMT",name:"TMT",value:"TMT"},{id:"TRY",name:"TRY",value:"TRY"},{id:"UAH",name:"UAH",value:"UAH"},{id:"UZS",name:"UZS",value:"UZS"},{id:"ZAR",name:"ZAR",value:"ZAR"}]}).inline(6),e.BepaidDemo=new e("bepaid/BepaidDemo",n.User,!0,__("Test mode"),r()),e.PaymeMerchantId=new e("payme/PaymeMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.PaymeMerchantKey=new e("payme/PaymeMerchantKey",n.User,!0,__("Merchant Key"),a.TextField,null,{placeholder:""}),e.PaymeDescription=new e("payme/PaymeDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.PaymeAmount=new e("payme/PaymeAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PaymeCurrency=new e("payme/PaymeCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"643",name:"RUB"},{id:"840",name:"USD"},{id:"860",name:"UZS"},{id:"978",name:"EUR"}]}).inline(6),e.PaymeDemo=new e("payme/PaymeDemo",n.User,!0,__("Test mode"),r()),e.YandexKassaShopId=new e("yandexkassa/YandexKassaShopId",n.User,!0,__("Shop ID"),a.TextField,null,{placeholder:""}),e.YandexKassaScid=new e("yandexkassa/YandexKassaScid",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.YandexKassaOrderDetails=new e("yandexkassa/YandexKassaOrderDetails",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.YandexKassaSum=new e("yandexkassa/YandexKassaSum",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.YandexKassaCurrency=new e("yandexkassa/YandexKassaCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"RUB",name:"RUB"},{id:"USD",name:"USD"},{id:"EUR",name:"EUR"},{id:"BYN",name:"BYN"},{id:"CNY",name:"CNY"},{id:"KZT",name:"KZT"},{id:"UAH",name:"UAH"}]}).inline(6),e.YandexKassaDemo=new e("yandexkassa/YandexKassaDemo",n.User,!0,__("Test mode"),r()),e.EpsilonContractCode=new e("epsilon/EpsilonContractCode",n.User,!0,__("Contract code"),a.TextField,null,{placeholder:""}),e.EpsilonDescription=new e("epsilon/EpsilonDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.EpsilonAmount=new e("epsilon/EpsilonAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.EpsilonDemo=new e("epsilon/EpsilonDemo",n.User,!0,__("Test mode"),r()),e.PayumoneyProductInfo=new e("payumoney/PayumoneyProductInfo",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.PayumoneyKey=new e("payumoney/PayumoneyKey",n.User,!0,__("Key"),a.TextField,null,{placeholder:""}),e.PayumoneySalt=new e("payumoney/PayumoneySalt",n.User,!0,__("Salt"),a.TextField,null,{placeholder:""}),e.PayumoneyAmount=new e("payumoney/PayumoneyAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PayuProductName=new e("payu/PayuProductName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.PayuMerchantPosId=new e("payu/PayuMerchantPosId",n.User,!0,__("POS identifier"),a.TextField,null,{placeholder:""}),e.PayuPrivateKey=new e("payu/PayuPrivateKey",n.User,!0,__("Private key"),a.TextField,null,{placeholder:""}),e.PayuProductPrice=new e("payu/PayuProductPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.PayuCurrencyCode=new e("payu/PayuCurrencyCode",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"AED",name:"AED",value:"AED"},{id:"ALL",name:"ALL",value:"ALL"},{id:"AMD",name:"AMD",value:"AMD"},{id:"ARS",name:"ARS",value:"ARS"},{id:"AUD",name:"AUD",value:"AUD"},{id:"AZN",name:"AZN",value:"AZN"},{id:"BAM",name:"BAM",value:"BAM"},{id:"BDT",name:"BDT",value:"BDT"},{id:"BGN",name:"BGN",value:"BGN"},{id:"BHD",name:"BHD",value:"BHD"},{id:"BOB",name:"BOB",value:"BOB"},{id:"BRL",name:"BRL",value:"BRL"},{id:"BYN",name:"BYN",value:"BYN"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CHF",name:"CHF",value:"CHF"},{id:"CLP",name:"CLP",value:"CLP"},{id:"CNY",name:"CNY",value:"CNY"},{id:"COP",name:"COP",value:"COP"},{id:"CRC",name:"CRC",value:"CRC"},{id:"CVE",name:"CVE",value:"CVE"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"DOP",name:"DOP",value:"DOP"},{id:"DZD",name:"DZD",value:"DZD"},{id:"EGP",name:"EGP",value:"EGP"},{id:"ETB",name:"ETB",value:"ETB"},{id:"EUR",name:"EUR",value:"EUR"},{id:"GBP",name:"GBP",value:"GBP"},{id:"GEL",name:"GEL",value:"GEL"},{id:"GNF",name:"GNF",value:"GNF"},{id:"GTQ",name:"GTQ",value:"GTQ"},{id:"HKD",name:"HKD",value:"HKD"},{id:"HNL",name:"HNL",value:"HNL"},{id:"HRK",name:"HRK",value:"HRK"},{id:"HUF",name:"HUF",value:"HUF"},{id:"IDR",name:"IDR",value:"IDR"},{id:"ILS",name:"ILS",value:"ILS"},{id:"INR",name:"INR",value:"INR"},{id:"IQD",name:"IQD",value:"IQD"},{id:"IRR",name:"IRR",value:"IRR"},{id:"ISK",name:"ISK",value:"ISK"},{id:"JOD",name:"JOD",value:"JOD"},{id:"JPY",name:"JPY",value:"JPY"},{id:"KES",name:"KES",value:"KES"},{id:"KGS",name:"KGS",value:"KGS"},{id:"KRW",name:"KRW",value:"KRW"},{id:"KWD",name:"KWD",value:"KWD"},{id:"KZT",name:"KZT",value:"KZT"},{id:"LBP",name:"LBP",value:"LBP"},{id:"LKR",name:"LKR",value:"LKR"},{id:"MAD",name:"MAD",value:"MAD"},{id:"MDL",name:"MDL",value:"MDL"},{id:"MGA",name:"MGA",value:"MGA"},{id:"MKD",name:"MKD",value:"MKD"},{id:"MNT",name:"MNT",value:"MNT"},{id:"MXN",name:"MXN",value:"MXN"},{id:"MYR",name:"MYR",value:"MYR"},{id:"MZN",name:"MZN",value:"MZN"},{id:"NGN",name:"NGN",value:"NGN"},{id:"NIO",name:"NIO",value:"NIO"},{id:"NOK",name:"NOK",value:"NOK"},{id:"NZD",name:"NZD",value:"NZD"},{id:"OMR",name:"OMR",value:"OMR"},{id:"PEN",name:"PEN",value:"PEN"},{id:"PHP",name:"PHP",value:"PHP"},{id:"PKR",name:"PKR",value:"PKR"},{id:"PLN",name:"PLN",value:"PLN"},{id:"PYG",name:"PYG",value:"PYG"},{id:"QAR",name:"QAR",value:"QAR"},{id:"RON",name:"RON",value:"RON"},{id:"RSD",name:"RSD",value:"RSD"},{id:"RUB",name:"RUB",value:"RUB"},{id:"SAR",name:"SAR",value:"SAR"},{id:"SEK",name:"SEK",value:"SEK"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SYP",name:"SYP",value:"SYP"},{id:"THB",name:"THB",value:"THB"},{id:"TJS",name:"TJS",value:"TJS"},{id:"TND",name:"TND",value:"TND"},{id:"TRY",name:"TRY",value:"TRY"},{id:"TWD",name:"TWD",value:"TWD"},{id:"TZS",name:"TZS",value:"TZS"},{id:"UAH",name:"UAH",value:"UAH"},{id:"UGX",name:"UGX",value:"UGX"},{id:"USD",name:"USD",value:"USD"},{id:"UYU",name:"UYU",value:"UYU"},{id:"UZS",name:"UZS",value:"UZS"},{id:"VEF",name:"VEF",value:"VEF"},{id:"VND",name:"VND",value:"VND"},{id:"XAF",name:"XAF",value:"XAF"},{id:"XOF",name:"XOF",value:"XOF"},{id:"YER",name:"YER",value:"YER"},{id:"ZAR",name:"ZAR",value:"ZAR"}]}).inline(6),e.EasypayMerno=new e("easypay/EasypayMerno",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.EasypayWebKey=new e("easypay/EasypayWebKey",n.User,!0,__("Web key"),a.TextField,null,{placeholder:""}),e.EasypayOrderName=new e("easypay/EasypayOrderName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.EasypayOrderDescription=new e("easypay/EasypayOrderDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.EasypaySum=new e("easypay/EasypaySum",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.EasypayDemo=new e("easypay/EasypayDemo",n.User,!0,__("Demo"),r()),e.BraintreeMerchantId=new e("braintree/BraintreeMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.BraintreePublicKey=new e("braintree/BraintreePublicKey",n.User,!0,__("Public key"),a.TextField,null,{placeholder:""}),e.BraintreePrivateKey=new e("braintree/BraintreePrivateKey",n.User,!0,__("Private key"),a.TextField,null,{placeholder:""}),e.BraintreeAmount=new e("braintree/BraintreeAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.BraintreeDemo=new e("braintree/BraintreeDemo",n.User,!0,__("Demo"),r()),e.DragonpayMerchantId=new e("dragonpay/DragonpayMerchantId",n.User,!0,__("Merchant ID"),a.TextField,null,{placeholder:""}),e.DragonpaySecretKey=new e("dragonpay/DragonpaySecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.DragonpayDescription=new e("dragonpay/DragonpayDescription",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.DragonpayAmount=new e("dragonpay/DragonpayAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.DragonpayCurrency=new e("dragonpay/DragonpayCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"PHP",name:"PHP",value:"PHP"},{id:"USD",name:"USD",value:"USD"},{id:"CAD",name:"CAD",value:"CAD"}]}).inline(6),e.DragonpayDemo=new e("dragonpay/DragonpayDemo",n.User,!0,__("Demo"),r()).inline(4),e.EpaybgMinNumber=new e("epaybg/epaybgMinNumber",n.User,!0,__("MIN"),a.TextField,null,{placeholder:""}),e.EpaybgSecretKey=new e("epaybg/EpaybgSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.EpaybgName=new e("epaybg/epaybgName",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.EpaybgPrice=new e("epaybg/epaybgPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.EpaybgCurrency=new e("epaybg/epaybgCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"BGN",name:"BGN"},{id:"USD",name:"USD"},{id:"EUR",name:"EUR"}]}).inline(6),e.EpaybgDemo=new e("epaybg/EpaybgDemo",n.User,!0,__("Demo"),r()).inline(4),e.RedsysName=new e("redsys/redsysName",n.User,!0,__("Name"),a.TextField,null,{placeholder:""}),e.RedsysTerminal=new e("redsys/redsysTerminal",n.User,!0,__("Terminal"),a.TextField,null,{placeholder:""}),e.RedsysMerchantCode=new e("redsys/redsysMerchantCode",n.User,!0,__("Merchant Code"),a.TextField,null,{placeholder:""}),e.RedsysMerchantPassword=new e("redsys/redsysMerchantPassword",n.User,!0,__("Merchant Password"),a.TextField,null,{placeholder:""}),e.RedsysDescription=new e("redsys/redsysDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.RedsysAmount=new e("redsys/redsysAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.RedsysCurrency=new e("redsys/redsysCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"840",name:"USD"},{id:"978",name:"EUR"},{id:"826",name:"GBP"},{id:"032",name:"ARS"},{id:"986",name:"BRL"},{id:"124",name:"CAD"},{id:"756",name:"CHF"},{id:"152",name:"CLP"},{id:"392",name:"CNY"},{id:"170",name:"COP"},{id:"356",name:"INR"},{id:"484",name:"MXN"},{id:"604",name:"PEN"},{id:"949",name:"TRY"},{id:"937",name:"VEF"}]}).inline(6),e.RedsysDemo=new e("redsys/redsysDemo",n.User,!0,__("Demo"),r()).inline(4),e.MollieApiKey=new e("mollie/mollieApiKey",n.User,!0,__("API Key"),a.TextField,null,{placeholder:""}),e.MollieDescription=new e("mollie/mollieDescription",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.MollieAmount=new e("mollie/mollieAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.SkrillEmail=new e("skrill/skrillEmail",n.User,!0,__("Email"),a.TextField,null,{placeholder:""}),e.SkrillDescription=new e("skrill/skrillDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.SkrillText=new e("skrill/skrillText",n.User,!0,__("Detailed text"),a.TextField,null,{placeholder:""}),e.SkrillAmount=new e("skrill/skrillAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.SkrillCurrency=new e("skrill/skrillCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD",value:"USD"},{id:"EUR",name:"EUR",value:"EUR"},{id:"GBP",name:"GBP",value:"GBP"},{id:"AED",name:"AED",value:"AED"},{id:"AUD",name:"AUD",value:"AUD"},{id:"BGN",name:"BGN",value:"BGN"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CHF",name:"CHF",value:"CHF"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"HKD",name:"HKD",value:"HKD"},{id:"HRK",name:"HRK",value:"HRK"},{id:"HUF",name:"HUF",value:"HUF"},{id:"ILS",name:"ILS",value:"ILS"},{id:"INR",name:"INR",value:"INR"},{id:"ISK",name:"ISK",value:"ISK"},{id:"JOD",name:"JOD",value:"JOD"},{id:"JPY",name:"JPY",value:"JPY"},{id:"KRW",name:"KRW",value:"KRW"},{id:"MAD",name:"MAD",value:"MAD"},{id:"MYR",name:"MYR",value:"MYR"},{id:"NOK",name:"NOK",value:"NOK"},{id:"NZD",name:"NZD",value:"NZD"},{id:"OMR",name:"OMR",value:"OMR"},{id:"PLN",name:"PLN",value:"PLN"},{id:"QAR",name:"QAR",value:"QAR"},{id:"RON",name:"RON",value:"RON"},{id:"RSD",name:"RSD",value:"RSD"},{id:"SAR",name:"SAR",value:"SAR"},{id:"SEK",name:"SEK",value:"SEK"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SKK",name:"SKK",value:"SKK"},{id:"THB",name:"THB",value:"THB"},{id:"TND",name:"TND",value:"TND"},{id:"TRY",name:"TRY",value:"TRY"},{id:"TWD",name:"TWD",value:"TWD"},{id:"ZAR",name:"ZAR",value:"ZAR"}]}).inline(6),e.SkrillDemo=new e("skrill/skrillDemo",n.User,!0,__("Demo"),r()).inline(4),e.WebmoneyPurseId=new e("webmoney/webmoneyPurseId",n.User,!0,__("Purse ID"),a.TextField,null,{placeholder:""}),e.WebmoneyDescription=new e("webmoney/webmoneyDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.WebmoneyAmount=new e("webmoney/webmoneyAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.LiqpayPublicKey=new e("liqPay/liqpayPublicKey",n.User,!0,__("Public Key"),a.TextField,null,{placeholder:""}),e.LiqpayPrivateKey=new e("liqPay/liqpayPrivateKey",n.User,!0,__("Private Key"),a.TextField,null,{placeholder:""}),e.LiqpayDescription=new e("liqPay/liqpayDescription",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.LiqpayAmount=new e("liqPay/liqpayAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.LiqpayCurrency=new e("liqPay/liqpayCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD",value:"USD"},{id:"EUR",name:"EUR",value:"EUR"},{id:"RUB",name:"RUB",value:"RUB"},{id:"UAH",name:"UAH",value:"UAH"},{id:"BYN",name:"BYN",value:"BYN"},{id:"KZT",name:"KZT",value:"KZT"}]}).inline(6),e.LibelulaSecurity=new e("libelula/libelulaSecurity",n.User,!0,__("Security Code"),a.TextField,null,{placeholder:""}),e.LibelulaDescription=new e("libelula/libelulaDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.LibelulaAmount=new e("libelula/libelulaAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.LibelulaCurrency=new e("libelula/libelulaCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"BOB",name:"BOB",value:"BOB"},{id:"USD",name:"USD",value:"USD"}]}).inline(6),e.LibelulaDemo=new e("libelula/LibelulaDemo",n.User,!0,__("Demo"),r()).inline(4),e.AlipayPartner=new e("alipay/alipayPartner",n.User,!0,__("Partner"),a.TextField,null,{placeholder:""}),e.AlipaySecurity=new e("alipay/alipaySecurity",n.User,!0,__("Security Code"),a.TextField,null,{placeholder:""}),e.AlipayDescription=new e("alipay/alipayDescription",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.AlipayAmount=new e("alipay/alipayAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.AlipayCurrency=new e("alipay/alipayCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"GBP",name:"GBP",value:"GBP"},{id:"HKD",name:"HKD",value:"HKD"},{id:"USD",name:"USD",value:"USD"},{id:"CHF",name:"CHF",value:"CHF"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SEK",name:"SEK",value:"SEK"},{id:"DKK",name:"DKK",value:"DKK"},{id:"NOK",name:"NOK",value:"NOK"},{id:"JPY",name:"JPY",value:"JPY"},{id:"CAD",name:"CAD",value:"CAD"},{id:"AUD",name:"AUD",value:"AUD"},{id:"EUR",name:"EUR",value:"EUR"},{id:"NZD",name:"NZD",value:"NZD"},{id:"RUB",name:"RUB",value:"RUB"},{id:"MOP",name:"MOP",value:"MOP"}]}).inline(6),e.MercadoClientId=new e("mercado/mercadoClientId",n.User,!0,__("Client ID"),a.TextField,null,{placeholder:""}),e.MercadoSecretId=new e("mercado/mercadoSecretId",n.User,!0,__("Secret ID"),a.TextField,null,{placeholder:""}),e.MercadoTitle=new e("mercado/mercadoTitle",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.MercadoUnitPrice=new e("mercado/mercadoUnitPrice",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.MercadoCurrencyId=new e("mercado/mercadoCurrencyId",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"ARS",name:"ARS",value:"ARS"},{id:"BRL",name:"BRL",value:"BRL"},{id:"VEF",name:"VEF",value:"VEF"},{id:"CLP",name:"CLP",value:"CLP"},{id:"MXN",name:"MXN",value:"MXN"},{id:"COP",name:"COP",value:"COP"},{id:"PEN",name:"PEN",value:"PEN"},{id:"UYU",name:"UYU",value:"UYU"}]}).inline(6),e.StripePublishableKey=new e("stripe/stripePublishableKey",n.User,!0,__("API Key"),a.TextField,null,{placeholder:""}),e.StripeSecretKey=new e("stripe/stripeSecretKey",n.User,!0,__("Secret Key"),a.TextField,null,{placeholder:""}),e.StripeDescription=new e("stripe/stripeDescription",n.User,!0,__("Item Name"),a.TextField,null,{placeholder:""}),e.StripeDescription2=new e("stripe/stripeDescription2",n.User,!0,__("Product description"),a.TextField,null,{placeholder:""}),e.StripeAmount=new e("stripe/stripeAmount",n.User,!0,__("Price"),a.TextField,null,{placeholder:""}).inline(6),e.StripeCurrency=new e("stripe/stripeCurrency",n.User,!0,__("Currency"),P.DropdownBox,null,{options:[{id:"USD",name:"USD",value:"USD"},{id:"EUR",name:"EUR",value:"EUR"},{id:"AED",name:"AED",value:"AED"},{id:"AFN",name:"AFN",value:"AFN"},{id:"ALL",name:"ALL",value:"ALL"},{id:"AMD",name:"AMD",value:"AMD"},{id:"ANG",name:"ANG",value:"ANG"},{id:"AOA",name:"AOA",value:"AOA"},{id:"AUD",name:"AUD",value:"AUD"},{id:"AWG",name:"AWG",value:"AWG"},{id:"AZN",name:"AZN",value:"AZN"},{id:"BAM",name:"BAM",value:"BAM"},{id:"BBD",name:"BBD",value:"BBD"},{id:"BDT",name:"BDT",value:"BDT"},{id:"BGN",name:"BGN",value:"BGN"},{id:"BIF",name:"BIF",value:"BIF"},{id:"BMD",name:"BMD",value:"BMD"},{id:"BND",name:"BND",value:"BND"},{id:"BOB",name:"BOB",value:"BOB"},{id:"BRL",name:"BRL",value:"BRL"},{id:"BSD",name:"BSD",value:"BSD"},{id:"BWP",name:"BWP",value:"BWP"},{id:"BZD",name:"BZD",value:"BZD"},{id:"CAD",name:"CAD",value:"CAD"},{id:"CDF",name:"CDF",value:"CDF"},{id:"CHF",name:"CHF",value:"CHF"},{id:"CLP",name:"CLP",value:"CLP"},{id:"CNY",name:"CNY",value:"CNY"},{id:"COP",name:"COP",value:"COP"},{id:"CRC",name:"CRC",value:"CRC"},{id:"CVE",name:"CVE",value:"CVE"},{id:"CZK",name:"CZK",value:"CZK"},{id:"DJF",name:"DJF",value:"DJF"},{id:"DKK",name:"DKK",value:"DKK"},{id:"DOP",name:"DOP",value:"DOP"},{id:"DZD",name:"DZD",value:"DZD"},{id:"EGP",name:"EGP",value:"EGP"},{id:"ETB",name:"ETB",value:"ETB"},{id:"FJD",name:"FJD",value:"FJD"},{id:"FKP",name:"FKP",value:"FKP"},{id:"GBP",name:"GBP",value:"GBP"},{id:"GEL",name:"GEL",value:"GEL"},{id:"GIP",name:"GIP",value:"GIP"},{id:"GMD",name:"GMD",value:"GMD"},{id:"GNF",name:"GNF",value:"GNF"},{id:"GTQ",name:"GTQ",value:"GTQ"},{id:"GYD",name:"GYD",value:"GYD"},{id:"HKD",name:"HKD",value:"HKD"},{id:"HNL",name:"HNL",value:"HNL"},{id:"HRK",name:"HRK",value:"HRK"},{id:"HTG",name:"HTG",value:"HTG"},{id:"HUF",name:"HUF",value:"HUF"},{id:"IDR",name:"IDR",value:"IDR"},{id:"ILS",name:"ILS",value:"ILS"},{id:"INR",name:"INR",value:"INR"},{id:"ISK",name:"ISK",value:"ISK"},{id:"JMD",name:"JMD",value:"JMD"},{id:"JPY",name:"JPY",value:"JPY"},{id:"KES",name:"KES",value:"KES"},{id:"KGS",name:"KGS",value:"KGS"},{id:"KHR",name:"KHR",value:"KHR"},{id:"KMF",name:"KMF",value:"KMF"},{id:"KRW",name:"KRW",value:"KRW"},{id:"KYD",name:"KYD",value:"KYD"},{id:"KZT",name:"KZT",value:"KZT"},{id:"LAK",name:"LAK",value:"LAK"},{id:"LBP",name:"LBP",value:"LBP"},{id:"LKR",name:"LKR",value:"LKR"},{id:"LRD",name:"LRD",value:"LRD"},{id:"LSL",name:"LSL",value:"LSL"},{id:"MAD",name:"MAD",value:"MAD"},{id:"MDL",name:"MDL",value:"MDL"},{id:"MGA",name:"MGA",value:"MGA"},{id:"MKD",name:"MKD",value:"MKD"},{id:"MMK",name:"MMK",value:"MMK"},{id:"MNT",name:"MNT",value:"MNT"},{id:"MOP",name:"MOP",value:"MOP"},{id:"MRO",name:"MRO",value:"MRO"},{id:"MUR",name:"MUR",value:"MUR"},{id:"MVR",name:"MVR",value:"MVR"},{id:"MWK",name:"MWK",value:"MWK"},{id:"MXN",name:"MXN",value:"MXN"},{id:"MYR",name:"MYR",value:"MYR"},{id:"MZN",name:"MZN",value:"MZN"},{id:"NAD",name:"NAD",value:"NAD"},{id:"NGN",name:"NGN",value:"NGN"},{id:"NIO",name:"NIO",value:"NIO"},{id:"NOK",name:"NOK",value:"NOK"},{id:"NPR",name:"NPR",value:"NPR"},{id:"NZD",name:"NZD",value:"NZD"},{id:"PAB",name:"PAB",value:"PAB"},{id:"PEN",name:"PEN",value:"PEN"},{id:"PGK",name:"PGK",value:"PGK"},{id:"PHP",name:"PHP",value:"PHP"},{id:"PKR",name:"PKR",value:"PKR"},{id:"PLN",name:"PLN",value:"PLN"},{id:"PYG",name:"PYG",value:"PYG"},{id:"QAR",name:"QAR",value:"QAR"},{id:"RON",name:"RON",value:"RON"},{id:"RSD",name:"RSD",value:"RSD"},{id:"RUB",name:"RUB",value:"RUB"},{id:"RWF",name:"RWF",value:"RWF"},{id:"SAR",name:"SAR",value:"SAR"},{id:"SBD",name:"SBD",value:"SBD"},{id:"SCR",name:"SCR",value:"SCR"},{id:"SEK",name:"SEK",value:"SEK"},{id:"SGD",name:"SGD",value:"SGD"},{id:"SHP",name:"SHP",value:"SHP"},{id:"SLL",name:"SLL",value:"SLL"},{id:"SOS",name:"SOS",value:"SOS"},{id:"SRD",name:"SRD",value:"SRD"},{id:"STD",name:"STD",value:"STD"},{id:"SVC",name:"SVC",value:"SVC"},{id:"SZL",name:"SZL",value:"SZL"},{id:"THB",name:"THB",value:"THB"},{id:"TJS",name:"TJS",value:"TJS"},{id:"TOP",name:"TOP",value:"TOP"},{id:"TRY",name:"TRY",value:"TRY"},{id:"TTD",name:"TTD",value:"TTD"},{id:"TWD",name:"TWD",value:"TWD"},{id:"TZS",name:"TZS",value:"TZS"},{id:"UAH",name:"UAH",value:"UAH"},{id:"UGX",name:"UGX",value:"UGX"},{id:"UYU",name:"UYU",value:"UYU"},{id:"UZS",name:"UZS",value:"UZS"},{id:"VND",name:"VND",value:"VND"},{id:"VUV",name:"VUV",value:"VUV"},{id:"WST",name:"WST",value:"WST"},{id:"XAF",name:"XAF",value:"XAF"},{id:"XCD",name:"XCD",value:"XCD"},{id:"XOF",name:"XOF",value:"XOF"},{id:"XPF",name:"XPF",value:"XPF"},{id:"YER",name:"YER",value:"YER"},{id:"ZAR",name:"ZAR",value:"ZAR"},{id:"ZMW",name:"ZMW",value:"ZMW"}]}).inline(6),e.PaymentGatewayButtonLabel=new e("style/PaymentGatewayButtonLabel",n.User,!0,__("Button label"),a.TextField,null,{placeholder:""}),e.PaymentGatewayFontControl=new e("style/PaymentGatewayFontControl",n.User,!0,__("Font"),D.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!0,noStyle:!0},!1),e.PaymentGatewayButtonColor=new e("style/PaymentGatewayButtonColor",n.User,!0,__("Colour"),E.ColorPicker,null,{big:!0}).inline(6),e.PaymentGatewayBorderControl=new e("style/PaymentGatewayBorderControl",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(6),e.PaymentGatewayShowLogo=new e("style/PaymentGatewayShowLogo",n.User,!0,__("Show logo"),v.RadioBoxGroupControl,null,{options:[{value:1,label:__("Yes")},{value:0,label:__("No")}]}).inline(6),e.PaymentGatewayLogo=new e("style/PaymentGatewayLogo",n.User,!0,__("Logo"),P.DropdownBox,null).inline(6),e.PaymentGatewayLogoWidth=new e("style/PaymentGatewayLogoWidth",n.User,!0,__("Max logo width"),o.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:"px"}).inline(6),e.PaymentGatewayButtonPadding=new e("style/PaymentGatewayButtonPadding",n.User,!0,__("Padding"),o.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:"px"}).inline(6),e.PinterestWidgetType=new e("pinterest/pinterestWidgetType",n.User,!0,__("Widget type"),P.DropdownBox,null,{options:[{id:1,name:__("Save Button"),value:1},{id:2,name:__("Follow"),value:2},{id:3,name:__("Pin"),value:3},{id:4,name:__("Board"),value:4},{id:5,name:__("Profile"),value:5}]}),e.PinterestButtonType=new e("pinterest/pinterestButtonType",n.User,!0,__("Button type"),P.DropdownBox,null,{options:[{id:"one_image",name:__("One Image")},{id:"any_image",name:__("Any Image")}]}),e.PinterestButtonLarge=new e("pinterest/pinterestButtonLarge",n.User,!0,__("Large"),r()).inline(4),e.PinterestButtonRound=new e("pinterest/pinterestButtonRound",n.User,!0,__("Round"),r()).inline(4),e.PinterestCustomButtonImage=new e("pinterest/pinterestCustomButtonImage",n.User,!0,__("Custom button image"),a.TextField,null,{placeholder:""}),e.PinterestOneImageUrl=new e("pinterest/pinterestOneImageUrl",n.User,!0,__("Image source URL"),a.TextField,null,{placeholder:"https://www.flickr.com/photos/kentbrew/6851755809/"}),e.PinterestOneImageImage=new e("pinterest/pinterestOneImageImage",n.User,!0,__("Image URL"),a.TextField,null,{placeholder:"https://farm8.staticflickr.com/7027/6851755809_df5b2051c9_z.jpg"}),e.PinterestOneImageDesc=new e("pinterest/pinterestOneImageDesc",n.User,!0,__("Description"),a.TextField,null,{placeholder:""}),e.PinterestShowPinCount=new e("pinterest/pinterestShowPinCount",n.User,!0,__("Show pin count"),P.DropdownBox,null,{options:[{id:"none",name:__("Not Shown")},{id:"above",name:__("Above the Button")},{id:"beside",name:__("Beside the Button")}]}),e.PinterestPinLanguage=new e("pinterest/pinterestPinLanguage",n.User,!0,__("Language"),P.DropdownBox,null,{options:[{id:"default",name:__("User's Default Language")},{id:"en",name:"English"},{id:"cs",name:"Czech"},{id:"da",name:"Danish"},{id:"de",name:"German"},{id:"el",name:"Greek"},{id:"es",name:"Spanish"},{id:"fi",name:"Finnish"},{id:"fr",name:"French"},{id:"hi",name:"Hindu"},{id:"hu",name:"Hungarian"},{id:"id",name:"Indonesian"},{id:"it",name:"Italian"},{id:"ja",name:"Japanese"},{id:"ko",name:"Korean"},{id:"ms",name:"Malaysian"},{id:"nb",name:"Norwegian"},{id:"nl",name:"Dutch"},{id:"pl",name:"Polish"},{id:"pt",name:"Portuguese"},{id:"pt-br",name:"Portuguese (Brazil)"},{id:"ro",name:"Romanian"},{id:"ru",name:"Russian"},{id:"sk",name:"Slovak"},{id:"sv",name:"Swedish"},{id:"tl",name:"Tagalog"},{id:"th",name:"Thai"},{id:"tr",name:"Turkish"},{id:"uk",name:"Ukrainian"},{id:"vi",name:"Vietnamese"}]}),e.PinterestFollowUrl=new e("pinterest/pinterestFollowUrl",n.User,!0,__("Pinterest user URL"),a.TextField,null,{placeholder:"https://www.pinterest.com/pinterest/"}),e.PinterestFollowTitle=new e("pinterest/pinterestFollowTitle",n.User,!0,__("Full name"),a.TextField,null,{placeholder:""}),e.PinterestPinUrl=new e("pinterest/pinterestPinUrl",n.User,!0,__("Pin URL"),a.TextField,null,{placeholder:"https://www.pinterest.com/pin/99360735500167749/"}),e.PinterestPinSize=new e("pinterest/pinterestPinSize",n.User,!0,__("Pin size"),P.DropdownBox,null,{options:[{id:"small",name:__("Small")},{id:"medium",name:__("Medium")},{id:"large",name:__("Large")}]}),e.PinterestHideDescription=new e("pinterest/pinterestHideDescription",n.User,!0,__("Hide description"),r()),e.PinterestBoardUrl=new e("pinterest/pinterestBoardUrl",n.User,!0,__("Pinterest board URL"),a.TextField,null,{placeholder:"https://www.pinterest.com/pinterest/official-news/"}),e.PinterestBoardHeight=new e("pinterest/pinterestBoardHeight",n.User,!0,__("Board height"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.PinterestBoardWidth=new e("pinterest/pinterestBoardWidth",n.User,!0,__("Board width"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.PinterestBoardImageWidth=new e("pinterest/pinterestBoardImageWidth",n.User,!0,__("Width of images"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.PinterestProfileUrl=new e("pinterest/pinterestProfileUrl",n.User,!0,__("Pinterest user profile URL"),a.TextField,null,{placeholder:"https://www.pinterest.com/pinterest/"}),e.PinterestProfileHeight=new e("pinterest/pinterestProfileHeight",n.User,!0,__("Profile height"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.PinterestProfileWidth=new e("pinterest/pinterestProfileWidth",n.User,!0,__("Profile width"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.PinterestProfileImageWidth=new e("pinterest/pinterestProfileImageWidth",n.User,!0,__("Width of images"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.OdnoklassnikiShareUrl=new e("odnoklassniki share/odnoklassnikiShareUrl",n.User,!0,__("URL"),a.TextField,null,{placeholder:"https://www.google.com"}),e.OdnoklassnikiShareSize=new e("odnoklassniki share/odnoklassnikiShareSize",n.User,!0,__("Size"),P.DropdownBox,null,{options:[{id:12,name:"12",value:12},{id:20,name:"20",value:20},{id:30,name:"30",value:30},{id:45,name:"45",value:45},{id:70,name:"70",value:70},{id:100,name:"100",value:100},{id:150,name:"150",value:150}]}).inline(6),e.OdnoklassnikiShareStyle=new e("odnoklassniki share/odnoklassnikiShareStyle",n.User,!0,__("Style"),P.DropdownBox,null,{options:[{id:"oval",name:__("Oval")},{id:"rounded",name:__("Rounded")},{id:"straight",name:__("Straight")}]}).inline(6),e.OdnoklassnikiShareCounterPosition=new e("odnoklassniki share/odnoklassnikiShareCounterPosition",n.User,!0,__("Counter position"),P.DropdownBox,null,{options:[{id:"",name:__("None"),value:null},{id:"right",name:__("Right"),value:"right"},{id:"top",name:__("Top"),value:"top"}]}).inline(6),e.OdnoklassnikiShareText=new e("odnoklassniki share/odnoklassnikiShareText",n.User,!0,__("Text"),P.DropdownBox,null,{options:[{id:0,name:__("None"),value:0},{id:1,name:__("Klass"),value:1},{id:2,name:__("Share"),value:2},{id:3,name:__("Like"),value:3}]}).inline(6),e.VkontakteLikeAppId=new e("vkontakte like/vkontakteLikeAppId",n.User,!0,__("Group ID"),a.TextField,null,{placeholder:"1936057"}),e.VkontakteLikeButtonHeight=new e("vkontakte like/vkontakteLikeButtonHeight",n.User,!0,__("Button Height"),P.DropdownBox,null,{options:[{id:18,name:"18 px",value:18},{id:20,name:"20 px",value:20},{id:22,name:"22 px",value:22},{id:24,name:"24 px",value:24}]}),e.VkontakteLikeButtonName=new e("vkontakte like/vkontakteLikeButtonName",n.User,!0,__("Button Name"),P.DropdownBox,null,{options:[{id:0,name:__("Like"),value:0},{id:1,name:__("This is interesting"),value:1}]}),e.VkontakteLikeButtonLayout=new e("vkontakte like/vkontakteLikeButtonLayout",n.User,!0,__("Button Layout"),v.RadioBoxGroupControl,null,{options:[{value:"full",label:__("Button with text counter")},{value:"mini",label:__("Mini button")},{value:"vertical",label:__("Mini button with counter at the top")}]}),e.OdnoklassnikiGroupId=new e("Odnoklassniki/odnoklassnikiGroupId",n.User,!0,__("Group ID"),a.TextField,null,{placeholder:"52101667553405"}),e.VkontakteProfileId=new e("vkontakte community/vkontakteProfileId",n.User,!0,__("ID for Page or Group"),a.TextField,null,{placeholder:"22822305"}),e.VkontakteLayout=new e("vkontakte community/vkontakteLayout",n.User,!0,__("Layout"),v.RadioBoxGroupControl,null,{options:[{value:0,label:__("Members")},{value:2,label:__("News")},{value:1,label:__("Name only")}]}),e.VkontakteBackgroundColor=new e("vkontakte community/vkontakteBackgroundColor",n.User,!0,__("Background"),E.ColorPicker,null,{big:!0}).inline(6),e.VkontakteTextColor=new e("vkontakte community/vkontakteTextColor",n.User,!0,__("Text"),E.ColorPicker,null,{big:!0}).inline(6),e.VkontakteButtonsColor=new e("vkontakte community/vkontakteButtonsColor",n.User,!0,__("Buttons"),E.ColorPicker,null,{big:!0}).inline(6),e.FacebookCommentLink=new e("facebook comment/facebookCommentLink",n.User,!0,__("URL"),a.TextField,null,{placeholder:"https://developers.facebook.com/docs/plugins/comments#configurator"}),e.FacebookCommentPostNumber=new e("facebook comment/facebookCommentPostNumber",n.User,!0,__("Items"),o.SizeSelector,null,{helpText:__("Number of items to show"),min:1,max:100,hideSpinner:!0}),e.FacebookCommentColourScheme=new e("facebook comment/facebookCommentColourScheme",n.User,!0,__("Colour scheme"),P.DropdownBox,null,{options:[{id:"#light",name:"light",value:"light"},{id:"#dark",name:"dark",value:"dark"}]}),e.FacebookCommentSorting=new e("facebook comment/facebookCommentSorting",n.User,!0,__("Comments sorting"),P.DropdownBox,null,{options:[{id:"#social",name:"social",value:"social"},{id:"#reverse_time",name:"reverse_time",value:"reverse_time"},{id:"#time",name:"time",value:"time"}]}),e.InstagramUsername=new e("instagram/instagramUsername",n.User,!0,__("Username"),a.TextField,null,{placeholder:"@instagram"}),e.InstagramItemsToShow=new e("instagram/instagramItemsToShow",n.User,!0,__("Items"),o.SizeSelector,null,{min:1,max:100,hideSpinner:!0}).inline(6),e.InstagramImageMargin=new e("instagram/instagramImageMargin",n.User,!0,__("Padding"),o.SizeSelector,null,{min:0,max:9999,hideSpinner:!0,units:"px"}).inline(6),e.InstagramImageSize=new e("instagram/instagramImageSize",n.User,!0,__("Image size"),o.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:"px"}).inline(6),e.InstagramImageAlign=new e("instagram/instagramImageAlign",n.User,!0,__("Align"),I.HAlignSelector,null,{justify:!1}).inline(6),e.InstagramExcludeVideo=new e("instagram/instagramExcludeVideo",n.User,!0,__("Exclude video"),r()),e.InstagramShowScrollbar=new e("instagram/instagramShowScrollbar",n.User,!0,__("Show scrollbar"),r()),e.InstagramImageCrop=new e("instagram/instagramImageCrop",n.User,!0,__("Use square images"),r()),e.InstagramShuffle=new e("instagram/instagramShuffle",n.User,!0,__("Shuffle"),r()),e.GoogleCalendarId=new e("Google Calendar/googleCalendarId",n.User,!0,__("Google calendar ID"),a.TextField,null,{placeholder:"uk__en_gb@holiday.calendar.google.com"}),e.GoogleCalendarName=new e("Google Calendar/googleCalendarName",n.User,!0,__("Calendar name"),a.TextField,null,{placeholder:"Calendar name"}),e.GoogleCalendarLanguage=new e("Google Calendar/googleCalendarLanguage",n.User,!0,__("Language"),P.DropdownBox,null,{options:[{id:"",name:"Default"},{id:"id",name:"Bahasa Indonesia"},{id:"ca",name:"Català"},{id:"cs",name:"Čeština"},{id:"da",name:"Dansk"},{id:"de",name:"Deutsch"},{id:"en_GB",name:"English (UK)"},{id:"en",name:"English (US)"},{id:"es",name:"Español"},{id:"es_419",name:"Español (Latinoamérica)"},{id:"fil",name:"Filipino"},{id:"fr",name:"Français"},{id:"hr",name:"Hrvatski"},{id:"it",name:"Italiano"},{id:"lv",name:"Latviešu"},{id:"lt",name:"Lietuvių"},{id:"hu",name:"Magyar"},{id:"nl",name:"Nederlands"},{id:"no",name:"Norsk (bokmål)"},{id:"pl",name:"Polski"},{id:"pt_BR",name:"Português (Brasil)"},{id:"pt_PT",name:"Português (Portugal)"},{id:"ro",name:"Română"},{id:"sk",name:"Slovenčina"},{id:"sl",name:"Slovenščina"},{id:"fi",name:"Suomi"},{id:"sv",name:"Svenska"},{id:"tr",name:"Türkçe"},{id:"vi",name:"Tiếng Việt"},{id:"el",name:"Ελληνικά"},{id:"ru",name:"Русский"},{id:"sr",name:"Српски"},{id:"uk",name:"Українська"},{id:"bg",name:"Български"},{id:"iw",name:"עברית"},{id:"ar",name:"العربية"},{id:"fa",name:"فارسی"},{id:"hi",name:"हिन्दी"},{id:"th",name:"ภาษาไทย"},{id:"zh_TW",name:"中文（繁體）"},{id:"zh_CN",name:"中文（简体）"},{id:"ja",name:"日本語"},{id:"ko",name:"한국어"}]}),e.GoogleCalendarTimezone=new e("Google Calendar/googleCalendarTimezone",n.User,!0,__("Time zone"),P.DropdownBox,null,{options:[{id:"",name:"Default"},{id:"Pacific/Niue",name:"(GMT-11:00) Niue"},{id:"Pacific/Pago_Pago",name:"(GMT-11:00) Pago Pago"},{id:"Pacific/Honolulu",name:"(GMT-10:00) Honolulu"},{id:"Pacific/Rarotonga",name:"(GMT-10:00) Rarotonga"},{id:"Pacific/Tahiti",name:"(GMT-10:00) Tahiti"},{id:"Pacific/Marquesas",name:"(GMT-09:30) Marquesas"},{id:"America/Anchorage",name:"(GMT-09:00) Anchorage"},{id:"Pacific/Gambier",name:"(GMT-09:00) Gambier"},{id:"America/Los_Angeles",name:"(GMT-08:00) Los Angeles"},{id:"America/Tijuana",name:"(GMT-08:00) Tijuana"},{id:"America/Vancouver",name:"(GMT-08:00) Vancouver"},{id:"America/Whitehorse",name:"(GMT-08:00) Whitehorse"},{id:"Pacific/Pitcairn",name:"(GMT-08:00) Pitcairn"},{id:"America/Dawson_Creek",name:"(GMT-07:00) Dawson Creek"},{id:"America/Denver",name:"(GMT-07:00) Denver"},{id:"America/Edmonton",name:"(GMT-07:00) Edmonton"},{id:"America/Hermosillo",name:"(GMT-07:00) Hermosillo"},{id:"America/Mazatlan",name:"(GMT-07:00) Mazatlan"},{id:"America/Phoenix",name:"(GMT-07:00) Phoenix"},{id:"America/Yellowknife",name:"(GMT-07:00) Yellowknife"},{id:"America/Belize",name:"(GMT-06:00) Belize"},{id:"America/Chicago",name:"(GMT-06:00) Chicago"},{id:"America/Costa_Rica",name:"(GMT-06:00) Costa Rica"},{id:"America/El_Salvador",name:"(GMT-06:00) El Salvador"},{id:"America/Guatemala",name:"(GMT-06:00) Guatemala"},{id:"America/Managua",name:"(GMT-06:00) Managua"},{id:"America/Mexico_City",name:"(GMT-06:00) Mexico City"},{id:"America/Regina",name:"(GMT-06:00) Regina"},{id:"America/Tegucigalpa",name:"(GMT-06:00)Tegucigalpa"},{id:"America/Winnipeg",name:"(GMT-06:00) Winnipeg"},{id:"Pacific/Galapagos",name:"(GMT-06:00) Galapagos"},{id:"America/Bogota",name:"(GMT-05:00) Bogota"},{id:"America/Cancun",name:"(GMT-05:00) Cancun"},{id:"America/Cayman",name:"(GMT-05:00) Cayman"},{id:"America/Guayaquil",name:"(GMT-05:00) Guayaquil"},{id:"America/Havana",name:"(GMT-05:00) Havana"},{id:"America/Iqaluit",name:"(GMT-05:00) Iqaluit"},{id:"America/Jamaica",name:"(GMT-05:00) Jamaica"},{id:"America/Lima",name:"(GMT-05:00) Lima"},{id:"America/Nassau",name:"(GMT-05:00) Nassau"},{id:"America/New_York",name:"(GMT-05:00) New York"},{id:"America/Panama",name:"(GMT-05:00) Panama"},{id:"America/Port-au-Prince",name:"(GMT-05:00) Port au Prince"},{id:"America/Rio_Branco",name:"(GMT-05:00) Rio Branco"},{id:"America/Toronto",name:"(GMT-05:00) Toronto"},{id:"Pacific/Easter",name:"(GMT-05:00) Easter"},{id:"America/Caracas",name:"(GMT-04:30) Caracas"},{id:"America/Asuncion",name:"(GMT-04:00) Asuncion"},{id:"America/Barbados",name:"(GMT-04:00) Barbados"},{id:"America/Boa_Vista",name:"(GMT-04:00) Boa Vista"},{id:"America/Campo_Grande",name:"(GMT-04:00) Campo Grande"},{id:"America/Cuiaba",name:"(GMT-04:00) Cuiaba"},{id:"America/Curacao",name:"(GMT-04:00) Curacao"},{id:"America/Grand_Turk",name:"(GMT-04:00) Grand Turk"},{id:"America/Guyana",name:"(GMT-04:00) Guyana"},{id:"America/Halifax",name:"(GMT-04:00) Halifax"},{id:"America/La_Paz",name:"(GMT-04:00) La Paz"},{id:"America/Manaus",name:"(GMT-04:00) Manaus"},{id:"America/Martinique",name:"(GMT-04:00) Martinique"},{id:"America/Port_of_Spain",name:"(GMT-04:00) Port of Spain"},{id:"America/Porto_Velho",name:"(GMT-04:00) Porto Velho"},{id:"America/Puerto_Rico",name:"(GMT-04:00) Puerto Rico"},{id:"America/Santo_Domingo",name:"(GMT-04:00) Santo Domingo"},{id:"America/Thule",name:"(GMT-04:00) Thule"},{id:"Atlantic/Bermuda",name:"(GMT-04:00) Bermuda"},{id:"America/St_Johns",name:"(GMT-03:30) St Johns"},{id:"America/Araguaina",name:"(GMT-03:00) Araguaina"},{id:"America/Argentina/Buenos_Aires",name:"(GMT-03:00) Buenos Aires"},{id:"America/Bahia",name:"(GMT-03:00) Bahia"},{id:"America/Belem",name:"(GMT-03:00) Belem"},{id:"America/Cayenne",name:"(GMT-03:00) Cayenne"},{id:"America/Fortaleza",name:"(GMT-03:00) Fortaleza"},{id:"America/Godthab",name:"(GMT-03:00) Godthab"},{id:"America/Maceio",name:"(GMT-03:00) Maceio"},{id:"America/Miquelon",name:"(GMT-03:00) Miquelon"},{id:"America/Montevideo",name:"(GMT-03:00) Montevideo"},{id:"America/Paramaribo",name:"(GMT-03:00) Paramaribo"},{id:"America/Recife",name:"(GMT-03:00) Recife"},{id:"America/Santiago",name:"(GMT-03:00) Santiago"},{id:"America/Sao_Paulo",name:"(GMT-03:00) Sao Paulo"},{id:"Antarctica/Palmer",name:"(GMT-03:00) Palmer"},{id:"Antarctica/Rothera",name:"(GMT-03:00) Rothera"},{id:"Atlantic/Stanley",name:"(GMT-03:00) Stanley"},{id:"America/Noronha",name:"(GMT-02:00) Noronha"},{id:"Atlantic/South_Georgia",name:"(GMT-02:00) South Georgia"},{id:"America/Scoresbysund",name:"(GMT-01:00) Scoresbysund"},{id:"Atlantic/Azores",name:"(GMT-01:00) Azores"},{id:"Atlantic/Cape_Verde",name:"(GMT-01:00) Cape Verde"},{id:"Africa/Abidjan",name:"(GMT+00:00) Abidjan"},{id:"Africa/Accra",name:"(GMT+00:00) Accra"},{id:"Africa/Bissau",name:"(GMT+00:00) Bissau"},{id:"Africa/Casablanca",name:"(GMT+00:00) Casablanca"},{id:"Africa/El_Aaiun",name:"(GMT+00:00) El Aaiun"},{id:"Africa/Monrovia",name:"(GMT+00:00) Monrovia"},{id:"America/Danmarkshavn",name:"(GMT+00:00) Danmarkshavn"},{id:"Atlantic/Canary",name:"(GMT+00:00) Canary"},{id:"Atlantic/Faroe",name:"(GMT+00:00) Faroe"},{id:"Atlantic/Reykjavik",name:"(GMT+00:00) Reykjavik"},{id:"Etc/GMT",name:"(GMT+00:00) GMT"},{id:"Europe/Dublin",name:"(GMT+00:00) Dublin"},{id:"Europe/Lisbon",name:"(GMT+00:00) Lisbon"},{id:"Europe/London",name:"(GMT+00:00) London"},{id:"Africa/Algiers",name:"(GMT+01:00) Algiers"},{id:"Africa/Ceuta",name:"(GMT+01:00) Ceuta"},{id:"Africa/Lagos",name:"(GMT+01:00) Lagos"},{id:"Africa/Ndjamena",name:"(GMT+01:00) Ndjamena"},{id:"Africa/Tunis",name:"(GMT+01:00) Tunis"},{id:"Africa/Windhoek",name:"(GMT+01:00) Windhoek"},{id:"Europe/Amsterdam",name:"(GMT+01:00) Amsterdam"},{id:"Europe/Andorra",name:"(GMT+01:00) Andorra"},{id:"Europe/Belgrade",name:"(GMT+01:00) Belgrade"},{id:"Europe/Berlin",name:"(GMT+01:00) Berlin"},{id:"Europe/Brussels",name:"(GMT+01:00) Brussels"},{id:"Europe/Budapest",name:"(GMT+01:00) Budapest"},{id:"Europe/Copenhagen",name:"(GMT+01:00) Copenhagen"},{id:"Europe/Gibraltar",name:"(GMT+01:00) Gibraltar"},{id:"Europe/Luxembourg",name:"(GMT+01:00) Luxembourg"},{id:"Europe/Madrid",name:"(GMT+01:00) Madrid"},{id:"Europe/Malta",name:"(GMT+01:00) Malta"},{id:"Europe/Monaco",name:"(GMT+01:00) Monaco"},{id:"Europe/Oslo",name:"(GMT+01:00) Oslo"},{id:"Europe/Paris",name:"(GMT+01:00) Paris"},{id:"Europe/Prague",name:"(GMT+01:00) Prague"},{id:"Europe/Rome",name:"(GMT+01:00) Rome"},{id:"Europe/Stockholm",name:"(GMT+01:00) Stockholm"},{id:"Europe/Tirane",name:"(GMT+01:00) Tirane"},{id:"Europe/Vienna",name:"(GMT+01:00) Vienna"},{id:"Europe/Warsaw",name:"(GMT+01:00) Warsaw"},{id:"Europe/Zurich",name:"(GMT+01:00) Zurich"},{id:"Africa/Cairo",name:"(GMT+02:00) Cairo"},{id:"Africa/Johannesburg",name:"(GMT+02:00) Johannesburg"},{id:"Africa/Maputo",name:"(GMT+02:00) Maputo"},{id:"Africa/Tripoli",name:"(GMT+02:00) Tripoli"},{id:"Asia/Amman",name:"(GMT+02:00) Amman"},{id:"Asia/Beirut",name:"(GMT+02:00) Beirut"},{id:"Asia/Damascus",name:"(GMT+02:00) Damascus"},{id:"Asia/Gaza",name:"(GMT+02:00) Gaza"},{id:"Asia/Jerusalem",name:"(GMT+02:00) Jerusalem"},{id:"Asia/Nicosia",name:"(GMT+02:00) Nicosia"},{id:"Europe/Athens",name:"(GMT+02:00) Athens"},{id:"Europe/Bucharest",name:"(GMT+02:00) Bucharest"},{id:"Europe/Chisinau",name:"(GMT+02:00) Chisinau"},{id:"Europe/Helsinki",name:"(GMT+02:00) Helsinki"},{id:"Europe/Istanbul",name:"(GMT+02:00) Istanbul"},{id:"Europe/Kaliningrad",name:"(GMT+02:00) Kaliningrad"},{id:"Europe/Kiev",name:"(GMT+02:00) Kiev"},{id:"Europe/Riga",name:"(GMT+02:00) Riga"},{id:"Europe/Sofia",name:"(GMT+02:00) Sofia"},{id:"Europe/Tallinn",name:"(GMT+02:00) Tallinn"},{id:"Europe/Vilnius",name:"(GMT+02:00) Vilnius"},{id:"Africa/Khartoum",name:"(GMT+03:00) Khartoum"},{id:"Africa/Nairobi",name:"(GMT+03:00) Nairobi"},{id:"Antarctica/Syowa",name:"(GMT+03:00) Syowa"},{id:"Asia/Baghdad",name:"(GMT+03:00) Baghdad"},{id:"Asia/Qatar",name:"(GMT+03:00) Qatar"},{id:"Asia/Riyadh",name:"(GMT+03:00) Riyadh"},{id:"Europe/Minsk",name:"(GMT+03:00) Minsk"},{id:"Europe/Moscow",name:"(GMT+03:00) Moscow"},{id:"Asia/Tehran",name:"(GMT+03:30) Tehran"},{id:"Asia/Baku",name:"(GMT+04:00) Baku"},{id:"Asia/Dubai",name:"(GMT+04:00) Dubai"},{id:"Asia/Tbilisi",name:"(GMT+04:00) Tbilisi"},{id:"Asia/Yerevan",name:"(GMT+04:00) Yerevan"},{id:"Europe/Samara",name:"(GMT+04:00) Samara"},{id:"Indian/Mahe",name:"(GMT+04:00) Mahe"},{id:"Indian/Mauritius",name:"(GMT+04:00) Mauritius"},{id:"Indian/Reunion",name:"(GMT+04:00) Reunion"},{id:"Asia/Kabul",name:"(GMT+04:30) Kabul"},{id:"Antarctica/Mawson",name:"(GMT+05:00) Mawson"},{id:"Asia/Aqtau",name:"(GMT+05:00) Aqtau"},{id:"Asia/Aqtobe",name:"(GMT+05:00) Aqtobe"},{id:"Asia/Ashgabat",name:"(GMT+05:00) Ashgabat"},{id:"Asia/Dushanbe",name:"(GMT+05:00) Dushanbe"},{id:"Asia/Karachi",name:"(GMT+05:00) Karachi"},{id:"Asia/Tashkent",name:"(GMT+05:00) Tashkent"},{id:"Asia/Yekaterinburg",name:"(GMT+05:00) Yekaterinburg"},{id:"Indian/Kerguelen",name:"(GMT+05:00) Kerguelen"},{id:"Indian/Maldives",name:"(GMT+05:00) Maldives"},{id:"Asia/Calcutta",name:"(GMT+05:30) Calcutta"},{id:"Asia/Colombo",name:"(GMT+05:30) Colombo"},{id:"Asia/Katmandu",name:"(GMT+05:45) Katmandu"},{id:"Antarctica/Vostok",name:"(GMT+06:00) Vostok"},{id:"Asia/Almaty",name:"(GMT+06:00) Almaty"},{id:"Asia/Bishkek",name:"(GMT+06:00) Bishkek"},{id:"Asia/Dhaka",name:"(GMT+06:00) Dhaka"},{id:"Asia/Omsk",name:"(GMT+06:00) Omsk"},{id:"Asia/Thimphu",name:"(GMT+06:00) Thimphu"},{id:"Indian/Chagos",name:"(GMT+06:00) Chagos"},{id:"Asia/Rangoon",name:"(GMT+06:30) Rangoon"},{id:"Indian/Cocos",name:"(GMT+06:30) Cocos"},{id:"Antarctica/Davis",name:"(GMT+07:00) Davis"},{id:"Asia/Bangkok",name:"(GMT+07:00) Bangkok"},{id:"Asia/Hovd",name:"(GMT+07:00) Hovd"},{id:"Asia/Jakarta",name:"(GMT+07:00) Jakarta"},{id:"Asia/Krasnoyarsk",name:"(GMT+07:00) Krasnoyarsk"},{id:"Asia/Saigon",name:"(GMT+07:00) Saigon"},{id:"Indian/Christmas",name:"(GMT+07:00) Christmas"},{id:"Antarctica/Casey",name:"(GMT+08:00) Casey"},{id:"Asia/Brunei",name:"(GMT+08:00) Brunei"},{id:"Asia/Choibalsan",name:"(GMT+08:00) Choibalsan"},{id:"Asia/Hong_Kong",name:"(GMT+08:00) Hong Kong"},{id:"Asia/Irkutsk",name:"(GMT+08:00) Irkutsk"},{id:"Asia/Kuala_Lumpur",name:"(GMT+08:00) Kuala Lumpur"},{id:"Asia/Macau",name:"(GMT+08:00) Macau"},{id:"Asia/Makassar",name:"(GMT+08:00) Makassar"},{id:"Asia/Manila",name:"(GMT+08:00) Manila"},{id:"Asia/Shanghai",name:"(GMT+08:00) Shanghai"},{id:"Asia/Singapore",name:"(GMT+08:00) Singapore"},{id:"Asia/Taipei",name:"(GMT+08:00) Taipei"},{id:"Asia/Ulaanbaatar",name:"(GMT+08:00) Ulaanbaatar"},{id:"Australia/Perth",name:"(GMT+08:00) Perth"},{id:"Asia/Pyongyang",name:"(GMT+08:30) Pyongyang"},{id:"Asia/Dili",name:"(GMT+09:00) Dili"},{id:"Asia/Jayapura",name:"(GMT+09:00) Jayapura"},{id:"Asia/Seoul",name:"(GMT+09:00) Seoul"},{id:"Asia/Tokyo",name:"(GMT+09:00) Tokyo"},{id:"Asia/Yakutsk",name:"(GMT+09:00) Yakutsk"},{id:"Pacific/Palau",name:"(GMT+09:00) Palau"},{id:"Australia/Adelaide",name:"(GMT+09:30) Adelaide"},{id:"Australia/Darwin",name:"(GMT+09:30) Darwin"},{id:"Antarctica/DumontDUrville",name:"(GMT+10:00) DumontDUrville"},{id:"Asia/Magadan",name:"(GMT+10:00) Magadan"},{id:"Asia/Vladivostok",name:"(GMT+10:00) Vladivostok"},{id:"Australia/Brisbane",name:"(GMT+10:00) Brisbane"},{id:"Australia/Hobart",name:"(GMT+10:00) Hobart"},{id:"Australia/Sydney",name:"(GMT+10:00) Sydney"},{id:"Pacific/Chuuk",name:"(GMT+10:00) Chuuk"},{id:"Pacific/Guam",name:"(GMT+10:00) Guam"},{id:"Pacific/Port_Moresby",name:"(GMT+10:00) Port Moresby"},{id:"Pacific/Efate",name:"(GMT+11:00) Efate"},{id:"Pacific/Guadalcanal",name:"(GMT+11:00) Guadalcanal"},{id:"Pacific/Kosrae",name:"(GMT+11:00) Kosrae"},{id:"Pacific/Norfolk",name:"(GMT+11:00) Norfolk"},{id:"Pacific/Noumea",name:"(GMT+11:00) Noumea"},{id:"Pacific/Pohnpei",name:"(GMT+11:00) Pohnpei"},{id:"Asia/Kamchatka",name:"(GMT+12:00) Kamchatka"},{id:"Pacific/Auckland",name:"(GMT+12:00) Auckland"},{id:"Pacific/Fiji",name:"(GMT+12:00) Fiji"},{id:"Pacific/Funafuti",name:"(GMT+12:00) Funafuti"},{id:"Pacific/Kwajalein",name:"(GMT+12:00) Kwajalein"},{id:"Pacific/Majuro",name:"(GMT+12:00) Majuro"},{id:"Pacific/Nauru",name:"(GMT+12:00) Nauru"},{id:"Pacific/Tarawa",name:"(GMT+12:00) Tarawa"},{id:"Pacific/Wake",name:"(GMT+12:00) Wake"},{id:"Pacific/Wallis",name:"(GMT+12:00) Wallis"},{id:"Pacific/Apia",name:"(GMT+13:00) Apia"},{id:"Pacific/Enderbury",name:"(GMT+13:00) Enderbury"},{id:"Pacific/Fakaofo",name:"(GMT+13:00) Fakaofo"},{id:"Pacific/Tongatapu",name:"(GMT+13:00) Tongatapu"},{id:"Pacific/Kiritimati",name:"(GMT+14:00) Kiritimati"}]}),e.GoogleCalendarFirstDay=new e("Google Calendar/googleCalendarFirstDay",n.User,!0,__("First day"),P.DropdownBox,null,{options:[{id:"1",name:"Sunday"},{id:"2",name:"Monday"},{id:"7",name:"Saturday"}]}),e.BaiduAddress=new e("baidu maps/baiduAddress",n.User,!0,__("Coordinates or address"),$.BaiduMapsPlacesControl,null,{configSuplier:function(){return this.callWithData((function(e){return{zoom:e.content.zoom,mapTypeId:e.content.type}}))}}),e.BaiduApiKey=new e("baidu maps/baiduApiKey",n.User,!0,__("API Key"),a.TextField),e.BaiduMapZoom=new e("baidu maps/zoom",n.User,!0,__("Zoom level"),o.SizeSelector,null,{min:1,max:22,hideSpinner:!0}),e.BaiduMapType=new e("baidu maps/baiduMapType",n.User,!0,__("Map type"),v.RadioBoxGroupControl,null,{options:[{value:"BMAP_NORMAL_MAP",label:__("Road map")},{value:"BMAP_SATELLITE_MAP",label:__("Satelite")},{value:"BMAP_HYBRID_MAP",label:__("Hybrid")}]}),e.BaiduShowMarker=new e("baidu maps/baiduShowMarker",n.User,!0,__("Show marker"),r()),e.BaiduAnimMarker=new e("baidu maps/baiduAnimMarker",n.User,!0,__("Animate marker"),r()),e.BingAddress=new e("bing maps/bingAddress",n.User,!0,__("Coordinates or address"),G.BingMapsPlacesControl,null,{configSuplier:function(){return this.callWithData((function(e){return{zoom:e.content.zoomLevel,mapTypeId:e.content.type}}))}}),e.BingApiKey=new e("bing maps/bingApiKey",n.User,!0,__("API Key"),a.TextField),e.BingMapZoom=new e("bing maps/zoom",n.User,!0,__("Zoom level"),o.SizeSelector,null,{min:1,max:22,hideSpinner:!0}),e.BingMapType=new e("bing maps/bingMapType",n.User,!0,__("Map type"),v.RadioBoxGroupControl,null,{options:[{value:"r",label:__("Road map")},{value:"a",label:__("Hybrid")},{value:"be",label:__("Bird's eye")}]}),e.YandexAddress=new e("yandex maps/yandexAddress",n.User,!0,__("Coordinates or address"),W.YandexMapsPlacesControl,null,{configSuplier:function(){return this.callWithData((function(e){return{zoom:e.content.zoomLevel,mapTypeId:e.content.type}}))}}),e.YandexApiKey=new e("yandex maps/yandexApiKey",n.User,!0,__("API Key"),a.TextField,null,{placeholder:"AE4ftlCBAAAA0Y5IfCIAPV4d9jYjMZGyd2z26kswgP7=="}),e.YandexMapZoom=new e("yandex maps/zoom",n.User,!0,__("Zoom level"),o.SizeSelector,null,{min:1,max:22,hideSpinner:!0}),e.YandexMapType=new e("yandex maps/yandexMapType",n.User,!0,__("Map type"),v.RadioBoxGroupControl,null,{options:[{value:"yandex#map",label:__("Road map")},{value:"yandex#satellite",label:__("Satellite")},{value:"yandex#hybrid",label:__("Hybrid")}]}),e.SpotifySrc=new e("spotify/spotifySrc",n.User,!0,__("Spotify Link or URI"),a.TextField,null,{placeholder:"https://open.spotify.com/track/0bYg9bo50gSsH3LtXe2SQn?si=zcMWgG0ZR96TYYUrS8D9gA"}),e.SpotifyType=new e("spotify/spotifyType",n.User,!0,__("Type"),v.RadioBoxGroupControl,null,{options:[{value:"play",label:__("Play")},{value:"follow",label:__("Follow")}]}),e.SpotifySize=new e("spotify/spotifySize",n.User,!0,__("Size"),v.RadioBoxGroupControl,null,{options:[{value:"basic",label:__("Basic")},{value:"detail",label:__("Detail")}]}),e.SpotifyBackground=new e("spotify/spotifyBackground",n.User,!0,__("Colour scheme"),P.DropdownBox,null,{options:[{id:"dark",name:__("Light")},{id:"light",name:__("Dark")}]}),e.SpotifyShowCount=new e("spotify/spotifyShowCount",n.User,!0,__("Show follower count"),r()),e.YoukuGroupId=new e("youku/youkuGroupId",n.User,!0,__("Copy full Youku video URL"),a.TextField,null,{placeholder:"https://v.youku.com/v_show/id_XNDgxNjgwODcyOA==.html?spm=a2ha1.14919748_WEBHOME_GRAY.drawer5.d_zj1_3&scm=20140719.rcmd.7182.video_XNDgxNjgwODcyOA%3D%3D"}),e.YoukuAutoplay=new e("youku/youkuAutoplay",n.User,!0,__("Autoplay"),r()),e.VimeoGroupId=new e("vimeo/vimeoGroupId",n.User,!0,__("Vimeo ID or URL"),a.TextField,null,{placeholder:"7976699"}),e.VimeoPortrait=new e("vimeo/vimeoPortrait",n.User,!0,__("Portrait"),r(),null,{helpText:__("Show the user’s portrait on the video")}),e.VimeoTitle=new e("vimeo/vimeoTitle",n.User,!0,__("Title"),r(),null,{helpText:__("Show the title on the video.")}),e.VimeoAutoplay=new e("vimeo/vimeoAutoplay",n.User,!0,__("Autoplay"),r(),null,{helpText:__("Play the video automatically on load.")}),e.VimeoColor=new e("vimeo/vimeoColor",n.User,!0,__("Color"),E.ColorPicker).inline(6),e.AparatGroupId=new e("aparat/vimeoGroupId",n.User,!0,__("Aparat ID or URL"),a.TextField,null,{placeholder:"uE1Bq"}),e.AparatStartTime=new e("aparat/aparatStartTime",n.User,!0,__("Start at"),a.TextField,null,{placeholder:"00:00"}),e.FacebookVideoId=new e("Facebook video/facebookVideoId",n.User,!0,__("Facebook Video ID or URL"),a.TextField,null,{placeholder:"170515954946/videos/435802976468824"}),e.FacebookVideoStartTime=new e("Facebook video/facebookVideoStartTime",n.User,!0,__("Start at"),a.TextField,null,{placeholder:"00:00"}),e.InstagramVideoId=new e("Instagram video/instagramVideoId",n.User,!0,__("Instagram post ID or URL"),a.TextField,null,{placeholder:"p/CQ_sfAeFl5s"}),e.LayoutElementBackground=new e("layout/background",n.User,!0,__("Background"),p.BackgroundControl).inline(),e.LayoutElementBgBorder=new e("layout/border",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(),e.ElementBackgroundElement=new e("layout/backgroundElement",n.User,!1,__("Background element"),N.BackgroundElementSelector,null,null,void 0,void 0,void 0,!0),e.LayoutElementBgBorderRadius=new e("layout/borderRadius",n.User,!0,__("Rounded corners"),f.RoundCornersControl),e.BlockLayout=new e("layout/layout",n.User,!0,"",d.FlexLayoutControl),e.StoreItemsButton=new e("store/itemsButton",n.User,!0,__("Edit products"),M.UIButton,null,{buttonWidth:100}),e.StoreCheckOrdersButton=new e("store/checkOrdersButton",n.User,!0,__("Check Orders"),M.UIButton,null,{buttonWidth:100}),e.ContactFormButton=new e("store/contactFormButton",n.User,!0,__("Contact Form"),B.ContactFormControl),e.BlogItemsButton=new e("blog/itemsButton",n.User,!0,__("Edit posts"),M.UIButton),e.BlogLayoutType=new e("blog/layoutType",n.User,!0,__("Layout"),K.LayoutSelector,null,{small:!0}),e.BlogCategory=new e("blog/category",n.User,!0,__("Category"),P.DropdownBox,null,{multilevel:!0}),e.BlogElementBackgroundColor=new e("blog/backgroundColor",n.User,!0,__("Background"),E.ColorPicker,null,{big:!0}).inline(6),e.BlogCaptionsBackgroundColor=new e("blog/captionBackgroundColor",n.User,!0,__("Caption background"),E.ColorPicker,null,{big:!0}).inline(6),e.PriceCurrencyCode=new e("price/currencyCode",n.User,!0,__("Currency"),P.DropdownBox).inline(6),e.PriceDecimalPoint=new e("price/decimalPoint",n.User,!0,__("Decimal Point"),P.DropdownBox,null,{options:[{id:".",name:"."},{id:",",name:","}]}).inline(6),e.PriceCurrencyPrefix=new e("price/currencyPrefix",n.User,!0,__("Price prefix"),a.TextField).inline(6),e.PriceCurrencyPostfix=new e("price/currencyPostfix",n.User,!0,__("Price postfix"),a.TextField).inline(6),e.PriceThousandsSeparator=new e("price/thousandsSeparator",n.User,!0,__("Thousands Separator"),P.DropdownBox,null,{options:[{id:"",name:__("No separator")},{id:" ",name:" "},{id:".",name:"."},{id:",",name:","}]}).inline(6),e.PriceDecimalPlaces=new e("price/decimalPlaces",n.User,!0,__("Decimal Places"),o.SizeSelector,null,{min:0,max:4,hideSpinner:!0}).inline(6),e.BtnButtonText=new e("button/buttonText",n.User,!0,__("Text"),C()),e.BtnOnClickLink=new e("button/link",n.User,!0,__("URL"),b(),(function(){return m.UIComponent.wrapControl(new(b()))}),{multilang:!0}),e.BtnFontControl=new e("button/textFontControl",n.User,!0,__("Font"),D.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!1,noSpacing:!1,noStyle:!0,needLineHeight:!0,noColorPicker:!0},!1),e.BtnButtonStyle=new e("button/style",n.User,!0,"",H.ButtonStyleControl,null,{singleBorder:!0,showRadius:!0}),e.MoreProperties=new e("general/morePropertiesButton",n.User,!1,__("More properties"),M.UIButton),e.StoreCartMoreProperties=new e("store cart/morePropertiesButton",n.User,!1,__("More properties"),M.UIButton,null,{buttonWidth:100}),e.StoreCartCheckOrdersButton=new e("store cart/storeCartCheckOrdersButton",n.User,!1,__("Check Orders"),M.UIButton,null,{buttonWidth:100}),e.StoreCartDestinationZonesButton=new e("store cart/storeCartDestinationZonesButton",n.User,!1,__("Destination Zones"),M.UIButton,null,{buttonWidth:100}),e.StoreCartTaxRulesButton=new e("store cart/storeCartTaxRulesButton",n.User,!1,__("Tax Rules"),M.UIButton,null,{buttonWidth:100}),e.StoreCartShippingMethodsButton=new e("store cart/storeCartShippingMethodsButton",n.User,!1,__("Shipping Methods"),M.UIButton,null,{buttonWidth:100}),e.LikeUrl=new e("facebook like/likeUrl",n.User,!0,__("URL to Like (required)"),a.TextField,null,{placeholder:"https://www.facebook.com/facebook"}),e.TwitterWidgetId=new e("twitter/twitterWidgetId",n.User,!0,__("Widget ID or profile URL"),a.TextField,null,{helpText:__('To get Widget Id go to %s. Create new widget "Create New > Search". After create, go back to widgets list and click on it again, copy the ID from the url address OR insert in this field your profile URL').replace("%s",'<a href="https://twitter.com/settings/widgets" target="_blank"> https://twitter.com/settings/widgets</a>'),placeholder:"https://twitter.com/twitter"}),e.TwitterMaxMessageCount=new e("twitter/twitterMaxMessageCount",n.User,!0,__("Number of Tweets"),o.SizeSelector,null,{min:0,max:9999,hideSpinner:!0}).inline(6),e.FlickrGalleryUrl=new e("flickr/flickrGalleryUrl",n.User,!0,__("Flickr gallery or set URL"),a.TextField,void 0,{helpText:"https://www.flickr.com/photos/<wbr>gifrancis/galleries/<wbr>72157622562924322/",placeholder:"https://www.flickr.com/photos/gifrancis/galleries/72157622562924322/"}),e.FacebookPageUrl=new e("facebook fans/facebookPageUrl",n.User,!0,__("Page URL"),a.TextField,null,{helpText:__("Only for Facebook pages, not for profiles"),placeholder:"https://www.facebook.com/platform"}),e.FacebookLikeAction=new e("facebook like/facebookLikeAction",n.User,!0,__("Verb to display"),v.RadioBoxGroupControl,null,{helpText:__("The verb to display in the button. Currently only 'like' and 'recommend' are supported."),options:[{value:"like",label:__("Like")},{value:"recommend",label:__("Recommend")}]}),e.FacebookLikeLayout=new e("facebook like/facebookLikeLayout",n.User,!0,__("Layout Style"),P.DropdownBox,null,{helpText:__("determines the size and amount of social context next to the button"),options:[{name:__("Standard"),id:"standard"},{name:__("Count button"),id:"button_count"},{name:__("Count box"),id:"box_count"}]}),e.EditMenuButton=new e("menu/editButton",n.User,!0,__("Edit menu"),M.UIButton),e.MenuType=new e("menu/menuType",n.User,!0,__("Type"),v.RadioBoxGroupControl,null,{options:[{value:"hmenu",label:__("Horizontal")},{value:"vmenu",label:__("Vertical")}]}),e.MenuStyle=new e("menu/menuStyle",n.User,!0,__("Style"),j.MenuStyleControl),e.MenuItemAlign=new e("menu/menuItemAlign",n.User,!0,__("Align"),I.HAlignSelector,null,{justify:!1}),e.MenuFontControl=new e("menuItems/textFontControl",n.User,!0,__("Font"),D.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!1,noColorPicker:!0,useTranform:!0},!1),e.MenuItemSpacing=new e("menuItems/spacing",n.User,!0,__("Spacing"),l.SpacingSelector,null,{useMargin:!0,usePadding:!0}),e.MenuItemStyle=new e("menuItems/style",n.User,!0,__("Style"),H.ButtonStyleControl),e.MenuItemAnimation=new e("menuItems/animation",n.User,!1,__("Animation"),X.AnimationControl),e.FacebookLikeColorScheme=new e("facebook like/colorScheme",n.User,!0,__("Color Scheme"),P.DropdownBox,null,{options:[{id:"light",name:__("Light")},{id:"dark",name:__("Dark")}]}),e.ColorScheme=new e("general/colorScheme",n.User,!0,__("Color Scheme"),P.DropdownBox,null,{options:[{id:"light",name:__("Light")},{id:"dark",name:__("Dark")}]}),e.TwitterColorScheme=new e("twitter/colorScheme",n.User,!0,__("Color Scheme"),P.DropdownBox,null,{options:[{id:"light",name:__("Light")},{id:"dark",name:__("Dark")}]}).inline(6),e.SkypeContactName=new e("Skype I'm Online/skypeContactName",n.User,!0,__("Skype Name"),a.TextField,null,{placeholder:"echo123"}),e.ButtonText=new e("general/buttonText",n.User,!0,__("Text"),C()),e.SkypeButtonText=new e("Skype I'm Online/buttonText",n.User,!0,__("Text"),C()),e.SkypeButtonStyle=new e("Skype I'm Online/skypeButtonStyle",n.User,!0,__("Style"),P.DropdownBox,null,{options:[{id:"bubble",name:__("Bubble")},{id:"rounded",name:__("Rounded")},{id:"rectangle",name:__("Rectangle")}]}).inline(6),e.StoreCartButtonText=new e("store cart/buttonText",n.User,!0,__("Text"),C()),e.ButtonIcon=new e("general/buttonIcon",n.User,!0,__("Image"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1}),e.StoreCartButtonIcon=new e("store cart/buttonIcon/_icon/icon",n.User,!0,__("Image"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1}),e.StoreCartButtonIconWidth=new e("store cart/buttonIcon/_icon/size/width",n.User,!0,__("Width"),o.SizeSelector),e.StoreCartButtonIconHeight=new e("store cart/buttonIcon/_icon/size/height",n.User,!0,__("Height"),o.SizeSelector),e.StoreCartMinimumOrderPrice=new e("store cart/_no_name/StoreCartMinimumOrderPrice",n.User,!0,__("Minimum order price"),o.SizeSelector,null,{min:0,max:9999,label:__("Minimum order price"),hideSpinner:!0,units:"USD"}),e.StoreCartRequireBillingInfo=new e("store cart/_no_name/StoreCartRequireBillingInfo",n.User,!0,__("Require Billing/Shipping Information"),r()),e.StoreCartTermsConditions=new e("store cart/_no_name/StoreCartTermsConditions",n.User,!0,__("Require customer to agree to terms and conditions"),r()),e.StoreCartTermsConditionsText=new e("store cart/_no_name/StoreCartTermsConditionsText",n.User,!0,__(""),Z.WYSIWYGControl),e.ButtonIconVisible=new e("general/buttonIconVisible",n.User,!0,__("Show Icon"),r()),e.SkypeBackgroundColor=new e("Skype I'm Online/backgroundColor",n.User,!0,__("Background color"),E.ColorPicker,null,{big:!0}),e.SkypeButtonIconVisible=new e("Skype I'm Online/buttonIconVisible",n.User,!0,__("Show Icon"),r()),e.ElementOpacity=new e("general/opacity",n.User,!0,__("Opacity (%)"),c.SliderControl,null,{min:0,max:100}),e.SiteLanguages=new e("languages/languages",n.User,!1,__("Languages"),F.SiteLanguagesControl),e.LanguageSwitchType=new e("languages/languageSwitchType",n.User,!0,__("Language switcher"),v.RadioBoxGroupControl,null,{options:[{value:"flags",label:__("Flags")},{value:"select",label:__("Dropdown select")}]}),e.NoWidgetHeader=new e("twitter/noWidgetHeader",n.User,!0,__("Hide header"),r()),e.NoWidgetHeaderCover=new e("facebook fans/noWidgetHeaderCover",n.User,!0,__("Hide cover"),r(),null,{helpText:__("Hide cover photo in the header.")}),e.NoWidgetFooter=new e("twitter/noWidgetFooter",n.User,!0,__("Hide footer"),r()),e.NoWidgetScrollbars=new e("twitter/noWidgetScrollbars",n.User,!0,__("Hide scrollbar"),r()),e.NoWidgetBackground=new e("twitter/noWidgetBackground",n.User,!0,__("Transparent background"),r()),e.NoWidgetBorders=new e("twitter/noWidgetBorders",n.User,!0,__("No borders"),r()),e.TwitterElementBorderColor=new e("twitter/borderColor",n.User,!0,__("Border color"),E.ColorPicker,null,{big:!0}),e.NoFriendsList=new e("facebook fans/noFriendsList",n.User,!0,__("Hide friends"),r(),null,{helpText:__("Hide faces of friends.")}),e.ShowFaces=new e("facebook like/showFaces",n.User,!0,__("Show faces"),r(),null,{helpText:__("Show profile pictures below the button.")}),e.NoTimeline=new e("facebook fans/noTimeline",n.User,!0,__("Hide timeline"),r(),null,{helpText:__("Hide page timeline.")}),e.UseSmallHeader=new e("facebook fans/useSmallHeader",n.User,!0,__("Small header"),r(),null,{helpText:__("Use smaller header.")}),e.GalleryType=new e("gallery/type",n.User,!0,__("Gallery Type"),k.GalleryTypeSelector),e.GalleryPadding=new e("gallery/padding",n.User,!0,__("Padding"),o.SizeSelector,null,{min:0,max:999,hideSpinner:!0,units:"px"}),e.GalleryImageCover=new e("gallery/imageCover",n.User,!0,__("Auto crop"),r()),e.GalleryDisableLightbox=new e("gallery/disableLightbox",n.User,!0,__("Do not enlarge picture on click"),r()),e.GalleryHideArrows=new e("gallery/hideArrows",n.User,!0,__("Hide arrows"),r()),e.GalleryImages=new e("gallery/images",n.User,!1,__("Pictures"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!0,thumbSize:60,mediatabs:!1,fontAwesomeTab:!1,usePictureManager:!0}).inline(6),e.GalleryBackgroundColor=new e("gallery/backgroundColor",n.User,!0,__("Background"),E.ColorPicker,null,{big:!0}).inline(6),e.EcwidControl=new e("ecwid/EcwidControl",n.User,!0,__(""),Y.EcwidWidgetControl,null),e.EcwidType=new e("ecwid/EcwidType",n.User,!0,__("Widget type"),P.DropdownBox,null,{options:[{id:"product-browser",name:__("Product Browser")},{id:"horizontal-categories",name:__("Horizontal categories")},{id:"vertical-categories",name:__("Vertical categories")},{id:"mini-cart",name:__("Mini cart")},{id:"search-box",name:__("Search box")}]}),e.GoogleMapAddress=new e("google maps/googleMapAddress",n.User,!0,__("Address"),A.GoogleMapsPlacesControl,null,{helpText:__("The same as in Google Maps")}),e.ApiGoogleMapsKey=new e("google maps/googleMapsApiKey",n.User,!0,__("API Key"),a.TextField,null,{placeholder:__("Example")+": AGySLaWeMhg9uBek_wDG-xCA3p33eTZ-vazFRnh",helpText:__("Get API Key from %s").replace("%s",'<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">https://developers.google.com/maps/documentation/javascript<br/>/get-api-key</a><br /><br /><div style="text-align: left;">'+__("Make sure that the following APIs are enabled for your key")+':<ul style="padding-left: 22px;"><li>Maps Elevation API</li><li>Maps JavaScript API</li><li>Places API</li><li>Geocoding API</li></ul></div>')}),e.MapZoom=new e("google maps/zoom",n.User,!0,__("Zoom level"),o.SizeSelector,null,{min:1,max:22,hideSpinner:!0}).inline(6),e.GoogleMapTheme=new e("google maps/googleMapTheme",n.User,!0,__("Theme"),P.DropdownBox,null,{options:[{id:"default",name:__("Default")},{id:"light",name:__("Light")},{id:"dark",name:__("Dark")},{id:"monochrome",name:__("Monochrome")}]}).inline(6),e.GoogleMapType=new e("google maps/googleMapType",n.User,!0,__("Map type"),v.RadioBoxGroupControl,null,{options:[{value:"roadmap",label:__("Road map")},{value:"terrain",label:__("Terrain")},{value:"hybrid",label:__("Hybrid")},{value:"satellite",label:__("Satellite")}]}).inline(6),e.MapColor=new e("google maps/color",n.User,!0,__("Color"),E.ColorPicker,null,{big:!0,noAlpha:!0,noTransparent:!0}).inline(6),e.GoogleMarkerIconType=new e("google maps/googleMarkerIconType",n.User,!0,__("Marker type"),v.RadioBoxGroupControl,null,{options:[{value:void 0,label:__("Pin")},{value:"camera",label:__("Camera")},{value:"thumbs",label:__("Thumbs")}]}).inline(6),e.MapShowSatelliteControl=new e("options/showSatellite",n.User,!0,__("Show map and satellite control"),r()),e.MapShowZoomControl=new e("options/showZoom",n.User,!0,__("Show zoom control"),r()),e.MapShowStreetViewControl=new e("options/showStreetView",n.User,!0,__("Show Street View control"),r()),e.MapShowFullScreenControl=new e("options/showFullscreen",n.User,!0,__("Show full screen control"),r()),e.MapAllowDragging=new e("options/allowDragging",n.User,!0,__("Allow dragging"),r()),e.MapShowRoads=new e("options/showRoads",n.User,!0,__("Show roads"),r()),e.MapShowLandmarks=new e("options/showLandmarks",n.User,!0,__("Show landmarks"),r()),e.MapShowLabels=new e("options/showLabels",n.User,!0,__("Show labels"),r()),e.GoogleCalendarBackgroundColor=new e("options/googleCalendarBackgroundColor",n.User,!0,__("Background color"),E.ColorPicker),e.GoogleCalendarViewMode=new e("options/googleCalendarViewMode",n.User,!0,__("View mode"),v.RadioBoxGroupControl,null,{options:[{value:"WEEK",label:__("Week")},{value:"MONTH",label:__("Month")},{value:"AGENDA",label:__("Agenda")}]}),e.GoogleCalendarBorder=new e("options/googleCalendarBorder",n.User,!0,__("Border"),r()),e.GoogleCalendarTitle=new e("options/googleCalendarTitle",n.User,!0,__("Title"),r()),e.GoogleCalendarNavigation=new e("options/googleCalendarNavigation",n.User,!0,__("Navigation"),r()),e.GoogleCalendarDate=new e("options/googleCalendarDate",n.User,!0,__("Date"),r()),e.GoogleCalendarPrintIcon=new e("options/googleCalendarPrintIcon",n.User,!0,__("Print icon"),r()),e.GoogleCalendarTabs=new e("options/googleCalendarTabs",n.User,!0,__("Tabs"),r()),e.GoogleCalendarList=new e("options/googleCalendarList",n.User,!0,__("List"),r()),e.GoogleCalendarShowTimezone=new e("options/googleCalendarShowTimezone",n.User,!0,__("Time zone"),r()),e.EcwidCategoryView=new e("options/EcwidCategoryView",n.User,!0,__("Default category view"),P.DropdownBox,null,{options:[{id:"grid",name:__("Grid view")},{id:"list",name:__("List view")},{id:"table",name:__("Table view")}]}),e.EcwidSearchView=new e("options/EcwidSearchView",n.User,!0,__("Default search view"),P.DropdownBox,null,{options:[{id:"grid",name:__("Grid view")},{id:"list",name:__("List view")},{id:"table",name:__("Table view")}]}),e.EcwidGridViewRows=new e("options/grid View Settings/EcwidGridViewRows",n.User,!0,__("Rows"),o.SizeSelector,null,{min:0,max:999}).inline(6),e.EcwidGridViewCols=new e("options/grid View Settings/EcwidGridViewCols",n.User,!0,__("Columns"),o.SizeSelector,null,{min:0,max:999}).inline(6),e.EcwidListViewRows=new e("options/grid List Settings/EcwidListViewRows",n.User,!0,__("Columns"),o.SizeSelector,null,{min:0,max:999}),e.EcwidTableViewRows=new e("options/grid Table Settings/EcwidTableViewRows",n.User,!0,__("Columns"),o.SizeSelector,null,{min:0,max:999}),e.FlagBorders=new e("flags/border",n.User,!0,__("Inactive border"),g.BorderControl,null,{noTransparent:!1,showRadius:!0,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(6),e.FlagActiveBorder=new e("flags/activeBorder",n.User,!0,__("Active border"),g.BorderControl,null,{noTransparent:!1,showRadius:!0,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(6),e.FlagSize=new e("flags/size",n.User,!0,__("Size"),P.DropdownBox).inline(6),e.FlagSpacing=new e("flags/spacing",n.User,!0,__("Spacing"),P.DropdownBox,null,{options:[{id:0,name:"0"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"}]}).inline(6),e.FlagSquare=new e("flags/square",n.User,!0,__("Use square flags"),r()),e.YouTubeVideoId=new e("youtube/youTubeVideoId",n.User,!0,__("Youtube URL or ID"),a.TextField,null,{placeholder:"UF8uR6Z6KLc"}),e.VideoStartTime=new e("youtube/startTime",n.User,!0,__("Start at"),a.TextField,null,{placeholder:"00:00"}),e.VideoEndTime=new e("youtube/endTime",n.User,!0,__("End at"),a.TextField,null,{placeholder:"00:00"}),e.VideoPlayerControls=new e("youtube/playerControls",n.User,!0,__("Show player controls"),r()),e.YouTubeUseNoCookieDomain=new e("youtube/youTubeUseNoCookieDomain",n.User,!0,__("Use nocookie domain"),r(),null,{helpText:__("for GDPR compliance")}),e.VideoUrl=new e("video/url",n.User,!0,__("Video"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{mode:"video",multiselect:!1,mediatabs:!1,usePictureManager:!1}).inline(6),e.VideoPosterUrl=new e("video/posterUrl",n.User,!0,__("Thumbnail"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,usePictureManager:!1}).inline(6),e.VideoControls=new e("video/showControls",n.User,!0,__("Show player controls"),r()),e.VideoAutoPlay=new e("video/autoPlay",n.User,!0,__("Autoplay"),r()),e.VideoLoop=new e("video/loop",n.User,!0,__("Loop"),r()),e.VideoMuted=new e("video/muted",n.User,!0,__("Muted"),r()),e.MusicPlaylist=new e("music/playlist",n.User,!0,__("MP3 file(s)"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{mode:"audio",multiselect:!0,thumbSize:60,mediatabs:!1}),e.MusicAutoStart=new e("music/autoStart",n.User,!0,__("Start playing when page is loaded"),r(),null,{helpText:__("This option may not work properly on some browsers.")}),e.Image=new e("image/image",n.User,!1,__("Picture"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:140,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1}),e.ImageOpacity=new e("image/opacity",n.User,!0,__("Opacity (%)"),c.SliderControl,null,{min:0,max:100}),e.ImageAlt=new e("image/imageAlt",n.User,!0,__("Alternative Text"),C(),null,{helpText:__("Information for an image if a user for some reason cannot view it")}),e.NoPhotoImage=new e("images/noPhotoImage",n.User,!1,__("No-photo Image"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1}).inline(6),e.WatermarkImage=new e("images/watermarkImage",n.User,!1,__("Watermark Image"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1,helpText:__("Please avoid using image bigger than 1000x1000 pixels for watermark. Too big image may cause errors while trying to preview or publish website.")}).inline(6),e.StoreImageBorder=new e("images/border",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.DetailsImageWidth=new e("images/Images/storeImageWidth",n.User,!0,__("Width"),o.SizeSelector,null,{min:10,hideSpinner:!0,units:"px"}).inline(6),e.DetailsImageHeight=new e("images/Images/storeImageHeight",n.User,!0,__("Height"),o.SizeSelector,null,{min:10,hideSpinner:!0,units:"px"}).inline(6),e.ListImageWidth=new e("images/Thumbnails/storeThumbnailWidth",n.User,!0,__("Width"),o.SizeSelector,null,{min:10,hideSpinner:!0,units:"px"}).inline(6),e.ListImageHeight=new e("images/Thumbnails/storeThumbnailHeight",n.User,!0,__("Height"),o.SizeSelector,null,{min:10,hideSpinner:!0,units:"px"}).inline(6),e.ListImageNumber=new e("images/Thumbnails/storeThumbnailNumber",n.User,!0,__("Number in slider"),o.SizeSelector,null,{min:1,max:4}).inline(6),e.IconColor=new e("image/iconColor",n.User,!0,__("Icon color"),E.ColorPicker,null,{big:!0}).inline(6),e.ImageBorder=new e("image/border",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(6),e.ImageBorderRadius=new e("image/borderRadius",n.User,!0,__("Rounded corners"),f.RoundCornersControl),e.ImageCrop=new e("image/crop",n.User,!1,"",null),e.OnClickAction=new e("image/action",n.User,!0,"",v.RadioBoxGroupControl),e.OnClickLink=new e("image/link",n.User,!0,__(""),b(),(function(){return m.UIComponent.wrapControl(new(b()))}),{multilang:!0}),e.StoreWebsiteCategory=new e("listing/websiteCategory",n.User,!0,__("Category"),P.DropdownBox),e.ItemsPerPage=new e("listing/itemsPerPage",n.User,!0,__("Items per page"),o.SizeSelector,null,{min:1,max:100,hideSpinner:!0}).inline(6),e.ListingMaxDescriptionLength=new e("listing/maxDescriptionLength",n.User,!0,__("Description length"),o.SizeSelector,null,{helpText:__("Symbols"),hideSpinner:!0}).inline(6),e.StoreShowSorting=new e("listing/showSorting",n.User,!0,__("Show sorting dropdown"),r()),e.StoreShowViewSwitch=new e("listing/showViewSwitch",n.User,!0,__("Show item list view switch"),r()),e.StoreShowAddToCartButtonInList=new e("listing/showAddToCartInList",n.User,!0,__('Show "%s" button').replace("%s",__("Add to cart")),r()),e.StoreShowBuyNowButtonInList=new e("listing/showBuyNowInList",n.User,!0,__('Show "%s" button').replace("%s",__("Buy Now")),r()),e.StoreShowDates=new e("listing/showDates",n.User,!0,__("Show created/modified dates"),r()),e.StoreShowItemId=new e("listing/showItemId",n.User,!0,__("Show item ID in details page"),r()),e.ListingShowTitle=new e("listing/showTitle",n.User,!0,__("Display title"),r()),e.ListingShowDates=new e("listing/showDates",n.User,!0,__("Display date"),r()),e.ListingShowDescription=new e("listing/showDescription",n.User,!0,__("Display description"),r()),e.ListingShowNoPhotoPlaceholder=new e("listing/showNoPhotoPlaceholder",n.User,!0,__('Display "No-photo" placeholder'),r()),e.UseThumbnails=new e("thumbnails/useThumbnails",n.User,!0,__("Use thumbnails"),r()),e.StoreFilterPosition=new e("filter/position",n.User,!0,__("Filter position"),v.RadioBoxGroupControl,null,{options:[{value:"top",label:__("Top")},{value:"left",label:__("Left")},{value:"right",label:__("Right")}]}),e.StoreShowTextFilter=new e("filter/showTextFilter",n.User,!0,__("Show text search filter"),r()),e.StoreShowPriceFilter=new e("filter/showPriceFilter",n.User,!0,__("Show price filter"),r()),e.ThumbnailWidth=new e("thumbnails/_no_name_size/width",n.User,!0,__("Width"),o.SizeSelector,null,{min:10,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6),e.ThumbnailHeight=new e("thumbnails/_no_name_size/height",n.User,!0,__("Height"),o.SizeSelector,null,{min:10,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6),e.ThumbnailPadding=new e("thumbnails/_no_name_padal/padding",n.User,!0,__("Padding"),o.SizeSelector,null,{min:0,max:999,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6),e.ThumbnailAlignment=new e("thumbnails/_no_name_padal/alignment",n.User,!0,__("Align"),I.HAlignSelector,null,{justify:!1}).inline(6),e.ThumbnailBorder=new e("thumbnails/_no_name_border/border",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!1,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.ThumbnailAnimation=new e("thumbnails/animation",n.User,!1,__("Animation"),X.AnimationControl),e.SlideShowInterval=new e("slideShow/interval",n.User,!0,__("Change frequency (s)"),o.SizeSelector,null,{min:0,max:10,helpText:__("Enter 0 seconds to disable automatic image changing")}),e.SlideShowSpeed=new e("slideShow/speed",n.User,!0,__("Transition duration (s)"),o.SizeSelector,null,{min:0,max:10,precision:2,step:.05,helpText:__("Enter 0 to switch slides instantly")}),e.SlideOpacity=new e("slideShow/opacity",n.User,!0,__("Slide opacity (%)"),c.SliderControl,null,{min:1,max:100}),e.FormFields=new e("formFields/fields",n.User,!0,"",L.FormFieldsControl),e.SubmitButtonText=new e("formFields/submitButtonText",n.User,!0,__("Submit button text"),C()),e.FormRedirectUrl=new e("formFields/formRedirectUrl",n.User,!0,__("URL after submit"),b(),(function(){return m.UIComponent.wrapControl(new(b()))}),{multilang:!0,noEmail:!0,noPhone:!0,noFiles:!0,noLinkTitle:!0,noIndexing:!0,noPopup:!0}),e.CaptionsDisplay=new e("captions/display",n.User,!0,__("Show picture caption"),v.RadioBoxGroupControl,null,{options:[{value:"always",label:__("Always")},{value:"hover",label:__("On mouse hover")}]}),e.CaptionsBackgroundColor=new e("captions/backgroundColor",n.User,!0,__("Background"),E.ColorPicker,null,{big:!0}),e.CaptionsTitleStyle=new e("captions/titleStyle",n.User,!0,__("Picture title style"),D.TextControl,null,{ttplacement:"top",horizontal:!0},!1),e.CaptionsDescriptionStyle=new e("captions/titleStyle",n.User,!0,__("Picture title style"),D.TextControl,null,{ttplacement:"top",horizontal:!0},!1),e.TitleStyleCombined=new e("text/titleStyleCombined",n.User,!0,__("Title style"),D.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1),e.TextLineHeight=new e("text/textLineHeight",n.User,!0,__("Line height"),o.SizeSelector,null,{min:1,max:9999}),e.TextAlignment=new e("text/textAlignment",n.User,!0,__("Align"),I.HAlignSelector,null,{justify:!1}),e.TextStyle=new e("text/textStyle",n.User,!0,__("Style"),x.FontStyleSelector),e.PrimaryColor=new e("text/primaryColor",n.User,!0,__("Color"),E.ColorPicker),e.DateStyleCombined=new e("text/dateStyleCombined",n.User,!0,__("Date style"),D.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1),e.StoreNameStyle=new e("text/storeNameStyle",n.User,!0,__("Name Style"),D.TextControl,null,{ttplacement:"top",horizontal:!0},!1),e.StorePriceStyle=new e("text/storePriceStyle",n.User,!0,__("Price Style"),D.TextControl,null,{ttplacement:"top",horizontal:!0},!1),e.StoreLabelStyle=new e("text/storeLabelStyle",n.User,!0,__("Label Style"),D.TextControl,null,{ttplacement:"top",noAlign:!0,horizontal:!0},!1),e.StoreDescStyle=new e("text/storeDescStyle",n.User,!0,__("Label Style"),D.TextControl,null,{ttplacement:"top",noAlign:!0,horizontal:!0},!1),e.StoreSysTextStyle=new e("text/storeSysTextStyle",n.User,!0,__("System Text Style"),D.TextControl,null,{ttplacement:"top",noStyle:!0,noAlign:!0,horizontal:!0,noSize:!0,noSpacing:!0},!1),e.TextStyleCombined=new e("text/textStyleCombined",n.User,!0,__("Text style"),D.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1),e.LabelSiteStyle=new e("labels/siteStyle",n.User,!0,__("Label Style"),R(),(function(){return m.UIComponent.wrapControl(new(R())(!0))}),{emptyChoice:!0}),e.LabelColumnWidthFixed=new e("labels/columnWidthFixed",n.User,!0,__("Label Column Width"),r()),e.LabelColumnWidth=new e("labels/columnWidth",n.User,!0,"",o.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:"px"}),e.SharingButtonSize=new e("share/buttonSize",n.User,!0,__("Size"),P.DropdownBox,null,{options:[{name:__("16x16"),id:"16x16"},{name:__("32x32"),id:"32x32"}]}),e.SharingEnableFacebook=new e("share/enableFacebook",n.User,!0,__("Facebook"),r()),e.SharingEnableTwitter=new e("share/enableTwitter",n.User,!0,__("Twitter"),r()),e.SharingEnableVKontakte=new e("share/enableVKontakte",n.User,!0,__("VKontakte"),r()),e.SharingEnableOdnoklassniki=new e("share/enableOdnoklassniki",n.User,!0,__("Odnoklassniki"),r()),e.SharingEnableEmail=new e("share/enableEmail",n.User,!0,__("Email"),r()),e.SharingEnableGoogle=new e("share/enableGoogle",n.User,!0,__("Google"),r()),e.SharingEnablePrint=new e("share/enablePrint",n.User,!0,__("Print"),r()),e.SharingEnableAddThisShare=new e("share/enableAddThisShare",n.User,!0,__("AddThis share"),r()),e.SharingEnableFacebookLike=new e("share/enableFacebookLike",n.User,!0,__("Like"),r()),e.SharingEnableTweetButton=new e("share/enableTweetButton",n.User,!0,__("Tweet button"),r()),e.SharingEnableLinkedIn=new e("share/enableLinkedIn",n.User,!0,__("LinkedIn"),r()),e.SharingEnableTelegram=new e("share/enableTelegram",n.User,!0,__("Telegram"),r()),e.AddThisProfileId=new e("share/addThisProfileId",n.User,!0,__("Profile ID (optional)"),a.TextField,null,{helpText:__("AddThis.com profile ID. You can register to get statistics.")}),e.TableCellPadding=new e("table/cellPadding",n.User,!0,__("Cell padding"),o.SizeSelector,null,{min:0,max:9999,hideSpinner:!0,units:"px"}),e.TableBackgroundColor=new e("table/tableBackgroundColor",n.User,!0,__("Background"),E.ColorPicker,null,{big:!0}).inline(6),e.TableBorder=new e("table/tableBorder",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!1,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(6),e.ShapeElementBackground=new e("shape/background",n.User,!0,__("Background"),p.BackgroundControl).inline(),e.ShapeElementBgBorder=new e("shape/border",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(),e.ShapeOnClickLink=new e("shape/link",n.User,!0,__("URL"),b(),(function(){return m.UIComponent.wrapControl(new(b()))}),{multilang:!0}),e.ElementBackgroundColor=new e("background/backgroundColor",n.User,!0,__("Background color"),E.ColorPicker),e.ElementBackground=new e("background/background",n.User,!0,__("Background"),p.BackgroundControl).inline(),e.ElementBgBorder=new e("background/border",n.User,!0,__("Border"),g.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}).inline(),e.ElementBgBorderRadius=new e("background/borderRadius",n.User,!0,__("Rounded corners"),f.RoundCornersControl),e.ElementBorder=new e("border/border",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!1,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.ElementBorderColor=new e("border/borderColor",n.User,!0,__("Border color"),E.ColorPicker),e.ElementBorderRadius=new e("border/borderRadius",n.User,!0,__("Rounded corners"),f.RoundCornersControl),e.LineOrientation=new e("line/lineOrientation",n.User,!0,__("Orientation"),v.RadioBoxGroupControl,null,{options:[{value:1,label:__("Horizontal")},{value:0,label:__("Vertical")}]}),e.LineStyle=new e("line/lineStyle",n.User,!0,__("Style"),U.LineStyleControl).inline(),e.LineSize=new e("line/lineSize",n.User,!0,__("Size"),o.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:"px"}).inline(),e.LineColor=new e("line/lineColor",n.User,!0,__("Color"),E.ColorPicker,null,{big:!0}),e.LinkExchangeBadgeType=new e("general/linkExchangeBadgeType",n.User,!0,__("Widget type"),v.RadioBoxGroupControl),e.NormalItemTextStyle=new e("normalItem/textStyle",n.User,!0,__("Style"),x.FontStyleSelector),e.NormalItemColor=new e("normalItem/color",n.User,!0,__("Color"),E.ColorPicker),e.NormalItemBackground=new e("normalItem/background",n.User,!0,__("Background"),p.BackgroundControl),e.NormalItemBorder=new e("normalItem/border",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.OnHoverTextStyle=new e("onHover/textStyle",n.User,!0,__("Style"),x.FontStyleSelector),e.OnHoverColor=new e("onHover/color",n.User,!0,__("Color"),E.ColorPicker),e.OnHoverBackground=new e("onHover/background",n.User,!0,__("Background"),p.BackgroundControl),e.OnHoverBorder=new e("onHover/border",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.ActiveTextStyle=new e("active/textStyle",n.User,!0,__("Style"),x.FontStyleSelector),e.ActiveColor=new e("active/color",n.User,!0,__("Color"),E.ColorPicker),e.ActiveBackground=new e("active/background",n.User,!0,__("Background"),p.BackgroundControl),e.ActiveBorder=new e("active/border",n.User,!0,__("Border"),g.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}}}),e.BannerImage=new e("banner/bannerImage",n.User,!1,__("Picture"),T(),(function(){return m.UIComponent.wrapControl(new(T()))}),{multiselect:!1,thumbSize:140,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1}),e.CustomUrl=new e("general/customUrl",n.User,!0,__("URL"),a.TextField),e.BannerCustomUrl=new e("banner/customUrl",n.User,!0,__("URL"),a.TextField),e.ScriptSourceCode=new e("banner/sourceCode",n.User,!0,__("Script"),z.ScriptEditorControl,null,{big:!0}),e.BannerDeactivateInBuilder=new e("banner/bannerDeactivateInBuilder",n.User,!0,__("Deactivate content while in builder (recomended)"),r(),null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")}),e.GoogleAdSenseSourceCode=new e("adSense/googleAdSenseSourceCode",n.User,!0,__("HTML code"),z.ScriptEditorControl,null,{big:!0}),e.GoogleAdSenseDeactivateInBuilder=new e("adSense/googleAdSenseDeactivateInBuilder",n.User,!0,__("Deactivate content while in builder (recomended)"),r(),null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")}),e.CustomHtmlSourceCode=new e("custom Html/customHtmlSourceCode",n.User,!0,__("HTML code"),z.ScriptEditorControl,null,{big:!0,useMedia:!0}),e.ScriptDeactivateInBuilder=new e("general/deactivateInBuilder",n.User,!0,__("Deactivate content while in builder (recomended)"),r(),null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")}),e.CustomHTMLScriptDeactivateInBuilder=new e("custom Html/deactivateInBuilder",n.User,!0,__("Deactivate content while in builder (recomended)"),r(),null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder.")}),e.CustomHtmlAutoHeight=new e("general/customHtmlAutoHeight",n.User,!0,__("Auto height (experimental)"),r(),null,{helpText:__("This will allow element to expand depending on content.")}),e.EmailSendTo=new e("email/sendTo",n.User,!0,__("Form will be sent to this Email"),a.TextField,null,{placeholder:"example@yourmail.com",helpText:'<div style="width: 180px;">'+__("You can specify several emails separated by semicolons.")+"</div>"}),e.EmailSendFrom=new e("email/sendFrom",n.User,!0,__("Form will be sent from this Email"),a.TextField,null,{placeholder:"no-reply@yourmail.com",helpText:'<div style="width: 180px;">'+__("Specify email here if you want the form to be always sent from one email address.")+"<br /><br />"+__("Note: Make sure that domain of specified email address has DNS record of type %sSPF%s. If it does not then you may not receive mails to your inbox.").replace("%s",'<a href="https://en.wikipedia.org/wiki/Sender_Policy_Framework" target="_blank">').replace("%s","</a>")+"<br /><br />"+__("You can also specify combination of email and name.")+" "+__("The value must be of the following format: %s").replace("%s","<br />"+__("Name")+" &lt;"+__("Email")+"&gt;")+"</div>"}),e.EmailSubject=new e("email/subject",n.User,!0,__("With Subject"),a.TextField),e.EmailSentAlertMessage=new e("email/sentAlertMessage",n.User,!0,__("Form sent Message"),C()),e.EmailMaxAttachmentsSize=new e("email/maxAttachmentsSize",n.User,!0,__("Maximum size of attachments"),o.SizeSelector,null,{min:1,max:9999,units:__("MB"),hideSpinner:!0,helpText:__("This field should contain either maximum allowed size for uploads on your server or maximum size your email server will accept in a message (whichever is smaller). Don't change this field if you don't know what limits apply on your server or not sure what it is.")}),e.EnablePostUrl=new e("email/enablePostUrl",n.User,!0,__("Submit to URL instead"),r(),null,{helpText:__("Post form data to this URL instead of sending it via email")}),e.PostUrl=new e("email/postUrl",n.User,!0,"",a.TextField,null,{placeholder:"http://"}),e.SmtpEnabled=new e("smtp/enabled",n.User,!0,__("SMTP Enable"),r()),e.SmtpHost=new e("smtp/host",n.User,!0,__("SMTP Host"),a.TextField),e.SmtpPort=new e("smtp/port",n.User,!0,__("SMTP Port"),a.TextField),e.SmtpEncryption=new e("smtp/encryption",n.User,!0,__("SMTP Encryption"),v.RadioBoxGroupControl,null,{direction:v.RadioBoxGroupDirection.Row,options:[{value:null,label:__("None")},{value:"tls",label:__("TLS")},{value:"ssl",label:__("SSL")}]}),e.SmtpUsername=new e("smtp/username",n.User,!0,__("SMTP Username"),a.TextField),e.SmtpPassword=new e("smtp/password",n.User,!0,__("SMTP Password"),a.TextField,null,{password:!0}),e.CaptchaSiteKey=new e("captcha/siteKey",n.User,!0,__("Site key"),a.TextField,null,{helpText:__("Go to %s and register new site to get keys.").replace("%s",'<a href="https://www.google.com/recaptcha/" target="_blank">Google ReCaptcha</a>')}),e.CaptchaSecretKey=new e("captcha/secretKey",n.User,!0,__("Secret key"),a.TextField),e.ElementPositionLeft=new e("position/position/left",n.User,!0,__("From left"),o.SizeSelector,null,{min:-9999,max:9999}),e.ElementPositionTop=new e("position/position/top",n.User,!0,__("From top"),o.SizeSelector,null,{min:-9999,max:9999}),e.ElementPositionSticky=new e("layout/position/sticky",n.User,!0,__("Sticky"),r()),e.StickyAlignment=new e("layout/position/stickyAlign",n.User,!0,__("Align"),V.AlignSelector,null,{disableOptions:["center center"]}),e.ElementWidth=new e("position/size/_width/width",n.User,!0,__("Width"),o.SizeSelector),e.ElementHeight=new e("position/size/_height/height",n.User,!0,__("Height"),o.SizeSelector),e.ElementKeepAspectRatio=new e("position/size/checkboxes/keepAspectRatio",n.User,!0,__("Keep aspect ratio"),r()),e.IsAutoSizeEnabled=new e("position/size/checkboxes/isAutoSizeEnabled",n.User,!0,__("Allow to adjust size automatically"),r()),e.UseMinWidth=new e("position/size/_width/min/useMinWidth",n.User,!0,__("Min"),r(),J),e.MinWidth=new e("position/size/_width/min/minWidth",n.User,!0,"",o.SizeSelector,null,{noFixedWidth:!0}),e.UseMaxWidth=new e("position/size/_width/max/useMaxWidth",n.User,!0,__("Max"),r(),J),e.MaxWidth=new e("position/size/_width/max/maxWidth",n.User,!0,"",o.SizeSelector,null,{noFixedWidth:!0}),e.UseMinHeight=new e("position/size/_height/min/useMinHeight",n.User,!0,__("Min"),r(),J),e.MinHeight=new e("position/size/_height/min/minHeight",n.User,!0,"",o.SizeSelector,null,{noFixedWidth:!0}),e.UseMaxHeight=new e("position/size/_height/max/useMaxHeight",n.User,!0,__("Max"),r(),J),e.MaxHeight=new e("position/size/_height/max/maxHeight",n.User,!0,"",o.SizeSelector,null,{noFixedWidth:!0}),e.IndividualMargin=new e("spacing/individualMargin",n.User,!0,"",l.SpacingSelector,null,{useMargin:!0,allowNegativeMargin:!0}),e.SpacingModeScaleFactors=new e("spacing/modeScaleFactors",n.User,!0,__("Padding and margin scale factors"),h.UIModeScaleFactors),e.VisibilityShowOnPhone=new e("visibility/showOnPhone",n.User,!0,__("Show on phone"),r()),e.VisibilityShowOnTablet=new e("visibility/showOnTablet",n.User,!0,__("Show on tablet"),r()),e.VisibilityShowOnDesktop=new e("visibility/showOnDesktop",n.User,!0,__("Show on desktop"),r()),e.VisibilityShowOnTv=new e("visibility/showOnTv",n.User,!0,__("Show on wide screen"),r()),e.Commonality=new e("visibility/commonality",n.User,!0,"",u.CommonalitySelectorControl),e.Animation=new e("animation/tabs",n.User,!1,"",X.AnimationControl,void 0,{}),e.LayoutElementOnClickLink=new e("advanced/layoutLink",n.User,!0,__("URL"),b(),(function(){return m.UIComponent.wrapControl(new(b()))}),{multilang:!0,helpText:__("This whole block works as a big link if an URL is specified.")}),e.Anchor=new e("advanced/anchor",n.User,!1,__("Anchor name"),a.TextField,void 0,{helpText:__('Specify anchor name if you want to create a link to this element. For example if you specify value "apple" then you will be able to access this element with URL "yourwebsite.com/page-alias/#apple".')}),e.ElemClassName=new e("advanced/classname",n.User,!1,__("Class name"),a.TextField,void 0,{helpText:__("Specify class name only if you need to access this element per your custom %s code.").replace("%s","CSS/JavaScript")}),e.Name=new e("advanced/name",n.User,!1,__("Name"),a.TextField,void 0,{helpText:__("This property updates element name in page structure tree above.")}),e.ReferenceId=new e("template/referenceId",n.ComposerOrAdmin,!1,__("Reference ID"),a.TextField,void 0,{helpText:__("Element ID for use with website creation %sAPIs%s").replace("%s",'<a href="https://site.pro/docs/api/#websites/create" target="_blank" style="text-decoration: underline;">').replace("%s","</a>")}),e.IsAdminLocked=new e("template/isAdminLocked",n.Admin,!0,__("Locked by admin"),r(),void 0,{helpText:'<div style="min-width: 180px;">'+__("If enabled, it will block element editing and deleting for clients who chooses this template.")+"<br />"+__("Be careful with this option. Enable it only if you 100% sure you want this element stay forever on all your clients' websites.")+"</div>"}),e.DebugMenuUID=new e("debug/menuUID",n.Developer,!0,"menuUID",S.StaticTextControl,null,{syntaxHighlight:!0,monospace:!0}),e.DebugObject=new e("debug/obj",n.Developer,!0,"object",S.StaticTextControl,null,{syntaxHighlight:!0,monospace:!0}),e.defaultOpenCategories=["Count Up","blog","content","general","layout","video","store","menu","button","gallery","image","map","spotify","instagram","vimeo","Odnoklassniki","odnoklassniki share","vkontakte community","vkontakte like","flickr","facebook comment","youku","pinterest","facebook fans","stripe","mercado","alipay","liqPay","webmoney","skrill","mollie","redsys","epaybg","dragonpay","braintree","easypay","payu","payumoney","epsilon","yandexkassa","payme","bepaid","robokassa","baokim","paysera","payfast","buy now","click evolution","assist","pagseguro","iyzico","2Checkout","webmoney widget","paytrail","kiwi QZ","webpay","klarna","paymentez","mellat","ecwid","Google Calendar","tawk.to","countdown","olark","zendesk","getbutton","settings","getbutton - PRO","options","music","facebook like","youtube","background","formFields","share","google maps","yandex maps","bing maps","baidu maps","languages","store cart","twitter","table","Skype I'm Online","adSense","banner","custom Html","shape","line"],e}()},"./element/ResizeHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ResizeHandle:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1);var s=this;this.elem=e,this.rawElements=t,this.onStop=i,this.noSnapping=n,this.oriPosition={left:0,top:0},this.oriSize={width:0,height:0},this.axis="",this.elements=[],this.isResizing=!1,this.useXAxis=!0,e.resizableExt({handles:"n, e, s, w, ne, se, sw, nw",extHandles:!0,minWidth:64,minHeight:64,start:function(e,t){o()(e.originalEvent.target);var i=(t.hDirection?"x":"")+(t.vDirection?"y":"");s.onResizeStart(t.originalPosition,t.originalSize,i,s.rawElements),e.stopPropagation()},resize:function(e,t){s.onResize(t.position,t.size),e.stopPropagation()},stop:function(e,t){s.onResizeStop(t.position,t.size),e.stopPropagation()}})}return e.prototype.updateElements=function(e){this.rawElements=e},e.prototype.setUseXAxis=function(e){!this.useXAxis&&e?(this.useXAxis=!0,this.elem.resizableExt("option","handles","n, e, s, w, ne, se, sw, nw")):this.useXAxis&&!e&&(this.useXAxis=!1,this.elem.resizableExt("option","handles","n, s"))},e.prototype.onResizeStart=function(e,t,i,n){if(!this.isResizing){this.oriPosition=e,this.oriSize=t,this.axis=i,wb_builder.bodyInstance.cacheBounds(),this.elements=[];for(var o=0,s=n;o<s.length;o++){var r=s[o];this.elements.push({element:r,position:r.getLocation(!0),size:r.getSizeInPixels()}),this.noSnapping||r.snapHandle.handleResizableStart({type:"resizestart"},{element:r.elem}),r.onStartResize()}this.isResizing=!0}},e.prototype.onResizeStop=function(e,t){this.isResizing&&(this.onResize(e,t,!0),this.isResizing=!1,this.onStop&&this.onStop())},e.prototype.onResize=function(e,t,i){if(void 0===i&&(i=!1),this.isResizing)for(var n=t.width/this.oriSize.width,o=t.height/this.oriSize.height,s=0,r=this.elements;s<r.length;s++){var a=r[s],l=a.position.left-this.oriPosition.left,c=a.position.top-this.oriPosition.top,u=!0,d=e.left+l*n,h=e.top+c*o,p=a.size.width*n,m=a.size.height*o,g="Picture"==a.element.className;g&&(u=!1,Math.abs(n-1)>=Math.abs(o-1)?m=(p=a.size.width*n)*a.size.height/a.size.width:p=(m=a.size.height*o)*a.size.width/a.size.height,e.left+t.width<d+p?m=(p-=d+p-(e.left+t.width))*a.size.height/a.size.width:e.top+t.height<h+m&&(p=(m-=h+m-(e.top+t.height))*a.size.width/a.size.height));var f={left:d,top:h},y={width:"y"===this.axis&&u?null:p,height:"x"===this.axis&&u?null:m};this.noSnapping||(i?a.element.snapHandle.handleResizableStop({type:"resizestop"},{position:f,size:y}):a.element.snapHandle.handleResizableResize({type:"resize"},{position:f,size:y})),a.element.setLocation(f.left,f.top),a.element.setSize(y.width,y.height),a.element.updateContentSize({originalElement:{axis:g?"xy":this.axis},originalPosition:f,position:f}),i?a.element.onStopResize():a.element.onResize()}},e}()},"./element/SnapHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SnapHandle:function(){return c}});var n=i("./Rulers.ts"),o=i("./ElementMeasurementHelpers.ts"),s=i("./Service.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=function(){return l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},c=function(){function e(e){this.element=e,this.mouseIsOver=!1,this.dragStartPos=null,this.snapData=null,this.measurementHelpers=null}return e.prototype.handleHover=function(e){this.mouseIsOver=e,this.snapData||this.showMeasurementHelpers(e)},e.prototype.handleStop=function(){this.snapDone(),this.showMeasurementHelpers(!1)},e.prototype.handleUpdate=function(e){void 0===e&&(e=!1),this.measurementHelpers&&this.measurementHelpers.update(e)},e.prototype.handleDropOnBlock=function(e){this.snapData&&(this.snapData.droppedOnBlock=e)},e.prototype.handleDraggableStart=function(e,t){return this.dragStartPos=l({},this.element.getLocation()),this.snapPrepare(e,t),!0},e.prototype.handleDraggableDrag=function(e,t){return!!(this.snapData&&this.dragStartPos&&t.position)&&(this.snapData.selectionAcrossMultipleBlocks&&(t.position.top=this.dragStartPos.top),this.snapMove(e,t),!0)},e.prototype.handleDraggableStop=function(e,t){return!!this.snapData&&(this.snapDone(e,t),this.dragStartPos=null,!0)},e.prototype.handleResizableStart=function(e,t){return this.snapPrepare(e,t),!0},e.prototype.handleResizableResize=function(e,t){return!(!this.snapData||!t.size||(this.snapResize(e,t),0))},e.prototype.handleResizableStop=function(e,t){return!!this.snapData&&(this.snapDone(e,t),!0)},e.prototype.getAdditionalAffectedElements=function(){var e=[];if(this.snapData)for(var t=0,i=this.snapData.affectedSiblings;t<i.length;t++){var n=i[t];e.push(n.element)}return e},e.prototype.snapPrepare=function(e,t){var i,n,r,a,l,c,u,d,h,p,m=this.element.getWidthInPixels(),g=this.element.getHeightInPixels();this.snapData={selection:[],selectionBox:{minX:null,minY:null,maxX:null,maxY:null},selectionAcrossMultipleBlocks:!1,activeArea:1200,distance:wb_builder.bodyInstance.grid.getSize()/2,horizontal:[],vertical:[],blockVerticalOffset:0,aspectRatio:m>0&&g>0?m/g:1,keepAspectRatio:!1,widthUnits:(""+this.element.width).match(/^.+%$/)?"%":"px",affectedSiblings:[],hResize:null,vResize:null,hHelpers:{rulers:[],snapLines:[]},vHelpers:{rulers:[],snapLines:[]},droppedOnBlock:null};var f=wb_builder.bodyInstance,y=f.getContentBlock("wb_header"),b=(y&&y.container.offset(),y?y.getHeightInPixels():0),v=f.getContentBlock("wb_main"),_=v?v.getHeightInPixels():0,C=this.element.getParent();C&&"wb_header"===C.id||(C&&"wb_main"!==C.id?"wb_footer"===C.id?this.snapData.blockVerticalOffset=b+_:this.snapData.blockVerticalOffset=0:this.snapData.blockVerticalOffset=b);var w=this.element.getAbsoluteLocation(),T=null;for(i=0,n=(r=wb_builder.getActiveViewElements(!0)).length;i<n;i++)if(!("dragstart"===e.type&&!r[i].isSelected()||"resizestart"===e.type&&r[i]!==this.element)&&r[i].isSelected()&&!r[i].isHidden()&&!r[i].isHidden(!0)){var E=(a=r[i]).getAbsoluteLocation();l=a.parent?a.parent.id:"wb_main",this.snapData.selection.push({offset:{x:E.left-w.left,y:E.top-w.top},elem:r[i]}),u=E.left-w.left,d=E.top-w.top,h=u+a.getWidthInPixels(),p=d+a.getHeightInPixels(),(null===this.snapData.selectionBox.minX||u<this.snapData.selectionBox.minX)&&(this.snapData.selectionBox.minX=u),(null===this.snapData.selectionBox.maxX||h>this.snapData.selectionBox.maxX)&&(this.snapData.selectionBox.maxX=h),(null===this.snapData.selectionBox.minY||d<this.snapData.selectionBox.minY)&&(this.snapData.selectionBox.minY=d),(null===this.snapData.selectionBox.maxY||p>this.snapData.selectionBox.maxY)&&(this.snapData.selectionBox.maxY=p),null===T?T=l:T!==l&&(this.snapData.selectionAcrossMultipleBlocks=!0)}if(this.snapData.selectionAcrossMultipleBlocks&&wb_builder.bodyInstance.enableDropZones(!1),wb_builder.snapToObjects){var I=[],x=[];for(i=0,n=r.length;i<n;i++)if(!("dragstart"===e.type&&r[i].isSelected()||"resizestart"===e.type&&r[i]===this.element||r[i].isHidden()||r[i].isHidden(!0))){c=(a=r[i]).getAbsoluteLocation(),l=a.parent?a.parent.id:"wb_main";var S={left:c.left,top:c.top,right:c.left+a.getWidthInPixels(),bottom:c.top+a.getHeightInPixels()};I.push({lineClass:"element",elem:a,type:"left",offset:S.left,areaMin:S.top,areaMax:S.bottom}),I.push({lineClass:"element",elem:a,type:"middle",offset:Math.round((S.left+S.right)/2),areaMin:S.top,areaMax:S.bottom}),I.push({lineClass:"element",elem:a,type:"right",offset:S.right,areaMin:S.top,areaMax:S.bottom}),this.snapData.selectionAcrossMultipleBlocks||(x.push({lineClass:"element",elem:a,type:"top",offset:S.top,areaMin:S.left,areaMax:S.right}),x.push({lineClass:"element",elem:a,type:"middle",offset:Math.round((S.top+S.bottom)/2),areaMin:S.left,areaMax:S.right}),x.push({lineClass:"element",elem:a,type:"bottom",offset:S.bottom,areaMin:S.left,areaMax:S.right}))}var k=function(e,t){return e.offset===t.offset?e.areaMin===t.areaMin?e.areaMax===t.areaMax?0:e.areaMax<t.areaMax?-1:1:e.areaMin<t.areaMin?-1:1:e.offset<t.offset?-1:1};I.sort(k),x.sort(k);var D=function(e){for(var t,i=[],n=null,o=0,s=e.length;o<s;o++)t=e[o],n&&n.offset===t.offset||(n={offset:t.offset,lines:[]},i.push(n)),n.lines.push(t);return i};this.snapData.horizontal=D(I),this.snapData.vertical=D(x)}if("resizestart"===e.type&&t.element){var O=t.axis;"nw"===O?(this.snapData.hResize="w",this.snapData.vResize="n"):"n"===O?this.snapData.vResize="n":"ne"===O?(this.snapData.hResize="e",this.snapData.vResize="n"):"w"===O?this.snapData.hResize="w":"e"===O?this.snapData.hResize="e":"sw"===O?(this.snapData.hResize="w",this.snapData.vResize="s"):"s"===O?this.snapData.vResize="s":"se"===O&&(this.snapData.hResize="e",this.snapData.vResize="s"),this.snapData.keepAspectRatio="Picture"===this.element.getClassType()&&("w"===this.snapData.hResize||"e"===this.snapData.hResize)&&"s"===this.snapData.vResize}else"dragstart"===e.type&&s.Service.HelpSystemPlayer.notify("item-plugin-"+this.element.getClassType()+"-move-start",this);o.ElementMeasurementHelpers.disabled=!0,this.showMeasurementHelpers(!1)},e.prototype.snapFindClosestLines=function(e,t,i,n){if(!this.snapData)return[];var o,s,r,a,l,c,u,d,h,p,m,g,f,y=t-this.snapData.activeArea,b=i+this.snapData.activeArea,v=[],_=null,C=null;for(o=0,s=e.length;o<s;o++)v[o]={index:o,offset:e[o],min:e[o]-this.snapData.distance,max:e[o]+this.snapData.distance,elementAreaMin:null,elementAreaMax:null,diff:null,delta:null,lines:[],snapToOffset:0,rulerOffsetCorrection:!1},_=null===_?v[o].max:Math.max(v[o].max,_);if(wb_builder.snapToGrid){u=v[0];var w=wb_builder.gridSnap(u.offset);u.diff=u.offset-w,u.delta=Math.abs(u.diff),u.snapToOffset=w,u.lines.push({lineClass:"grid",offset:w})}for(o=0,s=n.length;o<s&&!((p=n[o]).offset>(_||0));o++)for(r=0,a=v.length;r<a;r++)if(u=v[r],!(p.offset<u.min||p.offset>u.max)){if(d=u.offset-p.offset,h=Math.abs(d),m=!1,null===u.delta||h<u.delta)m=!0;else if(u.diff!==d)continue;for(g=m?[]:u.lines,f=!1,l=0,c=p.lines.length;l<c;l++)(C=p.lines[l]).areaMin>b||C.areaMax<y||(f=!0,g.push(C));m&&f&&(u.diff=d,u.delta=h,u.snapToOffset=C?C.offset:0,u.lines=g)}v=v.filter((function(e){return e.lines.length>0})),v.sort((function(e,t){return e.delta===t.delta?e.diff===t.diff?0:e.diff<t.diff?-1:1:e.delta<t.delta?-1:1})),v.length>1&&(d=v[0].diff,v=v.filter((function(e){return e.diff===d})));var T=null,E=0;for(o=v.length-1;o>=0;o--){for(r=(u=v[o]).lines.length-1;r>=0;r--)"element"===(C=u.lines[r]).lineClass&&((null===u.elementAreaMin||C.areaMin<u.elementAreaMin)&&(u.elementAreaMin=C.areaMin),(null===u.elementAreaMax||C.areaMax>u.elementAreaMax)&&(u.elementAreaMax=C.areaMax));1===u.index&&(T=u,E=o)}if(T&&v.length>2){var I=!1;for(o=v.length-1;o>=0;o--)if(o!==E&&v[o].elementAreaMin===T.elementAreaMin&&v[o].elementAreaMax===T.elementAreaMax){I=!0;break}I&&v.splice(E,1)}return v},e.prototype.prepareSnapHelpers=function(e){},e.prototype.cleanupUnusedSnapHelpers=function(e,t,i){var n;for(n=e.rulers.length-1;n>=t;n--)e.rulers[n].setVisible(!1);for(n=e.snapLines.length-1;n>=i;n--)e.snapLines[n].addClass("hidden")},e.prototype.removeSnapHelpers=function(e){var t;for(t=e.rulers.length-1;t>=0;t--)n.RulerManagerInstance.removeRuler(e.rulers[t]);for(t=e.snapLines.length-1;t>=0;t--)e.snapLines[t].remove();e.rulers=[],e.snapLines=[]},e.prototype.renderSnapHelpersForSide=function(e,t,i,o,s,r,l){var c,u,d,h,p,m,g,f,y,b,v,_,C,w=this.element.getParent(),T=w?w.container:null,E=T?T.offset():{left:0,top:0},I=a()(document.body),x=I.width()-E.left,S=I.height()-E.top;m=g=0,this.prepareSnapHelpers(t);var k="horizontal"===e?s:o,D=k+("horizontal"===e?l:r);if(i)for(d=i.length-1;d>=0;d--)if(null!==(p=i[d]).elementAreaMin&&null!==p.elementAreaMax&&(p.elementAreaMin=Math.min(p.elementAreaMin,k),p.elementAreaMax=Math.max(p.elementAreaMax,D),b=p.elementAreaMin-10,v=p.elementAreaMax+10,"horizontal"===e?(v=Math.min(S,v),y=S-b):(v=Math.min(x,v),y=x-b),y>0&&(g===t.snapLines.length?(t.snapLines[g]=a()('<div class="wb-snap-line wb-snap-line-'+e+'">'),T&&T.append(t.snapLines[g])):t.snapLines[g].removeClass("hidden"),"horizontal"===e?t.snapLines[g].css({left:p.snapToOffset-(2===p.index?1:0),top:b,height:v-b}):t.snapLines[g].css({top:p.snapToOffset-(2===p.index?1:0),left:b,width:v-b}),g++)),null!==p.elementAreaMin&&null!==p.elementAreaMax){for(_=C=null,h=p.lines.length-1;h>=0;h--)"element"===(f=p.lines[h]).lineClass&&(f.areaMax<k&&(y=k-f.areaMax,(null===_||_>y)&&(_=y)),f.areaMin>D&&(y=f.areaMin-D,(null===C||C>y)&&(C=y)));null!==_&&(u="horizontal"===e?{x:(c={x:E.left+p.snapToOffset-(2===p.index?1:0),y:0+k}).x,y:c.y-_}:{x:(c={x:E.left+k,y:0+p.snapToOffset-(2===p.index?1:0)}).x-_,y:c.y},m===t.rulers.length?t.rulers[m]=n.RulerManagerInstance.addRuler(c,u,!1):t.rulers[m].set(c,u),t.rulers[m].setVisible(!0),m++),null!==C&&(u="horizontal"===e?{x:(c={x:E.left+p.snapToOffset-(2===p.index?1:0),y:0+D}).x,y:c.y+C}:{x:(c={x:E.left+D,y:0+p.snapToOffset-(2===p.index?1:0)}).x+C,y:c.y},m===t.rulers.length?t.rulers[m]=n.RulerManagerInstance.addRuler(c,u,!1):t.rulers[m].set(c,u),t.rulers[m].setVisible(!0),m++)}this.cleanupUnusedSnapHelpers(t,m,g)},e.prototype.renderSnapHelpers=function(e,t,i,n,o,s){this.snapData&&(this.renderSnapHelpersForSide("horizontal",this.snapData.hHelpers,e,i,n,o,s),this.renderSnapHelpersForSide("vertical",this.snapData.vHelpers,t,i,n,o,s))},e.prototype.showMeasurementHelpers=function(e){this.element.isEditableStrict&&wb_builder.showMeasurementHelpers&&(e?(this.measurementHelpers||(this.measurementHelpers=o.ElementMeasurementHelpers.fromElement(this.element)),this.measurementHelpers.show()):this.measurementHelpers&&(this.measurementHelpers.hide(),this.measurementHelpers=null))},e.prototype.snapMove=function(e,t){if(this.snapData&&t.position){if(this.element.isHidden()||this.element.isHidden(!0))this.dragStartPos&&(t.position.left=this.dragStartPos.left,t.position.top=this.dragStartPos.top);else{var i,n,o,s=t.position.left+this.snapData.selectionBox.minX,r=t.position.top+this.snapData.selectionBox.minY,a=this.snapData.selectionBox.maxX-this.snapData.selectionBox.minX,l=this.snapData.selectionBox.maxY-this.snapData.selectionBox.minY,c=s+a,u=r+l,d=null;(i=this.snapFindClosestLines([s,(c+s)/2,c],r,u,this.snapData.horizontal)).length&&(n=0===i[0].index?this.snapData.selectionBox.minX:1===i[0].index?(this.snapData.selectionBox.minX+this.snapData.selectionBox.maxX)/2:this.snapData.selectionBox.maxX,t.position.left=i[0].snapToOffset-Math.round(n)),this.snapData.selectionAcrossMultipleBlocks||(d=this.snapFindClosestLines([r,(u+r)/2,u],s,c,this.snapData.vertical)).length>0&&(o=0===d[0].index?this.snapData.selectionBox.minY:1===d[0].index?(this.snapData.selectionBox.minY+this.snapData.selectionBox.maxY)/2:this.snapData.selectionBox.maxY,t.position.top=d[0].snapToOffset-Math.round(o)),this.renderSnapHelpers(i,d,t.position.left+this.snapData.selectionBox.minX,t.position.top+this.snapData.selectionBox.minY,a,l)}for(var h,p=this.snapData.selection.length-1;p>=0;p--)(h=this.snapData.selection[p]).elem.setLocation(t.position.left+h.offset.x,t.position.top+h.offset.y)}},e.prototype.snapResize=function(e,t){if(this.snapData&&t.size&&t.position&&(null!==this.snapData.hResize||null!==this.snapData.vResize)){var i=this.element.getSizeInPixels(),n=(t.position.left,i.width,t.position.top,i.height,a().extend({},t.size));this.snapData.keepAspectRatio&&(this.snapData.hResize?n.height=n.width/this.snapData.aspectRatio:n.width=n.height*this.snapData.aspectRatio),t.size.width=n.width,t.size.height=n.height}},e.prototype.snapDone=function(e,t){if(this.snapData){if(n.RulerManagerInstance.clear(),e&&t&&t.position){if("dragstop"===e.type&&(this.snapMove(e,t),this.snapData.droppedOnBlock)){var i=this.element.getParent(),r=i?i.getBounds():{left:0,top:0},a=this.snapData.droppedOnBlock.getBounds();t.position.top+=r.top-a.top;for(var l=0;l<this.snapData.selection.length;l++){var c=this.snapData.selection[l].elem;c.setLocation(null,c.getLocation().top+(r.top-a.top)),this.snapData.droppedOnBlock.addChild(c)}}this.element.setLocation(t.position.left,t.position.top),"dragstop"===e.type&&s.Service.HelpSystemPlayer.notify("item-plugin-"+this.element.getClassType()+"-move-end",this),o.ElementMeasurementHelpers.disabled=!1,this.mouseIsOver&&this.showMeasurementHelpers(!0)}wb_builder.updateDropZones(),this.removeSnapHelpers(this.snapData.hHelpers),this.removeSnapHelpers(this.snapData.vHelpers),this.snapData=null}},e}()},"./element/ZIndexHandle.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ZIndexHandle:function(){return r},reset:function(){return s}});var n={},o={};function s(){n={},o={}}var r=function(){function e(e,t){void 0===t&&(t=2),this.container=e,this.minZIndex=t,this.zLayers={}}return e.prototype.remove=function(e){e.id in o&&delete o[e.id]},e.prototype.assignLayer=function(e,t){void 0===t&&(t=!1);var i=0,s=e.isGlobalZIndex(),r=e.id in o;e.isZIndexEnabled()&&(i=this.getValidZIndex(e.getZIndex(),!1,s)),r&&!s?delete o[e.id]:!r&&s&&(o[e.id]=e),e.setZIndex(i),s?n["z"+e.getZIndex()]=!0:this.zLayers["z"+e.getZIndex()]=!0,t||this.changeLayer()},e.prototype.getValidZIndex=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var o=0,s=i?n:this.zLayers,r=i?99:this.minZIndex;if(t=t||isNaN(parseInt(""+e,10))||parseInt(""+e,10)<=1){var a=r;for(var l in s){var c=parseInt(l.substring(1),10);isNaN(c)&&(c=0),c>a&&(a=c)}o=a+1}else for((o=1*e+(i?0:r))<r&&(o=r);s["z"+o]&&o<1e4;)o++;return o},e.prototype.buildElementLists=function(){var e,t,i=this.container.getChildren(),n=[],s=[];for(e=0,t=i.length;e<t;e++)i[e].isGlobalZIndex()||n.push(i[e]);for(n.sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e=0,t=n.length;e<t;e++)s.push(n[e].getZIndex());var r=[],a=[];for(var l in o)o[l].isGlobalZIndex()&&r.push(o[l]);for(r.sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e=0,t=r.length;e<t;e++)a.push(r[e].getZIndex());return{local:{elements:n,indexes:s},global:{elements:r,indexes:a}}},e.prototype.applyElementLists=function(t){this.zLayers=e.applyElementList(t.local,this.minZIndex),n=e.applyElementList(t.global,99)},e.applyElementList=function(e,t){var i,n,o,s={},r=0;for(n=0,o=e.elements.length;n<o;n++)i=parseInt(""+e.indexes[n],10),0===n&&i<t&&(r=t-i),i+=r,e.elements[n].isZIndexEnabled()||(i=0),e.elements[n].setZIndex(i),s["z"+i]=!0;return s},e.prototype.changeLayer=function(e,t){var i=this.buildElementLists();if(e){var n=e.isGlobalZIndex()?i.global.elements:i.local.elements,o=n.indexOf(e);if(o<0)return;n.splice(o,1),"top"===t&&o<n.length?n.push(e):"bottom"===t&&o>0?n.unshift(e):"up"===t&&o<n.length?n.splice(o+1,0,e):"down"===t&&o>0&&n.splice(o-1,0,e);var s={element:e.id,idx:o},r=function(t){var i=window.getElementById(t.element);if(i){var n=i.parent||wb_builder.getCurrentContextCanvas();if(n&&n.zIndexHandle){var o=n.zIndexHandle.buildElementLists(),s=e.isGlobalZIndex()?o.global.elements:o.local.elements,r=s.indexOf(e);r<0?console.error("Unable to undo '"+this.type+"': element "+t.element+" is no longer a part of the layer"):(s.splice(r,1),s.splice(t.idx,0,i),n.zIndexHandle.applyElementLists(o),t.idx=r)}else console.error("Unable to undo '"+this.type+"': invalid parent")}else console.error("Unable to undo '"+this.type+"': can't find element "+t.element)};wb_builder.historyAdd("changeZIndex",s,r,r)}this.applyElementLists(i)},e}()},"./globals.ts":function(e,t,i){"use strict";i.r(t);var n=i("./core/BuilderConfig.ts"),o=i("./util/TextUtil.ts");window.__tr=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),!e)return e;var s=wb_builder&&wb_builder.site?wb_builder.site:null,r=s?s.getLastDefLang():null,a=s?s.currSelLang:null,l=i||"",c=null;if("__DEFAULT__"===t&&(t=r),"string"==typeof e||"number"==typeof e)c=""+e;else if("object"==typeof e){var u=e;if(t&&t in u&&(n&&(0,o.stripTags)(u[t])||!n&&u[t]))c=u[t];else if(a&&a in u&&(n&&(0,o.stripTags)(u[a])||!n&&u[a]))c=u[a];else if(r&&r in u&&(n&&(0,o.stripTags)(u[r])||!n&&u[r]))c=u[r];else for(var d in u)if(n&&(0,o.stripTags)(u[d])||!n&&u[d]){c=u[d];break}}return c||l},window.__trf=function(e,t){if(!e)return e;if("function"!=typeof t)return e;if("string"==typeof e||"number"==typeof e)return t(""+e);if("object"==typeof e){var i={};for(var n in e)i[n]=t(e[n]);return i}return null},window.__trr=function(e){var t;return __tr(e,null===(t=n.wbConfig.getLanguageByLocale(n.wbConfig.locale))||void 0===t?void 0:t.code,null,!0)},window.__pr=function(e){if(e&&e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t[i]=window.__pr(e[i]);return t.join("")}var o=null;if("object"==typeof e&&"key"in e){if(o=__(e.key),"vars"in e&&e.vars instanceof Array)for(i=0;i<e.vars.length;i++)o=o.replace(/(?:%s|%d)/,e.vars[i])}else o="string"==typeof e?__(e):e;return o};var s=window.Gettext?new window.Gettext({domain:"webbuilder"}):null;window.__=function(e){return s?s.gettext(e):e},window.__c=function(e){return"{{"+e+"}}"},window.getElementById=function(e){var t=null;return wb_builder.bodyInstance.traverseElements((function(i,n,o){return i.id===e?(t=i,1):0})),t}},"./jquery-builder.ts":function(e,t,i){"use strict";i.r(t);var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);t.default=o()},"./main.ts":function(e,t,i){"use strict";i.r(t);var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=(i("./globals.ts"),i("./core/BuilderConfig.ts")),a=i("./WB_Builder.class.js"),l=i.n(a),c=(i("./ui/ControlsMapper.ts"),i("./UIBuilder.js"),i("./WB_Preloader.class.js")),u=i.n(c),d=i("./WB_MsgDialog.class.js"),h=i.n(d),p=i("./WebsiteImporter.ts"),m=i("./ElementRegister.ts"),g=i("./PluginApi/PluginWrapper.ts"),f=(i("./lib/jquery.browser.min.js"),i("./lib/bootstrap/js/bootstrap.min.js"),i("./lib/colorpicker/jquery.colorpicker.js"),i("./lib/jquery.json.js"),i("./lib/jstree/jquery.jstree.js"),i("./lib/fancybox/jquery.fancybox-1.3.4.pack.js"),i("./lib/jQuery-File-Upload-9.16.0/js/jquery.iframe-transport.js"),i("./lib/jQuery-File-Upload-9.16.0/js/jquery.fileupload-image.js"),i("./AutoScaleUploadedImage.ts"),i("./lib/ckeditor/config_manual.js"),i("./util/amd-interop.ts"),i("./util/ExtendedResizable.ts"),i("./DefaultUI/DefaultUI.ts"),i("./WB_Dialog.class.js"),i("./WB_ImagePicker.class.js"),i("./WB_MediaLibrary.class.js"),i("./WB_URLControl.class.js"),i("./WB_TextArea.class.js"),i("./WB_Menu.class.js"),i("./Body.ts"),i("./Picture.ts"),i("./Video.ts"),i("./WB_Banner.class.js"),i("./WB_BookmarksShare.class.js"),i("./WB_Button.class.js"),i("./WB_Chat.class.js"),i("./WB_CustomHtml.class.js"),i("./WB_FacebookFans.class.js"),i("./WB_FacebookLike.class.js"),i("./WB_Flash.class.js"),i("./WB_FlickrGallery.class.js"),i("./WB_Form.class.js"),i("./Gallery.ts"),i("./WB_GoogleAdSense.class.js"),i("./WB_GoogleMaps.class.js"),i("./WB_Youtube.class.js"),i("./WB_Languages.class.js"),i("./WB_Line.class.js"),i("./WB_LinkExchangeBadge.class.js"),i("./WB_MusicPlayer.class.js"),i("./Shape.ts"),i("./WB_SkypeImOnline.class.js"),i("./WB_Table.class.js"),i("./WB_Twitter.class.js"),i("./GalleryPictureManager.ts"),i("./store/Store.ts"),i("./store/StoreCart.ts"),i("./blog/Blog.ts"),i("./blog/BlogModule.ts"),i("./LayoutElement.ts"),i("./ElementCompositionService.ts"),i("./element/PasteUtil.ts"),i("./PluginApi/PluginTranslation.ts"),i("./PluginApi/PluginResourceLoader.ts"),null),y=!1,b=!1,v=null,_=function(e){C(e,"Error loading builder JS (network error)")};function C(e,t){if(console.error(t),!y){y=!0;var i=new(h())(e.loadErrorTitle,void 0,null,null,!0);e.returnUrl?i.setOnClose((function(){"returnUrl"in e&&e.returnUrl&&(window.location.href=e.returnUrl)})):i.setFooterVisible(!1),i.setMessage(e.doMigrate?e.migrateErrorText:e.loadErrorText,null,"error"),i.show()}}function w(e){n.setProgress(30+(b?40:0)+(v?30:0)),b&&v&&setTimeout((function(){if(v&&"object"==typeof v){n.setVisible(!1),e.returnUrl=null,e.doMigrate=!1;try{var t=function(e){var t=new(l());if("whiteLabel"in window.wb_builder_vars){var i=window.wb_builder_vars.whiteLabel;for(var n in i)r.wbConfig.whiteLabel[n]=i[n];delete window.wb_builder_vars.whiteLabel}for(var n in window.wb_builder_vars)t[n]=window.wb_builder_vars[n];for(var n in e.wb_builder)t[n]=e.wb_builder[n];var o=t;return o.baseUrl=r.wbConfig.baseUrl,o.locale=r.wbConfig.locale,o.getLanguageByCode=r.wbConfig.getLanguageByCode,o.getLanguageByLocale=r.wbConfig.getLanguageByLocale,o.whiteLabel=r.wbConfig.whiteLabel,window.wb_builder=t,CKEDITOR.timestamp=123456897,CKEDITOR.config.language=r.wbConfig.langCode,t.addElements(e.addElements,!0),t._loadPlugins=function(){if(f){for(var e=0,t=f;e<t.length;e++)(0,t[e])(m.ElementRegister,g.PluginWrapper,s());f=null}},t}(v);t.init()}catch(t){C(e,t)}}}),500)}function T(e,t){(n=new(u())).setTitle(__("Loading page")),n.reset(),n.setVisible(!0),n.setMessage("",__("Loading page")+"..."),n.setProgress(30);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e.builderJsUrl,i.onload=function(){b=!0,w(e)},i.onerror=function(){"function"==typeof _&&_(e)},document.getElementsByTagName("head")[0].appendChild(i),function(e,t){v=null,s().ajax({url:e.builderDataUrl+(t?"&noMigration=1":"")+(e.doMigrate?"&migrate=1":""),async:!0,type:"POST",dataType:"json",success:function(t){t.success?t.redirectUrl?(_=null,window.location.href=t.redirectUrl):(v=t,(0,r.applyConfig)(e),w(e)):n.setMessage(t.error,__("Error"),"danger")},error:function(){C(e,"Error loading builder data (network error)")}})}(e,t)}window.wbBuilderLoadPlugins=function(e,t){m.ElementRegister.registerClassAll(e),f=t},window.wbBuilderSetup=function(e){s()((function(){!e.doImport||e.doImportIsMigrating&&!e.doMigrate?e.doMigrate?T(e,!1):T(e,!0):p.WebsiteImporter.handleImportOnOpen(e.doImportIsMigrating,(function(){T(e,!0)})),s().browser&&s().browser.chrome||s()("head").append('<style type="text/css"> .form-control[type=time] { padding: 0 12px; } </style>')}))}},"./store/Store.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Store:function(){return y}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./ElementRegister.ts"),a=i("./Element.ts"),l=i("./Service.ts"),c=i("./BorderControl.ts"),u=i("./store/StoreModule.ts"),d=i("./store/StorePropertyDialog.ts"),h=(i("./store/StoreCart.ts"),i("./element/PropertyType.ts")),p=i("./TextControl.ts"),m=i("./store/StoreCategory.ts"),g=i("./store/StoreOrders.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(e){function t(i){var n,o=this;(o=e.call(this,i)||this)._prodListElem=null,o._data=i;var r=o.virtualElement||o.isElementPreview;o.storeModule=r?u.ModuleForCompositions:u.Module;var a,l={},d=wb_builder.site.styles;for(a=0;a<d.length;a++)if(".wb-stl-normal"===d[a].selector){var h=d[a].sys.text||{};l=p.TextControl.buildCss({color:h.color,size:h.size,font:h.font,style:{}})}return o._data.content||(o._data.content={}),o._data.content.currencyCode||(o._data.content.currencyCode="USD"),o._data.content.currencyPrefix||(o._data.content.currencyPrefix="$"),o._data.content.currencyPostfix||(o._data.content.currencyPostfix=""),o._data.content.thumbNumber||(o._data.content.thumbNumber=4),o._data.content.thumbWidth||(o._data.content.thumbWidth=200),o._data.content.thumbHeight||(o._data.content.thumbHeight=200),o._data.content.imageWidth||(o._data.content.imageWidth=300),o._data.content.imageHeight||(o._data.content.imageHeight=300),o._data.content.imageBorder||(o._data.content.imageBorder=(0,c.buildCss)({color:"#eeeeee",style:"solid",weight:1,radius:0})),o._data.content.nameStyle||(o._data.content.nameStyle=s().extend(!0,{},l),o._data.content.nameStyle.style.bold=!0,o._data.content.nameStyle=p.TextControl.buildCss(o._data.content.nameStyle)),o._data.content.priceStyle||(o._data.content.priceStyle=l),o._data.content.descStyle||(o._data.content.descStyle=l),o._data.content.sysTextStyle||(o._data.content.sysTextStyle=l),o._data.content.labelStyle||(o._data.content.labelStyle=l),o._data.content.itemsPerPage||(o._data.content.itemsPerPage=o._data.id?0:8),o._data.content.category||(o._data.content.category=0),void 0===o._data.content.showAddToCartInList&&(o._data.content.showAddToCartInList=!1),void 0===o._data.content.showBuyNowInList&&(o._data.content.showBuyNowInList=!1),void 0===o._data.content.showTextFilter&&(o._data.content.showTextFilter=!0),void 0===o._data.content.showPriceFilter&&(o._data.content.showPriceFilter=!0),void 0===o._data.content.showSorting&&(o._data.content.showSorting=!0),void 0===o._data.content.showViewSwitch&&(o._data.content.showViewSwitch=!0),o._data.content.filterPosition||(o._data.content.filterPosition="top"),o.updateStyle(!0),o.storeModule.needToSave=!0,r&&o.storeModule.initialLoadDone?setTimeout((function(){return o.updateStyle()}),0):o.storeModule.load((function(){return o.updateStyle()})),t.elemList.push(o),null===(n=o.cover)||void 0===n||n.on("dblclick",(function(e){var t=o.comProperties(),i=e.pageX,n=e.pageY,r=o.container.find(".wb-store-item"),a=o;r.each((function(){var e=s()(this);if(e.hasClass("active"))return!0;var o=e.offset(),r=e.outerWidth(),l=e.outerHeight();if(i>=o.left&&i<=o.left+r&&n>=o.top&&n<=o.top+l){var c=parseInt(e.attr("data-item-id"));if(c){var u=a.findItemById(c);u&&t.tree.selectItem((function(e){return e.id===(null==u?void 0:u.id)}))}return!1}return!0}))})),o}return f(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contactForm",{get:function(){return this.storeModule.contactForm},set:function(e){this.storeModule.contactForm=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currencyCode",{get:function(){return this.storeModule.currency.code},set:function(e){if(this.storeModule.currency.code=e,e&&this.storeModule.currenciesIndex.hasOwnProperty(e)){var t=this.storeModule.currenciesIndex[e];this.storeModule.currency.prefix=t.prefix,this.storeModule.currency.postfix=t.postfix}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currencyPrefix",{get:function(){return this.storeModule.currency.prefix},set:function(e){this.storeModule.currency.prefix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currencyPostfix",{get:function(){return this.storeModule.currency.postfix},set:function(e){this.storeModule.currency.postfix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thousandsSeparator",{get:function(){return this.storeModule.priceOptions.thousandsSeparator},set:function(e){this.storeModule.priceOptions.thousandsSeparator=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decimalPoint",{get:function(){return this.storeModule.priceOptions.decimalPoint},set:function(e){this.storeModule.priceOptions.decimalPoint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decimalPlaces",{get:function(){return this.storeModule.priceOptions.decimalPlaces},set:function(e){this.storeModule.priceOptions.decimalPlaces=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noPhotoImage",{get:function(){return this.storeModule.noPhotoImage},set:function(e){this.storeModule.noPhotoImage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"watermarkImage",{get:function(){return this.storeModule.watermarkImage},set:function(e){this.storeModule.watermarkImage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showDates",{get:function(){return this.storeModule.showDates},set:function(e){this.storeModule.showDates=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemId",{get:function(){return this.storeModule.showItemId},set:function(e){this.storeModule.showItemId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddToCartInList",{get:function(){return this._data.content.showAddToCartInList||!1},set:function(e){this._data.content.showAddToCartInList=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showBuyNowInList",{get:function(){return this._data.content.showBuyNowInList||!1},set:function(e){this._data.content.showBuyNowInList=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTextFilter",{get:function(){return this._data.content.showTextFilter||!1},set:function(e){this._data.content.showTextFilter=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPriceFilter",{get:function(){return this._data.content.showPriceFilter||!1},set:function(e){this._data.content.showPriceFilter=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSorting",{get:function(){return this._data.content.showSorting||!1},set:function(e){this._data.content.showSorting=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showViewSwitch",{get:function(){return this._data.content.showViewSwitch||!1},set:function(e){this._data.content.showViewSwitch=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbNumber",{get:function(){return this._data.content.thumbNumber||4},set:function(e){this._data.content.thumbNumber=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbWidth",{get:function(){return this._data.content.thumbWidth||200},set:function(e){this._data.content.thumbWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbHeight",{get:function(){return this._data.content.thumbHeight||200},set:function(e){this._data.content.thumbHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._data.content.imageWidth||300},set:function(e){this._data.content.imageWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._data.content.imageHeight||300},set:function(e){this._data.content.imageHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageBorder",{get:function(){return this._data.content.imageBorder},set:function(e){this._data.content.imageBorder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this._data.content.category},set:function(e){this._data.content.category=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsPerPage",{get:function(){return this._data.content.itemsPerPage||0},set:function(e){this._data.content.itemsPerPage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nameStyle",{get:function(){return this._data.content.nameStyle},set:function(e){this._data.content.nameStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priceStyle",{get:function(){return this._data.content.priceStyle},set:function(e){this._data.content.priceStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descStyle",{get:function(){return this._data.content.descStyle},set:function(e){this._data.content.descStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sysTextStyle",{get:function(){return this._data.content.sysTextStyle},set:function(e){this._data.content.sysTextStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){return this._data.content.labelStyle},set:function(e){this._data.content.labelStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterPosition",{get:function(){return this._data.content.filterPosition||"top"},set:function(e){this._data.content.filterPosition=e},enumerable:!1,configurable:!0}),t.prototype.findItemById=function(e){if(u.Module.items&&u.Module.items.length)for(var t=0,i=u.Module.items;t<i.length;t++){var n=i[t];if(n.id===e)return n}return null},t.reloadAll=function(e){for(var i=0,n=void 0;n=t.elemList[i];i++)n!==e&&n.updateStyle(!1,null,!0)},t.prototype.getDataDefaults=function(){return s().extend(e.prototype.getDataDefaults.call(this),{width:"100%",minWidth:100,minHeight:100})},t.prototype.getIcon=function(){return"fa fa-shopping-basket"},t.prototype.supportsAutoWidth=function(){return!0},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return"string"==typeof this.storeModule.noPhotoImage&&""!==this.storeModule.noPhotoImage&&"none"!==this.storeModule.noPhotoImage&&t.push(this.storeModule.noPhotoImage),"string"==typeof this.storeModule.watermarkImage&&""!==this.storeModule.watermarkImage&&"none"!==this.storeModule.watermarkImage&&t.push(this.storeModule.watermarkImage),t},t.prototype.getUsedFonts=function(){var t=e.prototype.getUsedFonts.call(this);return this._data.content&&(this._data.content.nameStyle&&this._data.content.nameStyle.font&&""!==this._data.content.nameStyle.font&&t.push(this._data.content.nameStyle.font),this._data.content.priceStyle&&this._data.content.priceStyle.font&&""!==this._data.content.priceStyle.font&&t.push(this._data.content.priceStyle.font),this._data.content.descStyle&&this._data.content.descStyle.font&&""!==this._data.content.descStyle.font&&t.push(this._data.content.descStyle.font),this._data.content.sysTextStyle&&this._data.content.sysTextStyle.font&&""!==this._data.content.sysTextStyle.font&&t.push(this._data.content.sysTextStyle.font),this._data.content.labelStyle&&this._data.content.labelStyle.font&&""!==this._data.content.labelStyle.font&&t.push(this._data.content.labelStyle.font)),t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);for(var i in t.content={},this._data.content)t.content[i]=this._data.content[i];return t},t.prototype.updateContentSize=function(){e.prototype.updateContentSize.call(this),this._prodListElem&&this._prodListElem.parent().css({width:this.getWidth(),height:this.getHeight()})},t.prototype.onSwitchLanguage=function(t){e.prototype.onSwitchLanguage.call(this,t),this.updateStyle(!1,t)},t.prototype.updateStyle=function(i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),e.prototype.updateStyle.call(this,i,n),n=n||this.system.site.currSelLang,!this._prodListElem){var r=s()("<div>").addClass("wb-store").css({width:this.getWidth(),height:this.getHeight()});s()("<div>").addClass("wb-store-filters").append(s()("<select>").addClass("wb-store-cat-select form-control").append(s()("<option>").attr({value:""}).text(__("All")))).appendTo(r),this._prodListElem=s()("<div>").addClass("wb-store-list").css({textAlign:"center"}).appendTo(r),this.container.append(r)}this._data.content.category?this.container.find(".wb-store-cat-select").hide():this.container.find(".wb-store-cat-select").show(),this._prodListElem.empty();var a,l,u,d,h,p,m,g,f=this,y=this.storeModule.currency,b=this.storeModule.items,v=f._data.content.thumbWidth?f._data.content.thumbWidth:0,_=f._data.content.thumbHeight?f._data.content.thumbHeight:0,C=this._data.content.itemsPerPage&&this._data.content.itemsPerPage>0?Math.min(b.length,this._data.content.itemsPerPage):b.length,w=0,T=v+(0,c.getBorderWidth)(f._data.content.imageBorder,3)+(0,c.getBorderWidth)(f._data.content.imageBorder,1),E=_+(0,c.getBorderWidth)(f._data.content.imageBorder,0)+(0,c.getBorderWidth)(f._data.content.imageBorder,2);for(a=0;a<b.length&&!(w>=C);a++)if(!((l=b[a]).isHidden||this._data.content.category&&l.categories.indexOf(this._data.content.category)<0)){if(w++,(u=s()("<div>").addClass("wb-store-item").css({maxWidth:T+2})).attr("data-item-id",l.id),p=s()("<div>").addClass("wb-store-thumb").css({width:T,height:E}).css(f._data.content.imageBorder.css).appendTo(u),l.image?function(e,t){var i=new Image;i.onload=function(){var t,i,n=this.width,o=this.height,s=v,r=_;t=s,(i=Math.round(o*s/n))<r&&(i=r,t=Math.round(n*r/o)),e.css({width:t,maxWidth:t,height:i,maxHeight:i,marginLeft:Math.round((s-t)/2),marginTop:Math.round((r-i)/2)})},i.onerror=function(){},i.src=t}(s()("<img>").attr({src:wb_builder.makeLocalUrl(l.image),alt:""}).appendTo(p),wb_builder.makeLocalUrl(l.image)):s()("<span>").addClass("wb-store-nothumb glyphicon glyphicon-picture").appendTo(p),m=s()("<div>").addClass("wb-store-name").text(__tr(l.name,n,__tr(l.name,wb_builder.site.getLastDefLang()))).appendTo(u),this._data.content.nameStyle.css&&m.css(this._data.content.nameStyle.css),l.price>0&&(h=this.storeModule.getFormattedPrice(l.price))&&(g=""+y.prefix+h+(y.prefix||y.postfix?y.postfix:" "+y.code),d=s()("<div>").addClass("wb-store-price").text(g).appendTo(u),this._data.content.priceStyle.css&&d.css(this._data.content.priceStyle.css)),this.showAddToCartInList||this.showBuyNowInList){var I=s()("<div>").addClass("wb-store-item-buttons").css("text-align",this._data.content.priceStyle.align);this.showAddToCartInList&&I.append(s()("<button>").addClass("btn btn-success btn-xs").append(__("Add to cart"))),this.showBuyNowInList&&(I.append(" "),I.append(s()("<button>").addClass("btn btn-success btn-xs").append(__("Buy Now")))),I.appendTo(u)}this._prodListElem.append(u)}o||t.reloadAll(this)},t.prototype.comProperties=function(){var t=this,i=e.prototype.comProperties.call(this,d.build(this,(function(){return t._data})));return d.updateData(i),i},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"data"});for(var t=[],i=0;i<u.Module.currencies.length;i++)t.push({id:u.Module.currencies[i].code,name:u.Module.currencies[i].code});this.registerProperty({name:"itemsButton",type:h.PropertyType.StoreItemsButton,uiComponentOptions:{click:function(){this.comProperties()}}}),this.registerProperty({name:"checkOrders",type:h.PropertyType.StoreCheckOrdersButton,uiComponentOptions:{click:function(){(0,g.viewOrders)(wb_builder)}}}),this.registerProperty({name:"currencyCode",type:h.PropertyType.PriceCurrencyCode,uiComponentOptions:{options:t}}),this.registerProperty({name:"currencyPrefix",type:h.PropertyType.PriceCurrencyPrefix,dependencies:["currencyCode"]}),this.registerProperty({name:"currencyPostfix",type:h.PropertyType.PriceCurrencyPostfix,dependencies:["currencyCode"]}),this.registerProperty({name:"thousandsSeparator",type:h.PropertyType.PriceThousandsSeparator}),this.registerProperty({name:"decimalPoint",type:h.PropertyType.PriceDecimalPoint}),this.registerProperty({name:"decimalPlaces",type:h.PropertyType.PriceDecimalPlaces}),this.registerProperty({name:"noPhotoImage",type:h.PropertyType.NoPhotoImage}),this.registerProperty({name:"watermarkImage",type:h.PropertyType.WatermarkImage}),this.registerProperty({name:"showDates",type:h.PropertyType.StoreShowDates}),this.registerProperty({name:"showItemId",type:h.PropertyType.StoreShowItemId}),this.registerProperty({name:"thumbNumber",type:h.PropertyType.ListImageNumber}),this.registerProperty({name:"thumbWidth",type:h.PropertyType.ListImageWidth,dependencies:["data"]}),this.registerProperty({name:"thumbHeight",type:h.PropertyType.ListImageHeight,dependencies:["data"]}),this.registerProperty({name:"imageWidth",type:h.PropertyType.DetailsImageWidth,dependencies:["data"]}),this.registerProperty({name:"imageHeight",type:h.PropertyType.DetailsImageHeight,dependencies:["data"]}),this.registerProperty({name:"imageBorder",type:h.PropertyType.StoreImageBorder,dependencies:["data"],uiComponentOptions:{noTransparent:!1,showRadius:!0}}),this.registerProperty({name:"nameStyle",type:h.PropertyType.StoreNameStyle,dependencies:["data"]}),this.registerProperty({name:"priceStyle",type:h.PropertyType.StorePriceStyle,dependencies:["data"]}),this.registerProperty({name:"descStyle",type:h.PropertyType.StoreDescStyle,dependencies:["data"]}),this.registerProperty({name:"sysTextStyle",type:h.PropertyType.StoreSysTextStyle,dependencies:["data"]}),this.registerProperty({name:"labelStyle",type:h.PropertyType.StoreLabelStyle,dependencies:["data"]}),this.registerProperty({name:"itemsPerPage",type:h.PropertyType.ItemsPerPage,dependencies:["data"]}),this.registerProperty({name:"category",type:h.PropertyType.StoreWebsiteCategory,dependencies:["data"],uiComponentOptions:function(){var e=this.storeModule.categories.map((function(e){return e}));return e.unshift(new m.StoreCategory({name:__("All")})),{options:e}}}),this.registerProperty({name:"showAddToCartInList",type:h.PropertyType.StoreShowAddToCartButtonInList,dependencies:["data"]}),this.registerProperty({name:"showBuyNowInList",type:h.PropertyType.StoreShowBuyNowButtonInList,dependencies:["data"]}),this.registerProperty({name:"showTextFilter",type:h.PropertyType.StoreShowTextFilter,dependencies:["data"]}),this.registerProperty({name:"showPriceFilter",type:h.PropertyType.StoreShowPriceFilter,dependencies:["data"]}),this.registerProperty({name:"showSorting",type:h.PropertyType.StoreShowSorting,dependencies:["data"]}),this.registerProperty({name:"showViewSwitch",type:h.PropertyType.StoreShowViewSwitch,dependencies:["data"]}),this.registerProperty({name:"filterPosition",type:h.PropertyType.StoreFilterPosition,dependencies:["data"]}),this.registerProperty({name:"contactForm",type:h.PropertyType.ContactFormButton,dependencies:["data"]})},t.elemList=[],t}(a.Element);r.ElementRegister.registerClass("Store",y),l.Service.Store={Module:u.Module,ModuleForCompositions:u.ModuleForCompositions}},"./store/StoreCart.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCart:function(){return T}});var n,o=i("./jquery-builder.ts"),s=i("./Element.ts"),r=i("./UIComponent.ts"),a=i("./ElementRegister.ts"),l=i("./Service.ts"),c=i("./store/StoreModule.ts"),u=i("./WB_PropertyDialog.class.js"),d=i.n(u),h=i("./store/StoreDestinationZoneDialog.ts"),p=i("./store/StoreTaxRuleDialog.ts"),m=i("./store/StoreShippingMethodDialog.ts"),g=i("./WYSIWYGControl.ts"),f=i("./TextControl.ts"),y=i("./SizeSelector.ts"),b=i("./PluginApi/PluginWrapper.ts"),v=i("./element/PropertyType.ts"),_=i("./store/StoreOrders.ts"),C=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.onChange=null,t.uiFields=null,t}return C(t,e),t.prototype.buildInit=function(e,t){var i=this;if(this.uiFields=t,"function"==typeof e.change){var n=e.change;this.onChange=function(){n.call(i,t)}}},t.prototype.update=function(){var e,t,i,n,s,r=this,u=a.ElementRegister.getPaymentGateways(),h=this.getElem();h.empty(),this.items=[];var p=function(){var a,p=u[e];i={api:p,key:null,enabler:null,indicator:null};var g,f=null,y=null;"settingsTabDef"in p&&p.settingsTabDef&&(f=p.settingsTabDef),"bank_transfer"!==p.id&&"cash_on_delivery"!==p.id&&(f||p.useStylesInStoreCart)&&(y=(0,o.default)("<button>").addClass("btn btn-default btn-sm btn-sm-settings").append('<span class="glyphicon glyphicon-cog"></span>'),g=p,y.on("click",(function(){if(!a){var e=[],t=[];if(f&&e.push({name:__("Settings"),children:[{type:"CustomContainer",content:f}]}),g.useStylesInStoreCart){var i="styleTabDef"in g&&g.styleTabDef?g.styleTabDef:b.PluginWrapper.paymentGatewayStyleTabDef(null,null,!0);e.push(i),t=[{name:__("Cancel"),click:function(){return a.hide()}},{name:__("Apply"),primary:!0,click:function(){b.PluginWrapper.paymentGatewayApplyAction(a.fields,g.data),"postApplyStylesCallback"in g&&"function"==typeof g.postApplyStylesCallback&&g.postApplyStylesCallback(a.fields,g.data),a.hide()}}];for(var n=0,s=c.Module.paymentGateways;n<s.length;n++){var r=s[n];if(r.id===g.id){"data"in r&&r.data&&(g.data=o.default.extend(!0,{},r.data));break}}}else t=[{name:__("Close"),click:function(){return a.hide()}}];a=new(d())(g.name,{tabs:e,buttons:t})}g.useStylesInStoreCart&&("preOpenStylesCallback"in g&&"function"==typeof g.preOpenStylesCallback&&g.preOpenStylesCallback(a.fields),b.PluginWrapper.paymentGatewayOpenAction(a.fields,g.data),"postOpenStylesCallback"in g&&"function"==typeof g.postOpenStylesCallback&&g.postOpenStylesCallback(a.fields)),a.setVisible(!0)}))),p.data={content:{}};var v=o.default.extend(!0,{button_label:"",button_color:"#fafafa",font_family:"Arial",font_size:14,label_color:"#000",showlogo:!0,logo_width:80,button_padding:1,button_border:{color:"#eee",style:"none",weight:1,differ:!1,css:{border:"1px none #eee"},cssRaw:"border: 1px none #eee"}},p.defaultStyles?p.defaultStyles:{});if(b.PluginWrapper.paymentGatewayLoadAction(p.data,v,!0),"postLoadStylesCallback"in p&&"function"==typeof p.postLoadStylesCallback&&p.postLoadStylesCallback(p.data),p.data.class="pluginId"in p&&p.pluginId?p.pluginId:p.id,p.data.width||(p.data.width="defaultWidth"in p&&p.defaultWidth?p.defaultWidth:100),p.data.height||(p.data.height="defaultHeight"in p&&p.defaultHeight?p.defaultHeight:47),"keyFieldDef"in p&&p.keyFieldDef)s=p.keyFieldDef;else for(s={type:"HorizontalLayout",noPadding:!0,children:[]},t=1;t<6;t++){var _=1===t?"":""+t;"keyField"+_ in p&&p["keyField"+_]&&((n="object"==typeof p["keyField"+_]?p["keyField"+_]:{type:"TextField",placeholder:p["keyField"+_]}).id="key"+_,n.enabled=!1,s.children.push(n))}s.afterInit=function(e,t){var i=(0,o.default)("<div>").css({position:"absolute",left:8,top:0,width:3,padding:0,height:"100%",background:"#eee"});i.data("setEnabled",(function(e){e?i.css("background","#0c0"):i.css("background","#eee")})),this.getElem().append(i),t.indicator=i},l.Service.UIBuilder.buildLayout({type:"HorizontalLayout",css:{marginTop:5},columnWeights:[3,9],columnWeightsSmall:[3,9],children:[{type:"CheckBox",id:"enabler",label:p.name,css:{marginTop:7},change:function(e){for(var t=this.getValue(),i=1;i<6;i++){var n=1===i?"":i;"key"+n in e&&e["key"+n]&&"function"==typeof e["key"+n].setEnabled&&e["key"+n].setEnabled(t)}e.indicator&&e.indicator.data("setEnabled")(t),r.onChange&&r.onChange(),t&&"function"==typeof e.api.onEnable&&e.api.onEnable.call(e,r,c.Module),t||"function"!=typeof e.api.onDisable||e.api.onDisable.call(e,r,c.Module)},init:function(){y&&this.getElem().append(y)}},s]},h,i),m.items.push(i)},m=this;for(e=0;e<u.length;e++)p();for(var g=0,f=this.items;g<f.length;g++)"function"==typeof(i=f[g]).api.onInit&&i.api.onInit.call(i,this,c.Module)},t.prototype.getActiveCount=function(){for(var e=0,t=0,i=this.items;t<i.length;t++){var n=i[t];n.enabler&&n.enabler.getValue()&&e++}return e},t.prototype.getValue=function(){var e,t,i=[];for(e=0;e<this.items.length;e++){var n=this.items[e];if(n.enabler&&n.enabler.getValue()&&n.key&&n.key.getValue()){delete(t=o.default.extend({},this.items[e].api)).styleTabDef,delete t.settingsTabDef,delete t.defaultStyles,delete t.keyFieldDef;for(var s=1;s<6;s++){var r=1===s?"":s;delete t["keyField"+r],"key"+r in this.items[e]&&this.items[e]["key"+r]&&(t["key"+r]=this.items[e]["key"+r].getValue())}i.push(t)}}return i},t.prototype.setValue=function(e){var t,i;for(e||(e=[]),t=0;t<this.items.length;t++){var n=this.items[t];if(n.enabler){n.enabler.setValue(!1),n.enabler.trigger("change");for(var o=1;o<6;o++){var s=1===o?"":o,r=n.api.hasOwnProperty("keyField"+s+"DefaultValue")?n.api["keyField"+s+"DefaultValue"]:"";"key"+s in n&&n["key"+s]&&n["key"+s].setValue(r)}for(i=0;i<e.length;i++)if(n.api.id===e[i].id&&e[i].key){for(n.enabler.setValue(!0),n.enabler.trigger("change"),o=1;o<6;o++)"key"+(s=1===o?"":o)in this.items[t]&&this.items[t]["key"+s]&&this.items[t]["key"+s].setValue(e[i]["key"+s]);"data"in e[i]&&e[i].data&&(this.items[t].api.data=e[i].data)}}}},t.prototype.getUiFields=function(){return this.uiFields},t}(r.UIComponent),T=function(e){function t(t){var i=e.call(this,function(e){return e&&!e.width&&(e.width=155,e.height=64),e}(t))||this;i.noOptionsTab=!0,i._data=t;var n,o={},s=wb_builder.site.styles;for(n=0;n<s.length;n++)if(".wb-stl-normal"===s[n].selector){var r=s[n].sys.text||{};o=f.TextControl.buildCss({color:"#333333",size:r.size,font:r.font,style:{}})}return void 0===i._data.content.name&&(i._data.content.name=__("Shopping Cart")),i._data.content.image||(i._data.content.image={faBaseLine:1537.02,faCharacter:"f07a",faFontSize:1792,faHeight:1793.982,faIcon:"shopping-cart",faWidth:1793.982,faXOffset:65.50141500000002}),i._data.content.imageHeight||(i._data.content.imageHeight="auto"),i._data.content.imageWidth||(i._data.content.imageWidth=30),i._data.content.nameStyle||(i._data.content.nameStyle=o),i.updateStyle(!0),i.virtualElement||i.isElementPreview||(c.Module.needToSave=!0,c.Module.load((function(){return i.updateStyle()}))),i}return C(t,e),Object.defineProperty(t.prototype,"buttonText",{get:function(){return this._data.content.name||""},set:function(e){this._data.content.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIcon",{get:function(){return this._data.content.image||null},set:function(e){this._data.content.image=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIconWidth",{get:function(){return this._data.content.imageWidth||null},set:function(e){this._data.content.imageWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIconHeight",{get:function(){return this._data.content.imageHeight||null},set:function(e){this._data.content.imageHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textStyle",{get:function(){return this._data.content.nameStyle||null},set:function(e){this._data.content.nameStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumOrderPriceProp",{get:function(){return c.Module.minOrderPrice},set:function(e){c.Module.minOrderPrice=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cartTermsConditionsProp",{get:function(){return c.Module.termsCheckboxEnabled},set:function(e){c.Module.termsCheckboxEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cartTermsConditionsTextProp",{get:function(){return c.Module.termsCheckboxText},set:function(e){c.Module.termsCheckboxText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CartRequireBillingInfoProp",{get:function(){return!1!==c.Module.billingShippingRequired},set:function(e){c.Module.billingShippingRequired=e},enumerable:!1,configurable:!0}),t.prototype.supportsAutoWidth=function(){return!0},t.prototype.supportsAutoHeight=function(){return!0},t.prototype.supportsPadding=function(){return!0},t.prototype.getDataDefaults=function(){return o.default.extend(e.prototype.getDataDefaults.call(this),{minWidth:22,minHeight:22})},t.prototype.getIcon=function(){return"fa fa-shopping-basket"},t.prototype.getUsedMediaGalleryItems=function(){var t=e.prototype.getUsedMediaGalleryItems.call(this);return"string"==typeof this._data.content.image&&""!==this._data.content.image&&"none"!==this._data.content.image&&t.push(this._data.content.image),t},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);for(var i in t.content={},this._data.content)t.content[i]=this._data.content[i];return t},t.prototype.onSwitchLanguage=function(t){e.prototype.onSwitchLanguage.call(this,t),this.updateStyle(!1,t)},t.prototype.updateStyle=function(t,i){var n=this;void 0===i&&(i=null),e.prototype.updateStyle.call(this,t,i),i=i||this.system.site.currSelLang,this.container.empty();var s=(0,o.default)("<div>").addClass("wb-store-cart"),r=(0,o.default)("<div>").addClass("wb-store-cart-wrp").appendTo(s),a=(0,o.default)("<div>"),c=(0,o.default)("<span>");if(this._data.content.nameStyle.css&&c.css(this._data.content.nameStyle.css),c.append((0,o.default)("<span>").text(__tr(this._data.content.name,i))).append("&nbsp;").append((0,o.default)('<span style="display: inline-block;">').text("(0)")),a.append(c),r.append(a),s.appendTo(this.container),"string"==typeof this._data.content.image){var u=(0,o.default)("<img>").attr({src:wb_builder.makeLocalUrl(this._data.content.image),alt:__tr(this._data.content.name,i),title:__tr(this._data.content.name,i)});this.buttonIconHeight&&u.css({height:this.buttonIconHeight}),this.buttonIconWidth&&u.css({width:this.buttonIconWidth}),a.prepend(u)}else this._data.content.image&&"object"==typeof this._data.content.image&&"faIcon"in this._data.content.image&&l.Service.mediaLibrary.updateFontAwesomeIconInfo(this._data.content.image,(function(e){var t,i="&#x"+e.faCharacter+";",s=(0,o.default)('<svg width="'+e.faWidth+'" height="'+e.faHeight+'" viewBox="0 0 '+e.faWidth+" "+e.faHeight+'" style="direction: ltr;" xmlns="http://www.w3.org/2000/svg"><text x="'+e.faXOffset+'" y="'+e.faBaseLine+'" font-size="'+e.faFontSize+'" fill="currentColor" style="font-family: FontAwesome;">'+i+"</text></svg>");n.buttonIconHeight&&s.css({height:n.buttonIconHeight}),n.buttonIconWidth&&s.css({width:n.buttonIconWidth}),n.textStyle.color&&(null===(t=n.textStyle.css)||void 0===t?void 0:t.color)&&s.css({color:n.textStyle.css.color}),a.prepend(s.css(wb_builder.site.rtl?"marginLeft":"marginRight",4))}));if(this.individualMargin){var d=this.individualMargin;this.container.css("padding",(d.paddingTop||0)+"px "+(d.paddingRight||0)+"px "+(d.paddingBottom||0)+"px "+(d.paddingLeft||0)+"px")}},t.prototype.comProperties=function(){var i=this,n=function(e){var t=e.advancedInvoiceDocNumModeOn.getValue();e.simpleInvDocNumCont.setVisible(!t),e.advancedInvDocNumCont.setVisible(t)},s=function(e){var i="",n=e.invoiceDocumentNumberSeries.getValue();null!==n&&""!==n&&(i+=n+" "),i+="{N:"+e.invoiceDocumentNumberLength.getValue()+"}",e.invoiceDocumentNumberFormat.setValue(i),e.simpleInvoiceDocNumPreview.setContent(t.getSimpleInvoiceDocumentNumberPreviewHtml(i)),e.advancedInvoiceDocNumPreview.setContent(t.getAdvancedInvoiceDocumentNumberPreviewHtml(i))},r=function(e){t.parseAdvancedInvoiceDocumentNumberFormat(e),e.simpleInvoiceDocNumPreview.setContent(t.getSimpleInvoiceDocumentNumberPreviewHtml(e.invoiceDocumentNumberFormat.getValue())),e.advancedInvoiceDocNumPreview.setContent(t.getAdvancedInvoiceDocumentNumberPreviewHtml(e.invoiceDocumentNumberFormat.getValue()))},a=e.prototype.comProperties.call(this,{size:{width:870},noOptionsTab:!0,tabs:[{children:[{type:"CheckBox",id:"billingShippingRequired",visible:!1},{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Payment Gateways")},{type:w,id:"paymentGatewayList"}]}]}]},{name:__("Invoices"),children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Seller details in invoice"),css:{marginTop:15},helpText:__('This information is added to "Seller" section of all invoices.')},{type:"CustomContainer",id:"companyInfoPlaceholder",css:{height:0,position:"relative"},content:'<div style="position: absolute; left: 0; top: 0; max-width: 100%; padding: 7px 13px; color: #999;"></div>',init:function(){var e=this.getElem().children();e.append((0,o.default)("<div/>").text(__("Company LLC"))),e.append((0,o.default)("<div/>").text(__("Code: 0000000000"))),e.append((0,o.default)("<div/>").text(__("Tax: 0000000000"))),e.append((0,o.default)("<div/>").text(__("Address: Empire State Building, 350 5th Ave, New York, NY 10118, USA"))),e.append((0,o.default)("<div/>").text(__("Bank account number: XX00 0000 0000 0000")))}},{type:"TextField",id:"companyInfo",textArea:!0,css:{height:200,"white-space":"pre","background-color":"transparent"},on:{"change focus blur paste cut keyup keydown touchstart touchend touchcancel":function(){a.companyInfoPlaceholder.setVisible(""===a.companyInfo.getValue())}}},{type:"Label",text:__("Text in invoice beginning"),css:{marginTop:15},helpText:__("Extra text to be added in the beginning of all invoices.")},{type:g.WYSIWYGControl,id:"textBeginning",textArea:!0,css:{height:60},config:{toolbar:[["Bold","Italic","Underline","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Languages"]]}},{type:"Label",text:__("Text in invoice ending"),css:{marginTop:15},helpText:__("Extra text to be added in the ending of all invoices.")},{type:g.WYSIWYGControl,id:"textEnding",textArea:!0,css:{height:60},config:{toolbar:[["Bold","Italic","Underline","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Languages"]]}},{type:"Label",text:__("Title phrase"),css:{marginTop:15},helpText:__("Phrase in title of all invoices")},{type:"MultilangTextField",id:"titlePhrase"},{type:"Label",text:__("Invoice logo"),css:{marginTop:15},helpText:__("The selected photo will be placed on the invoice")},{type:"ImageSelector",id:"invoiceLogo",mode:"image",fontAwesomeTab:!1},{type:"Label",text:__("Invoice document number"),css:{marginTop:15}},{type:"FlowLayout",spacing:30,children:[{type:"RadioBox",id:"advancedInvoiceDocNumModeOff",label:__("Simple"),inline:!0,group:"advancedInvoiceDocNumMode",change:n},{type:"RadioBox",id:"advancedInvoiceDocNumModeOn",label:__("Advanced"),inline:!0,group:"advancedInvoiceDocNumMode",change:n}]},{type:"VerticalLayout",id:"simpleInvDocNumCont",children:[{type:"HorizontalLayout",columnWeights:[3,3],columnWeightsSmall:[6,6],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Series"),css:{marginTop:15}},{type:"TextField",id:"invoiceDocumentNumberSeries",on:{keydown:function(e,t){"{"!==e.key&&"}"!==e.key||(e.preventDefault(),e.stopImmediatePropagation())},keyup:function(e,t){var i=t.invoiceDocumentNumberSeries.getValue();/[{}]/.test(i)&&t.invoiceDocumentNumberSeries.setValue(i.replace(/[{}]/g,"")),s(t)}}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Number length"),css:{marginTop:15}},{type:y.SizeSelector,id:"invoiceDocumentNumberLength",min:1,max:20,step:1,hideSpinner:!0,change:s}]}]},{type:"CustomContainer",id:"simpleInvoiceDocNumPreview",styleClass:"alert alert-warning",css:{"font-size":"12px",marginTop:15},content:t.getSimpleInvoiceDocumentNumberPreviewHtml(c.Module.invoiceDocumentNumberFormat)}]},{type:"VerticalLayout",id:"advancedInvDocNumCont",children:[{type:"Label",text:__("Format"),css:{marginTop:15}},{type:"TextField",id:"invoiceDocumentNumberFormat",on:{keyup:function(e,t){r(t)}}},{type:"HorizontalLayout",columnWeights:[6,6],columnWeightsSmall:[12,12],children:[{type:"CustomContainer",styleClass:"alert alert-info",css:{"font-size":"12px",overflow:"auto",height:340,marginTop:15},content:"<strong>"+__("Supported variables")+"</strong>:<br />{YYYY} - "+__("4 digit year number")+"<br />{YY} - "+__("2 digit year number")+"<br />{MM} - "+__("2 digit month number")+"<br />{DD} - "+__("2 digit day of month number")+"<br />{N} - "+__("counter value of current series")+"<br />{RN} - "+__("counter value of current series for date represented by %s variables").replace("%s","{YYYY}, {YY}, {MM}, {DD}")+"<br />{N:#} - "+__("zero padded value of %s. Replace %s with number of digits the counter value should have to produce fixed length document numbers.").replace("%s","{N}").replace("%s",'"#"')+"<br />{RN:#} - "+__("zero padded value of %s. Replace %s with number of digits the counter value should have to produce fixed length document numbers.").replace("%s","{RN}").replace("%s",'"#"')+"<br /><br /><strong>"+__("Please note that different invoice series and document number formats have separate counters starting from %s.").replace("%s","1")+"</strong>"},{type:"CustomContainer",id:"advancedInvoiceDocNumPreview",styleClass:"alert alert-warning",css:{"font-size":"12px",overflow:"auto",height:340,marginTop:15},content:t.getAdvancedInvoiceDocumentNumberPreviewHtml(c.Module.invoiceDocumentNumberFormat)}]}]}]}]},{name:__("Style"),hideTab:!0,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Name Style")},{type:f.TextControl,id:"nameStyle",horizontal:!0,noAlign:!0}]}]},{name:__("Advanced"),hideTab:!0,children:[{type:"VerticalLayout",children:[{type:"CheckBox",id:"termsCheckboxEnabled",label:__("Require customer to agree to terms and conditions")},{type:g.WYSIWYGControl,id:"termsCheckboxText",css:{height:100,marginTop:10},config:{forcePasteAsPlainText:!0}},{type:"Label",text:__("Minimum order price"),id:"minOrderPriceLabel",css:{marginTop:15}},{type:y.SizeSelector,id:"minOrderPrice",min:0,precision:2,step:1,noFixedWidth:!0,css:{width:150}}]}]}],callbackFunc:function(e){i.textStyle=e.nameStyle.getValue(),c.Module.paymentGateways=e.paymentGatewayList.getValue(),c.Module.paymentGateways.length>0&&(c.Module.billingShippingRequired=e.billingShippingRequired.getValue()),c.Module.advancedInvoiceDocNumMode=e.advancedInvoiceDocNumModeOn.getValue(),c.Module.invoiceDocumentNumberFormat=e.invoiceDocumentNumberFormat.getValue(),c.Module.companyInfo=e.companyInfo.getValue(),c.Module.invoiceTextBeginning=e.textBeginning.getValue(),c.Module.invoiceTextEnding=e.textEnding.getValue(),c.Module.invoiceTitlePhrase=e.titlePhrase.getValue(),c.Module.invoiceLogo=e.invoiceLogo.getValue(),c.Module.companyInfo=e.companyInfo.getValue(),c.Module.termsCheckboxEnabled=e.termsCheckboxEnabled.getValue(),c.Module.termsCheckboxText=e.termsCheckboxText.getValue(),c.Module.minOrderPrice=e.minOrderPrice.getValue(),i.updateStyle()}});return a.paymentGatewayList.update(),a.nameStyle.setValue(this.textStyle),a.billingShippingRequired.setValue(!1!==c.Module.billingShippingRequired),a.paymentGatewayList.setValue(c.Module.paymentGateways),a.advancedInvoiceDocNumModeOff.setValue(!c.Module.advancedInvoiceDocNumMode),a.advancedInvoiceDocNumModeOn.setValue(c.Module.advancedInvoiceDocNumMode),a.invoiceDocumentNumberFormat.setValue(c.Module.invoiceDocumentNumberFormat),a.companyInfo.setValue(c.Module.companyInfo),a.textBeginning.setValue(c.Module.invoiceTextBeginning),a.textEnding.setValue(c.Module.invoiceTextEnding),a.titlePhrase.setValue(c.Module.invoiceTitlePhrase),a.invoiceLogo.setValue(c.Module.invoiceLogo),a.companyInfoPlaceholder.setVisible(""===a.companyInfo.getValue()),a.termsCheckboxEnabled.setValue(c.Module.termsCheckboxEnabled),a.termsCheckboxText.setValue(c.Module.termsCheckboxText),a.minOrderPrice.setValue(c.Module.minOrderPrice),a.minOrderPriceLabel.setText(__("Minimum order price")+(c.Module.currency?" ("+c.Module.currency.code+")":"")),a.simpleInvDocNumCont.setVisible(!c.Module.advancedInvoiceDocNumMode),a.advancedInvDocNumCont.setVisible(c.Module.advancedInvoiceDocNumMode),t.parseAdvancedInvoiceDocumentNumberFormat(a),r(a),a},t.prototype.getUsedFonts=function(){var t=e.prototype.getUsedFonts.call(this);return this._data.content&&this._data.content.nameStyle&&this._data.content.nameStyle.font&&""!==this._data.content.nameStyle.font&&t.push(this._data.content.nameStyle.font),t},t.parseAdvancedInvoiceDocumentNumberFormat=function(e){var t=e.invoiceDocumentNumberFormat.getValue().match(/^([^{}]+ |){N:(\d+)}$/i);t?(e.advancedInvoiceDocNumModeOff.setEnabled(!0),e.invoiceDocumentNumberSeries.setValue(""===t[1]?"":t[1].substring(0,t[1].length-1)),e.invoiceDocumentNumberLength.setValue(t[2])):e.advancedInvoiceDocNumModeOff.setEnabled(!1)},t.getSimpleInvoiceDocumentNumberPreviewHtml=function(e){var i="<strong>"+__("Preview invoice document numbers")+"</strong>:<br />";return i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s","2017","17","11","22",1,1,1,1),i+="...<br />",i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s","2017","17","11","22",17,17,17,17),(i+="...<br />")+t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s","2017","17","11","22",2103,2103,2103,2103)},t.getAdvancedInvoiceDocumentNumberPreviewHtml=function(e){var i="<strong>"+__("Preview invoice document numbers")+"</strong>:<br />",n=(new Date).getFullYear(),o=n+"",s=n+1+"",r=(o+"").substring(2),a=(s+"").substring(2);return i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),o,r,"11","22",1,1,1,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),o,r,"11","22",2,2,2,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),o,r,"11","27",3,3,3,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),o,r,"11","27",4,4,4,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),o,r,"12","15",5,5,1,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),o,r,"12","15",6,6,2,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),o,r,"12","19",7,7,3,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),o,r,"12","19",8,8,4,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),s,a,"01","01",9,1,1,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),s,a,"01","01",10,2,2,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),s,a,"01","09",11,3,3,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),s,a,"01","09",12,4,4,2),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),s,a,"02","07",13,5,1,1),i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),s,a,"02","07",14,6,2,2),(i+=t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("first invoice on %s").replace("%s","%2$s"),s,a,"02","14",15,7,3,1))+t.getInvoiceDocumentNumberPreviewLineHtml(e,"%1$s - "+__("second invoice on %s").replace("%s","%2$s"),s,a,"02","14",16,8,4,2)},t.getInvoiceDocumentNumberPreviewLineHtml=function(e,i,n,o,s,r,a,l,c,u){return i.replace("%1$s",t.getDocumentNumber(e,n,o,s,r,a,l,c,u)).replace("%2$s",n+"-"+s+"-"+r)+"<br />"},t.getDocumentNumber=function(e,t,i,n,o,s,r,a,l){var c,u=s;/{DD}/i.test(e)?u=l:/{MM}/i.test(e)?u=a:/{(YY|YYYY)}/i.test(e)&&(u=r),e=e.replace(/{YYYY}/gi,t).replace(/{YY}/gi,i).replace(/{MM}/gi,n).replace(/{DD}/gi,o).replace(/{N}/gi,s.toString()).replace(/{RN}/gi,u.toString());for(var d=/{N:(\d+)}/gi;c=d.exec(e);){for(var h=s.toString(),p=parseInt(c[1]),m=h.length;p>m;p--)h="0"+h;e=e.replace(c[0],h)}for(d=/{RN:(\d+)}/gi;c=d.exec(e);){for(h=u.toString(),p=parseInt(c[1]),m=h.length;p>m;p--)h="0"+h;e=e.replace(c[0],h)}return e},t.prototype.registerProperties=function(){e.prototype.registerProperties.call(this),this.registerProperty({name:"morePropertiesButton",type:v.PropertyType.StoreCartMoreProperties,uiComponentOptions:{click:function(){this.comProperties()}}}),this.registerProperty({name:"CartCheckOrdersButton",type:v.PropertyType.StoreCartCheckOrdersButton,uiComponentOptions:{click:function(){(0,_.viewOrders)(wb_builder)}}}),this.registerProperty({name:"CartDestinationZonesButton",type:v.PropertyType.StoreCartDestinationZonesButton,uiComponentOptions:{click:function(){return(0,h.open)()}}}),this.registerProperty({name:"CartTaxRulesButton",type:v.PropertyType.StoreCartTaxRulesButton,uiComponentOptions:{click:function(){return(0,p.open)()}}}),this.registerProperty({name:"CartShippingMethodsButton",type:v.PropertyType.StoreCartShippingMethodsButton,uiComponentOptions:{click:function(){return(0,m.open)()}}}),this.registerProperty({name:"minimumOrderPriceProp",type:v.PropertyType.StoreCartMinimumOrderPrice,uiComponentOptions:function(){return{units:c.Module.currency?c.Module.currency.code:""}}}),this.registerProperty({name:"CartRequireBillingInfoProp",type:v.PropertyType.StoreCartRequireBillingInfo}),this.registerProperty({name:"cartTermsConditionsProp",type:v.PropertyType.StoreCartTermsConditions}),this.registerProperty({name:"cartTermsConditionsTextProp",type:v.PropertyType.StoreCartTermsConditionsText,dependencies:["cartTermsConditionsProp"],uiComponentOptions:function(){return{visible:this.cartTermsConditionsProp}}}),this.registerProperty({name:"buttonText",type:v.PropertyType.StoreCartButtonText}),this.registerProperty({name:"buttonIcon",type:v.PropertyType.StoreCartButtonIcon,uiComponentOptions:function(){return{fixedWidth:90}}});var t=function(e,t,i){var n=0;"fixedValue"in t?(e=this.getWidthInPixels(),"suffix"in i&&""===i.suffix&&(n=-1)):"suffix"in i&&""===i.suffix&&(n=1);var o=this.getParent();if(o){var s=o.getWidthInPixels();s&&(0===n?e=100*e/s:1===n&&(e=e*s/100))}return e},i=function(e,t,i){var n=0;"fixedValue"in t?(e=this.getHeightInPixels(),"suffix"in i&&""===i.suffix&&(n=-1)):"suffix"in i&&""===i.suffix&&(n=1);var o=this.getParent();if(o){var s=o.getHeightInPixels();s&&(0===n?e=100*e/s:1===n&&(e=e*s/100))}return e};this.registerProperty({name:"buttonIconWidth",type:v.PropertyType.StoreCartButtonIconWidth,uiComponentOptions:function(){var e=!0;if(this.elem.hasClass("wb-ext-resizable")&&!this.elem.resizableExt("option","disabled")){var i=this.elem.resizableExt("option","handles").split(/,\ ?/);for(var n in i){var o=i[n];"e"!==o&&"se"!==o&&"sw"!==o&&"w"!==o&&"ne"!==o&&"nw"!==o||(e=!1)}}var s=this.getSupportedSizeUnits();return{enabled:!e,helpText:this.isAutoSizeEnabled&&"auto"!=this.width?"warn:"+__("Allow to adjust size automatically")+": "+__("Active"):"",min:1,precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:s.sizeW,unitConverter:t.bind(this),unitsDropdownAlignment:"right"}}}),this.registerProperty({name:"buttonIconHeight",type:v.PropertyType.StoreCartButtonIconHeight,uiComponentOptions:function(){var e=!0;if(this.elem.hasClass("wb-ext-resizable")&&!this.elem.resizableExt("option","disabled")){var t=this.elem.resizableExt("option","handles").split(/,\ ?/);for(var n in t){var o=t[n];"s"!==o&&"se"!==o&&"sw"!==o&&"n"!==o&&"ne"!==o&&"nw"!==o||(e=!1)}}return{enabled:!e,min:1,precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:this.getSupportedSizeUnits().sizeH,unitConverter:i.bind(this),unitsDropdownAlignment:"right",css:{marginTop:"8px"}}}}),this.registerProperty({name:"textStyle",type:v.PropertyType.TextStyleCombined,uiComponentOptions:{needLineHeight:!1,noAlign:!0}})},t}(s.Element);a.ElementRegister.registerClass("StoreCart",T)},"./store/StoreCategory.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCategory:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.parentId=0,i.name="",i.description="",i.image=null,i.viewType="thumbs",i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./store/StoreCategoryDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCategoryDialog:function(){return p}});var n,o=i("./WB_PropertyDialog.class.js"),s=i.n(o),r=i("./Tree.ts"),a=i("./store/StoreModule.ts"),l=i("./store/StoreCategory.ts"),c=i("./UniqueIdentifier.ts"),u=i("./BuilderEvent.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.buildInit=function(t,i){t.itemType=l.StoreCategory,t.select=this.onSelect,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){e.name=t.name.getValue(),t.viewTypeThumbs.getValue()&&(e.viewType="thumbs"),t.viewTypeTable.getValue()&&(e.viewType="table"),t.description&&(e.description=t.description.getValue()),t.image&&(e.image=t.image.getValue())},t.prototype.getItemValue=function(e,t){e||(e=new l.StoreCategory),t.name.setValue(e&&e.name?e.name:""),t.viewTypeThumbs.setValue("thumbs"==e.viewType),t.viewTypeTable.setValue("table"==e.viewType),t.description&&t.description.setValue(e.description?e.description:""),t.image&&t.image.setValue(e.image)},t.prototype.onSelect=function(e,t){var i=this.getLastSelected();i&&this.setItemValue(i,e),this.getItemValue(t,e),e.name.setModified(!1)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(i),e.name.focus()},t}(r.Tree),p=function(e){function t(t){var i=e.call(this,"%inherit%")||this;return i.saveFunc=t,e.prototype.__construct.call(i,__("Properties"),void 0,void 0,void 0,{noScroll:!0,tabs:[{children:[{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:h,id:"tree",css:{height:328},listHeight:230},{type:"VerticalLayout",spacing:15,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Name")},{type:"MultilangTextField",id:"name"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("List View Type")},{type:"FlowLayout",children:[{type:"RadioBox",id:"viewTypeThumbs",label:__("Thumbs"),group:"viewType"},{type:"RadioBox",id:"viewTypeTable",label:__("Table"),group:"viewType"}]}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){i.applyData()}}]}),i}return d(t,e),t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.tree.selectFirst(),a.Module.categories=c.UniqueIdentifier.assignIds(this.fields.tree.getValue()),this.setVisible(!1),"function"==typeof this.saveFunc&&this.saveFunc.call(this);var e=new u.StoreCategoriesChangedBuilderEvent;u.GlobalEvents.triggerEvent("store.categories.changed",e)},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.fields.tree.setValue(a.Module.categories),this.fields.tree.selectFirst(),e.prototype.setVisible.call(this,t,i,n)},t}(s())},"./store/StoreCountry.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCountry:function(){return a},getCountryList:function(){return c}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./core/BuilderConfig.ts"),r=i("./KindaPromise.ts"),a=function(e,t,i){void 0===i&&(i=0),this.code=e,this.name=t,this.parentId=0,this.id=e,this.parentId=i},l=null;function c(){return l?new r.KindaPromise((function(e,t){l?e(l):t(null)})):new r.KindaPromise((function(e,t){o().getJSON(s.wbConfig.lnBaseUrl+"store/country-list").done((function(t){l=[];for(var i=0,n=t;i<n.length;i++){var o=n[i];l.push(new a(o.code,o.name));for(var s=0,r=o.regions;s<r.length;s++){var c=r[s];l.push(new a(o.code+"-"+c.code,c.name,o.code))}}e(l)})).fail((function(){return t(null)}))}))}},"./store/StoreCustomFieldContainer.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCustomFieldContainer:function(){return C}});var n,o=i("./Service.ts"),s=i("./UIContainer.ts"),r=i("./VerticalLayout.ts"),a=i("./HorizontalLayout.ts"),l=i("./FlowLayout.ts"),c=i("./CheckBox.js"),u=i.n(c),d=i("./RadioBox.js"),h=i.n(d),p=i("./store/StoreModule.ts"),m=i("./store/StoreItemFieldType.ts"),g=i("./store/StoreItem.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(e){function t(){var t=e.call(this)||this;return t.options=[],t.optionElements=[],t.setSpacing(15),t._elem.addClass("wb-cb-group"),t}return f(t,e),t.prototype.buildInit=function(e,t){if(e.options){this.options=e.options;for(var i=0;i<this.options.length;i++)this.optionElements.push(new(u())(__tr(this.options[i].name),!1,!0)),this.addChild(this.optionElements[i])}},t.prototype.setValue=function(e){var t={};if(e instanceof Array)for(var i=0;i<e.length;i++)t["#"+e[i]]=!0;else e&&"object"==typeof e&&(t=e);for(i=0;i<this.options.length;i++){var n="#"+this.options[i].id;this.optionElements[i].setValue(n in t&&t[n])}},t.prototype.getValue=function(){for(var e=[],t=0;t<this.options.length;t++)this.optionElements[t].getValue()&&e.push(this.options[t].id);return e},t}(l.FlowLayout),b=function(e){function t(){var t=e.call(this)||this;return t.options=[],t.optionElements=[],t.setSpacing(15),t}return f(t,e),t.prototype.buildInit=function(e,i){if(e.options){this.options=e.options,t.groupIdx++;for(var n="store_custom_fields"+t.groupIdx,o=0;o<this.options.length;o++)this.optionElements.push(new(h())(__tr(this.options[o].name),!1,n,!0)),this.addChild(this.optionElements[o])}},t.prototype.setValue=function(e){var t={};if(e instanceof Array)for(var i=0;i<e.length;i++)t["#"+e[i]]=!0;else e&&"object"==typeof e&&(t=e);for(i=0;i<this.options.length;i++){var n="#"+this.options[i].id;this.optionElements[i].setValue(n in t&&t[n])}},t.prototype.getValue=function(){for(var e=[],t=0;t<this.options.length;t++)this.optionElements[t].getValue()&&e.push(this.options[t].id);return e},t.groupIdx=0,t}(l.FlowLayout),v=function(){},_=function(e){function t(t,i,n){var s,r=e.call(this)||this;switch(r.customField=t,r.fields=new v,r.isTranslatable=!0,r.isTranslatable=n.isTranslatable,n.type){case m.StoreItemFieldType.TYPE_INPUT:case m.StoreItemFieldType.TYPE_TEXTAREA:s=r.isTranslatable?{type:"MultilangTextField",id:"value",textArea:n.type===m.StoreItemFieldType.TYPE_TEXTAREA}:{type:"TextField",id:"value",textArea:n.type===m.StoreItemFieldType.TYPE_TEXTAREA};break;case m.StoreItemFieldType.TYPE_CHECKBOX:s={type:y,id:"value",options:n.options};break;case m.StoreItemFieldType.TYPE_RADIOBOX:s={type:b,id:"value",options:n.options};break;case m.StoreItemFieldType.TYPE_DROPDOWN:var a=n.options.map((function(e){return{id:e.id,name:__tr(e.name)}}));n.hasEmptyOption&&a.unshift({id:0,name:""}),s={type:"DropdownBox",id:"value",options:a}}return o.Service.UIBuilder.buildLayout({type:"VerticalLayout",children:[{type:"Label",html:__tr(i.name)+(i.isHidden?'&nbsp;<span class="glyphicon glyphicon-eye-close"></span>':"")},s]},r,r.fields),r.load(),r}return f(t,e),t.prototype.load=function(){this.fields.value&&this.fields.value.setValue(this.isTranslatable||this.customField.value instanceof Array?this.customField.value:__tr(this.customField.value))},t.prototype.store=function(){this.fields.value&&(this.customField.value=this.fields.value.getValue())},t}(s.UIContainer),C=function(e){function t(){var t=e.call(this)||this;return t.customFieldElements=[],t.itemTypeId=0,t.setSpacing(15),t}return f(t,e),t.prototype.buildInit=function(e,t){},t.prototype.reload=function(){var e=this.getValue();this.setValue(e,this.itemTypeId)},t.prototype.getValue=function(){return this.customFieldElements.map((function(e){return e.store(),e.customField}))},t.prototype.setValue=function(e,t){this.itemTypeId=t,this.removeAllChildren(),this.customFieldElements=[];for(var i={},n=0;n<e.length;n++)i["#"+e[n].fieldId]=e[n];var o={};for(n=0;n<p.Module.itemFieldTypes.length;n++)o["#"+p.Module.itemFieldTypes[n].id]=p.Module.itemFieldTypes[n];var s=null;for(n=0;n<p.Module.itemTypes.length;n++){var r=p.Module.itemTypes[n];if(r.id===t){for(var l=0;l<r.fields.length;l++){l%2==0&&(s=new a.HorizontalLayout,this.addChild(s));var c="#"+r.fields[l].id,u="#"+r.fields[l].type;this.customFieldElements.push(new _(c in i?i[c]:new g.StoreItemCustomFieldValue({fieldId:r.fields[l].id}),r.fields[l],u in o?o[u]:new m.StoreItemFieldType({id:1,name:__("Text Field"),type:m.StoreItemFieldType.TYPE_INPUT,isStatic:!0}))),s&&s.addChild(this.customFieldElements[l])}break}}},t}(r.VerticalLayout)},"./store/StoreDestinationZone.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreDestinationZone:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.countries=[],i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./store/StoreDestinationZoneDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreDestinationZoneDialog:function(){return E},addSaveListener:function(){return C},open:function(){return w}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./List.ts"),a=i("./TextField.ts"),l=i("./DropdownBox.ts"),c=i("./WB_PropertyDialog.class.js"),u=i.n(c),d=i("./UniqueIdentifier.ts"),h=i("./store/StoreDestinationZone.ts"),p=i("./store/StoreCountry.ts"),m=i("./store/StoreModule.ts"),g=i("./HorizontalLayout.ts"),f=i("./VerticalLayout.ts"),y=i("./Label.ts"),b=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),v=null,_=[];function C(e){_.push(e)}function w(){v||(v=new E),v.setVisible(!0)}var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.buildInit=function(t,i){t.itemType=h.StoreDestinationZone,t.editable=!0,t.select=this.onSelect,t.selectNone=this.onSelectNone,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){e.name=t.name.getValue(),t.countriesLoaded&&(e.countries=t.countries.getValue(!0))},t.prototype.getItemValue=function(e,t){t.name.setValue(e.name?e.name:""),t.countries.setValue(e.countries,!0)},t.prototype.onSelect=function(e,t){var i;(i=this.getLastSelected())&&this.setItemValue(i,e),this.getItemValue(t,e),e.editPanel.setVisible(!!t)},t.prototype.onSelectNone=function(e){e.editPanel.setVisible(!1)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(s()(i))},t}(r.List),E=function(e){function t(){var t=e.call(this,__("Destination Zones"),{noScroll:!0,tabs:[{children:[{type:g.HorizontalLayout,columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:T,id:"list",css:{height:328},listHeight:250},{type:f.VerticalLayout,id:"editPanel",spacing:15,children:[{type:f.VerticalLayout,children:[{type:y.Label,text:__("Item Name")},{type:a.TextField,id:"name"}]},{type:f.VerticalLayout,children:[{type:y.Label,text:__("Countries")},{type:l.DropdownBox,id:"countries",multiselect:!0,addSelectAll:!0,multilevel:!0,parentMustBeSelected:!0,init:function(){(0,p.getCountryList)().then((function(e){t.fields.countries.reload(e);var i=t.fields.list.getLastSelected();i&&t.fields.list.onSelect(t.fields,i),t.fields.countriesLoaded=!0}))}}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){t.applyData()}}]})||this;return t.fields.countriesLoaded=!1,t}return b(t,e),t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.list.selectFirst(),m.Module.destinationZones=d.UniqueIdentifier.assignIds(this.fields.list.getValue()),this.setVisible(!1);for(var e=0,t=_;e<t.length;e++){var i=t[e];"function"==typeof i&&i.call(this)}},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t&&!n&&(this.fields.list.setValue(m.Module.destinationZones),this.fields.list.selectFirst()),e.prototype.setVisible.call(this,t,i,n)},t}(u())},"./store/StoreItem.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItem:function(){return l},StoreItemCustomFieldValue:function(){return a}});var n,o=i("./Serializable.ts"),s=i("./store/StoreModule.ts"),r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.fieldId=0,i.value=null,i.deserialize(t),i}return r(t,e),t}(o.Serializable),l=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.description="",i.price=0,i.weight=0,i.quantity=0,i.sku="",i.image=null,i.altImages=[],i.itemType=0,i.categories=[],i.isHidden=!1,i.customFields=[],i.dateTimeCreated=null,i.dateTimeModified=null,i.seoTitle="",i.seoDescription="",i.seoKeywords="",i.seoAlias="",i.deserialize(t),i}return r(t,e),t.prototype.buildSearchBlob=function(){return s.Module.buildSearchBlob(this)},t}(o.Serializable)},"./store/StoreItemFieldType.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItemFieldType:function(){return a},StoreItemFieldTypeOption:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.deserialize(t),i}return s(t,e),t}(o.Serializable),a=function(e){function t(i){void 0===i&&(i=null);var n=e.call(this)||this;return n.id=0,n.name="",n.type=t.TYPE_INPUT,n.typeId=0,n.options=[],n.isTranslatable=!0,n.hasEmptyOption=!1,n.isStatic=!1,n.deserialize(i),n}return s(t,e),t.buildStaticTypes=function(){return[new t({id:1,name:__("Text Field"),type:t.TYPE_INPUT,isStatic:!0}),new t({id:2,name:__("Text Area"),type:t.TYPE_TEXTAREA,isStatic:!0}),new t({id:3,name:__("Check Box"),type:t.TYPE_CHECKBOX,isStatic:!0}),new t({id:4,name:__("Radio Box"),type:t.TYPE_RADIOBOX,isStatic:!0}),new t({id:5,name:__("Dropdown Box"),type:t.TYPE_DROPDOWN,isStatic:!0})]},t.hasSupportForOptions=function(e){return e===t.TYPE_CHECKBOX||e===t.TYPE_RADIOBOX||e===t.TYPE_DROPDOWN},t.TYPE_INPUT="input",t.TYPE_TEXTAREA="textarea",t.TYPE_CHECKBOX="checkbox",t.TYPE_RADIOBOX="radiobox",t.TYPE_DROPDOWN="dropdown",t}(o.Serializable)},"./store/StoreItemFieldTypeDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItemFieldTypeDialog:function(){return x}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./WB_PropertyDialog.class.js"),l=i.n(a),c=i("./UIComponent.ts"),u=i("./UIContainer.ts"),d=i("./VerticalLayout.ts"),h=i("./UIButton.ts"),p=i("./List.ts"),m=i("./AlertBox.js"),g=i.n(m),f=i("./store/StoreModule.ts"),y=i("./store/StoreItemFieldType.ts"),b=i("./UniqueIdentifier.ts"),v=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function _(e,t){e.translatable.setVisible(("input"===t||"textarea"===t)&&wb_builder.site.languages.length>0),e.hasEmptyOption.setVisible("dropdown"===t),e.optionsBlock.setVisible(y.StoreItemFieldType.hasSupportForOptions(t)),e.settingsBlock.setVisible("input"===t||"textarea"===t||"dropdown"===t)}var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.buildInit=function(e,t){var i=this;this.fields=t;var n=this.getElem();this.css({overflow:"hidden",position:"relative"}),this.on("mousemove",(function(e){if(e){var t=n.offset(),o=s()(i.filePicker).width(),r=s()(i.filePicker).height(),a=e.pageX-t.left-o/2,l=e.pageY-t.top-r/2;s()(i.filePicker).css({left:a,top:l})}}));var o=new h.UIButton(__("Import")+" (CSV)",h.UIButton.STYLE_LINK,"glyphicon glyphicon-import");o.addClass("btn-sm"),n.append(o.getElem()),this.filePicker=s()("<input>").attr({type:"file",size:1}).css({width:100,diplay:"block",position:"absolute",cursor:"pointer",opacity:0,filter:"alpha(opacity=0)",left:0,top:0,zIndex:6}).on("change",(function(){i.filePicker.files&&i.onFileSelect(i.filePicker.files)})).get(0),n.append(this.filePicker)},t.prototype.onFileSelect=function(e){var t=this;if(!(e.length<=0)){var i=new FileReader;i.onload=function(){for(var e=null,n=0,o=i.result?t.parseCSV(i.result):[];n<o.length;n++){var s=o[n];if(e)s.length>0&&""!==s[0]&&t.fields.options.addOption(new y.StoreItemFieldTypeOption({name:s[0]}));else if((e=s).length<1){console.log("Warning: file has no columns");break}}},i.readAsText(e[0])}},t.prototype.parseCSV=function(e){for(var t,i,n=[],o=!1,s="",r=[],a=function(){r.push(s),s=""},l=function(){s.length>0&&a(),r.length>0&&n.push(r),r=[],o=!1},c=0;c<e.length;c++)t=e[c],i=c+1<e.length?e[c+1]:null,","!==t||o?"\n"===t||"\r"===t?l():'"'===t?0!=s.length||o?o&&'"'===i?(c++,s+=t):o?o=!1:s+=t:o=!0:s+=t:a();return l(),n},t.isSupported=function(){return"FileList"in window&&"File"in window&&"FileReader"in window},t}(c.UIComponent),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.buildInit=function(t,i){t.itemType=y.StoreItemFieldType,t.editable=!0,t.select=this.onSelect,t.selectNone=this.onSelectNone,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){var i=t.type.getSelectedItem();e.name=t.name.getValue(),e.type=i?i.getOriginal().type:"",e.typeId=t.type.getValue(),e.options=t.options.getValue(),e.isTranslatable=t.translatable.getValue(),e.hasEmptyOption=t.hasEmptyOption.getValue()},t.prototype.getItemValue=function(e,t){t.name.setValue(e.name?e.name:""),t.type.setValue(e.typeId),t.options.setValue(e.options),t.translatable.setValue(e.isTranslatable),t.hasEmptyOption.setValue(e.hasEmptyOption),_(t,e.type)},t.prototype.onSelect=function(e,t){e.emptyInfo.setVisible(!1),e.fieldsBox.setVisible(!0);var i=this.getLastSelected();i&&this.setItemValue(i,e),this.getItemValue(t,e)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(s()(i))},t.prototype.onSelectNone=function(e){e.fieldsBox.setVisible(!1),e.emptyInfo.setVisible(!0)},t}(p.List),T=function(){},E=function(e){function t(t,i){var n=e.call(this)||this;return n.option=t,n.fields=new T,r.Service.UIBuilder.buildLayout({type:"FlowLayout",css:{marginTop:10},verticalAlign:"middle",children:[{type:"CustomContainer",tag:"span",styleClass:"glyphicon glyphicon-resize-vertical",css:{cursor:"move"}},{type:"MultilangTextField",id:"name",placeholder:__("Item Name"),css:{width:240}},{type:"Button",icon:"glyphicon glyphicon-remove",attr:{title:__("Remove")},click:function(){return i.removeOption(n)}}]},n,n.fields),n.load(),n}return v(t,e),t.prototype.load=function(){this.fields.name.setValue(this.option.name)},t.prototype.store=function(){this.option.name=this.fields.name.getValue()},t}(u.UIContainer),I=function(e){function t(){var t=e.call(this)||this;return t.optionElements=[],t.dragging=null,t.getElem().sortable({distance:3,axis:"y",items:"> div",cursor:"move",start:function(e,i){return t.onSortStart(e,i)},stop:function(e,i){return t.onSortStop(e,i)}}),t}return v(t,e),t.prototype.buildInit=function(e,t){},t.prototype.onSortStart=function(e,t){this.dragging={idx:t.item.index()},t.placeholder.css({marginBottom:20})},t.prototype.onSortStop=function(e,t){var i=t.item.index();if(this.dragging&&this.dragging.idx!=i){var n=this.optionElements.splice(this.dragging.idx,1);this.optionElements.splice(i,0,n[0]),this.dragging=null}},t.prototype.setValue=function(e){this.removeAllChildren(),this.optionElements=[];for(var t=0;t<e.length;t++)this.addOption(e[t])},t.prototype.getValue=function(){return this.optionElements.map((function(e){return e.store(),e.option}))},t.prototype.addOption=function(e){var t=new E(e,this);this.optionElements.push(t),this.addChild(t)},t.prototype.removeOption=function(e){var t=this.optionElements.indexOf(e);if(t>=0){var i=this.optionElements.splice(t,1);this.removeChild(i[0])}},t.prototype.newOption=function(){this.addOption(new y.StoreItemFieldTypeOption)},t}(d.VerticalLayout),x=function(e){function t(t){var i=e.call(this,"%inherit%")||this;return i.saveFunc=t,e.prototype.__construct.call(i,__("Field Types"),void 0,void 0,void 0,{noScroll:!0,tabs:[{children:[{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:w,id:"tree",css:{height:328},listHeight:250},{type:"VerticalLayout",children:[{type:"VerticalLayout",id:"fieldsBox",spacing:15,children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Name")},{type:"TextField",id:"name"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Type")},{type:"DropdownBox",id:"type",options:y.StoreItemFieldType.buildStaticTypes(),change:function(e){var t=this.getSelectedItem(),i=t?t.getOriginal():null;_(e,i?i.type:"")}}]}]},{type:"VerticalLayout",id:"settingsBlock",children:[{type:"FlowLayout",children:[{type:"CheckBox",label:__("Translatable"),helpText:__("Check this option if multilingual field is needed"),id:"translatable",visible:!1},{type:"CheckBox",label:__("Has empty option"),id:"hasEmptyOption"}]}]},{type:"VerticalLayout",id:"optionsBlock",children:[{type:"FlowLayout",verticalAlign:"middle",children:[{type:"Label",text:__("Options"),css:{marginBottom:1}},{type:"Button",text:__("Add Option"),buttonStyle:h.UIButton.STYLE_LINK,icon:"glyphicon glyphicon-plus",styleClass:"btn-sm",click:function(e,t){t.options.newOption()}},{type:C,ignore:!C.isSupported()}]},{type:I,id:"options"}]}]},{type:"AlertBox",id:"emptyInfo",style:g().STYLE_INFO,text:__("No items selected"),visible:!1}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){i.applyData()}}]}),i}return v(t,e),t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.tree.selectFirst(),f.Module.itemFieldTypes=b.UniqueIdentifier.assignIds(y.StoreItemFieldType.buildStaticTypes().concat(this.fields.tree.getValue()));for(var e=0;e<f.Module.itemFieldTypes.length;e++)b.UniqueIdentifier.assignIds(f.Module.itemFieldTypes[e].options);this.setVisible(!1),"function"==typeof this.saveFunc&&this.saveFunc.call(this)},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),!t||i||n||(this.fields.tree.setValue(f.Module.itemFieldTypes.filter((function(e){return!e.isStatic}))),this.fields.tree.selectFirst()),e.prototype.setVisible.call(this,t,i,n)},t}(l())},"./store/StoreItemType.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItemType:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.fields=[],i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./store/StoreItemTypeDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItemTypeDialog:function(){return S}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./Service.ts"),a=i("./WB_PropertyDialog.class.js"),l=i.n(a),c=i("./UIContainer.ts"),u=i("./VerticalLayout.ts"),d=i("./UIButton.ts"),h=i("./List.ts"),p=i("./DropdownBox.ts"),m=i("./store/StoreModule.ts"),g=i("./store/StoreItemType.ts"),f=i("./store/StoreItemTypeField.ts"),y=i("./store/StoreItemFieldType.ts"),b=i("./store/StoreItemFieldTypeDialog.ts"),v=i("./UniqueIdentifier.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _(t,e),t.prototype.buildInit=function(t,i){t.itemType=g.StoreItemType,t.editable=!0,t.select=this.onSelect,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){e.name=t.name.getValue(),e.fields=t.fields.getValue()},t.prototype.getItemValue=function(e,t){t.name.setValue(e.name?e.name:""),t.fields.setValue(e.fields)},t.prototype.onSelect=function(e,t){var i;(i=this.getLastSelected())&&this.setItemValue(i,e),this.getItemValue(t,e),e.name.setModified(!1)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(s()(i))},t}(h.List),w=function(e){function t(){var t=e.call(this)||this;return t.setEditable(!0),t}return _(t,e),t.prototype.buildInit=function(t,i){e.prototype.buildInit.call(this,t,i),"function"==typeof t.reloadParent&&(this.reloadParent=t.reloadParent)},t.prototype.onEdit=function(e){var i=this;t.typeDialog||(t.typeDialog=new b.StoreItemFieldTypeDialog((function(){i.reloadParent&&i.reloadParent(),x=!0}))),t.typeDialog.setVisible(!0)},t.prototype.reload=function(){this.optionsSource=m.Module.itemFieldTypes.filter((function(e){return!y.StoreItemFieldType.hasSupportForOptions(e.type)||!e.isStatic})),e.prototype.reload.call(this)},t.typeDialog=null,t}(p.DropdownBox),T=function(){},E=function(e){function t(t,i){var n=e.call(this)||this;n.field=t,n.fields=new T;var o=function(){var e=this.getElem();e.css({marginTop:-2,fontSize:10}),e.find("label").css({minHeight:13}),e.find("input").css({marginTop:0,marginBottom:0})};return r.Service.UIBuilder.buildLayout({type:"FlowLayout",css:{marginTop:10,background:"#fff"},spacing:10,verticalAlign:"middle",children:[{type:"CustomContainer",tag:"span",styleClass:"glyphicon glyphicon-resize-vertical",css:{cursor:"move"}},{type:"MultilangTextField",id:"name",placeholder:__("Name"),css:{width:130}},{type:w,id:"type",css:{width:190},reloadParent:function(){return i.reload()},change:function(){return n.onTypeChange()}},{type:"VerticalLayout",attr:{title:__("Hidden")},children:[{type:"CustomContainer",tag:"span",styleClass:"glyphicon glyphicon-eye-close"},{type:"CheckBox",id:"hidden",init:o}]},{type:"VerticalLayout",attr:{title:__("Searchable")},children:[{type:"CustomContainer",id:"searchableIcon",tag:"span",styleClass:"glyphicon glyphicon-search"},{type:"CheckBox",id:"searchable",init:o}]},{type:"VerticalLayout",attr:{title:__("Search interval")},children:[{type:"CustomContainer",id:"searchIntervalIcon",tag:"span",styleClass:"glyphicon glyphicon-search"},{type:"CheckBox",id:"searchInterval",init:o}]},{type:"Button",icon:"fa fa-remove",css:{width:34,height:34,padding:0},attr:{title:__("Remove")},click:function(){return i.removeField(n)}}]},n,n.fields),n.load(),n}return _(t,e),t.prototype.onTypeChange=function(){var e=this.fields.type.getSelectedItem(),t=e?e.getOriginal():null;e&&t&&!t.isStatic?(this.fields.searchable.setEnabled(!0),this.fields.searchInterval.setEnabled(!0),this.fields.searchableIcon.css({color:""}),this.fields.searchIntervalIcon.css({color:""})):(this.fields.searchable.setValue(!1),this.fields.searchInterval.setValue(!1),this.fields.searchable.setEnabled(!1),this.fields.searchInterval.setEnabled(!1),this.fields.searchableIcon.css({color:"#cccccc"}),this.fields.searchIntervalIcon.css({color:"#cccccc"}))},t.prototype.reload=function(){this.fields.type.reload()},t.prototype.load=function(){this.fields.type.reload(),this.fields.name.setValue(this.field.name),this.fields.type.setValue(this.field.type),this.fields.hidden.setValue(this.field.isHidden),this.fields.searchable.setValue(this.field.isSearchable),this.fields.searchInterval.setValue(this.field.isSearchInterval),this.onTypeChange()},t.prototype.store=function(){this.field.name=this.fields.name.getValue(),this.field.type=this.fields.type.getValue(),this.field.isHidden=this.fields.hidden.getValue(),this.field.isSearchable=this.fields.searchable.getValue(),this.field.isSearchInterval=this.fields.searchInterval.getValue()},t}(c.UIContainer),I=function(e){function t(){var t=e.call(this)||this;return t.fieldElements=[],t.dragging=null,t.getElem().sortable({distance:3,axis:"y",items:"> div",cursor:"move",start:function(e,i){return t.onSortStart(e,i)},stop:function(e,i){return t.onSortStop(e,i)}}),t}return _(t,e),t.prototype.buildInit=function(e,t){},t.prototype.onSortStart=function(e,t){this.dragging={idx:t.item.index()},t.placeholder.css({marginBottom:20})},t.prototype.onSortStop=function(e,t){var i=t.item.index();if(this.dragging&&this.dragging.idx!=i){var n=this.fieldElements.splice(this.dragging.idx,1);this.fieldElements.splice(i,0,n[0]),this.dragging=null}},t.prototype.reload=function(){for(var e=0,t=this.fieldElements;e<t.length;e++)t[e].reload()},t.prototype.setValue=function(e){this.removeAllChildren(),this.fieldElements=[];for(var t=0;t<e.length;t++)this.addField(e[t])},t.prototype.getValue=function(){return this.fieldElements.map((function(e){return e.store(),e.field}))},t.prototype.addField=function(e){var t=new E(e,this);this.fieldElements.push(t),this.addChild(t)},t.prototype.removeField=function(e){var t=this.fieldElements.indexOf(e);if(t>=0){var i=this.fieldElements.splice(t,1);this.removeChild(i[0])}},t.prototype.newField=function(){this.addField(new f.StoreItemTypeField)},t}(u.VerticalLayout),x=!1,S=function(e){function t(t){var i=e.call(this,"%inherit%")||this;return i.saveFunc=t,e.prototype.__construct.call(i,__("Item Types"),void 0,void 0,void 0,{size:{width:810},noScroll:!0,tabs:[{children:[{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:C,id:"tree",css:{height:328},listHeight:250},{type:"VerticalLayout",spacing:15,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Name")},{type:"MultilangTextField",id:"name"},{type:"FlowLayout",verticalAlign:"middle",css:{marginTop:15},children:[{type:"Label",text:__("Options"),css:{marginBottom:1}},{type:"Button",text:__("Add Option"),buttonStyle:d.UIButton.STYLE_LINK,icon:"glyphicon glyphicon-plus",styleClass:"btn-sm",click:function(e,t){t.fields.newField()}}]},{type:I,id:"fields"}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){i.applyData()}}]}),i}return _(t,e),t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.tree.selectFirst(),m.Module.itemTypes=v.UniqueIdentifier.assignIds(this.fields.tree.getValue());for(var e=0;e<m.Module.itemTypes.length;e++)v.UniqueIdentifier.assignIds(m.Module.itemTypes[e].fields);this.setVisible(!1),"function"==typeof this.saveFunc&&this.saveFunc.call(this,!1)},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),!t||i||n?t||i||n||x&&"function"==typeof this.saveFunc&&this.saveFunc.call(this,!0):(x=!1,this.fields.tree.setValue(m.Module.itemTypes),this.fields.tree.selectFirst()),e.prototype.setVisible.call(this,t,i,n)},t}(l())},"./store/StoreItemTypeField.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreItemTypeField:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.type=0,i.isHidden=!1,i.isSearchable=!1,i.isSearchInterval=!1,i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./store/StoreModule.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Category:function(){return l.StoreCategory},Item:function(){return s.StoreItem},Module:function(){return b},ModuleForCompositions:function(){return v}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./store/StoreItem.ts"),r=i("./store/StoreItemType.ts"),a=i("./store/StoreItemFieldType.ts"),l=i("./store/StoreCategory.ts"),c=i("./store/StoreDestinationZone.ts"),u=i("./store/StoreTaxRule.ts"),d=i("./store/StoreShippingMethod.ts"),h=i("./store/StoreTypes.ts"),p=i("./Serializable.ts"),m=i("./UniqueIdentifier.ts"),g={},f={},y=function(){function e(e){this.isUsedForCompositions=e,this.needToSave=!1,this.needToTranslateItems=!1,this.items=[],this.itemTypes=[],this.itemFieldTypes=[],this.categories=[],this.destinationZones=[],this.taxRules=[],this.shippingMethods=[],this.billingShippingRequired=null,this.currency=new h.StoreCurrency("USD","$",""),this.priceOptions=new h.StorePriceOptions,this.minOrderPrice=0,this.noPhotoImage=null,this.watermarkImage=null,this.showDates=!1,this.showItemId=!1,this.advancedInvoiceDocNumMode=!1,this.invoiceDocumentNumberFormat="INV {N:8}",this.termsCheckboxEnabled=!1,this.termsCheckboxText=__("I agree to the Terms and Conditions"),this.currenciesIndex={},this.currencies=[new h.StoreCurrency("USD","$",""),new h.StoreCurrency("EUR","€",""),new h.StoreCurrency("GBP","£",""),new h.StoreCurrency("AED","",""),new h.StoreCurrency("AFN","",""),new h.StoreCurrency("ALL","",""),new h.StoreCurrency("AMD",""," ֏"),new h.StoreCurrency("ANG","",""),new h.StoreCurrency("AOA","",""),new h.StoreCurrency("ARS","$",""),new h.StoreCurrency("AUD","A$",""),new h.StoreCurrency("AWG","",""),new h.StoreCurrency("AZN",""," ₼"),new h.StoreCurrency("BAM","",""),new h.StoreCurrency("BBD","",""),new h.StoreCurrency("BDT","",""),new h.StoreCurrency("BGN",""," лв."),new h.StoreCurrency("BHD","",""),new h.StoreCurrency("BIF","",""),new h.StoreCurrency("BMD","",""),new h.StoreCurrency("BND","",""),new h.StoreCurrency("BOB","",""),new h.StoreCurrency("BRL","",""),new h.StoreCurrency("BSD","",""),new h.StoreCurrency("BTN","",""),new h.StoreCurrency("BWP","",""),new h.StoreCurrency("BYN",""," Br"),new h.StoreCurrency("BZD","",""),new h.StoreCurrency("CAD","C$",""),new h.StoreCurrency("CDF","",""),new h.StoreCurrency("CHF",""," Fr"),new h.StoreCurrency("CLP",""," $"),new h.StoreCurrency("CNY","","¥"),new h.StoreCurrency("COP","$",""),new h.StoreCurrency("CRC","",""),new h.StoreCurrency("CUC","",""),new h.StoreCurrency("CUP","",""),new h.StoreCurrency("CVE","",""),new h.StoreCurrency("CZK",""," Kč"),new h.StoreCurrency("DJF","",""),new h.StoreCurrency("DKK",""," kr"),new h.StoreCurrency("DOP","",""),new h.StoreCurrency("DZD","",""),new h.StoreCurrency("EGP",""," L.E."),new h.StoreCurrency("ERN","",""),new h.StoreCurrency("ETB","",""),new h.StoreCurrency("FJD","",""),new h.StoreCurrency("FKP","",""),new h.StoreCurrency("GEL","",""),new h.StoreCurrency("GGP","",""),new h.StoreCurrency("GHS","",""),new h.StoreCurrency("GIP","",""),new h.StoreCurrency("GMD","",""),new h.StoreCurrency("GNF","",""),new h.StoreCurrency("GTQ",""," Q"),new h.StoreCurrency("GYD","",""),new h.StoreCurrency("HKD","HK$",""),new h.StoreCurrency("HNL","",""),new h.StoreCurrency("HRK",""," kn"),new h.StoreCurrency("HTG","",""),new h.StoreCurrency("HUF",""," Ft"),new h.StoreCurrency("IDR","Rp",""),new h.StoreCurrency("ILS","₪",""),new h.StoreCurrency("IMP","",""),new h.StoreCurrency("INR","₹",""),new h.StoreCurrency("IQD","",""),new h.StoreCurrency("IRR",""," ریال"),new h.StoreCurrency("IRR",""," تومان"),new h.StoreCurrency("ISK",""," kr"),new h.StoreCurrency("JEP","",""),new h.StoreCurrency("JMD","",""),new h.StoreCurrency("JOD","",""),new h.StoreCurrency("JPY","¥",""),new h.StoreCurrency("KES","",""),new h.StoreCurrency("KGS","",""),new h.StoreCurrency("KHR","",""),new h.StoreCurrency("KMF","",""),new h.StoreCurrency("KPW","",""),new h.StoreCurrency("KRW","₩",""),new h.StoreCurrency("KWD","",""),new h.StoreCurrency("KYD","",""),new h.StoreCurrency("KZT",""," тңг"),new h.StoreCurrency("LAK","",""),new h.StoreCurrency("LBP","",""),new h.StoreCurrency("LKR","",""),new h.StoreCurrency("LRD","",""),new h.StoreCurrency("LSL","",""),new h.StoreCurrency("LYD","",""),new h.StoreCurrency("MAD","",""),new h.StoreCurrency("MDL",""," lei"),new h.StoreCurrency("MGA","",""),new h.StoreCurrency("MKD","",""),new h.StoreCurrency("MMK","",""),new h.StoreCurrency("MNT","",""),new h.StoreCurrency("MOP","",""),new h.StoreCurrency("MRU","",""),new h.StoreCurrency("MUR","",""),new h.StoreCurrency("MVR","",""),new h.StoreCurrency("MWK","",""),new h.StoreCurrency("MXN","Mex$",""),new h.StoreCurrency("MYR","RM",""),new h.StoreCurrency("MZN","",""),new h.StoreCurrency("NAD","",""),new h.StoreCurrency("NGN","",""),new h.StoreCurrency("NIO","",""),new h.StoreCurrency("NOK",""," kr"),new h.StoreCurrency("NPR","",""),new h.StoreCurrency("NZD","NZ$",""),new h.StoreCurrency("OMR","",""),new h.StoreCurrency("PAB","",""),new h.StoreCurrency("PEN","S/ ",""),new h.StoreCurrency("PGK","",""),new h.StoreCurrency("PHP","₱",""),new h.StoreCurrency("PKR","",""),new h.StoreCurrency("PLN",""," zł"),new h.StoreCurrency("PRB","",""),new h.StoreCurrency("PYG","",""),new h.StoreCurrency("QAR",""," QR"),new h.StoreCurrency("RON",""," Lei"),new h.StoreCurrency("RSD",""," din"),new h.StoreCurrency("RUB",""," ₽"),new h.StoreCurrency("RWF","",""),new h.StoreCurrency("SAR",""," SR"),new h.StoreCurrency("SBD","",""),new h.StoreCurrency("SCR","",""),new h.StoreCurrency("SDG","",""),new h.StoreCurrency("SEK",""," kr"),new h.StoreCurrency("SGD","S$",""),new h.StoreCurrency("SHP","",""),new h.StoreCurrency("SLL","",""),new h.StoreCurrency("SOS","",""),new h.StoreCurrency("SRD","",""),new h.StoreCurrency("SSP","",""),new h.StoreCurrency("STN","",""),new h.StoreCurrency("SYP","",""),new h.StoreCurrency("SZL","",""),new h.StoreCurrency("THB",""," ฿"),new h.StoreCurrency("TJS","",""),new h.StoreCurrency("TMT",""," m"),new h.StoreCurrency("TND","",""),new h.StoreCurrency("TOP","",""),new h.StoreCurrency("TRY",""," TL"),new h.StoreCurrency("TTD","",""),new h.StoreCurrency("TVD","",""),new h.StoreCurrency("TWD","NT$",""),new h.StoreCurrency("TZS","",""),new h.StoreCurrency("UAH",""," грн"),new h.StoreCurrency("UGX","",""),new h.StoreCurrency("UYU","",""),new h.StoreCurrency("UZS",""," som"),new h.StoreCurrency("VEF","Bs. ",""),new h.StoreCurrency("VES","",""),new h.StoreCurrency("VND","","₫"),new h.StoreCurrency("VUV","",""),new h.StoreCurrency("WST","",""),new h.StoreCurrency("XAF","",""),new h.StoreCurrency("XCD","",""),new h.StoreCurrency("XOF","",""),new h.StoreCurrency("XPF","",""),new h.StoreCurrency("YER","",""),new h.StoreCurrency("ZAR","R ",""),new h.StoreCurrency("ZMW","","")],this.contactForm={content:{button:__("Inquire"),fields:[{checked:!0,name:__("Name")},{checked:!0,name:__("Email")},{checked:!1},{checked:!1},{checked:!0,name:__("Address")},{checked:!1},{checked:!1},{checked:!1},{checked:!1},{checked:!0,name:__("Comments")}]}},this.companyInfo="",this.invoiceTextBeginning="",this.invoiceTextEnding="",this.invoiceTitlePhrase=__("Invoice"),this.invoiceLogo=null,this.paymentGateways=[],this.dataLoaded=!1,this.initialLoadDone=!1,this.builder=null,this.wbConfig=null,this.saveProvider=!1}return e.prototype.init=function(e,t){this.builder=e,this.wbConfig=t,this.needToTranslateItems=!!this.builder.translateStoreItems;for(var i=0,n=this.currencies;i<n.length;i++){var o=n[i];this.currenciesIndex[o.code]=o}},e.prototype.sortItems=function(){this.items.sort((function(e,t){return e.itemType==t.itemType?0:e.itemType<t.itemType?-1:1}))},e.prototype.prepareIdexes=function(){g={};for(var e=0,t=this.itemTypes;e<t.length;e++){var i=t[e];g["#"+i.id]=i}f={};for(var n=0,o=this.itemFieldTypes;n<o.length;n++)i=o[n],f["#"+i.id]=i},e.prototype.findItemTypeById=function(e){return"#"+e in g?g["#"+e]:null},e.prototype.findItemFieldTypeById=function(e){return"#"+e in f?f["#"+e]:null},e.prototype.findItemTypeField=function(e,t){for(var i=0,n=e.fields;i<n.length;i++){var o=n[i];if(o.id===t)return o}return null},e.prototype.buildSearchBlob=function(e){var t=__tr(e.name)+"; "+e.id,i=this.findItemTypeById(e.itemType);if(i)for(var n=0,o=e.customFields;n<o.length;n++){var s=o[n];t+="; "+this.stringifyFieldValue(s,this.findItemTypeField(i,s.fieldId))}return t.toLowerCase()},e.prototype.stringifyFieldValue=function(e,t){if(!e||!t)return null;var i=e.value,n=this.findItemFieldTypeById(t.type);if(n&&n.options&&n.options.length>0){var o=isNaN(i)?i:[i];if(o instanceof Array){for(var s=[],r=0,a=n.options;r<a.length;r++)for(var l=a[r],c=0,u=o;c<u.length;c++){var d=u[c];if(l.id==d){s.push(__tr(l.name));break}}i=s.join(", ")}}else i=__tr(i);return"string"==typeof i&&(i=JSON.stringify(i)),isNaN(i)&&!i?null:i},e.prototype.formatDate=function(e){if(!e)return"";var t=e.match(/([0-9]+)\-([0-9]+)\-([0-9]+)\ ([0-9]+)\:([0-9]+)\:([0-9]+)/);return t?t[1]+"-"+t[2]+"-"+t[3]+" "+t[4]+":"+t[5]:""},e.prototype.buildDate=function(){var e=new Date,t=""+e.getFullYear(),i=""+(e.getMonth()+1),n=""+e.getDate(),o=""+e.getHours(),s=""+e.getMinutes(),r=""+e.getSeconds();return t+"-"+(1==i.length?"0"+i:i)+"-"+(1==n.length?"0"+n:n)+" "+(1==o.length?"0"+o:o)+":"+(1==s.length?"0"+s:s)+":"+(1==r.length?"0"+r:r)},e.prototype.getFormattedPrice=function(e,t,i,n,o){void 0===o&&(o=this.priceOptions.thousandsSeparator),t=t||this.priceOptions.decimalPoint,i=i||this.priceOptions.decimalPlaces,e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+e)?+e:0,r=isFinite(+i)?Math.abs(i):0,a=void 0===o?"":o,l=void 0===t?".":t,c=(r?function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i}(s,r):""+Math.round(s)).split(".");c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(c[1]||"").length<r&&(c[1]=c[1]||"",c[1]+=new Array(r-c[1].length+1).join("0")),e=c.join(l);var u=n?n.prefix:"";return u+e+(n?n.postfix?n.postfix:n.code&&!u?" "+n.code:"":"")},e.prototype.load=function(e,t){var i=this;t=t||this.initialLoadDone;var n=this.wbConfig?this.wbConfig.getLnUrl("store/data/",{tr:this.needToTranslateItems?"1":"0",nodefault:t?"1":"0",onlydefault:this.isUsedForCompositions?"1":"0"}):"store/data/?tr="+(this.needToTranslateItems?"1":"0")+"&nodefault="+(t?"1":"0")+"&onlydefault="+(this.isUsedForCompositions?"1":"0");this.dataLoaded=!1,o().get(n).done((function(t){i.initialLoadDone=!0,i.dataLoaded=!0,t&&(t.items&&(i.items=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(s.StoreItem,t.items))),t.itemTypes&&(i.itemTypes=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(r.StoreItemType,t.itemTypes))),t.itemFieldTypes&&(i.itemFieldTypes=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(a.StoreItemFieldType,t.itemFieldTypes,a.StoreItemFieldType.buildStaticTypes()))),t.categories&&(i.categories=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(l.StoreCategory,t.categories))),t.destinationZones&&(i.destinationZones=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(c.StoreDestinationZone,t.destinationZones))),t.taxRules&&(i.taxRules=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(u.StoreTaxRule,t.taxRules))),t.shippingMethods&&(i.shippingMethods=m.UniqueIdentifier.assignIds(p.Serializable.deserializeArray(d.StoreShippingMethod,t.shippingMethods))),"billingShippingRequired"in t&&(i.billingShippingRequired=t.billingShippingRequired),t.currency&&(i.currency=t.currency),t.priceOptions&&(i.priceOptions=t.priceOptions),t.currencies&&(i.currencies=t.currencies),t.noPhotoImage&&(i.noPhotoImage=t.noPhotoImage),t.watermarkImage&&(i.watermarkImage=t.watermarkImage),i.showDates=!!t.showDates,i.showItemId=!!t.showItemId,t.contactForm&&(i.contactForm=t.contactForm),t.paymentGateways&&(i.paymentGateways=t.paymentGateways),t.invoiceDocumentNumberFormat&&(i.invoiceDocumentNumberFormat=t.invoiceDocumentNumberFormat),t.companyInfo&&(i.companyInfo=t.companyInfo),t.invoiceTextBeginning&&(i.invoiceTextBeginning=t.invoiceTextBeginning),t.invoiceTextEnding&&(i.invoiceTextEnding=t.invoiceTextEnding),t.invoiceTitlePhrase&&(i.invoiceTitlePhrase=t.invoiceTitlePhrase),t.invoiceLogo&&(i.invoiceLogo=t.invoiceLogo),t.termsCheckboxEnabled&&(i.termsCheckboxEnabled=t.termsCheckboxEnabled),t.termsCheckboxText&&(i.termsCheckboxText=t.termsCheckboxText),t.minOrderPrice&&(i.minOrderPrice=t.minOrderPrice),t.hasOwnProperty("advancedInvoiceDocNumMode")?i.advancedInvoiceDocNumMode=!!t.advancedInvoiceDocNumMode:i.advancedInvoiceDocNumMode=!/^([^{}]+ |){N:\d+}$/i.test(i.invoiceDocumentNumberFormat)),i.saveProvider||!i.builder||i.isUsedForCompositions||(i.saveProvider=!0,i.builder.regSaveDataProvider("store",(function(){return i.needToSave?i.serialize():null}))),"function"==typeof e&&e.call(i)})).fail((function(){console.error("Loading store data failed.")}))},e.prototype.serialize=function(){return{currency:this.currency,priceOptions:this.priceOptions,items:p.Serializable.copy(this.items),itemTypes:p.Serializable.copy(this.itemTypes),itemFieldTypes:p.Serializable.serializeValue(this.itemFieldTypes,null,(function(e,t){return!t.isStatic})),categories:p.Serializable.copy(this.categories),destinationZones:p.Serializable.copy(this.destinationZones),taxRules:p.Serializable.copy(this.taxRules),shippingMethods:p.Serializable.copy(this.shippingMethods),billingShippingRequired:this.billingShippingRequired,noPhotoImage:this.noPhotoImage,watermarkImage:this.watermarkImage,showDates:this.showDates,showItemId:this.showItemId,contactForm:this.contactForm,paymentGateways:this.paymentGateways,advancedInvoiceDocNumMode:this.advancedInvoiceDocNumMode,invoiceDocumentNumberFormat:this.invoiceDocumentNumberFormat,companyInfo:this.companyInfo,invoiceTextBeginning:this.invoiceTextBeginning,invoiceTextEnding:this.invoiceTextEnding,invoiceTitlePhrase:this.invoiceTitlePhrase,invoiceLogo:this.invoiceLogo,termsCheckboxEnabled:this.termsCheckboxEnabled,termsCheckboxText:this.termsCheckboxText,minOrderPrice:this.minOrderPrice}},e}(),b=new y(!1),v=new y(!0)},"./store/StoreOrders.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{viewOrders:function(){return w}});var n,o,s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=i("./Service.ts"),l=i("./VerticalLayout.ts"),c=i("./DropdownBox.ts"),u=i("./Label.ts"),d=i("./PreloaderOverlay.ts"),h=i("./WB_Dialog.class.js"),p=i.n(h),m=i("./UIComponent.ts"),g=i("./store/StoreModule.ts"),f=i("./store/StoreTypes.ts"),y=i("./WB_MsgDialog.class.js"),b=i.n(y),v=i("./core/BuilderConfig.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),C=null;function w(e){C||(C=new I(e)),C.setVisible(!0)}!function(e){e.PENDING="pending",e.COMPLETE="complete",e.FAILED="failed",e.REFUNDED="refunded",e.CANCELLED="cancelled"}(o||(o={}));var T=function(){function e(e,t){this.elem=null,this.detailsElem=null,this.detailsCell=null,this.removeButton=null,this.columns=[],this.data=e,this.actionCallback=t}return e.prototype.getInvoiceLinkUrl=function(){return"http://"+wb_builder.siteDomain+"/store-invoice/"+this.data.hash+(wb_builder.site.forceSlashes?"/":"")},e.prototype.getElem=function(){var t,i=this;if(!this.elem){this.elem=r()("<tr>");for(var n=this.data.currency?this.data.currency:null,o=this.data.priceOptions?this.data.priceOptions:new f.StorePriceOptions,s=0;s<8;s++)this.columns.push(r()("<td>").appendTo(this.elem));var a="items"in this.data&&this.data.items?this.data.items:this.data.order,l=!1;if("string"!=typeof a)for(var c in a)if("object"==typeof a[c]){l=!0;break}this.columns[0].text(null!==(t=this.data.transactionId)&&void 0!==t?t:"-"),this.columns[1].append(l&&this.data.invoiceDocumentNumber?r()('<a target="_blank">').attr("href",this.getInvoiceLinkUrl()).text(this.data.invoiceDocumentNumber):"-"),this.columns[2].text(g.Module.formatDate("completeDateTime"in this.data&&this.data.completeDateTime?this.data.completeDateTime:this.data.dateTime)),this.columns[3].text(this.data.billingInfo?this.data.billingInfo.isCompany?this.data.billingInfo.companyName:this.data.billingInfo.firstName+" "+this.data.billingInfo.lastName:"-"),this.columns[4].text(this.data.billingInfo?this.data.billingInfo.email:"-"),this.columns[5].text(g.Module.getFormattedPrice(this.data.price,o.decimalPoint,o.decimalPlaces,n,o.thousandsSeparator)),this.columns[6].text(e.trState(this.data.state));var u=r()('<a href="javascript:void(0)">').text(__("Details"));this.columns[7].append(u),u.on("click touchend",(function(){i.detailsElem&&i.detailsElem.toggleClass("hidden")}))}return this.elem},e.billingInfoFilter=function(e,t){if("isCompany"==t)return!1;var i=e.isCompany;return(!i||"firstName"!=t&&"lastName"!=t)&&!!(i||"companyName"!=t&&"companyCode"!=t&&"companyVatCode"!=t)},e.prototype.getDetailsElem=function(){var t=this;if(!this.detailsElem){this.elem||this.getElem(),this.detailsCell=r()("<td>").css({padding:"15px"}),this.detailsCell.attr("colspan",this.columns.length);var i=this.data.currency?this.data.currency:null,n=this.data.priceOptions?this.data.priceOptions:new f.StorePriceOptions,s="items"in this.data&&this.data.items?this.data.items:this.data.order,a=!1;if("string"!=typeof s){var l=[];for(var c in s){var u=s[c];if("object"==typeof u){a=!0;var d=u.name;if("object"==typeof d){var h=wb_builder.site.getLastDefLang();if(h&&d.hasOwnProperty(h)&&""!==d[h])d=d[h];else if(wb_builder.site.currSelLang&&d.hasOwnProperty(wb_builder.site.currSelLang)&&""!==d[wb_builder.site.currSelLang])d=d[wb_builder.site.currSelLang];else{for(var p in d)if(""!==d[p]){d=d[p];break}"string"!=typeof d&&(d="")}}l.push(d+" ("+__("SKU")+": "+u.sku+") ("+__("Price")+": "+g.Module.getFormattedPrice(u.price,n.decimalPoint,n.decimalPlaces,i,n.thousandsSeparator)+") ("+__("Qty")+": "+u.quantity+")")}else l.push(u)}s=l.join("\n")}var m=void 0,y=void 0;this.detailsCell.append(m=r()('<div class="row">'));var b="";if(this.data.lang){b=this.data.lang;for(var _=0,C=v.wbConfig.availableLanguages;_<C.length;_++){var w=C[_];if(w.code==this.data.lang){b=w.name+" ("+w.locale.replace("_","-")+")";break}}}var T=void 0;if(m.append(y=r()('<div class="col-sm-6">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Order Details"))),this.data.transactionId&&y.append(r()("<div>").text(__("Order ID")+": "+this.data.transactionId)),a&&this.data.invoiceDocumentNumber&&y.append(r()("<div>").text(__("Invoice")+": "+this.data.invoiceDocumentNumber)),this.data.gatewayId&&y.append(r()("<div>").text(__("Payment gateway")+": "+this.data.gatewayId)),""!==b&&y.append(r()("<div>").text(__("Language")+": "+b)),y.append(r()("<div>").text(__("Date/Time")+": "+g.Module.formatDate("completeDateTime"in this.data&&this.data.completeDateTime?this.data.completeDateTime:this.data.dateTime))),y.append(r()("<div>").text(__("Type")+": "+this.trType(this.data.type))),y.append(T=r()("<div>").css({marginBottom:10}).text(__("State")+": "+e.trState(this.data.state))),I.version>=2){var E=r()('<span class="dropdown"><button class="btn btn-xs btn-default btn-raised" data-toggle="dropdown"><i class="fa fa-pencil"></i></button></span>').css({marginLeft:5}),x=r()('<ul class="dropdown-menu">');for(var S in o)o.hasOwnProperty(S)&&this.data.state!==o[S]&&x.append(r()("<li>").append(r()('<a href="javascript:void(0)">').data("state",o[S]).text(e.trState(o[S]))));E.append(x),T.append(E),x.on("click touchend","a",(function(e){e.stopImmediatePropagation(),e.preventDefault();var i=r()(e.target),n=i.data("state");i.closest(".dropdown").removeClass("open"),t.actionCallback(t,"setState",{state:n})}))}m.append(y=r()('<div class="col-sm-6">').css({marginBottom:15})),a&&this.data.invoiceDocumentNumber&&y.append(r()('<a class="btn btn-success" target="_blank"><i class="fa fa-file-pdf-o"></i></a>').css({marginBottom:5}).attr("href",this.getInvoiceLinkUrl()).append(document.createTextNode(" "+__("Download invoice")))).append("<br />"),I.version>=2&&(this.data.state===o.PENDING||this.data.state===o.FAILED||this.data.state===o.REFUNDED||this.data.state===o.CANCELLED)&&(this.removeButton=r()('<button class="btn btn-danger"><i class="fa fa-trash-o"></i></button>').css({marginBottom:5}).append(document.createTextNode(" "+__("Remove order"))),y.append(this.removeButton).append("<br />"),this.removeButton.on("click touchend",(function(e){e.stopImmediatePropagation(),e.preventDefault(),confirm(__("Are you sure you want to remove this order?"))&&t.actionCallback(t,"remove",null)}))),this.detailsCell.append(m=r()('<div class="row">'));var k="billingInfo"in this.data&&this.data.billingInfo?this.objToString(this.data.billingInfo,"\n",e.billingInfoFilter):"";k&&(m.append(y=r()('<div class="col-sm-6">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Billing Information"))),y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(k)));var D="deliveryInfo"in this.data&&this.data.deliveryInfo?this.objToString(this.data.deliveryInfo,"\n",e.billingInfoFilter):"";D&&(m.append(y=r()('<div class="col-sm-6">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Delivery Information"))),y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(D)));var O="buyer"in this.data&&this.data.buyer?this.objToString(this.data.buyer,"\n"):"";O&&(m.append(y=r()('<div class="col-sm-6">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Inquiry"))),y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(O))),this.detailsCell.append(m=r()('<div class="row">')),this.data.shippingDescription&&(m.append(y=r()('<div class="col-xs-12">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Shipping Method"))),y.append(r()("<div>").css({whiteSpace:"pre-line",marginBottom:10}).text(this.data.shippingDescription))),m.append(y=r()('<div class="col-xs-12">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Products"))),y.append(r()("<div>").css({whiteSpace:"pre-line",marginBottom:10}).text(s)),(this.data.taxAmount||this.data.shippingAmount)&&y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(__("Subtotal")+": "+g.Module.getFormattedPrice(this.data.price-this.data.taxAmount-this.data.shippingAmount,n.decimalPoint,n.decimalPlaces,i,n.thousandsSeparator))),this.data.taxAmount&&y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(__("Tax")+": "+g.Module.getFormattedPrice(this.data.taxAmount,n.decimalPoint,n.decimalPlaces,i,n.thousandsSeparator))),this.data.shippingAmount&&y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(__("Shipping")+": "+g.Module.getFormattedPrice(this.data.shippingAmount,n.decimalPoint,n.decimalPlaces,i,n.thousandsSeparator))),y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(__("Total")+": "+g.Module.getFormattedPrice(this.data.price,n.decimalPoint,n.decimalPlaces,i,n.thousandsSeparator))),this.data.orderComment&&(this.detailsCell.append(m=r()('<div class="row">')),m.append(y=r()('<div class="col-xs-12">').css({marginBottom:15})),y.append(r()("<strong>").text(__("Order Comments"))),y.append(r()("<div>").css({whiteSpace:"pre-line"}).text(this.data.orderComment))),this.detailsElem=r()("<tr>").addClass("hidden").append(this.detailsCell)}return this.detailsElem},e.prototype.getRemoveButton=function(){return this.getDetailsElem(),this.removeButton},e.prototype.trType=function(e){return"buy"===e?__("Purchase"):e},e.trState=function(e){return e===o.PENDING?__("Pending"):e===o.COMPLETE?__("Complete"):e===o.FAILED?__("Failed"):e===o.REFUNDED?__("Refunded"):e===o.CANCELLED?__("Canceled"):e},e.prototype.trKey=function(e){return"email"===e?__("Email"):"companyName"===e?__("Company Name"):"companyCode"===e?__("Company Code"):"companyVatCode"===e?__("Company TAX/VAT number"):"firstName"===e?__("First Name"):"lastName"===e?__("Last Name"):"address1"===e||"address2"===e?__("Address"):"city"===e?__("City"):"region"===e?__("Region"):"postCode"===e?__("Post Code"):"countryCode"===e?__("Country Code"):"country"===e?__("Country"):"phone"===e?__("Phone Number"):e},e.prototype.objToString=function(e,t,i){void 0===t&&(t=" / ");var n="";for(var o in e)!e[o]||i&&!i(e,o)||(n+=(n?t:"")+this.trKey(o)+": "+e[o]);return n},e}(),E=function(e){function t(){var t=e.call(this,"div")||this;t.css({maxHeight:400,overflowY:"auto"});var i=r()("<div>").addClass("table-responsive").appendTo(t._elem),n=r()("<table>").addClass("table table-bordered table-condensed").css({margin:0}).appendTo(i),o=r()("<thead>").appendTo(n);return t.tbody=r()("<tbody>").appendTo(n),r()("<tr>").append(r()("<th>").css({whiteSpace:"nowrap"}).text(__("Order ID"))).append(r()("<th>").css({whiteSpace:"nowrap"}).text(__("Invoice"))).append(r()("<th>").css({whiteSpace:"nowrap"}).text(__("Date/Time"))).append(r()("<th>").text(__("Buyer"))).append(r()("<th>").text(__("Email"))).append(r()("<th>").text(__("Sum"))).append(r()("<th>").text(__("State"))).append(r()("<th>").text("")).appendTo(o),t}return _(t,e),t.prototype.buildInit=function(e,t){},t.prototype.removeAllItems=function(){this.tbody.children("tr").each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))},t.prototype.addItem=function(e){this.tbody.append(e.getElem()),this.tbody.append(e.getDetailsElem())},t}(m.UIComponent),I=function(e){function t(t){var i=e.call(this,__("Store Orders Log"))||this;i.lastUpdateData=[],i.lastUpdateFilter="complete",i.msgDialog=null,i.builder=null,i.builder=t,i.setSize(992,null),i.initButtons(),i.urlDirect=(t.site.publishWithForcedHttps?"https":"http")+"://"+t.siteDomain+"/0/store-log",i.url=v.wbConfig.lnBaseUrl+"store/remote-log/";var n=[{id:"all",name:__("All")}];for(var s in o)o.hasOwnProperty(s)&&n.push({id:o[s],name:T.trState(o[s])});return a.Service.UIBuilder.buildLayout({type:l.VerticalLayout,children:[{type:"CustomContainer",id:"errorMessage",visible:!1},{type:u.Label,text:__("Filter")},{type:c.DropdownBox,id:"filter",value:i.lastUpdateFilter,options:n,change:function(e){i.lastUpdateFilter=e.filter.getValue(),i.updateDialogContent(i.lastUpdateData,i.lastUpdateFilter)},css:{maxWidth:200,marginBottom:"6px"}},{type:d.PreloaderOverlay,id:"preloader",visible:!1,noParentLimit:!0},{type:E,id:"table"}]},i.content.empty(),i.fields),i}return _(t,e),t.prototype.initButtons=function(){var e=this;this.removeAllButtons(),this.addButton(__("Export to CSV"),(function(){if(e.lastUpdateData.length){var t=v.wbConfig.lnBaseUrl+"store/export-log/",i=document.createElement("a");i.href=t,i.target="_blank",i.click()}}),!1,this.lastUpdateData.length?"btn-disabled":void 0,!this.lastUpdateData.length),this.addButton(__("Close"))},t.prototype.updateDialogContent=function(e,t){void 0===t&&(t="all"),this.fields.table.removeAllItems();for(var i=e.length-1;i>=0;i--){var n=e[i];"all"!==t&&t!==n.data.state||this.fields.table.addItem(n)}this.initButtons()},t.prototype.updateContent=function(){var e=this;v.wbConfig.testMode||(this.fields.preloader.setVisible(!0),this.fields.filter.setEnabled(!1),r().getJSON(this.url,(function(i){if(e.fields.errorMessage.setVisible(!1),!i||"object"!=typeof i||"error"in i)e.lastUpdateData=[],i&&"error"in i&&!v.wbConfig.testMode&&(e.fields.errorMessage.setContent(r()('<div class="alert alert-danger" style="white-space: pre-wrap">').text(__pr(i.error.message))),e.fields.errorMessage.setVisible(!0));else if(i.ok){var n=i;t.version=n.version,e.lastUpdateData=[];for(var o=0,s=i.list;o<s.length;o++){var a=s[o];e.lastUpdateData.push(new T(a,e.onOrderAction.bind(e)))}t.version<2&&!t.outdatedNotified&&(t.outdatedNotified=!0,e.showNotification(__("Your published website is outdated and doesn't support latest store functionality. Please republish your website.")))}e.updateDialogContent(e.lastUpdateData,e.lastUpdateFilter)})).always((function(){e.fields.preloader.setVisible(!1),e.fields.filter.setEnabled(!0)})))},t.prototype.onOrderAction=function(e,t,i){var n=this;"remove"===t&&(this.fields.preloader.setVisible(!0),this.fields.filter.setEnabled(!1),r().post(v.wbConfig.lnBaseUrl+"store/remove-order/"+e.data.transactionId,i,(function(e){!e||"object"!=typeof e||"error"in e?e&&"error"in e?n.showErrorMessage(__pr(e.error.message)):n.showErrorMessage("Unable to send request"):e.ok&&setTimeout(n.updateContent.bind(n),0)}),"json").fail((function(){n.showErrorMessage("Unable to send request")})).always((function(){n.fields.preloader.setVisible(!1),n.fields.filter.setEnabled(!0)}))),"setState"===t&&(this.fields.preloader.setVisible(!0),this.fields.filter.setEnabled(!1),r().post(v.wbConfig.lnBaseUrl+"store/set-order-state/"+e.data.transactionId,i,(function(e){!e||"object"!=typeof e||"error"in e?e&&"error"in e?n.showErrorMessage(__pr(e.error.message)):n.showErrorMessage("Unable to send request"):e.ok&&setTimeout(n.updateContent.bind(n),0)}),"json").fail((function(){n.showErrorMessage("Unable to send request")})).always((function(){n.fields.preloader.setVisible(!1),n.fields.filter.setEnabled(!0)})))},t.prototype.setVisible=function(t,i,n){t&&this.updateContent(),e.prototype.setVisible.call(this,t,i,n)},t.prototype.showErrorMessage=function(e){this.msgDialog||(this.msgDialog=new(b())),this.msgDialog.setTitle(__("Error")),this.msgDialog.setMessage(e),this.msgDialog.setVisible(!0)},t.prototype.showNotification=function(e){this.msgDialog||(this.msgDialog=new(b())),this.msgDialog.setTitle(__("Note")),this.msgDialog.setMessage(e),this.msgDialog.setVisible(!0)},t.version=1,t.outdatedNotified=!1,t}(p())},"./store/StorePropertyDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ItemList:function(){return k},build:function(){return P},updateData:function(){return L}});var n,o,s,r,a,l=i("./jquery-builder.ts"),c=(i("./UIComponent.ts"),i("./TextControl.ts")),u=i("./SizeSelector.ts"),d=i("./List.ts"),h=i("./DropdownBox.ts"),p=i("./ContactFormControl.ts"),m=i("./BorderControl.ts"),g=i("./store/StoreModule.ts"),f=i("./store/StoreOrders.ts"),y=i("./store/StoreItem.ts"),b=i("./store/StoreCategory.ts"),v=i("./store/StoreItemTypeDialog.ts"),_=i("./store/StoreCategoryDialog.ts"),C=i("./store/StoreCustomFieldContainer.ts"),w=i("./UniqueIdentifier.ts"),T=i("./WYSIWYGControl.ts"),E=i("./BuilderEvent.ts"),I=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=null,S=[],k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initHeight=300,t.footerHeight=-1,t.batchAdd=!1,t}return I(t,e),t.prototype.buildInit=function(t,i){t.itemType=y.StoreItem,t.editable=!0,t.select=this.onSelect,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.updateHeight=function(e){if(e.mainBody){if(this.footerHeight<0){var t=this.getElem().height();t>this.initHeight&&(this.initHeight=t),this.footerHeight=this.initHeight-this._control.list.height()}var i=Math.max(e.mainBody.getElem().height(),this.initHeight);this._control.setHeight(i-this.footerHeight),this.css({height:i})}},t.prototype.setItemValue=function(e,t){var i=JSON.stringify(e);e.name=t.name.getValue(),e.description=t.description.getValue(),e.price=parseFloat(t.price.getValue()),isNaN(e.price)&&(e.price=0),e.sku=t.sku.getValue(),e.weight=parseFloat(t.weight.getValue()),isNaN(e.weight)&&(e.weight=0),e.quantity=parseInt(t.quantity.getValue(),10),isNaN(e.quantity)&&(e.quantity=0),e.altImages=t.altImages.getValues(),e.image=(e.altImages&&e.altImages.length>0?e.altImages.shift():null)||null,e.itemType=t.itemType.getValue(),e.categories=t.categories.getValue(!0),e.isHidden=t.isHidden.getValue(),e.customFields=t.customFields.getValue(),e.seoTitle=t.seoTitle.getValue(),e.seoDescription=t.seoDescription.getValue(),e.seoAlias=t.seoAlias.getValue();var n=JSON.stringify(e),o=g.Module.buildDate();e.dateTimeCreated||(e.dateTimeCreated=o),e.dateTimeModified&&i===n||(e.dateTimeModified=o)},t.prototype.getItemValue=function(e,t){var i=e.description?T.WYSIWYGControl.convertPlainTextToHtml(e.description):"<p></p>",n=[];if(e.image&&""!==e.image&&n.push(e.image),e.altImages&&e.altImages.length)for(var o=0,s=e.altImages;o<s.length;o++){var r=s[o];n.push(r)}t.name.setValue(e.name?e.name:""),t.description.setValue(wb_builder.site.reloadTextTags(i)),t.price.setValue(e.price),t.sku.setValue(e.sku?e.sku:""),t.weight.setValue(e.weight),t.quantity.setValue(e.quantity),t.altImages.setValues(n),t.itemType.setValue(e.itemType),t.categories.setValue(e.categories,!0),t.seoTitle.setValue(e.seoTitle?e.seoTitle:""),t.seoDescription.setValue(e.seoDescription?e.seoDescription:""),t.seoAlias.setValue(e.seoAlias?e.seoAlias:"");var a=t.itemType.getSelectedItem(),l=a?a.getOriginal():null;!e.itemType&&l&&(e.itemType=l.id),t.isHidden.setValue(e.isHidden),t.dates.getElem().html((e.id?__("ID")+": "+e.id+"<br />":"")+__("Created")+": "+(e.dateTimeCreated?g.Module.formatDate(e.dateTimeCreated):"&mdash;")+"<br />"+__("Modified")+": "+(e.dateTimeModified?g.Module.formatDate(e.dateTimeModified):"&mdash;")),t.customFields.setValue(e.customFields,e.itemType),x=__tr(e.name,wb_builder.site.getLastDefLang(),null,!0),S=[],e.image&&S.push(e.image);for(var c=0;c<e.altImages.length;c++)S.push(e.altImages[c])},t.prototype.onSelect=function(e,t){var i,n=this;(i=this.getLastSelected())&&this.setItemValue(i,e),this.getItemValue(t,e),setTimeout((function(){return n.updateHeight(e)}),40)},t.prototype.onAdd=function(e,t,i){this.batchAdd||(this.selectItemLi((0,l.default)(i)),"scrollIntoView"in i&&i.scrollIntoView(),e.name.focus())},t.prototype.setValue=function(t){this.batchAdd=!0,e.prototype.setValue.call(this,t),this.batchAdd=!1},t}(d.List),D=function(e){function t(){var t=e.call(this)||this;return t.setEditable(!0),g.Module.prepareIdexes(),t}return I(t,e),t.prototype.onEdit=function(e){var t,i=this;t=function(t){void 0===t&&(t=!1),g.Module.prepareIdexes(),t||i.reload(),e.customFields&&e.customFields.reload()},r||(r=new v.StoreItemTypeDialog((function(){o.updateStyle(),"function"==typeof t&&t.call(o)}))),r.setVisible(!0)},t.prototype.reload=function(){this.optionsSource=g.Module.itemTypes,e.prototype.reload.call(this)},t}(h.DropdownBox),O=function(e){function t(){var t=e.call(this)||this;return t.singleOrNone=!1,t.setEditable(!0),t}return I(t,e),t.prototype.buildInit=function(t,i){var n=this;e.prototype.buildInit.call(this,t,i),this.singleOrNone=t.singleOrNone,this.singleOrNone&&(this.multiselect=!1,this.setEditable(!1),this.reload());var o=function(e){document.body.contains(n.getElem().get(0))?n.reload():E.GlobalEvents.off("store.categories.changed",o)};E.GlobalEvents.on("store.categories.changed",o)},t.prototype.onEdit=function(e){var t,i=this;t=function(){i.reload()},a||(a=new _.StoreCategoryDialog((function(){o.updateStyle(),"function"==typeof t&&t.call(o)}))),a.setVisible(!0)},t.prototype.reload=function(){this.multiselect=!this.singleOrNone,this.optionsSource=g.Module.categories.map((function(e){return e})),this.singleOrNone&&this.optionsSource.unshift(new b.StoreCategory({name:__("All")})),e.prototype.reload.call(this),this.setMultilevel(!0)},t}(h.DropdownBox),R={hideNavigation:!0,size:{width:810},tabs:[{name:__("Edit Item"),children:[{type:"HorizontalLayout",id:"mainBody",columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:k,id:"tree",css:{height:328},listHeight:250,addNewItemsToBeginning:!0},{type:"VerticalLayout",spacing:15,children:[{type:"HorizontalLayout",columnWeights:[8,4],columnWeightsSmall:[8,4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Name")},{type:"MultilangTextField",id:"name",onChange:function(e,t){x=__tr(t,wb_builder.site.getLastDefLang(),null,!0)}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Price")},{type:"TextField",id:"price",change:function(){var e=""+Math.round(100*parseFloat(this.getValue()))/100;this.setValue(/^\d+\.\d$/.test(e)?e+"0":e)}}]}]},{type:"HorizontalLayout",columnWeights:[4,4,4],columnWeightsSmall:[4,4,4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Item Options")},{type:D,id:"itemType",select:function(e,t){if(console.log("itemType select",arguments),e){var i=t.tree.getLastSelected();i&&t.customFields.setValue(i.customFields,t.itemType.getValue())}}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Categories")},{type:O,id:"categories"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("SKU"),helpText:__("Stock keeping unit, a unique identifier for each distinct product (optional)"),helpPlacement:"top"},{type:"TextField",id:"sku"}]}]},{type:"HorizontalLayout",columnWeights:[4,4,4],columnWeightsSmall:[4,4,4],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Weight")},{type:"TextField",id:"weight"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Quantity"),helpText:__("Quantity of items in your stock (for your reference only). You should update it manually."),helpPlacement:"top"},{type:"TextField",id:"quantity"}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Description")},{type:T.WYSIWYGControl,id:"description",forcePasteAsPlainText:!0,textArea:!0,height:170,config:{toolbar:[["Styles","Bold","Italic","Underline","Strike","Subscript","Superscript","Wbcolor","Wbbgcolor","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","WBLink","Unlink","Anchor"],["ShowBlocks","WBSourcedialog","|","More","Less"],["Languages"]]}}]},{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Images")},{type:"ImageSelector",id:"altImages",multiselect:!0,usePictureManager:!0,customContent:function(){var e={};return e[(x||__("New Item"))+" ("+__("Store Item")+")"]=S,e}}]},{type:"CustomContainer",id:"dates",css:{color:"#9b9b9b",fontSize:"12px",textAlign:"right"}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("SEO Title")},{type:"MultilangTextField",id:"seoTitle"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("SEO Description")},{type:"MultilangTextField",id:"seoDescription",textArea:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("User friendly URL"),helpText:__('This is an alias for the item details page. For example if you specify value "apple" then the page will have URL "yourwebsite.com/store/apple".')},{type:"MultilangTextField",id:"seoAlias"}]},{type:"HorizontalLayout",children:[{type:"CheckBox",id:"isHidden",label:__("Hidden")}]},{type:C.StoreCustomFieldContainer,id:"customFields"}]}]}]},{name:__("Settings"),children:[{type:"HorizontalLayout",columnWeights:[3,3,3,3],columnWeightsSmall:[3,3,3,3],children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Currency")},{type:"DropdownBox",id:"currencyCode",init:function(){var e,t;for(e=0;e<g.Module.currencies.length;e++)t=new h.DropdownBox.Item(g.Module.currencies[e].code,g.Module.currencies[e].code,g.Module.currencies[e]),this.addItem(t),0===e&&this.selectItem(t)},change:function(e){var t=this.getSelectedItem();t&&t.getOriginal()&&(e.currencyPrefix.setValue(t.getOriginal().prefix),e.currencyPostfix.setValue(t.getOriginal().postfix)),e.pricePreview.update()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Price prefix")},{type:"TextField",id:"currencyPrefix",change:function(e){e.pricePreview.update()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Price postfix")},{type:"TextField",id:"currencyPostfix",change:function(e){e.pricePreview.update()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Preview")},{type:"CustomContainer",id:"pricePreview",css:{paddingTop:7},init:function(e,t){var i=this;this.update=function(){var e="12705.4968",n=t.currencyPrefix.getValue(),o=t.currencyPostfix.getValue(),s=t.decimalPlaces.getValue(),r=t.decimalPoint.getValue(),a=t.thousandsSeparator.getValue();e=g.Module.getFormattedPrice(e,r,s,null,a),n||o||(o=" "+t.currencyCode.getValue()),n&&(e=n+e),o&&(e+=o),i.getElem().text(e)}}}]}]},{type:"HorizontalLayout",columnWeights:[3,3,3,3],columnWeightsSmall:[3,3,3,3],css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Thousands Separator")},{type:"DropdownBox",id:"thousandsSeparator",options:[{id:"",name:__("No separator")},{id:" ",name:" "},{id:".",name:"."},{id:",",name:","}],change:function(e){e.pricePreview.update()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Decimal Point")},{type:"DropdownBox",id:"decimalPoint",options:[{id:".",name:"."},{id:",",name:","}],change:function(e){e.pricePreview.update()}}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Decimal Places")},{type:"DropdownBox",id:"decimalPlaces",options:[{id:"0",name:"0"},{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"}],change:function(e){e.pricePreview.update()}}]}]},{type:"HorizontalLayout",columnWeights:[3,3,3,3],columnWeightsSmall:[3,3,3,3],css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Items per page")},{type:u.SizeSelector,id:"itemsPerPage",min:0,max:100}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Category")},{type:O,id:"category",singleOrNone:!0}]}]},{type:"HorizontalLayout",columnWeights:[3,3,2,2,2],columnWeightsSmall:[3,3,2,2,2],css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Thumbnail Size")},{type:"FlowLayout",verticalAlign:"middle",spacing:5,children:[{type:"TextField",id:"thumbWidth",css:{width:70}},{type:"Label",html:"&times;",css:{fontWeight:"normal",fontSize:18,lineHeight:"32px"}},{type:"TextField",id:"thumbHeight",css:{width:70}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Image Size")},{type:"FlowLayout",verticalAlign:"middle",spacing:5,children:[{type:"TextField",id:"imageWidth",css:{width:70}},{type:"Label",html:"&times;",css:{fontWeight:"normal",fontSize:18,lineHeight:"32px"}},{type:"TextField",id:"imageHeight",css:{width:70}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Image Border")},{type:m.BorderControl,id:"imageBorder",showRadius:!0}]},{type:"VerticalLayout",children:[{type:"Label",text:__("No-photo Image")},{type:"ImageSelector",id:"noPhotoImage"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Watermark Image"),helpText:__("Please avoid using image bigger than 1000x1000 pixels for watermark. Too big image may cause errors while trying to preview or publish website."),helpPlacement:"top"},{type:"ImageSelector",id:"watermarkImage"}]}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Contact Form")},{type:p.ContactFormControl,id:"contactForm"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("My Orders")},{type:"Button",text:__("Check Orders"),click:function(){return f.viewOrders(wb_builder)}}]},{type:"VerticalLayout",children:[{type:"Label",text:""},{type:"CheckBox",label:__("Show created/modified dates"),id:"showDates"},{type:"CheckBox",label:__("Show item ID in details page"),id:"showItemId"}]}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Product list")},{type:"CheckBox",id:"showAddToCartInList",label:__('Show "%s" button').replace("%s",__("Add to cart"))},{type:"CheckBox",id:"showBuyNowInList",label:__('Show "%s" button').replace("%s",__("Buy Now"))}]}]}]},{name:__("Style"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Name Style")},{type:c.TextControl,id:"nameStyle",horizontal:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Price Style")},{type:c.TextControl,id:"priceStyle",horizontal:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Label Style")},{type:c.TextControl,id:"labelStyle",horizontal:!0,noAlign:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Description/SKU Style")},{type:c.TextControl,id:"descStyle",horizontal:!0,noAlign:!0}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("System Text Style")},{type:c.TextControl,id:"sysTextStyle",horizontal:!0,noAlign:!0,noStyle:!0,noSize:!0,noSpacing:!0}]}]},{name:__("Filters"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Filter position")},{type:"FlowLayout",children:[{type:"RadioBox",id:"filterPositionTop",group:"filterPosition",label:__("Top")},{type:"RadioBox",id:"filterPositionLeft",group:"filterPosition",label:__("Left")},{type:"RadioBox",id:"filterPositionRight",group:"filterPosition",label:__("Right")}]},{type:"Label",text:__("Visibility"),css:{marginTop:15}},{type:"CheckBox",id:"showTextFilter",label:__("Show text search filter")},{type:"CheckBox",id:"showPriceFilter",label:__("Show price filter")},{type:"CheckBox",id:"showSorting",label:__("Show sorting dropdown")},{type:"CheckBox",id:"showViewSwitch",label:__("Show item list view switch")}]}]}],callbackFunc:function(e){!function(e){var t=s(),i=o.getProperty("data");null==i||i.triggerBeforeChange(o,!0),g.Module.currency.code=e.currencyCode.getValue(),g.Module.currency.prefix=e.currencyPrefix.getValue(),g.Module.currency.postfix=e.currencyPostfix.getValue(),g.Module.priceOptions.decimalPoint=e.decimalPoint.getValue(),g.Module.priceOptions.decimalPlaces=e.decimalPlaces.getValue(),g.Module.priceOptions.thousandsSeparator=e.thousandsSeparator.getValue(),g.Module.contactForm=e.contactForm.getValue(),g.Module.noPhotoImage=e.noPhotoImage.getValue(),g.Module.watermarkImage=e.watermarkImage.getValue(),g.Module.showDates=e.showDates.getValue(),g.Module.showItemId=e.showItemId.getValue(),t.content.thumbWidth=parseInt(e.thumbWidth.getValue(),10),t.content.thumbHeight=parseInt(e.thumbHeight.getValue(),10),t.content.imageWidth=parseInt(e.imageWidth.getValue(),10),t.content.imageHeight=parseInt(e.imageHeight.getValue(),10),t.content.imageBorder=e.imageBorder.getValue(),t.content.nameStyle=e.nameStyle.getValue(),t.content.priceStyle=e.priceStyle.getValue(),t.content.descStyle=e.descStyle.getValue(),t.content.sysTextStyle=e.sysTextStyle.getValue(),t.content.labelStyle=e.labelStyle.getValue(),t.content.itemsPerPage=e.itemsPerPage.getValue(),t.content.category=e.category.getValue(),t.content.showAddToCartInList=e.showAddToCartInList.getValue(),t.content.showBuyNowInList=e.showBuyNowInList.getValue(),t.content.showTextFilter=e.showTextFilter.getValue(),t.content.showPriceFilter=e.showPriceFilter.getValue(),t.content.showSorting=e.showSorting.getValue(),t.content.showViewSwitch=e.showViewSwitch.getValue(),e.filterPositionLeft.getValue()?t.content.filterPosition="left":e.filterPositionRight.getValue()?t.content.filterPosition="right":t.content.filterPosition="top",e.tree.selectFirst(),g.Module.items=w.UniqueIdentifier.assignIds(e.tree.getValue()),o.updateStyle(),null==i||i.triggerChange(o,!0)}(e)}};function P(e,t){return o=e,s=t,R}function L(e){var t=s();e.currencyCode.setValue(g.Module.currency.code),e.currencyPrefix.setValue(g.Module.currency.prefix),e.currencyPostfix.setValue(g.Module.currency.postfix),e.decimalPoint.setValue(g.Module.priceOptions.decimalPoint),e.decimalPlaces.setValue(g.Module.priceOptions.decimalPlaces),e.thousandsSeparator.setValue(g.Module.priceOptions.thousandsSeparator),e.noPhotoImage.setValue(g.Module.noPhotoImage),e.watermarkImage.setValue(g.Module.watermarkImage),e.showDates.setValue(g.Module.showDates),e.showItemId.setValue(g.Module.showItemId),e.pricePreview.update(),e.contactForm.setValue(g.Module.contactForm),e.thumbWidth.setValue(t.content.thumbWidth),e.thumbHeight.setValue(t.content.thumbHeight),e.imageWidth.setValue(t.content.imageWidth),e.imageHeight.setValue(t.content.imageHeight),e.imageBorder.setValue(t.content.imageBorder),e.nameStyle.setValue(t.content.nameStyle),e.priceStyle.setValue(t.content.priceStyle),e.descStyle.setValue(t.content.descStyle),e.sysTextStyle.setValue(t.content.sysTextStyle),e.labelStyle.setValue(t.content.labelStyle),e.itemsPerPage.setValue(t.content.itemsPerPage),e.category.reload(),e.category.setValue(t.content.category),e.showAddToCartInList.setValue(t.content.hasOwnProperty("showAddToCartInList")&&t.content.showAddToCartInList),e.showBuyNowInList.setValue(t.content.hasOwnProperty("showBuyNowInList")&&t.content.showBuyNowInList),e.showTextFilter.setValue(!t.content.hasOwnProperty("showTextFilter")||t.content.showTextFilter),e.showPriceFilter.setValue(!t.content.hasOwnProperty("showPriceFilter")||t.content.showPriceFilter),e.showSorting.setValue(!t.content.hasOwnProperty("showSorting")||t.content.showSorting),e.showViewSwitch.setValue(!t.content.hasOwnProperty("showViewSwitch")||t.content.showViewSwitch),e.itemType.reload(),e.itemType.setValue(null),e.categories.reload(),e.categories.setValue([],!0),e.tree.setValue(g.Module.items),e.tree.selectFirst();var i=t.content.hasOwnProperty("filterPosition")?t.content.filterPosition:"top";e.filterPositionLeft.setValue("left"===i),e.filterPositionRight.setValue("right"===i),e.filterPositionTop.setValue("top"===i)}},"./store/StoreRangesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{RangeElement:function(){return p}});var n,o=i("./Service.ts"),s=i("./TextField.ts"),r=i("./FlowLayout.ts"),a=i("./Label.ts"),l=i("./UIButton.ts"),c=i("./ItemContainer.ts"),u=i("./store/StoreModule.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(){},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.buildLayout=function(){var e=this;this.fields=new h,o.Service.UIBuilder.buildLayout({type:r.FlowLayout,verticalAlign:"middle",css:{marginTop:10},children:[{type:s.TextField,id:"from",styleClass:"input-sm",css:{width:60}},{type:a.Label,text:"-",css:{width:10,textAlign:"center",margin:0}},{type:s.TextField,id:"to",styleClass:"input-sm",css:{width:60}},{type:s.TextField,id:"value",styleClass:"input-sm",css:{width:80,marginLeft:20}},{type:a.Label,id:"currency",text:"",css:{width:30,fontWeight:"normal",margin:0}},{type:l.UIButton,icon:"glyphicon glyphicon-remove",styleClass:"btn-sm",attr:{title:__("Remove")},click:function(){return e.list.removeItemElem(e)}}]},this,this.fields)},t.prototype.load=function(){this.fields.from.setValue(this.item.from),this.fields.to.setValue(this.item.to),this.fields.value.setValue(this.item.value),u.Module.currency&&this.fields.currency.setText(u.Module.currency.code)},t.prototype.store=function(){this.item.from=parseFloat(this.fields.from.getValue()),this.item.to=parseFloat(this.fields.to.getValue()),this.item.value=parseFloat(this.fields.value.getValue())},t}(c.ItemContainerItem)},"./store/StoreShippingMethod.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreShippingMethod:function(){return c},StoreShippingMethodRange:function(){return l},StoreShippingMethodType:function(){return o},buildTypeList:function(){return a}});var n,o,s=i("./Serializable.ts"),r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function a(){return[{id:o.FREE,name:__("Free")},{id:o.FLAT_RATE,name:__("Flat rate")},{id:o.BY_WEIGHT,name:__("By weight")},{id:o.BY_SUBTOTAL,name:__("By subtotal")}]}!function(e){e[e.FREE=0]="FREE",e[e.FLAT_RATE=1]="FLAT_RATE",e[e.BY_WEIGHT=2]="BY_WEIGHT",e[e.BY_SUBTOTAL=3]="BY_SUBTOTAL"}(o||(o={}));var l=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.from=e,this.to=t,this.value=i,isNaN(this.from)&&(this.from=0),isNaN(this.to)&&(this.to=0),isNaN(this.value)&&(this.value=0)},c=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.destinationZoneId=0,i.type=o.FREE,i.ranges=[],i.estimatedShippingTime={from:0,to:0},i.deserialize(t),i}return r(t,e),t}(s.Serializable)},"./store/StoreShippingMethodDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreShippingMethodDialog:function(){return k},addSaveListener:function(){return I},open:function(){return x}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./List.ts"),a=i("./TextField.ts"),l=i("./DropdownBox.ts"),c=i("./WB_PropertyDialog.class.js"),u=i.n(c),d=i("./UniqueIdentifier.ts"),h=i("./store/StoreShippingMethod.ts"),p=i("./store/StoreModule.ts"),m=i("./store/StoreDestinationZoneDialog.ts"),g=i("./VerticalLayout.ts"),f=i("./HorizontalLayout.ts"),y=i("./Label.ts"),b=i("./FlowLayout.ts"),v=i("./UIButton.ts"),_=i("./ItemContainer.ts"),C=i("./store/StoreRangesControl.ts"),w=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),T=null,E=[];function I(e){E.push(e)}function x(){T||(T=new k),T.setVisible(!0)}var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.buildInit=function(t,i){t.itemType=h.StoreShippingMethod,t.editable=!0,t.select=this.onSelect,t.selectNone=this.onSelectNone,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){switch(e.name=t.name.getValue(),e.destinationZoneId=t.destinationZone.getValue(),e.type=t.type.getValue(),e.type){case h.StoreShippingMethodType.FREE:e.ranges=[];break;case h.StoreShippingMethodType.FLAT_RATE:e.ranges=[new h.StoreShippingMethodRange(0,0,parseFloat(t.price.getValue()))];break;case h.StoreShippingMethodType.BY_WEIGHT:e.ranges=t.byWeight.getValue();break;case h.StoreShippingMethodType.BY_SUBTOTAL:e.ranges=t.bySubtotal.getValue()}e.estimatedShippingTime.from=parseInt(t.shippingTimeFrom.getValue(),10),isNaN(e.estimatedShippingTime.from)&&(e.estimatedShippingTime.from=0),e.estimatedShippingTime.to=parseInt(t.shippingTimeTo.getValue(),10),isNaN(e.estimatedShippingTime.to)&&(e.estimatedShippingTime.to=0)},t.prototype.getItemValue=function(e,t){switch(t.name.setValue(e.name?e.name:""),t.destinationZone.setValue(e.destinationZoneId),t.type.setValue(e.type),t.type.trigger("change"),t.priceLabel.setText(__("Price")+(p.Module.currency?" ("+p.Module.currency.code+")":"")),t.price.setValue(0),t.byWeight.setValue([]),t.bySubtotal.setValue([]),e.type){case h.StoreShippingMethodType.FLAT_RATE:e.ranges.length>0&&t.price.setValue(e.ranges[0].value);break;case h.StoreShippingMethodType.BY_WEIGHT:t.byWeight.setValue(e.ranges);break;case h.StoreShippingMethodType.BY_SUBTOTAL:t.bySubtotal.setValue(e.ranges)}t.shippingTimeFrom.setValue(e.estimatedShippingTime.from),t.shippingTimeTo.setValue(e.estimatedShippingTime.to)},t.prototype.onSelect=function(e,t){var i;(i=this.getLastSelected())&&this.setItemValue(i,e),this.getItemValue(t,e),e.editPanel.setVisible(!!t)},t.prototype.onSelectNone=function(e){e.editPanel.setVisible(!1)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(s()(i))},t}(r.List),k=function(e){function t(){var t=e.call(this,__("Shipping Methods"),{noScroll:!0,tabs:[{children:[{type:f.HorizontalLayout,columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:S,id:"list",css:{height:328},listHeight:250},{type:g.VerticalLayout,id:"editPanel",spacing:15,children:[{type:f.HorizontalLayout,children:[{type:g.VerticalLayout,children:[{type:y.Label,text:__("Item Name")},{type:a.TextField,id:"name"}]},{type:g.VerticalLayout,children:[{type:y.Label,text:__("Destination Zone")},{type:l.DropdownBox,id:"destinationZone",options:p.Module.destinationZones,editable:!0,edit:function(){return(0,m.open)()}}]}]},{type:g.VerticalLayout,children:[{type:y.Label,text:__("Type")},{type:l.DropdownBox,id:"type",options:(0,h.buildTypeList)(),change:function(){t.showBlockByType()}}]},{type:g.VerticalLayout,id:"blockTypeFlatRate",children:[{type:y.Label,id:"priceLabel",text:__("Price")},{type:a.TextField,id:"price"}]},{type:g.VerticalLayout,id:"blockTypeByWeight",children:[{type:b.FlowLayout,verticalAlign:"middle",children:[{type:y.Label,text:__("Ranges"),css:{marginBottom:1}},{type:v.UIButton,text:__("Add Range"),buttonStyle:v.UIButton.STYLE_LINK,icon:"glyphicon glyphicon-plus",styleClass:"btn-sm",click:function(e,t){t.byWeight.newItem()}}]},{type:_.ItemContainer,id:"byWeight",itemType:h.StoreShippingMethodRange,itemElemType:C.RangeElement}]},{type:g.VerticalLayout,id:"blockTypeBySubtotal",children:[{type:b.FlowLayout,verticalAlign:"middle",children:[{type:y.Label,text:__("Ranges"),css:{marginBottom:1}},{type:v.UIButton,text:__("Add Range"),buttonStyle:v.UIButton.STYLE_LINK,icon:"glyphicon glyphicon-plus",styleClass:"btn-sm",click:function(e,t){t.bySubtotal.newItem()}}]},{type:_.ItemContainer,id:"bySubtotal",itemType:h.StoreShippingMethodRange,itemElemType:C.RangeElement}]},{type:g.VerticalLayout,children:[{type:y.Label,text:__("Estimated Delivery Time (days)")},{type:b.FlowLayout,children:[{type:a.TextField,id:"shippingTimeFrom",css:{width:80}},{type:y.Label,html:"&mdash;",css:{fontWeight:"normal",margin:"4px 0"}},{type:a.TextField,id:"shippingTimeTo",css:{width:80}}]}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){t.applyData()}}]})||this;return(0,m.addSaveListener)((function(){t.fields.destinationZone.reload(p.Module.destinationZones)})),t}return w(t,e),t.prototype.showBlockByType=function(){switch(this.fields.blockTypeFlatRate.setVisible(!1),this.fields.blockTypeByWeight.setVisible(!1),this.fields.blockTypeBySubtotal.setVisible(!1),this.fields.type.getValue()){case h.StoreShippingMethodType.FLAT_RATE:this.fields.blockTypeFlatRate.setVisible(!0);break;case h.StoreShippingMethodType.BY_WEIGHT:this.fields.blockTypeByWeight.setVisible(!0);break;case h.StoreShippingMethodType.BY_SUBTOTAL:this.fields.blockTypeBySubtotal.setVisible(!0)}},t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.list.selectFirst(),p.Module.shippingMethods=d.UniqueIdentifier.assignIds(this.fields.list.getValue()),this.setVisible(!1);for(var e=0,t=E;e<t.length;e++){var i=t[e];"function"==typeof i&&i.call(this)}},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t&&!n&&(this.fields.list.setValue(p.Module.shippingMethods),this.fields.list.selectFirst(),this.showBlockByType()),e.prototype.setVisible.call(this,t,i,n)},t}(u())},"./store/StoreTaxRule.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreTaxRule:function(){return a},StoreTaxRuleRate:function(){return r}});var n,o=i("./Serializable.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.destinationZoneId=0,i.rate=0,i.deserialize(t),i}return s(t,e),t}(o.Serializable),a=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.id=0,i.name="",i.rates=[],i.deserialize(t),i}return s(t,e),t}(o.Serializable)},"./store/StoreTaxRuleDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreTaxRuleDialog:function(){return O},addSaveListener:function(){return I},open:function(){return x}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./List.ts"),a=i("./TextField.ts"),l=i("./DropdownBox.ts"),c=i("./WB_PropertyDialog.class.js"),u=i.n(c),d=i("./UniqueIdentifier.ts"),h=i("./store/StoreTaxRule.ts"),p=i("./store/StoreModule.ts"),m=i("./HorizontalLayout.ts"),g=i("./VerticalLayout.ts"),f=i("./FlowLayout.ts"),y=i("./Label.ts"),b=i("./store/StoreDestinationZoneDialog.ts"),v=i("./Service.ts"),_=i("./UIButton.ts"),C=i("./ItemContainer.ts"),w=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),T=null,E=[];function I(e){E.push(e)}function x(){T||(T=new O),T.setVisible(!0)}var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.buildInit=function(t,i){t.itemType=h.StoreTaxRule,t.editable=!0,t.select=this.onSelect,t.selectNone=this.onSelectNone,t.add=this.onAdd,e.prototype.buildInit.call(this,t,i)},t.prototype.setItemValue=function(e,t){e.name=t.name.getValue(),e.rates=t.rates.getValue()},t.prototype.getItemValue=function(e,t){t.name.setValue(e.name?e.name:""),t.rates.setValue(e.rates)},t.prototype.onSelect=function(e,t){var i;(i=this.getLastSelected())&&this.setItemValue(i,e),this.getItemValue(t,e),e.editPanel.setVisible(!!t)},t.prototype.onSelectNone=function(e){e.editPanel.setVisible(!1)},t.prototype.onAdd=function(e,t,i){this.selectItemLi(s()(i))},t}(r.List),k=function(){},D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.buildLayout=function(){var e=this;this.fields=new k,v.Service.UIBuilder.buildLayout({type:f.FlowLayout,verticalAlign:"middle",css:{marginTop:10},children:[{type:l.DropdownBox,id:"destinationZone",styleClass:"input-group-sm",css:{width:200},options:p.Module.destinationZones,editable:!0,edit:function(){return(0,b.open)()}},{type:a.TextField,id:"rate",styleClass:"input-sm",css:{width:70}},{type:y.Label,text:"%",css:{width:10,margin:0}},{type:_.UIButton,icon:"glyphicon glyphicon-remove",styleClass:"btn-sm",attr:{title:__("Remove")},click:function(){return e.list.removeItemElem(e)}}]},this,this.fields),(0,b.addSaveListener)((function(){e.fields.destinationZone.reload(p.Module.destinationZones)}))},t.prototype.load=function(){this.fields.destinationZone.setValue(this.item.destinationZoneId),this.fields.rate.setValue(this.item.rate)},t.prototype.store=function(){this.item.destinationZoneId=this.fields.destinationZone.getValue(),this.item.rate=parseFloat(this.fields.rate.getValue()),isNaN(this.item.rate)&&(this.item.rate=0)},t}(C.ItemContainerItem),O=function(e){function t(){var t=e.call(this,__("Tax Rules"),{noScroll:!0,tabs:[{children:[{type:m.HorizontalLayout,columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:S,id:"list",css:{height:328},listHeight:250},{type:g.VerticalLayout,id:"editPanel",spacing:15,children:[{type:m.HorizontalLayout,children:[{type:g.VerticalLayout,children:[{type:y.Label,text:__("Item Name")},{type:a.TextField,id:"name"}]}]},{type:g.VerticalLayout,children:[{type:f.FlowLayout,verticalAlign:"middle",children:[{type:y.Label,text:__("Rates"),css:{marginBottom:1}},{type:_.UIButton,text:__("Add Rate"),buttonStyle:_.UIButton.STYLE_LINK,icon:"glyphicon glyphicon-plus",styleClass:"btn-sm",click:function(e,t){t.rates.newItem()}}]},{type:C.ItemContainer,id:"rates",itemType:h.StoreTaxRuleRate,itemElemType:D}]}]}]}]}],buttons:[{name:__("Cancel")},{name:__("Apply"),primary:!0,click:function(){t.applyData()}}]})||this;return t}return w(t,e),t.prototype.applyData=function(){wb_builder.setPageModified(!0),this.fields.list.selectFirst(),p.Module.taxRules=d.UniqueIdentifier.assignIds(this.fields.list.getValue()),this.setVisible(!1);for(var e=0,t=E;e<t.length;e++){var i=t[e];"function"==typeof i&&i.call(this)}},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t&&!n&&(this.fields.list.setValue(p.Module.taxRules),this.fields.list.selectFirst()),e.prototype.setVisible.call(this,t,i,n)},t}(u())},"./store/StoreTypes.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StoreCurrency:function(){return n},StorePriceOptions:function(){return o}});var n=function(e,t,i){this.code=e,this.prefix=t,this.postfix=i},o=function(e,t,i){void 0===e&&(e="."),void 0===t&&(t=2),void 0===i&&(i=""),this.decimalPoint=e,this.decimalPlaces=t,this.thousandsSeparator=i}},"./tools/CropTool.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CropRectangle:function(){return a},CropTool:function(){return u}});var n=i("./CommonTypes.ts"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=function(){function e(e){this.imgWidth=0,this.imgHeight=0,e?(this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,"oldElemWidth"in e&&(this.oldElemWidth=e.oldElemWidth),"oldElemHeight"in e&&(this.oldElemHeight=e.oldElemHeight),"imgWidth"in e&&(this.imgWidth=e.imgWidth),"imgHeight"in e&&(this.imgHeight=e.imgHeight)):this.x=this.y=this.width=this.height=0}return e.deserialize=function(t){return new e(t)},e.prototype.serialize=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,imgWidth:this.imgWidth,imgHeight:this.imgHeight}},e.prototype.reset=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.x=0,this.y=0,this.imgWidth=e.naturalWidth?e.naturalWidth:i,this.imgHeight=e.naturalHeight?e.naturalHeight:n,this.imgWidth/this.imgHeight>t?(this.width=this.imgHeight*t,this.height=this.imgHeight):(this.width=this.imgWidth,this.height=this.imgWidth/t),delete this.oldElemWidth,delete this.oldElemHeight},e.prototype.update=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=e.naturalWidth?e.naturalWidth:t,o=e.naturalHeight?e.naturalHeight:i;if(this.oldElemWidth&&this.oldElemHeight)if(this.width&&this.height){var s=n/this.width,r=o/this.height;this.x=s*-this.x,this.y=r*-this.y,this.width=s*this.oldElemWidth,this.height=r*this.oldElemHeight,delete this.oldElemWidth,delete this.oldElemHeight}else this.reset(e,this.oldElemWidth/this.oldElemHeight,t,i);this.imgWidth=n,this.imgHeight=o},e.prototype.normalize=function(){if(this.imgWidth=Math.max(this.imgWidth,1),this.imgHeight=Math.max(this.imgHeight,1),this.width<=0&&(this.width=this.height?this.imgWidth*this.height/this.imgHeight:this.imgWidth),this.height<=0&&(this.height=this.width?this.imgHeight*this.width/this.imgWidth:this.imgHeight),this.width>this.imgWidth||this.height>this.imgHeight){var e=Math.min(this.imgWidth/this.width,this.imgHeight/this.height);this.width*=e,this.height*=e}this.x=Math.min(Math.max(this.x,0),this.imgWidth-this.width),this.y=Math.min(Math.max(this.y,0),this.imgHeight-this.height)},e.prototype.isCoveringAll=function(){return 0===this.x&&0===this.y&&this.width===this.imgWidth&&this.height===this.imgHeight},e}(),l=function(){function e(e,t){this.elem=s()("<div>").addClass("wb-crop-tool-tb"),this.zoom=s()("<span>").addClass("wb-crop-label"),this.elem.append(this.zoom).append(s()('<span class="fa fa-times wb-crop-btn">').on("click touchend",t)).append(s()('<span class="fa fa-check wb-crop-btn">').on("click touchend",e))}return e.prototype.setInfo=function(e,t,i){this.zoom.html(__("Size")+": "+Math.round(e)+" &times; "+Math.round(t)+", "+__("Zoom")+": "+Math.round(i)+"%")},e.prototype.updatePosition=function(e,t,i){i?this.elem.css({left:e-(Math.max(this.elem.outerWidth(!0),48)-2),top:t+2,bottom:"auto",margin:0,padding:0,background:"none"}):this.elem.css({left:"",top:"",bottom:"",margin:"",padding:"",background:""})},e}(),c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},u=function(){function e(){this.cropRect=null,this.image=null,this.frameRect=null,this.trackElement=null,this.borders={left:0,right:0,top:0,bottom:0},this.applyCallback=null,this.cancelCallback=null,this.ui=null,this.keyDownHandler=null,this.touchDownHandler=null,this.touchWheelHandler=null,this.touchMoveHandler=null,this.touchEndHandler=null,this.touchCancelHandler=null,this.lastDragStartTime=0,this.minCropWidth=30,this.minCropHeight=30,this.controlInfo=null}return e.prototype.beginCrop=function(e,t,i,n,o,r){if(void 0===r&&(r=null),!s()(e).length)throw new Error("Cannot track an empty jQuery element set");if(this.trackElement)throw new Error("Crop tool is already active");if(this.cropRect=new a(i),this.image=t.cloneNode(!1),this.trackElement=s()(e).get(0),this.applyCallback=o,this.cancelCallback=r,this.borders=n,this.cropRect.width&&this.cropRect.height)this.cropRect.update(this.image,t.naturalWidth,t.naturalHeight);else{var l=this.trackElement.getBoundingClientRect();this.cropRect.reset(this.image,l.width/l.height,t.naturalWidth,t.naturalHeight)}return this.updateScreenRect(),this},e.prototype.endCrop=function(){if(!this.trackElement||!this.cropRect)throw new Error("Cannot end cropping that was not started");this.trackElement=null,this.frameRect=null,this.update(),this.applyCallback&&this.applyCallback.call(window,this.cropRect)},e.prototype.cancelCrop=function(){this.trackElement=null,this.frameRect=null,this.update(),this.cancelCallback&&this.cancelCallback.call(window)},e.prototype.updateScreenRect=function(){if(this.trackElement&&this.cropRect)if(document.body.contains(this.trackElement)){if(c(this.updateScreenRect.bind(this)),!this.frameRect){var e=this.trackElement.getBoundingClientRect(),t=e.width-this.borders.left-this.borders.right,i=e.height-this.borders.top-this.borders.bottom,n=t,o=t*this.cropRect.height/this.cropRect.width;o>i&&(n=i*this.cropRect.width/this.cropRect.height,o=i);var r=n/this.cropRect.width,a=o/this.cropRect.height,l=s()(window).width(),u=s()(window).height(),d={x:Math.round((l-n)/2-this.cropRect.x*r),y:Math.round((u-o)/2-this.cropRect.y*a),width:Math.round(this.cropRect.imgWidth*r),height:Math.round(this.cropRect.imgHeight*a)};d.width<=0||d.height<=0?this.cancelCrop():(this.frameRect=d,this.update())}}else this.cancelCrop()},e.prototype.getEventPointers=function(e){var t=[];if("touchstart"===e.type||"touchmove"===e.type)for(var i=e.originalEvent.touches,o=0,s=i.length;o<s;o++)t.push(new n.Vector2(i[o].clientX,i[o].clientY));else"mousedown"!==e.type&&"mousemove"!==e.type&&"mouseup"!==e.type||t.push(new n.Vector2(e.clientX,e.clientY));return t},e.prototype.getPointerPositionData=function(e){var t,i=0;return e.length>1?(i=e[1].subtract(e[0]).length(),t=e[0].add(e[1]).scale(.5)):t=e[0],{center:t,distance:i}},e.prototype.handleControls=function(e,t){if(void 0===t&&(t=!1),this.cropRect&&this.frameRect){var i=this.getEventPointers(e);if(i.length){var n=1===i.length?"pan":"zoom";if(this.controlInfo&&this.controlInfo.type===n){var o,s=this.getPointerPositionData(i),a=(d=s.center,h=s.distance,d.subtract(this.controlInfo.startCenter));if(o="pan"===this.controlInfo.type?1:h/this.controlInfo.startDistance,this.controlInfo.rectMode){var l=this.frameRect.width/this.cropRect.imgWidth,c=this.frameRect.height/this.cropRect.imgHeight;this.cropRect.x=this.controlInfo.initialRect.x+a.x/l,this.cropRect.y=this.controlInfo.initialRect.y+a.y/c}else this.frameRect.x=this.controlInfo.initialRect.x+a.x*o,this.frameRect.y=this.controlInfo.initialRect.y+a.y*o,this.frameRect.width=this.controlInfo.initialRect.width*o,this.frameRect.height=this.controlInfo.initialRect.height*o;this.update()}else{var u=this.getPointerPositionData(i),d=u.center,h=u.distance,p=d.subtract(this.frameRect);this.controlInfo={type:n,rectMode:t,start:i,startCenter:d,startDistance:h,startCenterOnFrame:p,initialRect:r({},t?this.cropRect:this.frameRect)}}}"touchend"!==e.type&&"touchcancel"!==e.type&&"mouseup"!==e.type||(this.controlInfo=null)}},e.prototype.handleCropResize=function(e){if(this.frameRect&&this.cropRect){var t=this.frameRect.width/this.cropRect.imgWidth,i=this.frameRect.height/this.cropRect.imgHeight;"w"==e.axis||"n"==e.axis||"nw"==e.axis?(e.position.left<this.frameRect.x?(e.position.left=this.frameRect.x,e.size.width=e.originalPosition.left+e.originalSize.width-e.position.left):e.size.width<this.minCropWidth&&(e.size.width=this.minCropWidth,e.position.left=e.originalPosition.left+e.originalSize.width-e.size.width),e.position.top<this.frameRect.y?(e.position.top=this.frameRect.y,e.size.height=e.originalPosition.top+e.originalSize.height-e.position.top):e.size.height<this.minCropHeight&&(e.size.height=this.minCropHeight,e.position.top=e.originalPosition.top+e.originalSize.height-e.size.height)):(e.position.left-this.frameRect.x+e.size.width>this.frameRect.width?e.size.width=this.frameRect.width-(e.position.left-this.frameRect.x):e.size.width<this.minCropWidth&&(e.size.width=this.minCropWidth),e.position.top-this.frameRect.y+e.size.height>this.frameRect.height?e.size.height=this.frameRect.height-(e.position.top-this.frameRect.y):e.size.height<this.minCropHeight&&(e.size.height=this.minCropHeight)),this.cropRect.x=(e.position.left-this.frameRect.x)/t,this.cropRect.y=(e.position.top-this.frameRect.y)/i,this.cropRect.width=e.size.width/t,this.cropRect.height=e.size.height/i,this.update()}},e.prototype.update=function(){var e=this;if(this.trackElement&&this.image&&this.frameRect&&this.cropRect){this.ui||(this.ui={image:s()(this.image).attr("class","wb-crop-tool-image").attr("style",""),center:s()('<div class="wb-crop-tool-center">').append('<div class="wb-crop-gva">').append('<div class="wb-crop-gvb">').append('<div class="wb-crop-gha">').append('<div class="wb-crop-ghb">').append('<div class="wb-crop-lt">').append('<div class="wb-crop-t">').append('<div class="wb-crop-rt">').append('<div class="wb-crop-r">').append('<div class="wb-crop-rb">').append('<div class="wb-crop-b">').append('<div class="wb-crop-lb">').append('<div class="wb-crop-l">').append('<div class="wb-crop-info">'+__("Zoom with mouse wheel")+"</div>"),toolbar:new l((function(){return e.endCrop()}),(function(){return e.cancelCrop()})),leftOverlay:s()('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-left">'),rightOverlay:s()('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-right">'),topOverlay:s()('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-top">'),bottomOverlay:s()('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-bottom">')},this.keyDownHandler&&s()(document.body).off("keydown",this.keyDownHandler),this.ui.center.on("touchstart mousedown",(function(t){if(!e.controlInfo&&(t.stopImmediatePropagation(),t.preventDefault(),e.getEventPointers(t).length)){var i=Date.now();if(i-e.lastDragStartTime<=250)return void e.endCrop();e.lastDragStartTime=i,e.handleControls(t,!0)}})),s()(document.body).append(this.ui.image,this.ui.leftOverlay,this.ui.rightOverlay,this.ui.topOverlay,this.ui.bottomOverlay,this.ui.center,this.ui.toolbar.elem).on("keydown",this.keyDownHandler=function(t){"Enter"!==t.key&&"Escape"!==t.key||(t.stopImmediatePropagation(),t.preventDefault(),"Enter"===t.key?e.endCrop():e.cancelCrop())}),s()(window).on("touchstart mousedown",this.touchDownHandler=function(t){if(!e.controlInfo&&(t.stopImmediatePropagation(),t.preventDefault(),e.getEventPointers(t).length)){var i=Date.now();if(i-e.lastDragStartTime<=250)return void e.endCrop();e.lastDragStartTime=i,e.handleControls(t)}}).on("touchmove mousemove",this.touchMoveHandler=function(t){e.controlInfo&&e.handleControls(t)}).on("touchend mouseup",this.touchEndHandler=function(t){e.controlInfo&&e.handleControls(t)}).on("touchcancel",this.touchCancelHandler=function(t){e.controlInfo&&e.frameRect&&(e.frameRect.x=e.controlInfo.initialRect.x,e.frameRect.y=e.controlInfo.initialRect.y,e.controlInfo=null,e.update())}),window.addEventListener("wheel",this.touchWheelHandler=function(t){if(e.ui&&e.cropRect&&e.frameRect&&!e.controlInfo){t.stopImmediatePropagation(),t.preventDefault();var i=("deltaY"in t?t.deltaY:t.detail)<0,n=i?1.1:.9,o=(t.clientX-e.frameRect.x)/e.frameRect.width,s=(t.clientY-e.frameRect.y)/e.frameRect.height,r=e.frameRect.width*n,a=e.frameRect.height*n;if(!(r<e.minCropWidth||a<e.minCropHeight)){var l=e.minCropWidth/(r/e.cropRect.imgWidth),c=e.minCropHeight/(a/e.cropRect.imgHeight);(l<5||c<5)&&i||(e.frameRect.x-=(r-e.frameRect.width)*o,e.frameRect.y-=(a-e.frameRect.height)*s,e.frameRect.width=r,e.frameRect.height=a,e.update())}}},{passive:!1}),this.ui.center.resizableExt({handles:"n, e, s, w, ne, se, sw, nw",minWidth:10,minHeight:10,start:function(e){return e.stopPropagation()},resize:function(t,i){e.handleCropResize(i),t.stopPropagation()},stop:function(t,i){e.handleCropResize(i),t.stopPropagation()}})),this.cropRect.normalize();var t=this.frameRect.width/this.cropRect.imgWidth,i=this.frameRect.height/this.cropRect.imgHeight,n=s()(window),o=n.width(),r=n.height(),a=Math.round(this.frameRect.x+this.cropRect.x*t),c=Math.round(this.frameRect.y+this.cropRect.y*i),u=Math.round(this.cropRect.width*t),d=Math.round(this.cropRect.height*i),h=a+u,p=c+d;this.ui.leftOverlay.css({display:a>0?"":"none",width:a}),this.ui.rightOverlay.css({display:h<o?"":"none",left:h}),this.ui.topOverlay.css({display:h>0&&a<o&&c>0?"":"none",left:a,width:u,height:c}),this.ui.bottomOverlay.css({display:h>0&&a<o&&p<r?"":"none",left:a,top:p,width:u}),this.ui.center.css({left:a,top:c,width:u,height:d}),this.ui.image.css({left:this.frameRect.x,top:this.frameRect.y,width:this.frameRect.width,height:this.frameRect.height});var m=s()(window).height();this.ui.toolbar.setInfo(this.cropRect.width,this.cropRect.height,this.frameRect.width/this.cropRect.imgWidth*100),this.ui.toolbar.updatePosition(h,p,m>p+24)}else this.ui&&(this.ui.image.remove(),this.ui.toolbar.elem.remove(),this.ui.leftOverlay.remove(),this.ui.rightOverlay.remove(),this.ui.topOverlay.remove(),this.ui.bottomOverlay.remove(),this.ui.center.remove()),this.keyDownHandler&&s()(document.body).off("keydown",this.keyDownHandler),this.touchDownHandler&&s()(window).off("touchstart mousedown",this.touchDownHandler),this.touchWheelHandler&&window.removeEventListener("wheel",this.touchWheelHandler),this.touchMoveHandler&&s()(window).off("touchmove mousemove",this.touchMoveHandler),this.touchEndHandler&&s()(window).off("touchend mouseup",this.touchEndHandler),this.touchCancelHandler&&s()(window).off("touchcancel",this.touchCancelHandler)},e.renderCanvas=function(e,t){var i=new a(t),n=document.createElement("canvas");n.width=Math.round(i.width),n.height=Math.round(i.height);var o=n.getContext("2d");return o&&o.drawImage(e,Math.round(-i.x),Math.round(-i.y)),n},e}()},"./ui/AnimationControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{AnimationControl:function(){return R},buildAnimCss:function(){return b}});var n,o=i("./UIComponent.ts"),s=i("./ui/MiniTabPane.ts"),r=i("./Label.ts"),a=i("./VerticalLayout.ts"),l=i("./DropdownBox.ts"),c=i("./SliderControl.ts"),u=i("./CheckBox.js"),d=i.n(u),h=i("./UIButton.ts"),p=i("./FlowLayout.ts"),m=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),g=function(){return g=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},f=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};function y(e){return{effect:e,timing:"linear",direction:"none",duration:.6,delay:0,loop:!1}}function b(e){return e?{animation:"wb-anim-"+e.effect+(e.direction?"-"+e.direction:"")+" "+e.duration+"s "+e.timing+" "+e.delay+"s","animation-iteration-count":e.loop?"infinite":1}:{animation:"none"}}var v=[{id:"top",name:__("Top")},{id:"right",name:__("Right")},{id:"bottom",name:__("Bottom")},{id:"left",name:__("Left")}],_=f([{id:"none",name:__("None")}],v,!0),C=[{id:"up",name:__("Up")},{id:"down",name:__("Down")}],w=[{id:"in",name:__("In")},{id:"out",name:__("Out")}],T=f([{id:"none",name:__("None")}],w,!0),E=[{id:"none",name:__("None")},{id:"in",name:__("In")}],I={normal:[{id:"none",name:__("None"),timing:"",directions:[]},{id:"fade-in",name:__("Fade In"),timing:"ease-out",directions:_},{id:"zoom-in",name:__("Zoom In"),timing:"ease-out",directions:_},{id:"bounce-in",name:__("Bounce In"),timing:"ease-out",directions:_},{id:"slide-in",name:__("Slide In"),timing:"ease-in-out",directions:v},{id:"rotate-in",name:__("Rotate In"),timing:"ease-out",directions:_}],hover:[{id:"none",name:__("None"),timing:"",directions:[]},{id:"zoom",name:__("Zoom"),timing:"ease-out",directions:w},{id:"pulse",name:__("Pulse"),timing:"linear",directions:T},{id:"buzz",name:__("Buzz"),timing:"linear",directions:[]},{id:"move",name:__("Move"),timing:"ease-in-out",directions:C},{id:"bounce",name:__("Bounce"),timing:"linear",directions:w},{id:"rotate",name:__("Rotate"),timing:"linear",directions:E}]},x={};for(var S in I){S in x||(x[S]={});for(var k=0,D=I[S];k<D.length;k++){var O=D[k];x[S][O.id]=O}}var R=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.onChange=t,i.effectTabId="",i.ignoreChange=!1,i.value={},i.effect=(new l.DropdownBox).setOnSelect((function(){return i.handleChange()})),i.direction=(new l.DropdownBox).setOnSelect((function(){return i.handleChange()})),i.duration=new c.SliderControl(.1,4,.1,"s").setOnChange((function(){return i.handleChange()})),i.delay=new c.SliderControl(0,8,.1,"s").setOnChange((function(){return i.handleChange()})),i.loop=new(d())(__("Loop")),i.loop.onChange((function(){return i.handleChange()})),i.optionsElem=(new a.VerticalLayout).setSpacing(12).addAllChildren([(i.directionBlock=new a.VerticalLayout).addAllChildren([new r.Label(__("Direction")),i.direction]),(new a.VerticalLayout).addAllChildren([new r.Label(__("Duration")),i.duration]),(new a.VerticalLayout).addAllChildren([new r.Label(__("Delay")),i.delay]),(new a.VerticalLayout).addAllChildren([i.loop])]),i.playBtn=new h.UIButton("",null,"fa fa-play").on("click",(function(){return i.handleChange()})),i.tabPane=new s.MiniTabPane([{id:"normal",title:__("Default")},{id:"hover",title:__("Hover")}],(function(e){return i.selectTab(e)})),i._elem.addClass("wb-animation-control").append((new a.VerticalLayout).setSpacing(12).addAllChildren([i.tabPane,(new a.VerticalLayout).addAllChildren([new r.Label(__("Effect")),(new p.FlowLayout).addAllChildren([i.effect,i.playBtn]).applyLayoutCellCss(0,{flex:"1 1 auto"})]),i.optionsElem]).getElem()),i}return m(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)})},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t.prototype.handleChange=function(){if(!this.ignoreChange){this.ignoreChange=!0;var e=this.effect.getSelectedItem();if(e){var t=this.effectTabId,i=e.getId();this.updateEffectOptions(t,i);var n=void 0;if("none"!=i){var o=this.direction.getSelectedItem();(n=y(i)).effect=i,n.timing=i&&i in x[t]?x[t][i].timing:"linear",n.direction=o?o.getId():"",n.duration=this.duration.getValue(),n.delay=this.delay.getValue(),n.loop=this.loop.getValue()}"normal"==t?this.value.normal=n:"hover"==t&&(this.value.hover=n),this.value._preview=t,"function"==typeof this.onChange&&this.onChange(),this.onValueChanged(),this.ignoreChange=!1}}},t.prototype.updateEffectOptions=function(e,t){var i=t&&t in x[e]?x[e][t].directions:[];this.direction.reload(i),this.directionBlock.setVisible(i.length>0);var n="none"!=t;this.optionsElem.setVisible(n),this.playBtn.setVisible(n)},t.prototype.selectTab=function(e){if(this.value){this.ignoreChange=!0;var t=void 0,i=this.effectTabId=e.id;"normal"==i?t=this.value.normal:"hover"==i&&(t=this.value.hover),t||(t=y("none")),this.effect.reload(I[i]),this.updateEffectOptions(i,t.effect),this.effect.setValue(t.effect),this.direction.setValue(t.direction),this.duration.setValue(t.duration),this.delay.setValue(t.delay),this.loop.setValue(t.loop),this.value._preview=i,this.onValueChanged(),this.ignoreChange=!1}},t.prototype.destroy=function(){this.effect.destroy(),this.direction.destroy(),this.tabPane.destroy(),e.prototype.destroy.call(this)},t.prototype.getValue=function(){return this.value.normal||this.value.hover?{normal:this.value.normal?g({},this.value.normal):void 0,hover:this.value.hover?g({},this.value.hover):void 0,_preview:this.value._preview}:null},t.prototype.setValue=function(e){this.value={},e&&(e.normal&&(this.value.normal=e.normal),e.hover&&(this.value.hover=e.hover)),this.selectTab(this.tabPane.getSelectedTab())},t}(o.UIComponent)},"./ui/BackgroundElementSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundElementSelector:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;t.bgElement=null,t._elem.addClass("wb-bg-element-controll"),t.cont=r()("<div>").addClass("wb-bg-element-control").appendTo(t._elem),t.label=r()("<div>").addClass("thumbnail wb-bg-element-cont").css({cursor:"default"}).appendTo(t.cont),t.labelIcon=r()("<span>").addClass("fa fa-picture-o").appendTo(t.label),t.labelText=r()("<div>").addClass("").appendTo(t.label);var i=r()("<span>").addClass("btn-group-vertical btn-group-sm wb-bg-element-ctrl").appendTo(t.cont);return t.probBtn=r()("<button>").addClass("btn btn-default").attr({type:"button",title:__("Background Properties")}).append('<span class="fa fa-pencil">').appendTo(i).on("click",(function(){return t.onProp()})),t.detachBtn=r()("<button>").addClass("btn btn-default").attr({type:"button",title:__("Extract Background")}).append('<span class="fa fa-chain-broken">').appendTo(i).on("click",(function(){return t.onDetach()})),t}return a(t,e),t.prototype.buildInit=function(e,t){},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._enabled!=t&&this.updateState()},t.prototype.updateState=function(){this._enabled&&this.bgElement?(this.probBtn.removeClass("disabled"),this.detachBtn.removeClass("disabled")):(this.probBtn.addClass("disabled"),this.detachBtn.addClass("disabled")),this.labelText.text(this.bgElement?this.bgElement.getClassType():""),this.labelIcon.removeClass("fa-picture-o fa-th-large").addClass(this.bgElement&&"Gallery"===this.bgElement.getClassType()?"fa-th-large":"fa-picture-o")},t.prototype.onProp=function(){this._enabled&&this.bgElement&&this.bgElement.comProperties()},t.prototype.onDetach=function(){if(this._enabled){var e=this.bgElement,t=e?e.getParent():null;this.bgElement=null,this.updateState(),this.bindings.length&&t&&t.extractBackground()}},t.prototype.setValue=function(e){this.bgElement=e,this._enabled&&this.updateState()},t.prototype.getValue=function(){return this.bgElement},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t}(o.UIComponent)},"./ui/BackgroundPopover.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundPopover:function(){return T}});var n,o,s=i("./ui/Popover.ts"),r=i("./VerticalLayout.ts"),a=i("./Label.ts"),l=i("./FlowLayout.ts"),c=i("./UIComponent.ts"),u=i("./WB_ImagePicker.class.js"),d=i.n(u),h=i("./ColorPicker.ts"),p=i("./SliderControl.ts"),m=i("./AlignSelector.ts"),g=i("./CheckBox.js"),f=i.n(g),y=i("./SizeSelector.ts"),b=i("./CustomContainer.ts"),v=i("./util/ChangeUpdateUtil.ts"),_=i("./TextField.ts"),C=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w=function(){return w=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},T=function(e){function t(t,i,n){void 0===n&&(n=__("Background"));var o=e.call(this,t,n,null,"wb-background-pop")||this;return o.onChange=i,o.value={},o.options=null,o.colorElem=new h.ColorPicker(!1,!1,!0).setInPlace(!0).setOnChange((function(){o.value.color=o.colorElem.getValue(),o.onChange(w({},o.value))})),o.imageElem=c.UIComponent.wrapControl(new(d())(null,63,!1,!0).setOnOpen((function(){o.isVisible()&&o.setVisible(!1)})).setOnClose((function(){o.isVisible()||o.setVisible(!0)})).setOnChange((function(e){o.value.image=e&&"null"!==e?e:"none",o.value.isVideo="video"===o.imageElem._control.getValueFileType(),o.updateOptionsVisibility(),o.onChange(w({},o.value)),o.isVisible()||o.setVisible(!0)}))),o.opacityElem=new p.SliderControl(0,100).setOnChange((function(e){o.value.opacity=e,o.onChange(w({},o.value))})),o.positionElem=(new m.AlignSelector).setOnChange((function(e){o.value.position=e,o.onChange(w({},o.value))})),o.repeatElem=new E((function(e){o.value.repeat=e.repeat,o.value.attachment=e.attachment,o.onChange(w({},o.value)),o.updatePositionHightlight(e.repeat)})),o.containmentElem=new I((function(e){o.value.size=e,o.onChange(w({},o.value))})),o.timeStartElem=new _.TextField("","mm:ss").on("change",(function(){o.validateTime("start");var e=o.timeStartElem.getValue();o.value.timeStartAt=e?""+x(e):null,o.onChange(w({},o.value))})),o.timeEndElem=new _.TextField("","mm:ss").on("change",(function(){o.validateTime("end");var e=o.timeEndElem.getValue();o.value.timeEndAt=e?""+x(e):null,o.onChange(w({},o.value))})),o.fullWidthElem=new(f())(__("Full screen width")).on("change",(function(){o.value.fullWidth=o.fullWidthElem.getValue(),o.onChange(w({},o.value))})),o.setContent((new l.FlowLayout).setSpacing("full").addClass("wb-bgcontrol-popc").addAllChildren([o.colorBlock=(new r.VerticalLayout).addClass("wb-bgcontrol-color-block").addAllChildren([o.colorElem]),(new r.VerticalLayout).setSpacing(12).addClass("wb-bgcontrol-image-block").addAllChildren([o.imageBlock=(new r.VerticalLayout).addAllChildren([o.imageLabel=new a.Label(__("Image")),o.imageElem]),o.optsBlock=(new r.VerticalLayout).setSpacing(12).addAllChildren([o.opacityBlock=(new r.VerticalLayout).addAllChildren([new a.Label(__("Opacity")),o.opacityElem]),o.imageOptsBlock=(new l.FlowLayout).addAllChildren([o.positionBlock=(new r.VerticalLayout).css({verticalAlign:"top"}).addAllChildren([new a.Label(__("Position")),o.positionElem]),o.repeatBlock=(new r.VerticalLayout).addAllChildren([new a.Label(__("Repeat")),o.repeatElem])]),o.videoOptsBlock=(new l.FlowLayout).addClass("wb-bgcontrol-time").addAllChildren([o.positionBlock=(new r.VerticalLayout).addAllChildren([new a.Label(__("Start at")),o.timeStartElem]),o.repeatBlock=(new r.VerticalLayout).addAllChildren([new a.Label(__("End at")),o.timeEndElem])]),o.sizeBlock=(new r.VerticalLayout).addAllChildren([new a.Label(__("Size")),o.containmentElem])]),o.fullWidthElem])]).getElem()),o}return C(t,e),t.prototype.validateTime=function(e){var t=this.timeStartElem.getValue(),i=this.timeEndElem.getValue();if(!("start"===e&&""===t||"end"===e&&""===i)){var n=S(t),o=S(i);if(e){var s=n?x(n):0,r=o?x(o):2147483647;"start"===e?s>r&&(n=S(Math.max(r-1,0))):"end"===e&&r<s&&(o=S(s+1))}this.timeStartElem.setValue(n),this.timeEndElem.setValue(o)}},t.prototype.getMouseDowned=function(){var t=this.colorElem.getPopover();return t?t.getMouseDowned():e.prototype.getMouseDowned.call(this)},t.prototype.updateOptionsVisibility=function(e){if(void 0===e&&(e=!1),this.options){var t=this.options;this.optsBlock.setVisible(!(!t.useImage||"none"==this.value.image)),this.imageOptsBlock.setVisible(t.useImage&&!this.value.isVideo),this.videoOptsBlock.setVisible(!(!t.allowVideo||!this.value.isVideo)),this.sizeBlock.setVisible(t.useSize&&!this.value.isVideo),e&&(this.colorBlock.setVisible(t.useColor),this.imageBlock.setVisible(t.useImage),t.useImage||this.optsBlock.setVisible(!1),this.positionBlock.setVisible(t.usePosition),this.repeatBlock.setVisible(t.useRepeat),this.repeatElem.setUseAttachment(t.useAttachment),this.sizeBlock.setVisible(t.useSize&&!this.value.isVideo),this.opacityBlock.setVisible(t.useOpacity),this.fullWidthElem.setVisible(t.useFullWidth),this.imageLabel.setText(t.allowVideo?__("Image")+" / "+__("Video"):__("Image")),this.imageElem._control.setMode(t.allowVideo?"image+video":"image"),t.allowVideo||this.videoOptsBlock.setVisible(!1))}},t.prototype.onDom=function(){this.colorElem.triggerOnDom(),e.prototype.onDom.call(this)},t.prototype.edit=function(e,t){this.value=w({},e),this.options=w({},t),this.colorElem.setValue(e.color||"transparent"),this.imageElem._control.setValueFileType(e.isVideo?"video":"image"),this.imageElem._control.setValue(e.image||"none"),this.optsBlock.setVisible(!(!e.image||"none"==e.image)),this.opacityElem.setValue(e.opacity||100),this.positionElem.setValue(e.position||"left top"),this.updatePositionHightlight(e.repeat||"repeat"),this.repeatElem.setValue(e),this.containmentElem.setValue(e.size||"auto auto"),this.fullWidthElem.setValue(!!e.fullWidth),this.timeStartElem.setValue(null!==e.timeStartAt?S(e.timeStartAt||""):""),this.timeEndElem.setValue(null!==e.timeEndAt?S(e.timeEndAt||""):""),this.updateOptionsVisibility(!0),this.setVisible(!0)},t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t),t||this.colorElem.triggerOnClose()},t.prototype.updatePositionHightlight=function(e){this.positionElem.setHightlight([]),"repeat"===e?this.positionElem.setHightlight([0,1,2,3,4,5,6,7,8]):"repeat-x"===e?this.positionElem.setHightlight([3,4,5]):"repeat-y"===e&&this.positionElem.setHightlight([1,4,7])},t.prototype.dispose=function(){this.colorElem.destroy(),this.imageElem.destroy(),this.opacityElem.destroy(),this.positionElem.destroy(),this.repeatElem.destroy(),this.containmentElem.destroy(),e.prototype.dispose.call(this)},t}(s.Popover),E=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.value={},i.horiElem=new(f())(__("Horizontally")).on("change",(function(){return i.onValueChange()})),i.vertElem=new(f())(__("Vertically")).on("change",(function(){return i.onValueChange()})),i.attaElem=new(f())(__("Don't scroll background")).on("change",(function(){return i.onValueChange()})),i.addClass("wb-bgcontrol-repeat"),i._elem.append(i.horiElem.getElem()).append(i.vertElem.getElem()).append(i.attaElem.getElem()),i}return C(t,e),t.prototype.onValueChange=function(){var e=this.horiElem.getValue(),t=this.vertElem.getValue(),i=this.attaElem.getValue();this.value.repeat=e&&t?"repeat":e||t?e?"repeat-x":"repeat-y":"no-repeat",this.value.attachment=i?"fixed":"scroll",this.onChange(w({},this.value))},t.prototype.setValue=function(e){this.value=w({},e);var t=e.repeat||"repeat";this.horiElem.setValue("repeat"===t||"repeat-x"===t),this.vertElem.setValue("repeat"===t||"repeat-y"===t),this.attaElem.setValue("fixed"===e.attachment)},t.prototype.setUseAttachment=function(e){this.attaElem.setVisible(e)},t}(c.UIComponent);!function(e){e[e.Auto=0]="Auto",e[e.Contain=1]="Contain",e[e.Cover=2]="Cover"}(o||(o={}));var I=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.value="",i.autoElem=new(f())(__("Auto"),!0).on("change",(function(){return i.onValueChange(i.autoElem.getValue()?o.Auto:o.Contain,!0)})),i.containElem=(new b.CustomContainer).addClass("wb-contain-ctrl").on("click",(function(){return i.onValueChange(o.Contain,!0)})),i.coverElem=(new b.CustomContainer).addClass("wb-cover-ctrl").on("click",(function(){return i.onValueChange(o.Cover,!0)})),i.widthElem=(new y.SizeSelector).setSpinnerVisible(!1).setUnitsVisible(!0).setUnits([{suffix:"px",label:"px"},{suffix:"%",min:1,max:100,precision:2,step:1},{fixedValue:"auto",label:__("auto")}]).setUnitsWidth(50).setFixedWidth(!1).on("change keyup",(function(e){return i.onChangeSize(!(!e||"keyup"!=e.type))})),i.heightElem=(new y.SizeSelector).setSpinnerVisible(!1).setUnitsVisible(!0).setUnits([{suffix:"px",label:"px"},{suffix:"%",min:1,max:100,precision:2,step:1},{fixedValue:"auto",label:__("auto")}]).setUnitsWidth(50).setFixedWidth(!1).on("change keyup",(function(e){return i.onChangeSize(!(!e||"keyup"!=e.type))})),i.waitToUpdateSize=new v.ChangeUpdateState((function(){return i.onChangeSize(!1)}),void 0,500),i.addClass("wb-bgcontrol-size"),i.addAllChildren([i.autoElem,i.containElem,i.coverElem,i.widthElem,i.heightElem]),i.setValue("auto auto"),i}return C(t,e),t.prototype.onChangeSize=function(e){if(e)(0,v.waitForChangeEndToUpdate)(this.waitToUpdateSize);else{var t=this.widthElem.getValue()+" "+this.heightElem.getValue();this.value!=t&&this.handleChange()}},t.prototype.onValueChange=function(e,t){void 0===t&&(t=!1),this.sizeValue!==e&&(this.sizeValue=e,this.containElem.removeClass("active"),this.coverElem.removeClass("active"),e==o.Auto?(this.containElem.setVisible(!1),this.coverElem.setVisible(!1),this.widthElem.setVisible(!0),this.heightElem.setVisible(!0)):(this.containElem.setVisible(!0),this.coverElem.setVisible(!0),this.widthElem.setVisible(!1),this.heightElem.setVisible(!1)),e==o.Contain?this.containElem.addClass("active"):e==o.Cover&&this.coverElem.addClass("active"),t&&this.handleChange())},t.prototype.handleChange=function(){this.sizeValue==o.Contain?this.value="contain":this.sizeValue==o.Cover?this.value="cover":this.value=this.widthElem.getValue()+" "+this.heightElem.getValue(),this.onChange(this.value)},t.prototype.setValue=function(e){if(this.value!=e){var t;if(this.value=e,"contain"==e)t=o.Contain,this.widthElem.setValue("auto"),this.heightElem.setValue("auto"),this.autoElem.setValue(!1);else if("cover"==e)t=o.Cover,this.widthElem.setValue("auto"),this.heightElem.setValue("auto"),this.autoElem.setValue(!1);else{t=o.Auto;var i=(e||"auto auto").trim().split(" ");this.widthElem.setValue(i[0]||"auto"),this.heightElem.setValue(i.length>1&&i[1]?i[1]:"auto"),this.autoElem.setValue(!0)}this.onValueChange(t)}},t}(l.FlowLayout);function x(e){var t=0;if(e=S(e)){var i=e.split(":");t=60*parseInt(i[0])+parseInt(i[1])}return t}function S(e){if(/^[0-9]+\:[0-5][0-9]$/.test(""+e)||""===e)return""+e;var t="",i=null,n=null,o=null,s=(""+e).split(":");return 1===s.length?o=parseInt(s[0]):2===s.length?(n=parseInt(s[0]),o=parseInt(s[1])):3===s.length&&(i=parseInt(s[0]),n=parseInt(s[1]),o=parseInt(s[2])),isNaN(i)||isNaN(n)||isNaN(o)?t="":null===i&&null===n&&null===o||(n||(n=0),i&&(n+=60*i,i=null),o||(o=0),o>59&&(n+=Math.floor(o/60),o%=60),t=n+":"+(o<10?"0":"")+o),t}},"./ui/BaiduMapsPlacesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BaiduMapsPlacesControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./ui/Popover.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;return t.value={},t.configSuplier=null,t.mapAddress=(0,s.default)("<input>").addClass("form-control").attr({type:"text"}).on("change",(function(){t.value.text=t.mapAddress.val(),t.value.latLng=[0,0],"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t.markerBtn=(0,s.default)("<button>").addClass("btn btn-default").attr({type:"button"}).append((0,s.default)("<span>").addClass("fa fa-map-marker")).on("click",(function(){return t.editMarker()})),t.markerEditor=new c(t.markerBtn,(function(e){e&&(t.value.latLng=e,t.value.text="".concat(e[0],", ").concat(e[1])),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t._elem.append((0,s.default)("<div>").addClass("input-group").append(t.mapAddress).append((0,s.default)("<span>").addClass("input-group-btn").append(t.markerBtn))),t.invalidate(),t}return a(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}"function"==typeof e.configSuplier&&(this.configSuplier=e.configSuplier)},t.prototype.destroy=function(){this.markerEditor.isVisible()&&this.markerEditor.setVisible(!1),e.prototype.destroy.call(this)},t.prototype.editMarker=function(){if(this.markerEditor.isVisible())this.markerEditor.setVisible(!1);else{var e="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],e)}},t.prototype.setValue=function(e){this.value=s.default.extend(!0,{},e),this.value.text&&""!==this.value.text||!this.value.latLng||this.mapAddress.attr("placeholder","".concat(this.value.latLng[0],", ").concat(this.value.latLng[1])),this.mapAddress.val(this.value.text||"")},t.prototype.getValue=function(){return s.default.extend(!0,{},this.value)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"function"==typeof t.configSuplier&&(this.configSuplier=t.configSuplier)},t}(o.UIComponent),c=function(e){function t(t,i){var n=e.call(this,t,__("Drag marker to set your location"),(0,s.default)("<div>").addClass("wb-baidumaps-places-med").css({width:500,height:300}),"wb-baidumaps-places-popover")||this;return n.onChange=i,n.value=[0,0],n.config=null,n}return a(t,e),t.prototype.edit=function(e,t){this.value=e,this.config=t,this.setVisible(!0)},t.prototype.setMarker=function(e,t){if(this.isInitialized()){var i,n=new BMap.Point(e[0],e[1]),o=this.map.getZoom();t&&(o=t.zoom,this.map.setMapType((i=t.mapTypeId,window[i]||BMAP_NORMAL_MAP))),this.map.reset(),this.map.setZoom(o),this.map.setCenter(n),this.mapMarker.setPosition(n)}},t.prototype.onInit=function(){var e=this,t=this.getContent()[0];t.id=this.id+"-demomap";var i=new BMap.Point(this.value[0],this.value[1]);this.map=new BMap.Map(t.id),this.map.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_SMALL})),this.map.addControl(new BMap.MapTypeControl),this.map.enableScrollWheelZoom(!0),this.map.centerAndZoom(i,15),this.mapMarker=new BMap.Marker(i),this.mapMarker.enableDragging(),this.mapMarker.addEventListener("dragend",(function(){var t=e.mapMarker.getPosition();t&&(e.value=[t.lng,t.lat],e.onChange.call(e,e.value))})),this.map.addOverlay(this.mapMarker)},t.prototype.onShown=function(){this.setMarker(this.value,this.config)},t}(r.Popover)},"./ui/BaseConfirmDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BaseConfirmDialog:function(){return h},showDeferred:function(){return p}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./Service.ts"),a=i("./VerticalLayout.ts"),l=i("./CustomContainer.ts"),c=i("./lib/jquery-1.11.3.min.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(t,i,n,o,s,c){var u=e.call(this,t,!1)||this;return u.deferred=null,u.setContent(new r.Service.UIBuilder({type:a.VerticalLayout,styleClass:"wb-confirm-dlg-body",children:[{type:l.CustomContainer,content:'\n\t\t\t\t\t<div class="wb-confirm-dlg-icon"><span class="'.concat(o,'"></span></div>\n\t\t\t\t\t<h4 class="wb-confirm-dlg-question">').concat(i,'</h4>\n\t\t\t\t\t<p class="wb-confirm-dlg-desc">').concat(n.replace(/[\r\n]+/g,"<br/>"),"</p>\n\t\t\t\t")},{type:"CheckBox",id:"confirm",label:__("Got it"),value:!1}]},u.fields)),u.addButton(s,(function(){return u.onCancel()})),u.addButton(c,(function(){return u.onConfirm()}),!0,"btn-danger"),u.footerElem.addClass("wb-confirm-dlg-footer"),u.setFooterVisible(!0),u.setMaxWidth(480),u}return d(t,e),t.prototype.setDeferred=function(e){this.deferred=e},t.prototype.onConfirm=function(){if(this.fields.confirm.getValue())this.setVisible(!1),this.deferred&&this.deferred.resolve();else{var e=this.fields.confirm.getElem();e.stop(!0,!1).animate({backgroundColor:"#d64b46"},60,(function(){e.stop(!0,!1).animate({backgroundColor:""},400,(function(){e.css({backgroundColor:""})}))}))}},t.prototype.onCancel=function(){this.setVisible(!1),this.deferred&&this.deferred.reject()},t}(s());function p(e){var t=u().Deferred();return e.setDeferred(t),e.fields.confirm.setValue(!1),e.setVisible(!0),t}},"./ui/BingMapsPlacesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BingMapsPlacesControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./ui/Popover.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;return t.value={},t.configSuplier=null,t.mapAddress=(0,s.default)("<input>").addClass("form-control").attr({type:"text"}).on("change",(function(){t.value.text=t.mapAddress.val(),t.value.latLng=[0,0],"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})).autocomplete({source:function(e,t){s.default.ajax({url:"https://dev.virtualearth.net/REST/v1/Locations",dataType:"jsonp",data:{key:wb_builder.mapsConfig.bingMapsApiKey,q:e.term},jsonp:"jsonp",success:function(e){var i=e.resourceSets[0];!i||i.estimatedTotal<=0||t(s.default.map(i.resources,(function(e){return{data:e,label:e.name+" ("+e.address.countryRegion+")",value:e.name}})))}})},minLength:1,change:function(e,i){if(i.item){var n=i.item.data.point;t.value.text=n.coordinates[0]+", "+n.coordinates[1],t.value.latLng=[n.coordinates[0],n.coordinates[1]],"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()}},select:function(e,i){if(i.item){var n=i.item.data.point;t.value.text=n.coordinates[0]+", "+n.coordinates[1],t.value.latLng=[n.coordinates[0],n.coordinates[1]],"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()}}}),t.markerBtn=(0,s.default)("<button>").addClass("btn btn-default").attr({type:"button"}).append((0,s.default)("<span>").addClass("fa fa-map-marker")).on("click",(function(){return t.editMarker()})),t.markerEditor=new c(t.markerBtn,(function(e){e&&(t.value.latLng=e,t.value.text="".concat(e[0],", ").concat(e[1])),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t._elem.append((0,s.default)("<div>").addClass("input-group").append(t.mapAddress).append((0,s.default)("<span>").addClass("input-group-btn").append(t.markerBtn))),t.invalidate(),t}return a(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}"function"==typeof e.configSuplier&&(this.configSuplier=e.configSuplier)},t.prototype.destroy=function(){this.markerEditor.isVisible()&&this.markerEditor.setVisible(!1),e.prototype.destroy.call(this)},t.prototype.editMarker=function(){if(this.markerEditor.isVisible())this.markerEditor.setVisible(!1);else{var e="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],e)}},t.prototype.setValue=function(e){this.value=s.default.extend(!0,{},e),this.value.text&&""!==this.value.text||!this.value.latLng||this.mapAddress.attr("placeholder","".concat(this.value.latLng[0],", ").concat(this.value.latLng[1])),this.mapAddress.val(this.value.text||"")},t.prototype.getValue=function(){return s.default.extend(!0,{},this.value)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"function"==typeof t.configSuplier&&(this.configSuplier=t.configSuplier)},t}(o.UIComponent),c=function(e){function t(t,i){var n=e.call(this,t,__("Drag marker to set your location"),(0,s.default)("<div>").addClass("wb-bingmaps-places-med").css({width:500,height:300}),"wb-bingmaps-places-popover")||this;return n.onChange=i,n.value=[0,0],n.config=null,n}return a(t,e),t.prototype.edit=function(e,t){this.value=e,this.config=t,this.setVisible(!0)},t.prototype.setMarker=function(e,t){if(this.isInitialized()){var i=new Microsoft.Maps.Location(this.value[0],this.value[1]),n={center:i};t&&(n.zoom=t.zoom,this.map.setMapType(t.mapTypeId)),this.map.setView(n),this.mapMarker.setLocation(i)}},t.prototype.onInit=function(){var e=this;Microsoft.Maps.loadModule("Microsoft.Maps.Themes.BingTheme",{callback:function(){var t=new Microsoft.Maps.Location(e.value[0],e.value[1]);e.map=new Microsoft.Maps.Map(e.getContent()[0],{credentials:wb_builder.mapsConfig.bingMapsApiKey,mapTypeId:Microsoft.Maps.MapTypeId.road,theme:new Microsoft.Maps.Themes.BingTheme,zoom:0,center:t}),e.mapMarker=new Microsoft.Maps.Pushpin(t,{draggable:!0}),Microsoft.Maps.Events.addHandler(e.mapMarker,"dragend",(function(t){var i=t.location||t.entity.getLocation();i&&(e.value=[i.latitude,i.longitude],e.onChange.call(e,e.value))})),e.map.entities.push(e.mapMarker)}})},t.prototype.onDom=function(){this.setMarker(this.value,this.config)},t}(r.Popover)},"./ui/ButtonStyleControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ButtonStyleControl:function(){return g}});var n,o=i("./UIComponent.ts"),s=i("./ui/MiniTabPane.ts"),r=i("./FontStyleSelector.ts"),a=i("./ColorPicker.ts"),l=i("./BackgroundControl.ts"),c=i("./BorderControl.ts"),u=i("./Label.ts"),d=i("./FlowLayout.ts"),h=i("./VerticalLayout.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){return m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},g=function(e){function t(t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var o=e.call(this)||this;return o.onChange=t,o.singleBorder=i,o.ignoreChange=!1,o.showRadius=!1,o.style=new r.FontStyleSelector((function(){return o.handleChange()})),o.color=(new a.ColorPicker).setOnChange((function(){return o.handleChange()})),o.bg=new l.BackgroundControl,o.bg.onChange=function(){return o.handleChange()},o.border=new c.BorderControl("bottom",!0),o.border.setAbsPopover(!0),o.border.setOnChange((function(){return o.handleChange()})),o.tabPane=new s.MiniTabPane([{id:"normal",title:__("Default")},{id:"hover",title:__("Hover")},{id:"active",title:__("Active")}],(function(e){return o.selectTab(e)})),o._elem.addClass("wb-btn-style-control").append((new h.VerticalLayout).setSpacing(12).addAllChildren([o.tabPane,(new d.FlowLayout).addAllChildren([(new h.VerticalLayout).addAllChildren([new u.Label(__("Style")),o.style]),(o.borderBlock=new h.VerticalLayout).addAllChildren([new u.Label(__("Color")),o.color])]),(new d.FlowLayout).addAllChildren([(new h.VerticalLayout).addAllChildren([new u.Label(__("Background")),o.bg]),(o.borderBlock=new h.VerticalLayout).addAllChildren([new u.Label(__("Border")),o.border])])]).getElem()),o.setShowRadius(n),o}return p(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)}),"singleBorder"in e&&(this.singleBorder=!!e.singleBorder),"showRadius"in e&&this.setShowRadius(!!e.showRadius)},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"singleBorder"in t&&(this.singleBorder=!!t.singleBorder),"showRadius"in t&&this.setShowRadius(!!t.showRadius)},t.prototype.setShowRadius=function(e){this.showRadius=e,this.border.setShowRadius(e)},t.prototype.handleChange=function(){if(!this.ignoreChange){this.ignoreChange=!0;var e=this.tabPane.getSelectedTab();"normal"==e.id?(this.value.normal.style=this.style.getValue(),this.value.normal.color=this.color.getValue(),this.value.normal.bg=this.bg.getValue(),this.value.normal.border=this.border.getValue(),this.showRadius&&(this.value.normal.corners=(0,c.toRadiusValue)(this.border.getValue()))):"hover"==e.id?(this.value.hover.style=this.style.getValue(),this.value.hover.color=this.color.getValue(),this.value.hover.bg=this.bg.getValue(),this.singleBorder||(this.value.hover.border=this.border.getValue(),this.showRadius&&(this.value.hover.corners=(0,c.toRadiusValue)(this.value.hover.border)))):"active"==e.id&&(this.value.active.style=this.style.getValue(),this.value.active.color=this.color.getValue(),this.value.active.bg=this.bg.getValue(),this.singleBorder||(this.value.active.border=this.border.getValue(),this.showRadius&&(this.value.active.corners=(0,c.toRadiusValue)(this.value.active.border)))),"function"==typeof this.onChange&&this.onChange(),this.onValueChanged(),this.ignoreChange=!1}},t.prototype.selectTab=function(e){this.value&&(this.ignoreChange=!0,"normal"==e.id?(this.style.setValue(this.value.normal.style),this.color.setValue(this.value.normal.color),this.bg.setValue(this.value.normal.bg),this.border.setValue(this.value.normal.border?this.value.normal.border:null),this.borderBlock.setVisible(!0)):"hover"==e.id?(this.style.setValue(this.value.hover.style),this.color.setValue(this.value.hover.color),this.bg.setValue(this.value.hover.bg),this.border.setValue(this.value.hover.border?this.value.hover.border:null),this.singleBorder?this.borderBlock.setVisible(!1):this.borderBlock.setVisible(!0)):"active"==e.id&&(this.style.setValue(this.value.active.style),this.color.setValue(this.value.active.color),this.bg.setValue(this.value.active.bg),this.border.setValue(this.value.active.border?this.value.active.border:null),this.singleBorder?this.borderBlock.setVisible(!1):this.borderBlock.setVisible(!0)),this.ignoreChange=!1)},t.prototype.destroy=function(){this.style.destroy(),this.color.destroy(),this.bg.destroy(),this.border.destroy(),this.tabPane.destroy(),e.prototype.destroy.call(this)},t.prototype.getValue=function(){return{normal:m({},this.value.normal),hover:m({},this.value.hover),active:m({},this.value.active)}},t.prototype.setValue=function(e){this.value={normal:m({},e.normal),hover:m({},e.hover),active:m({},e.active)},this.selectTab(this.tabPane.getSelectedTab())},t}(o.UIComponent)},"./ui/ChangeTemplateDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{show:function(){return s}});var n=i("./ui/BaseConfirmDialog.ts"),o=null;function s(){return o||(o=new n.BaseConfirmDialog(__("Change template"),__("Are you sure you want to change current template?"),__("Once changed your information will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes, change template"))),(0,n.showDeferred)(o)}},"./ui/ColorPickerPopover.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ColorPickerPopover:function(){return f}});var n,o=i("./ui/Popover.ts"),s=i("./VerticalLayout.ts"),r=i("./Label.ts"),a=i("./FlowLayout.ts"),l=i("./UIComponent.ts"),c=i("./util/EventUtil.ts"),u=i("./ui/NumControl.ts"),d=i("./lib/jquery-1.11.3.min.js"),h=i.n(d),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){return m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},g={r:255,g:255,b:255,a:0},f=function(e){function t(t,i,n){void 0===n&&(n=__("Color"));var o=e.call(this,t,n,null,"wb-color-picker-pop")||this;return o.onChange=i,o.value=new I,o.useTransparent=!0,o.satValElem=new y((function(e){o.fixupColor(e),o.setColor(e,!0),o.onChange(x(R(e)))}),(function(){return e.prototype.setMouseDowned.call(o,!0)}),(function(){return e.prototype.setMouseDowned.call(o,!1)})),o.hueElem=new b((function(e){o.fixupColor(e),o.setColor(e,!0),o.onChange(x(R(e)))})),o.opacityElem=new v((function(e){o.setColor(e,!0),o.onChange(x(R(e)))})),o.hexElem=new C((function(e,t){t||o.fixupColor(e),o.setColor(O(e),!0),o.onChange(x(e))})),o.colorPreviewElem=new _((function(e){return o.onFavorite(e)}),(function(e){o.setColor(O(e),!0),o.onChange(x(e))})),o.rgbFields=new w((function(e){o.fixupColor(e),o.setColor(e,!0),o.onChange(x(R(e)))})),o.recentColors=new T(10,(function(e){o.setColor(O(e),!0),o.onChange(x(e))})),o.favoriteColors=new T(10,(function(e){o.setColor(O(e),!0),o.onChange(x(e))})),o.setContent((new s.VerticalLayout).addClass("wb-color-picker-popc").setSpacing(12).addAllChildren([(new s.VerticalLayout).addAllChildren([new r.Label(__("Color")),(new a.FlowLayout).addAllChildren([o.satValElem,(new s.VerticalLayout).setSpacing(15).addAllChildren([o.colorPreviewElem,o.hexElem])])]),o.hueElem,o.opacityBlock=(new s.VerticalLayout).addAllChildren([new r.Label(__("Opacity")),o.opacityElem]),(new s.VerticalLayout).addAllChildren([new r.Label(__("Recent")),o.recentColors]),(new s.VerticalLayout).addAllChildren([new r.Label(__("Favourite")),o.favoriteColors]),o.rgbFields]).getElem()),o}return p(t,e),t.prototype.setUseTransparent=function(e){this.useTransparent!=e&&(this.useTransparent=e,e?this.opacityBlock.setVisible(!0):this.opacityBlock.setVisible(!1),this.hexElem.setUseTransparent(e))},t.prototype.edit=function(e){this.setColor(O(e)),this.updateColorGrid(),this.isContentDetached||this.setVisible(!0)},t.prototype.triggerOnClose=function(){var e=this,t=D(R(this.value),!this.useTransparent);wb_builder.prependColor("recent",t,(function(){return e.updateColorGrid()}))},t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t),t||this.triggerOnClose()},t.prototype.onFavorite=function(e){var t=this,i=D(e,!this.useTransparent);this.isFavored(i)?(this.colorPreviewElem.setFavored(!1),wb_builder.removeColor("custom",i,(function(){return t.updateColorGrid()}))):(this.colorPreviewElem.setFavored(!0),wb_builder.appendColor("custom",i,(function(){return t.updateColorGrid()})))},t.prototype.isFavored=function(e){var t=wb_builder.getColorPalettes();return t&&t.custom&&(t.custom.indexOf(e.toLowerCase())>=0||t.custom.indexOf(e.toUpperCase())>=0)},t.prototype.fixupColor=function(e){0==e.a&&0==this.value.a&&(e.a=1)},t.prototype.updateColorGrid=function(){var e=wb_builder.getColorPalettes();this.recentColors.setCells(e&&e.recent instanceof Array?e.recent:[]),this.favoriteColors.setCells(e&&e.custom instanceof Array?e.custom:[])},t.prototype.dispose=function(){this.isVisible()&&this.triggerOnClose(),this.satValElem.destroy(),this.hueElem.destroy(),this.opacityElem.destroy(),this.hexElem.destroy(),this.colorPreviewElem.destroy(),this.recentColors.destroy(),this.favoriteColors.destroy(),this.rgbFields.destroy(),e.prototype.dispose.call(this)},t.prototype.setColor=function(e,t){void 0===t&&(t=!1),this.value=e;var i=R(e);this.colorPreviewElem.setColor(i),this.colorPreviewElem.setFavored(this.isFavored(D(i,!this.useTransparent))),t||this.colorPreviewElem.setPrevColor(i),this.hexElem.setColor(i),this.opacityElem.setColor(e),this.satValElem.setColor(e),this.hueElem.setColor(e),this.rgbFields.setColor(e)},t.prototype.onDom=function(){this.satValElem.onDom(),this.hueElem.onDom(),this.opacityElem.onDom()},t}(o.Popover),y=function(e){function t(t,i,n){var o=e.call(this)||this;return o.onChange=t,o.onStart=i,o.size={w:0,h:0},o.color=new I(0,0,0,-1),o.addClass("wb-sat-val-ctrl"),o.cursor=h()("<div>").addClass("wb-cur-ctrl"),o._elem.append(o.cursor).append(h()("<div>").addClass("wb-brd-ctrl")),E.bind(o._elem,(function(e,t){o.color.s=o.size.w>2?Math.max(Math.min(Math.round(100*(e-1)/(o.size.w-2)*100)/100,100),0):0,o.color.v=o.size.h>2?Math.max(Math.min(100-Math.round(100*(t-1)/(o.size.h-2)*100)/100,100),0):0,o.setColor(o.color,!0),o.onChange(m({},o.color))}),o.onStart,n),o}return p(t,e),t.prototype.onDom=function(){this.size.w=this._elem.outerWidth(),this.size.h=this._elem.outerHeight(),this.setColor(this.color,!0)},t.prototype.setColor=function(e,t){void 0===t&&(t=!1),(this.color.h!=e.h||this.color.s!=e.s||this.color.v!=e.v||this.color.a!=e.a||t)&&(this.color=m({},e),this._elem[0].style.backgroundColor=D(R(m(m({},e),{s:100,v:100,a:1}))),this.cursor[0].style.left="".concat(e.s*(this.size.w-2)/100+1,"px"),this.cursor[0].style.top="".concat((100-e.v)*(this.size.h-2)/100+1,"px"))},t}(l.UIComponent),b=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.size={w:0,h:0},i.color=new I(0,0,0,-1),i.addClass("wb-hue-ctrl"),i.caret=h()("<span>").addClass("fa fa-caret-up wb-caret-ctrl"),i._elem.append(i.caret),E.bind(i._elem,(function(e){i.color.h=i.size.w>2?Math.max(Math.min(Math.round(360*(e-1)/(i.size.w-2)*10)/10,359),0):0,i.setColor(i.color,!0),i.onChange(m({},i.color))})),i}return p(t,e),t.prototype.onDom=function(){this.size.w=this._elem.outerWidth(),this.size.h=this._elem.outerHeight(),this.setColor(this.color,!0)},t.prototype.setColor=function(e,t){void 0===t&&(t=!1),(this.color.h!=e.h||this.color.s!=e.s||this.color.v!=e.v||this.color.a!=e.a||t)&&(this.color=m({},e),this.caret[0].style.left="".concat(e.h*(this.size.w-2)/360+1,"px"))},t}(l.UIComponent),v=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.size={w:0,h:0},i.color=new I(0,0,0,-1),i.numElem=new u.NumControl("%",100,(function(e){i.color.a=e/100,i.setColor(i.color,!0),i.onChange(m({},i.color))})).setStyle(u.NumControlStyle.WidePostfix),i.addClass("wb-opacity-ctrl"),i.bg=h()("<div>").addClass("wb-color-ctrl"),i.caret=h()("<span>").addClass("fa fa-caret-up wb-caret-ctrl"),i.pal=h()("<div>").addClass("wb-pal-ctrl").append(i.bg).append(i.caret),i._elem.append(i.pal).append(i.numElem.getElem()),E.bind(i.pal,(function(e){i.color.a=i.size.w>2?Math.max(Math.min(Math.round((e-1)/(i.size.w-2)*100)/100,1),0):0,i.setColor(i.color,!0),i.onChange(m({},i.color))})),i}return p(t,e),t.prototype.onDom=function(){this.size.w=this.pal.outerWidth(),this.size.h=this.pal.outerHeight(),this.setColor(this.color,!0)},t.prototype.setColor=function(e,t){if(void 0===t&&(t=!1),this.color.h!=e.h||this.color.s!=e.s||this.color.v!=e.v||this.color.a!=e.a||t){this.color=m({},e);var i=void 0!==e.a?e.a:1;this.bg[0].style.background=function(e){var t=D(m(m({},e),{a:0})),i=D(m(m({},e),{a:1}));return"linear-gradient(to right, ".concat(t," 0%, ").concat(i," 100%)")}(R(e)),this.caret[0].style.left="".concat(i*(this.size.w-2)+1,"px"),this.numElem.setValue(Math.round(100*i))}},t}(l.UIComponent),_=function(e){function t(t,i){var n=e.call(this)||this;return n.color={r:0,g:0,b:0,a:1},n.prevColor={r:0,g:0,b:0,a:1},n.isFavored=!1,n.addClass("wb-color-preview-ctrl"),n.currElem=h()("<div>").addClass("wb-color-ctrl"),n.prevElem=h()("<div>").addClass("wb-color-ctrl"),n.favBtn=h()("<span>").addClass("fa wb-fav-ctrl").on("click",(function(){return t(m({},n.color))})),n._elem.append(h()("<div>").addClass("wb-curr-ctrl").append(n.currElem)).append(h()("<div>").addClass("wb-prev-ctrl").on("click",(function(){return i(m({},n.prevColor))})).append(n.prevElem)).append(n.favBtn),n.isFavored=!n.isFavored,n.setFavored(!n.isFavored),n}return p(t,e),t.prototype.setFavored=function(e){this.isFavored!=e&&(this.isFavored=e,e?this.favBtn.removeClass("fa-star-o").addClass("fa-star"):this.favBtn.removeClass("fa-star").addClass("fa-star-o"))},t.prototype.setColor=function(e){this.color=m({},e),this.currElem[0].style.backgroundColor=D(e)},t.prototype.setPrevColor=function(e){this.prevColor=m({},e),this.prevElem[0].style.backgroundColor=D(e)},t}(l.UIComponent),C=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.color={r:0,g:0,b:0,a:-1},i.updateTimeout=0,i.lastInputValue="",i.useTransparent=!0,i.input=h()("<input>").addClass("form-control").attr({type:"text"}).on("change",(function(e){return i.onValueChange(e)})).on("paste",(function(e){return i.onValueChange(e,!0)})).on("keydown",(function(e){return i.onValueChange(e,!1)})).on("keyup",(function(e){return i.onValueChange(e,!0)})),i.clearBtn=h()("<button>").addClass("btn btn-default").attr({type:"button"}).append(h()("<span>").addClass("fa fa-remove")).on("click",(function(){return i.onClear()})),i._elem.addClass("input-group wb-hex-ctrl").append(i.input).append(h()("<span>").addClass("input-group-btn").append(i.clearBtn)),i}return p(t,e),t.prototype.onValueChange=function(e,t){var i=this;void 0===t&&(t=!1);var n=e.keyCode,o=this.input.val();return t||8==n||9==n||13==n||27==n||n>=112&&n<=123||n>=16&&n<=18||n>=33&&n<=36||n>=37&&n<=40||n>=45&&n<=46||n>=48&&n<=57&&!e.shiftKey||n>=65&&n<=70||n>=96&&n<=105||e.ctrlKey||e.metaKey?(t&&this.lastInputValue!=o&&(this.lastInputValue=o,this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){var e,t,n=i.input.val();e=S(n,i.color),i.color=e.color,(t=e.val)!=n&&n.length>=6&&i.input.val(t),i.onChange(m({},i.color),!1)}),500)),!0):(e.preventDefault(),!1)},t.prototype.onClear=function(){this.onChange(m({},g),!0)},t.prototype.setUseTransparent=function(e){this.useTransparent!=e&&(this.useTransparent=e,e?this.removeClass("wb-noclear-ctrl"):this.addClass("wb-noclear-ctrl"))},t.prototype.setColor=function(e){var t=x(m({},e));this.color.r==t.r&&this.color.g==t.g&&this.color.b==t.b&&this.color.a==t.a||(this.color=m({},e),this.input.val(k(e)))},t}(l.UIComponent),w=function(e){function t(t){var i=e.call(this)||this;return i.onChange=t,i.color=new I(0,0,0,-1),i.isRgb=!0,i.rhElem=new u.NumControl("R",255,(function(e){if(i.isRgb){var t=R(i.color);t.r=e,i.color=O(t)}else i.color.h=e;i.onChange(m({},i.color))})).setStyle(u.NumControlStyle.Compact),i.gsElem=new u.NumControl("G",255,(function(e){if(i.isRgb){var t=R(i.color);t.g=e,i.color=O(t)}else i.color.s=e;i.onChange(m({},i.color))})).setStyle(u.NumControlStyle.Compact),i.bvElem=new u.NumControl("B",255,(function(e){if(i.isRgb){var t=R(i.color);t.b=e,i.color=O(t)}else i.color.v=e;i.onChange(m({},i.color))})).setStyle(u.NumControlStyle.Compact),i.addClass("wb-rgb-hsv-ctrl"),i._elem.append(i.rhElem.getElem()).append(i.gsElem.getElem()).append(i.bvElem.getElem()).append(h()("<div>").addClass("wb-chbtn-ctrl").append(h()("<span>").addClass("fa fa-caret-up")).append(h()("<span>").addClass("fa fa-caret-down")).on("click",(function(){return i.toggleType()}))),i}return p(t,e),t.prototype.toggleType=function(){this.isRgb=!this.isRgb,this.isRgb?(this.rhElem.setUnit("R",255),this.gsElem.setUnit("G",255),this.bvElem.setUnit("B",255)):(this.rhElem.setUnit("H",359),this.gsElem.setUnit("S",100),this.bvElem.setUnit("V",100)),this.updateByType()},t.prototype.updateByType=function(){if(this.isRgb){var e=R(this.color);this.rhElem.setValue(Math.round(e.r)),this.gsElem.setValue(Math.round(e.g)),this.bvElem.setValue(Math.round(e.b))}else this.rhElem.setValue(Math.round(this.color.h)),this.gsElem.setValue(Math.round(this.color.s)),this.bvElem.setValue(Math.round(this.color.v))},t.prototype.setColor=function(e){this.color.h==e.h&&this.color.s==e.s&&this.color.v==e.v&&this.color.a==e.a||(this.color=m({},e),this.updateByType())},t}(l.UIComponent),T=function(e){function t(t,i){void 0===t&&(t=10);var n=e.call(this)||this;n.onSelect=i,n.cells=[],n.colors=[],n.emptyColor={r:255,g:255,b:255,a:1},n.emptyColorStr=D(n.emptyColor),n.addClass("wb-color-grid-ctrl");for(var o=function(e){var t=h()("<div>").addClass("wb-color-ctrl"),i=h()("<div>").append(t).on("click",(function(){return n.selectColor(e)}));s.cells.push(t),s.colors.push(s.emptyColorStr),s._elem.append(i)},s=this,r=0;r<t;r++)o(r);return n}return p(t,e),t.prototype.selectColor=function(e){var t;t=S(this.colors[e],this.emptyColor).color,this.onSelect(t)},t.prototype.setCells=function(e){for(var t=e.length,i=0,n=this.cells.length;i<n;i++){var o=i<t?e[i]:this.emptyColorStr;this.cells[i][0].style.backgroundColor=o,this.colors[i]=o}},t}(l.UIComponent),E=new(function(){function e(){this.init=!1,this.event=null}return e.prototype.bind=function(e,t,i,n){var o=this;this.setup(),e.on("mousedown touchstart",(function(e){return o.start(e,t,i,n)}))},e.prototype.setup=function(){var e=this;if(!this.init){this.init=!0;var t=h()(document.body);t.on("mousemove touchmove",(function(t){return e.onMove(t)})),t.on("mouseup touchend touchcancel",(function(t){return e.onUp(t)}))}},e.prototype.start=function(e,t,i,n){return 0!==e.button&&void 0!==e.button||!!this.event||(i&&i(),this.event={pos:(0,c.posFromEvent)(e),off:h()(e.target).offset(),onMove:t,onEnd:n},e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1)},e.prototype.onMove=function(e){if(this.event){var t=(0,c.posFromEvent)(e);this.event.onMove(t.left-this.event.off.left,t.top-this.event.off.top)}},e.prototype.onUp=function(e){if(this.event){var t=(0,c.posFromEvent)(e);if(this.event.onMove(t.left-this.event.off.left,t.top-this.event.off.top),this.event.onEnd){var i=this.event.onEnd;window.requestAnimationFrame((function(){return i()}))}this.event=null}},e}()),I=function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),this.h=e,this.s=t,this.v=i,this.a=n};function x(e){return e.r=Math.round(e.r),e.g=Math.round(e.g),e.b=Math.round(e.b),e.a=void 0!==e.a?Math.round(100*e.a)/100:1,e}function S(e,t){var i=e.trim().toLowerCase();if(i.length>5&&("rgb("===i.substring(0,4)||"rgba("===i.substring(0,5))){var n=i.split("(")[1].split(")")[0].split(","),o=m({},t);return n.length>0&&(o.r=parseInt(n[0],10)),n.length>1&&(o.g=parseInt(n[1],10)),n.length>2&&(o.b=parseInt(n[2],10)),n.length>3&&(o.a=parseFloat(n[3])),{color:o,val:i}}if("transparent"===i)return{color:m({},g),val:i};for(;"#"==i[0];)i=i.substring(1);if(i.length<=3){for(;i.length<3;)i="0"+i;i=i.substring(0,1)+i.substring(0,1)+i.substring(1,2)+i.substring(1,2)+i.substring(2,3)+i.substring(2,3)+"ff"}else if(i.length<=6){for(;i.length<6;)i="0"+i;i+="ff"}else i.length<8&&(i=i.substring(0,6)+"ff");var s=parseInt(i.substring(0,2),16),r=parseInt(i.substring(2,4),16),a=parseInt(i.substring(4,6),16),l=Math.round(parseInt(i.substring(6,8),16)/255*100)/100,c=m({},t);return isNaN(s)||isNaN(r)||isNaN(a)||isNaN(l)?i=k(c):(c.r=s,c.g=r,c.b=a,c.a=l,i=i.substring(0,6)),{color:c,val:i}}function k(e){var t=Math.max(Math.min(Math.round(e.r),255),0).toString(16).toLowerCase(),i=Math.max(Math.min(Math.round(e.g),255),0).toString(16).toLowerCase(),n=Math.max(Math.min(Math.round(e.b),255),0).toString(16).toLowerCase();return(t.length<2?"0".concat(t):t)+(i.length<2?"0".concat(i):i)+(n.length<2?"0".concat(n):n)}function D(e,t){void 0===t&&(t=!1);var i=x(m({},e)),n=void 0!==i.a?i.a:1;return t||1==n?"#"+k(e):"rgba(".concat(i.r,", ").concat(i.g,", ").concat(i.b,", ").concat(n,")")}function O(e){var t,i=0,n=e.r/255,o=e.g/255,s=e.b/255,r=Math.max(n,o,s),a=r-Math.min(n,o,s),l=function(e){return(r-e)/6/a+.5};if(0==a)i=t=0;else{t=a/r;var c=l(n),u=l(o),d=l(s);n===r?i=d-u:o===r?i=1/3+c-d:s===r&&(i=2/3+u-c),i<0?i+=1:i>1&&(i-=1)}return{h:Math.round(360*i*100)/100,s:Math.round(100*t*100)/100,v:Math.round(100*r*100)/100,a:void 0!==e.a?e.a:1}}function R(e){var t={r:0,g:0,b:0},i=Math.round(100*e.h)/100,n=Math.round(255*e.s/100*100)/100,o=Math.round(255*e.v/100*100)/100;if(0===n)t.r=t.g=t.b=o;else{var s=o,r=(255-n)*o/255,a=i%60*(s-r)/60;360===i&&(i=0),i<60?(t.r=s,t.b=r,t.g=r+a):i<120?(t.g=s,t.b=r,t.r=s-a):i<180?(t.g=s,t.r=r,t.b=r+a):i<240?(t.b=s,t.r=r,t.g=s-a):i<300?(t.b=s,t.g=r,t.r=r+a):i<360?(t.r=s,t.g=r,t.b=s-a):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(100*t.r)/100,g:Math.round(100*t.g)/100,b:Math.round(100*t.b)/100,a:e.a}}},"./ui/CommonalitySelectorControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{CommonalitySelectorControl:function(){return h}});var n,o=i("./UIComponent.ts"),s=i("./Service.ts"),r=i("./VerticalLayout.ts"),a=i("./jquery-builder.ts"),l=i("./util/MenuList.ts"),c=i("./WB_ToolTipControl.class.js"),u=i.n(c),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h=function(e){function t(){var t=e.call(this)||this;t.isInherited=!1,t.lockedLanguageValues={};var i=function(){t.fields.isSpecCommon.getValue()?(t.fields.isCommonValues.setVisible(!0),t.fields.isNotCommonValues.setVisible(!1)):t.fields.isNotCommon.getValue()?(t.fields.isCommonValues.setVisible(!1),t.fields.isNotCommonValues.getElem().is(".multilang")&&t.fields.isNotCommonValues.setVisible(!0)):(t.fields.isCommonValues.setVisible(!1),t.fields.isNotCommonValues.setVisible(!1)),t.onValueChanged()};return s.Service.UIBuilder.buildLayout({type:r.VerticalLayout,children:[{type:"CustomContainer",id:"inheritanceNoticeSingleLang",styleClass:"",visible:!1,content:"<small>"+__("This element inherits visibility on other pages from one of its parents.")+"</small>"},{type:"CustomContainer",id:"inheritanceNoticeMultiLang",styleClass:"",visible:!1,content:__("Show in specific languages")},{type:"RadioBox",id:"isNotCommon",label:__("Show in current page only"),group:"isCommon"+t._instanceIndex,change:i},{type:"CustomContainer",id:"isNotCommonValues",styleClass:"well wb-comproperty-show",visible:!1},{type:"RadioBox",id:"isCommon",label:__("Show in all pages"),group:"isCommon"+t._instanceIndex,css:{marginTop:10},change:i},{type:"RadioBox",id:"isSpecCommon",label:__("Show in a specific pages"),group:"isCommon"+t._instanceIndex,css:{marginTop:10},change:i},{type:"CustomContainer",id:"isCommonValues",styleClass:"well wb-comproperty-show",visible:!1}]},t._elem,t.fields={}),t.fields.isNotCommonValues.getElem().on("change",(function(e){return t.onCheckBoxChange(e)})),t.fields.isCommonValues.getElem().on("change",(function(e){return t.onCheckBoxChange(e)})),t.fields.inheritanceNoticeMultiLang.getElem().append(new(u())("warn",__("This element inherits visibility on other pages from one of its parents.")).elem),t}return d(t,e),t.prototype.buildInit=function(e,t){},t.prototype.onCheckBoxChange=function(e){var t=e.target;if(!t.checked){var i=(0,a.default)(e.target).closest("tr[data-pid]");(i.length?""+i.data("pid")!=""+wb_builder.pageId||i.find("input[type=checkbox]:checked").length>0:(0,a.default)(e.currentTarget).find("input[type=checkbox]:checked").length>0)||(t.checked=!0)}this.onValueChanged()},t.prototype.onInterfaceChanged=function(){},t.isElementVisible=function(e,t,i,n){var o=wb_builder.site.getLastDefLang();i=(i=i||wb_builder.site.currSelLang)||o,n=n||wb_builder.pageId;var s=Object.keys(t).length;if(i)if(e&&s){var r=t[""+n];if("object"==typeof r){if(r[i])return!0;if(!(i in r)&&o&&r[o])return!0}else if(t[""+n])return!0}else{if(e)return!0;if(s){if(t[i])return!0;if(!(i in t)&&o&&t[o])return!0}else if(n==wb_builder.pageId)return!0}else if(e&&s){if(t[""+n])return!0}else{if(e)return!0;if(n==wb_builder.pageId)return!0}return!1},t.prototype.setValue=function(e){var i=e.isCommon,n=e.includePages;Object.keys(n).length>0&&i?(this.fields.isNotCommon.setValue(!1),this.fields.isCommon.setValue(!1),this.fields.isSpecCommon.setValue(!0),this.fields.isCommonValues.setVisible(!0),this.fields.isNotCommonValues.setVisible(!1)):i?(this.fields.isNotCommon.setValue(!1),this.fields.isCommon.setValue(!0),this.fields.isSpecCommon.setValue(!1),this.fields.isCommonValues.setVisible(!1),this.fields.isNotCommonValues.setVisible(!1)):(this.fields.isNotCommon.setValue(!0),this.fields.isCommon.setValue(!1),this.fields.isSpecCommon.setValue(!1),this.fields.isCommonValues.setVisible(!1),this.fields.isNotCommonValues.setVisible(wb_builder.site.languages.length>0)),this.fields.isNotCommon.setVisible(!this.isInherited),this.fields.isCommon.setVisible(!this.isInherited),this.fields.isSpecCommon.setVisible(!this.isInherited),this.fields.inheritanceNoticeSingleLang.setVisible(this.isInherited&&0===wb_builder.site.languages.length),this.fields.inheritanceNoticeMultiLang.setVisible(this.isInherited&&wb_builder.site.languages.length>0),this.fields.isNotCommonValues.getElem().empty(),this.fields.isCommonValues.getElem().empty();var o,s,r,c,u,d,h,p=wb_builder.site.languages,m={},g=(0,l.buildMenuStruct)(!1);for(o=0;o<g.length;o++)for(var f=g[o],y=0;y<f.items.length;y++){var b=f.items[y];b.uID&&"page"===b.type&&b.pageId&&(m["#"+b.pageId]=__tr(b.fullName,wb_builder.site.getLastDefLang()))}if(p.length){var v=(0,a.default)("<table></table>");for(this.fields.isNotCommonValues.getElem().addClass("multilang").append(v),c=wb_builder.site.pages["#"+wb_builder.pageId],d=(0,a.default)("<tr/>"),this.isInherited||d.append((0,a.default)('<td class="page-name"/>')),o=0;s=p[o];o++)u=(0,a.default)("<td>"+s.code+"</td>"),d.append(u);v.append(d),(h=c&&"#"+c.id in m?m["#"+c.id]:null)||(h=c?__tr(c.title,null,__tr(c.title,wb_builder.site.getLastDefLang(),"["+__("no name")+"]")):"["+__("no name")+"]"),d=(0,a.default)("<tr/>"),this.isInherited||d.append((0,a.default)('<td class="page-name"><a href="javascript:void(0)">'+h+"</a></td>"));for(o=0;s=p[o];o++)(C=(u=(0,a.default)('<td><input type="checkbox" name="isNotCommonPage" /></td>')).children("input")).val(s.code),this.lockedLanguageValues.hasOwnProperty(s.code)?(C.get(0).checked=this.lockedLanguageValues[s.code],C.addClass("disabled"),C.attr("disabled","disabled"),C.attr("readonly","readonly"),C.attr("title",__("One of parent layout elements is hidden in this language"))):t.isElementVisible(i,n,s.code)&&(C.get(0).checked=!0),d.append(u);v.append(d);var _=(0,a.default)("<table></table>");for(this.fields.isCommonValues.getElem().append(_),d=(0,a.default)('<tr><td class="page-name"></td></tr>'),o=0;s=p[o];o++)u=(0,a.default)('<td><a href="javascript:void(0)">'+s.code+"</a></td>"),d.append(u);for(r in _.append(d),wb_builder.site.pages)if(!(c=wb_builder.site.pages[r]).popupMode){(h="#"+c.id in m?m["#"+c.id]:null)||(h=__tr(c.title,null,__tr(c.title,wb_builder.site.getLastDefLang(),"["+__("no name")+"]"))),d=(0,a.default)('<tr data-pid="'+c.id+'"><td class="page-name"><a href="javascript:void(0)">'+h+"</a></td></tr>");for(o=0;s=p[o];o++){var C;(C=(u=(0,a.default)('<td><input type="checkbox" name="isNotCommonPage" /></td>')).children("input")).val(c.id+"_"+s.code),c.id===wb_builder.pageId&&this.lockedLanguageValues.hasOwnProperty(s.code)?(C.get(0).checked=this.lockedLanguageValues[s.code],C.addClass("disabled"),C.attr("disabled","disabled"),C.attr("readonly","readonly"),C.attr("title",__("One of parent layout elements is hidden in this language"))):t.isElementVisible(i,n,s.code,c.id)&&(C.get(0).checked=!0),d.append(u)}_.append(d)}var w=this,T=function(e){e.find("tr:first").find("a").bind("click",(function(){var t=(0,a.default)(this),i=e.find('input[value$="_'+t.html()+'"]'),n=e.find('input[value$="_'+t.html()+'"]:checked').length;i.length>n?i.each((function(){(0,a.default)(this).is(".disabled")||(this.checked=!0)})):i.each((function(){var e=(0,a.default)(this).closest("tr[data-pid]");e.length&&""+e.data("pid")==""+wb_builder.pageId&&e.find("input[type=checkbox]:checked").length<=1||(this.checked=!1)})),w.onValueChanged()})),e.find("tr td:first-child a").bind("click",(function(){var e=(0,a.default)(this).parent().parent(),t=(0,a.default)(e.find("input").get().reverse()),i=e.find("input:checked").length;t.length>i?t.each((function(){(0,a.default)(this).is(".disabled")||(this.checked=!0)})):t.each((function(){var e=(0,a.default)(this).closest("tr[data-pid]");e.length&&""+e.data("pid")==""+wb_builder.pageId&&e.find("input[type=checkbox]:checked").length<=1||(this.checked=!1)})),w.onValueChanged()}))};T(v),T(_)}else for(r in this.fields.isNotCommonValues.getElem().removeClass("multilang"),wb_builder.site.pages)if(!(c=wb_builder.site.pages[r]).popupMode){(h="#"+c.id in m?m["#"+c.id]:null)||(h=__tr(c.title,null,__tr(c.title,wb_builder.site.getLastDefLang(),"["+__("no name")+"]")));var E=(0,a.default)('<div class="checkbox"><label><input type="checkbox" name="isCommonPage" data-pid="'+c.id+'" /> '+h+"</label></div>");E.find("input").val(c.id),t.isElementVisible(i,n,null,c.id)&&(E.find("input").get(0).checked=!0),this.fields.isCommonValues.getElem().append(E)}},t.prototype.getValue=function(){var e=this.fields.isCommon.getValue()||this.fields.isSpecCommon.getValue(),t={};if(wb_builder.site.languages.length>0){if(this.fields.isNotCommon.getValue())a.default.each(wb_builder.site.languages,(function(){t[this.code]=!1})),(0,a.default)("input:checked",this.fields.isNotCommonValues.getElem()).each((function(){t[(0,a.default)(this).val()]=!0}));else if(this.fields.isSpecCommon.getValue()){var i=(0,a.default)("input:checked",this.fields.isCommonValues.getElem()),n={};a.default.each(wb_builder.site.languages,(function(){n[this.code]=!1})),i.each((function(){var e=(0,a.default)(this).val().split("_"),i=e[0],o=e[1];if(i&&o){var s=t[""+i];"object"!=typeof s&&(t[""+i]=s=a.default.extend({},n)),s[o]=!0}}))}}else this.fields.isSpecCommon.getValue()&&(0,a.default)("input:checked",this.fields.isCommonValues.getElem()).each((function(){t[""+(0,a.default)(this).val()]=!0}));return{isCommon:e,includePages:t}},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){"lockedLanguageValues"in t&&t.lockedLanguageValues&&"object"==typeof t.lockedLanguageValues&&(this.lockedLanguageValues=t.lockedLanguageValues),"isInherited"in t&&"boolean"==typeof t.isInherited&&(this.isInherited=t.isInherited),e.prototype.setComponentOptions.call(this,t)},t}(o.UIComponent)},"./ui/ControlsMapper.ts":function(e,t,i){"use strict";i.r(t);var n=i("./Service.ts"),o=i("./BackgroundControl.ts"),s=i("./BorderControl.ts"),r=i("./ColorPicker.ts"),a=i("./FontStyleSelector.ts"),l=i("./RoundCornersControl.ts"),c=i("./SizeSelector.ts"),u=i("./SpacingSelector.ts"),d=i("./TextControl.ts"),h=i("./UIModeScaleFactors.ts"),p=i("./ui/CommonalitySelectorControl.ts"),m=i("./ui/FlexLayoutControl.ts"),g=i("./ui/GoogleMapsPlacesControl.ts"),f=i("./ui/RadioBoxGroupControl.ts"),y=i("./ui/SiteLanguagesControl.ts"),b=i("./ui/StaticTextControl.ts"),v=i("./WYSIWYGControl.ts");n.default.controlsMapper={typeToClass:function(e){return"WYSIWYGControl"===e?v.WYSIWYGControl:"FontStyleSelector"===e?a.FontStyleSelector:"FontSelector"===e?d.TextControl:"SizeSelector"===e?c.SizeSelector:"SpacingSelector"===e?u.SpacingSelector:"ColorSelector"===e?r.ColorPicker:"BackgroundSelector"===e?o.BackgroundControl:"BorderControl"===e||"BorderSelector"===e?s.BorderControl:"RoundCornersSelector"===e?l.RoundCornersControl:"ModeScaleFactors"===e?h.UIModeScaleFactors:"FlexLayoutControl"===e?m.FlexLayoutControl:"CommonalitySelectorControl"===e?p.CommonalitySelectorControl:"RadioBoxGroup"===e?f.RadioBoxGroupControl:"StaticText"===e?b.StaticTextControl:"GoogleMapsPlaces"===e?g.GoogleMapsPlacesControl:"SiteLanguages"===e?y.SiteLanguagesControl:e}}},"./ui/EcwidWidgetControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{EcwidWidgetControl:function(){return g}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./core/BuilderConfig.ts"),a=i("./Label.ts"),l=i("./VerticalLayout.ts"),c=i("./UIButton.ts"),u=i("./TextField.ts"),d=i("./CustomContainer.ts"),h=i("./FlowLayout.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){return m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},g=function(e){function t(){var t=e.call(this)||this;t.manageStoreButton=new c.UIButton(__("Manage Store")).on("click",(function(){return t.onManage()})),t.createStoreEmail=(new u.TextField).on("change",(function(){t.value.email=t.storeIdLoggedOut.getValue()})),t.createStoreEmail.setPlaceholder(__("Email")),t.createButton=new c.UIButton(__("Create")).on("click",(function(){return t.onCreate()}));var i=new d.CustomContainer;i.setContent((0,s.default)("<div>").addClass("input-group").append(t.createStoreEmail.getElem()).append((0,s.default)("<span>").addClass("input-group-btn").append(t.createButton.getElem()))),t.storeIdLoggedOut=(new u.TextField).on("change",(function(){t.value.storeId=t.storeIdLoggedOut.getValue()})),t.connectButton=new c.UIButton(__("Link")).on("click",(function(){return t.onConnect()}));var n=new d.CustomContainer;return n.setContent((0,s.default)("<div>").addClass("input-group").append(t.storeIdLoggedOut.getElem()).append((0,s.default)("<span>").addClass("input-group-btn").append(t.connectButton.getElem()))),t.loggedOutLayout=(new l.VerticalLayout).setSpacing(12).addAllChildren([(new l.VerticalLayout).addAllChildren([new a.Label(__("Create store")),i]),(new l.VerticalLayout).addAllChildren([new a.Label(__("Store ID"),__('Login to your Account and at the bottom right of the page you will find your "Store ID".')),n])]).setVisible(!1),t.storeIdLoggedIn=new d.CustomContainer("span"),t.storeIdLoggedIn.setContent("Store ID: "+t.storeIdLoggedOut.getValue()),t.manageStoreButtonLoggedIn=new c.UIButton(__("Manage Store")).on("click",(function(){return t.onManage()})),t.logoutButton=new c.UIButton(__("logout")).on("click",(function(){return t.onLogout()})),t.loggedInLayout=(new l.VerticalLayout).setSpacing(12).addAllChildren([t.storeIdLoggedIn,(new h.FlowLayout).addAllChildren([t.manageStoreButtonLoggedIn,t.logoutButton])]).setVisible(!1),t._elem.append(t.loggedOutLayout.getElem()).append(t.loggedInLayout.getElem()),s.default.get(r.wbConfig.baseUrl+"/ecwid/info").done((function(e){t.storeId=e.storeId,t.storeId?(t.loggedInLayout.setVisible(!0),t.loggedOutLayout.setVisible(!1),t.storeIdLoggedIn.setContent("Store ID: "+t.storeId)):(t.loggedInLayout.setVisible(!1),t.loggedOutLayout.setVisible(!0))})),t}return p(t,e),t.prototype.onManage=function(){var e=this;this.value.loginUrl?this.value.openCP(null,this.value.loginUrl,(function(){return e.forceValueChanged()})):this.storeId&&(this.storeIdLoggedOut.setValue(this.storeId),this.loggedOutLayout.setVisible(!1),this.loggedInLayout.setVisible(!0),this.value.openCP(this.storeId,void 0,(function(){return e.forceValueChanged()})),this.forceValueChanged())},t.prototype.onCreate=function(){var e=this;if(!this.value.loginUrl&&!this.storeId){var t=this.createStoreEmail.getValue();this.createButton.setLoading(!0),s.default.post(r.wbConfig.baseUrl+"/ecwid/create",{email:t}).done((function(t){t.storeId?(e.storeId=t.storeId,e.value.storeId=t.storeId,e.storeIdLoggedOut.setValue(t.storeId),e.value.openCP(t.storeId,void 0,(function(){return e.forceValueChanged()})),e.storeIdLoggedIn.setContent("Store ID: "+t.storeId),e.loggedOutLayout.setVisible(!1),e.loggedInLayout.setVisible(!0),e.forceValueChanged(),e.createButton.setLoading(!1)):alert(t.error?t.error:"Server error (3)")})).always((function(){return e.createButton.setLoading(!1)}))}},t.prototype.onLogout=function(){var e=this;s.default.get(r.wbConfig.baseUrl+"/ecwid/disconnect",(function(t){t.ok?(e.value.storeId="",e.storeId="",e.storeIdLoggedOut.setValue(""),e.loggedInLayout.setVisible(!1),e.loggedOutLayout.setVisible(!0),e.loggedOutLayout.setVisible(!0),e.forceValueChanged()):alert(t.error?t.error:"Error: Disconnect unsuccessful. Please try again.")}))},t.prototype.onConnect=function(){var e=this.value.storeId,t=this;s.default.post(r.wbConfig.baseUrl+"/ecwid/connect",{storeId:e},(function(i){i.ok?(t.storeIdLoggedIn.setContent("Store ID: "+e),t.loggedOutLayout.setVisible(!1),t.loggedInLayout.setVisible(!0),t.storeId=e,t.forceValueChanged()):(t.value.storeId="",alert(i.error?i.error:"Server error (2)"))}))},t.prototype.getValue=function(){return m({},this.value)},t.prototype.setValue=function(e){this.value=m({},e),this.storeIdLoggedOut.setValue(this.value.storeId)},t.prototype.forceValueChanged=function(){this.value&&(this.value.ver?this.value.ver++:this.value.ver=0),this.onValueChanged()},t}(o.UIComponent)},"./ui/FlexLayoutControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FlexLayoutControl:function(){return T},FlexLayoutControlValue:function(){return x}});var n,o=i("./UIComponent.ts"),s=i("./CommonTypes.ts"),r=i("./Service.ts"),a=i("./RadioBox.js"),l=i.n(a),c=i("./FlowLayout.ts"),u=i("./VerticalLayout.ts"),d=i("./CheckBox.js"),h=i.n(d),p=i("./Label.ts"),m=i("./lib/jquery-1.11.3.min.js"),g=i.n(m),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(){return y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)},b=[{id:s.FlexAlignContent.Start,name:__("Start"),icon:"wbico wbico-align-left"},{id:s.FlexAlignContent.Center,name:__("Center"),icon:"wbico wbico-align-center"},{id:s.FlexAlignContent.End,name:__("End"),icon:"wbico wbico-align-right"},{id:s.FlexAlignContent.SpaceBetween,name:__("Space between"),icon:"wbico wbico-align-space-between-horizontal"},{id:s.FlexAlignContent.SpaceAround,name:__("Space around"),icon:"wbico wbico-align-space-around-horizontal"}],v=[{id:s.FlexAlignContent.Start,name:__("Start"),icon:"wbico wbico-align-top"},{id:s.FlexAlignContent.Center,name:__("Center"),icon:"wbico wbico-align-middle"},{id:s.FlexAlignContent.End,name:__("End"),icon:"wbico wbico-align-bottom"},{id:s.FlexAlignContent.Stretch,name:__("Stretch"),icon:"wbico wbico-align-stretch-vertical"},{id:s.FlexAlignContent.SpaceBetween,name:__("Space between"),icon:"wbico wbico-align-space-between-vertical"},{id:s.FlexAlignContent.SpaceAround,name:__("Space around"),icon:"wbico wbico-align-space-around-vertical"}],_=[{id:s.FlexAlignItems.Start,name:__("Start"),icon:"wbico wbico-align-left"},{id:s.FlexAlignItems.Center,name:__("Center"),icon:"wbico wbico-align-center"},{id:s.FlexAlignItems.End,name:__("End"),icon:"wbico wbico-align-right"},{id:s.FlexAlignItems.Stretch,name:__("Stretch"),icon:"wbico wbico-align-stretch-horizontal"}],C=[{id:s.FlexAlignItems.Start,name:__("Start"),icon:"wbico wbico-align-top"},{id:s.FlexAlignItems.Center,name:__("Center"),icon:"wbico wbico-align-middle"},{id:s.FlexAlignItems.End,name:__("End"),icon:"wbico wbico-align-bottom"},{id:s.FlexAlignItems.Stretch,name:__("Stretch"),icon:"wbico wbico-align-stretch-vertical"}];function w(e,t){return'<span class="'+e+'"></span> '+t}var T=function(e){function t(){var t=e.call(this)||this;return t.value=null,t.lastWrapRes=r.Service.modeManager.MODE_PHONE,t.typeHorizontal=new(l())("",!1,"LayoutType").setLabelHtml(w("wbico wbico-horizontal-layout",__("Horizontal Layout"))).onChange((function(e){e&&t.onLayoutChange(s.ChildrenLayoutType.Horizontal)})),t.typeVertical=new(l())("",!1,"LayoutType").setLabelHtml(w("wbico wbico-vertical-layout",__("Vertical Layout"))).onChange((function(e){e&&t.onLayoutChange(s.ChildrenLayoutType.Vertical)})),t.typeAbsolute=new(l())("",!1,"LayoutType").setLabelHtml(w("wbico wbico-block-layout",__("Floating Block"))).onChange((function(e){e&&t.onLayoutChange(s.ChildrenLayoutType.Absolute)})),t.hSpacingButtons=new E(b,(function(e){return t.onHorizontalSpacing(e)})),t.vSpacingButtons=new E(v,(function(e){return t.onVerticalSpacing(e)})),t.hAlignButtons=new E(_,(function(e){return t.onHorizontalAlign(e)})),t.vAlignButtons=new E(C,(function(e){return t.onVerticalAlign(e)})),t.wrappedHAlignButtons=new E(_,(function(e){return t.onWrappedAlign(e)})),t.wrap=new(h())(__("Allow items to wrap")).onChange((function(e){return t.onWrapChange(e)})),t.wrapResNever=new(h())(__("Switch to vertical layout on smaller screens")).onChange((function(e){return t.onWrapMode(e?t.lastWrapRes:"")})),t.wrapResDesktop=new(l())(__("Desktop"),!1,"layoutElementWrapResolution").onChange((function(e){e&&t.onWrapMode(r.Service.modeManager.MODE_DESKTOP)})),t.wrapResTablet=new(l())(__("Tablet"),!1,"layoutElementWrapResolution").onChange((function(e){e&&t.onWrapMode(r.Service.modeManager.MODE_TABLET)})),t.wrapResPhone=new(l())(__("Phone"),!1,"layoutElementWrapResolution").onChange((function(e){e&&t.onWrapMode(r.Service.modeManager.MODE_PHONE)})),t.preview=new I,t._elem.addClass("wb-flex-layout-ctrl").append((new u.VerticalLayout).setSpacing(12).addAllChildren([(new u.VerticalLayout).setSpacing(8).addAllChildren([t.typeHorizontal,t.typeVertical,t.typeAbsolute]),(new c.FlowLayout).setSpacing(10).addAllChildren([(new u.VerticalLayout).setSpacing(10).addAllChildren([t.hSpacingButtons,t.vAlignButtons,t.hAlignButtons]).css({minWidth:166}).applyLayoutCellCss(2,{marginTop:-10}),t.preview]),t.wrapGroup=(new u.VerticalLayout).setSpacing(12).addAllChildren([t.wrap,t.vSpacingButtons]),t.visibilityLimits=(new u.VerticalLayout).addAllChildren([t.wrapResNever,t.visibilityOpts=(new u.VerticalLayout).setSpacing(12).css({marginLeft:22,marginTop:12}).addAllChildren([(new u.VerticalLayout).addAllChildren([new p.Label(__("Starts on")),(new c.FlowLayout).addAllChildren([t.wrapResDesktop,t.wrapResTablet,t.wrapResPhone])]),(new u.VerticalLayout).addAllChildren([new p.Label(__("Alignment")),t.wrappedHAlignButtons])])])]).getElem()),t}return f(t,e),t.prototype.buildInit=function(e,t){},t.prototype.onHorizontalSpacing=function(e){this.value&&(this.value.hSpacing=e,this.updateInterface(),this.onValueChanged())},t.prototype.onVerticalSpacing=function(e){this.value&&(this.value.vSpacing=e,this.updateInterface(),this.onValueChanged())},t.prototype.onHorizontalAlign=function(e){this.value&&(this.value.hAlign=e,this.updateInterface(),this.onValueChanged())},t.prototype.onVerticalAlign=function(e){this.value&&(this.value.vAlign=e,this.updateInterface(),this.onValueChanged())},t.prototype.onWrappedAlign=function(e){this.value&&(this.value.hAlign=e,this.updateInterface(),this.onValueChanged())},t.prototype.onWrapChange=function(e){this.value&&(this.value.wrap=e?s.FlexWrap.Wrap:s.FlexWrap.NoWrap,this.updateInterface(),this.onValueChanged())},t.prototype.onWrapMode=function(e){this.value&&(this.value.wrapRes=e,""!=e&&(this.lastWrapRes=e),this.updateInterface(),this.onValueChanged())},t.prototype.onLayoutChange=function(e){this.value&&(this.value.type=e,this.updateInterface(),this.onValueChanged())},t.prototype.updateInterface=function(){if(this.value){var e=this.value.type!=s.ChildrenLayoutType.Absolute,t=this.value.type==s.ChildrenLayoutType.Horizontal,i=this.value.wrap==s.FlexWrap.NoWrap,n=""==this.value.wrapRes;e&&(t&&!n?this.hAlignButtons.setValue(this.value.hAlign):this.wrappedHAlignButtons.setValue(this.value.hAlign)),this.visibilityLimits.setVisible(t),this.wrapGroup.setVisible(t),this.hSpacingButtons.setVisible(e&&t),this.vSpacingButtons.setVisible(e&&t&&!i),this.hAlignButtons.setVisible(e&&!t),this.vAlignButtons.setVisible(e&&t),this.visibilityOpts.setVisible(e&&t&&!n),this.preview.setVisible(e),this.preview.setValue(this.value)}},t.prototype.setValue=function(e){var t=y({},e.serialize());this.value&&this.value.type==t.type&&this.value.hAlign==t.hAlign&&this.value.vAlign==t.vAlign&&this.value.hSpacing==t.hSpacing&&this.value.vSpacing==t.vSpacing&&this.value.wrap==t.wrap&&this.value.wrapRes==t.wrapRes||(this.value=t,this.typeAbsolute.setValue(e.type==s.ChildrenLayoutType.Absolute),this.typeHorizontal.setValue(e.type==s.ChildrenLayoutType.Horizontal),this.typeVertical.setValue(e.type==s.ChildrenLayoutType.Vertical),this.wrapResNever.setValue(""!=e.wrapRes),this.wrapResDesktop.setValue(e.wrapRes==r.Service.modeManager.MODE_DESKTOP),this.wrapResTablet.setValue(e.wrapRes==r.Service.modeManager.MODE_TABLET),this.wrapResPhone.setValue(e.wrapRes==r.Service.modeManager.MODE_PHONE||""==e.wrapRes),this.lastWrapRes=""!=e.wrapRes?e.wrapRes:r.Service.modeManager.MODE_PHONE,this.wrap.setValue(e.wrap!=s.FlexWrap.NoWrap),this.hSpacingButtons.setValue(e.hSpacing),this.vSpacingButtons.setValue(e.vSpacing),this.hAlignButtons.setValue(e.hAlign),this.vAlignButtons.setValue(e.vAlign),this.wrappedHAlignButtons.setValue(e.hAlign),this.updateInterface())},t.prototype.getValue=function(){return new x(this.value)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t}(o.UIComponent),E=function(e){function t(t,i){var n=e.call(this)||this;n.onChange=i,n.buttons={},n.selectedButton=null,n._elem.addClass("btn-group");for(var o=function(e){var t=g()("<button>").attr({type:"button"}).addClass("btn btn-default").append(g()("<span>").addClass(e.icon)).attr({title:e.name}).on("click",(function(){return n.onClick(e)}));r._elem.append(t),r.buttons[e.id]={def:e,elem:t}},r=this,a=0,l=t;a<l.length;a++)o(l[a]);return n.setValue(s.FlexAlignContent.Start),n}return f(t,e),t.prototype.setValue=function(e){if(this.value!==e){if(!(e in this.buttons))if(e==s.FlexAlignContent.SpaceEvenly&&s.FlexAlignContent.SpaceAround in this.buttons)e=s.FlexAlignContent.SpaceAround;else for(var t in console.warn("Unknown value: "+e),this.buttons){e=t;break}this.value=e,this.selectedButton&&this.selectedButton.removeClass("active"),this.selectedButton=this.buttons[e].elem,this.selectedButton.addClass("active")}},t.prototype.onClick=function(e){this.setValue(e.id),this.onChange(e.id)},t}(o.UIComponent),I=function(e){function t(){var t=e.call(this)||this;return t._elem.addClass("wb-flex-layout-ctrl-preview").append(t.rowTop=g()("<div>").addClass("wb-r1").append(g()("<div>").addClass("wb-c1")).append(g()("<div>").addClass("wb-c2")).append(g()("<div>").addClass("wb-c3"))).append(t.rowBottom=g()("<div>").addClass("wb-r2").append(g()("<div>").addClass("wb-c1")).append(g()("<div>").addClass("wb-c2"))),t}return f(t,e),t.prototype.setValue=function(e){var t=new x(e),i=e.type==s.ChildrenLayoutType.Horizontal,n=e.wrap==s.FlexWrap.NoWrap,o=t.getContainerCss(i);o.flexDirection=i?"row":"column",!i||n?(this.rowBottom.hide(),this._elem.css({"align-content":s.FlexAlignContent.Start})):(this.rowBottom.show(),this._elem.css({"align-content":e.vSpacing}));var r=y(y({},o),{"flex-wrap":s.FlexWrap.NoWrap});this.rowTop.css(r),this.rowBottom.css(r)},t}(o.UIComponent),x=function(){function e(e){this.type=s.ChildrenLayoutType.Absolute,this.wrapRes=r.Service.modeManager.MODE_PHONE,this.wrap=s.FlexWrap.NoWrap,this.hAlign=s.FlexAlignItems.Center,this.vAlign=s.FlexAlignItems.Center,this.hSpacing=s.FlexAlignContent.SpaceAround,this.vSpacing=s.FlexAlignContent.SpaceAround,e&&(this.type="type"in e?e.type:this.type,this.wrapRes="wrapRes"in e?e.wrapRes:this.wrapRes,this.wrap="wrap"in e?e.wrap:this.wrap,this.hAlign="hAlign"in e?e.hAlign:this.hAlign,this.vAlign="vAlign"in e?e.vAlign:this.vAlign,this.hSpacing="hSpacing"in e?e.hSpacing:this.hSpacing,this.vSpacing="vSpacing"in e?e.vSpacing:this.vSpacing)}return e.prototype.serialize=function(){return{type:this.type,wrapRes:this.wrapRes,wrap:this.wrap,hAlign:this.hAlign,vAlign:this.vAlign,hSpacing:this.hSpacing,vSpacing:this.vSpacing}},e.prototype.getContainerCss=function(e){return{"justify-items":e?this.hAlign:s.FlexAlignItems.Start,"align-items":e?this.vAlign:this.hAlign,"justify-content":e?this.hSpacing:s.FlexAlignContent.Start,"align-content":e?this.vSpacing:s.FlexAlignContent.Stretch,"flex-wrap":e?this.wrap:"nowrap"}},e}()},"./ui/FormFieldsControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{FormFieldsControl:function(){return u}});var n,o=i("./UIComponent.ts"),s=i("./Service.ts"),r=i("./VerticalLayout.ts"),a=i("./jquery-builder.ts"),l=i("./WYSIWYGControl.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e){function t(){var t=e.call(this)||this;return s.Service.UIBuilder.buildLayout({type:r.VerticalLayout,spacing:5,children:[{type:"Label",text:__("Simple fields")},t.createSimpleFieldUI(0,!1),t.createSimpleFieldUI(1,!1),t.createSimpleFieldUI(2,!1),t.createSimpleFieldUI(3,!1),t.createSimpleFieldUI(4,!1),t.createSimpleFieldUI(5,!1),t.createSimpleFieldUI(6,!1),{type:"Label",text:__("Options")},t.createSelectFieldUI(7),t.createSelectFieldUI(8),{type:"Label",text:__("Message field")},t.createSimpleFieldUI(9,!0),{type:"Label",text:__("Attachment field")},t.createSimpleFieldUI(10,!1),{type:"Label",text:__("Checkboxes")},t.createWysiwygFieldUI(11,!1),t.createWysiwygFieldUI(12,!1)]},t._elem,t.fields={}),t}return c(t,e),t.prototype.buildInit=function(e,t){},t.prototype.createSimpleFieldUI=function(e,t,i){var n=this;void 0===t&&(t=!1),void 0===i&&(i=null);var o="formField"+e;"object"!=typeof i&&(i={});var s=(0,a.default)('<div class="req-asterisk">');return s.css({position:"absolute",left:wb_builder.rtl?"8.5px":"1.5px",top:"-10px",color:"#E00",fontSize:"10px"}),s.attr("title",__("Required")),s.attr("data-placement","left"),s.html('<i class="fa fa-asterisk"></i>'),setTimeout((function(){s.tooltip()}),0),a.default.extend(!0,i,{type:"CheckBox",id:o+"Enable",label:[{type:"FlowLayout",css:{width:260},children:[{type:"MultilangTextField",id:o,textArea:t,css:{top:"-7px",width:220},onChange:function(e){n.onValueChanged()}},{type:"CheckBox",id:o+"Required",label:[{type:"CustomContainer",id:o+"Asterisk",content:s}],change:function(e){e[o+"Asterisk"].getElem().find(".req-asterisk").css("color",e[o+"Required"].getValue()?"#E00":"#222"),n.onValueChanged()}}]}],change:function(e){var t=e[o+"Enable"].getValue();e[o].setEnabled(t),e[o+"Required"].setVisible(t),n.onValueChanged()}})},t.prototype.createWysiwygFieldUI=function(e,t,i){var n=this;void 0===t&&(t=!1),void 0===i&&(i=null);var o="formField"+e;"object"!=typeof i&&(i={});var s=(0,a.default)('<div class="req-asterisk">');return s.css({position:"absolute",left:wb_builder.rtl?"8.5px":"1.5px",top:"-10px",color:"#E00",fontSize:"10px"}),s.attr("title",__("Required")),s.attr("data-placement","left"),s.html('<i class="fa fa-asterisk"></i>'),setTimeout((function(){s.tooltip()}),0),a.default.extend(!0,i,{type:"CheckBox",id:o+"Enable",label:[{type:"FlowLayout",css:{width:260},children:[{type:l.WYSIWYGControl,id:o,css:{top:"-7px",width:220},config:{forcePasteAsPlainText:!0},blur:function(e){n.onValueChanged()}},{type:"CheckBox",id:o+"Required",label:[{type:"CustomContainer",id:o+"Asterisk",content:s}],change:function(e){e[o+"Asterisk"].getElem().find(".req-asterisk").css("color",e[o+"Required"].getValue()?"#E00":"#222"),n.onValueChanged()}}]}],change:function(e){var t=e[o+"Enable"].getValue();e[o].setEnabled(t),e[o+"Required"].setVisible(t),n.onValueChanged()}})},t.prototype.createSelectFieldUI=function(e,t){var i=this;void 0===t&&(t=null);var n="formField"+e;return"object"!=typeof t&&(t={}),a.default.extend(!0,t,{type:"CheckBox",id:n+"Enable",label:[{type:"MultilangTextField",id:n,css:{top:"-7px"},onChange:function(e){i.onValueChanged()}},{type:"Tooltip",text:__("Write options as separate lines")},{type:"MultilangTextField",id:n+"Opts",textArea:!0,onChange:function(){i.onValueChanged()}}],css:{position:"relative",marginTop:11},change:function(e){var t=e[n+"Enable"].getValue();e[n].setEnabled(t),e[n+"Opts"].setEnabled(t),i.onValueChanged()}})},t.prototype.setValue=function(e){var i,n,o,s,r,a;for(s in this.fields)if(this.fields.hasOwnProperty(s)&&(i=(""+s).match(/^formField([0-9]+)Enable$/))&&(n=parseInt(i[1],10),r=e&&e[n]?e[n]:t.defaultValue[n],this.fields[s].setValue(r.checked),this.fields[s].trigger("change"),this.fields["formField"+n].setValue(r.name),this.fields.hasOwnProperty("formField"+n+"Required")&&(this.fields["formField"+n+"Required"].setValue(r.required),this.fields["formField"+n+"Required"].trigger("change")),"select"===r.type)){if("object"==typeof r.options)for(o in a={},r.options)r.options.hasOwnProperty(o)&&(a[o]=r.options[o].split(";").join("\n"));else a=r.options.split(";").join("\n");this.fields["formField"+n+"Opts"].setValue(a)}},t.prototype.getValue=function(){var e,i,n,o,s,r,l=a.default.extend(!0,{},t.defaultValue);for(o in this.fields)if(this.fields.hasOwnProperty(o)&&(e=(""+o).match(/^formField([0-9]+)Enable$/))){if((s=l[i=parseInt(e[1],10)]).checked=this.fields[o].getValue(),s.name=this.fields["formField"+i].getValue(),"checkbox"===s.type){var c=function(e){return"string"!=typeof e?e:e.replace(/<p[^>]*>/gi,"").replace(/<\/p[^>]*>/gi,"<br /><br />").replace(/\s*(?:(?:<br[^>]*>|&nbsp;)\s*)+$/i,"")};if("object"==typeof s.name&&s.name)for(var u in s.name)s.name.hasOwnProperty(u)&&(s.name[u]=c(s.name[u]));else s.name=c(s.name)}if(this.fields.hasOwnProperty("formField"+i+"Required")&&(s.required=!!this.fields["formField"+i+"Required"].getValue()),"select"===s.type)if("object"==typeof(r=this.fields["formField"+i+"Opts"].getValue()))for(n in s.options={},r)r.hasOwnProperty(n)&&(s.options[n]=r[n].split("\n").join(";"));else s.options=r.split("\n").join(";")}return l},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t.defaultValue=[{checked:!0,type:"input",name:__("Name"),options:"",required:!0},{checked:!0,type:"input",name:__("Email"),options:"",required:!0},{checked:!1,type:"input",name:__("Country"),options:"",required:!0},{checked:!1,type:"input",name:__("City"),options:"",required:!0},{checked:!1,type:"input",name:__("Address"),options:"",required:!0},{checked:!1,type:"input",name:__("Your Field"),options:"",required:!0},{checked:!1,type:"input",name:__("Your Field"),options:"",required:!0},{checked:!1,type:"select",name:__("How did you find us?"),options:__("Found on google;Followed link from other site;Friend told me"),required:!0},{checked:!1,type:"select",name:__("Your Question?"),options:__("Yes;No;May be"),required:!0},{checked:!0,type:"textarea",name:__("Message"),options:"",required:!0},{checked:!1,type:"file",name:__("Attachments"),options:"",required:!1},{checked:!1,type:"checkbox",name:__("I want to receive newsletters"),options:"",required:!1},{checked:!1,type:"checkbox",name:__("I agree to the Terms and Conditions"),options:"",required:!0}],t}(o.UIComponent)},"./ui/FullPreloaderOverlay.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{setPreloaderVisible:function(){return a}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=null,r=function(){function e(){this.visible=!0,this.elem=o()("<div>").addClass("wb-full-preloader-overlay").append(this.buildIcon()).appendTo(document.body),this.setVisible(!1)}return e.prototype.buildIcon=function(){return o()("<div>").addClass("wb-full-preloader-overlay-icon").append(o()("<span>").addClass("fa fa-spinner fa-pulse fa-4x"))},e.prototype.setVisible=function(e){this.visible!==e&&(this.visible=e,this.elem[0].style.display=e?"":"none")},e}();function a(e){(s||e)&&(s||(s=new r),s.setVisible(e))}},"./ui/GalleryTypeSelector.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GalleryTypeSelector:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;t.items=[],t.value="",t.types={thumbs:__("Thumbnails"),masonry:__("Masonry"),slideshow:__("Slideshow"),list:__("List"),map:__("Map")},t.titleElem=r()("<div>").addClass("wb_gallery_wrap_title");var i=r()("<ul>").addClass("wb_gallery_wrap"),n=function(e){var n=o.types[e],s=r()("<li>").append(r()("<div>").addClass("wb_gallery_wrap_item").css({textAlign:"center"}).append(r()("<span>").addClass("wbico wbico-gallery-"+e))).attr({title:n}).css({cursor:"pointer"}).on("click",(function(){t.handleChange(e),t.onValueChanged()}));i.append(s),o.items.push({type:e,elem:s})},o=this;for(var s in t.types)n(s);return t._elem.append(i).append(t.titleElem),t.handleChange("thumbs",!0),t}return a(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}},t.prototype.handleChange=function(e,t){void 0===t&&(t=!1);for(var i=0,n=this.items;i<n.length;i++){var o=n[i];o.type==e?o.elem.addClass("active"):o.elem.removeClass("active")}this.value=e,e in this.types&&this.titleElem.text(this.types[e]),t||"function"!=typeof this.onChange||this.onChange()},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.handleChange(e,!0)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t}(o.UIComponent)},"./ui/GoogleMapsPlacesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{GoogleMapsPlacesControl:function(){return c}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./ui/Popover.ts"),a=i("./GoogleMapsApi.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(){var t=e.call(this)||this;return t.value={},t.googleEventsSet=!1,t.configSuplier=null,t.gmapAddress=(0,s.default)("<input>").addClass("form-control").attr({type:"text"}),t.markerBtn=(0,s.default)("<button>").addClass("btn btn-default").attr({type:"button"}).append((0,s.default)("<span>").addClass("fa fa-map-marker")).on("click",(function(){return t.editMarker()})),t.cleanBtn=(0,s.default)("<button>").addClass("btn btn-default").attr({type:"button"}).append((0,s.default)("<span>").addClass("fa fa-times")).on("click",(function(){return t.cleanMarker()})),t.markerEditor=new u(t.markerBtn,(function(e){e&&(t.value.latLng=e,t.value.text="".concat(e.lat,", ").concat(e.lng)),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t._elem.append((0,s.default)("<div>").addClass("input-group").append(t.gmapAddress).append((0,s.default)("<span>").addClass("input-group-btn").append(t.markerBtn))),t.invalidate(),t}return l(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}"function"==typeof e.configSuplier&&(this.configSuplier=e.configSuplier)},t.prototype.destroy=function(){this.markerEditor.isVisible()&&this.markerEditor.setVisible(!1),e.prototype.destroy.call(this)},t.prototype.editMarker=function(){if(this.markerEditor.isVisible())this.markerEditor.setVisible(!1);else{var e="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||{lat:0,lng:0},e)}},t.prototype.cleanMarker=function(){this.markerEditor.isVisible()?this.markerEditor.setVisible(!1):(this.setValue(null),"function"==typeof this.onChange&&this.onChange(),this.onValueChanged())},t.prototype.setValue=function(e){this.value=s.default.extend(!0,{},e),this.value.text&&""!==this.value.text||!this.value.latLng||(this.value.text="".concat(this.value.latLng.lat,", ").concat(this.value.latLng.lng)),this.gmapAddress.val(this.value.text||"")},t.prototype.getValue=function(){return s.default.extend(!0,{},this.value)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),t.cleanable&&this._elem.find(".input-group-btn").append(this.cleanBtn),"function"==typeof t.configSuplier&&(this.configSuplier=t.configSuplier)},t.prototype.revalidate=function(){var t=this;e.prototype.revalidate.call(this);var i="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;if(!this.googleEventsSet&&document.body.contains(this._elem.get(0))){if(this.googleEventsSet=!0,null==i?void 0:i.apiKeyError)return void this.gmapAddress.on("change keyup",(function(){t.value.text=t.gmapAddress.val(),delete t.value.latLng,"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()}));a.GoogleMapsApi.loadGoogleMapsApi([function(){t.gmapAddress.on("change",(function(){setTimeout((function(){t.gmapAddress.focus(),google.maps.event.trigger(t,"keydown",{keyCode:13}),t.gmapAddress.blur()}),50)})),t.mapAddress=new google.maps.places.SearchBox(t.gmapAddress.get(0)),google.maps.event.addListener(t.mapAddress,"places_changed",(function(){t.value.text=t.gmapAddress.val(),delete t.value.latLng;for(var e,i=t.mapAddress.getPlaces(),n=null,o=0,s=void 0;s=i[o];o++)s&&s.geometry&&(e=s.geometry.location)&&(n={lat:e.lat(),lng:e.lng()});n&&(t.value.latLng=n),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()}))}])}},t}(o.UIComponent),u=function(e){function t(t,i){var n=e.call(this,t,__("Drag marker to set your location"),(0,s.default)("<div>").addClass("wb-gmaps-places-med").css({width:500,height:300}),"wb-gmaps-places-popover")||this;return n.onChange=i,n.value={lat:0,lng:0},n.config=null,n}return l(t,e),t.prototype.edit=function(e,t){this.value=e,this.config=t,(null==t?void 0:t.apiKeyError)||this.setVisible(!0)},t.prototype.setMarker=function(e,t){this.isInitialized()&&(t&&(this.gmap.setZoom(t.zoom),this.gmap.setMapTypeId(t.mapTypeId)),this.gmap.setCenter(new google.maps.LatLng(e)),this.gmapMarker.setPosition(new google.maps.LatLng(e)))},t.prototype.onInit=function(){var e=this,t=new google.maps.LatLng(this.value);this.gmap=new google.maps.Map(this.getContent()[0],{zoom:0,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1}),this.gmapMarker=new google.maps.Marker({position:t,draggable:!0,clickable:!1,optimized:!1,map:this.gmap,cursor:"grab"}),google.maps.event.addListener(this.gmapMarker,"dragend",(function(){var t=e.gmapMarker.getPosition();t&&(e.value={lat:t.lat(),lng:t.lng()},e.onChange.call(e,e.value))}))},t.prototype.onDom=function(){this.setMarker(this.value,this.config)},t}(r.Popover)},"./ui/LineStyleControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{LineStyleControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.onChange=t,i.lastBtn=null,i.btns={},i.useNone=!0,i._elem.addClass("wb-line-style-control").append((i.group=r()("<div>")).addClass("btn-group").append(i.buildButton("none")).append(i.buildButton("solid")).append(i.buildButton("dashed")).append(i.buildButton("dotted")).append(i.buildButton("double"))),i.setUseNone(!1),i}return a(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"boolean"==typeof e.useNone&&this.setUseNone(e.useNone),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)})},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"boolean"==typeof t.useNone&&this.setUseNone(t.useNone)},t.prototype.setUseNone=function(e){return this.useNone==e||(this.useNone=e,e?this.group.prepend(this.btns.none):this.btns.none.detach()),this},t.prototype.setActiveButton=function(e){var t=this.btns[e];t&&this.value!=e&&(this.value=e,this.lastBtn&&this.lastBtn.removeClass("active"),t.addClass("active"),this.lastBtn=t)},t.prototype.buildButton=function(e){var t=this,i=e.substring(0,1).toUpperCase()+e.substring(1),n=r()("<span>").addClass("wbico wbico-line-".concat(e));return"none"==e&&n.css({color:"#ccc"}),this.btns[e]=r()("<button>").addClass("btn btn-default").append(n).attr({title:__(i)}).on("click",(function(){t.setActiveButton(e),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),this.btns[e]},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.setActiveButton(e)},t}(o.UIComponent)},"./ui/MenuStyleControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MenuStyleControl:function(){return g}});var n,o=i("./UIComponent.ts"),s=i("./ui/MiniTabPane.ts"),r=i("./BackgroundControl.ts"),a=i("./BorderControl.ts"),l=i("./CheckBox.js"),c=i.n(l),u=i("./Label.ts"),d=i("./VerticalLayout.ts"),h=i("./FlowLayout.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){return m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},g=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.onChange=t,i.ignoreChange=!1,i.bg=new r.BackgroundControl,i.bg.onChange=function(){return i.handleChange()},i.border=new a.BorderControl("bottom",!1,!1),i.border.setAbsPopover(!0),i.border.setOnChange((function(){return i.handleChange()})),i.noCollapse=new(c())(__("Do not collapse on mobile")),i.noCollapse.on("change",(function(){return i.handleChange()})),i.tabPane=new s.MiniTabPane([{id:"menu",title:__("Menu")},{id:"sub",title:__("Submenu")},{id:"mobile",title:__("Mobile")}],(function(e){return i.selectTab(e)})),i._elem.addClass("wb-btn-style-control").append((new d.VerticalLayout).setSpacing(12).addAllChildren([i.tabPane,(new h.FlowLayout).addAllChildren([(new d.VerticalLayout).addAllChildren([new u.Label(__("Background")),i.bg]),(i.borderBlock=new d.VerticalLayout).addAllChildren([new u.Label(__("Border")),i.border])]),i.noCollapse]).getElem()),i.noCollapseBlock=i.noCollapse.getElem().parent(),i}return p(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)})},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t.prototype.destroy=function(){this.bg.destroy(),this.border.destroy(),this.borderBlock.destroy(),this.noCollapse.destroy(),this.tabPane.destroy(),e.prototype.destroy.call(this)},t.prototype.handleChange=function(){if(!this.ignoreChange){this.ignoreChange=!0;var e=this.tabPane.getSelectedTab();"menu"==e.id?(this.value.menu.bg=this.bg.getValue(),this.value.menu.border=this.border.getValue()):"sub"==e.id?this.value.sub.bg=this.bg.getValue():"mobile"==e.id&&(this.value.mobile.bg=this.bg.getValue(),this.value.mobile.noCollapse=this.noCollapse.getValue()),"function"==typeof this.onChange&&this.onChange(),this.onValueChanged(),this.ignoreChange=!1}},t.prototype.selectTab=function(e){this.value&&(this.ignoreChange=!0,"menu"==e.id?(this.bg.setValue(this.value.menu.bg),this.border.setValue(this.value.menu.border?this.value.menu.border:null),this.borderBlock.setVisible(!0),this.noCollapseBlock.hide()):"sub"==e.id?(this.bg.setValue(this.value.sub.bg),this.borderBlock.setVisible(!1),this.noCollapseBlock.hide()):"mobile"==e.id&&(this.bg.setValue(this.value.mobile.bg),this.borderBlock.setVisible(!1),this.noCollapse.setValue(!!this.value.mobile.noCollapse&&this.value.mobile.noCollapse),this.noCollapseBlock.show()),this.ignoreChange=!1)},t.prototype.getValue=function(){return{menu:m({},this.value.menu),sub:m({},this.value.sub),mobile:m({},this.value.mobile)}},t.prototype.setValue=function(e){this.value={menu:m({},e.menu),sub:m({},e.sub),mobile:m({},e.mobile)},this.selectTab(this.tabPane.getSelectedTab())},t}(o.UIComponent)},"./ui/MigrateBackDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{initPanel:function(){return u},show:function(){return c}});var n=i("./ui/BaseConfirmDialog.ts"),o=i("./Service.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=i("./core/BuilderConfig.ts"),l=null;function c(){return l||(l=new n.BaseConfirmDialog(__("Return to the old builder version"),__("Are you sure you want to return to the old builder version?"),__("All the changes made in the new builder version will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes")+", "+__("Return"))),(0,n.showDeferred)(l)}function u(e){if(wb_builder.responsivePro&&wb_builder.migrateBackUrl&&!wb_builder.migrateBackHide)var t=o.Service.uiManager.getApiInstance(),i=r()("<div>").addClass("wb-migrate-back-panel").append(r()("<span>").addClass("wb-migrate-back-close").html("&times;").on("click",(function(){e.remove(n),r().getJSON(a.wbConfig.lnBaseUrl+"site/hide-migrate-back")}))).append(r()("<div>").addClass("wb-migrate-back-text").text(__("Unhappy with changes?"))).append(r()("<button>").addClass("btn btn-danger").text(__("Return to the old builder version")).on("click",(function(){return t.migrateBack()}))),n=e.add("migrate",i,!0)}},"./ui/MigrateDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{show:function(){return s}});var n=i("./ui/BaseConfirmDialog.ts"),o=null;function s(){return o||(o=new n.BaseConfirmDialog(__("New Version Available"),__("Are you sure you want to switch to new version?"),__("Your website will be converted to the new builder version.\nSome objects may change it's position, size, etc.\nYou should manualy fix it."),"fa fa-refresh",__("Remind later"),__("Switch"))),(0,n.showDeferred)(o)}},"./ui/MiniTabPane.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MiniTabPane:function(){return c},Tab:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(){function e(e,t,i){var n=this;this.id=e,this.selected=!1,this.elem=r()("<div>").text(t).on("click",(function(){return i(n)}))}return e.prototype.setSelected=function(e){this.selected!=e&&(this.selected=e,e?this.elem.addClass("active"):this.elem.removeClass("active"))},e.prototype.appendTo=function(e){e.append(this.elem)},e}(),c=function(e){function t(t,i){void 0===t&&(t=[]),void 0===i&&(i=null);var n=e.call(this)||this;n.onSelect=i,n.selectedTab=null,n.tabs=[],n._elem.addClass("wb-ctrl-tabs");for(var o=0,s=t;o<s.length;o++){var r=s[o];n.addTab(r.id,r.title)}return n}return a(t,e),t.prototype.getSelectedTab=function(){if(!this.selectedTab)throw new Error("Tab pane has no tabs");return this.selectedTab},t.prototype.addTab=function(e,t){var i=this,n=new l(e,t,(function(e){return i.selectTab(e)}));this.tabs.push(n),n.appendTo(this._elem),this.selectedTab||this.selectTab(n)},t.prototype.selectTab=function(e){if(this.selectedTab!==e){var t=this.selectedTab;this.selectedTab=e,t&&t.setSelected(!1),e.setSelected(!0),"function"==typeof this.onSelect&&this.onSelect.call(this,e)}},t}(o.UIComponent)},"./ui/NumControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{NumControl:function(){return c},NumControlStyle:function(){return o}});var n,o,s=i("./UIComponent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e[e.Normal=0]="Normal",e[e.WidePostfix=1]="WidePostfix",e[e.Compact=2]="Compact"}(o||(o={}));var c=function(e){function t(t,i,n){var s=e.call(this)||this;return s.onChange=n,s.value=-1,s.style=o.Normal,s.maxValue=100,s.updateTimeout=0,s.lastInputValue="",s.input=a()("<input>").addClass("form-control").attr({type:"text"}).on("change",(function(e){return s.onValueChange(e)})).on("keydown",(function(e){return s.onValueChange(e,!1)})).on("keyup",(function(e){return s.onValueChange(e,!0)})),s.unitElem=a()("<span>"),s._elem.addClass("wb-numeric-ctrl").append(s.input).append(s.unitElem),s.setUnit(t,i),s}return l(t,e),t.prototype.setStyle=function(e){return this.style==e||(this.style=e,e==o.Normal?this.removeClass("wb-numeric-wide-ctrl wb-numeric-compact-ctrl"):e==o.WidePostfix?this.removeClass("wb-numeric-compact-ctrl").addClass("wb-numeric-wide-ctrl"):e==o.Compact&&this.removeClass("wb-numeric-wide-ctrl").addClass("wb-numeric-compact-ctrl")),this},t.prototype.onValueChange=function(e,t){var i=this;void 0===t&&(t=!1);var n=e.keyCode,o=this.input.val();if(!t&&!(8==n||9==n||13==n||27==n||n>=16&&n<=18||n>=33&&n<=36||n>=37&&n<=40||n>=45&&n<=46||n>=48&&n<=57&&!e.shiftKey||n>=96&&n<=105||e.ctrlKey))return e.preventDefault(),!1;if(t&&(38==n||40==n)){var s=parseInt(o.trim(),10);return isNaN(s)?s=this.value:s<0?s=0:s>this.maxValue&&(s=this.maxValue),38==n&&s<this.maxValue?s++:40==n&&s>0&&s--,this.value=s,this.input.val(""+s),this.onChange(s),e.preventDefault(),!1}return t&&this.lastInputValue!=o&&(this.lastInputValue=o,this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){var e=i.input.val(),t=e.trim().toLowerCase(),n=parseInt(t,10);isNaN(n)?n=i.value:n<0?n=0:n>i.maxValue&&(n=i.maxValue),i.value=n,(t=""+n)!=e&&i.input.val(t),i.onChange(n)}),500)),!0},t.prototype.setValue=function(e){isNaN(e)||e<0?e=0:e>this.maxValue&&(e=this.maxValue),this.value!=e&&(this.value=e,this.input.val(e))},t.prototype.setUnit=function(e,t){this.unit==e&&this.maxValue==t||(this.unit=e,this.maxValue=t,this.unitElem.text(e))},t.prototype.setEnabled=function(e){this._enabled=!!e,this._enabled?(this.input.removeClass("disabled"),this.input.removeAttr("disabled")):(this.input.addClass("disabled"),this.input.attr({disabled:"disabled"}))},t}(s.UIComponent)},"./ui/Popover.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{Popover:function(){return c},closeAll:function(){return a}});var n=i("./Service.ts"),o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=[];function a(){for(var e=r.length-1;e>=0;e--)!1===r[e].getMouseDowned()&&r[e].setVisible(!1)}n.Service.popover={closeAll:function(){return a()}};var l=0,c=function(){function e(e,t,i,n){void 0===i&&(i=null);var o,r=this;this.content=i,this.styleClass=n,this.initialized=!1,this.elem=null,this.arrowElem=null,this.visible=!1,this.isContentDetached=!1,this.mouseDowned=!1,this.trigger=e,this.id="wb-popover-ctrl-"+l++,this.trigger.popover({title:t,content:'<div id="'.concat(this.id,'"></div>'),html:!0,placement:"left",trigger:"manual",container:"body"}).on("inserted.bs.popover",(function(){r.content&&!r.isContentDetached&&s()("#"+r.id).append(r.content),r.init(),r.onDom()})).on("shown.bs.popover",(function(){r.updatePosition(),r.onShown()})).on("show.bs.popover",(function(){r.visible=!0})).on("hidden.bs.popover",(function(){r.visible=!1,r.content&&!r.isContentDetached&&r.content.detach()})),o=this,d.push(o),u||(u=!0,window.addEventListener("scroll",(function(){for(var e=0,t=d;e<t.length;e++)t[e].updatePosition()}),!0),window.addEventListener("resize",(function(){for(var e=0,t=d;e<t.length;e++)t[e].updatePosition()}),!0))}return e.prototype.setMouseDowned=function(e){this.mouseDowned=e},e.prototype.getMouseDowned=function(){return this.mouseDowned},e.prototype.updatePosition=function(){if(this.initialized&&!this.isContentDetached&&this.isVisible()&&this.elem){var e=this.trigger.offset(),t=this.trigger.outerHeight(),i=this.elem.outerWidth(),n=this.elem.outerHeight(),o=e.top-n/2+t/2,s=0;o<window.scrollY&&(s=o-window.scrollY,o=window.scrollY),this.arrowElem&&this.arrowElem.css({top:Math.max(n/2+s,42)}),this.elem.css({left:Math.max(e.left-i,0),top:o})}},e.prototype.dispose=function(){var e;(e=d.indexOf(this))>=0&&d.splice(e,1),this.trigger.popover("destroy")},e.prototype.setContentDetached=function(e,t){this.isContentDetached!=e&&(this.isContentDetached=e,this.content&&(this.content.detach(),e&&(t.append(this.content),this.onDom())))},e.prototype.triggerOnDom=function(){this.onDom()},e.prototype.onInit=function(){},e.prototype.onDom=function(){},e.prototype.onShown=function(){},e.prototype.onBodyClick=function(){},e.prototype.getContent=function(){return this.content},e.prototype.setContent=function(e){this.initialized&&this.content?console.error("Can't change content after initialization"):this.content=e},e.prototype.isInitialized=function(){return this.initialized},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(e){var t=this;if(this.visible!=e)if(e)requestAnimationFrame((function(){r.indexOf(t)<0&&r.push(t),t.trigger.popover("show")}));else{var i=r.indexOf(this);i>=0&&r.splice(i,1),this.trigger.popover("hide")}},e.prototype.init=function(){var e=this;this.initialized||!this.content||this.isContentDetached||(this.initialized=!0,this.elem=this.content.parents(".popover").addClass("wb-popover-ctrl"+(this.styleClass?" ".concat(this.styleClass):"")).css({maxWidth:"inherit"}).append(s()("<span>").addClass("close").text("×").on("click",(function(){return e.setVisible(!1)}))).on("click",(function(t){e.onBodyClick(),t.stopImmediatePropagation(),t.stopPropagation()})),this.arrowElem=this.elem.children(".arrow"),this.onInit())},e}(),u=!1,d=[]},"./ui/PropertiesPanel.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{PropertiesPanel:function(){return u}});var n=i("./BuilderEvent.ts"),o=i("./Service.ts"),s=i("./element/PropertyType.ts"),r=i("./ui/Popover.ts"),a=i("./lib/jquery-1.11.3.min.js"),l=i.n(a),c=i("./core/BuilderConfig.ts"),u=function(){function e(){this.renderedComponents=null,this.components=[],this.hasObjectsSelected=!1,this.isSubPanel=!1,this.openCategories=s.PropertyType.defaultOpenCategories}return e.prototype.init=function(e){var t=this,i=this.getElem();e.add("properties",i);var s=l()(document.body);i.on("focusin",(function(){s.addClass("wb-properties-focus")})).on("focusout",(function(){s.removeClass("wb-properties-focus")})).on("mouseover",(function(){s.addClass("wb-properties-over")})).on("mouseout",(function(){s.removeClass("wb-properties-over")})),n.GlobalEvents.on("selection.changed",(function(i){s.removeClass("wb-properties-focus");var n=o.Service.element.getSelected(),r=[];for(var a in n)n.hasOwnProperty(a)&&"function"==typeof n[a].getProperties&&r.push(n[a]);t.bind(r),r.length>0&&!e.isVisible()&&l()(window).width()>485&&e.setVisible(!0),l()(window).width()<=485&&e.blinkToggle("select"===i.op)})),n.GlobalEvents.on("languages.update",(function(e){for(var i=0,n=t.components;i<n.length;i++)n[i].invalidate()}))},e.prototype.getElem=function(){return this.elem||this.render(),this.elem},e.prototype.render=function(){if(this.elem||(this.elem=l()('<div class="wb-properties-panel" />'),this.elem.on("click contextmenu",(function(e){(0,r.closeAll)(),wb_builder.api.hideContextMenus(),e.stopImmediatePropagation()})).on("mousewheel",(function(e){e.stopImmediatePropagation()}))),this.isSubPanel&&this.elem.addClass("sub-panel"),this.renderedComponents!==this.components){if(this.renderedComponents)for(var e=0,t=this.renderedComponents;e<t.length;e++){var i=t[e];(!this.components||this.components.indexOf(i)<0)&&i.destroy()}this.renderedComponents=this.components,this.elem.empty(),this.components.length?this.elem.append(this.renderTree(this.components)):this.hasObjectsSelected?this.elem.append(l()('<div class="wb-panel-message">').text(__("Please select only one element to edit its properties."))):this.elem.append(l()('<div class="wb-panel-message">').text(__("No elements selected.")))}for(var n=0,o=this.components;n<o.length;n++)o[n].invalidate()},e.prototype.renderTree=function(e,t,i,n){var o=this;void 0===t&&(t=""),void 0===i&&(i=0),void 0===n&&(n="");var r=null,a=[],c=l()('<div class="wb-property-group wb-level-'+i+'" />').attr("data-path",n);if(!this.isSubPanel&&1===i&&this.openCategories.indexOf(n)<0&&c.addClass("collapsed"),i>0&&(!this.isSubPanel||i>1)){var u=l()('<div class="wb-property-group-label" />').text(t);if(1===i){var d=l()('<div class="wb-property-group-collapse"><i class="wb-properties-icon-closed fa fa-caret-right"></i><i class="wb-properties-icon-open fa fa-caret-down"></i></div>');u.prepend(d),u.on("click",(function(){var e=c.data("path");if(c.is(".collapsed")){c.removeClass("collapsed"),o.openCategories.push(e);var t=o.elem.parents(".wb-sidebar-item-content"),i=t.height(),n=t.scrollTop(),s=0,r=c;do{s+=r.position().top,r=r.offsetParent()}while("HTML"!==r.get(0).tagName&&!r.hasClass("wb-properties-panel"));s<n?t.scrollTop(s-20):s+c.height()>n+i&&t.scrollTop(s+(c.height()<i?c.height()-i:0))}else{c.addClass("collapsed");var a=o.openCategories.indexOf(e);a>=0&&o.openCategories.splice(a,1)}}))}c.append(u)}var h=l()('<div class="wb-property-group-children" />');if(c.append(h),c.on("componentvisibilitychanged",(function(){var e=!1;h.children().each((function(){var t=l()(this);return!(!t.hasClass("hidden")&&"none"!==t.css("display")&&(e=!0,1))})),e?c.removeClass("hidden"):c.addClass("hidden")})),!this.isSubPanel&&0===i&&e.length>0){for(var p=this.openCategories,m=s.PropertyType.defaultOpenCategories,g=!1,f="",y="",b=0,v=e;b<v.length;b++){var _=v[b];if(_.propertyType){var C=_.propertyType.path.slice(0,i+1).join("/");if(m.indexOf(C)>=0&&!f&&(f=C),y||(y=C),p.indexOf(C)>=0){g=!0;break}}}g||p.push(f||y)}for(var w=0,T=e;w<T.length;w++){var E=T[w];if(E.propertyType)if(E.propertyType.path.length===i+1)h.append(E.getElem().attr("data-property-type",E.propertyType.id));else{var I=E.propertyType.path.slice(0,i+1).join("/");I!==r&&(null!==r&&a.length&&h.append(this.renderTree(a,s.PropertyType.getCategoryTranslation(r),i+1,r)),r=I,a=[]),a.push(E)}}return null!==r&&a.length&&h.append(this.renderTree(a,s.PropertyType.getCategoryTranslation(r),i+1,r)),c},e.prototype.bind=function(e){var t,i=this;this.unbind(!1),this.components=[],this.hasObjectsSelected=e.length>0;for(var n=e.length>1,o=new Map,r=0,a=e;r<a.length;r++){var l=a[r],u=l.getProperties();for(var d in u)if(u.hasOwnProperty(d)){var h=u[d];if(h.type&&h.type.component&&(h.type.accessLevel!=s.PropertyTypeAccess.Admin||c.wbConfig.adminMode)&&(h.type.accessLevel!=s.PropertyTypeAccess.Developer||c.wbConfig.devDebugMode)&&(h.type.accessLevel!=s.PropertyTypeAccess.ComposerOrAdmin||c.wbConfig.adminMode||wb_builder.isComposer)&&(!n||h.type.componentSupportsMultipleObjectBindings&&h.type.allowMultipleObjectBindings)){var p=void 0;if(!o.has(h.type)){try{(p=h.type.componentFactory?h.type.componentFactory():new h.type.component).propertyType=h.type}catch(e){console.error(e),console.error("Failed to create UI component for ".concat(h.type.id," property type (see previous error)")),o.set(h.type,null);continue}o.set(h.type,p)}if((p=o.get(h.type))&&(p.bindProperty(l,h),h.dependencies&&"object"==typeof h.dependencies&&h.dependencies.length))for(var m=0,g=h.dependencies;m<g.length;m++){var f=g[m];if(u.hasOwnProperty(f))p.bindDependencyProperty(l,u[f]);else{var y=l.className||(null===(t=Object.getPrototypeOf(l).constructor)||void 0===t?void 0:t.name);console.error("Property ".concat(d," of ").concat(y," depends on non-existing property ").concat(f,"."))}}}}}o.forEach((function(e){if(e){var t=e.propertyType;try{"function"==typeof e.buildInit&&e.buildInit(t.defaultComponentOptions||{},{}),e.prepareForPropertyPanel().setLabel(t.name),t.inlineSize&&e.getElem().addClass("wb-property-inline"+(t.inlineSize<12?"-"+t.inlineSize:"")),i.components.push(e)}catch(e){console.error(e),console.error("Failed to create UI component for ".concat(t.id," property type (see previous error)"))}}})),this.components.sort((function(e,t){return s.PropertyType.compare(e.propertyType,t.propertyType)})),this.render()},e.prototype.unbind=function(e){void 0===e&&(e=!0);for(var t=0,i=this.components;t<i.length;t++)i[t].destroy();this.components=[],this.hasObjectsSelected=!1,e&&this.render()},e.prototype.getComponentForProperty=function(e){if(e.type&&this.components.length)for(var t=0,i=this.components;t<i.length;t++){var n=i[t];if(n.propertyType===e.type)return n}return null},e.prototype.scrollPropertyIntoView=function(e,t){void 0===t&&(t=!1);var i=this.getComponentForProperty(e);if(i){var n=i.getElem();n.parents(".wb-property-group").removeClass("collapsed"),n[0].scrollIntoView(),t&&setTimeout((function(){n.stop(!0,!1).animate({backgroundColor:"#f8d7da"},60,(function(){n.stop(!0,!1).animate({backgroundColor:""},400,(function(){n.css({backgroundColor:""})}))}))}),250)}},e}()},"./ui/RadioBoxGroupControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{RadioBoxGroupControl:function(){return d},RadioBoxGroupDirection:function(){return o}});var n,o,s=i("./UIComponent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=i("./WB_ToolTipControl.class.js"),c=i.n(l),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e.Column="column",e.Row="row"}(o||(o={}));var d=function(e){function t(){var t=e.call(this)||this;return t.options=[],t.direction=o.Column,t.itemClass=null,t.inputContainer=a()('<div class="wb-radio-box-group" />'),t.setDirection(t.direction),t.inputContainer.on("change",(function(){t.onValueChanged()})),t.getElem().append(t.inputContainer),t}return u(t,e),t.prototype.buildInit=function(e,t){e.options&&this.setOptions(e.options),e.direction&&this.setDirection(e.direction),"value"in e&&this.setValue(e.value)},t.prototype.setOptions=function(e){if(this.options.length==e.length){for(var i=!0,n=this.options.length-1;n>=0;n--)if(this.options[n].value!==e[n].value||this.options[n].label!==e[n].label||this.options[n].disabled!==e[n].disabled){i=!1;break}if(i)return}this.options=e;var o=this.getValue();this.inputContainer.empty();for(var s="wb_rbgc_"+t.nextGroupIndex++,r=0,l=e;r<l.length;r++){var u=l[r],d=a()('<div class="radio" />');this.itemClass&&d.addClass(this.itemClass);var h=a()("<label/>"),p=a()('<input type="radio" />').attr("name",s).data("option",u).attr("value","object"==typeof u.value?JSON.stringify(u.value):u.value),m=u.label;"object"==typeof m&&(m="function"==typeof m.clone?m.clone():a()(m));var g=a()("<span>").append(m);if(!u.disabled&&this._enabled||(d.addClass("disabled"),p.prop("disabled",!0)),u.title&&d.attr("title",u.title),h.append(p,g),u.helpText&&""!==u.helpText){var f=u.helpTextPlacement||"top",y=u.helpText,b="?";"warn:"==u.helpText.substring(0,5)?(y=u.helpText.substring(5),b="warn"):"error:"==u.helpText.substring(0,6)&&(y=u.helpText.substring(6),b="error"),window.hasOwnProperty("wb_builder")&&wb_builder.rtl&&("left"===f?f="right":"right"===f&&(f="left"));var v=new(c())(b,y,f);h.append(v.elem),v.setLabel(b),v.setTitle(y,!0),v.setPlacement(f)}d.append(h),this.inputContainer.append(d),"function"==typeof u.init&&u.init.call(d,p,g)}this.setValue(o)},t.prototype.setEnabled=function(t){this._enabled!==t&&(e.prototype.setEnabled.call(this,t),a()("input",this.inputContainer).each((function(){var e=a()(this),i=e.closest(".radio"),n=e.data("option");t&&!n.disabled?(i.removeClass("disabled"),e.prop("disabled",!1)):(i.addClass("disabled"),e.prop("disabled",!0))})))},t.prototype.setDirection=function(e){this.direction=e,this.inputContainer.removeClass("wb-radio-box-group-row wb-radio-box-group-column").addClass("wb-radio-box-group-"+this.direction)},t.prototype.setItemClass=function(e){if(this.itemClass!==e){var t=this.inputContainer.children();this.itemClass&&t.removeClass(this.itemClass),this.itemClass=e,this.itemClass&&t.addClass(this.itemClass)}},t.prototype.setValue=function(e){this.inputContainer.find("input").each((function(){var t=a()(this);t.prop("checked",t.data("option").value===e)}))},t.prototype.getValue=function(){var e;return null===(e=a()("input:checked",this.inputContainer).data("option"))||void 0===e?void 0:e.value},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"options"in t&&this.setOptions(t.options),"direction"in t&&this.setDirection(t.direction),"itemClass"in t&&this.setItemClass(t.itemClass)},t.nextGroupIndex=0,t}(s.UIComponent)},"./ui/ResetTemplateDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{show:function(){return s}});var n=i("./ui/BaseConfirmDialog.ts"),o=null;function s(){return o||(o=new n.BaseConfirmDialog(__("Reset"),__("Are you sure you want to reset current template?"),__("Once reset your information will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes, reset template"))),(0,n.showDeferred)(o)}},"./ui/ScriptEditDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ScriptEditDialog:function(){return m}});var n,o=i("./WB_Dialog.class.js"),s=i.n(o),r=i("./HorizontalLayout.ts"),a=i("./TextField.ts"),l=i("./VerticalLayout.ts"),c=i("./Label.ts"),u=i("./Service.ts"),d=i("./lib/jquery-1.11.3.min.js"),h=i.n(d),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(e){function t(){var t=e.call(this,__("Edit"),!1)||this;return t.deferred=null,t.libDlg=null,t.useMedia=!0,t.setContent(new u.Service.UIBuilder({type:l.VerticalLayout,children:[{type:r.HorizontalLayout,columnWeights:[9,3],children:[{type:c.Label,text:__("HTML code")}]},{type:a.TextField,id:"code",textArea:!0,placeholder:__("Click to edit script"),fixedWidth:12,css:{height:240,marginBottom:0}}]},t.fields)),t.addButton(__("Cancel"),(function(){return t.onCancel()})),t.addButton(__("Apply"),(function(){return t.onApply()}),!0),t.footerElem.addClass("wb-script-editor-dlg-footer"),t.setFooterVisible(!0),t.setUseMedia(!1),t}return p(t,e),t.prototype.setUseMedia=function(e){var t=this;if(this.useMedia!=e){this.useMedia=e,this.removeButton(__("Cancel")),this.removeButton(__("Apply"));var i=__("Click to add file(s)");e?this.addButton(i,(function(){return t.insertMedia()}),!1,"pull-left"):this.removeButton(i),this.addButton(__("Cancel"),(function(){return t.onCancel()})),this.addButton(__("Apply"),(function(){return t.onApply()}),!0)}},t.prototype.setPlaceholder=function(e){this.fields.code.setPlaceholder(e)},t.prototype.insertMedia=function(){var e=this;if(!this.libDlg){this.libDlg=u.Service.mediaLibrary.open(__("Select media"),!1,"all",!1);var t=this.libDlg;t.addButton(__("Cancel")),t.addButton(__("Select"),(function(){var i=t.getSelectedFiles(!1);i.length>0&&(e.fields.code.focus(),e.fields.code.insertAtCursor(i[0])),t.hide()}),!0)}this.libDlg.clearFileSelection(),this.libDlg.show()},t.prototype.onCancel=function(){this.setVisible(!1),this.deferred&&this.deferred.reject()},t.prototype.onApply=function(){this.setVisible(!1),this.deferred&&this.deferred.resolve(this.fields.code.getValue())},t.prototype.edit=function(e){return this.fields.code.setValue(e),this.setVisible(!0),this.deferred=h().Deferred(),this.deferred.promise()},t}(s())},"./ui/ScriptEditorControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ScriptEditorControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./ui/ThumbEditorControl.ts"),r=i("./ui/ScriptEditDialog.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.onChange=t,i.value="",i.codeDialog=null,i.thumbCtrl=(new s.ThumbEditorControl).setMessage(__("Click to edit script")).onEdit((function(){return i.edit()})).onRemove((function(){return i.clear()})),i._elem.addClass("wb-script-editor-control").append(i.thumbCtrl.getElem()),i}return a(t,e),t.prototype.buildInit=function(e,t){var i,n;e.value&&this.setValue(e.value),"change"in e&&"function"==typeof e.change&&(i=this,n=e.change,this.onChange=function(){n.call(i,t)}),"big"in e&&this.setBig(!!e.big),"useMedia"in e&&(this.useMedia=!!e.useMedia),"string"==typeof e.placeholder&&(this.placeholder=e.placeholder)},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"big"in t&&this.setBig(!!t.big),"useMedia"in t&&(this.useMedia=!!t.useMedia),"string"==typeof t.placeholder&&(this.placeholder=t.placeholder)},t.prototype.destroy=function(){this.codeDialog&&this.codeDialog.dispose(),e.prototype.destroy.call(this)},t.prototype.setBig=function(e){this.thumbCtrl.setSize(e?s.ThumbSize.Big:s.ThumbSize.Normal)},t.prototype.setCodePreview=function(e){this.thumbCtrl.setPreview(e.replace(/\t/g,"    "))},t.prototype.edit=function(){var e=this;this.codeDialog||(this.codeDialog=new r.ScriptEditDialog),void 0!==this.useMedia&&this.codeDialog.setUseMedia(this.useMedia),void 0!==this.placeholder&&this.codeDialog.setPlaceholder(this.placeholder),this.codeDialog.edit(this.value).then((function(t){t&&(e.value=t,e.setCodePreview(t)),"function"==typeof e.onChange&&e.onChange(),e.onValueChanged()}))},t.prototype.clear=function(){this.value="",this.setCodePreview(""),"function"==typeof this.onChange&&this.onChange(),this.onValueChanged()},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){"string"!=typeof e&&(e=""),this.value=e,this.setCodePreview(e)},t}(o.UIComponent)},"./ui/SelectParentMenu.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SelectParentMenu:function(){return r}});var n,o=i("./ContextMenu.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t}return s(t,e),t.prototype.update=function(e){var t=this;this.removeAllItems(),this.element=e;for(var i=e,n=0;i;)n++,i=i.getParent();i=e;for(var o=0;i;){var s=i.getSiteTreeNodeProperties(),r=s&&s.name?__tr(s.name)+(s.meta?' <span style="color: #999;">'.concat(s.meta,"</span>"):""):i.getClassType();o||(r+=" ("+__("current")+")");var a=s&&s.icon?s.icon:"fa fa-chevron-right";this.insertItemAt(0,"wb-select-parent-".concat(e.id),r,(function(e,i){return t.onSelect(i)}),!1,!o,i,a,!1,1.2*(n-o-1)),o++,i=i.getParent()}},t.prototype.onSelect=function(e){this.element&&this.element.isSelected()&&this.element!==e&&this.element.setSelected(!1),e.setSelected(!0)},t}(o.ContextMenu)},"./ui/SettingsDialog.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SettingsDialog:function(){return w}});var n,o=i("./lib/jquery-1.11.3.min.js"),s=i.n(o),r=i("./core/BuilderConfig.ts"),a=i("./WB_Dialog.class.js"),l=i.n(a),c=i("./Service.ts"),u=i("./SizeSelector.ts"),d=i("./WYSIWYGControl.ts"),h=i("./ColorPicker.ts"),p=i("./util/MenuList.ts"),m=i("./List.ts"),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=new(function(){function e(){this.pages={}}return e.prototype.update=function(e){for(var t in this.common={headSnippetsHtml:e.headSnippetsHtml,bodySnippetsHtml:e.bodySnippetsHtml,bodyStartSnippetsHtml:e.bodyStartSnippetsHtml},e.pages){var i=e.pages[t];this.pages["#"+i.id]={headSnippetsHtml:i.headSnippetsHtml,bodySnippetsHtml:i.bodySnippetsHtml,bodyStartSnippetsHtml:i.bodyStartSnippetsHtml}}},e}()),y=function(){function e(e){e&&(this.name=e.name,this.description=e.description,this.necessary=e.necessary)}return e.prototype.serialize=function(){return{name:this.name,description:this.description,necessary:this.necessary}},e}(),b=new function(){this.cookies={},this.maxId=0},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.buildInit=function(t,i){var n=this;t.itemType=c.Service.menu.MenuItem,t.editable=!1,t.select=function(e,t){return n.onSelect(e,t)},e.prototype.buildInit.call(this,t,i),this._control.setHeight(372)},t.prototype.onSelect=function(e,t){var i=this.getLastSelected();if(i){var n="external"!==i.type&&i.targetId?i.targetId:null,o=n?f.pages["#"+n]:f.common;o&&(o.headSnippetsHtml=e.headSnippetsHtml.getValue(),o.bodySnippetsHtml=e.bodySnippetsHtml.getValue(),o.bodyStartSnippetsHtml=e.bodyStartSnippetsHtml.getValue())}var s="external"!==t.type&&t.targetId?t.targetId:null,r=s?f.pages["#"+s]:f.common;r?(e.headSnippetsHtml.setValue(r.headSnippetsHtml),e.bodySnippetsHtml.setValue(r.bodySnippetsHtml),e.bodyStartSnippetsHtml.setValue(r.bodyStartSnippetsHtml)):(e.headSnippetsHtml.setValue(""),e.bodySnippetsHtml.setValue(""),e.bodyStartSnippetsHtml.setValue("")),e.updateScriptsLabels(t,e)},t}(m.List),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.buildInit=function(t,i){var n=this;t.itemType=y,t.editable=!0,t.sortable=!1,t.newItemButtonText=__("Add new"),t.add=function(e,t,i){return n.onAdd(e,t,i)},t.remove=function(e,t,i){return n.onRemove(e,t,i)},t.select=function(e,t){return n.onSelect(e,t)},e.prototype.buildInit.call(this,t,i),this._control.setHeight(250),this._elem.height("auto")},t.prototype.onAdd=function(e,t,i){t.id=b.maxId,b.cookies[t.id]=t;var n=i.querySelector(".lc-icon");n&&(n.classList.add("glyphicon-file"),n.classList.remove("glyphicon-folder-open")),b.maxId++,this.selectItemLi(s()(i))},t.prototype.onRemove=function(e,t,i){delete b.cookies[t.id],e.cookieName.setValue(""),e.cookieDescription.setValue(""),e.cookieNecessary.setValue(!1),e.cookiePolicyItemForm.setVisible(!1)},t.prototype.onSelect=function(e,t){var i=this.getLastSelected();if(i){var n=b.cookies[i.id]||null;if(n&&(i.name=n.name=e.cookieName.getValue(),i.description=n.description=e.cookieDescription.getValue(),i.necessary=n.necessary=e.cookieNecessary.getValue()),i.id===t.id)return}var o=b.cookies[t.id]||null;e.cookieName.setValue(o&&o.name?o.name:""),e.cookieDescription.setValue(o&&o.description?o.description:""),e.cookieNecessary.setValue(!(!o||!o.necessary)&&o.necessary),e.cookiePolicyItemForm.setVisible(!!t)},t}(m.List),C=function(){},w=function(e){function t(){var t=e.call(this,__("Site settings"))||this;return t.dialog.addClass("wb-modal-settings"),t.fields=new C,t.setContent(t.buildUI(),!0),t.addButton(__("Cancel")),t.addButton(__("Apply"),(function(){return t.applyChanges()}),!0),t}return g(t,e),t.prototype.updateScriptsLabels=function(e,t){for(var i=[t.headSnippetsLabel,t.bodySnippetsLabel,t.bodyStartSnippetsLabel],n=-1===e.id?__("Scripts are added as plain HTML to every page of the website."):__("The script will be added after common script as a plain HTML to a selected page of the website."),o=0,s=i;o<s.length;o++)s[o].setHelpText(n)},t.prototype.buildUI=function(){var e=this,t=this.fields;t.updateScriptsLabels=this.updateScriptsLabels;var i,n=[];return n.push({children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"forceHttps",ignore:r.wbConfig.isB2C,label:__("Publish Site with forced HTTPS"),helpText:__("This option requires SSL to be enabled on your server."),change:function(e){e.forceHttpsPort&&e.forceHttpsPort.setEnabled(this.getValue())}},{type:"FlowLayout",verticalAlign:"middle",ignore:!wb_builder.enableForcedHttpsPort,children:[{type:"Label",text:__("Forced HTTPS port")},{type:"TextField",id:"forceHttpsPort",css:{width:60},styleClass:"input-sm",placeholder:"443"}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"forceRedirectEnabled",label:__("Publish Site with forced redirection"),helpText:__("After changing an option and publishing site clear browser cache."),change:function(){this.getValue()?t.forceRedirectLine.setEnabled(!0):t.forceRedirectLine.setEnabled(!1)},init:function(){r.wbConfig.isB2C&&this.setEnabled(!1)}},{type:"VerticalLayout",id:"forceRedirectLine",css:{marginTop:10},enabled:!1,children:[{type:"RadioBox",group:"force_redirect",id:"forceRedirectNonWww",label:__("Redirect from www to non-www")},{type:"RadioBox",group:"force_redirect",id:"forceRedirectWww",label:__("Redirect from non-www to www")}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"forceSlashes",label:__('Force trailing slash symbol "/" in each page URL'),helpText:__('If checked page URLs will have trailing slash at the end. For example URL "yourwebsite.com/about" will turn to "yourwebsite.com/about/".')}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"disableRightClick",label:__("Disable mouse right-click on Site"),helpText:__("If checked the context menu will not appear when right-clicking site area.")}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"downloadCustomFonts",label:__("Force local copy of fonts on published website"),helpText:__("If set — custom fonts will be served from published website server instead of Google Fonts CDN")}]},{type:"HorizontalLayout",css:{marginTop:15},children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Min website width")},{type:"DropdownBox",id:"minWebsiteWidth"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Max website width")},{type:"DropdownBox",id:"maxWebsiteWidth"}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Image pixel density (Retina/4K Mode)"),helpText:__("Images for published websites will be generated 'Nx' (ex. 2x) times bigger to prevent blur on high density (Retina) screens")},{type:"DropdownBox",id:"imagePixelDensity"}]}]},{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"showDebugLines",label:__("Always show element bounds")}]}]}),n.push({name:__("Meta information"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"Label",text:__("Meta Tags"),helpText:__("Meta data HTML tags to be added to sites head.")},{type:"TextField",id:"metaHtml",textArea:!0,css:{height:100},placeholder:'<meta name="some name" content="some content"/>'}]}]}),n.push({name:__("Scripts"),children:[{type:"HorizontalLayout",columnWeights:[4,8],columnWeightsSmall:[4,8],css:{marginTop:"20px"},children:[{type:v,id:"scriptsList"},{type:"VerticalLayout",children:[{type:"Label",text:__("Before %s").replace("%s","</head>"),id:"headSnippetsLabel"},{type:"TextField",id:"headSnippetsHtml",textArea:!0,css:{height:100}},{type:"Label",text:__("Before %s").replace("%s","</body>"),css:{marginTop:15},id:"bodySnippetsLabel"},{type:"TextField",id:"bodySnippetsHtml",textArea:!0,css:{height:100}},{type:"Label",text:__("After %s").replace("%s","<body>"),css:{marginTop:15},id:"bodyStartSnippetsLabel"},{type:"TextField",id:"bodyStartSnippetsHtml",textArea:!0,css:{height:100}}]}]}]}),n.push({name:__("robots.txt"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"robotsTxtEnable",label:__("Enable")+" robots.txt",css:{marginBottom:10},helpText:__("Only enable if you know what you are doing.")},{type:"TextField",id:"robotsTxt",textArea:!0,css:{height:100},placeholder:""},{type:"CustomContainer",styleClass:"help-block help-block-sm",content:__("Example")+': <a href="'+(i=r.wbConfig.locale,("it_IT"===i?"https://it.wikipedia.org/wiki/Protocollo_di_esclusione_robot#Esempi":"ru_RU"===i?"https://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82_%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9_%D0%B4%D0%BB%D1%8F_%D1%80%D0%BE%D0%B1%D0%BE%D1%82%D0%BE%D0%B2#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B":"de_DE"===i?"https://de.wikipedia.org/wiki/Robots_Exclusion_Standard#Beispiele":"fr_FR"===i?"https://fr.wikipedia.org/wiki/Protocole_d%27exclusion_des_robots#Exemples":"pt_PT"===i||"pt_BR"===i?"https://pt.wikipedia.org/wiki/Protocolo_de_Exclus%C3%A3o_de_Rob%C3%B4s":"es_ES"===i?"https://es.wikipedia.org/wiki/Est%C3%A1ndar_de_exclusi%C3%B3n_de_robots#Ejemplos":"zh_HK"===i||"zh_CN"===i||"zh_TW"===i?"https://zh.wikipedia.org/wiki/Robots.txt#%E4%BE%8B%E5%AD%90":"https://en.wikipedia.org/wiki/Robots_exclusion_standard#Examples")+'" target="_blank">')+__("Robots exclusion standard")+"</a>"}]}]}),wb_builder.showHtaccess&&n.push({name:__("Custom %s").replace("%s",".htaccess"),children:[{type:"VerticalLayout",css:{marginTop:15},children:[{type:"CheckBox",id:"htaccessEnable",label:__("Enable")+" .htaccess",css:{marginBottom:10},helpText:__("Be careful with this field. Writing incorrect .htaccess directives may lead to an absolute inoperability of published website.")},{type:"TextField",id:"htaccess",textArea:!0,css:{height:100},placeholder:""},{type:"CustomContainer",styleClass:"help-block help-block-sm",content:__("Guide")+': <a href="https://httpd.apache.org/docs/2.4/howto/htaccess.html" target="_blank">.htaccess</a>'}]}]}),n.push({name:__("Cookie policy"),children:[{type:"VerticalLayout",css:{marginTop:15},spacing:15,children:[{type:"CheckBox",label:__("Enable cookie policy block"),id:"cookiePolicyEnabled",change:function(){return e.cookiePolicyEnableUpdate()}},{type:"VerticalLayout",spacing:15,id:"cookiePolicyAll",children:[{type:"HorizontalLayout",columnWeights:[4,8],children:[{type:"VerticalLayout",spacing:11,children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Button Text")},{type:"MultilangTextField",id:"cookiePolicyButtonText",textArea:!1}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Customize button Text")},{type:"MultilangTextField",id:"cookiePolicyCustomizeButtonText",textArea:!1}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Message")},{type:d.WYSIWYGControl,id:"cookiePolicyMessage",height:95}]}]},{type:"HorizontalLayout",columnWeights:[4,8],children:[{type:"FlowLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Font")},{type:"FlowLayout",spacing:-1,children:[{type:"FontFamilySelector",id:"cookiePolicyFont",css:{width:118}},{type:"Button",icon:"fa fa-pencil",click:function(e,t){t.cookiePolicyFont.getWrappedControl().openEditFontsDialog()}}]}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Size")},{type:u.SizeSelector,id:"cookiePolicyFontSize",min:8,max:72}]}]},{type:"HorizontalLayout",children:[{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Background")},{type:h.ColorPicker,id:"cookiePolicyBg",noTransparent:!1}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Message Color")},{type:h.ColorPicker,id:"cookiePolicyMessageColor",noTransparent:!1}]}]},{type:"HorizontalLayout",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Button Color")},{type:h.ColorPicker,id:"cookiePolicyButtonBg",noTransparent:!1}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Button Text Color")},{type:h.ColorPicker,id:"cookiePolicyButtonColor",noTransparent:!1}]}]}]}]},{type:"VerticalLayout",children:[{type:"Label",value:__("Cookies that are loaded only after visitor consent"),css:{display:"block",borderBottom:"1px solid #CCC",marginBottom:"15px",padding:"10px",paddingLeft:"0",fontWeight:"normal",color:"#333",fontSize:"16px"}},{type:"HorizontalLayout",columnWeights:[4,8],children:[{type:_,id:"cookieList"},{type:"VerticalLayout",spacing:11,id:"cookiePolicyItemForm",children:[{type:"VerticalLayout",children:[{type:"Label",text:__("Cookie name"),id:"cookieNameLabel"},{type:"TextField",id:"cookieName",textArea:!1}]},{type:"VerticalLayout",children:[{type:"Label",text:__("Cookie description"),id:"cookieDescriptionLabel"},{type:d.WYSIWYGControl,id:"cookieDescription",height:95}]},{type:"VerticalLayout",children:[{type:"CheckBox",id:"cookieNecessary",label:__("Required functional cookie")}]}]}]}]}]}]}]}),new c.Service.UIBuilder({type:"TabbedPane",tabs:n},this.fields)},t.prototype.cookiePolicyEnableUpdate=function(){var e=this.fields,t=e.cookiePolicyEnabled.getValue();e.cookiePolicyAll.setVisible(t)},t.prototype.applyChanges=function(){this.hide();var e=this.fields,t=wb_builder.site;for(var i in e.downloadCustomFonts&&(t.downloadCustomFonts=!!e.downloadCustomFonts.getValue()),e.forceHttps&&(t.publishWithForcedHttps=!!e.forceHttps.getValue()),e.forceHttpsPort&&(t.publishWithForcedHttpsPort=parseInt(e.forceHttpsPort.getValue(),10)),e.forceRedirectEnabled&&(t.forceRedirectEnabled=e.forceRedirectEnabled?e.forceRedirectEnabled.getValue():t.forceRedirectEnabled,e.forceRedirectWww.getValue()&&(t.forceRedirectWww=!0),e.forceRedirectNonWww.getValue()&&(t.forceRedirectWww=!1)),t.forceSlashes=!!e.forceSlashes&&e.forceSlashes.getValue(),t.disableRightClick=!!e.disableRightClick.getValue(),t.minWebsiteMode=e.minWebsiteWidth.getValue(),t.maxWebsiteMode=e.maxWebsiteWidth.getValue(),t.minWebsiteMode&&"-"!=t.minWebsiteMode||(t.minWebsiteMode=null),t.maxWebsiteMode&&"-"!=t.maxWebsiteMode||(t.maxWebsiteMode=null),t.minWebsiteMode&&t.maxWebsiteMode&&c.Service.modeManager.compareModes(t.minWebsiteMode,t.maxWebsiteMode)>0&&(t.minWebsiteMode=t.maxWebsiteMode),c.Service.modeManager.setMinMode(t.minWebsiteMode),c.Service.modeManager.setMaxMode(t.maxWebsiteMode),t.showDebugLines=!!e.showDebugLines.getValue(),wb_builder.bodyInstance&&wb_builder.bodyInstance.setDebugLinesVisible(t.showDebugLines),t.imagePixelDensity=parseInt(e.imagePixelDensity.getValue(),10),t.metaHtml=e.metaHtml.getValue(),e.scriptsList.selectFirst(),t.headSnippetsHtml=f.common.headSnippetsHtml,t.bodySnippetsHtml=f.common.bodySnippetsHtml,t.bodyStartSnippetsHtml=f.common.bodyStartSnippetsHtml,t.pages){var n=t.pages[i];(o=i in f.pages?f.pages[i]:null)&&(n.headSnippetsHtml=o.headSnippetsHtml,n.bodySnippetsHtml=o.bodySnippetsHtml,n.bodyStartSnippetsHtml=o.bodyStartSnippetsHtml)}t.robotsTxtEnable=!!e.robotsTxtEnable.getValue(),t.robotsTxt=e.robotsTxt.getValue(),"htaccessEnable"in e&&(t.htaccessEnable=!!e.htaccessEnable.getValue(),t.htaccess=e.htaccess.getValue()),t.cookiePolicyEnabled=e.cookiePolicyEnabled.getValue();var o,s=this.fields.cookieList.getLastSelected();for(var r in s&&(o=b.cookies[s.id]||null)&&(s.name=o.name=e.cookieName.getValue(),s.description=o.description=e.cookieDescription.getValue(),s.necessary=o.necessary=e.cookieNecessary.getValue()),t.cookiePolicyList=[],b.cookies){var a={};a.name=b.cookies[r].name,a.description=b.cookies[r].description,a.necessary=b.cookies[r].necessary,(a.name.length||a.description.length)&&t.cookiePolicyList.push(a)}t.cookiePolicyFont=e.cookiePolicyFont.getValue(),t.cookiePolicyFontSize=e.cookiePolicyFontSize.getValue(),t.cookiePolicyMessage=e.cookiePolicyMessage.getValue(),t.cookiePolicyButtonText=e.cookiePolicyButtonText.getValue(),t.cookiePolicyCustomizeButtonText=e.cookiePolicyCustomizeButtonText.getValue(),t.cookiePolicyBg=e.cookiePolicyBg.getValue(),t.cookiePolicyMessageColor=e.cookiePolicyMessageColor.getValue(),t.cookiePolicyButtonBg=e.cookiePolicyButtonBg.getValue(),t.cookiePolicyButtonColor=e.cookiePolicyButtonColor.getValue(),wb_builder.setPageModified(!0)},t.prototype.loadData=function(){var e=this.fields,t=wb_builder.site;f.update(t),e.downloadCustomFonts&&e.downloadCustomFonts.setValue(t.downloadCustomFonts),e.forceHttps&&e.forceHttps.setValue(t.publishWithForcedHttps),e.forceHttpsPort&&(e.forceHttpsPort.setValue(t.publishWithForcedHttpsPort?t.publishWithForcedHttpsPort:""),e.forceHttpsPort.setEnabled(!!e.forceHttps&&e.forceHttps.getValue())),e.forceRedirectEnabled&&(e.forceRedirectEnabled.setValue(t.forceRedirectEnabled),e.forceRedirectEnabled.trigger("change")),t.forceRedirectWww?(e.forceRedirectWww.setValue(!0),e.forceRedirectNonWww.setValue(!1)):(e.forceRedirectWww.setValue(!1),e.forceRedirectNonWww.setValue(!0)),e.forceSlashes.setValue(t.forceSlashes),e.disableRightClick.setValue(t.disableRightClick);for(var i=[{id:"-",name:"---"}],n=0,o=c.Service.modeManager.getModes();n<o.length;n++){var s=o[n];i.push({id:s,name:c.Service.modeManager.getModeName(s)+" ("+c.Service.modeManager.getModeWidth(s)+")"})}e.minWebsiteWidth.reload(i),e.minWebsiteWidth.setValue(t.minWebsiteMode||"-"),e.maxWebsiteWidth.reload(i),e.maxWebsiteWidth.setValue(t.maxWebsiteMode||"-"),e.showDebugLines.setValue(t.showDebugLines),e.imagePixelDensity.reload([{id:"1",name:"1x"},{id:"2",name:"2x ("+__("recommended")+")"},{id:"4",name:"4x"}]),e.imagePixelDensity.setValue(t.imagePixelDensity),e.metaHtml.setValue(t.metaHtml),e.scriptsList.removeAllItems(),e.scriptsList.addItem({id:-1,type:"default",name:__("Common (for all pages)"),serialize:function(){return this}},!1,"glyphicon glyphicon-folder-open");for(var r=!0,a=0,l=(0,p.buildMenuStruct)(!1,!0);a<l.length;a++){var u=l[a];r?r=!1:e.scriptsList.addSeparator();for(var d=0,h=u.items;d<h.length;d++){var m=h[d];if(m.miElem&&"internal"!==m.type){for(var g=(m.pageId&&"#"+m.pageId in t.pages?t.pages["#"+m.pageId]:null),b="external"===m.type||"anchor"===m.type||"empty"===m.type?"glyphicon glyphicon-share-alt":g&&g.isFront?"glyphicon glyphicon-home":"glyphicon glyphicon-folder-open",v=e.scriptsList.addItem(m.miElem,!1,b,m.isLink()),_=20,C=m.lvl;C>0;)C--,_+=20;v.css({marginLeft:_+"px"})}}}e.scriptsList.selectFirst(),e.headSnippetsHtml.setValue(t.headSnippetsHtml),e.bodySnippetsHtml.setValue(t.bodySnippetsHtml),e.bodyStartSnippetsHtml.setValue(t.bodyStartSnippetsHtml),e.robotsTxtEnable.setValue(t.robotsTxtEnable),e.robotsTxt.setValue(t.robotsTxt),"htaccessEnable"in e&&(e.htaccessEnable.setValue(t.htaccessEnable),e.htaccess.setValue(t.htaccess)),e.cookiePolicyEnabled.setValue(t.cookiePolicyEnabled),e.cookiePolicyItemForm.setVisible(!1),e.cookieList.removeAllItems();for(var w=0,T=t.cookiePolicyList;w<T.length;w++){var E=T[w],I=new y({name:E.name,description:E.description,necessary:E.necessary});e.cookieList.addItem(I,!1,"glyphicon glyphicon-file",!1)}e.cookieList.selectFirst(),e.cookiePolicyFont.setValue(t.cookiePolicyFont),e.cookiePolicyFontSize.setValue(t.cookiePolicyFontSize),e.cookiePolicyMessage.setValue(t.cookiePolicyMessage),e.cookiePolicyCustomizeButtonText.setValue(t.cookiePolicyCustomizeButtonText),e.cookiePolicyButtonText.setValue(t.cookiePolicyButtonText),e.cookiePolicyBg.setValue(t.cookiePolicyBg),e.cookiePolicyMessageColor.setValue(t.cookiePolicyMessageColor),e.cookiePolicyButtonBg.setValue(t.cookiePolicyButtonBg),e.cookiePolicyButtonColor.setValue(t.cookiePolicyButtonColor),this.cookiePolicyEnableUpdate()},t.prototype.setVisible=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t&&!i&&(n||this.loadData()),e.prototype.setVisible.call(this,t,i,n)},t}(l())},"./ui/SidebarPanel.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SidebarPanel:function(){return d}});var n=i("./Service.ts"),o=i("./util/EventUtil.ts"),s=i("./UserInput.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=!1,c=null,u=function(){function e(e,t,i,n,s,r){var u=this;if(this.id=e,this.contentElem=i,this.container=n,this.fixed=s,this.collapsed=!1,this.height=0,this.moveStarted=!1,this.startEvent=null,this.posFrom={left:0,top:0},this.sizeFrom={width:0,height:0},this.containerHeight=0,this.headerElem=null,this.collapsed=t&&"boolean"==typeof t.collapsed?t.collapsed:this.collapsed,this.height=t&&"number"==typeof t.height?t.height:this.height,this.elem=a()('<div class="wb-sidebar-item"/>'),s&&this.elem.addClass("wb-sidebar-item-fixed"),null!==r&&(this.headerElem=a()('<div class="wb-sidebar-item-header"/>').appendTo(this.elem),this.headerElem.on("click",(function(){u.setCollapsed(!u.collapsed),u.saveCollapsed()})),this.headerElem.append(a()('<div class="wb-sidebar-item-collapse"><i class="wb-sidebar-item-closed fa fa-caret-right"></i><i class="wb-sidebar-item-open fa fa-caret-down"></i></div>'),document.createTextNode(r))),this.contentContainerElem=a()('<div class="wb-sidebar-item-content"/>').appendTo(this.elem),i.appendTo(this.contentContainerElem),this.resizeHandle=a()("<div>").addClass("wb-sidebar-item-rhandle").on("mousedown touchstart",(function(e){return u.onDown(e)})).on("click",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()})),!l){l=!0;var d=a()(document.body);d.on("mousemove touchmove",(function(e){return function(e){if(c)if(c.moveStarted){var t=(0,o.posFromEvent)(e).top,i=100*(c.sizeFrom.height+(t-c.posFrom.top))/c.containerHeight;c.setHeight(i)}else c.start(e)}(e)})),d.on("mouseup touchend touchcancel",(function(e){c&&(c.saveHeight(),c.cancel())}))}this.updateStyle()}return e.prototype.setCollapsed=function(e){this.collapsed=e,this.updateStyle()},e.prototype.appendTo=function(e){e.append(this.elem),e.append(this.resizeHandle)},e.prototype.detach=function(){this.elem.detach(),this.resizeHandle.detach()},e.prototype.setHeight=function(e){this.height=e,this.updateStyle()},e.prototype.updateStyle=function(){this.collapsed?(this.elem.addClass("collapsed"),this.elem.css({height:"auto",flex:"0 1 auto"})):(this.elem.removeClass("collapsed"),this.height>0?this.elem.css({height:this.height+"%",flex:"0 0 auto"}):this.elem.css({height:"",flex:""}))},e.prototype.getStoredState=function(){return this.container.getItemState(this.id,!0)},e.prototype.saveCollapsed=function(){this.getStoredState().collapsed=this.collapsed,this.container.saveState()},e.prototype.saveHeight=function(){this.getStoredState().height=this.height,this.container.saveState()},e.prototype.onDown=function(e){return this.moveStarted=!1,this.startEvent=e,c=this,e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1},e.prototype.cancel=function(){this.moveStarted=!1,this.startEvent=null,c=null},e.prototype.start=function(e){var t,i;if(this.startEvent&&c){var n=this.startEvent;(0,o.moveEventDiff)(n,e)<=4||(this.moveStarted=!0,t=(0,o.posFromEvent)(n),this.posFrom.left=t.left,this.posFrom.top=t.top,i=this.elem.get(0).getBoundingClientRect(),this.sizeFrom.width=i.width,this.sizeFrom.height=i.height,this.containerHeight=this.container.getHeight())}else this.cancel()},e}(),d=function(){function e(e){var t=this;this.body=e,this.siteElem=null,this.visible=!1,this.defWidth=300,this.items={},this.readState(),this.elem=a()("<div>").addClass("wb-sidebar"),this.elemRaw=this.elem[0],e.append(this.elem),this.toggleBtn=a()("<div>").addClass("wb-sidebar-toggle").appendTo(e).on("click",(function(e){s.UserInput.blockNextMouseUpDeselect=!0;var i=function(){setTimeout((function(){s.UserInput.blockNextMouseUpDeselect=!1}),10),a()(document.body).off("mouseup touchend touchcancel",i)};a()(document.body).on("mouseup touchend touchcancel",i),t.toggle()}))[0],this.toggleIcon=a()("<span>").addClass("wb-sidebar-toggle-icon fa").appendTo(this.toggleBtn)[0],this.setVisible(this.visible,!0),a()(window).on("resize",(function(){return t.updateSize()})),this.elem.on("mousedown touchstart",(function(e){s.UserInput.blockNextMouseUpDeselect=!0;var t=function(){setTimeout((function(){s.UserInput.blockNextMouseUpDeselect=!1}),10),a()(document.body).off("mouseup touchend touchcancel",t)};a()(document.body).on("mouseup touchend touchcancel",t)})).on("mouseup touchend touchcancel",(function(e){})).on("click",(function(e){}))}return e.prototype.getHeight=function(){return this.elem.outerHeight()},e.prototype.getElem=function(){return this.elem},e.prototype.getItemState=function(e,t){if(void 0===t&&(t=!1),!this.state.panels||"object"!=typeof this.state.panels){if(!t)return null;this.state.panels={}}if(!this.state.panels.hasOwnProperty(e)||!this.state.panels[e]||"object"!=typeof this.state.panels[e]){if(!t)return null;this.state.panels[e]={}}return this.state.panels[e]},e.prototype.setSiteElem=function(e){this.siteElem=e,this.setVisible(this.visible,!0)},e.prototype.add=function(e,t,i,n,o,s){void 0===i&&(i=!1),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===s&&(s=0);var r=a().extend(!0,{collapsed:o,height:s},this.getItemState(e,!1)),l=new u(e,r,t,this,i,n);return this.items[e]=l,l.appendTo(this.elem),l},e.prototype.remove=function(e){this.items.hasOwnProperty(e.id)&&(delete this.items[e.id],e.detach())},e.prototype.toggle=function(){this.setVisible(!this.visible),this.state.open=this.visible,this.saveState()},e.prototype.updateSize=function(){var e=n.Service.uiManager.getManager().getToolbarHeight();this.elemRaw.style.top=e+"px"},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(e,t){void 0===t&&(t=!1),(t||this.visible!=e)&&(this.visible=e,e?(this.updateSize(),this.elemRaw.style.width=this.defWidth+"px",this.elemRaw.style.display="flex",this.toggleIcon.classList.remove("fa-angle-double-left"),this.toggleIcon.classList.add("fa-angle-double-right"),this.toggleBtn.style.right=this.defWidth+45+"px",this.toggleBtn.classList.add("wb-open"),this.body&&(this.body[0].style.marginRight=this.defWidth+"px",a()(window).trigger("resize"))):(this.elemRaw.style.display="none",this.toggleIcon.className="wb-sidebar-toggle-icon fa",this.toggleIcon.classList.remove("fa-angle-double-right"),this.toggleIcon.classList.add("fa-angle-double-left"),this.toggleBtn.style.right="",this.toggleBtn.classList.remove("wb-open"),this.body&&(this.body[0].style.marginRight="0px",a()(window).trigger("resize"))))},e.prototype.blinkToggle=function(e){e?this.toggleBtn.classList.add("blink"):this.toggleBtn.classList.remove("blink")},e.prototype.readState=function(){var e,t,i,n,o,s=null===(e=window.localStorage)||void 0===e?void 0:e.getItem("wb-sidebar");if("string"==typeof s&&(this.state=JSON.parse(s)),!this.state||"object"!=typeof this.state){this.state={};var r=null===(t=window.localStorage)||void 0===t?void 0:t.getItem("wb-sidebar-open"),l=!1;"string"==typeof r&&(this.state.open="1"==r,l=!0);var c=null===(i=window.localStorage)||void 0===i?void 0:i.getItem("wb-sidebar-height");if(c){var u=JSON.parse(c);if(u instanceof Array&&u.length){var d=parseFloat(u[0]);!isNaN(d)&&d>=0&&(this.getItemState("site-tree",!0).height=d,l=!0)}}null===(n=window.localStorage)||void 0===n||n.removeItem("wb-sidebar-open"),null===(o=window.localStorage)||void 0===o||o.removeItem("wb-sidebar-height"),l&&this.saveState()}this.visible="boolean"==typeof this.state.open?this.state.open:a()(window).width()>=580},e.prototype.saveState=function(){window.localStorage&&window.localStorage.setItem("wb-sidebar",JSON.stringify(this.state))},e}()},"./ui/SiteLanguagesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{SiteLanguagesControl:function(){return g}});var n,o=i("./core/BuilderConfig.ts"),s=i("./Service.ts"),r=i("./DropdownBox.ts"),a=i("./UIButton.ts"),l=i("./UIComponent.ts"),c=i("./VerticalLayout.ts"),u=i("./lib/jquery-1.11.3.min.js"),d=i.n(u),h=i("./BuilderEvent.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(){return m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},g=function(e){function t(){var i=e.call(this)||this;return i.refilling=!1,s.Service.UIBuilder.buildLayout({type:c.VerticalLayout,styleClass:"wb_langs",children:[{type:y,id:"languageList",change:function(){return i.onListChange()}},{type:"Button",text:"+ "+__("Add language"),id:"langsAddBtn",buttonStyle:a.UIButton.STYLE_LINK,styleClass:"add-lang",click:function(){return i.addLang()}},{type:"FlowLayout",id:"langsAddBlock",styleClass:"add-lang-block",spacing:0,visible:!1,children:[{type:"DropdownBox",id:"langSelector",select:function(e){return i.confirmAddLang(e)},css:{maxWidth:160}},{type:"Button",text:__("Cancel"),buttonStyle:a.UIButton.STYLE_LINK,click:function(){return i.cancelAddLang()}}]}]},i._elem,i.fields={}),t.globalEventListenerInitialized||(t.globalEventListenerInitialized=!0,h.GlobalEvents.on("languages.update",(function(){d()(".wb_langs").closest(".wb-property").trigger("languageschanged")}))),i._elem.on("languageschanged",(function(){i.invalidate()})),i}return p(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}},t.prototype.setValue=function(e){var t=this.fields.languageList;t.removeAllItems();for(var i=0,n=e;i<n.length;i++){var o=n[i];t.addLanguage(m({},o))}this.reloadSelector(t.languages)},t.prototype.getValue=function(){for(var e=this.fields.languageList,t=null,i=[],n=0,o=e.languages;n<o.length;n++)(a=o[n]).lang.isDefault&&(t=a.lang.code);!t&&e.languages.length>0&&e.languages[0].setDefault(!0);for(var s=0,r=e.languages;s<r.length;s++){var a=r[s];i.push(m({},a.lang))}return i},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t)},t.prototype.addLang=function(){var e=this;this.fields.langsAddBlock.setVisible(!0),this.fields.langsAddBtn.setVisible(!1),window.requestAnimationFrame((function(){e.fields.langSelector.setOpen(!0)}))},t.prototype.confirmAddLang=function(e){if(!this.refilling&&this.fields){if(e){var t=this.fields.languageList,i=e.getOriginal();if(!i)return;t.addLanguage({name:i.name,code:i.code,locale:i.locale,hrefLang:i.hrefLang,isDefault:t.languages.length<=0}),this.reloadSelector(t.languages),this.handleChange()}this.cancelAddLang()}},t.prototype.cancelAddLang=function(){this.fields.langsAddBlock.setVisible(!1),this.fields.langsAddBtn.setVisible(!0),this.refilling=!0,this.fields.langSelector.selectItem(null),this.refilling=!1},t.prototype.onListChange=function(){this.reloadSelector(this.fields.languageList.languages),this.handleChange()},t.prototype.reloadSelector=function(e){for(var t={},i=0,n=e;i<n.length;i++)t[(c=n[i].lang).code]=!0;var s=this.fields.langSelector;this.refilling=!0,s.removeAllItem();for(var a=0,l=o.wbConfig.availableLanguages;a<l.length;a++){var c;(c=l[a]).code in t||s.addItem(new r.DropdownBox.Item(c.name,c.code,c))}this.fields.langSelector.selectItem(null),this.refilling=!1},t.prototype.handleChange=function(){"function"==typeof this.onChange&&this.onChange(),this.onValueChanged()},t.globalEventListenerInitialized=!1,t}(l.UIComponent),f=function(){function e(e,t,i){var n=this;this.lang=e,this.elem=d()("<div>").addClass("lang-item").data("langs-code",e.code).append(new a.UIButton(null,a.UIButton.STYLE_LINK,"glyphicon glyphicon-star-empty").addClass("btn-make-default").setTitle(__("Make default")).on("click",(function(){return t(n)})).getElem()).append(d()("<i>").addClass("glyphicon glyphicon-star").attr({title:__("Default")})).append(d()("<span>").text(e.name)).append(new a.UIButton(null,a.UIButton.STYLE_LINK,"glyphicon glyphicon-remove").addClass("btn-delete").setTitle(__("Remove")).on("click",(function(){return i(n)})).getElem()),this.setDefault(e.isDefault,!0)}return e.prototype.setDefault=function(e,t){void 0===t&&(t=!1),(this.lang.isDefault!==e||t)&&(this.lang.isDefault=e,e?this.elem.addClass("default"):this.elem.removeClass("default"))},e}(),y=function(e){function t(){var t=e.call(this)||this;return t.languages=[],t.onChange=null,t._elem.css({maxHeight:"176px",overflowY:"auto"}).sortable({items:".lang-item",tolerance:"pointer",update:function(e,i){var n,o,s=i.item.data("langs-code"),r=i.item.index();for(n=0;n<t.languages.length;n++)if(t.languages[n].lang.code===s){o=t.languages[n],t.languages.splice(n,1),t.languages.splice(r,0,o);break}"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()}}),t}return p(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}},t.prototype.removeAllItems=function(){this._elem.empty(),this.languages.splice(0,this.languages.length)},t.prototype.addLanguage=function(e){var t=this,i=new f(e,(function(e){return t.onStar(e)}),(function(e){return t.onRemove(e)}));this.languages.push(i),this._elem.append(i.elem)},t.prototype.onStar=function(e){for(var t=0,i=this.languages;t<i.length;t++){var n=i[t];n.setDefault(n===e)}this.handleChange()},t.prototype.onRemove=function(e){if(this.languages.length<2)alert(__("Last language cannot be removed"));else{var t=this.languages.indexOf(e);t>=0&&this.languages.splice(t,1),e.elem.remove(),e.lang.isDefault&&this.languages[0].setDefault(!0),this.handleChange()}},t.prototype.handleChange=function(){"function"==typeof this.onChange&&this.onChange(),this.onValueChanged()},t}(l.UIComponent)},"./ui/StaticTextControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{StaticTextControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;return t.value="",t.syntaxHighlight=!1,t.monospace=!1,t.textContainer=r()('<div class="wb-static-text" />'),t.getElem().append(t.textContainer),t}return a(t,e),t.prototype.buildInit=function(e,t){"syntaxHighlight"in e&&this.setSyntaxHighlight(e.syntaxHighlight),"monospace"in e&&this.setMonospace(e.monospace),"value"in e&&this.setValue(e.value)},t.prototype.setSyntaxHighlight=function(e){this.syntaxHighlight!==e&&(this.syntaxHighlight=e,e?this.textContainer.addClass("wb-syntax-highlight"):this.textContainer.removeClass("wb-syntax-highlight"),this.setValue(this.value))},t.prototype.setMonospace=function(e){this.monospace!==e&&(this.monospace=e,e?this.textContainer.addClass("wb-monospace"):this.textContainer.removeClass("wb-monospace"))},t.prototype.setValue=function(e){if(this.value=e,null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e){var i=this.textContainer;this.syntaxHighlight&&(i=r()("<span>"),this.textContainer.append(i),null==e?i.addClass("wb-syntax-null"):"boolean"==typeof e?i.addClass("wb-syntax-boolean"):"number"==typeof e?i.addClass("wb-syntax-number"):i.addClass("wb-syntax-string")),i.text(e)}else{var n="",o=Object.getPrototypeOf(e);o&&o.constructor&&o.constructor.name&&(n=o.constructor.name+" "),this.syntaxHighlight?this.textContainer.html(n+t.syntaxHighlight(e)):this.textContainer.text(n+t.stringify(e))}},t.prototype.getValue=function(){return this.value},t.supportsMultipleObjectBindings=function(){return!1},t.stringify=function(e){var t=new Set;return null!==e&&"object"==typeof e&&t.add(e),JSON.stringify(e,(function(e,i){if(null!==i&&"object"==typeof i){if(t.has(i))return"*** ALREADY DISPLAYED ***";t.add(i)}return i}),2)},t.syntaxHighlight=function(e){return(e=t.stringify(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="wb-syntax-'+t+'">'+e+"</span>"}))},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"syntaxHighlight"in t&&this.setSyntaxHighlight(!!t.syntaxHighlight),"monospace"in t&&this.setMonospace(!!t.monospace)},t}(o.UIComponent)},"./ui/TextInputButtonControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TextInputButtonControl:function(){return c}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./core/BuilderConfig.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(){return l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},c=function(e){function t(){var t=e.call(this)||this;return t.codeInput=(0,s.default)("<input>").addClass("form-control").on("change",(function(){t.value.code=t.codeInput.val(),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t.activateButton=(0,s.default)("<button>").addClass("btn btn-default").text("Activate").on("click",(function(){return t.checkCode(t.codeInput.val())})),t._elem.append((0,s.default)("<div>").addClass("input-group").append(t.codeInput).append((0,s.default)("<span>").addClass("input-group-btn").append(t.activateButton))),t}return a(t,e),t.prototype.encode=function(e){return e.split("").reverse().join("")},t.prototype.checkCode=function(e){var t=this;s.default.ajax({type:"POST",url:r.wbConfig.baseUrl+"getbutton/validate/?key="+this.encode(e),success:function(e,i,n){console.log(e),t.value.pro=!!e.valid,t.onValueChanged()},error:function(e){t.value.pro=!1,t.onValueChanged()}})},t.prototype.getValue=function(){return l({},this.value)},t.prototype.setValue=function(e){this.value=l({},e),this.codeInput.val(this.value.code)},t}(o.UIComponent)},"./ui/ThumbEditorControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ThumbEditorControl:function(){return c},ThumbSize:function(){return o}});var n,o,s=i("./UIComponent.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(e){e[e.Small=0]="Small",e[e.Normal=1]="Normal",e[e.Big=2]="Big"}(o||(o={}));var c=function(e){function t(){var t=e.call(this)||this;return t.size=o.Normal,t.controlsElem=null,t.msgElem=null,t.message="",t.previewValue="",t.hasEdit=!1,t.removeControl=null,t.removeControlVisible=!0,t.thumbElem=a()("<div>").addClass("thumbnail wb-ctrl-cont"),t.previewElem=a()("<div>").addClass("wb-ctrl-preview").appendTo(t.thumbElem),t._elem.addClass("wb-thumb-editor-control").append(t.thumbElem),t}return l(t,e),t.prototype.addControl=function(e,t){var i=this;return this.controlsElem||(this.controlsElem=a()("<div>").addClass("btn-group"+(this.size==o.Small?"":"-vertical")+" btn-group-sm wb-ctrl-ctrl").appendTo(this._elem)),a()("<button>").addClass("btn btn-default").attr({type:"button"}).append(a()("<span>").addClass(e)).on("click",(function(e){return t.call(i,e)})).appendTo(this.controlsElem)},t.prototype.setEnabled=function(e){var t,i;this._enabled=e,this._enabled?(this.thumbElem.removeClass("disabled"),null===(t=this.controlsElem)||void 0===t||t.find("button").removeAttr("disabled")):(this.thumbElem.addClass("disabled"),null===(i=this.controlsElem)||void 0===i||i.find("button").attr("disabled","disabled"))},t.prototype.onEdit=function(e){var t=this;return this.addControl("fa fa-pencil",e),this.hasEdit||(this.hasEdit=!0,this.thumbElem.on("click",(function(i){return e.call(t,i)}))),this},t.prototype.onRemove=function(e){return this.removeControl=this.addControl("fa fa-remove",e),this},t.prototype.setRemoveControlVisible=function(e){this.removeControl&&this.removeControlVisible!=e&&(this.removeControlVisible=e,e?this.removeControl.show():this.removeControl.hide())},t.prototype.setSize=function(e){this.size!=e&&(this.size=e,e==o.Big?this._elem.addClass("wb-ctrl-big"):this._elem.removeClass("wb-ctrl-big"),e==o.Small?this._elem.addClass("wb-ctrl-small"):this._elem.removeClass("wb-ctrl-small"),this.controlsElem&&(e==o.Small?this.controlsElem.addClass("btn-group").removeClass("btn-group-vertical"):this.controlsElem.addClass("btn-group-vertical").removeClass("btn-group")))},t.prototype.setMessage=function(e){return this.message==e||(this.message=e,e?(this.msgElem?this.msgElem.show():(this.msgElem=a()("<span>").addClass("wb-ctrl-msg"),this.thumbElem.prepend(this.msgElem)),this.msgElem.text(e)):this.msgElem&&(this.msgElem.hide(),this.msgElem.empty())),this},t.prototype.setPreview=function(e,t){return void 0===t&&(t=!1),this.previewValue==e||(this.previewValue=e,t?this.previewElem.html(e):this.previewElem.text(e)),this},t.prototype.getPreviewElem=function(){return this.previewElem},t}(s.UIComponent)},"./ui/ViewportSizeControls.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ViewportSizeControls:function(){return a}});var n=i("./Service.ts"),o=i("./BuilderEvent.ts"),s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=function(){function e(e){var t=this;this.body=e,this.siteElem=null,this.sizeInfo={},this.win=r()(window),this.bodyLeft=0,this.bodyRight=0,this.elem=r()("<div>").addClass("wb-viewport-size-ctrl"),this.elemRaw=this.elem[0];for(var i=n.Service.modeManager.getModes(),s=n.Service.modeManager.getMode(),a={tv:{icon:"desktop",cls:"wide"},desktop:{icon:"laptop",cls:"desktop"},tablet:{icon:"tablet",cls:"tablet"},phone:{icon:"mobile",cls:"mobile"}},l=function(e){var i="wb-viewport-"+(e in a?a[e].cls:e),o="fa fa-"+(e in a?a[e].icon:e),s=r()("<span>").addClass("wb-viewport-icon "+o),l={mode:e,fitsInViewport:!0,iconHidden:!1,iconElem:s,elem:r()("<div>").addClass(i).append(s).attr("title",n.Service.modeManager.getModeWidth(e)+"px").appendTo(c.elem),width:e==n.Service.modeManager.MODE_TV?0:n.Service.modeManager.getModeWidth(e)};l.elem.on("click",(function(e){return t.onChangeSize(e,l)})),c.sizeInfo[e]=l,c.lastSize||(c.lastSize=l)},c=this,u=0,d=i;u<d.length;u++)l(d[u]);this.modes=i.sort((function(e,t){return n.Service.modeManager.compareModes(e,t)})),this.leftBorder=r()("<div>").addClass("wb-viewport-border").appendTo(e).hide(),this.rightBorder=r()("<div>").addClass("wb-viewport-border").appendTo(e).hide(),e.append(this.elem),o.GlobalEvents.on("modes.changed",(function(e){e.mode in t.sizeInfo&&e.manual&&!e.isTriggered&&t.onChangeSize(null,t.sizeInfo[e.mode])})),s in this.sizeInfo&&this.onChangeSize(null,this.sizeInfo[s]),this.win.on("resize",(function(){return t.onResize()}));for(var h=0,p=[500,3e3,4e3,5e3];h<p.length;h++)setTimeout((function(){return t.onResize()}),p[h])}return e.prototype.setSiteElem=function(e){var t=this;this.siteElem=e,this.onChangeSize(null,this.lastSize),requestAnimationFrame((function(){t.siteElem&&t.siteElem.addClass("wb-viewport-block")}))},e.prototype.onResize=function(){var e=this.win.width(),t=this.body.outerWidth();if(0!=e&&0!=t){var i=this.body.offset().left,n=e-this.bodyLeft-t;this.bodyLeft==i&&this.bodyRight==n||(this.bodyLeft=i,this.bodyRight=n,this.elemRaw.style.left=this.bodyLeft+"px",this.elemRaw.style.right=this.bodyRight+"px");for(var o=null,s=0,r=this.modes;s<r.length;s++){var a=r[s],l=this.sizeInfo[a],c=l.width<t;c!=l.fitsInViewport&&(l.fitsInViewport=c,c?(l.elem.removeClass("wb-viewport-nofit"),l.width>0&&o===this.lastSize&&(this.leftBorder.show(),this.rightBorder.show())):(l.elem.addClass("wb-viewport-nofit"),l.width>0&&o===this.lastSize&&(this.leftBorder.hide(),this.rightBorder.hide())));var u=!!(o&&o.width>=t);u!=l.iconHidden&&(l.iconHidden=u,u?l.iconElem.hide():l.iconElem.show()),o=l}}},e.prototype.onChangeSize=function(e,t){var i=this;this.lastSize&&this.lastSize!==t&&this.lastSize.elem.removeClass("active"),this.lastSize=t,this.lastSize.elem.addClass("active");var o=t.width>0?{width:t.width}:{width:""};if(this.siteElem){this.siteElem.css(o);for(var s=0,a=this.siteElem[0].className.split(/\ +/);s<a.length;s++){var l=a[s];l.match(/^wb-viewport-mode-.+$/)&&this.siteElem.removeClass(l.trim())}this.siteElem.addClass("wb-viewport-mode-"+t.mode)}var c=Math.round(t.width/2);return t.width?(this.leftBorder.css({marginLeft:-c}),this.rightBorder.css({marginLeft:c-1}),t.fitsInViewport?(this.leftBorder.show(),this.rightBorder.show()):(this.leftBorder.hide(),this.rightBorder.hide()),setTimeout((function(){t.fitsInViewport?(i.leftBorder.show(),i.rightBorder.show()):(i.leftBorder.hide(),i.rightBorder.hide())}),100)):(this.leftBorder.hide(),this.rightBorder.hide()),n.Service.modeManager.onWindowResize(!0,t.width?t.width:r()(window).width(),!0),e&&e.stopPropagation(),!1},e.prototype.getControlClientRect=function(){return this.elem[0].getBoundingClientRect()},e.prototype.getElem=function(){return this.elem},e.prototype.getViewportClientRect=function(){return this.siteElem?this.siteElem[0].getBoundingClientRect():null},e}()},"./ui/YandexMapsPlacesControl.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{YandexMapsPlacesControl:function(){return l}});var n,o=i("./UIComponent.ts"),s=i("./jquery-builder.ts"),r=i("./ui/Popover.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e){function t(){var t=e.call(this)||this;return t.value={},t.configSuplier=null,t.mapAddress=(0,s.default)("<input>").addClass("form-control").attr({type:"text"}).on("change",(function(){t.value.text=t.mapAddress.val(),t.value.latLng=[0,0],"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t.markerBtn=(0,s.default)("<button>").addClass("btn btn-default").attr({type:"button"}).append((0,s.default)("<span>").addClass("fa fa-map-marker")).on("click",(function(){return t.editMarker()})),t.markerEditor=new c(t.markerBtn,(function(e){e&&(t.value.latLng=e,t.value.text="".concat(e[0],", ").concat(e[1])),"function"==typeof t.onChange&&t.onChange(),t.onValueChanged()})),t._elem.append((0,s.default)("<div>").addClass("input-group").append(t.mapAddress).append((0,s.default)("<span>").addClass("input-group-btn").append(t.markerBtn))),t.invalidate(),t}return a(t,e),t.prototype.buildInit=function(e,t){var i=this;if("function"==typeof e.change){var n=e.change;this.onChange=function(){return n.call(i,t)}}"function"==typeof e.configSuplier&&(this.configSuplier=e.configSuplier)},t.prototype.destroy=function(){this.markerEditor.isVisible()&&this.markerEditor.setVisible(!1),e.prototype.destroy.call(this)},t.prototype.editMarker=function(){if(this.markerEditor.isVisible())this.markerEditor.setVisible(!1);else{var e="function"==typeof this.configSuplier?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],e)}},t.prototype.setValue=function(e){this.value=s.default.extend(!0,{},e),this.value.text&&""!==this.value.text||!this.value.latLng||this.mapAddress.attr("placeholder","".concat(this.value.latLng[0],", ").concat(this.value.latLng[1])),this.mapAddress.val(this.value.text||"")},t.prototype.getValue=function(){return s.default.extend(!0,{},this.value)},t.supportsMultipleObjectBindings=function(){return!1},t.prototype.setComponentOptions=function(t){e.prototype.setComponentOptions.call(this,t),"function"==typeof t.configSuplier&&(this.configSuplier=t.configSuplier)},t}(o.UIComponent),c=function(e){function t(t,i){var n=e.call(this,t,__("Drag marker to set your location"),(0,s.default)("<div>").addClass("wb-ymaps-places-med").css({width:500,height:300}),"wb-ymaps-places-popover")||this;return n.onChange=i,n.value=[0,0],n.config=null,n}return a(t,e),t.prototype.edit=function(e,t){this.value=e,this.config=t,this.setVisible(!0)},t.prototype.setMarker=function(e,t){this.isInitialized()&&(t&&(this.map.setZoom(t.zoom),this.map.setType(t.mapTypeId)),this.map.setCenter(e),this.mapMarker.geometry.setCoordinates(e))},t.prototype.onInit=function(){var e=this;this.map=new ymaps.Map(this.getContent()[0],{center:this.value,zoom:0,controls:["searchControl","typeSelector","zoomControl"]}),this.mapMarker=new ymaps.Placemark(this.value,{},{draggable:!0}),this.mapMarker.events.add("dragend",(function(){if(e.mapMarker.geometry){var t=e.mapMarker.geometry.getCoordinates();t&&(e.value=t,e.onChange.call(e,e.value))}})),this.map.geoObjects.add(this.mapMarker)},t.prototype.onDom=function(){this.setMarker(this.value,this.config)},t}(r.Popover)},"./util/AreaTree.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{AreaTree:function(){return s}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.findIndexed=function(e,t,i,n){var o={};return this.search(e,t,e+i,t+n,o),o},t.prototype.find=function(e,t,i,n){var o=this.findIndexed(e,t,i,n),s=[];for(var r in o)o.hasOwnProperty(r)&&s.push(o[r]);return s},t}(function(){function e(e,t){void 0===t&&(t="y"),this.axis="y",this.median=0,this.leaves=null,this.areas=null,e?this.build(e,t):this.axis=t}return e.prototype.build=function(t,i,n){if(void 0===i&&(i="y"),void 0===n&&(n=!0),this.axis=i,this.median=0,this.leaves=null,this.areas=t.length<=e.MAX_AREAS_PER_NODE?t:null,!this.areas){var o=0;if("x"===i)for(var s=0,r=t;s<r.length;s++)(d=r[s]).width>0&&(this.median+=d.left+d.width/2,o++);else for(var a=0,l=t;a<l.length;a++)(d=l[a]).height>0&&(this.median+=d.top+d.height/2,o++);if(0==o)if(o=t.length,"x"===i)for(var c=0,u=t;c<u.length;c++){var d=u[c];this.median+=d.left}else for(var h=0,p=t;h<p.length;h++)d=p[h],this.median+=d.top;this.median=Math.round(this.median/o);var m=[],g=[];if("x"===i)for(var f=0,y=t;f<y.length;f++)((d=y[f]).left<this.median||0==d.width&&d.left==this.median)&&m.push(d),(d.left+d.width>this.median||0==d.width&&d.left==this.median)&&g.push(d);else for(var b=0,v=t;b<v.length;b++)((d=v[b]).top<this.median||0==d.height&&d.top==this.median)&&m.push(d),(d.top+d.height>this.median||0==d.height&&d.top==this.median)&&g.push(d);var _="x"!==i?"x":"y";m.length!==t.length&&g.length!==t.length?this.leaves={left:new e(m,_),right:new e(g,_)}:n?this.build(t,_,!1):this.areas=t}},e.prototype.search=function(e,t,i,n,o){if(this.areas)for(var s=0,r=this.areas;s<r.length;s++){var a=r[s];a.left<i&&a.top<n&&a.left+a.width>e&&a.top+a.height>t&&(o[a.id]=a)}else this.leaves&&("x"===this.axis?(e<this.median&&this.leaves.left.search(e,t,i,n,o),i>this.median&&this.leaves.right.search(e,t,i,n,o)):(t<this.median&&this.leaves.left.search(e,t,i,n,o),n>this.median&&this.leaves.right.search(e,t,i,n,o)))},e.MAX_AREAS_PER_NODE=18,e}())},"./util/BlockPacker.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{BlockPacker:function(){return n}});var n=function(){function e(e,t,i){void 0===e&&(e=870),void 0===t&&(t=null),void 0===i&&(i=0),this.minPackingWidth=1,this.minPackingHeight=1,this.blocks=[],this.packingSpacing=i,this.maxWidth=e,this.maxHeight=t}return e.prototype.clear=function(){this.blocks=[]},e.prototype.addBlock=function(e,t,i){var n={widthFunc:t,heightFunc:i,width:"number"==typeof t?t:0,height:"number"==typeof i?i:0,data:e};return this.blocks.push(n),n},e.prototype.defaultSortFunc=function(e,t){return e.height==t.height?e.width==t.width?0:e.width>t.width?-1:1:e.height>t.height?-1:1},e.prototype.pack=function(e){if(0===this.blocks.length)return this.blocks;"function"!=typeof e&&(e=this.defaultSortFunc);for(var t,i=null,n=null,o=0,s=this.blocks;o<s.length;o++)"function"==typeof(l=s[o]).widthFunc&&(l.width=l.widthFunc()),"function"==typeof l.heightFunc&&(l.height=l.heightFunc()),(null===i||i>l.width)&&(i=l.width),(null===n||n>l.height)&&(n=l.height);this.minPackingWidth=Math.max(1,i||1),this.minPackingHeight=Math.max(1,n||1),this.blocks.sort(e),this.packingRoot={left:0,top:0,width:this.maxWidth,height:this.maxHeight,used:!1,right:null,down:null,splitDir:!1};for(var r=0,a=this.blocks;r<a.length;r++){var l=a[r];(t=this.findPackingNode(this.packingRoot,l.width,l.height))&&(this.splitPackingNode(t,l.width,l.height),l.left=t.left,l.top=t.top)}return this.blocks},e.prototype.findPackingNode=function(e,t,i){if(e){if(e.used)return e.splitDir?this.findPackingNode(e.down,t,i)||this.findPackingNode(e.right,t,i):this.findPackingNode(e.right,t,i)||this.findPackingNode(e.down,t,i);if(t<=e.width&&(null===e.height||i<=e.height))return e}return null},e.prototype.splitPackingNode=function(e,t,i){return e.used=!0,e.splitDir?(e.down=null!==e.height&&e.height-i-this.packingSpacing<this.minPackingHeight||t<=0?null:{left:e.left,top:e.top+i+this.packingSpacing,width:t,height:null===e.height?null:e.height-i-this.packingSpacing,used:!1,right:null,down:null,splitDir:!1},e.right=e.width-t-this.packingSpacing<this.minPackingWidth?null:{left:e.left+t+this.packingSpacing,top:e.top,width:e.width-t-this.packingSpacing,height:e.height,used:!1,right:null,down:null,splitDir:!0}):(e.down=null!==e.height&&e.height-i-this.packingSpacing<this.minPackingHeight?null:{left:e.left,top:e.top+i+this.packingSpacing,width:e.width,height:null===e.height?null:e.height-i-this.packingSpacing,used:!1,right:null,down:null,splitDir:!1},e.right=e.width-t-this.packingSpacing<this.minPackingWidth||i<=0?null:{left:e.left+t+this.packingSpacing,top:e.top,width:e.width-t-this.packingSpacing,height:i,used:!1,right:null,down:null,splitDir:!0}),e},e}()},"./util/ChangeUpdateUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ChangeUpdateState:function(){return n},waitForChangeEndToUpdate:function(){return o}});var n=function(e,t,i){void 0===i&&(i=800),this.func=e,this.elem=t,this.timeout=i};function o(e){e.timerId&&clearTimeout(e.timerId),e.timerId=setTimeout((function(){return e.func(e.elem)}),e.timeout)}},"./util/ClipboardUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{getElementDataFromClipboard:function(){return v},getFromClipboard:function(){return C},handleCopyEvent:function(){return p},init:function(){return w},storeElementDataToClipboard:function(){return b},storeToClipboard:function(){return _}});var n=i("./element/PasteUtil.ts"),o=i("./Service.ts"),s=i("./core/BuilderConfig.ts"),r=i("./lib/jquery-1.11.3.min.js"),a=i.n(r),l=i("./Picture.ts"),c=i("./WB_TextArea.class.js"),u=i.n(c),d=null,h=null;function p(e){if(e&&e.target){var t=e.target,i=t.tagName?t.tagName.toLowerCase():null;if(!("body"!=i&&"div"!=i||"true"==t.contentEditable||a()(t).hasClass("wb-properties-over"))){var n=[],s=o.Service.element.getSelected();for(var r in s){var l=s[r];l&&n.push(l.serialize())}0!=n.length&&wb_builder.setClipboard(n)}}}function m(e){var t=y(e);t?f(t):(e=e.split("\n").map((function(e){return'<p class="wb-stl-normal">'+e+"</p>"})).join("<br>"),f([new(u())({content:{text:e}}).serialize()]))}function g(e){var t=a()('<input type="file" name="file" multiple="multiple" />'),i=t.fileupload({fileInput:t,url:s.wbConfig.getUrl("upload"),dataType:"json",sequentialUploads:!0,autoUpload:!0,disableImagePreview:!0,disableImageResize:!1,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!0,loadImageMaxFileSize:5e7,maxFileSize:wb_builder.maxUploadFileSize});i.on("fileuploaddone",(function(e,t){var i=t.result;if("object"==typeof i)if("error"in i)i.error.verifySession&&wb_builder.verifySession?wb_builder.verifySession((function(e,t){e&&t&&alert(__("Upload error"))})):alert(__("Upload error"));else{var n=new l.Picture({content:{src:wb_builder.userGalleryUrl+i.result}});n.setSize("auto","auto"),f([n.serialize()])}})),i.fileupload("send",{files:[e]})}function f(e){var t=o.Service.element.getSelected();for(var i in t){var s=t[i],r=void 0,a=void 0;if("LayoutElement"===s.getClassType()?r=s:(r=s.getParent(),a=s),r){(0,n.pasteElements)({pageX:0,pageY:0},r,a,e);break}}}function y(e){if(e&&"string"==typeof e)try{var t=JSON.parse(e);if(t instanceof Array){for(var i=!0,n=0,o=t;n<o.length;n++){var s=o[n];if("object"!=typeof s||!s||!s.hasOwnProperty("class")||"string"!=typeof s.class||!s.class){i=!1;break}}if(i)return t}}catch(e){return null}return null}function b(e){_(JSON.stringify(e))}function v(){var e=a().Deferred();return C().then((function(t){var i=y(t);if(i&&e.resolve(i),t){var n=t.split("\n").map((function(e){return'<p class="wb-stl-normal">'+t+"</p>"})).join("<br>"),o=new(u())({content:{text:n}});e.resolve([o.serialize()])}e.resolve(null)})),e.promise()}function _(e){h=e,navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e):d&&(d.style.display="block",d.value=e,d.focus(),"function"==typeof d.setSelectionRange?d.setSelectionRange(0,d.value.length):d.select(),document.execCommand("copy"),d.blur(),d.style.display="none")}function C(){var e=a().Deferred();if(navigator.clipboard&&navigator.clipboard.readText)navigator.clipboard.readText().then((function(t){return e.resolve(t)}));else{var t=null;d&&(d.style.display="block",d.value="",d.focus(),document.execCommand("paste"),t=d.value,d.blur(),d.style.display="none"),t&&t.length?e.resolve(t):h&&h.length?e.resolve(h):e.reject(t)}return e.promise()}function w(e){d||((d=e.createElement("textarea")).style.position="fixed",d.style.width="20px",d.style.height="20px",d.style.overflow="hidden",d.style.border="none",d.style.opacity="0.1",d.style.display="none",d.inputMode="none",e.body.appendChild(d),e.addEventListener("paste",(function(e){if(e&&e.clipboardData&&e.target){var t=e.target,i=t.tagName?t.tagName.toLowerCase():null;if(!("body"!=i&&"div"!=i||"true"==t.contentEditable||a()(t).hasClass("wb-properties-over"))){for(var n=e.clipboardData.items,s=o.Service.mediaLibrary.getModes(),r=s.image?s.image.extensions.split(","):null,l=r?new RegExp("(\\.|\\/)("+r.join("|")+")$"):null,c=!1,u=0,d=n.length;u<d;u++){var h=n[u];if(l&&l.test(h.type)){var p=h.getAsFile();p&&(g(p),c=!0)}}if(!c)for(u=0,d=n.length;u<d;u++)"text/plain"==(h=n[u]).type&&h.getAsString((function(e){return m(e)}))}}})))}},"./util/ComparisonUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ComparisonUtil:function(){return n}});var n=function(){function e(){}return e.checkEqualsRecursive=function(e,t){if(e===t)return!0;var i=null===e?"null":typeof e,n=null===t?"null":typeof t;if("object"!==i||"object"!==n)return!1;if("object"===i&&Array.isArray(e)&&(i="array"),"object"===n&&Array.isArray(t)&&(n="array"),i!==n)return!1;if("array"===i){if(e.length!==t.length)return!1;for(var o=e.length-1;o>=0;o--)if(!this.checkEqualsRecursive(e[o],t[o]))return!1}else{var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(o=s.length-1;o>=0;o--)if(s[o]!==r[o]||!this.checkEqualsRecursive(e[s[o]],t[r[o]]))return!1}return!0},e}()},"./util/DataUtil.ts":function(e,t,i){"use strict";function n(e){return!(null==e)}function o(e){for(var t={},i=[],n=0,o=e.length;n<o;++n)t.hasOwnProperty(e[n])||(i.push(e[n]),t[e[n]]=1);return i}i.r(t),i.d(t,{arrayUnique:function(){return o},isSet:function(){return n}})},"./util/DropZoneCalculator.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{DropZoneAreaType:function(){return n},DropZoneCalculator:function(){return c},DropZoneOrientation:function(){return o}});var n,o,s=i("./CommonTypes.ts"),r=i("./util/AreaTree.ts"),a=i("./util/ElementUtil.ts"),l=i("./util/HistoryUtil.ts");!function(e){e[e.Ignore=0]="Ignore",e[e.Before=1]="Before",e[e.After=2]="After",e[e.Between=3]="Between",e[e.IntoResponsive=4]="IntoResponsive",e[e.IntoAbsolute=5]="IntoAbsolute",e[e.WrapBefore=6]="WrapBefore",e[e.WrapAfter=7]="WrapAfter"}(n||(n={})),function(e){e[e.None=0]="None",e[e.Horiziontal=1]="Horiziontal",e[e.Vertical=2]="Vertical"}(o||(o={}));var c=function(){function e(e,t,i,n){this.skipElement=t,this.absoluteHelperPosition=i,this.absoluteHelperSize=n,this.areas=[],this.stickyAreas=[],this.createAreas(e,0,!1),this.tree=new r.AreaTree(this.areas),this.stickyTree=new r.AreaTree(this.stickyAreas)}return e.prototype.createAreas=function(t,i,r){for(var a=0,l=t;a<l.length;a++){var c=l[a];if(!c.hiddenResp&&!c.hidden){var u=c!==this.skipElement&&"LayoutElement"===c.getClassType(),d=u&&c.isSticky,h=r||d,p=u?c.getChildren():null,m=c.getParent(),g=c.getBoundingRect(!h),f=Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random()),y=void 0,b=u&&c.getChildrenLayout()===s.ChildrenLayoutType.Absolute?n.IntoAbsolute:n.IntoResponsive,v=c.getLayoutConstraints()===s.ChildrenLayoutType.Horizontal?o.Horiziontal:o.Vertical,_=d?100*(1+c.zIndex):i;if(c===this.skipElement)b=n.Ignore,y=c.getLayoutConstraints()==s.ChildrenLayoutType.Absolute?0:1,v=o.None;else if(c.getLayoutConstraints()==s.ChildrenLayoutType.Absolute){if(y=1,v=o.None,!u)continue}else y=!m||d?1:u?3:4;for(var C=[],w=y;w>0;w--){var T={id:c.id+":"+w,left:g.left,top:g.top,width:g.width,height:g.height,type:b,orientation:v,level:_,sticky:h,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:c,targetA:c,targetB:c,debugData:{color:f}};C.push(T)}if(y>1&&(c.getLayoutConstraints()==s.ChildrenLayoutType.Horizontal?this.adjustElementAreas(C,"left","width"):this.adjustElementAreas(C,"top","height"),m)){var E=m.getChildIndex(c),I=m.getChildAt(E-1);!I||I.hiddenResp||I.hidden||(C[0].targetA=I,C[0].type=I===this.skipElement?n.Ignore:n.Between),!(I=m.getChildAt(E+1))||I.hiddenResp||I.hidden||(C[y-1].targetB=I,C[y-1].type=I===this.skipElement?n.Ignore:n.Between)}for(w=y-1;w>=0;w--)if((T=C[w]).type===n.IntoResponsive&&p&&p.length){C.splice(w,1),this.subdivideContainerIntoAreas(C,c,p,g,_,h);break}for(var x=0,S=C;x<S.length;x++){if((T=S[x]).type===n.WrapBefore?T.orientation==o.Horiziontal?this.calcAreaHelperPositionBefore(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionBefore(T,"top","bottom","height","left","right","width"):T.type===n.WrapAfter&&(T.orientation==o.Horiziontal?this.calcAreaHelperPositionAfter(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionAfter(T,"top","bottom","height","left","right","width")),T.type===n.Before?T.orientation==o.Horiziontal?this.calcAreaHelperPositionBefore(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionBefore(T,"top","bottom","height","left","right","width"):T.type===n.After?T.orientation==o.Horiziontal?this.calcAreaHelperPositionAfter(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionAfter(T,"top","bottom","height","left","right","width"):T.type===n.Between?T.orientation==o.Horiziontal?this.calcAreaHelperPositionBetween(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionBetween(T,"top","bottom","height","left","right","width"):T.type===n.IntoResponsive?T.orientation==o.Horiziontal?this.calcAreaHelperPositionInto(T,"left","right","width","top","bottom","height"):this.calcAreaHelperPositionInto(T,"top","bottom","height","left","right","width"):T.type===n.IntoAbsolute&&(T.helperPosition=this.absoluteHelperPosition,T.helperSize=this.absoluteHelperSize),T.type!==n.IntoAbsolute){if(T.helperSize.width<e.helperSize){var k=e.helperSize-T.helperSize.width;T.helperSize.width=e.helperSize,T.helperPosition.left-=k/2}T.helperSize.height<e.helperSize&&(k=e.helperSize-T.helperSize.height,T.helperSize.height=e.helperSize,T.helperPosition.top-=k/2)}(h?this.stickyAreas:this.areas).push(T)}p&&this.createAreas(p,_+1,h)}}},e.prototype.calcAreaHelperPositionBefore=function(t,i,n,o,s,r,a){var l=t.element.getBoundingRect(!t.sticky),c=l[s],u=l[r],d=this.pxStringToNumber(t.element.elem.css("margin-"+i));t.helperPosition[i]=Math.round(l[i]-d-e.helperSize/2),t.helperPosition[s]=c,t.helperSize[o]=e.helperSize,t.helperSize[a]=u-c},e.prototype.calcAreaHelperPositionAfter=function(t,i,n,o,s,r,a){var l=t.element.getBoundingRect(!t.sticky),c=l[s],u=l[r],d=this.pxStringToNumber(t.element.elem.css("margin-"+n));t.helperPosition[i]=Math.round(l[n]+d-e.helperSize/2),t.helperPosition[s]=c,t.helperSize[o]=e.helperSize,t.helperSize[a]=u-c},e.prototype.calcAreaHelperPositionBetween=function(t,i,n,o,s,r,a){var l=t.targetA.getBoundingRect(!t.sticky),c=t.targetB.getBoundingRect(!t.sticky);if(l[n]>c[i])t.element===t.targetA?this.calcAreaHelperPositionAfter(t,i,n,o,s,r,a):this.calcAreaHelperPositionBefore(t,i,n,o,s,r,a);else{var u=Math.min(l[s],c[s]),d=Math.max(l[r],c[r]),h=this.pxStringToNumber(t.targetA.elem.css("margin-"+n)),p=this.pxStringToNumber(t.targetB.elem.css("margin-"+i)),m=l[n]+h,g=c[i]-p;t.helperPosition[i]=Math.round((m+g)/2-e.helperSize/2),t.helperPosition[s]=u,t.helperSize[o]=e.helperSize,t.helperSize[a]=d-u}},e.prototype.calcAreaHelperPositionInto=function(e,t,i,n,o,s,r){var a=e.element.getContentRect(!e.sticky);e.helperPosition.left=a.left,e.helperPosition.top=a.top,e.helperSize.width=a.width,e.helperSize.height=a.height},e.prototype.adjustElementAreas=function(e,t,i){if(e[0].type=n.Before,3===e.length){var s=Math.floor(e[0][i]/10),r=e[0][i]<30?Math.floor(e[0][i]/3):10,a=e[1].type===n.IntoAbsolute?10:s;e[2][i]=e[0][i]=Math.min(Math.max(s,r),a),e[1][i]-=e[0][i]+e[2][i],e[1][t]+=e[0][i],e[2][t]=e[1][t]+e[1][i],e[2].type=n.After}else if(4===e.length){var l="width"===i?"height":"width",c="left"===t?"top":"left",u=void 0,d=void 0,h=e[1].element.getParent();if(h){var p=e[1].element.elem.position()[c],m=("height"===l?h.getHeightInPixels():h.getWidthInPixels())-e[1][l];u=Math.floor(.8*p),d=Math.floor(.8*(m-p))}else u=d=Math.floor(e[1][l]/3);e[0][i]=Math.floor(e[0][i]/2),e[1].type=n.WrapBefore,e[1].orientation=e[1].orientation===o.Horiziontal?o.Vertical:o.Horiziontal,e[1][c]-=u,e[1][l]=Math.floor(e[1][l]/4)+u,e[2].type=n.WrapAfter,e[2].orientation=e[2].orientation===o.Horiziontal?o.Vertical:o.Horiziontal,e[2][c]+=e[2][l]-Math.floor(e[2][l]/4),e[2][l]=Math.floor(e[2][l]/4)+d,e[3][i]-=e[0][i],e[3][t]+=e[0][i],e[3].type=n.After}},e.prototype.subdivideContainerIntoAreas=function(e,t,i,r,a,l){if(i.length){var c,u,d,h,p,m,g,f,y,b,v,_=t.getWrap()===s.FlexWrap.WrapReverse;t.isChildrenLayoutHorizontalNow()?(v=o.Horiziontal,c="left",u="right",d="top",h="bottom",y=!1,b=_):(v=o.Vertical,c="top",u="bottom",d="left",h="right",y=_,b=!1);for(var C=[],w=null,T=0,E=i;T<E.length;T++){var I=E[T];if("LayoutElement"!==I.getClassType()||!I.isSticky){var x=I.getBoundingRect(!l);p=x[c],m=x[u],g=x[d],f=x[h],w&&!(y?w.mainMin<m:w.mainMax>p)||(w&&(w.mainMin=r[c],w.mainMax=r[u],C.length||(b?w.crossMax=r[h]:w.crossMin=r[d]),C.push(w)),w={elements:[],bounds:[],mainMin:p,mainMax:m,crossMin:g,crossMax:f}),w.elements.push(I),w.bounds.push(x),w.mainMin=Math.min(w.mainMin,p),w.mainMax=Math.max(w.mainMax,m),w.crossMin=Math.min(w.crossMin,g),w.crossMax=Math.max(w.crossMax,f)}}w&&(w.mainMin=r[c],w.mainMax=r[u],C.length||(b?w.crossMax=r[h]:w.crossMin=r[d]),b?w.crossMin=r[d]:w.crossMax=r[h],C.push(w));for(var S,k,D,O,R,P,L,A,M,B,N,F=null,K=0;K<C.length;K++){w=C[K],S=K==C.length-1?null:C[K+1],b?(g=S?(S.crossMax+w.crossMin)/2:w.crossMin,f=F?(F.crossMin+w.crossMax)/2:w.crossMax):(g=F?(F.crossMax+w.crossMin)/2:w.crossMin,f=S?(S.crossMin+w.crossMax)/2:w.crossMax);for(var V=0;V<w.elements.length;V++)O=w.elements[V],R=w.bounds[V],k=0==V,D=V==w.elements.length-1,L=k?F?F.elements[F.elements.length-1]:null:w.elements[V-1],P=D?S?S.elements[0]:null:w.elements[V+1],L&&(L.hiddenResp||L.hidden)&&(L=null),P&&(P.hiddenResp||P.hidden)&&(P=null),y?(p=D?w.mainMin:(w.bounds[V+1][u]+R[c])/2,m=k?w.mainMax:(w.bounds[V-1][c]+R[u])/2,A=P,M=L):(p=k?w.mainMin:(w.bounds[V-1][u]+R[c])/2,m=D?w.mainMax:(w.bounds[V+1][c]+R[u])/2,A=L,M=P),B=(R[c]+R[u])/2,N=O===this.skipElement||A&&A===this.skipElement?n.Ignore:A?n.Between:y?n.After:n.Before,e.push({id:O.id+":left",left:"left"===c?p:g,top:"top"===c?p:g,width:"left"===c?B-p:f-g,height:"top"===c?B-p:f-g,type:N,orientation:v,level:a,sticky:l,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:O,targetA:A&&!y?A:O,targetB:A&&y?A:O,debugData:{color:Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())}}),N=O===this.skipElement||M&&M===this.skipElement?n.Ignore:M?n.Between:y?n.Before:n.After,e.push({id:O.id+":right",left:"left"===c?B:g,top:"top"===c?B:g,width:"left"===c?m-B:f-g,height:"top"===c?m-B:f-g,type:N,orientation:v,level:a,sticky:l,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:O,targetA:M&&y?M:O,targetB:M&&!y?M:O,debugData:{color:Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())}});F=w}}},e.prototype.pxStringToNumber=function(e){return/px$/.test(e)?parseFloat(e):0},e.prototype.findAllAreasAt=function(e,t,i,n){return this.tree.find(e,t,1,1).concat(this.stickyTree.find(e-i,t-n,1,1))},e.prototype.findAreaAt=function(e,t,i,n){for(var o=null,s=0,r=this.findAllAreasAt(e,t,i,n);s<r.length;s++){var a=r[s];(!o||o.level<a.level)&&(o=a)}return o},e.prototype.dropElementsAt=function(e,t,i,o,r,c,u){void 0===c&&(c=!1),void 0===u&&(u=!1),wb_builder.historyBeginGroup(),e[0]&&e[0].index&&(0,l.createMoveElementsHistoryRecord)(e);var d=this.findAreaAt(t,i,o,r);if(!d||d.type===n.Ignore)return!1;var h=null;switch(d.type){case n.WrapBefore:case n.WrapAfter:case n.Before:case n.After:case n.Between:h=d.targetA.getParent();break;case n.IntoResponsive:case n.IntoAbsolute:h=d.targetA}if(!h)return!1;var p=function(e){if(d&&h){for(var o=null==h?void 0:h.getBoundingRect(!0),r=function(e){switch(d.type){case n.WrapBefore:var r=h.getChildrenLayout()===s.ChildrenLayoutType.Horizontal?s.ChildrenLayoutType.Vertical:s.ChildrenLayoutType.Horizontal;(0,a.wrapElements)([],r).done((function(t){var i;if(t&&h&&d&&(h.addChild(t,!1,!1,d.targetA,!1),t.addChild(d.targetA),t.addChild(e,!1,!1,d.targetA,!1),(0,l.wrapElementHistoryRecord)(t),1===h.getChildren().length)){var n=h.getSize();t.setSize(n.width,n.height),null===(i=h.getParent())||void 0===i||i.addChild(t,!1,!1,h,!1),h.remove({noHistory:!0}),(0,l.changeLayoutTypeHistoryRecord)(t,h)}})).fail((function(){}));break;case n.WrapAfter:var u=h.getChildrenLayout()===s.ChildrenLayoutType.Horizontal?s.ChildrenLayoutType.Vertical:s.ChildrenLayoutType.Horizontal;(0,a.wrapElements)([],u).done((function(t){var i;if(t&&h&&d&&(h.addChild(t,!1,!1,d.targetA,!0),t.addChild(d.targetA),t.addChild(e,!1,!1,d.targetA,!0),(0,l.wrapElementHistoryRecord)(t),1===h.getChildren().length)){var n=h.getSize();t.setSize(n.width,n.height),null===(i=h.getParent())||void 0===i||i.addChild(t,!1,!1,h,!1),h.remove({noHistory:!0}),(0,l.changeLayoutTypeHistoryRecord)(t,h)}})).fail((function(){}));break;case n.Before:h.addChild(e,!1,!1,d.targetA,!1);break;case n.After:h.addChild(e,!1,!1,d.targetA,!0),d.targetA=e;break;case n.Between:h.addChild(e,!1,!1,d.targetB,!1);break;case n.IntoResponsive:h.addChild(e);break;case n.IntoAbsolute:if(h.addChild(e),c){var p=e.getSizeInPixels();e.setLocation(t-o.left-Math.round(p.width/2),i-o.top-Math.round(p.height/2))}else e.setLocation(t-o.left+d.helperPosition.left,i-o.top+d.helperPosition.top),d.helperSize.width&&d.helperSize.height&&e.setSize(d.helperSize.width,d.helperSize.height)}e.onResize(),e.updateStyle()},u=0,p=e;u<p.length;u++)r(p[u]);h.updateStyle(),h.updateSize(),wb_builder.historyEndGroup()}};return u?(0,a.tryWrapElements)(e,h).done((function(e){e&&p([e])})).fail((function(){return p(e)})):p(e),!0},e.helperSize=4,e.debugDone=!1,e}()},"./util/ElementUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{tryWrapElements:function(){return a},wrapElements:function(){return l}});var n=i("./jquery-builder.ts"),o=i("./Service.ts"),s=i("./CommonTypes.ts"),r=i("./ElementRegister.ts");function a(e,t){for(var i=!t.getParent(),o=t.getChildren().length,s=!1,r=0,a=e;r<a.length;r++)if("LayoutElement"!=a[r].getClassType()){s=!0;break}return i&&s&&1===o?l(e):n.default.Deferred().reject().promise()}function l(e,t){void 0===t&&(t=s.ChildrenLayoutType.Horizontal);var i=n.default.Deferred();return r.ElementRegister.createElement("LayoutElement",{width:"100%",useMaxWidth:!1,useMinWidth:!1,useMaxHeight:!1,useMinHeight:!1,content:{layout:{type:t,wrapRes:o.Service.modeManager.MODE_PHONE,wrap:s.FlexWrap.Wrap,hAlign:s.FlexAlignItems.Center,vAlign:s.FlexAlignItems.Center,hSpacing:s.FlexAlignContent.Center,vSpacing:s.FlexAlignContent.Center}}},!1,!1,(function(t){for(var n=0,o=e;n<o.length;n++){var s=o[n];t.addChild(s)}i.resolve(t)}),(function(){return i.reject()})),i.promise()}},"./util/EventUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{clientPosFromEvent:function(){return r},moveEventDiff:function(){return l},posFromEvent:function(){return s},triggerEvent:function(){return a}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);function s(e){var t=e.pageX,i=e.pageY,n=e.originalEvent;if(n&&n.changedTouches&&n.changedTouches.length>0){var o=n.changedTouches[0];t=o.pageX,i=o.pageY}return{left:t,top:i}}function r(e){var t=e.clientX,i=e.clientY,n=e.originalEvent;if(n&&n.changedTouches&&n.changedTouches.length>0){var o=n.changedTouches[0];t=o.clientX,i=o.clientY}return{left:t,top:i}}function a(e,t,i){var n,a,l=o().Event(t);n=s(i),l.pageX=n.left,l.pageY=n.top,a=r(i),l.clientX=a.left,l.clientY=a.top,e.trigger(l)}function l(e,t){var i=s(t),n=s(e),o=i.left-n.left,r=i.top-n.top;return Math.sqrt(o*o+r*r)}},"./util/ExtendedResizable.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{ExtendedResizable:function(){return h},ExtendedResizableParams:function(){return u},HDirection:function(){return n},VDirection:function(){return o},buildResizeHandleElem:function(){return p},resizeHandleTypes:function(){return l}});var n,o,s=i("./lib/jquery-1.11.3.min.js"),r=i.n(s),a=function(e,t,i){if(i||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.Left=-1]="Left",e[e.None=0]="None",e[e.Right=1]="Right"}(n||(n={})),function(e){e[e.Up=-1]="Up",e[e.None=0]="None",e[e.Down=1]="Down"}(o||(o={}));var l=["nw","n","ne","w","e","sw","s","se"];function c(e){var t=e.pageX,i=e.pageY,n=e.originalEvent;if(n.changedTouches&&n.changedTouches.length>0){var o=n.changedTouches[0];t=o.pageX,i=o.pageY}return{x:t,y:i}}var u=function(){function e(e,t,i){this.data=null,this.element=e,this.disableElementSizeUpdates=!1,this.axis=i.id,this.hDirection=i.hDirection,this.vDirection=i.vDirection;var n=c(t);this.initialPointerPosition={left:n.x,top:n.y},this.pointerPosition={left:n.x,top:n.y},this.delta={left:0,top:0},this.minSize={width:0,height:0},this.maxSize={width:null,height:null};var o,s={width:this.element[0].style.width,height:this.element[0].style.height},a=/^(-?[0-9.]+)px$/;"number"!=typeof s.width&&(null!==(o=s.width.match(a))?s.width=parseFloat(o[1]):s.width&&""!==s.width||(s.width="auto")),"number"!=typeof s.height&&(null!==(o=s.height.match(a))?s.height=parseFloat(o[1]):s.height&&""!==s.height||(s.height="auto"));var l={width:this.element.outerWidth(!1),height:this.element.outerHeight(!1)},u=this.element.position(),d=this.getElementContentSize(this.element.parent());this.originalParentContentSize=d,this.parentContentSize=r().extend({},d),this.originalPosition=u,this.position=r().extend({},u),this.originalDynamicSize=s,this.dynamicSize=r().extend({},s),this.originalSize=l,this.size=r().extend({},l),this.clearCache()}return e.prototype.getElementContentSize=function(e){var t=getComputedStyle(e[0]);return{width:e.innerWidth()-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),height:e.innerHeight()-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)}},e.prototype.clearCache=function(){this.sizeCache={width:{},height:{}},this.inverseSizeCache={width:{},height:{}}},e}(),d=!1,h=function(){function e(t,i){this.element=t,this.handles={},this.extHandles=!1,this.currentResizeParams=null,this.options=r().extend({},e.defaultOptions,i),this.extHandles=!!this.options.extHandles,r()(t).addClass("wb-ext-resizable").data("resizableExt",this),this.update()}return e.isResizing=function(){return d},e.prototype.update=function(){this.updateInsetHandles(),this.updateHandles()},e.prototype.updateInsetHandles=function(){this.options.insetHandles?this.element.addClass("wb-ext-resizable-inset"):this.element.removeClass("wb-ext-resizable-inset")},e.prototype.updateHandles=function(){var t=this.options.handles;t?!0===t&&(t="nw,n,ne,w,e,sw,s,se"):t="";for(var i=Object.keys(this.handles),n=0,o=t.split(",");n<o.length;n++)if(""!==(l=(l=o[n]).trim()))if(e.handleOptions.hasOwnProperty(l)){var s=i.indexOf(l);s>=0&&i.splice(s,1),this.handles.hasOwnProperty(l)||(this.handles[l]=new m(this,l,this.extHandles,e.handleOptions[l]))}else console.error("Unknown handle: "+l);for(var r=0,a=i;r<a.length;r++){var l=a[r];this.handles[l].destroy(),delete this.handles[l]}},e.prototype.attachHandles=function(e){for(var t in e)t in this.handles&&this.handles[t].attach(e[t])},e.prototype.detachHandles=function(){for(var e in this.handles)this.handles[e].detach()},e.prototype.destroy=function(){for(var e in this.handles)this.handles[e].destroy(),delete this.handles[e];this.element.removeClass("wb-ext-resizable wb-ext-resizable-inset").data("resizableExt",null)},e.prototype.disable=function(){this.element.addClass("wb-ext-resizable-disabled")},e.prototype.enable=function(){this.element.removeClass("wb-ext-resizable-disabled")},e.prototype.processCommands=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if("option"===t){if(i.length<1||"string"!=typeof i[0])return void console.error("Invalid arguments");var o=i[0];if("disabled"===o){if(i.length<2)return this.element.is(".wb-ext-resizable-disabled");i[1]?this.disable():this.enable()}else if(e.expectOptionTypes.hasOwnProperty(o)){if(i.length<2)return this.options.hasOwnProperty(o)?this.options[o]:e.defaultOptions[o];if(e.expectOptionTypes[o].indexOf(typeof i[1])<0)return void console.error("Invalid '"+o+"' option value type ("+typeof i[1]+"). Allowed types: "+e.expectOptionTypes[o].join(", "));this.options[o]=i[1],this.update()}else console.error.apply(console,a(["Unknown extended resizable option",o],i,!1))}else if("destroy"===t)this.destroy();else if("disable"===t)this.disable();else if("enable"===t)this.enable();else{if("instance"===t)return this;console.error.apply(console,a(["Unknown extended resizable command",t],i,!1))}},e.prototype.OnHandleStart=function(e,t){this.currentResizeParams||(this.currentResizeParams=new u(this.element,e,t),d=!0,this.handleEvent("resizestart",e,"start","afterStart"),r()(document.body).addClass("wb-ext-resizable-resizing-"+this.currentResizeParams.axis))},e.prototype.OnHandleResize=function(e,t){this.currentResizeParams&&this.handleEvent("resize",e,"resize","afterResize")},e.prototype.OnHandleStop=function(e,t){this.currentResizeParams&&(this.handleEvent("resizestop",e,"stop","afterStop"),r()(document.body).removeClass("wb-ext-resizable-resizing-"+this.currentResizeParams.axis),this.currentResizeParams=null,d=!1)},e.prototype.handleEvent=function(e,t,i,n){if(this.currentResizeParams){var o=r().Event(e,{shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,which:t.which,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,view:t.view,originalEvent:t.originalEvent,target:t.target,relatedTarget:t.relatedTarget,currentTarget:t.currentTarget,fromElement:t.fromElement,toElement:t.toElement}),s=this.options;this.updateResizeParams(o),"function"==typeof s[i]&&s[i].call(this.element[0],o,this.currentResizeParams),o.isDefaultPrevented()||(this.updateElementSize(),"function"==typeof s[n]&&s[n].call(this.element[0],o,this.currentResizeParams))}},e.prototype.updateResizeParams=function(e){var t,i,n;if(this.currentResizeParams){var o=this.currentResizeParams;o.position=o.element.position(),t=c(e),o.pointerPosition.left=t.x,o.pointerPosition.top=t.y,i=this.getElementMinMaxSize(o.element,"width",this.options.minWidth,this.options.maxWidth),o.minSize.width=i[0],o.maxSize.width=i[1],n=this.getElementMinMaxSize(o.element,"height",this.options.minHeight,this.options.maxHeight),o.minSize.height=n[0],o.maxSize.height=n[1],o.hDirection&&(o.delta.left=o.hDirection*(o.pointerPosition.left-o.initialPointerPosition.left),o.size.width=o.originalSize.width+o.delta.left,o.size.width<0&&(o.size.width=0),o.hDirection<0&&(o.position.left=o.originalPosition.left-o.delta.left)),o.vDirection&&(o.delta.top=o.vDirection*(o.pointerPosition.top-o.initialPointerPosition.top),o.size.height=o.originalSize.height+o.delta.top,o.size.height<0&&(o.size.height=0),o.vDirection<0&&(o.position.top=o.originalPosition.top-o.delta.top))}},e.prototype.getElementMinMaxSize=function(e,t,i,n){var o=0,s=null,r=e.css("min-"+t);"auto"!=r&&(o=Math.round(parseFloat(r))),"number"==typeof i&&o<i&&(o=i);var a=e.css("max-"+t);return"none"!=a&&"100%"!=a&&(s=Math.round(parseFloat(a))),"number"==typeof n&&(null===s||s>n)&&(s=n),[o,s]},e.prototype.updateElementSize=function(){if(this.currentResizeParams){var e=this.currentResizeParams;e.hDirection&&(e.dynamicSize.width=this.calcRequiredSize(e.element,"width",!!this.options.allowPercentageWidth,e.originalParentContentSize.width,e.originalDynamicSize.width,e.originalSize.width,e.size.width,e.minSize.width,e.maxSize.width,e.sizeCache.width,e.inverseSizeCache.width,e.disableElementSizeUpdates),e.hDirection<0&&!e.disableElementSizeUpdates&&""!==e.element[0].style.left&&e.element.css("left",e.position.left)),e.vDirection&&(e.dynamicSize.height=this.calcRequiredSize(e.element,"height",!!this.options.allowPercentageHeight,e.originalParentContentSize.height,e.originalDynamicSize.height,e.originalSize.height,e.size.height,e.minSize.height,e.maxSize.height,e.sizeCache.height,e.inverseSizeCache.height,e.disableElementSizeUpdates),e.vDirection<0&&!e.disableElementSizeUpdates&&""!==e.element[0].style.top&&e.element.css("top",e.position.top))}},e.prototype.calcRequiredSize=function(e,t,i,n,o,s,a,l,c,u,d,h){a<l&&(a=l),null!==c&&a>c&&(a=c),a=Math.round(a);var p,m=e[0].style[t],g=a+"px",f=!0,y=i&&"number"!=typeof o;if(d.hasOwnProperty(g)?(p=d[g],f=!1):p=i&&y?this.calcPercentageSize(n,a):a,f){var b="width"===t?e.outerWidth:e.outerHeight,v=0,_=void 0,C=void 0,w=void 0,T="number"==typeof p?p:parseFloat(p),E=T,I=y?10:100,x=y?.01:1,S=0,k=null,D=0,O=p,R="width"===t?r()(window).width():2*r()(window).height();do{if(_=this.getRealElementSize(e,t,b,p,u,d)-a,w=Math.abs(T-E),C=Math.abs(_),(null===k||C<k||C===k&&w<D)&&(k=C,O=p,D=w),C<1)break;if(_<0){if(S>0&&(I/=2)<x/10)break;if(S=-1,T>=(y?100:R))break;T+=I,y&&T>100&&(T=100)}else{if(S<0&&(I/=2)<x/10)break;if(S=1,T<=0)break;(T-=I)<0&&(T=0)}p=y?Math.round(100*T)/100+"%":Math.round(T)}while(++v<500);p=O,d.hasOwnProperty(g)||(d[g]=p)}return h?f&&(e[0].style[t]=m):e.css(t,p),p},e.prototype.getRealElementSize=function(e,t,i,n,o,s){var r="number"==typeof n?n+"px":n;if(o.hasOwnProperty(r))return o[r];e.css(t,n).offset();var a=i.call(e);a=Math.round(a),o[r]=a;var l=a+"px";return s.hasOwnProperty(l)||(s[l]=n),a},e.prototype.calcPercentageSize=function(e,t){return Math.round(1e4*Math.min(Math.max(t/e,0),1))/100+"%"},e.defaultOptions={handles:"nw,n,ne,w,e,sw,s,se",insetHandles:!0},e.expectOptionTypes={handles:["string"],insetHandles:["boolean"],minWidth:["number"],maxWidth:["number"],minHeight:["number"],maxHeight:["number"],allowPercentageWidth:["boolean"],allowPercentageHeight:["boolean"],start:["function"],resize:["function"],stop:["function"],afterStart:["function"],afterResize:["function"],afterStop:["function"]},e.handleOptions={nw:{hDirection:n.Left,vDirection:o.Up},n:{hDirection:n.None,vDirection:o.Up},ne:{hDirection:n.Right,vDirection:o.Up},w:{hDirection:n.Left,vDirection:o.None},e:{hDirection:n.Right,vDirection:o.None},sw:{hDirection:n.Left,vDirection:o.Down},s:{hDirection:n.None,vDirection:o.Down},se:{hDirection:n.Right,vDirection:o.Down}},e}();function p(e){return r()("<div>").addClass("wb-ext-resizable-handle wb-ext-resizable-handle-"+e)}var m=function(){function e(e,t,i,n){this.resizable=e,this.id=t,this.extElem=i,this.element=null,this.hDirection=n.hDirection,this.vDirection=n.vDirection,this.mouseMoveListener=this.OnMouseMove.bind(this),this.mouseUpListener=this.OnMouseUp.bind(this),this.mouseDownListener=this.OnMouseDown.bind(this),this.extElem||(this.attach(p(this.id)),this.element&&this.resizable.element.append(this.element))}return e.prototype.attach=function(e){this.element||(this.element=e.on("mousedown touchstart",this.mouseDownListener))},e.prototype.detach=function(){this.element&&(this.element.off("mousedown touchstart",this.mouseDownListener),this.element=null)},e.prototype.destroy=function(){this.extElem?this.detach():this.element&&this.element.remove()},e.prototype.isPrimaryButton=function(e){return void 0===e.button||0===e.button},e.prototype.OnMouseDown=function(e){this.isPrimaryButton(e)&&(e.preventDefault(),e.stopImmediatePropagation(),r()(window).on("mousemove touchmove",this.mouseMoveListener).on("mouseup touchend touchcancel",this.mouseUpListener),this.resizable.OnHandleStart(e,this))},e.prototype.OnMouseMove=function(e){this.isPrimaryButton(e)&&(e.preventDefault(),e.stopImmediatePropagation(),this.resizable.OnHandleResize(e,this))},e.prototype.OnMouseUp=function(e){this.isPrimaryButton(e)&&(e.preventDefault(),e.stopImmediatePropagation(),r()(window).off("mousemove touchmove",this.mouseMoveListener).off("mouseup touchend touchcancel",this.mouseUpListener),this.resizable.OnHandleStop(e,this))},e}();r().fn.extend({resizableExt:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this;return this.each((function(){if("string"==typeof e){var i=r()(this).data("resizableExt");if(i){var o=i.processCommands.apply(i,a([e],t,!1));void 0!==o&&(n=o)}else"instance"===e?n=null:console.error("Extended resizable is not initialized.")}else new h(r()(this),e)})),n}})},"./util/FlowStepUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{forwardFlowStep:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);function s(e,t,i){void 0===i&&(i=!1),e.flowUrl&&(i||e.isB2C)&&o().ajax(e.flowUrl+"forward",{data:JSON.stringify({step:t}),contentType:"application/json",type:"POST",async:!0})}},"./util/HistoryUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{changeLayoutTypeHistoryRecord:function(){return C},createAddElementsHistoryRecord:function(){return v},createLockingChangeHistoryRecord:function(){return E},createMoveElementsHistoryRecord:function(){return w},createRemoveElementsHistoryRecord:function(){return b},createRemoveStrangeMenuHistoryRecord:function(){return D},createSiteLanguagesSnapshotHistoryRecord:function(){return x},createSitePagesSnapshotHistoryRecord:function(){return k},createVisibilityChangeHistoryRecord:function(){return T},wrapElementHistoryRecord:function(){return _}});var n=i("./ElementRegister.ts"),o=i("./jquery-builder.ts"),s=i("./Service.ts"),r=i("./ModeManager.js"),a=i.n(r),l=i("./core/SitePage.ts");function c(e){for(var t,i=0,n=e;i<n.length;i++){var o=n[i],s=window.getElementById(o.parent);if(s){var r=null===(t=o.restoreData)||void 0===t?void 0:t.restore();r?(o.excluded&&(wb_builder.removeFromExcluded(r.id),r.excluded=!1),s.addChild(r,!1,!1,s.getChildAt(o.index),!1),r.onResize(!0),r.updateStyle(!0),s.updateStyle(),delete o.parent,delete o.index,delete o.excluded,delete o.restoreData):console.error("Unable to redo '"+this.type+"': can't restore element "+o.element+" from serialized data")}else console.error("Unable to redo '"+this.type+"': can't find parent element "+o.parent)}}function u(e){for(var t=e.length-1;t>=0;t--){var i=e[t],s=window.getElementById(i.element);if(s){var r=s.getParent();i.parent=r.id,i.index=r.getChildIndex(s),i.restoreData=new n.ElementRestorationData(s),s.remove(o.default.extend(!0,{},i.removalOptions,{noHistory:!0})),i.excluded=s.excluded}else console.error("Unable to undo '"+this.type+"': can't find element "+i.element)}}function d(e){for(var t=e.length-1;t>=0;t--){var i=e[t],o=window.getElementById(i.element);if(o){var s=o.getParent();i.parent=s.id,i.index=s.getChildIndex(o),i.moveElements=[];for(var r=o.getChildren(),a=0;a<r.length;a++)s.addChild(r[a],!1,!1,o),i.moveElements.push(r[a].id);i.restoreData=new n.ElementRestorationData(o),o.remove({noHistory:!0})}else console.error("Unable to undo '"+this.type+"': can't find element "+i.element)}}function h(e){for(var t,i=e.length-1;i>=0;i--){var n=e[i],o=null===(t=n.restoreData)||void 0===t?void 0:t.restore();if(o)if(n.parent&&void 0!==n.index){var s=window.getElementById(n.parent);if(s){if(s.addChild(o,!1,!1,s.getChildAt(n.index)),n.moveElements)for(var r=0;r<n.moveElements.length;r++){var a=window.getElementById(n.moveElements[r]);a?o.addChild(a):console.error("Unable to undo '"+this.type+"': can't find element "+n.moveElements[r])}}else console.error("Unable to undo '"+this.type+"': can't find element "+n.parent)}else console.error("Unable to redo '"+this.type+"': not find parent id");else console.error("Unable to redo '"+this.type+"': can't restore element "+n.element+" from serialized data")}}function p(e){for(var t,i=e.length-1;i>=0;i--){var n=e[i],o=window.getElementById(n.element);if(o){var s=null===(t=n.restoreData)||void 0===t?void 0:t.restore();s?(o.getParent().addChild(s,!1,!1,o,!1),s.addChild(o,!1,!1)):console.error("Unable to redo '"+this.type+"': can't restore element "+n.element+" from serialized data")}else console.error("Unable to undo '"+this.type+"': can't find element "+n.element)}}function m(e){for(var t=e.length-1;t>=0;t--){var i=e[t],o=window.getElementById(i.element);if(o){var s=o.getParent();s?(s.getParent().addChild(o,!1,!1,s,!1),s.remove({noHistory:!0}),i.restoreData=new n.ElementRestorationData(s)):console.error("Unable to undo '"+this.type+"': can't find element")}else console.error("Unable to undo '"+this.type+"': can't find element "+i.element)}}function g(e){for(var t=e.length-1;t>=0;t--){var i=e[t],n=window.getElementById(i.element);if(n){for(var o={},s=0,r=a().getModes();s<r.length;s++){var l=r[s];o[l]=n.getHiddenInMode(l),n.setHiddenInMode(l,i.hidden[l])}i.hidden=o,n.updateVisibility()}else console.error("Unable to undo '"+this.type+"': can't find element "+i.element)}wb_builder.invalidateSiteStructure()}function f(e){for(var t=e.length-1;t>=0;t--){var i=e[t],n=window.getElementById(i.element);if(n){var o=n.isLocked;n.setLocked(i.locked),i.locked=o}else console.error("Unable to undo '"+this.type+"': can't find element "+i.element)}wb_builder.invalidateSiteStructure()}function y(e,t){this.data=e.reverse();for(var i=0,n=this.data;i<n.length;i++){var r=n[i],a=window.getElementById(r.element),l=window.getElementById(r.parent);if(a&&l){var c=o.default.extend({},r),u=a.getParent();r.parent=u.id,r.index=u.getChildIndex(a),r.location=a.getLocation(),r.size=a.getSize(),r.minWidth=a.minWidth,r.maxWidth=a.maxWidth,r.minHeight=a.minHeight,r.maxHeight=a.maxHeight,r.useMinWidth=a.useMinWidth,r.useMaxWidth=a.useMaxWidth,r.useMinHeight=a.useMinHeight,r.useMaxHeight=a.useMaxHeight,r.flexGrow=a.flexGrow,r.flexShrink=a.flexShrink,a.minWidth=c.minWidth,a.maxWidth=c.maxWidth,a.minHeight=c.minHeight,a.maxHeight=c.maxHeight,a.useMinWidth=c.useMinWidth,a.useMaxWidth=c.useMaxWidth,a.useMinHeight=c.useMinHeight,a.useMaxHeight=c.useMaxHeight,a.flexGrow=c.flexGrow,a.flexShrink=c.flexShrink,a.updateSizeLimits(),c.parent===r.parent&&c.index===r.index||(u.removeChild(a),l.addChild(a,!1,!1,l.getChildAt(c.index)||void 0,!1)),a.setLocation(c.location.left,c.location.top),a.setSize(c.size.width,c.size.height),a.onResize(),a.updateStyle(),l.updateStyle()}else console.error("Unable to "+t+" '"+this.type+"': related elements not found.")}s.Service.group.updateGroupBounds()}function b(e,t){for(var i=[],s=0,r=e;s<r.length;s++){var a=r[s],l=a.getParent();i.push({element:a.id,parent:l.id,index:l.getChildIndex(a),excluded:a.excluded,restoreData:new n.ElementRestorationData(a),removalOptions:o.default.extend(!0,{},t,{requiredConfirmations:null})})}wb_builder.historyAdd("removeElements",i.reverse(),c,u)}function v(e){if(e.length){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i];t.push({element:o.id,removalOptions:{deletePages:!0}})}wb_builder.historyAdd("addElements",t,u,c)}}function _(e){var t=[];t.push({element:e.id}),wb_builder.historyAdd("wrapElement",t,d,h)}function C(e,t){var i=[];i.push({element:e.id,restoreData:new n.ElementRestorationData(t)}),wb_builder.historyAdd("changeLayoutType",i,p,m)}function w(e,t,i){if(e.length){for(var n=[],o=0,s=e;o<s.length;o++){var r=s[o],a="object"==typeof t?t:r.getParent();if(a&&r.id){var l="number"==typeof i?i:a.getChildIndex(r);n.push({element:r.id,parent:a.id,index:l,location:r.getLocation(),size:r.getSize(),minWidth:r.minWidth,maxWidth:r.maxWidth,minHeight:r.minHeight,maxHeight:r.maxHeight,useMinWidth:r.useMinWidth,useMaxWidth:r.useMaxWidth,useMinHeight:r.useMinHeight,useMaxHeight:r.useMaxHeight,flexGrow:r.flexGrow,flexShrink:r.flexShrink})}else console.error("Can't create 'moveElements' history record for newly created elements.")}wb_builder.historyAdd("moveElements",n,y,y)}}function T(e){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i];o.switchMode(a().getMode(),a().getMode(),!1,!1);for(var s={},r=0,l=a().getModes();r<l.length;r++){var c=l[r];s[c]=o.getHiddenInMode(c)}t.push({element:o.id,hidden:s})}wb_builder.historyAdd("elementVisibility",t.reverse(),g,g)}function E(e){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i];t.push({element:o.id,locked:o.isLocked})}wb_builder.historyAdd("elementLocking",t.reverse(),f,f)}function I(e){var t=o.default.extend(!0,[],wb_builder.site.languages);wb_builder.site.languages.splice(0,wb_builder.site.languages.length);for(var i=0,n=e.languages;i<n.length;i++){var s=n[i];wb_builder.site.languages.push(s)}e.languages=t;var r=wb_builder.site.getLastDefLang();wb_builder.site.setLastDefLang(e.lastDefLang),e.lastDefLang=r;var a=e.currSelLang;e.currSelLang=wb_builder.site.currSelLang,a!==wb_builder.site.currSelLang&&wb_builder.site.switchLanguage(wb_builder.site.currSelLang),wb_builder.site.onUpdateLanguages()}function x(){var e={lastDefLang:wb_builder.site.getLastDefLang(),currSelLang:wb_builder.site.currSelLang,languages:o.default.extend(!0,[],wb_builder.site.languages)};wb_builder.historyAdd("siteLanguagesSnapshot",e,I,I)}function S(e){var t=wb_builder.site.frontPage?wb_builder.site.frontPage.id:null,i={};for(var n in console.log("Restoring pages snapshot",e.pages),wb_builder.site.pages)wb_builder.site.pages.hasOwnProperty(n)&&(i[n]=wb_builder.site.pages[n].serialize());for(var n in wb_builder.site.frontPage=null,wb_builder.site.pages={},e.pages)if(e.pages.hasOwnProperty(n)){var o=new l.Page(e.pages[n]);wb_builder.site.pages[n]=o,null!==e.frontPageId&&e.frontPageId===o.id&&(wb_builder.site.frontPage=o)}e.frontPageId=t,e.pages=i}function k(){var e={frontPageId:wb_builder.site.frontPage?wb_builder.site.frontPage.id:null,pages:{}};for(var t in wb_builder.site.pages)wb_builder.site.pages.hasOwnProperty(t)&&(e.pages[t]=wb_builder.site.pages[t].serialize());wb_builder.historyAdd("sitePagesSnapshot",e,S,S)}function D(e,t){wb_builder.historyAdd("removeStrangeMenu",{menuId:e,menuUID:t},(function(e){s.Service.menu.removeStrangeMenu(e,!0)}),(function(){}))}},"./util/MathUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MathUtil:function(){return n}});var n=function(){function e(){}return e.calcSizeInPixels=function(e,t){if("number"==typeof e)return e;var i=e.match(/^(-?[0-9]+(?:\.[0-9]+)?)([a-z%]+)$/i);if(i){if(e=parseFloat(i[1]),isNaN(e))return 0;switch(i[2]){case"px":return e;case"%":return t*e/100}}return 0},e}()},"./util/MenuList.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{MenuItemStruct:function(){return a},MenuStruct:function(){return l},buildMenuStruct:function(){return g},clearRemovedMenuList:function(){return h},getItemInfo:function(){return c},getRemovedMenuList:function(){return p},navigate:function(){return m},registerRemovedMenuList:function(){return d}});var n=i("./Service.ts"),o=i("./BuilderEvent.ts"),s=i("./MenuConfirmDialog.ts"),r=i("./util/TextUtil.ts"),a=function(){function e(e){void 0===e&&(e=0),this.lvl=e,this.id=0,this.uID="",this.menuUID=""}return e.fromMenuItem=function(t,i,o){void 0===o&&(o=0);var s=new e(o);return s.miElem=t,s.id=parseInt(""+t.id,10),s.uID=(i?i.menuUID+"_":"")+t.id,s.menuUID=i?i.menuUID:"",s.type=t.type,s.subType=t.subType,s.fullName=__tr(t.name,"__DEFAULT__",__("New Item"),!0,!0),s.name=n.Service.element.truncate(s.fullName,36),"external"===t.type?s.url=t.url:s.pageId=parseInt(""+t.targetId,10),s},e.fromPage=function(t,i){void 0===i&&(i=0);var o=new e(i);return o.type="page",o.subType=t.popupMode?"popup":null,o.fullName=__tr(t.title,"__DEFAULT__",__("New Page"),!0,!0),o.name=o.fullName?n.Service.element.truncate(o.fullName,36):"",o.pageId=parseInt(""+t.id,10),o},e.fromAnchor=function(t,i,o){void 0===o&&(o=0);var s=new e(o);return s.id=parseInt(""+i.id,10),s.uID=i.uID+"_"+t,s.menuUID=i.menuUID,s.type=i.type,s.subType=i.subType,s.fullName=t,s.name=s.fullName?"#"+n.Service.element.truncate(s.fullName,36):"",s.pageId=parseInt(""+i.pageId,10),s.anchor=t,s},e.prototype.isPage=function(){return"page"===this.type&&"popup"!==this.subType},e.prototype.isInternalLink=function(){return"internal"===this.type},e.prototype.isExternal=function(){return"external"===this.type},e.prototype.isAnchor=function(){return"anchor"===this.type},e.prototype.isEmpty=function(){return"empty"===this.type},e.prototype.isPopup=function(){return"page"===this.type&&"popup"===this.subType},e.prototype.isCurrent=function(){return"page"===this.type&&wb_builder.pageId===this.pageId},e.prototype.isInternal=function(){return"internal"===this.type||"page"===this.type||"anchor"===this.type},e.prototype.isLink=function(){return"internal"===this.type||"external"===this.type||"anchor"===this.type||"empty"===this.type},e.prototype.navigate=function(){m(this)},e.prototype.preview=function(){this.isInternal()&&this.pageId&&wb_builder.previewPage(this.pageId,wb_builder.previewToolbar,!1,!0)},e}(),l=function(){function e(e){this.menuElem=e,this.items=[]}return e.fromMenu=function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=!1);var s=new e(t);return e.buildItems(s,null,0,i,n,o),s},e.fromPage=function(t){var i=new e(null);return i.items.push(a.fromPage(t)),i},e.buildItems=function(t,i,n,o,s,r){if(t.menuElem){var l=i||t.menuElem;for(var c in l.items)if(l.items.hasOwnProperty(c)){var u=l.items[c],d=a.fromMenuItem(u,t.menuElem,n);if(t.items.push(d),s&&"page"==d.type&&d.pageId&&"#"+d.pageId in wb_builder.site.pages){var h=wb_builder.site.getPage(d.pageId);r["#"+d.pageId]={name:d.name,isFront:h.isFront}}if(o&&d.isPage()&&d.pageId&&"#"+d.pageId in wb_builder.site.pages){var p=wb_builder.site.getAnchors(wb_builder.site.pages["#"+d.pageId].id);for(var m in p)if(p.hasOwnProperty(m)){var g=a.fromAnchor(p[m],d,n+1);t.items.push(g)}}u.items&&e.buildItems(t,u,n+1,o,s,r)}}},e.prototype.hasOnlyLinks=function(){for(var e=0,t=this.items;e<t.length;e++){var i=t[e];if(i.isPage()||i.isPopup())return!1}return!0},e.prototype.isEditable=function(){return!0},e.prototype.isRemovable=function(){return Object.keys(n.Service.menu.getElemList(!0)).length>1},e.prototype.edit=function(){this.menuElem&&this.isEditable()&&function(e){if(e.elem)e.openEditMenuItems(!1);else if("strange"===e.menuType){var t,i,o,s=e.includePages,r=Object.keys(s).length;if(e.isCommon&&r>0){for(i in s)if(s[i]&&"#"+i in wb_builder.site.pages&&!(o=wb_builder.site.pages["#"+i]).popupMode){t=parseInt(i,10);break}}else if(!e.isCommon&&e.pageId)t=e.pageId;else if(e.isCommon)for(i in wb_builder.site.pages)if(!(o=wb_builder.site.pages[i]).popupMode){t=o.id;break}t&&wb_builder.goToPage(t,null,(function(){setTimeout((function(){var t=n.Service.menu.getMenuByUID(e.menuUID);t&&t.openEditMenuItems(!1)}),500)}))}}(this.menuElem)},e.prototype.remove=function(){var e;this.menuElem&&this.isRemovable()&&((e=this.menuElem)&&(0,s.confirmDelete)((function(){n.Service.menu.removeStrangeMenu(e,!0),"strange"===e.menuType?(d(e),o.GlobalEvents.triggerEvent("pages.changed",new o.PagesChangedBuilderEvent)):e.remove({deletePages:!0}),wb_builder.setPageModified(!0)})))},e}();function c(e,t,i){"#"!==(e=String(e)).substring(0,1)&&(e="#"+e);var o,s,r,a,l={};if(t)l.menu=t;else if(i){var u=n.Service.menu.getMenuByUID(i,!0);u&&(l[i]=u)}else l=n.Service.menu.getElemList(!0);for(s in l)for(a in(r=l[s]).items){if(a===e)return r.items[a];if(o=c(e,r.items[a]))return o}return null}var u=[];function d(e){u.push({menuUID:e.menuUID,pageId:e.pageId,isCommon:e.isCommon})}function h(){u=[]}function p(){return u}function m(e){var t=e instanceof a?e.pageId:e.targetId,i=e instanceof a?e.miElem:e,o=(null==i?void 0:i.anchor)&&"object"==typeof(null==i?void 0:i.anchor)?(null==i?void 0:i.anchor).name:"string"==typeof(null==i?void 0:i.anchor)?null==i?void 0:i.anchor:void 0;if("page"!==e.type&&"internal"!==e.type&&"anchor"!==e.type||!t){if("external"===e.type&&e.url)window.open(e.url,"_blank"),window.focus();else if("empty"!==e.type)throw new Error("Wrong target")}else"anchor"===e.type?function(e,t){var i=function(){wb_builder.bodyInstance.traverseElements((function(e){if(e.anchorProp===t&&e.elem){var i=e.elem.offset().top-wb_builder.bodyInstance.getCurrentPaddingTop()-n.Service.uiManager.getManager().getToolbarHeight()-wb_builder.viewportSizeControls.getElem().outerHeight();return window.scrollTo(0,i),1}return 0}))};e==wb_builder.pageId?i():wb_builder.goToPage(e,null,i)}(t,o):wb_builder.goToPage(t)}function g(e,t,i,o){void 0===t&&(t=!1),void 0===i&&(i=null),void 0===o&&(o=!1);var s={};i?s[i.menuId]=i:s=n.Service.menu.getElemList(!0);var c,u=[],d={};for(var h in s)if(s.hasOwnProperty(h)){var p=l.fromMenu(s[h],e,o,d);p.items.length>0&&u.push(p)}var m=!1;e:for(var g=0,f=u;g<f.length;g++)for(var y=0,b=f[g].items;y<b.length;y++){(T=b[y]).isPage()&&(m=!0);break e}if(o)for(var v=0,_=u;v<_.length;v++)for(var C=0,w=_[v].items;C<w.length;C++){var T,E="";(T=w[C]).isPage()&&!T.anchor?E="#"+T.pageId in d&&d["#"+T.pageId].isFront?"home":"folder-open":T.isLink()?E="share-alt":T.isPopup()&&(E="modal-window");var I="";T.isExternal()?I="("+__("external")+")":T.isAnchor()?I="("+__("anchor")+")":T.isEmpty()?I="("+__("Empty").toLowerCase()+")":T.isPopup()?I="("+__("Popup").toLowerCase()+")":T.isInternalLink()&&"#"+T.pageId in d&&(I="→ "+d["#"+T.pageId].name),T.name=(E?'<span class="glyphicon glyphicon-'+E+'"></span>':"")+(0,r.stripTags)(T.name)+(I?' <span class="sub">'+I+"</span>":"")}if(t&&!m){c=wb_builder.site.pages["#"+wb_builder.pageId],u.length||u.push(l.fromPage(c));var x=u[0],S=new n.Service.menu.MenuItem({type:"page",name:c.title?c.title:__("Page")+" #"+c.id,targetId:x.items[0].pageId});x.items.unshift(a.fromMenuItem(S,x.menuElem,0))}return u}},"./util/TextUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{TextUtil:function(){return s},escapeHtml:function(){return c},sanitizeAlias:function(){return a},stripTags:function(){return u},trim:function(){return l},urlEncode:function(){return r}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(){}return e.detectCharacterDimensions=function(e,t){null!==this.sizeDetector&&this.sizeDetectorSpan&&this.sizeDetectorBaseLine||(this.sizeDetector=o()("<div>").css({position:"fixed",left:0,top:0,width:"auto",height:"auto",visibility:"hidden",whiteSpace:"nowrap"}),this.sizeDetectorSpan=o()("<span>").css({display:"inline-block",verticalAlign:"baseline",fontSize:"1000px",lineHeight:"1em",whiteSpace:"nowrap"}),this.sizeDetectorBaseLine=o()("<div>").css({display:"inline-block",width:0,height:0,verticalAlign:"baseline"}),this.sizeDetector.append(this.sizeDetectorSpan)),this.sizeDetectorSpan.css("font-family",e).html(t),o()(document.body).append(this.sizeDetector);var i=this.sizeDetectorSpan[0].getBoundingClientRect(),n={width:i.width,height:i.height,baseLine:i.height};this.sizeDetectorSpan.append(this.sizeDetectorBaseLine);var s=this.sizeDetectorBaseLine[0].getBoundingClientRect();return n.baseLine=s.top-i.top,this.sizeDetectorBaseLine.detach(),this.sizeDetector.detach(),n},e.sizeDetector=null,e.sizeDetectorSpan=null,e.sizeDetectorBaseLine=null,e}();function r(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=encodeURI(e).replace(/\(/g,"%28").replace(/\)/g,"%29");return t&&(n=n.replace(/\'/g,"%27")),i&&(n=n.replace(/#/g,"%23")),n}function a(e){var t="-";return e=e.replace(/<\/?[^>]+>/gi,"").replace(/%([a-fA-F0-9][a-fA-F0-9])/g,"---$1---").replace("%","").replace(/---([a-fA-F0-9][a-fA-F0-9])--/,"%$1").replace(/&.+?;/,"").replace(".",t).replace(/—|–/g,t).replace(/¡|¿|«|»|‹|›|‘|’|“|”|‚|‛|„|‟|©|®|°|…|™|̀|́|̄|̌|×|\!|@|#|\$|%|\^|&|\*|\(|\)|"|\|/g,"").replace(/\s+/g,t).replace(/-+/g,t).replace(/^-*(.*)-*$/,"$1"),decodeURIComponent(e)}function l(e,t){for(var i={},n=void 0!==t?t.split(""):[" "],o=0;o<n.length;o++)i[n[o]]=!0;for(var s=!0;s;){s=!1;var r=e.substring(0,1),a=e.substring(e.length-1);r in i&&(e=e.substring(1),s=!0),a in i&&(e=e.substring(0,e.length-1),s=!0)}return e}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(e){return e&&("string"==typeof e||e.hasOwnProperty("replace"))?o().trim(e.replace(/<\/?[^>]+(>|$)|<br>/g,"")):e}},"./util/VideoThumbGenerator.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{generateThumb:function(){return l},lookupThumb:function(){return c}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=i("./core/BuilderConfig.ts"),r={},a=function(){function e(e,t,i){var n=this;this.fileName=e,this.thumbElem=t,this.deferred=i,this.videoElem=document.createElement("video"),this.videoElem.muted=!0,this.videoElem.autoplay=!1,this.videoElem.loop=!1,this.videoElem.addEventListener("loadeddata",(function(){return n.onFirstFrame()})),this.videoElem.addEventListener("seeked",(function(){return n.onSeekDone()})),this.videoElem.addEventListener("error",(function(){return n.onError()})),this.videoElem.style.position="absolute",this.videoElem.style.left="0px",this.videoElem.style.top="0px",this.videoElem.style.width="60px",this.videoElem.style.height="52px",this.videoElem.src=wb_builder.makeLocalUrl(wb_builder.userGalleryUrl+e),t.append(this.videoElem),this.loaderElem=o()("<span>").addClass("fa fa-spinner fa-pulse").css({position:"absolute",top:2,left:2}),t.append(this.loaderElem)}return e.prototype.dispose=function(){this.thumbElem[0].removeChild(this.videoElem),this.loaderElem.detach()},e.prototype.onError=function(){this.deferred.reject(),this.dispose()},e.prototype.onFirstFrame=function(){this.videoElem.duration<=0?this.onError():this.videoElem.currentTime=Math.min(5,this.videoElem.duration)},e.prototype.onSeekDone=function(){if(!(this.videoElem.currentTime<=0)){var e=document.createElement("canvas");e.width=60,e.height=52;var t=e.getContext("2d");if(t){t.drawImage(this.videoElem,0,0,60,52);var i=e.toDataURL("image/png"),n=this.fileName;o().post(s.wbConfig.getUrl("upload/set-thumb"),JSON.stringify({file:n,thumbData:i})).done((function(e){e&&e.ok&&e.thumbUrl&&"string"==typeof e.thumbUrl&&(r[n]=e.thumbUrl)})),i?this.deferred.resolve(i):this.deferred.reject()}else this.deferred.reject();this.dispose()}},e}();function l(e,t){var i=o().Deferred();return new a(e,t,i),i.promise()}function c(e,t){var i=e.split("/"),n=i[i.length-1],l=o().Deferred();return n in r?l.resolve(r[n]):o().post(s.wbConfig.getUrl("upload/get-thumb"),JSON.stringify({file:n})).done((function(e){e&&e.ok&&e.thumbUrl&&"string"==typeof e.thumbUrl?(r[n]=e.thumbUrl,l.resolve(e.thumbUrl)):t?new a(n,t,l):l.reject()})).fail((function(){l.reject()})),l.promise()}},"./util/WindowAutoScrollUtil.ts":function(e,t,i){"use strict";i.r(t),i.d(t,{WindowAutoScrollUtil:function(){return s}});var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n),s=function(){function e(){this.timeout=null,this.currentClientPos=null,this.currentDeltaFunction=null,this.currentCallback=null}return e.prototype.start=function(t,i,n){this.currentClientPos=t,this.currentDeltaFunction=n||e.defaultDeltaFunction,this.currentCallback=i,this.tick()},e.prototype.stop=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e.prototype.tick=function(){var t=this;if(this.stop(),this.currentClientPos&&this.currentDeltaFunction&&this.currentCallback){var i=o().extend({},this.currentClientPos),n=this.currentDeltaFunction(i);(n.left||n.top)&&(window.scrollTo(Math.min(document.body.clientWidth-window.innerWidth,window.scrollX+n.left),Math.min(document.body.clientHeight-window.innerHeight,window.scrollY+n.top)),this.timeout=setTimeout((function(){return t.tick()}),e.INTERVAL));try{this.currentCallback(i,{left:i.left+window.scrollX,top:i.top+window.scrollY})}catch(e){throw this.stop(),e}}},e.defaultDeltaFunction=function(t){var i={left:0,top:0},n=document.body.getBoundingClientRect(),s=wb_builder.body[0].getBoundingClientRect(),r=o()(window).width(),a=o()(window).height(),l=s.left-n.left,c=s.top-n.top,u=n.right-s.right,d=n.bottom-s.bottom;return t.top<e.RANGE+c?i.top=Math.min(Math.max(t.top-e.RANGE-c,-e.RANGE),0):t.top>a-e.RANGE-d&&(i.top=Math.min(Math.max(t.top+e.RANGE+d-a,0),e.RANGE)),t.left<e.RANGE+l?i.left=Math.min(Math.max(t.left-e.RANGE-l,-e.RANGE),0):t.left>r-e.RANGE-u&&(i.left=Math.min(Math.max(t.left+e.RANGE+u-r,0),e.RANGE)),i},e.fitHtmlElementIntoWindow=function(e,t){void 0===t&&(t=5);var i=e[0].getBoundingClientRect(),n=o()(window),s=0,r=0,a=n.width()-i.width-t;i.left>a&&(s=a-i.left),i.left+s<t&&(s=t-i.left),a=n.height()-i.height-t,i.top>a&&(r=a-i.top),i.top+r<t&&(r=t-i.top),e.css({left:parseFloat(e.css("left"))+s,top:parseFloat(e.css("top"))+r})},e.INTERVAL=15,e.RANGE=50,e}()},"./util/amd-interop.ts":function(e,t,i){"use strict";i.r(t);var n=i("./lib/jquery-1.11.3.min.js"),o=i.n(n);function s(e,t,i){return"require"==i?function(i){return"require"==i?(console.error("Can't require with require"),null):s(e,t,i)}:"exports"==i&&e?e:"jquery"==i?o():t(function(e,t){if(!(t in e)){var i=!1;if("."!=t[0]){var n="./"+t;if(n in e)return n;i=!0}if(t.length>3){var o=t.substr(t.length-3,3);if(".ts"!=o&&".js"!=o){var s=t+".ts";if(s in e)return s;if(i&&(s="./"+s)in e)return s;if((s=t+".js")in e)return s;if(i&&(s="./"+s)in e)return s;if((s="WB_"+t+".class.js")in e)return s;if(i&&(s="./"+s)in e)return s}}console.error("Module '".concat(t,"' not found"))}return t}(t.m,i))}window.define=function(e,t,n){var r=this;i.m[e]=function(e,i,a){o();for(var l=[],c=0,u=t;c<u.length;c++){var d=u[c];l.push(s(i,a,d))}a.d(i,n.apply(r,l))}},window.require=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var a=r[o];n.push(s(null,i,a))}t.apply({},n)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./main.ts")})();